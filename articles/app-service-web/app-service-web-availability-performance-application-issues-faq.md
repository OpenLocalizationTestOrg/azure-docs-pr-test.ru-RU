---
title: "Вопросы и ответы о производительности приложений в веб-приложениях Azure | Документация Майкрософт"
description: "Ответы на часто задаваемые вопросы о доступности, производительности и проблемах приложений в веб-приложениях службы приложений Azure."
services: app-service\web
documentationcenter: 
author: genlin
manager: cshepard
editor: 
tags: top-support-issue
ms.assetid: 2fa5ee6b-51a6-4237-805f-518e6c57d11b
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 7/10/2017
ms.author: genli
ms.openlocfilehash: 2d2408c103bb1908392da35bcc7e7af92ea4aeb6
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="application-performance-faqs-for-web-apps-in-azure"></a><span data-ttu-id="ba041-103">Вопросы и ответы о производительности приложений в веб-приложениях Azure</span><span class="sxs-lookup"><span data-stu-id="ba041-103">Application performance FAQs for Web Apps in Azure</span></span>

<span data-ttu-id="ba041-104">В этой статье приведены ответы на часто задаваемые вопросы о проблемах производительности приложений в [веб-приложениях службы приложений Azure](https://azure.microsoft.com/services/app-service/web/).</span><span class="sxs-lookup"><span data-stu-id="ba041-104">This article has answers to frequently asked questions (FAQs) about application performance issues for the [Web Apps feature of Azure App Service](https://azure.microsoft.com/services/app-service/web/).</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="why-is-my-app-slow"></a><span data-ttu-id="ba041-105">Почему приложение работает медленно?</span><span class="sxs-lookup"><span data-stu-id="ba041-105">Why is my app slow?</span></span>

<span data-ttu-id="ba041-106">На снижение производительности приложения могут влиять несколько факторов.</span><span class="sxs-lookup"><span data-stu-id="ba041-106">Multiple factors might contribute to slow app performance.</span></span> <span data-ttu-id="ba041-107">Подробные инструкции по устранению неполадок см. в разделе [Устранение причин низкой производительности веб-приложения в службе приложений Azure](app-service-web-troubleshoot-performance-degradation.md).</span><span class="sxs-lookup"><span data-stu-id="ba041-107">For detailed troubleshooting steps, see [Troubleshoot slow web app performance](app-service-web-troubleshoot-performance-degradation.md).</span></span>

## <a name="how-do-i-troubleshoot-a-high-cpu-consumption-scenario"></a><span data-ttu-id="ba041-108">Как устранить проблемы, связанные с высоким уровнем потребления ресурсов ЦП?</span><span class="sxs-lookup"><span data-stu-id="ba041-108">How do I troubleshoot a high CPU-consumption scenario?</span></span>

<span data-ttu-id="ba041-109">В некоторых сценариях с высоким уровнем потребления ресурсов ЦП приложение действительно требует большего объема вычислительных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="ba041-109">In some high CPU-consumption scenarios, your app might truly require more computing resources.</span></span> <span data-ttu-id="ba041-110">В этом случае мы советуем выбрать более высокий уровень служб, за счет чего приложение получит все необходимые ресурсы.</span><span class="sxs-lookup"><span data-stu-id="ba041-110">In that case, consider scaling to a higher service tier so the application gets all the resources it needs.</span></span> <span data-ttu-id="ba041-111">Кроме того, причиной высокого уровня потребления ресурсов ЦП может стать неправильный цикл или процедура кодирования.</span><span class="sxs-lookup"><span data-stu-id="ba041-111">Other times, high CPU consumption might be caused by a bad loop or by a coding practice.</span></span> <span data-ttu-id="ba041-112">Чтобы определить причину более активного использования ресурсов ЦП, необходимо выполнить два действия.</span><span class="sxs-lookup"><span data-stu-id="ba041-112">Getting insight into what's triggering increased CPU consumption is a two-part process.</span></span> <span data-ttu-id="ba041-113">Сначала создайте дамп процесса, а затем выполните его анализ.</span><span class="sxs-lookup"><span data-stu-id="ba041-113">First, create a process dump, and then analyze the process dump.</span></span> <span data-ttu-id="ba041-114">Дополнительные сведения см. в записи блога [How to capture and analyze a dump file when intermittent High CPU happens on Azure Web App](https://blogs.msdn.microsoft.com/asiatech/2016/01/20/how-to-capture-dump-when-intermittent-high-cpu-happens-on-azure-web-app/) (Создание и анализ файла дампа при высоком уровне потребления ресурсов ЦП в веб-приложениях Azure).</span><span class="sxs-lookup"><span data-stu-id="ba041-114">For more information, see [Capture and analyze a dump file for high CPU consumption for Web Apps](https://blogs.msdn.microsoft.com/asiatech/2016/01/20/how-to-capture-dump-when-intermittent-high-cpu-happens-on-azure-web-app/).</span></span>

## <a name="how-do-i-troubleshoot-a-high-memory-consumption-scenario"></a><span data-ttu-id="ba041-115">Как устранить проблемы, связанные с высоким уровнем потребления памяти?</span><span class="sxs-lookup"><span data-stu-id="ba041-115">How do I troubleshoot a high memory-consumption scenario?</span></span>

<span data-ttu-id="ba041-116">В некоторых сценариях с высоким уровнем потребления памяти приложение действительно требует большего объема вычислительных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="ba041-116">In some high memory-consumption scenarios, your app might truly require more computing resources.</span></span> <span data-ttu-id="ba041-117">В этом случае мы советуем выбрать более высокий уровень служб, за счет чего приложение получит все необходимые ресурсы.</span><span class="sxs-lookup"><span data-stu-id="ba041-117">In that case, consider scaling to a higher service tier so the application gets all the resources it needs.</span></span> <span data-ttu-id="ba041-118">Кроме того, причиной высокого уровня потребления и утечки памяти может стать ошибка в коде</span><span class="sxs-lookup"><span data-stu-id="ba041-118">Other times, a bug in the code might cause a memory leak.</span></span> <span data-ttu-id="ba041-119">или процедура кодирования.</span><span class="sxs-lookup"><span data-stu-id="ba041-119">A coding practice also might increase memory consumption.</span></span> <span data-ttu-id="ba041-120">Чтобы определить причину активного использования памяти, необходимо выполнить два действия.</span><span class="sxs-lookup"><span data-stu-id="ba041-120">Getting insight into what's triggering high memory consumption is a two-part process.</span></span> <span data-ttu-id="ba041-121">Сначала создайте дамп процесса, а затем выполните его анализ.</span><span class="sxs-lookup"><span data-stu-id="ba041-121">First, create a process dump, and then analyze the process dump.</span></span> <span data-ttu-id="ba041-122">Средство диагностики аварийного завершения из коллекции Azure Site Extensions позволяет эффективно выполнять оба этих действия.</span><span class="sxs-lookup"><span data-stu-id="ba041-122">Crash Diagnoser from the Azure Site Extension Gallery can efficiently perform both these steps.</span></span> <span data-ttu-id="ba041-123">Дополнительные сведения см. в записи блога [How to capture and analyze dump for intermittent High Memory on Azure Web App](https://blogs.msdn.microsoft.com/asiatech/2016/02/02/how-to-capture-and-analyze-dump-for-intermittent-high-memory-on-azure-web-app/) (Создание и анализ файла дампа при высоком уровне потребления памяти в веб-приложениях Azure).</span><span class="sxs-lookup"><span data-stu-id="ba041-123">For more information, see [Capture and analyze a dump file for intermittent high memory for Web Apps](https://blogs.msdn.microsoft.com/asiatech/2016/02/02/how-to-capture-and-analyze-dump-for-intermittent-high-memory-on-azure-web-app/).</span></span>

## <a name="how-do-i-automate-app-service-web-apps-by-using-powershell"></a><span data-ttu-id="ba041-124">Как автоматизировать задачи веб-приложений службы приложений с помощью PowerShell?</span><span class="sxs-lookup"><span data-stu-id="ba041-124">How do I automate App Service web apps by using PowerShell?</span></span>

<span data-ttu-id="ba041-125">Настроить веб-приложения службы приложений и управлять ими можно с помощью командлетов PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ba041-125">You can use PowerShell cmdlets to manage and maintain App Service web apps.</span></span> <span data-ttu-id="ba041-126">В записи блога [Automate web apps hosted in Azure App Service by using PowerShell](https://blogs.msdn.microsoft.com/puneetgupta/2016/03/21/automating-webapps-hosted-in-azure-app-service-through-powershell-arm-way/) (Автоматизация веб-приложений, размещенных в службе приложений Azure с помощью PowerShell) описана процедура автоматизации стандартных задач с помощью командлетов PowerShell на основе Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="ba041-126">In our blog post [Automate web apps hosted in Azure App Service by using PowerShell](https://blogs.msdn.microsoft.com/puneetgupta/2016/03/21/automating-webapps-hosted-in-azure-app-service-through-powershell-arm-way/), we describe how to use Azure Resource Manager-based PowerShell cmdlets to automate common tasks.</span></span> <span data-ttu-id="ba041-127">Кроме того, в этой записи блога приведен пример кода для различных задач управления веб-приложениями.</span><span class="sxs-lookup"><span data-stu-id="ba041-127">The blog post also has sample code for various web apps management tasks.</span></span> <span data-ttu-id="ba041-128">Описание и синтаксис всех командлетов веб-приложений службы приложений см. в [этой статье](https://docs.microsoft.com/powershell/module/azurerm.websites/?view=azurermps-4.0.0).</span><span class="sxs-lookup"><span data-stu-id="ba041-128">For descriptions and syntax for all App Service web apps cmdlets, see [AzureRM.Websites](https://docs.microsoft.com/powershell/module/azurerm.websites/?view=azurermps-4.0.0).</span></span>

## <a name="how-do-i-view-my-web-apps-event-logs"></a><span data-ttu-id="ba041-129">Как просмотреть журналы событий веб-приложения?</span><span class="sxs-lookup"><span data-stu-id="ba041-129">How do I view my web app's event logs?</span></span>

<span data-ttu-id="ba041-130">Чтобы просмотреть журналы событий веб-приложения, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="ba041-130">To view your web app's event logs:</span></span>

1. <span data-ttu-id="ba041-131">Перейдите на [веб-сайт Kudu](https://*yourwebsitename*.scm.azurewebsites.net).</span><span class="sxs-lookup"><span data-stu-id="ba041-131">Sign in to your [Kudu website](https://*yourwebsitename*.scm.azurewebsites.net).</span></span>
2. <span data-ttu-id="ba041-132">В меню выберите **Консоль отладки** > **CMD**.</span><span class="sxs-lookup"><span data-stu-id="ba041-132">In the menu, select **Debug Console** > **CMD**.</span></span>
3. <span data-ttu-id="ba041-133">Выберите папку **LogFiles**.</span><span class="sxs-lookup"><span data-stu-id="ba041-133">Select the **LogFiles** folder.</span></span>
4. <span data-ttu-id="ba041-134">Чтобы просмотреть журналы событий, щелкните значок карандаша рядом с файлом **eventlog.xml**.</span><span class="sxs-lookup"><span data-stu-id="ba041-134">To view event logs, select the pencil icon next to **eventlog.xml**.</span></span>
5. <span data-ttu-id="ba041-135">Чтобы загрузить журналы, выполните командлет PowerShell `Save-AzureWebSiteLog -Name webappname`.</span><span class="sxs-lookup"><span data-stu-id="ba041-135">To download the logs, run the PowerShell cmdlet `Save-AzureWebSiteLog -Name webappname`.</span></span>

## <a name="how-do-i-capture-a-user-mode-memory-dump-of-my-web-app"></a><span data-ttu-id="ba041-136">Как создать дамп памяти пользовательского режима веб-приложения?</span><span class="sxs-lookup"><span data-stu-id="ba041-136">How do I capture a user-mode memory dump of my web app?</span></span>

<span data-ttu-id="ba041-137">Чтобы создать дамп памяти пользовательского режима веб-приложения, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="ba041-137">To capture a user-mode memory dump of your web app:</span></span>

1. <span data-ttu-id="ba041-138">Перейдите на [веб-сайт Kudu](https://*yourwebsitename*.scm.azurewebsites.net).</span><span class="sxs-lookup"><span data-stu-id="ba041-138">Sign in to your [Kudu website](https://*yourwebsitename*.scm.azurewebsites.net).</span></span>
2. <span data-ttu-id="ba041-139">Откройте меню **Обозреватель процессов**.</span><span class="sxs-lookup"><span data-stu-id="ba041-139">Select the **Process Explorer** menu.</span></span>
3. <span data-ttu-id="ba041-140">Щелкните правой кнопкой мыши процесс **w3wp.exe** или процесс веб-задания.</span><span class="sxs-lookup"><span data-stu-id="ba041-140">Right-click the **w3wp.exe** process or your WebJob process.</span></span>
4. <span data-ttu-id="ba041-141">Выберите **Download Memory Dump** (Загрузить дамп памяти) > **Full Dump** (Полный дамп).</span><span class="sxs-lookup"><span data-stu-id="ba041-141">Select **Download Memory Dump** > **Full Dump**.</span></span>

## <a name="how-do-i-view-process-level-info-for-my-web-app"></a><span data-ttu-id="ba041-142">Как просмотреть сведения уровня процесса о веб-приложении?</span><span class="sxs-lookup"><span data-stu-id="ba041-142">How do I view process-level info for my web app?</span></span>

<span data-ttu-id="ba041-143">Сведения уровня процесса о веб-приложении можно просмотреть двумя способами:</span><span class="sxs-lookup"><span data-stu-id="ba041-143">You have two options for viewing process-level information for your web app:</span></span>

*   <span data-ttu-id="ba041-144">На портале Azure выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="ba041-144">In the Azure portal:</span></span>
    1. <span data-ttu-id="ba041-145">Откройте **обозреватель процессов** веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="ba041-145">Open the **Process Explorer** for the web app.</span></span>
    2. <span data-ttu-id="ba041-146">Чтобы просмотреть сведения, выберите процесс **w3wp.exe**.</span><span class="sxs-lookup"><span data-stu-id="ba041-146">To see the details, select the **w3wp.exe** process.</span></span>
*   <span data-ttu-id="ba041-147">В консоли Kudu:</span><span class="sxs-lookup"><span data-stu-id="ba041-147">In the Kudu console:</span></span>
    1. <span data-ttu-id="ba041-148">Перейдите на [веб-сайт Kudu](https://*yourwebsitename*.scm.azurewebsites.net).</span><span class="sxs-lookup"><span data-stu-id="ba041-148">Sign in to your [Kudu website](https://*yourwebsitename*.scm.azurewebsites.net).</span></span>
    2. <span data-ttu-id="ba041-149">Откройте меню **Обозреватель процессов**.</span><span class="sxs-lookup"><span data-stu-id="ba041-149">Select the **Process Explorer** menu.</span></span>
    3. <span data-ttu-id="ba041-150">Откройте меню **Свойства** процесса **w3wp.exe**.</span><span class="sxs-lookup"><span data-stu-id="ba041-150">For the **w3wp.exe** process, select **Properties**.</span></span>

## <a name="when-i-browse-to-my-app-i-see-error-403---this-web-app-is-stopped-how-do-i-resolve-this"></a><span data-ttu-id="ba041-151">При переходе к приложению возникает ошибка 403 "Это веб-приложение остановлено".</span><span class="sxs-lookup"><span data-stu-id="ba041-151">When I browse to my app, I see "Error 403 - This web app is stopped."</span></span> <span data-ttu-id="ba041-152">Как решить эту проблему?</span><span class="sxs-lookup"><span data-stu-id="ba041-152">How do I resolve this?</span></span>

<span data-ttu-id="ba041-153">Эта ошибка может возникнуть в трех случаях:</span><span class="sxs-lookup"><span data-stu-id="ba041-153">Three conditions can cause this error:</span></span>

* <span data-ttu-id="ba041-154">затраты на веб-приложение достигли установленного предела и сайт был отключен;</span><span class="sxs-lookup"><span data-stu-id="ba041-154">The web app has reached a billing limit and your site has been disabled.</span></span>
* <span data-ttu-id="ba041-155">веб-приложение остановлено на портале;</span><span class="sxs-lookup"><span data-stu-id="ba041-155">The web app has been stopped in the portal.</span></span>
* <span data-ttu-id="ba041-156">для веб-приложения достигнут предел квоты на ресурсы, который применяется к планам масштабирования "Бесплатно" или "Общий".</span><span class="sxs-lookup"><span data-stu-id="ba041-156">The web app has reached a resource quota limit that might apply to a Free or Shared scale service plan.</span></span>

<span data-ttu-id="ba041-157">Чтобы определить причину ошибки и устранить ее, выполните указания из записи блога [Azure Web Apps: Error 403 — This web app is stopped](https://blogs.msdn.microsoft.com/waws/2016/01/05/azure-web-apps-error-403-this-web-app-is-stopped/) (Ошибка 403 "Это веб-приложение остановлено" в веб-приложениях Azure).</span><span class="sxs-lookup"><span data-stu-id="ba041-157">To see what is causing the error and to resolve the issue, follow the steps in [Web Apps: "Error 403 – This web app is stopped"](https://blogs.msdn.microsoft.com/waws/2016/01/05/azure-web-apps-error-403-this-web-app-is-stopped/).</span></span>

## <a name="where-can-i-learn-more-about-quotas-and-limits-for-various-app-service-plans"></a><span data-ttu-id="ba041-158">Где можно просмотреть сведения о квотах и ограничениях для различных планов службы приложений?</span><span class="sxs-lookup"><span data-stu-id="ba041-158">Where can I learn more about quotas and limits for various App Service plans?</span></span>

<span data-ttu-id="ba041-159">Сведения о квотах и ограничениях см. в [этом разделе](../azure-subscription-service-limits.md#app-service-limits).</span><span class="sxs-lookup"><span data-stu-id="ba041-159">For information about quotas and limits, see [App Service limits](../azure-subscription-service-limits.md#app-service-limits).</span></span> 

## <a name="how-do-i-decrease-the-response-time-for-the-first-request-after-idle-time"></a><span data-ttu-id="ba041-160">Как уменьшить время отклика при первом запросе после времени простоя?</span><span class="sxs-lookup"><span data-stu-id="ba041-160">How do I decrease the response time for the first request after idle time?</span></span>

<span data-ttu-id="ba041-161">По умолчанию в случае простоя в течение заданного периода времени веб-приложения выгружаются.</span><span class="sxs-lookup"><span data-stu-id="ba041-161">By default, web apps are unloaded if they are idle for a set period of time.</span></span> <span data-ttu-id="ba041-162">Это позволяет сэкономить системные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="ba041-162">This way, the system can conserve resources.</span></span> <span data-ttu-id="ba041-163">Недостатком является то, что ответ на первый запрос, отравленный после выгрузки веб-приложения, возвращается дольше. Это позволяет веб-приложению загрузиться и приступить к обработке ответов.</span><span class="sxs-lookup"><span data-stu-id="ba041-163">The downside is that the response to the first request after the web app is unloaded is longer, to allow the web app to load and start serving responses.</span></span> <span data-ttu-id="ba041-164">При использовании планов обслуживания "Базовый" и "Стандартный" вы можете включить параметр **Всегда включено**, чтобы предотвратить выгрузку приложения.</span><span class="sxs-lookup"><span data-stu-id="ba041-164">In Basic and Standard service plans, you can turn on the **Always On** setting to keep the app always loaded.</span></span> <span data-ttu-id="ba041-165">Это позволит избежать более длительного времени загрузки после простоя приложения.</span><span class="sxs-lookup"><span data-stu-id="ba041-165">This eliminates longer load times after the app is idle.</span></span> <span data-ttu-id="ba041-166">Чтобы включить параметр **Всегда включено**, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="ba041-166">To change the **Always On** setting:</span></span>

1. <span data-ttu-id="ba041-167">Откройте портал Azure и перейдите к своему веб-приложению.</span><span class="sxs-lookup"><span data-stu-id="ba041-167">In the Azure portal, go to your web app.</span></span>
2. <span data-ttu-id="ba041-168">Выберите **Параметры приложения**.</span><span class="sxs-lookup"><span data-stu-id="ba041-168">Select **Application settings**.</span></span>
3. <span data-ttu-id="ba041-169">Установите переключатель **Всегда включено** в положение **Вкл.**</span><span class="sxs-lookup"><span data-stu-id="ba041-169">For **Always On**, select **On**.</span></span>

## <a name="how-do-i-turned-on-failed-request-tracing"></a><span data-ttu-id="ba041-170">Как включить трассировку неудачно завершенных запросов?</span><span class="sxs-lookup"><span data-stu-id="ba041-170">How do I turned on failed request tracing?</span></span>

<span data-ttu-id="ba041-171">Чтобы включить трассировку неудачно завершенных запросов, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="ba041-171">To turn on failed request tracing:</span></span>

1. <span data-ttu-id="ba041-172">Откройте портал Azure и перейдите к своему веб-приложению.</span><span class="sxs-lookup"><span data-stu-id="ba041-172">In the Azure portal, go to your web app.</span></span>
3. <span data-ttu-id="ba041-173">Выберите **Все параметры** > **Журналы диагностики**.</span><span class="sxs-lookup"><span data-stu-id="ba041-173">Select **All Settings** > **Diagnostics Logs**.</span></span>
4. <span data-ttu-id="ba041-174">Установите переключатель **Трассировка неудачно завершенных запросов** в положение **Вкл.**</span><span class="sxs-lookup"><span data-stu-id="ba041-174">For **Failed Request Tracing**, select **On**.</span></span>
5. <span data-ttu-id="ba041-175">Щелкните **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="ba041-175">Select **Save**.</span></span>
6. <span data-ttu-id="ba041-176">В колонке веб-приложения выберите **Средства**.</span><span class="sxs-lookup"><span data-stu-id="ba041-176">On the web app blade, select **Tools**.</span></span>
7. <span data-ttu-id="ba041-177">Выберите **Visual Studio Online**.</span><span class="sxs-lookup"><span data-stu-id="ba041-177">Select **Visual Studio Online**.</span></span>
8. <span data-ttu-id="ba041-178">Если этот параметр **выключен**, **включите** его.</span><span class="sxs-lookup"><span data-stu-id="ba041-178">If the setting is not **On**, select **On**.</span></span>
9. <span data-ttu-id="ba041-179">Выберите **Перейти**.</span><span class="sxs-lookup"><span data-stu-id="ba041-179">Select **Go**.</span></span>
10. <span data-ttu-id="ba041-180">Выберите **Web.config**.</span><span class="sxs-lookup"><span data-stu-id="ba041-180">Select **Web.config**.</span></span>
11. <span data-ttu-id="ba041-181">В разделе system.webServer добавьте следующую конфигурацию (для записи определенного URL-адреса):</span><span class="sxs-lookup"><span data-stu-id="ba041-181">In system.webServer, add this configuration (to capture a specific URL):</span></span>

    ```
    <system.webServer>
    <tracing> <traceFailedRequests>
    <remove path="*api*" />
    <add path="*api*">
    <traceAreas>
    <add provider="ASP" verbosity="Verbose" />
    <add provider="ASPNET" areas="Infrastructure,Module,Page,AppServices" verbosity="Verbose" />
    <add provider="ISAPI Extension" verbosity="Verbose" />
    <add provider="WWW Server" areas="Authentication,Security,Filter,StaticFile,CGI,Compression, Cache,RequestNotifications,Module,FastCGI" verbosity="Verbose" />
    </traceAreas>
    <failureDefinitions statusCodes="200-999" />
    </add> </traceFailedRequests>
    </tracing>
    ```
12. <span data-ttu-id="ba041-182">Чтобы устранить проблемы, которые приводят к снижению производительности, добавьте следующую конфигурацию (если запись запроса занимает более 30 секунд):</span><span class="sxs-lookup"><span data-stu-id="ba041-182">To troubleshoot slow-performance issues, add this configuration (if the capturing request is taking more than 30 seconds):</span></span>
    ```
    <system.webServer>
    <tracing> <traceFailedRequests>
    <remove path="*" />
    <add path="*">
    <traceAreas> <add provider="ASP" verbosity="Verbose" />
    <add provider="ASPNET" areas="Infrastructure,Module,Page,AppServices" verbosity="Verbose" />
    <add provider="ISAPI Extension" verbosity="Verbose" />
    <add provider="WWW Server" areas="Authentication,Security,Filter,StaticFile,CGI,Compression, Cache,RequestNotifications,Module,FastCGI" verbosity="Verbose" />
    </traceAreas>
    <failureDefinitions timeTaken="00:00:30" statusCodes="200-999" />
    </add> </traceFailedRequests>
    </tracing>
    ```
13. <span data-ttu-id="ba041-183">Чтобы загрузить трассировки невыполненных запросов в журнал, откройте [портал](https://portal.azure.com) и перейдите на свой веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="ba041-183">To download the failed request traces, in the [portal](https://portal.azure.com), go to your website.</span></span>
15. <span data-ttu-id="ba041-184">Выберите **Средства** > **Kudu** > **Перейти**.</span><span class="sxs-lookup"><span data-stu-id="ba041-184">Select **Tools** > **Kudu** > **Go**.</span></span>
18. <span data-ttu-id="ba041-185">В меню выберите **Консоль отладки** > **CMD**.</span><span class="sxs-lookup"><span data-stu-id="ba041-185">In the menu, select **Debug Console** > **CMD**.</span></span>
19. <span data-ttu-id="ba041-186">Выберите папку **LogFiles**, а затем выберите папку, имя которой начинается с **W3SVC**.</span><span class="sxs-lookup"><span data-stu-id="ba041-186">Select the **LogFiles** folder, and then select the folder with a name that starts with **W3SVC**.</span></span>
20. <span data-ttu-id="ba041-187">Чтобы открыть XML-файл, щелкните значок карандаша.</span><span class="sxs-lookup"><span data-stu-id="ba041-187">To see the XML file, select the pencil icon.</span></span>

## <a name="i-see-the-message-worker-process-requested-recycle-due-to-percent-memory-limit-how-do-i-address-this-issue"></a><span data-ttu-id="ba041-188">Отображается сообщение "Worker Process requested recycle due to 'Percent Memory' limit" (Рабочий процесс запросил перезапуск из-за предельного объема памяти).</span><span class="sxs-lookup"><span data-stu-id="ba041-188">I see the message "Worker Process requested recycle due to 'Percent Memory' limit."</span></span> <span data-ttu-id="ba041-189">Как устранить эту проблему?</span><span class="sxs-lookup"><span data-stu-id="ba041-189">How do I address this issue?</span></span>

<span data-ttu-id="ba041-190">Максимальный объем памяти для 32-разрядного процесса (даже в 64-разрядной операционной системе) составляет 2 ГБ.</span><span class="sxs-lookup"><span data-stu-id="ba041-190">The maximum available amount of memory for a 32-bit process (even on a 64-bit operating system) is 2 GB.</span></span> <span data-ttu-id="ba041-191">По умолчанию в службе приложений используются 32-разрядные рабочие процессы (для совместимости с устаревшими веб-приложениями).</span><span class="sxs-lookup"><span data-stu-id="ba041-191">By default, the worker process is set to 32-bit in App Service (for compatibility with legacy web applications).</span></span>

<span data-ttu-id="ba041-192">Мы советуем перейти на 64-разрядные процессы. Это позволит выделить для рабочей веб-роли дополнительный объем памяти.</span><span class="sxs-lookup"><span data-stu-id="ba041-192">Consider switching to 64-bit processes so you can take advantage of the additional memory available in your Web Worker role.</span></span> <span data-ttu-id="ba041-193">В этом случае приложение перезапустится. Спланируйте этот процесс должным образом.</span><span class="sxs-lookup"><span data-stu-id="ba041-193">This triggers a web app restart, so schedule accordingly.</span></span>

<span data-ttu-id="ba041-194">Кроме того, обратите внимание, что для 64-разрядной среды требуется план обслуживания "Базовый" или "Стандартный".</span><span class="sxs-lookup"><span data-stu-id="ba041-194">Also note that a 64-bit environment requires a Basic or Standard service plan.</span></span> <span data-ttu-id="ba041-195">В 32-разрядной среде всегда используются планы обслуживания "Бесплатный" и "Общий".</span><span class="sxs-lookup"><span data-stu-id="ba041-195">Free and Shared plans always run in a 32-bit environment.</span></span>

<span data-ttu-id="ba041-196">Дополнительные сведения см. в статье [Настройка веб-приложений в службе приложений Azure](https://docs.microsoft.com/azure/app-service-web/web-sites-configure).</span><span class="sxs-lookup"><span data-stu-id="ba041-196">For more information, see [Configure web apps in App Service](https://docs.microsoft.com/azure/app-service-web/web-sites-configure).</span></span>

## <a name="why-does-my-request-time-out-after-240-seconds"></a><span data-ttu-id="ba041-197">Почему после 240 секунд истекает время запроса?</span><span class="sxs-lookup"><span data-stu-id="ba041-197">Why does my request time out after 240 seconds?</span></span>

<span data-ttu-id="ba041-198">По умолчанию время ожидания простоя в Azure Load Balancer имеет значение 4 минуты.</span><span class="sxs-lookup"><span data-stu-id="ba041-198">Azure Load Balancer has a default idle timeout setting of four minutes.</span></span> <span data-ttu-id="ba041-199">Обычно это логичное ограничение по времени отклика для веб-запроса.</span><span class="sxs-lookup"><span data-stu-id="ba041-199">This is generally a reasonable response time limit for a web request.</span></span> <span data-ttu-id="ba041-200">Если обработка веб-приложения также выполняется в фоновом режиме, мы советуем использовать веб-задания Azure.</span><span class="sxs-lookup"><span data-stu-id="ba041-200">If your web app requires background processing, we recommend using Azure WebJobs.</span></span> <span data-ttu-id="ba041-201">Веб-приложение Azure может вызывать веб-задания и получать уведомления при завершении фоновой обработки.</span><span class="sxs-lookup"><span data-stu-id="ba041-201">The Azure web app can call WebJobs and be notified when background processing is finished.</span></span> <span data-ttu-id="ba041-202">Доступно несколько методов использования веб-заданий, в том числе очереди и триггеры.</span><span class="sxs-lookup"><span data-stu-id="ba041-202">You can choose from multiple methods for using WebJobs, including queues and triggers.</span></span>

<span data-ttu-id="ba041-203">Веб-задания предназначены для фоновой обработки.</span><span class="sxs-lookup"><span data-stu-id="ba041-203">WebJobs is designed for background processing.</span></span> <span data-ttu-id="ba041-204">Ограничения на выполнение фоновой обработки в веб-задании отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="ba041-204">You can do as much background processing as you want in a WebJob.</span></span> <span data-ttu-id="ba041-205">Дополнительные сведения о веб-заданиях см. в статье [Выполнение фоновых задач с веб-заданиями](https://docs.microsoft.com/azure/app-service-web/web-sites-create-web-jobs).</span><span class="sxs-lookup"><span data-stu-id="ba041-205">For more information about WebJobs, see [Run background tasks with WebJobs](https://docs.microsoft.com/azure/app-service-web/web-sites-create-web-jobs).</span></span>

## <a name="aspnet-core-applications-that-are-hosted-in-app-service-sometimes-stop-responding-how-do-i-fix-this-issue"></a><span data-ttu-id="ba041-206">Приложения ASP.NET Core, размещенные в службе приложений, иногда перестают отвечать на запросы.</span><span class="sxs-lookup"><span data-stu-id="ba041-206">ASP.NET Core applications that are hosted in App Service sometimes stop responding.</span></span> <span data-ttu-id="ba041-207">Как устранить эту проблему?</span><span class="sxs-lookup"><span data-stu-id="ba041-207">How do I fix this issue?</span></span>

<span data-ttu-id="ba041-208">Проблема, из-за которой приложение ASP.NET Core 1.0, размещенное в службе приложений, периодически перестает отвечать на запросы, может быть вызвана известной проблемой в ранней версии [Kestrel](https://github.com/aspnet/KestrelHttpServer/issues/1182).</span><span class="sxs-lookup"><span data-stu-id="ba041-208">A known issue with an earlier [Kestrel version](https://github.com/aspnet/KestrelHttpServer/issues/1182) might cause an ASP.NET Core 1.0 app that's hosted in App Service to intermittently stop responding.</span></span> <span data-ttu-id="ba041-209">Кроме того, может появиться такое сообщение: "В указанном приложении CGI возникла ошибка, и процесс был остановлен сервером".</span><span class="sxs-lookup"><span data-stu-id="ba041-209">You also might see this message: "The specified CGI Application encountered an error and the server terminated the process."</span></span>

<span data-ttu-id="ba041-210">Эта проблема исправлена в Kestrel версии 1.0.2.</span><span class="sxs-lookup"><span data-stu-id="ba041-210">This issue is fixed in Kestrel version 1.0.2.</span></span> <span data-ttu-id="ba041-211">Эта версия входит в состав обновления ASP.NET Core 1.0.3.</span><span class="sxs-lookup"><span data-stu-id="ba041-211">This version is included in the ASP.NET Core 1.0.3 update.</span></span> <span data-ttu-id="ba041-212">Чтобы устранить эту проблему, обновите зависимости приложения для использования Kestrel 1.0.2.</span><span class="sxs-lookup"><span data-stu-id="ba041-212">To resolve this issue, make sure you update your app dependencies to use Kestrel 1.0.2.</span></span> <span data-ttu-id="ba041-213">Кроме того, эту проблему можно решить одним из двух способов, описанных в записи блога [ASP.NET Core 1.0 slow perf issues in App Service web apps](https://blogs.msdn.microsoft.com/waws/2016/12/11/asp-net-core-slow-perf-issues-on-azure-websites) (Проблемы низкой производительности ASP.NET Core 1.0 в веб-приложениях службы приложений).</span><span class="sxs-lookup"><span data-stu-id="ba041-213">Alternatively, you can use one of two workarounds that are described in the blog post [ASP.NET Core 1.0 slow perf issues in App Service web apps](https://blogs.msdn.microsoft.com/waws/2016/12/11/asp-net-core-slow-perf-issues-on-azure-websites).</span></span>


## <a name="i-cant-find-my-log-files-in-the-file-structure-of-my-web-app-how-can-i-find-them"></a><span data-ttu-id="ba041-214">В структуре файла веб-приложения не отображаются файлы журналов.</span><span class="sxs-lookup"><span data-stu-id="ba041-214">I can't find my log files in the file structure of my web app.</span></span> <span data-ttu-id="ba041-215">Как их найти?</span><span class="sxs-lookup"><span data-stu-id="ba041-215">How can I find them?</span></span>

<span data-ttu-id="ba041-216">Функция локального кэша службы приложений изменяет структуру папок файлов журналов и данных экземпляра службы приложений.</span><span class="sxs-lookup"><span data-stu-id="ba041-216">If you use the Local Cache feature of App Service, the folder structure of the LogFiles and Data folders for your App Service instance are affected.</span></span> <span data-ttu-id="ba041-217">При использовании локального кэша в этих папках создаются вложенные папки.</span><span class="sxs-lookup"><span data-stu-id="ba041-217">When Local Cache is used, subfolders are created in the storage LogFiles and Data folders.</span></span> <span data-ttu-id="ba041-218">Имя вложенных папок состоит из уникального идентификатора, заключенного в двойные кавычки, и метки времени.</span><span class="sxs-lookup"><span data-stu-id="ba041-218">The subfolders use the naming pattern "unique identifier" + time stamp.</span></span> <span data-ttu-id="ba041-219">Каждая вложенная папка соответствует экземпляру виртуальной машины, на котором выполняется или запущено веб-приложение.</span><span class="sxs-lookup"><span data-stu-id="ba041-219">Each subfolder corresponds to a VM instance in which the web app is running or has run.</span></span>

<span data-ttu-id="ba041-220">Чтобы определить, используется ли локальный кэш, перейдите на вкладку **Параметры приложения** службы приложений.</span><span class="sxs-lookup"><span data-stu-id="ba041-220">To determine whether you are using Local Cache, check your App Service **Application settings** tab.</span></span> <span data-ttu-id="ba041-221">Если локальный кэш используется, параметр `WEBSITE_LOCAL_CACHE_OPTION` имеет значение `Always`.</span><span class="sxs-lookup"><span data-stu-id="ba041-221">If Local Cache is being used, the app setting `WEBSITE_LOCAL_CACHE_OPTION` is set to `Always`.</span></span> <span data-ttu-id="ba041-222">Дополнительные сведения о локальном кэше службы приложений Azure см. в [этой статье](https://docs.microsoft.com/azure/app-service/app-service-local-cache).</span><span class="sxs-lookup"><span data-stu-id="ba041-222">For more information about Local Cache, see the [App Service Local Cache overview](https://docs.microsoft.com/azure/app-service/app-service-local-cache).</span></span>

<span data-ttu-id="ba041-223">Если вы не используете локальный кэш и возникла эта ошибка, отправьте запрос на техническую поддержку.</span><span class="sxs-lookup"><span data-stu-id="ba041-223">If you are not using Local Cache and are experiencing this issue, submit a support request.</span></span>

## <a name="i-see-the-message-an-attempt-was-made-to-access-a-socket-in-a-way-forbidden-by-its-access-permissions-how-do-i-resolve-this"></a><span data-ttu-id="ba041-224">Отображается сообщение "Сделана попытка доступа к сокету методом, запрещенным правами доступа".</span><span class="sxs-lookup"><span data-stu-id="ba041-224">I see the message "An attempt was made to access a socket in a way forbidden by its access permissions."</span></span> <span data-ttu-id="ba041-225">Как решить эту проблему?</span><span class="sxs-lookup"><span data-stu-id="ba041-225">How do I resolve this?</span></span>

<span data-ttu-id="ba041-226">Эта ошибка обычно возникает, если достигнут предел исходящих TCP-подключений на экземпляре виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="ba041-226">This error typically occurs if the outbound TCP connections on the VM instance are exhausted.</span></span> <span data-ttu-id="ba041-227">В службе приложений применяются ограничения на максимальное количество исходящих подключений каждого экземпляра виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="ba041-227">In App Service, limits are enforced for the maximum number of outbound connections that can be made for each VM instance.</span></span> <span data-ttu-id="ba041-228">Дополнительные сведения см. в разделе [Ограничения на подключения между виртуальными машинами](https://github.com/projectkudu/kudu/wiki/Azure-Web-App-sandbox#cross-vm-numerical-limits).</span><span class="sxs-lookup"><span data-stu-id="ba041-228">For more information, see [Cross-VM numerical limits](https://github.com/projectkudu/kudu/wiki/Azure-Web-App-sandbox#cross-vm-numerical-limits).</span></span>

<span data-ttu-id="ba041-229">Эта ошибка также может возникать при попытке подключения к локальному адресу из приложения.</span><span class="sxs-lookup"><span data-stu-id="ba041-229">This error also might occur if you try to access a local address from your application.</span></span> <span data-ttu-id="ba041-230">Дополнительные сведения см. в разделе [Запросы на подключения к локальным адресам](https://github.com/projectkudu/kudu/wiki/Azure-Web-App-sandbox#local-address-requests).</span><span class="sxs-lookup"><span data-stu-id="ba041-230">For more information, see [Local address requests](https://github.com/projectkudu/kudu/wiki/Azure-Web-App-sandbox#local-address-requests).</span></span>

<span data-ttu-id="ba041-231">Дополнительные сведения об исходящих подключениях веб-приложений см. в [этой записи блога](http://www.freekpaans.nl/2015/08/starving-outgoing-connections-on-windows-azure-web-sites/).</span><span class="sxs-lookup"><span data-stu-id="ba041-231">For more information about outbound connections in your web app, see the blog post about [outgoing connections to Azure websites](http://www.freekpaans.nl/2015/08/starving-outgoing-connections-on-windows-azure-web-sites/).</span></span>

## <a name="how-do-i-use-visual-studio-to-remote-debug-my-app-service-web-app"></a><span data-ttu-id="ba041-232">Как выполнить удаленную отладку веб-приложения службы приложений с помощью Visual Studio?</span><span class="sxs-lookup"><span data-stu-id="ba041-232">How do I use Visual Studio to remote debug my App Service web app?</span></span>

<span data-ttu-id="ba041-233">Пошаговые указания по выполнению отладки веб-приложения с помощью Visual Studio см. в [этой записи блога](https://blogs.msdn.microsoft.com/benjaminperkins/2016/09/22/remote-debug-your-azure-app-service-web-app/).</span><span class="sxs-lookup"><span data-stu-id="ba041-233">For a detailed walkthrough that shows you how to debug your web app by using Visual Studio, see [Remote debug your App Service web app](https://blogs.msdn.microsoft.com/benjaminperkins/2016/09/22/remote-debug-your-azure-app-service-web-app/).</span></span>
