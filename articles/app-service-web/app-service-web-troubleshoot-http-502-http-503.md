---
title: "Недопустимый шлюз aaaFix 502, 503 службы недоступны ошибки | Документы Microsoft"
description: "Устранение ошибок \"502 — недопустимый шлюз\" и \"503 — служба недоступна\", возникающих при работе веб-приложения, размещенного в службе приложений Azure."
services: app-service\web
documentationcenter: 
author: cephalin
manager: erikre
editor: 
tags: top-support-issue
keywords: "502 — недопустимый шлюз, 503 — служба недоступна, ошибка 503, ошибка 502"
ms.assetid: 51cd331a-a3fa-438f-90ef-385e755e50d5
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/06/2016
ms.author: cephalin
ms.openlocfilehash: d9d8dcddaac930967a2e8d2bfd8cad09e6824c17
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-http-errors-of-502-bad-gateway-and-503-service-unavailable-in-your-azure-web-apps"></a>Устранение ошибок HTTP "502 — недопустимый шлюз" и "503 — служба недоступна" в работе ваших веб-приложений Azure
"502 — недопустимый шлюз" и "503 — служба недоступна" — распространенные ошибки, возникающие при работе веб-приложения, размещенного в [службе приложений Azure](http://go.microsoft.com/fwlink/?LinkId=529714). Эта статья поможет вам устранить эти ошибки.

Если вам нужна дополнительная помощь в любой момент в этой статье, можно обратиться в hello экспертов Azure на [hello MSDN Azure и hello переполнения стека форумы](https://azure.microsoft.com/support/forums/). Кроме того, можно зарегистрировать обращение в службу поддержки Azure. Go toohello [сайте поддержки Azure](https://azure.microsoft.com/support/options/) и выберите команду **Get Support**.

## <a name="symptom"></a>Симптом
При просмотре toohello веб-приложения, он возвращает HTTP «502 — неправильный шлюз» ошибка "или" HTTP «503 Служба недоступна» ошибка.

## <a name="cause"></a>Причина:
Эта проблема часто связана с проблемами на уровне приложения, например:

* слишком долгое выполнение запросов;
* слишком высокие требования приложения к памяти и процессору;
* Сбой из-за исключения tooan приложения.

## <a name="troubleshooting-steps-toosolve-502-bad-gateway-and-503-service-unavailable-errors"></a>Устранение неполадок действия toosolve «502 — неправильный шлюз» и «503 — Служба недоступна» ошибки
Процесс устранения неполадок можно разделить на три последовательных задачи.

1. [Наблюдение за поведением приложения.](#observe)
2. [Сбор данных.](#collect)
3. [Hello проблем](#mitigate)

[Веб-приложения службы приложений](/services/app-service/web/) содержат несколько инструментов для каждого из этих этапов.

<a name="observe" />

### <a name="1-observe-and-monitor-application-behavior"></a>1. Наблюдение за поведением приложения
#### <a name="track-service-health"></a>Мониторинг работоспособности службы
Microsoft Azure информирует о каждом случае прерывания работы или снижения производительности службы. Можно отслеживать работоспособность hello hello службы на hello [портала Azure](https://portal.azure.com/). Дополнительные сведения см. в статье [Получение информации о работоспособности службы](../monitoring-and-diagnostics/insights-service-health.md).

#### <a name="monitor-your-web-app"></a>Мониторинг веб-приложения
Этот параметр позволяет toofind ожидания, если в приложении возникают проблемы. В колонке веб-приложение, щелкните hello **запросов и ошибок** плитки. Hello **метрика** колонке Показать все показатели hello, можно добавить.

Некоторые показатели hello, вам может быть toomonitor для веб-приложения

* средний размер рабочего набора памяти;
* Среднее время ответа
* время ЦП;
* рабочий набор памяти;
* Requests (Запросы)

![Мониторинг веб-приложения для устранения ошибок HTTP "502 — недопустимый шлюз" и "503 — служба недоступна"](./media/app-service-web-troubleshoot-HTTP-502-503/1-monitor-metrics.png)

Дополнительные сведения можно найти в разделе 

* [Мониторинг веб-приложений в службе приложений Azure](web-sites-monitor.md)
* [Создание оповещений для служб Azure с помощью портала Azure](../monitoring-and-diagnostics/insights-receive-alert-notifications.md)

<a name="collect" />

### <a name="2-collect-data"></a>2) Сбор данных
#### <a name="use-hello-azure-app-service-support-portal"></a>Использовать hello портал поддержки службы приложений Azure
Веб-приложения предоставляет возможность hello tootroubleshoot связанные tooyour проблемы веб-приложения, просмотрев HTTP журналы, журналы событий, дамп и многое другое. Эту информацию вы сможете найти на нашем портале поддержки по адресу **http://&lt;имя приложения>.scm.azurewebsites.net/Support**

портал Hello поддержка службы приложения Azure предоставляет три отдельных вкладках toosupport hello три действия по устранению неполадок чаще.

1. Наблюдение за поведением.
2. Анализ, сбор данных диагностики и запустив hello встроенных анализаторы
3. Устранение неполадки.

Если происходит проблема hello прямо сейчас, нажмите кнопку **анализ** > **диагностики** > **диагностики теперь** toocreate сеанс диагностики, который будет собирать HTTP журналы, журналы программы просмотра событий, памяти, дампы, журналы ошибок PHP и PHP обработки отчета.

После сбора данных hello, он также выполните анализ данных hello и предоставить вам HTML-отчета.

В случае, если вам нужны данные toodownload hello, по умолчанию, он будет храниться в папке D:\home\data\DaaS hello.

Дополнительные сведения на портале hello поддержка службы приложения Azure см. в разделе [tooSupport обновлений расширение сайта для веб-сайтов Azure](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).

#### <a name="use-hello-kudu-debug-console"></a>Использование консоли отладки Kudu hello
Веб-приложения оснащены консолью отладки, с помощью которой вы можете получать сведения о среде, используя функции отладки, изучения, передачи файлов и конечных точек JSON. Это называется hello *консоли Kudu* или hello *SCM мониторинга* веб-приложения.

Доступ к этой панели мониторинга переходит в ссылке toohello **https://&lt;имя вашего приложения >.scm.azurewebsites.net/**.

Ниже приведены некоторые Kudu предоставляет следующие аспекты hello.

* настройки среды для вашего приложения;
* потоковая передача журналов;
* диагностический дамп;
* консоль отладки с возможностью запуска командлетов Powershell и основных команд DOS.

Другой полезной функцией Kudu является, в случае, если приложение является создание исключений первого шанса, можно использовать Kudu и дампы hello SysInternals средство Procdump toocreate памяти. Эти дампы памяти представляют собой моментальные снимки процесса hello и часто помогает устранить устранения более серьезных проблем с веб-приложения.

Дополнительные сведения о возможностях консоли Kudu см. в статье [Azure Websites online tools you should know about](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/) (Интерактивные инструменты веб-сайтов Azure, о которых вам нужно знать).

<a name="mitigate" />

### <a name="3-mitigate-hello-issue"></a>3. Hello проблем
#### <a name="scale-hello-web-app"></a>Масштаб hello веб-приложения
В службе приложений Azure для повышения производительности и пропускной способности, можно изменить масштаб hello, с которой выполняется приложение. Вертикальное масштабирование веб-приложение включает в себя два связанных действий: изменение вашей tooa план службы приложений, выше ценовой категории и определенных настроек после переключения toohello выше ценовой категории.

Дополнительные сведения о масштабировании см. в статье [Увеличение масштаба приложения в Azure](web-sites-scale.md).

Кроме того вы можете toorun приложения на более одного экземпляра. Это не только увеличит возможности обработки, но и повысит устойчивость приложения к сбоям. Если hello процесс перестает работать на одном экземпляре, hello другого экземпляра будет по-прежнему обработку запросов.

Можно задать hello масштабирования toobe вручную или автоматически.

#### <a name="use-autoheal"></a>Использование функции AutoHeal
Функция AutoHeal перезапускается hello рабочий процесс для приложения с учетом выбранных (например, изменения конфигурации, запросы, ограничения памяти или время hello необходимости tooexecute запрос) параметров. Большую часть времени hello hello процесс очистки является hello самый быстрый способ toorecover из-за проблемы. Хотя можно всегда перезапускать веб-приложения hello из непосредственно в hello портал Azure, AutoHeal будет сделать это автоматически. Требуется toodo всего добавить некоторые триггеры в hello корневом файле web.config для веб-приложения. Обратите внимание, что эти параметры будут работать в hello таким же способом, даже если приложение не один .net.

Дополнительные сведения см. в статье об [автоматическом восстановлении веб-сайтов Microsoft Azure](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).

#### <a name="restart-hello-web-app"></a>Перезапустить веб-приложение hello
Это часто toorecover простейший способ hello после однократного возникновения проблем. На hello [портала Azure](https://portal.azure.com/), в колонке веб-приложения вы toostop параметры hello или перезапустите приложение.

 ![Перезапустите приложения ошибки HTTP toosolve 502 — неправильный шлюз и 503 — Служба недоступна](./media/app-service-web-troubleshoot-HTTP-502-503/2-restart.png)

Управлять приложениями можно также с помощью Azure Powershell. Дополнительные сведения см. в статье [Использование Azure PowerShell с диспетчером ресурсов Azure](../powershell-azure-resource-manager.md).

