---
title: "aaaSlow производительности веб-приложения в службе приложений | Документы Microsoft"
description: "Эта статья поможет устранить причины снижения производительности веб-приложения, размещенного в службе приложений Azure."
services: app-service\web
documentationcenter: 
author: cephalin
manager: erikre
editor: 
tags: top-support-issue
keywords: "Производительность веб-приложения, медленное приложение, приложение работает медленно"
ms.assetid: b8783c10-3a4a-4dd6-af8c-856baafbdde5
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2016
ms.author: cephalin
ms.openlocfilehash: 3e56b99b48db0e7baae1fac797a7fcb9eff74c9e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-slow-web-app-performance-issues-in-azure-app-service"></a>Устранение причин низкой производительности веб-приложения в службе приложений Azure
Эта статья поможет устранить причины снижения производительности веб-приложения, размещенного в [службе приложений Azure](http://go.microsoft.com/fwlink/?LinkId=529714).

Если вам нужна дополнительная помощь в любой момент в этой статье, можно обратиться в hello экспертов Azure на [hello MSDN Azure и hello переполнения стека форумы](https://azure.microsoft.com/support/forums/). Кроме того, можно зарегистрировать обращение в службу поддержки Azure. Go toohello [сайте поддержки Azure](https://azure.microsoft.com/support/options/) и выберите команду **Get Support**.

## <a name="symptom"></a>Симптом
При просмотре веб-приложения hello hello страницы загрузки медленно, а иногда и время ожидания.

## <a name="cause"></a>Причина:
Эта проблема часто связана с проблемами на уровне приложения, например:

* слишком долгое выполнение сетевых запросов;
* неэффективный код приложения или запросы к базе данных;
* слишком высокие требования приложения к памяти и процессору;
* Сбой из-за исключения tooan приложения

## <a name="troubleshooting-steps"></a>Действия по устранению неполадок
Процесс устранения неполадок можно разделить на три последовательных задачи.

1. [Наблюдение за поведением приложения.](#observe)
2. [Сбор данных.](#collect)
3. [Hello проблем](#mitigate)

[Веб-приложения службы приложений](/services/app-service/web/) содержат несколько инструментов для каждого из этих этапов.

<a name="observe" />

### <a name="1-observe-and-monitor-application-behavior"></a>1. Наблюдение за поведением приложения
#### <a name="track-service-health"></a>Мониторинг работоспособности службы
Microsoft Azure информирует о каждом случае прерывания работы или снижения производительности службы. Можно отслеживать работоспособность hello hello службы на hello [портал Azure](https://portal.azure.com/). Дополнительные сведения см. в статье [Получение информации о работоспособности службы](../monitoring-and-diagnostics/insights-service-health.md).

#### <a name="monitor-your-web-app"></a>Мониторинг веб-приложения
Этот параметр позволяет toofind ожидания, если в приложении возникают проблемы. В колонке веб-приложение, щелкните hello **запросов и ошибок** плитки. Hello **метрика** колонке показывает все показатели hello, можно добавить.

Некоторые показатели hello, вам может быть toomonitor для веб-приложения

* средний размер рабочего набора памяти;
* Среднее время ответа
* время ЦП;
* рабочий набор памяти;
* Запросы

![Мониторинг производительности веб-приложения](./media/app-service-web-troubleshoot-performance-degradation/1-monitor-metrics.png)

Дополнительные сведения можно найти в разделе 

* [Мониторинг веб-приложений в службе приложений Azure](web-sites-monitor.md)
* [Создание оповещений для служб Azure с помощью портала Azure](../monitoring-and-diagnostics/insights-receive-alert-notifications.md)

#### <a name="monitor-web-endpoint-status"></a>Мониторинг состояния конечной веб-точки
Если вы используете веб-приложения hello **Стандартная** ценовой категории, веб-приложений позволяет отслеживать две конечные точки из трех географических местоположений.

Функция мониторинга конечных точек настраивает веб-тесты из географически распределенных местоположений, позволяя проверить время ответа и время непрерывной работы URL-адресов. Проверка Hello выполнения операция HTTP GET на время ответа для URL-адрес toodetermine hello web hello и работы от каждого расположения. Для каждого настроенного расположения тест выполняется каждые пять минут.

Время непрерывной работы контролируется при помощи кодов ответов HTTP, а время ответа измеряется в миллисекундах. Тест завершается с ошибкой в случае hello код ответа HTTP больше или равно too400 или если hello ответ требуется более 30 секунд. Конечная точка считается доступной, если тесты мониторинга завершились для нее успешно все hello указаны местоположения.

разделе tooset его, [мониторинг приложений в службе приложений Azure](web-sites-monitor.md).

Кроме того, вы можете посмотреть видео, посвященное контролю конечных точек: [Поддержка работы веб-сайтов Azure с помощью мониторинга конечных точек (со Стефаном Щаковым ((Stefan Schackow))](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) .

#### <a name="application-performance-monitoring-using-extensions"></a>Контроль производительности приложений с помощью расширений
Вы можете также отслеживать производительность приложения через *расширения сайта*.

Каждый веб-приложения служб приложений предоставляет конечную точку расширенного управления, позволяющий toouse мощный набор средств, развернутый как расширения сайта. Расширения включают в себя: 

- редакторы исходного кода, например [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx); 
- Средства управления для подключенных ресурсы, такие как базы данных MySQL подключен tooa веб-приложения.

[Azure Application Insights](/services/application-insights/) и [New Relic](/marketplace/partners/newrelic/newrelic/) два наблюдение за hello доступных модулей сайта. toouse New Relic, установите агент во время выполнения. toouse Azure Application Insights перестроить кода с помощью пакета SDK, а также можно установить расширения, который предоставляет доступ к данным tooadditional. Hello SDK позволяет писать код toomonitor hello использования и производительность вашего приложения более подробно.

. в разделе toouse Application Insights [наблюдения за производительностью в веб-приложениях](../application-insights/app-insights-web-monitor-performance.md).

в разделе toouse New Relic [новый Relic производительности управление приложениями в Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).

<a name="collect" />

### <a name="2-collect-data"></a>2. Сбор данных
Среда веб-приложения Hello предоставляет диагностических функций для записи в журнал из hello веб-сервер и веб-приложения hello. сведения о Hello разделяется диагностики веб-серверов и диагностики приложений.

#### <a name="enable-web-server-diagnostics"></a>Включение диагностики веб-сервера
Можно включить или отключить hello следующие виды журналы:

* **Подробное ведение журнала ошибок** — регистрация подробной информации об ошибке для кодов состояния HTTP, которые указывают на сбой (код состояния 400 и выше). Это может содержать сведения, которые могут помочь определить, почему hello сервер вернул код ошибки hello.
* **Не удалось выполнить запрос трассировки** -подробные сведения о невыполненных запросов, включая трассировки запрос hello tooprocess компоненты, используемые IIS hello и hello время, затраченное в каждом компоненте. Это может быть полезно, если вы пытаетесь tooimprove производительности веб-приложения или выявить причину возникновения определенной ошибки HTTP.
* **Ведение журналов сервера веб-** -сведения о транзакций HTTP с использованием расширенного формата файла журнала hello W3C. Это полезно при определении общей web app метрик, таких как hello число запросов, которые обрабатываются или сколько запросы отправляются определенный IP-адрес.

#### <a name="enable-application-diagnostics"></a>Включение диагностики приложений
Существует несколько вариантов toocollect данные о производительности приложения из веб-приложений, профилировать приложение динамической из Visual Studio или измените toolog код вашего приложения, Дополнительные сведения и трассировки. Можно выбрать параметры hello, на основе уровня доступа toohello приложении, и вы заметили из средства мониторинга hello.

##### <a name="use-application-insights-profiler"></a>Использование Application Insights Profiler
Позволяет захватывать трассировку подробные производительности toostart профилировщик аналитики приложения hello. Можно получить доступ к трассировки, записанные вверх toofive, дней назад при необходимости tooinvestigate проблемы произошли в последние hello. Этот параметр можно выбрать, пока у вас есть доступ toohello веб-приложения Application Insights ресурсов на портале Azure.

Профилировщик аналитики приложений предоставляет статистику времени отклика для каждого веб-вызов и трассировок, указывающее, какая строка кода вызвала hello замедление отклика. Иногда hello приложение служб приложений выполняется медленно из-за определенный код написан высокопроизводительных способом. К таким кодам относится последовательный код, который может выполняться параллельно и вызывать нежелательные конфликты в базе данных. Удаление эти узкие места в коде hello увеличивает производительность приложения hello, но они жестких toodetect без настройки сложных трассировки и журналы. Hello трассировок, собираемых в профилировщик аналитики приложений помогает идентификации строк hello код, замедляющий ее работу приложения hello и решить эту проблему, для приложений служб приложений.

 Дополнительные сведения см. в статье [Профилирование динамических веб-приложений Azure с помощью Application Insights](../application-insights/app-insights-profiler.md).

##### <a name="use-remote-profiling"></a>Используйте удаленное профилирование
Служба приложений Azure позволяет удаленно профилировать веб-приложения, интерфейсные приложения и веб-задания. Выберите этот параметр, если у вас есть доступ toohello веб-приложение ресурса и известно как tooreproduce hello проблему или происходит проблема производительности hello интервал времени, если известно точное hello.

Удаленного профилирования полезен, если hello ЦП для процесса hello высокого уровня и процесс выполняется медленнее, чем ожидалось или выше, чем обычные задержки hello HTTP-запросов, можно удаленно профиля процесса и получения стеков вызова tooanalyze для hello ЦП выборки Здравствуйте, процесс действия и кода горячего пути.

Дополнительные сведения см. в статье [Поддержка удаленного профилирования в службе приложений Azure](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).

##### <a name="set-up-diagnostic-traces-manually"></a>Настройка диагностических трассировок вручную
При наличии исходного кода доступа toohello веб-приложения Application diagnostics позволяет toocapture данные, созданные веб-приложением. Приложения ASP.NET могут использовать hello `System.Diagnostics.Trace` консоли диагностики приложений toohello класса toolog сведения журнала. Однако необходимо toochange кода hello и повторного развертывания приложения. Этот метод рекомендуется в том случае, если приложение выполняется в тестовой среде.

Подробные инструкции о том, как tooconfigure приложения для ведения журнала, в разделе [включить ведение журнала диагностики для веб-приложений в службе приложений Azure](web-sites-enable-diagnostic-log.md).

#### <a name="use-hello-azure-app-service-support-portal"></a>Использовать портал поддержки hello службе приложений Azure
Веб-приложения предоставляет возможность hello tootroubleshoot связанные tooyour проблемы веб-приложения, просмотрев HTTP журналы, журналы событий, дамп и многое другое. Эту информацию вы сможете найти на нашем портале поддержки по адресу **http://&lt;имя приложения>.scm.azurewebsites.net/Support**

Портал поддержки Hello службе приложений Azure предоставляет три отдельных вкладках toosupport hello распространенных сценария устранения неполадок в три этапа:

1. Наблюдение за поведением.
2. Анализ, сбор данных диагностики и запустив hello встроенных анализаторы
3. Устранение неполадки.

Если происходит проблема hello прямо сейчас, нажмите кнопку **анализ** > **диагностики** > **диагностики теперь** toocreate сеанс диагностики, осуществляет сбор журналов HTTP, журналы программы просмотра событий, дампы памяти, журналы ошибок PHP и отчет процесса PHP.

После сбора данных hello портал поддержки hello выполняется анализ на данных hello и предоставляет отчет в формате HTML.

В случае, если вам нужны данные toodownload hello, по умолчанию, он будет храниться в папке D:\home\data\DaaS hello.

Дополнительные сведения на портале поддержки hello службе приложений Azure см. в разделе [tooSupport обновлений расширение сайта для веб-сайтов Azure](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).

#### <a name="use-hello-kudu-debug-console"></a>Использование консоли отладки Kudu hello
Веб-приложения оснащены консолью отладки, с помощью которой вы можете получать сведения о среде, используя функции отладки, изучения, передачи файлов и конечных точек JSON. Эта консоль называется hello *консоли Kudu* или hello *SCM мониторинга* веб-приложения.

Доступ к этой панели мониторинга переходит в ссылке toohello **https://&lt;имя вашего приложения >.scm.azurewebsites.net/**.

Ниже приведены некоторые Kudu предоставляет следующие аспекты hello.

* настройки среды для вашего приложения;
* потоковая передача журналов;
* диагностический дамп;
* консоль отладки с возможностью запуска командлетов Powershell и основных команд DOS.

Другой полезной функцией Kudu является, в случае, если приложение является создание исключений первого шанса, можно использовать Kudu и дампы hello SysInternals средство Procdump toocreate памяти. Эти дампы памяти представляют собой моментальные снимки процесса hello и часто помогает устранить устранения более серьезных проблем с веб-приложения.

Дополнительные сведения о возможностях консоли Kudu см. в статье об [инструментах в Интернете для веб-сайтов Microsoft Azure](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).

<a name="mitigate" />

### <a name="3-mitigate-hello-issue"></a>3. Hello проблем
#### <a name="scale-hello-web-app"></a>Масштаб hello веб-приложения
В службе приложений Azure для повышения производительности и пропускной способности, можно изменить масштаб hello, с которой выполняется приложение. Вертикальное масштабирование веб-приложение включает в себя два связанных действий: изменение вашей tooa план службы приложений, выше ценовой категории и определенных настроек после переключения toohello выше ценовой категории.

Дополнительные сведения о масштабировании см. в статье [Увеличение масштаба приложения в Azure](web-sites-scale.md).

Кроме того вы можете toorun приложения на более одного экземпляра. Увеличение масштаба не только увеличит возможности обработки, но и повысит отказоустойчивость приложения. Если процесс hello перестает работать на одном экземпляре, hello других экземпляров по-прежнему tooserve запросов.

Можно задать hello масштабирования toobe вручную или автоматически.

#### <a name="use-autoheal"></a>Использование функции AutoHeal
Функция AutoHeal перезапускается hello рабочий процесс для приложения с учетом выбранных (например, изменения конфигурации, запросы, ограничения памяти или время hello необходимости tooexecute запрос) параметров. Большую часть времени hello hello процесс очистки является hello самый быстрый способ toorecover из-за проблемы. На то, что всегда можно перезапустить веб-приложения hello из непосредственно в hello портал Azure, AutoHeal выполняет ее автоматически. Требуется toodo всего добавить некоторые триггеры в hello корневом файле web.config для веб-приложения. Эти параметры будут работать в hello таким же образом, даже если приложение не приложении .net.

Дополнительные сведения см. в статье об [автоматическом восстановлении веб-сайтов Microsoft Azure](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).

#### <a name="restart-hello-web-app"></a>Перезапустить веб-приложение hello
Перезагрузка часто является toorecover простейший способ hello после однократного возникновения проблем. На hello [портал Azure](https://portal.azure.com/), в колонке веб-приложения вы toostop параметры hello или перезапустите приложение.

 ![Перезапустите проблем веб-приложения toosolve производительности](./media/app-service-web-troubleshoot-performance-degradation/2-restart.png)

Управлять приложениями можно также с помощью Azure Powershell. Дополнительные сведения см. в статье [Использование Azure PowerShell с диспетчером ресурсов Azure](../powershell-azure-resource-manager.md).
