---
title: "aaaSlow производительности веб-приложения в службе приложений | Документы Microsoft"
description: "Эта статья поможет устранить причины снижения производительности веб-приложения, размещенного в службе приложений Azure."
services: app-service\web
documentationcenter: 
author: cephalin
manager: erikre
editor: 
tags: top-support-issue
keywords: "Производительность веб-приложения, медленное приложение, приложение работает медленно"
ms.assetid: b8783c10-3a4a-4dd6-af8c-856baafbdde5
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2016
ms.author: cephalin
ms.openlocfilehash: 3e56b99b48db0e7baae1fac797a7fcb9eff74c9e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-slow-web-app-performance-issues-in-azure-app-service"></a><span data-ttu-id="1060a-104">Устранение причин низкой производительности веб-приложения в службе приложений Azure</span><span class="sxs-lookup"><span data-stu-id="1060a-104">Troubleshoot slow web app performance issues in Azure App Service</span></span>
<span data-ttu-id="1060a-105">Эта статья поможет устранить причины снижения производительности веб-приложения, размещенного в [службе приложений Azure](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="1060a-105">This article helps you troubleshoot slow web app performance issues in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span>

<span data-ttu-id="1060a-106">Если вам нужна дополнительная помощь в любой момент в этой статье, можно обратиться в hello экспертов Azure на [hello MSDN Azure и hello переполнения стека форумы](https://azure.microsoft.com/support/forums/).</span><span class="sxs-lookup"><span data-stu-id="1060a-106">If you need more help at any point in this article, you can contact hello Azure experts on [hello MSDN Azure and hello Stack Overflow forums](https://azure.microsoft.com/support/forums/).</span></span> <span data-ttu-id="1060a-107">Кроме того, можно зарегистрировать обращение в службу поддержки Azure.</span><span class="sxs-lookup"><span data-stu-id="1060a-107">Alternatively, you can also file an Azure support incident.</span></span> <span data-ttu-id="1060a-108">Go toohello [сайте поддержки Azure](https://azure.microsoft.com/support/options/) и выберите команду **Get Support**.</span><span class="sxs-lookup"><span data-stu-id="1060a-108">Go toohello [Azure Support site](https://azure.microsoft.com/support/options/) and click on **Get Support**.</span></span>

## <a name="symptom"></a><span data-ttu-id="1060a-109">Симптом</span><span class="sxs-lookup"><span data-stu-id="1060a-109">Symptom</span></span>
<span data-ttu-id="1060a-110">При просмотре веб-приложения hello hello страницы загрузки медленно, а иногда и время ожидания.</span><span class="sxs-lookup"><span data-stu-id="1060a-110">When you browse hello web app, hello pages load slowly and sometimes timeout.</span></span>

## <a name="cause"></a><span data-ttu-id="1060a-111">Причина:</span><span class="sxs-lookup"><span data-stu-id="1060a-111">Cause</span></span>
<span data-ttu-id="1060a-112">Эта проблема часто связана с проблемами на уровне приложения, например:</span><span class="sxs-lookup"><span data-stu-id="1060a-112">This problem is often caused by application level issues, such as:</span></span>

* <span data-ttu-id="1060a-113">слишком долгое выполнение сетевых запросов;</span><span class="sxs-lookup"><span data-stu-id="1060a-113">network requests taking a long time</span></span>
* <span data-ttu-id="1060a-114">неэффективный код приложения или запросы к базе данных;</span><span class="sxs-lookup"><span data-stu-id="1060a-114">application code or database queries being inefficient</span></span>
* <span data-ttu-id="1060a-115">слишком высокие требования приложения к памяти и процессору;</span><span class="sxs-lookup"><span data-stu-id="1060a-115">application using high memory/CPU</span></span>
* <span data-ttu-id="1060a-116">Сбой из-за исключения tooan приложения</span><span class="sxs-lookup"><span data-stu-id="1060a-116">application crashing due tooan exception</span></span>

## <a name="troubleshooting-steps"></a><span data-ttu-id="1060a-117">Действия по устранению неполадок</span><span class="sxs-lookup"><span data-stu-id="1060a-117">Troubleshooting steps</span></span>
<span data-ttu-id="1060a-118">Процесс устранения неполадок можно разделить на три последовательных задачи.</span><span class="sxs-lookup"><span data-stu-id="1060a-118">Troubleshooting can be divided into three distinct tasks, in sequential order:</span></span>

1. [<span data-ttu-id="1060a-119">Наблюдение за поведением приложения.</span><span class="sxs-lookup"><span data-stu-id="1060a-119">Observe and monitor application behavior</span></span>](#observe)
2. [<span data-ttu-id="1060a-120">Сбор данных.</span><span class="sxs-lookup"><span data-stu-id="1060a-120">Collect data</span></span>](#collect)
3. [<span data-ttu-id="1060a-121">Hello проблем</span><span class="sxs-lookup"><span data-stu-id="1060a-121">Mitigate hello issue</span></span>](#mitigate)

<span data-ttu-id="1060a-122">[Веб-приложения службы приложений](/services/app-service/web/) содержат несколько инструментов для каждого из этих этапов.</span><span class="sxs-lookup"><span data-stu-id="1060a-122">[App Service Web Apps](/services/app-service/web/) gives you various options at each step.</span></span>

<a name="observe" />

### <a name="1-observe-and-monitor-application-behavior"></a><span data-ttu-id="1060a-123">1. Наблюдение за поведением приложения</span><span class="sxs-lookup"><span data-stu-id="1060a-123">1. Observe and monitor application behavior</span></span>
#### <a name="track-service-health"></a><span data-ttu-id="1060a-124">Мониторинг работоспособности службы</span><span class="sxs-lookup"><span data-stu-id="1060a-124">Track Service health</span></span>
<span data-ttu-id="1060a-125">Microsoft Azure информирует о каждом случае прерывания работы или снижения производительности службы.</span><span class="sxs-lookup"><span data-stu-id="1060a-125">Microsoft Azure publicizes each time there is a service interruption or performance degradation.</span></span> <span data-ttu-id="1060a-126">Можно отслеживать работоспособность hello hello службы на hello [портал Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="1060a-126">You can track hello health of hello service on hello [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="1060a-127">Дополнительные сведения см. в статье [Получение информации о работоспособности службы](../monitoring-and-diagnostics/insights-service-health.md).</span><span class="sxs-lookup"><span data-stu-id="1060a-127">For more information, see [Track service health](../monitoring-and-diagnostics/insights-service-health.md).</span></span>

#### <a name="monitor-your-web-app"></a><span data-ttu-id="1060a-128">Мониторинг веб-приложения</span><span class="sxs-lookup"><span data-stu-id="1060a-128">Monitor your web app</span></span>
<span data-ttu-id="1060a-129">Этот параметр позволяет toofind ожидания, если в приложении возникают проблемы.</span><span class="sxs-lookup"><span data-stu-id="1060a-129">This option enables you toofind out if your application is having any issues.</span></span> <span data-ttu-id="1060a-130">В колонке веб-приложение, щелкните hello **запросов и ошибок** плитки.</span><span class="sxs-lookup"><span data-stu-id="1060a-130">In your web app’s blade, click hello **Requests and errors** tile.</span></span> <span data-ttu-id="1060a-131">Hello **метрика** колонке показывает все показатели hello, можно добавить.</span><span class="sxs-lookup"><span data-stu-id="1060a-131">hello **Metric** blade shows you all hello metrics you can add.</span></span>

<span data-ttu-id="1060a-132">Некоторые показатели hello, вам может быть toomonitor для веб-приложения</span><span class="sxs-lookup"><span data-stu-id="1060a-132">Some of hello metrics that you might want toomonitor for your web app are</span></span>

* <span data-ttu-id="1060a-133">средний размер рабочего набора памяти;</span><span class="sxs-lookup"><span data-stu-id="1060a-133">Average memory working set</span></span>
* <span data-ttu-id="1060a-134">Среднее время ответа</span><span class="sxs-lookup"><span data-stu-id="1060a-134">Average response time</span></span>
* <span data-ttu-id="1060a-135">время ЦП;</span><span class="sxs-lookup"><span data-stu-id="1060a-135">CPU time</span></span>
* <span data-ttu-id="1060a-136">рабочий набор памяти;</span><span class="sxs-lookup"><span data-stu-id="1060a-136">Memory working set</span></span>
* <span data-ttu-id="1060a-137">Запросы</span><span class="sxs-lookup"><span data-stu-id="1060a-137">Requests</span></span>

![Мониторинг производительности веб-приложения](./media/app-service-web-troubleshoot-performance-degradation/1-monitor-metrics.png)

<span data-ttu-id="1060a-139">Дополнительные сведения можно найти в разделе </span><span class="sxs-lookup"><span data-stu-id="1060a-139">For more information, see:</span></span>

* [<span data-ttu-id="1060a-140">Мониторинг веб-приложений в службе приложений Azure</span><span class="sxs-lookup"><span data-stu-id="1060a-140">Monitor Web Apps in Azure App Service</span></span>](web-sites-monitor.md)
* [<span data-ttu-id="1060a-141">Создание оповещений для служб Azure с помощью портала Azure</span><span class="sxs-lookup"><span data-stu-id="1060a-141">Receive alert notifications</span></span>](../monitoring-and-diagnostics/insights-receive-alert-notifications.md)

#### <a name="monitor-web-endpoint-status"></a><span data-ttu-id="1060a-142">Мониторинг состояния конечной веб-точки</span><span class="sxs-lookup"><span data-stu-id="1060a-142">Monitor web endpoint status</span></span>
<span data-ttu-id="1060a-143">Если вы используете веб-приложения hello **Стандартная** ценовой категории, веб-приложений позволяет отслеживать две конечные точки из трех географических местоположений.</span><span class="sxs-lookup"><span data-stu-id="1060a-143">If you are running your web app in hello **Standard** pricing tier, Web Apps lets you monitor two endpoints from three geographic locations.</span></span>

<span data-ttu-id="1060a-144">Функция мониторинга конечных точек настраивает веб-тесты из географически распределенных местоположений, позволяя проверить время ответа и время непрерывной работы URL-адресов.</span><span class="sxs-lookup"><span data-stu-id="1060a-144">Endpoint monitoring configures web tests from geo-distributed locations that test response time and uptime of web URLs.</span></span> <span data-ttu-id="1060a-145">Проверка Hello выполнения операция HTTP GET на время ответа для URL-адрес toodetermine hello web hello и работы от каждого расположения.</span><span class="sxs-lookup"><span data-stu-id="1060a-145">hello test performs an HTTP GET operation on hello web URL toodetermine hello response time and uptime from each location.</span></span> <span data-ttu-id="1060a-146">Для каждого настроенного расположения тест выполняется каждые пять минут.</span><span class="sxs-lookup"><span data-stu-id="1060a-146">Each configured location runs a test every five minutes.</span></span>

<span data-ttu-id="1060a-147">Время непрерывной работы контролируется при помощи кодов ответов HTTP, а время ответа измеряется в миллисекундах.</span><span class="sxs-lookup"><span data-stu-id="1060a-147">Uptime is monitored using HTTP response codes, and response time is measured in milliseconds.</span></span> <span data-ttu-id="1060a-148">Тест завершается с ошибкой в случае hello код ответа HTTP больше или равно too400 или если hello ответ требуется более 30 секунд.</span><span class="sxs-lookup"><span data-stu-id="1060a-148">A monitoring test fails if hello HTTP response code is greater than or equal too400 or if hello response takes more than 30 seconds.</span></span> <span data-ttu-id="1060a-149">Конечная точка считается доступной, если тесты мониторинга завершились для нее успешно все hello указаны местоположения.</span><span class="sxs-lookup"><span data-stu-id="1060a-149">An endpoint is considered available if its monitoring tests succeed from all hello specified locations.</span></span>

<span data-ttu-id="1060a-150">разделе tooset его, [мониторинг приложений в службе приложений Azure](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="1060a-150">tooset it up, see [Monitor apps in Azure App Service](web-sites-monitor.md).</span></span>

<span data-ttu-id="1060a-151">Кроме того, вы можете посмотреть видео, посвященное контролю конечных точек: [Поддержка работы веб-сайтов Azure с помощью мониторинга конечных точек (со Стефаном Щаковым ((Stefan Schackow))](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) .</span><span class="sxs-lookup"><span data-stu-id="1060a-151">Also, see [Keeping Azure Web Sites up plus Endpoint Monitoring - with Stefan Schackow](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) for a video on endpoint monitoring.</span></span>

#### <a name="application-performance-monitoring-using-extensions"></a><span data-ttu-id="1060a-152">Контроль производительности приложений с помощью расширений</span><span class="sxs-lookup"><span data-stu-id="1060a-152">Application performance monitoring using Extensions</span></span>
<span data-ttu-id="1060a-153">Вы можете также отслеживать производительность приложения через *расширения сайта*.</span><span class="sxs-lookup"><span data-stu-id="1060a-153">You can also monitor your application performance by using *site extensions*.</span></span>

<span data-ttu-id="1060a-154">Каждый веб-приложения служб приложений предоставляет конечную точку расширенного управления, позволяющий toouse мощный набор средств, развернутый как расширения сайта.</span><span class="sxs-lookup"><span data-stu-id="1060a-154">Each App Service web app provides an extensible management end point that allows you toouse a powerful set of tools deployed as site extensions.</span></span> <span data-ttu-id="1060a-155">Расширения включают в себя:</span><span class="sxs-lookup"><span data-stu-id="1060a-155">Extensions include:</span></span> 

- <span data-ttu-id="1060a-156">редакторы исходного кода, например [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx);</span><span class="sxs-lookup"><span data-stu-id="1060a-156">Source code editors like [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx).</span></span> 
- <span data-ttu-id="1060a-157">Средства управления для подключенных ресурсы, такие как базы данных MySQL подключен tooa веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1060a-157">Management tools for connected resources such as a MySQL database connected tooa web app.</span></span>

<span data-ttu-id="1060a-158">[Azure Application Insights](/services/application-insights/) и [New Relic](/marketplace/partners/newrelic/newrelic/) два наблюдение за hello доступных модулей сайта.</span><span class="sxs-lookup"><span data-stu-id="1060a-158">[Azure Application Insights](/services/application-insights/) and [New Relic](/marketplace/partners/newrelic/newrelic/) are two of hello performance monitoring site extensions that are available.</span></span> <span data-ttu-id="1060a-159">toouse New Relic, установите агент во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="1060a-159">toouse New Relic, you install an agent at runtime.</span></span> <span data-ttu-id="1060a-160">toouse Azure Application Insights перестроить кода с помощью пакета SDK, а также можно установить расширения, который предоставляет доступ к данным tooadditional.</span><span class="sxs-lookup"><span data-stu-id="1060a-160">toouse Azure Application Insights, you rebuild your code with an SDK, and you can also install an extension that provides access tooadditional data.</span></span> <span data-ttu-id="1060a-161">Hello SDK позволяет писать код toomonitor hello использования и производительность вашего приложения более подробно.</span><span class="sxs-lookup"><span data-stu-id="1060a-161">hello SDK lets you write code toomonitor hello usage and performance of your app in more detail.</span></span>

<span data-ttu-id="1060a-162">. в разделе toouse Application Insights [наблюдения за производительностью в веб-приложениях](../application-insights/app-insights-web-monitor-performance.md).</span><span class="sxs-lookup"><span data-stu-id="1060a-162">toouse Application Insights, see [Monitor performance in web applications](../application-insights/app-insights-web-monitor-performance.md).</span></span>

<span data-ttu-id="1060a-163">в разделе toouse New Relic [новый Relic производительности управление приложениями в Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span><span class="sxs-lookup"><span data-stu-id="1060a-163">toouse New Relic, see [New Relic Application Performance Management on Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span></span>

<a name="collect" />

### <a name="2-collect-data"></a><span data-ttu-id="1060a-164">2. Сбор данных</span><span class="sxs-lookup"><span data-stu-id="1060a-164">2. Collect data</span></span>
<span data-ttu-id="1060a-165">Среда веб-приложения Hello предоставляет диагностических функций для записи в журнал из hello веб-сервер и веб-приложения hello.</span><span class="sxs-lookup"><span data-stu-id="1060a-165">hello Web Apps environment provides diagnostic functionality for logging information from both hello web server and hello web application.</span></span> <span data-ttu-id="1060a-166">сведения о Hello разделяется диагностики веб-серверов и диагностики приложений.</span><span class="sxs-lookup"><span data-stu-id="1060a-166">hello information is separated into web server diagnostics and application diagnostics.</span></span>

#### <a name="enable-web-server-diagnostics"></a><span data-ttu-id="1060a-167">Включение диагностики веб-сервера</span><span class="sxs-lookup"><span data-stu-id="1060a-167">Enable web server diagnostics</span></span>
<span data-ttu-id="1060a-168">Можно включить или отключить hello следующие виды журналы:</span><span class="sxs-lookup"><span data-stu-id="1060a-168">You can enable or disable hello following kinds of logs:</span></span>

* <span data-ttu-id="1060a-169">**Подробное ведение журнала ошибок** — регистрация подробной информации об ошибке для кодов состояния HTTP, которые указывают на сбой (код состояния 400 и выше).</span><span class="sxs-lookup"><span data-stu-id="1060a-169">**Detailed Error Logging** - Detailed error information for HTTP status codes that indicate a failure (status code 400 or greater).</span></span> <span data-ttu-id="1060a-170">Это может содержать сведения, которые могут помочь определить, почему hello сервер вернул код ошибки hello.</span><span class="sxs-lookup"><span data-stu-id="1060a-170">This may contain information that can help determine why hello server returned hello error code.</span></span>
* <span data-ttu-id="1060a-171">**Не удалось выполнить запрос трассировки** -подробные сведения о невыполненных запросов, включая трассировки запрос hello tooprocess компоненты, используемые IIS hello и hello время, затраченное в каждом компоненте.</span><span class="sxs-lookup"><span data-stu-id="1060a-171">**Failed Request Tracing** - Detailed information on failed requests, including a trace of hello IIS components used tooprocess hello request and hello time taken in each component.</span></span> <span data-ttu-id="1060a-172">Это может быть полезно, если вы пытаетесь tooimprove производительности веб-приложения или выявить причину возникновения определенной ошибки HTTP.</span><span class="sxs-lookup"><span data-stu-id="1060a-172">This can be useful if you are attempting tooimprove web app performance or isolate what is causing a specific HTTP error.</span></span>
* <span data-ttu-id="1060a-173">**Ведение журналов сервера веб-** -сведения о транзакций HTTP с использованием расширенного формата файла журнала hello W3C.</span><span class="sxs-lookup"><span data-stu-id="1060a-173">**Web Server Logging** - Information about HTTP transactions using hello W3C extended log file format.</span></span> <span data-ttu-id="1060a-174">Это полезно при определении общей web app метрик, таких как hello число запросов, которые обрабатываются или сколько запросы отправляются определенный IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="1060a-174">This is useful when determining overall web app metrics, such as hello number of requests handled or how many requests are from a specific IP address.</span></span>

#### <a name="enable-application-diagnostics"></a><span data-ttu-id="1060a-175">Включение диагностики приложений</span><span class="sxs-lookup"><span data-stu-id="1060a-175">Enable application diagnostics</span></span>
<span data-ttu-id="1060a-176">Существует несколько вариантов toocollect данные о производительности приложения из веб-приложений, профилировать приложение динамической из Visual Studio или измените toolog код вашего приложения, Дополнительные сведения и трассировки.</span><span class="sxs-lookup"><span data-stu-id="1060a-176">There are several options toocollect application performance data from Web Apps, profile your application live from Visual Studio, or modify your application code toolog more information and traces.</span></span> <span data-ttu-id="1060a-177">Можно выбрать параметры hello, на основе уровня доступа toohello приложении, и вы заметили из средства мониторинга hello.</span><span class="sxs-lookup"><span data-stu-id="1060a-177">You can choose hello options based on how much access you have toohello application and what you observed from hello monitoring tools.</span></span>

##### <a name="use-application-insights-profiler"></a><span data-ttu-id="1060a-178">Использование Application Insights Profiler</span><span class="sxs-lookup"><span data-stu-id="1060a-178">Use Application Insights Profiler</span></span>
<span data-ttu-id="1060a-179">Позволяет захватывать трассировку подробные производительности toostart профилировщик аналитики приложения hello.</span><span class="sxs-lookup"><span data-stu-id="1060a-179">You can enable hello Application Insights Profiler toostart capturing detailed performance traces.</span></span> <span data-ttu-id="1060a-180">Можно получить доступ к трассировки, записанные вверх toofive, дней назад при необходимости tooinvestigate проблемы произошли в последние hello.</span><span class="sxs-lookup"><span data-stu-id="1060a-180">You can access traces captured up toofive days ago when you need tooinvestigate problems happened in hello past.</span></span> <span data-ttu-id="1060a-181">Этот параметр можно выбрать, пока у вас есть доступ toohello веб-приложения Application Insights ресурсов на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="1060a-181">You can choose this option as long as you have access toohello web app's Application Insights resource on Azure portal.</span></span>

<span data-ttu-id="1060a-182">Профилировщик аналитики приложений предоставляет статистику времени отклика для каждого веб-вызов и трассировок, указывающее, какая строка кода вызвала hello замедление отклика.</span><span class="sxs-lookup"><span data-stu-id="1060a-182">Application Insights Profiler provides statistics on response time for each web call and traces that indicates which line of code caused hello slow responses.</span></span> <span data-ttu-id="1060a-183">Иногда hello приложение служб приложений выполняется медленно из-за определенный код написан высокопроизводительных способом.</span><span class="sxs-lookup"><span data-stu-id="1060a-183">Sometimes hello App Service app is slow because certain code is not written in a performant way.</span></span> <span data-ttu-id="1060a-184">К таким кодам относится последовательный код, который может выполняться параллельно и вызывать нежелательные конфликты в базе данных.</span><span class="sxs-lookup"><span data-stu-id="1060a-184">Examples include sequential code that can be run in parallel and undesired database lock contentions.</span></span> <span data-ttu-id="1060a-185">Удаление эти узкие места в коде hello увеличивает производительность приложения hello, но они жестких toodetect без настройки сложных трассировки и журналы.</span><span class="sxs-lookup"><span data-stu-id="1060a-185">Removing these bottlenecks in hello code increases hello app's performance, but they are hard toodetect without setting up elaborate traces and logs.</span></span> <span data-ttu-id="1060a-186">Hello трассировок, собираемых в профилировщик аналитики приложений помогает идентификации строк hello код, замедляющий ее работу приложения hello и решить эту проблему, для приложений служб приложений.</span><span class="sxs-lookup"><span data-stu-id="1060a-186">hello traces collected by Application Insights Profiler helps identifying hello lines of code that slows down hello application and overcome this challenge for App Service apps.</span></span>

 <span data-ttu-id="1060a-187">Дополнительные сведения см. в статье [Профилирование динамических веб-приложений Azure с помощью Application Insights](../application-insights/app-insights-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="1060a-187">For more information, see [Profiling live Azure web apps with Application Insights](../application-insights/app-insights-profiler.md).</span></span>

##### <a name="use-remote-profiling"></a><span data-ttu-id="1060a-188">Используйте удаленное профилирование</span><span class="sxs-lookup"><span data-stu-id="1060a-188">Use Remote Profiling</span></span>
<span data-ttu-id="1060a-189">Служба приложений Azure позволяет удаленно профилировать веб-приложения, интерфейсные приложения и веб-задания.</span><span class="sxs-lookup"><span data-stu-id="1060a-189">In Azure App Service, Web Apps, API Apps, and WebJobs can be remotely profiled.</span></span> <span data-ttu-id="1060a-190">Выберите этот параметр, если у вас есть доступ toohello веб-приложение ресурса и известно как tooreproduce hello проблему или происходит проблема производительности hello интервал времени, если известно точное hello.</span><span class="sxs-lookup"><span data-stu-id="1060a-190">Choose this option if you have access toohello web app resource and you know how tooreproduce hello issue, or if you know hello exact time interval hello performance issue happens.</span></span>

<span data-ttu-id="1060a-191">Удаленного профилирования полезен, если hello ЦП для процесса hello высокого уровня и процесс выполняется медленнее, чем ожидалось или выше, чем обычные задержки hello HTTP-запросов, можно удаленно профиля процесса и получения стеков вызова tooanalyze для hello ЦП выборки Здравствуйте, процесс действия и кода горячего пути.</span><span class="sxs-lookup"><span data-stu-id="1060a-191">Remote Profiling is useful if hello CPU usage of hello process is high and your process is running slower than expected, or hello latency of HTTP requests are higher than normal, you can remotely profile your process and get hello CPU sampling call stacks tooanalyze hello process activity and code hot paths.</span></span>

<span data-ttu-id="1060a-192">Дополнительные сведения см. в статье [Поддержка удаленного профилирования в службе приложений Azure](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).</span><span class="sxs-lookup"><span data-stu-id="1060a-192">For more information, see [Remote Profiling support in Azure App Service](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).</span></span>

##### <a name="set-up-diagnostic-traces-manually"></a><span data-ttu-id="1060a-193">Настройка диагностических трассировок вручную</span><span class="sxs-lookup"><span data-stu-id="1060a-193">Set up diagnostic traces manually</span></span>
<span data-ttu-id="1060a-194">При наличии исходного кода доступа toohello веб-приложения Application diagnostics позволяет toocapture данные, созданные веб-приложением.</span><span class="sxs-lookup"><span data-stu-id="1060a-194">If you have access toohello web application source code, Application diagnostics enables you toocapture information produced by a web application.</span></span> <span data-ttu-id="1060a-195">Приложения ASP.NET могут использовать hello `System.Diagnostics.Trace` консоли диагностики приложений toohello класса toolog сведения журнала.</span><span class="sxs-lookup"><span data-stu-id="1060a-195">ASP.NET applications can use hello `System.Diagnostics.Trace` class toolog information toohello application diagnostics log.</span></span> <span data-ttu-id="1060a-196">Однако необходимо toochange кода hello и повторного развертывания приложения.</span><span class="sxs-lookup"><span data-stu-id="1060a-196">However, you need toochange hello code and redeploy your application.</span></span> <span data-ttu-id="1060a-197">Этот метод рекомендуется в том случае, если приложение выполняется в тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="1060a-197">This method is recommended if your app is running on a testing environment.</span></span>

<span data-ttu-id="1060a-198">Подробные инструкции о том, как tooconfigure приложения для ведения журнала, в разделе [включить ведение журнала диагностики для веб-приложений в службе приложений Azure](web-sites-enable-diagnostic-log.md).</span><span class="sxs-lookup"><span data-stu-id="1060a-198">For detailed instructions on how tooconfigure your application for logging, see [Enable diagnostics logging for web apps in Azure App Service](web-sites-enable-diagnostic-log.md).</span></span>

#### <a name="use-hello-azure-app-service-support-portal"></a><span data-ttu-id="1060a-199">Использовать портал поддержки hello службе приложений Azure</span><span class="sxs-lookup"><span data-stu-id="1060a-199">Use hello Azure App Service support portal</span></span>
<span data-ttu-id="1060a-200">Веб-приложения предоставляет возможность hello tootroubleshoot связанные tooyour проблемы веб-приложения, просмотрев HTTP журналы, журналы событий, дамп и многое другое.</span><span class="sxs-lookup"><span data-stu-id="1060a-200">Web Apps provides you with hello ability tootroubleshoot issues related tooyour web app by looking at HTTP logs, event logs, process dumps, and more.</span></span> <span data-ttu-id="1060a-201">Эту информацию вы сможете найти на нашем портале поддержки по адресу **http://&lt;имя приложения>.scm.azurewebsites.net/Support**</span><span class="sxs-lookup"><span data-stu-id="1060a-201">You can access all this information using our Support portal at **http://&lt;your app name>.scm.azurewebsites.net/Support**</span></span>

<span data-ttu-id="1060a-202">Портал поддержки Hello службе приложений Azure предоставляет три отдельных вкладках toosupport hello распространенных сценария устранения неполадок в три этапа:</span><span class="sxs-lookup"><span data-stu-id="1060a-202">hello Azure App Service support portal provides you with three separate tabs toosupport hello three steps of a common troubleshooting scenario:</span></span>

1. <span data-ttu-id="1060a-203">Наблюдение за поведением.</span><span class="sxs-lookup"><span data-stu-id="1060a-203">Observe current behavior</span></span>
2. <span data-ttu-id="1060a-204">Анализ, сбор данных диагностики и запустив hello встроенных анализаторы</span><span class="sxs-lookup"><span data-stu-id="1060a-204">Analyze by collecting diagnostics information and running hello built-in analyzers</span></span>
3. <span data-ttu-id="1060a-205">Устранение неполадки.</span><span class="sxs-lookup"><span data-stu-id="1060a-205">Mitigate</span></span>

<span data-ttu-id="1060a-206">Если происходит проблема hello прямо сейчас, нажмите кнопку **анализ** > **диагностики** > **диагностики теперь** toocreate сеанс диагностики, осуществляет сбор журналов HTTP, журналы программы просмотра событий, дампы памяти, журналы ошибок PHP и отчет процесса PHP.</span><span class="sxs-lookup"><span data-stu-id="1060a-206">If hello issue is happening right now, click **Analyze** > **Diagnostics** > **Diagnose Now** toocreate a diagnostic session for you, which collects HTTP logs, event viewer logs, memory dumps, PHP error logs, and PHP process report.</span></span>

<span data-ttu-id="1060a-207">После сбора данных hello портал поддержки hello выполняется анализ на данных hello и предоставляет отчет в формате HTML.</span><span class="sxs-lookup"><span data-stu-id="1060a-207">Once hello data is collected, hello support portal runs an analysis on hello data and provides you with an HTML report.</span></span>

<span data-ttu-id="1060a-208">В случае, если вам нужны данные toodownload hello, по умолчанию, он будет храниться в папке D:\home\data\DaaS hello.</span><span class="sxs-lookup"><span data-stu-id="1060a-208">In case you want toodownload hello data, by default, it would be stored in hello D:\home\data\DaaS folder.</span></span>

<span data-ttu-id="1060a-209">Дополнительные сведения на портале поддержки hello службе приложений Azure см. в разделе [tooSupport обновлений расширение сайта для веб-сайтов Azure](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).</span><span class="sxs-lookup"><span data-stu-id="1060a-209">For more information on hello Azure App Service support portal, see [New Updates tooSupport Site Extension for Azure Websites](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).</span></span>

#### <a name="use-hello-kudu-debug-console"></a><span data-ttu-id="1060a-210">Использование консоли отладки Kudu hello</span><span class="sxs-lookup"><span data-stu-id="1060a-210">Use hello Kudu Debug Console</span></span>
<span data-ttu-id="1060a-211">Веб-приложения оснащены консолью отладки, с помощью которой вы можете получать сведения о среде, используя функции отладки, изучения, передачи файлов и конечных точек JSON.</span><span class="sxs-lookup"><span data-stu-id="1060a-211">Web Apps comes with a debug console that you can use for debugging, exploring, uploading files, as well as JSON endpoints for getting information about your environment.</span></span> <span data-ttu-id="1060a-212">Эта консоль называется hello *консоли Kudu* или hello *SCM мониторинга* веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1060a-212">This console is called hello *Kudu Console* or hello *SCM Dashboard* for your web app.</span></span>

<span data-ttu-id="1060a-213">Доступ к этой панели мониторинга переходит в ссылке toohello **https://&lt;имя вашего приложения >.scm.azurewebsites.net/**.</span><span class="sxs-lookup"><span data-stu-id="1060a-213">You can access this dashboard by going toohello link **https://&lt;Your app name>.scm.azurewebsites.net/**.</span></span>

<span data-ttu-id="1060a-214">Ниже приведены некоторые Kudu предоставляет следующие аспекты hello.</span><span class="sxs-lookup"><span data-stu-id="1060a-214">Some of hello things that Kudu provides are:</span></span>

* <span data-ttu-id="1060a-215">настройки среды для вашего приложения;</span><span class="sxs-lookup"><span data-stu-id="1060a-215">environment settings for your application</span></span>
* <span data-ttu-id="1060a-216">потоковая передача журналов;</span><span class="sxs-lookup"><span data-stu-id="1060a-216">log stream</span></span>
* <span data-ttu-id="1060a-217">диагностический дамп;</span><span class="sxs-lookup"><span data-stu-id="1060a-217">diagnostic dump</span></span>
* <span data-ttu-id="1060a-218">консоль отладки с возможностью запуска командлетов Powershell и основных команд DOS.</span><span class="sxs-lookup"><span data-stu-id="1060a-218">debug console in which you can run Powershell cmdlets and basic DOS commands.</span></span>

<span data-ttu-id="1060a-219">Другой полезной функцией Kudu является, в случае, если приложение является создание исключений первого шанса, можно использовать Kudu и дампы hello SysInternals средство Procdump toocreate памяти.</span><span class="sxs-lookup"><span data-stu-id="1060a-219">Another useful feature of Kudu is that, in case your application is throwing first-chance exceptions, you can use Kudu and hello SysInternals tool Procdump toocreate memory dumps.</span></span> <span data-ttu-id="1060a-220">Эти дампы памяти представляют собой моментальные снимки процесса hello и часто помогает устранить устранения более серьезных проблем с веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1060a-220">These memory dumps are snapshots of hello process and can often help you troubleshoot more complicated issues with your web app.</span></span>

<span data-ttu-id="1060a-221">Дополнительные сведения о возможностях консоли Kudu см. в статье об [инструментах в Интернете для веб-сайтов Microsoft Azure](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span><span class="sxs-lookup"><span data-stu-id="1060a-221">For more information on features available in Kudu, see [Azure Websites Team Services tools you should know about](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span></span>

<a name="mitigate" />

### <a name="3-mitigate-hello-issue"></a><span data-ttu-id="1060a-222">3. Hello проблем</span><span class="sxs-lookup"><span data-stu-id="1060a-222">3. Mitigate hello issue</span></span>
#### <a name="scale-hello-web-app"></a><span data-ttu-id="1060a-223">Масштаб hello веб-приложения</span><span class="sxs-lookup"><span data-stu-id="1060a-223">Scale hello web app</span></span>
<span data-ttu-id="1060a-224">В службе приложений Azure для повышения производительности и пропускной способности, можно изменить масштаб hello, с которой выполняется приложение.</span><span class="sxs-lookup"><span data-stu-id="1060a-224">In Azure App Service, for increased performance and throughput,  you can adjust hello scale at which you are running your application.</span></span> <span data-ttu-id="1060a-225">Вертикальное масштабирование веб-приложение включает в себя два связанных действий: изменение вашей tooa план службы приложений, выше ценовой категории и определенных настроек после переключения toohello выше ценовой категории.</span><span class="sxs-lookup"><span data-stu-id="1060a-225">Scaling up a web app involves two related actions: changing your App Service plan tooa higher pricing tier, and configuring certain settings after you have switched toohello higher pricing tier.</span></span>

<span data-ttu-id="1060a-226">Дополнительные сведения о масштабировании см. в статье [Увеличение масштаба приложения в Azure](web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="1060a-226">For more information on scaling, see [Scale a web app in Azure App Service](web-sites-scale.md).</span></span>

<span data-ttu-id="1060a-227">Кроме того вы можете toorun приложения на более одного экземпляра.</span><span class="sxs-lookup"><span data-stu-id="1060a-227">Additionally, you can choose toorun your application on more than one instance.</span></span> <span data-ttu-id="1060a-228">Увеличение масштаба не только увеличит возможности обработки, но и повысит отказоустойчивость приложения.</span><span class="sxs-lookup"><span data-stu-id="1060a-228">Scaling out not only provides you with more processing capability, but also gives you some amount of fault tolerance.</span></span> <span data-ttu-id="1060a-229">Если процесс hello перестает работать на одном экземпляре, hello других экземпляров по-прежнему tooserve запросов.</span><span class="sxs-lookup"><span data-stu-id="1060a-229">If hello process goes down on one instance, hello other instances continue tooserve requests.</span></span>

<span data-ttu-id="1060a-230">Можно задать hello масштабирования toobe вручную или автоматически.</span><span class="sxs-lookup"><span data-stu-id="1060a-230">You can set hello scaling toobe Manual or Automatic.</span></span>

#### <a name="use-autoheal"></a><span data-ttu-id="1060a-231">Использование функции AutoHeal</span><span class="sxs-lookup"><span data-stu-id="1060a-231">Use AutoHeal</span></span>
<span data-ttu-id="1060a-232">Функция AutoHeal перезапускается hello рабочий процесс для приложения с учетом выбранных (например, изменения конфигурации, запросы, ограничения памяти или время hello необходимости tooexecute запрос) параметров.</span><span class="sxs-lookup"><span data-stu-id="1060a-232">AutoHeal recycles hello worker process for your app based on settings you choose (like configuration changes, requests, memory-based limits, or hello time needed tooexecute a request).</span></span> <span data-ttu-id="1060a-233">Большую часть времени hello hello процесс очистки является hello самый быстрый способ toorecover из-за проблемы.</span><span class="sxs-lookup"><span data-stu-id="1060a-233">Most of hello time, recycle hello process is hello fastest way toorecover from a problem.</span></span> <span data-ttu-id="1060a-234">На то, что всегда можно перезапустить веб-приложения hello из непосредственно в hello портал Azure, AutoHeal выполняет ее автоматически.</span><span class="sxs-lookup"><span data-stu-id="1060a-234">Though you can always restart hello web app from directly within hello Azure portal, AutoHeal does it automatically for you.</span></span> <span data-ttu-id="1060a-235">Требуется toodo всего добавить некоторые триггеры в hello корневом файле web.config для веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="1060a-235">All you need toodo is add some triggers in hello root web.config for your web app.</span></span> <span data-ttu-id="1060a-236">Эти параметры будут работать в hello таким же образом, даже если приложение не приложении .net.</span><span class="sxs-lookup"><span data-stu-id="1060a-236">These settings would work in hello same way even if your application is not a .Net app.</span></span>

<span data-ttu-id="1060a-237">Дополнительные сведения см. в статье об [автоматическом восстановлении веб-сайтов Microsoft Azure](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span><span class="sxs-lookup"><span data-stu-id="1060a-237">For more information, see [Auto-Healing Azure Web Sites](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span></span>

#### <a name="restart-hello-web-app"></a><span data-ttu-id="1060a-238">Перезапустить веб-приложение hello</span><span class="sxs-lookup"><span data-stu-id="1060a-238">Restart hello web app</span></span>
<span data-ttu-id="1060a-239">Перезагрузка часто является toorecover простейший способ hello после однократного возникновения проблем.</span><span class="sxs-lookup"><span data-stu-id="1060a-239">Restarting is often hello simplest way toorecover from one-time issues.</span></span> <span data-ttu-id="1060a-240">На hello [портал Azure](https://portal.azure.com/), в колонке веб-приложения вы toostop параметры hello или перезапустите приложение.</span><span class="sxs-lookup"><span data-stu-id="1060a-240">On hello [Azure portal](https://portal.azure.com/), on your web app’s blade, you have hello options toostop or restart your app.</span></span>

 ![Перезапустите проблем веб-приложения toosolve производительности](./media/app-service-web-troubleshoot-performance-degradation/2-restart.png)

<span data-ttu-id="1060a-242">Управлять приложениями можно также с помощью Azure Powershell.</span><span class="sxs-lookup"><span data-stu-id="1060a-242">You can also manage your web app using Azure Powershell.</span></span> <span data-ttu-id="1060a-243">Дополнительные сведения см. в статье [Использование Azure PowerShell с диспетчером ресурсов Azure](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="1060a-243">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>
