---
title: "Управление трафиком веб-приложений Azure с помощью диспетчера трафика Azure"
description: "В этой статье представлена сводная информация об использовании диспетчера трафика Azure с веб-приложениями Azure."
services: app-service\web
documentationcenter: 
author: cephalin
writer: cephalin
manager: erikre
editor: mollybos
ms.assetid: dabda633-e72f-4dd4-bf1c-6e945da456fd
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/25/2016
ms.author: cephalin
ms.openlocfilehash: fb7d391e3118a9dccde5501c3f30c6f580932a30
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="controlling-azure-web-app-traffic-with-azure-traffic-manager"></a><span data-ttu-id="900eb-103">Управление трафиком веб-приложений Azure с помощью диспетчера трафика Azure</span><span class="sxs-lookup"><span data-stu-id="900eb-103">Controlling Azure web app traffic with Azure Traffic Manager</span></span>
> [!NOTE]
> <span data-ttu-id="900eb-104">В этой статье представлена сводная информация об использовании диспетчера трафика Microsoft Azure с веб-приложениями службы приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="900eb-104">This article provides summary information for Microsoft Azure Traffic Manager as it relates to Azure App Service Web Apps.</span></span> <span data-ttu-id="900eb-105">Дополнительные сведения о самом компоненте диспетчера трафика Azure можно найти по ссылкам, приведенным в конце статьи.</span><span class="sxs-lookup"><span data-stu-id="900eb-105">More information about Azure Traffic Manager itself can be found by visiting the links at the end of this article.</span></span>
> 
> 

## <a name="introduction"></a><span data-ttu-id="900eb-106">Введение</span><span class="sxs-lookup"><span data-stu-id="900eb-106">Introduction</span></span>
<span data-ttu-id="900eb-107">С помощью диспетчера трафика Azure можно управлять распределением запросов от веб-клиентов между веб-приложениями в службе приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="900eb-107">You can use Azure Traffic Manager to control how requests from web clients are distributed to web apps in Azure App Service.</span></span> <span data-ttu-id="900eb-108">После добавления конечных точек веб-приложений Azure в профиль диспетчера трафика Azure этот компонент отслеживает состояние ваших веб-приложений (запущены, остановлены или удалены). Таким образом диспетчер трафика может принимать решения о том, на какие из этих конечных точек нужно перенаправлять трафик.</span><span class="sxs-lookup"><span data-stu-id="900eb-108">When web app endpoints are added to a Azure Traffic Manager profile, Azure Traffic Manager keeps track of the status of your web apps (running, stopped or deleted) so that it can decide which of those endpoints should receive traffic.</span></span>

## <a name="load-balancing-methods"></a><span data-ttu-id="900eb-109">Методы балансировки нагрузки</span><span class="sxs-lookup"><span data-stu-id="900eb-109">Load Balancing Methods</span></span>
<span data-ttu-id="900eb-110">Диспетчер трафика Azure использует три разных метода балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="900eb-110">Azure Traffic Manager uses three different load balancing methods.</span></span> <span data-ttu-id="900eb-111">Они описаны в приведенном ниже списке в контексте их использования с веб-приложениями Azure.</span><span class="sxs-lookup"><span data-stu-id="900eb-111">These are described  in the following list as they pertain to Azure web apps.</span></span>

* <span data-ttu-id="900eb-112">**Отработка отказа**. Если у вас есть клоны веб-приложения в разных регионах, с помощью этого метода одно веб-приложение можно настроить для обслуживания всего трафика веб-клиентов, а другое веб-приложение в другом регионе — для обслуживания этого же трафика в случае недоступности первого веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="900eb-112">**Failover**: If you have web app clones in different regions, you can use this method to configure one web app to service all web client traffic, and configure another web app in a different region to service that traffic in case the first web app becomes unavailable.</span></span>
* <span data-ttu-id="900eb-113">**Циклический перебор**. Если у вас есть клоны веб-приложения в разных регионах, с помощью этого метода можно равномерно распределять трафик между веб-приложениями в разных регионах.</span><span class="sxs-lookup"><span data-stu-id="900eb-113">**Round Robin**: If you have web app clones in different regions, you can use this method to distribute traffic equally across the web apps in different regions.</span></span>
* <span data-ttu-id="900eb-114">**Производительность**. Этот метод распределяет трафик на основе минимального времени обмена данными с клиентами.</span><span class="sxs-lookup"><span data-stu-id="900eb-114">**Performance**: The Performance method distributes traffic based on the shortest round trip time to clients.</span></span> <span data-ttu-id="900eb-115">Этот метод можно использовать для веб-приложений, расположенных как в одном, так и в разных регионах.</span><span class="sxs-lookup"><span data-stu-id="900eb-115">The Performance method can be used for web apps within the same region or in different regions.</span></span>

## <a name="web-apps-and-traffic-manager-profiles"></a><span data-ttu-id="900eb-116">Веб-приложения и профили диспетчера трафика</span><span class="sxs-lookup"><span data-stu-id="900eb-116">Web Apps and Traffic Manager Profiles</span></span>
<span data-ttu-id="900eb-117">Чтобы настроить управление трафиком веб-приложений, создайте в диспетчере трафика Azure профиль, использующий один из трех описанных выше методов распределения нагрузки. Затем добавьте в этот профиль конечные точки (в данном случае это веб-приложения), трафиком которых требуется управлять.</span><span class="sxs-lookup"><span data-stu-id="900eb-117">To configure the control of web app traffic, you create a profile in Azure Traffic Manager that uses one of the three load balancing methods described previously, and then add the endpoints (in this case, web apps) for which you want to control traffic to the profile.</span></span> <span data-ttu-id="900eb-118">Сведения о состоянии веб-приложений (запущены, остановлены или удалены) регулярно передаются в профиль, что дает возможность диспетчеру трафика Azure соответствующим образом перенаправлять трафик.</span><span class="sxs-lookup"><span data-stu-id="900eb-118">Your web app status (running, stopped or deleted) is regularly communicated to the profile so that Azure Traffic Manager can direct traffic accordingly.</span></span>

<span data-ttu-id="900eb-119">При использовании диспетчера трафика Azure с Azure необходимо помнить следующее:</span><span class="sxs-lookup"><span data-stu-id="900eb-119">When using Azure Traffic Manager with Azure, keep in mind the following points:</span></span>

* <span data-ttu-id="900eb-120">В случае развертывания в одном регионе только веб-приложений служба приложений уже предоставляет возможности отработки отказа и циклического перебора вне зависимости от режима работы веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="900eb-120">For web app only deployments within the same region, Web Apps already provides failover and round-robin functionality without regard to web app mode.</span></span>
* <span data-ttu-id="900eb-121">В случае развертывания в одном регионе веб-приложений и других облачных служб Azure вы можете сочетать оба типа конечных точек для реализации гибридных сценариев.</span><span class="sxs-lookup"><span data-stu-id="900eb-121">For deployments in the same region that use Web Apps in conjunction with another Azure cloud service, you can combine both types of endpoints to enable hybrid scenarios.</span></span>
* <span data-ttu-id="900eb-122">В профиле можно указать только одну конечную точку веб-приложения на регион.</span><span class="sxs-lookup"><span data-stu-id="900eb-122">You can only specify one web app endpoint per region in a profile.</span></span> <span data-ttu-id="900eb-123">При выборе веб-приложения в качестве конечной точки для одного региона остальные веб-приложения в этом регионе становятся недоступны для выбора.</span><span class="sxs-lookup"><span data-stu-id="900eb-123">When you select a web app as an endpoint for one region, the remaining web apps in that region become unavailable for selection for that profile.</span></span>
* <span data-ttu-id="900eb-124">Конечные точки веб-приложений, указанные в профиле диспетчера трафика Azure, появляются в профиле на странице настройки веб-приложения в разделе **Доменные имена** , но настроить их там невозможно.</span><span class="sxs-lookup"><span data-stu-id="900eb-124">The web app endpoints that you specify in a Azure Traffic Manager profile will appear under the **Domain Names** section on the Configure page for the web app in the profile, but will not be configurable there.</span></span>
* <span data-ttu-id="900eb-125">Если добавить веб-приложение в профиль, на странице портала веб-приложения на панели мониторинга в поле **URL-адрес** сайта будет отображаться URL-адрес личного домена этого веб-приложения (если он был задан).</span><span class="sxs-lookup"><span data-stu-id="900eb-125">After you add a web app to a profile, the **Site URL** on the Dashboard of the web app's portal page will display the custom domain URL of the web app if you have set one up.</span></span> <span data-ttu-id="900eb-126">В противном случае он будет отображать URL-адрес профиля диспетчера трафика (например, `contoso.trafficmgr.com`).</span><span class="sxs-lookup"><span data-stu-id="900eb-126">Otherwise, it will display the Traffic Manager profile URL (for example, `contoso.trafficmgr.com`).</span></span> <span data-ttu-id="900eb-127">На странице настройки веб-приложения в разделе **Доменные имена** будут отображаться прямое доменное имя веб-приложения и URL-адрес диспетчера трафика.</span><span class="sxs-lookup"><span data-stu-id="900eb-127">Both the direct domain name of the web app and the Traffic Manager URL will be visible on the web app's Configure page under the **Domain Names** section.</span></span>
* <span data-ttu-id="900eb-128">Имена личных доменов будут работать должным образом, но, помимо их добавления в веб-приложения, необходимо также настроить сопоставление DNS таким образом, чтобы оно указывало на URL-адрес диспетчера трафика.</span><span class="sxs-lookup"><span data-stu-id="900eb-128">Your custom domain names will work as expected, but in addition to adding them to your web apps, you must also configure your DNS map to point to the Traffic Manager URL.</span></span> <span data-ttu-id="900eb-129">Информацию о настройке личного домена для веб-приложения Azure см. в разделе [Настройка пользовательского имени домена для веб-сайта Azure](app-service-web-tutorial-custom-domain.md).</span><span class="sxs-lookup"><span data-stu-id="900eb-129">For information on how to set up a custom domain for a Azure web app,  see [Configuring a custom domain name for an Azure web site](app-service-web-tutorial-custom-domain.md).</span></span>
* <span data-ttu-id="900eb-130">В профиль диспетчера трафика Azure можно добавлять только веб-приложения, работающие в стандартном режиме или в режиме "Премиум".</span><span class="sxs-lookup"><span data-stu-id="900eb-130">You can only add web apps that are in standard or premium mode to a Azure Traffic Manager profile.</span></span>

## <a name="next-steps"></a><span data-ttu-id="900eb-131">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="900eb-131">Next Steps</span></span>
<span data-ttu-id="900eb-132">Общие и технические сведения о диспетчере трафика Azure см. в разделе [Обзор диспетчера трафика](../traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="900eb-132">For a conceptual and technical overview of Azure Traffic Manager, see [Traffic Manager Overview](../traffic-manager/traffic-manager-overview.md).</span></span>

<span data-ttu-id="900eb-133">Дополнительные сведения об использовании диспетчера трафика с веб-приложениями см. в записях блогов [Using Azure Traffic Manager with Azure Web Sites](http://blogs.msdn.com/b/waws/archive/2014/03/18/using-windows-azure-traffic-manager-with-waws.aspx) (Использование диспетчера трафика Azure c веб-сайтами Azure) и [Azure Traffic Manager can now integrate with Azure Web Sites](https://azure.microsoft.com/blog/2014/03/27/azure-traffic-manager-can-now-integrate-with-azure-web-sites/) (Диспетчер трафика Azure теперь можно интегрировать с веб-сайтами Azure).</span><span class="sxs-lookup"><span data-stu-id="900eb-133">For more information about using Traffic Manager with Web Apps, see the blog posts [Using Azure Traffic Manager with Azure Web Sites](http://blogs.msdn.com/b/waws/archive/2014/03/18/using-windows-azure-traffic-manager-with-waws.aspx) and [Azure Traffic Manager can now integrate with Azure Web Sites](https://azure.microsoft.com/blog/2014/03/27/azure-traffic-manager-can-now-integrate-with-azure-web-sites/).</span></span>

