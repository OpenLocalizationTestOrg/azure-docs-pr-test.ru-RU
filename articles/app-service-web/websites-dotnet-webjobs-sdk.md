---
title: "Информация о пакете SDK веб-заданий"
description: "Общие сведения о пакете SDK веб-заданий. В данном материале объясняется, что из себя представляет пакет инструментов SDK и в каких ситуациях он может оказаться полезным, а также приводятся примеры программного кода."
services: app-service\web, storage
documentationcenter: .net
author: ggailey777
manager: erikre
editor: jimbe
ms.assetid: 8281267b-572b-4b14-a328-6704493ea682
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/01/2016
ms.author: glenga
ms.openlocfilehash: 8eb05b7cbfb4505f2e94c5b8e6d367ec63a2f033
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="what-is-the-azure-webjobs-sdk"></a><span data-ttu-id="5f3b8-104">Информация о пакете SDK веб-заданий</span><span class="sxs-lookup"><span data-stu-id="5f3b8-104">What is the Azure WebJobs SDK</span></span>
## <span data-ttu-id="5f3b8-105"><a id="overview"></a>Обзор</span><span class="sxs-lookup"><span data-stu-id="5f3b8-105"><a id="overview"></a>Overview</span></span>
<span data-ttu-id="5f3b8-106">В настоящей статье объясняется, что из себя представляет пакет инструментов SDK веб-заданий, выполняется разбор нескольких наиболее характерных ситуаций, в которых он может применяться, а также приводится краткий обзор его возможного использования при разработке собственного программного кода.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-106">This article explains what the WebJobs SDK is, reviews some common scenarios it is useful for, and gives an overview of how you use it in your code.</span></span>

[!INCLUDE [app-service-web-webjobs-corenote](../../includes/app-service-web-webjobs-corenote.md)]

<span data-ttu-id="5f3b8-107">[Веб-задания](websites-webjobs-resources.md) — это функция службы приложений Azure, которая позволяет запускать программу или сценарий в том же контексте, что и веб-приложение, приложение API или мобильное приложение.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-107">[WebJobs](websites-webjobs-resources.md) is a feature of Azure App Service that enables you to run a program or script in the same context as a web app, API app, or mobile app.</span></span> <span data-ttu-id="5f3b8-108">Назначение [пакета SDK для веб-заданий](websites-webjobs-resources.md) — это упрощение кода, с помощью которого веб-задание выполняет такие распространенные задачи, как обработка изображений, обработка очереди, объединение RSS-каналов, обслуживание файлов и отправка сообщений электронной почты.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-108">The purpose of the [WebJobs SDK](websites-webjobs-resources.md) is to simplify the code you write for common tasks that a WebJob can perform, such as image processing, queue processing, RSS aggregation, file maintenance, and sending emails.</span></span> <span data-ttu-id="5f3b8-109">Пакет SDK для веб-заданий имеет встроенные функции для работы с хранилищем Azure и служебной шиной для планирования задач и обработки ошибок, а также других распространенных сценариев.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-109">The WebJobs SDK has built-in features for working with Azure Storage and Service Bus, for scheduling tasks and handling errors, and for many other common scenarios.</span></span> <span data-ttu-id="5f3b8-110">Кроме того, этот пакет расширяемый.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-110">In addition, it's designed to be extensible.</span></span> <span data-ttu-id="5f3b8-111">[Пакет SDK для веб-заданий является проектом с открытым кодом](https://github.com/Azure/azure-webjobs-sdk/), а также существует [репозиторий открытого кода для расширений](https://github.com/Azure/azure-webjobs-sdk-extensions/wiki/Binding-Extensions-Overview).</span><span class="sxs-lookup"><span data-stu-id="5f3b8-111">The [WebJobs SDK is open source](https://github.com/Azure/azure-webjobs-sdk/), and there's an [open source repository for extensions](https://github.com/Azure/azure-webjobs-sdk-extensions/wiki/Binding-Extensions-Overview).</span></span>

<span data-ttu-id="5f3b8-112">Пакет SDK веб-заданий содержит следующие компоненты.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-112">The WebJobs SDK includes the following components:</span></span>

* <span data-ttu-id="5f3b8-113">**Пакеты NuGet**.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-113">**NuGet packages**.</span></span> <span data-ttu-id="5f3b8-114">Пакеты NuGet, которые добавляются в проект консольного приложения Visual Studio, предоставляют платформу, которую код использует для обрамления методов атрибутами пакета SDK веб-заданий.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-114">NuGet packages that you add to a Visual Studio Console Application project provide a framework that your code uses by decorating your methods with WebJobs SDK attributes.</span></span>
* <span data-ttu-id="5f3b8-115">**Панель мониторинга**.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-115">**Dashboard**.</span></span> <span data-ttu-id="5f3b8-116">Часть пакета SDK веб-заданий включена в службу приложений Azure и предоставляет обширные возможности мониторинга и диагностики для программ, которые создаются с помощью пакетов NuGet.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-116">Part of the WebJobs SDK is included in Azure App Service and provides rich monitoring and diagnostics for programs that use the NuGet packages.</span></span> <span data-ttu-id="5f3b8-117">Чтобы использовать эти функции мониторинга и диагностики, не нужно писать код.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-117">You don't have to write code to use these monitoring and diagnostics features.</span></span>

## <span data-ttu-id="5f3b8-118"><a id="scenarios"></a>Сценарии</span><span class="sxs-lookup"><span data-stu-id="5f3b8-118"><a id="scenarios"></a>Scenarios</span></span>
<span data-ttu-id="5f3b8-119">Ниже представлены стандартные сценарии, которые можно проще обработать с помощью пакета SDK веб-заданий Azure:</span><span class="sxs-lookup"><span data-stu-id="5f3b8-119">Here are some typical scenarios you can handle more easily with the Azure WebJobs SDK:</span></span>

* <span data-ttu-id="5f3b8-120">Обработка изображений или другая нагружающая ЦП задача.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-120">Image processing or other CPU-intensive work.</span></span> <span data-ttu-id="5f3b8-121">Стандартной функцией веб-сайтов является возможность отправлять изображения или видео.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-121">A common feature of websites is the ability to upload images or videos.</span></span> <span data-ttu-id="5f3b8-122">Часто требуется изменить контент после его отправки, но вы не хотите, чтобы пользователь при этом ждал.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-122">Often you want to manipulate the content after it's uploaded, but you don't want to make the user wait while you do that.</span></span>
* <span data-ttu-id="5f3b8-123">Обработка очередей.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-123">Queue processing.</span></span> <span data-ttu-id="5f3b8-124">Обычно для взаимодействия внешнего сервера с внутренним используются очереди.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-124">A common way for a web frontend to communicate with a backend service is to use queues.</span></span> <span data-ttu-id="5f3b8-125">Когда веб-сайту требуется выполнить задание, он отправляет сообщение в очередь.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-125">When the website needs to get work done, it pushes a message onto a queue.</span></span> <span data-ttu-id="5f3b8-126">Служба внутреннего сервера извлекает сообщения из очереди и выполняет задание.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-126">A backend service pulls messages from the queue and does the work.</span></span> <span data-ttu-id="5f3b8-127">Очереди можно использовать для обработки изображений: например, после того, как пользователь загрузит несколько файлов, их имена можно поместить в сообщение очереди, чтобы внутренний сервер мог выбрать их для обработки.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-127">You could use queues for image processing: for example, after the user uploads a number of files, put the file names in a queue message to be picked up by the backend for processing.</span></span> <span data-ttu-id="5f3b8-128">Также можно использовать очереди для ускорения отклика сайта.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-128">Or you could use queues to improve site responsiveness.</span></span> <span data-ttu-id="5f3b8-129">Например, вместо записи непосредственно в базу данных SQL выполните запись в очередь, сообщите пользователю о готовности и позвольте службе внутреннего сервера обработать задание реляционной базы данных с высокой задержкой.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-129">For example, instead of writing directly to a SQL database, write to a queue, tell the user you're done, and let the backend service handle high-latency relational database work.</span></span> <span data-ttu-id="5f3b8-130">Пример обработки очереди с процессом, работающим с изображениями, приводится в [учебнике "Начало работы с пакетом SDK веб-заданий"](websites-dotnet-webjobs-sdk-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="5f3b8-130">For an example of queue processing with image process, see the [WebJobs SDK Get Started tutorial](websites-dotnet-webjobs-sdk-get-started.md).</span></span>
* <span data-ttu-id="5f3b8-131">Объединение RSS-каналов.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-131">RSS aggregation.</span></span> <span data-ttu-id="5f3b8-132">Если ваш сайт обрабатывает список RSS-каналов, можно получить все статьи из веб-каналов в фоновом процессе.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-132">If you have a site that maintains a list of RSS feeds, you could pull in all of the articles from the feeds in a background process.</span></span>
* <span data-ttu-id="5f3b8-133">Обработка файлов, например, объединение или очистка файлов журнала.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-133">File maintenance, such as aggregating or cleaning up log files.</span></span>  <span data-ttu-id="5f3b8-134">Файлы журнала могут быть созданы несколькими сайтами или в течение отдельных интервалов времени, которые следует совместить для запуска в них заданий анализа.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-134">You might have log files being created by several sites or for separate time spans which you want to combine in order to run analysis jobs on them.</span></span> <span data-ttu-id="5f3b8-135">Также можно запланировать еженедельную задачу для очистки старых файлов журнала.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-135">Or you might want to schedule a task to run weekly to clean up old log files.</span></span>
* <span data-ttu-id="5f3b8-136">Ввод данных в таблицы Azure.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-136">Ingress into Azure Tables.</span></span> <span data-ttu-id="5f3b8-137">В системе могут находится некоторые файлы и BLOB-объекты, и может возникнуть необходимость их обработать и сохранить данные в таблицах.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-137">You might have files stored and blobs and want to parse them and store the data in tables.</span></span> <span data-ttu-id="5f3b8-138">Функции ввода данных могут выполнять запись огромного количества строк (в некоторых случаях этот показатель может исчисляться миллионами), и пакет SDK для веб-заданий позволяет очень просто реализовать подобные функциональные возможности.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-138">The ingress function could be writing lots of rows (millions in some cases), and the WebJobs SDK makes it possible to implement this functionality easily.</span></span> <span data-ttu-id="5f3b8-139">Помимо этого, пакет SDK предоставляет индикаторы для отслеживания в реальном времени показателей, характеризующих ход выполнения каких-либо операций, среди которых, например, показатель количества строк, записанных в таблицу.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-139">The SDK also provides real-time monitoring of progress indicators such as the number of rows written in the table.</span></span>
* <span data-ttu-id="5f3b8-140">Другие долгосрочные задачи, которые необходимо запустить в фоновом потоке, например [отправка электронной почты](https://github.com/victorhurdugaci/AzureWebJobsSamples/tree/master/SendEmailOnFailure).</span><span class="sxs-lookup"><span data-stu-id="5f3b8-140">Other long-running tasks that you want to run in a background thread, such as [sending emails](https://github.com/victorhurdugaci/AzureWebJobsSamples/tree/master/SendEmailOnFailure).</span></span> 
* <span data-ttu-id="5f3b8-141">Все задачи, которые будут выполняться по расписанию, например резервное копирование, которое выполняется каждую ночь.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-141">Any tasks that you want to run on a schedule, such as performing a back-up operation every night.</span></span>

<span data-ttu-id="5f3b8-142">Во многих из этих сценариев можно масштабировать веб-приложение для запуска на нескольких виртуальных машинах, которые будут выполнять несколько веб-заданий одновременно.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-142">In many of these scenarios you may want to scale a web app to run on multiple VMs, which would run multiple WebJobs simultaneously.</span></span> <span data-ttu-id="5f3b8-143">В некоторых случаях это может привести к многократной обработке одних и тех же данных. Однако этой проблемы можно избежать при использовании встроенной очереди, BLOB-объектов и триггеров служебной шины пакета SDK веб-заданий.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-143">In some scenarios this could result in the same data getting processed multiple times, but this is not a problem when you use the built-in queue, blob, and Service Bus triggers of the WebJobs SDK.</span></span> <span data-ttu-id="5f3b8-144">Пакет SDK гарантирует, что функции для каждого сообщения или BLOB-объекта будут обрабатываться только один раз.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-144">The SDK ensures that your functions will be processed only once for each message or blob.</span></span>

<span data-ttu-id="5f3b8-145">Пакет SDK веб-заданий также упрощает работу с распространенными сценариями по обработке ошибок.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-145">The WebJobs SDK also makes it easy to handle common error handling scenarios.</span></span> <span data-ttu-id="5f3b8-146">Можно настроить оповещения для отправки уведомлений при сбое функции и установить время ожидания, чтобы функция автоматически отменялась, если она не была завершена в течение заданного времени.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-146">You can set up alerts to send notifications when a function fails, and you can set timeouts so that a function is automatically canceled if it doesn't complete within a specified time limit.</span></span>

## <span data-ttu-id="5f3b8-147"><a id="code"></a> Примеры кода</span><span class="sxs-lookup"><span data-stu-id="5f3b8-147"><a id="code"></a> Code samples</span></span>
<span data-ttu-id="5f3b8-148">Код для обработки стандартных задач, которые работают с хранилищем Azure, прост.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-148">The code for handling typical tasks that work with Azure Storage is simple.</span></span> <span data-ttu-id="5f3b8-149">В методе `Main` консольного приложения создается объект `JobHost`, который координирует вызовы методов, которые вы напишете.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-149">In your Console Application's `Main` method you create a `JobHost` object that coordinates the calls to methods you write.</span></span> <span data-ttu-id="5f3b8-150">На основе атрибутов пакета SDK веб-заданий, которые вы используете, платформа SDK веб-заданий узнает, когда следует вызывать ваши методы и какие значения параметров использовать.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-150">The WebJobs SDK framework knows when to call your methods and what parameter values to use based on the WebJobs SDK attributes you use in them.</span></span> <span data-ttu-id="5f3b8-151">Пакет SDK предоставляет *триггеры*, которые определяют условия вызова функции, и *привязки*, которые определяют передачу информации в параметры метода и обратно.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-151">The SDK provides *triggers* that specify what conditions cause the function to be called, and *binders* that specify how to get information into and out of method parameters.</span></span>

<span data-ttu-id="5f3b8-152">Например, атрибут [QueueTrigger](websites-dotnet-webjobs-sdk-storage-queues-how-to.md) приводит к тому, что функция будет вызываться при поступлении сообщения в очередь, и если сообщение имеет формат JSON для массива байтов или пользовательского типа, сообщение автоматически десериализуется.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-152">For example, the [QueueTrigger](websites-dotnet-webjobs-sdk-storage-queues-how-to.md) attribute causes a function to be called when a message is received on a queue, and if the message format is JSON for a byte array or a custom type, the message is automatically deserialized.</span></span> <span data-ttu-id="5f3b8-153">Атрибут [BlobTrigger](websites-dotnet-webjobs-sdk-storage-blobs-how-to.md) вызывает запуск процесса при каждом создании нового большого двоичного объекта в учетной записи хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-153">The [BlobTrigger](websites-dotnet-webjobs-sdk-storage-blobs-how-to.md) attribute triggers a process whenever a new blob is created in an Azure Storage account.</span></span>

<span data-ttu-id="5f3b8-154">Здесь приводится пример программы, которая опрашивает очередь и для каждого полученного от очереди сообщения создает BLOB-объект.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-154">Here is a simple program that polls a queue and creates a blob for each queue message received:</span></span>

        public static void Main()
        {
            JobHost host = new JobHost();
            host.RunAndBlock();
        }

        public static void ProcessQueueMessage([QueueTrigger("webjobsqueue")] string inputText, 
            [Blob("containername/blobname")]TextWriter writer)
        {
            writer.WriteLine(inputText);
        }

<span data-ttu-id="5f3b8-155">Объект `JobHost` является контейнером для набора фоновых функций.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-155">The `JobHost` object is a container for a set of background functions.</span></span> <span data-ttu-id="5f3b8-156">Объект `JobHost` выполняет мониторинг функций, просматривает события, которые активируют их, и выполняет функции при возникновении событий-триггеров.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-156">The `JobHost` object monitors the functions, watches for events that trigger them, and executes the functions when trigger events occur.</span></span> <span data-ttu-id="5f3b8-157">Метод `JobHost` вызывается, чтобы указать, где следует запускать обработку контейнера: в текущем потоке или в фоновом потоке.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-157">You call a `JobHost` method to indicate whether you want the container process to run on the current thread or a background thread.</span></span> <span data-ttu-id="5f3b8-158">В этом примере метод `RunAndBlock` запускает постоянную обработку в текущем потоке.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-158">In the example, the `RunAndBlock` method runs the process continuously on the current thread.</span></span>

<span data-ttu-id="5f3b8-159">Так как у метода `ProcessQueueMessage` в этом примере есть атрибут `QueueTrigger`, триггер для этой функции — получение нового сообщения очереди.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-159">Because the `ProcessQueueMessage` method in this example has a `QueueTrigger` attribute, the trigger for that function is the reception of a new queue message.</span></span> <span data-ttu-id="5f3b8-160">Объект `JobHost` ищет новые сообщения очереди в указанной очереди (webjobsqueue в этом примере) и при нахождении вызывает `ProcessQueueMessage`.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-160">The `JobHost` object watches for new queue messages on the specified queue ("webjobsqueue" in this sample) and when one is found, it calls `ProcessQueueMessage`.</span></span> 

<span data-ttu-id="5f3b8-161">Атрибут `QueueTrigger` связывает параметр `inputText` со значением сообщения очереди.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-161">The `QueueTrigger` attribute binds the `inputText` parameter to the value of the queue message.</span></span> <span data-ttu-id="5f3b8-162">Атрибут `Blob` также привязывает объект `TextWriter` к BLOB-объекту с именем blobname в контейнере с именем containername.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-162">And the `Blob` attribute binds a `TextWriter` object to a blob named "blobname" in a container named "containername".</span></span>  

        public static void ProcessQueueMessage([QueueTrigger("webjobsqueue")]] string inputText, 
            [Blob("containername/blobname")]TextWriter writer)

<span data-ttu-id="5f3b8-163">Затем функция использует эти параметры для записи значения сообщения очереди в большой двоичный объект:</span><span class="sxs-lookup"><span data-stu-id="5f3b8-163">The function then uses these parameters to write the value of the queue message to the blob:</span></span>

        writer.WriteLine(inputText);

<span data-ttu-id="5f3b8-164">Функции триггера и модуля привязки пакета SDK веб-заданий значительно упрощают написание программного кода.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-164">The trigger and binder features of the WebJobs SDK greatly simplify the code you have to write.</span></span> <span data-ttu-id="5f3b8-165">Код низкого уровня, необходимый для обработки очередей, больших двоичных объектов или файлов или для запуска запланированных задач, выполняется для вас платформой SDK веб-заданий.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-165">The low-level code required to process queues, blobs, or files, or to initiate scheduled tasks, is done for you by the WebJobs SDK framework.</span></span> <span data-ttu-id="5f3b8-166">Например, платформа создает очереди, которые еще не существуют, открывает очередь, читает сообщения очереди, удаляет сообщения очереди по завершении обработки, создает контейнеры больших двоичных объектов, которые еще не существуют, выполняет запись в большие двоичные объекты и т. д.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-166">For example, the framework creates queues that don't exist yet, opens the queue, reads queue messages, deletes queue messages when processing is completed, creates blob containers that don't exist yet, writes to blobs, and so on.</span></span>

<span data-ttu-id="5f3b8-167">В следующем примере кода показаны разнообразные триггеры в одном веб-задании: `QueueTrigger`, `FileTrigger`, `WebHookTrigger` и `ErrorTrigger`.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-167">The following code example shows a variety of triggers in one WebJob: `QueueTrigger`, `FileTrigger`, `WebHookTrigger`, and `ErrorTrigger`.</span></span> 

```
    public class Functions
    {
        public static void ProcessQueueMessage([QueueTrigger("queue")] string message,
        TextWriter log)
        {
            log.WriteLine(message);
        }

        public static void ProcessFileAndUploadToBlob(
            [FileTrigger(@"import\{name}", "*.*", autoDelete: true)] Stream file,
            [Blob(@"processed/{name}", FileAccess.Write)] Stream output,
            string name,
            TextWriter log)
        {
            output = file;
            file.Close();
            log.WriteLine(string.Format("Processed input file '{0}'!", name));
        }

        [Singleton]
        public static void ProcessWebHookA([WebHookTrigger] string body, TextWriter log)
        {
            log.WriteLine(string.Format("WebHookA invoked! Body: {0}", body));
        }

        public static void ProcessGitHubWebHook([WebHookTrigger] string body, TextWriter log)
        {
            dynamic issueEvent = JObject.Parse(body);
            log.WriteLine(string.Format("GitHub WebHook invoked! ('{0}', '{1}')",
                issueEvent.issue.title, issueEvent.action));
        }

        public static void ErrorMonitor(
        [ErrorTrigger("00:01:00", 1)] TraceFilter filter, TextWriter log,
        [SendGrid(
            To = "admin@emailaddress.com",
            Subject = "Error!")]
         SendGridMessage message)
        {
            // log last 5 detailed errors to the Dashboard
            log.WriteLine(filter.GetDetailedMessage(5));
            message.Text = filter.GetDetailedMessage(1);
        }
    }
```

## <span data-ttu-id="5f3b8-168"><a id="schedule"></a> Планирование</span><span class="sxs-lookup"><span data-stu-id="5f3b8-168"><a id="schedule"></a> Scheduling</span></span>
<span data-ttu-id="5f3b8-169">Атрибут `TimerTrigger` дает возможность настраивать вызов функций по расписанию.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-169">The `TimerTrigger` attribute gives you the ability to trigger functions to run on a schedule.</span></span> <span data-ttu-id="5f3b8-170">Можно запланировать веб-задания в целом с помощью Azure или запланировать вызов отдельных функций веб-задания с помощью пакета SDK веб-заданий `TimerTrigger`.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-170">You can schedule a WebJob as a whole through Azure or schedule individual functions of a WebJob using the WebJobs SDK `TimerTrigger`.</span></span> <span data-ttu-id="5f3b8-171">Ниже приведен пример кода.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-171">Here's a code sample.</span></span>

```
public class Functions
{
    public static void ProcessTimer([TimerTrigger("*/15 * * * * *", RunOnStartup = true)]
    TimerInfo info, [Queue("queue")] out string message)
    {
        message = info.FormatNextOccurrences(1);
    }
}
```

<span data-ttu-id="5f3b8-172">Дополнительные примеры кода приведены в файле [TimerSamples.cs](https://github.com/Azure/azure-webjobs-sdk-extensions/blob/master/src/ExtensionsSample/Samples/TimerSamples.cs) в репозитории azure-webjobs-sdk-extensions на GitHub.com.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-172">For more sample code, see [TimerSamples.cs](https://github.com/Azure/azure-webjobs-sdk-extensions/blob/master/src/ExtensionsSample/Samples/TimerSamples.cs) in the azure-webjobs-sdk-extensions repository on GitHub.com.</span></span>

## <a name="extensibility"></a><span data-ttu-id="5f3b8-173">Расширяемость</span><span class="sxs-lookup"><span data-stu-id="5f3b8-173">Extensibility</span></span>
<span data-ttu-id="5f3b8-174">Вы не ограничены встроенными функциями — пакет SDK веб-заданий позволяет писать пользовательские триггеры и привязки.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-174">You're not limited to built-in functionality -- the WebJobs SDK allows you to write custom triggers and binders.</span></span>  <span data-ttu-id="5f3b8-175">Например, можно написать триггеры событий кэша и периодического расписания.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-175">For example, you can write triggers for cache events and periodic schedules.</span></span> <span data-ttu-id="5f3b8-176">[Репозиторий открытого кода](https://github.com/Azure/azure-webjobs-sdk-extensions) содержит [подробное руководство по расширяемости пакета SDK для веб-заданий](https://github.com/Azure/azure-webjobs-sdk-extensions/wiki/Binding-Extensions-Overview) и пример кода, которые помогут приступить к написанию собственных триггеров и привязок.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-176">An [open source repository](https://github.com/Azure/azure-webjobs-sdk-extensions) contains a [detailed guide on WebJobs SDK extensibility](https://github.com/Azure/azure-webjobs-sdk-extensions/wiki/Binding-Extensions-Overview) and sample code to help get you started writing your own triggers and binders.</span></span>

## <span data-ttu-id="5f3b8-177"><a id="workerrole"></a>Использование пакета SDK для веб-заданий вне сферы применения веб-заданий</span><span class="sxs-lookup"><span data-stu-id="5f3b8-177"><a id="workerrole"></a>Using the WebJobs SDK outside of WebJobs</span></span>
<span data-ttu-id="5f3b8-178">Программа, которая использует пакет SDK для заданий WebJob представляет собой стандартное консольное приложение и может запускаться из любого места; ее необязательно запускать как задание WebJob.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-178">A program that uses the the WebJobs SDK is a standard Console Application and can run anywhere -- it doesn't have to run as a WebJob.</span></span> <span data-ttu-id="5f3b8-179">Протестировать такую программу можно локально на компьютере разработчика, а в производственной среде ее можно запустить в рабочей роли облачной службы или службе Windows, в соответствии с предпочтениями в отношении какой-либо из этих сред.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-179">You can test the program locally on your development computer, and in production you can run it in a Cloud Service worker role or a Windows service if you prefer one of those environments.</span></span> 

<span data-ttu-id="5f3b8-180">Панель мониторинга доступна только как расширение сайта для веб-приложения службы приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-180">However, the dashboard is only available as an extension for an Azure App Service web app.</span></span> <span data-ttu-id="5f3b8-181">Если необходимо запустить программу вне веб-заданий и при этом использовать панель мониторинга, можно настроить веб-приложение Azure на использование той же самой учетной записи хранения, которая указана в строке подключения панели мониторинга из пакета SDK веб-заданий. В таком случае в панели мониторинга веб-заданий этого веб-приложения будет отображаться информация о выполнении функций программы, которая работает в иной среде.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-181">If you want to run outside of a WebJob and still use the Dashboard, you can configure a web app to use the same storage account that your WebJobs SDK Dashboard connection string refers to, and that web app's WebJobs Dashboard will then show data about function execution from your program that is running somewhere else.</span></span> <span data-ttu-id="5f3b8-182">Перейти к панели мониторинга можно по следующему URL-адресу: https://*{имя_веб-приложения}*.scm.azurewebsites.net/azurejobs/#/functions.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-182">You can get to the Dashboard by using the URL https://*{webappname}*.scm.azurewebsites.net/azurejobs/#/functions.</span></span> <span data-ttu-id="5f3b8-183">Дополнительные сведения доступны в записи блога [Getting a dashboard for local development with the WebJobs SDK](http://blogs.msdn.com/b/jmstall/archive/2014/01/27/getting-a-dashboard-for-local-development-with-the-webjobs-sdk.aspx) (Получение панели мониторинга для локальной разработки с помощью пакета SDK веб-заданий), однако следует обратить внимание, что в ней приводится имя старой строки подключения.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-183">For more information, see [Getting a dashboard for local development with the WebJobs SDK](http://blogs.msdn.com/b/jmstall/archive/2014/01/27/getting-a-dashboard-for-local-development-with-the-webjobs-sdk.aspx), but note that the blog post shows an old connection string name.</span></span> 

## <span data-ttu-id="5f3b8-184"><a id="nostorage"></a>Функции панели мониторинга</span><span class="sxs-lookup"><span data-stu-id="5f3b8-184"><a id="nostorage"></a>Dashboard features</span></span>
<span data-ttu-id="5f3b8-185">Пакет SDK для веб-заданий обеспечивает ряд преимуществ, даже если вы не пользуетесь триггерами и привязками:</span><span class="sxs-lookup"><span data-stu-id="5f3b8-185">The WebJobs SDK provides several advantages even if you don't use WebJobs SDK triggers or binders:</span></span>

* <span data-ttu-id="5f3b8-186">Можно вызывать необходимые функции из панели мониторинга.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-186">You can invoke functions from the Dashboard.</span></span>
* <span data-ttu-id="5f3b8-187">Можно осуществлять повторное выполнение функций из панели мониторинга.</span><span class="sxs-lookup"><span data-stu-id="5f3b8-187">You can replay functions from the Dashboard.</span></span>
* <span data-ttu-id="5f3b8-188">Вы можете просматривать журналы на панели мониторинга, связанные с конкретным веб-заданием (журналы приложения, записанные с помощью Console.Out, Console.Error, Trace и т. п.) или с вызовом определенной функции, которая создает их (журналы, записанные с помощью объекта `TextWriter`, который пакет SDK передает функции в качестве параметра).</span><span class="sxs-lookup"><span data-stu-id="5f3b8-188">You can view logs in the Dashboard, linked to the particular WebJob (application logs, written by using Console.Out, Console.Error, Trace, etc.) or linked to the particular function invocation that generated them (logs written by using a `TextWriter` object that the SDK passes to the function as a parameter).</span></span> 

<span data-ttu-id="5f3b8-189">Дополнительную информацию см. в разделах: [Как вызывать функцию в ручном режиме](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#manual) и [Как записывать журналы](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#logs).</span><span class="sxs-lookup"><span data-stu-id="5f3b8-189">For more information, see [How to manually invoke a function](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#manual) and [How to write logs](websites-dotnet-webjobs-sdk-storage-queues-how-to.md#logs)</span></span> 

## <span data-ttu-id="5f3b8-190"><a id="nextsteps"></a>Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="5f3b8-190"><a id="nextsteps"></a>Next steps</span></span>
<span data-ttu-id="5f3b8-191">Дополнительные сведения о пакете SDK веб-заданий приводятся в разделе [Веб-задания Azure — рекомендуемые ресурсы](http://go.microsoft.com/fwlink/?linkid=390226).</span><span class="sxs-lookup"><span data-stu-id="5f3b8-191">For more information about the WebJobs SDK, see [Azure WebJobs Recommended Resources](http://go.microsoft.com/fwlink/?linkid=390226).</span></span>

<span data-ttu-id="5f3b8-192">Сведения о последних улучшениях в пакете SDK для веб-заданий см. в разделе [Заметки о выпуске](https://github.com/Azure/azure-webjobs-sdk/wiki/Release-Notes).</span><span class="sxs-lookup"><span data-stu-id="5f3b8-192">For information about the latest enhancements to the WebJobs SDK, see the [Release Notes](https://github.com/Azure/azure-webjobs-sdk/wiki/Release-Notes).</span></span>

