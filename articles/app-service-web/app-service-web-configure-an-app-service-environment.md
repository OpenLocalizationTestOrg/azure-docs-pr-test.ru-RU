---
title: "aaaHow tooConfigure v1 среды службы приложений"
description: "Настройки, управления и наблюдения за hello v1 среды службы приложений"
services: app-service
documentationcenter: 
author: ccompy
manager: stefsch
editor: 
ms.assetid: b5a1da49-4cab-460d-b5d2-edd086ec32f4
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: ccompy
ms.openlocfilehash: f9539a72517276d8a1e340a408841561e8b8f56d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="configuring-an-app-service-environment-v1"></a>Настройка среды службы приложений версии 1

> [!NOTE]
> Эта статья является о hello v1 среды службы приложений.  Имеется более новая версия hello среды службы приложений, удобнее toouse и выполняется на более мощный инфраструктуры. Дополнительные сведения о новой версии hello начинаться с hello toolearn [toohello введение среды службы приложений](../app-service/app-service-environment/intro.md).
> 

## <a name="overview"></a>Обзор
На высоком уровне среда службы приложений Azure состоит из нескольких основных компонентов:

* Вычислительные ресурсы, которые запущены в hello среды службы приложений размещенной службы
* Хранилище
* база данных;
* классическая виртуальная сеть Azure (версия 1) или виртуальная сеть Azure Resource Manager (версия 2); 
* Подсеть со службой hello размещенной среды службы приложений, в нем

### <a name="compute-resources"></a>Вычислительные ресурсы
Использовать hello вычислительных ресурсов для пулов ресурсов четыре.  Каждая среда ASE включает набор внешних интерфейсов и три возможных рабочих пула. Не требуется toouse всех трех рабочих пулов — Если вы хотите, просто можно использовать один или два.

узлы Hello в пулы ресурсов hello (интерфейсы и рабочих ролей), не доступны непосредственно tootenants. Не удается использовать toothem tooconnect удаленного рабочего стола (RDP), изменить их подготовки или выступать в качестве администратора на них.

Можно задать количество пулов ресурсов и их размер. В среде ASE доступны четыре варианта размеров с метками от P1 до P4. Дополнительные сведения об этих размерах и их ценах см. в разделе [этой статьи](../app-service/app-service-value-prop-what-is.md).
Изменение количества hello и размера вызывается операция масштабирования.  Одновременно может выполняться только одна такая операция.

**Заканчивается на передней**: hello серверов, обслуживающих являются конечными точками HTTP/HTTPS hello для своих приложений, которые хранятся в вашей ASE. Не запускайте рабочих нагрузок в hello обслуживающих клиентские запросы.

* ASE начинается с двух P2 — этого достаточно для разработки и тестирования рабочих и низкоуровневых рабочих нагрузок. Мы настоятельно рекомендуем P3s для Средняя tooheavy рабочих нагрузок.
* Средняя tooheavy рабочих нагрузок рекомендуется наличие по крайней мере четыре tooensure P3s имеется достаточно серверов, обслуживающих выполнение при возникновении запланированного обслуживания. Во время планового обслуживания внешние интерфейсы будут отключаться по одному. Так что общее число доступных интерфейсов во время обслуживания будет меньше.
* Интерфейсные может занять час tooprovision tooan. 
* Для дальнейшей настройки масштабирования, необходимо отслеживать hello процент использования ЦП, процент памяти и метрики активных запросов для интерфейса пула hello. Если hello процентов ЦП или памяти, более 70 процентов управлением P3s, добавьте дополнительные интерфейсы. Если значение активных запросов hello вычисляет среднее значение out too15, 000 too20 000 запросов в переднего плана, следует также добавить несколько серверов, обслуживающих. Hello основной целью является tookeep ЦП и процент памяти ниже 70%, а также вычисление среднего значения ожидания toobelow 15 000 запросов в переднего плана при запуске P3s активных запросов.  

**Работники**: hello работников, где фактически работающих приложений. При вертикальном масштабировании планы службы приложений, использует рабочих процессов в hello связаны рабочего пула.

* Мгновенно исполнителей добавить нельзя. Они занимают tooprovision tooan час.
* Масштабирование размер hello вычислительного ресурса для любого пула занимает < 1 час в домене обновления. В среде ASE присутствует 20 доменов обновления. Если увеличили размер вычислений hello рабочего пула с 10 экземпляров может занять несколько часов toocomplete too10.
* Если при изменении размеров hello hello вычислительные ресурсы, которые используются в пуле рабочих процессов, приведет к холодного запуска hello приложениями, запущенными в этом пуле рабочего процесса.

наиболее быстрым способом Hello toochange hello вычислить размер ресурса рабочего пула, которое запущено не все приложения является:

* Масштабируйте hello количество too2 работников.  Минимальный масштаб Hello вниз размер hello портала — 2. Он займет несколько минут toodeallocate своих экземпляров. 
* Выберите новый размер вычислений hello и количества экземпляров. Здесь может занять toocomplete too2 часов.

Если приложения требуют большего размера вычислительных ресурсов, не может воспользоваться преимуществами hello предыдущей инструкции. Вместо изменения размера hello hello пуле рабочего процесса, на котором размещены эти приложения, можно заполнять другой пул рабочих работников hello требуемого размера и перенести toothat пула приложений.

* Создайте дополнительные экземпляры hello hello требуется вычислить размер в другом пуле рабочего процесса. Это займет toocomplete tooan час.
* Переназначение планы службы приложений, размещающие приложения hello, которым большего размера toohello вновь настроен рабочего пула. Это происходит быстро, занимает меньше минуты toocomplete.  
* Если больше не нужны эти неиспользуемые экземпляры масштабируйте hello первого рабочего пула. Эта операция занимает несколько минут toocomplete.

**Автоматическое масштабирование**: один hello средств, которые помогут вам toomanage потребления ресурсов вычислений — автоматическое масштабирование. Его можно применять к рабочему пулу и к интерфейсному пулу. Вы такие элементы, как увеличение экземпляры любого типа пула в утром hello и уменьшить его в вечернюю hello. Или возможно добавить экземпляры при hello количество рабочих потоков, доступных в пуле рабочих процессов падает ниже определенного порогового значения.

Если правил автомасштабирования tooset вокруг метрики пул вычислительных ресурсов и нажмите Имейте в виду hello время подготовки этого требует. Дополнительные сведения об автоматическом масштабировании среды службы приложений см. в разделе [как tooconfigure автоматического масштабирования в среде службы приложений][ASEAutoscale].

### <a name="storage"></a>Хранилище
Каждая среда ASE предоставляется с хранилищем емкостью 500 ГБ. Это пространство используется во всех приложениях hello в hello ASE. Это дисковое пространство входит в состав hello ASE и в настоящее время не может быть выключены toouse дискового пространства. При внесении безопасности или маршрутизации виртуальной сети tooyour корректировки необходимо toostill разрешить доступ tooAzure хранилища--или hello ASE не может работать.

### <a name="database"></a>База данных
Hello базы данных содержит сведения о hello, определяющего hello среды, а также hello сведения о приложениях hello, установленным в ней. Это слишком часть hello подписки, хранящихся в Azure. Он не наличие toomanipulate прямой возможности. При внесении безопасности или маршрутизации виртуальной сети tooyour корректировки необходимо toostill разрешить доступ tooSQL Azure--или hello ASE не может работать.

### <a name="network"></a>Сеть
Hello виртуальной сети, используемой с вашей ASE может быть, внесенные при создании hello ASE или созданную заранее. При создании hello подсети во время создания ASE, он заставляет hello ASE toobe в hello же группе ресурсов hello виртуальной сети. Если вам требуется hello группы ресурсов, используемых вашей toobe ASE, отличного от виртуальной сети, необходимо toocreate вашей ASE, с помощью шаблона диспетчера ресурсов.

Существуют некоторые ограничения на hello виртуальной сети, используемой для ASE:

* Hello виртуальная сеть должна быть региональной виртуальной сети.
* Необходим toobe подсети с 8 или несколько адресов, где развертывается hello ASE.
* После подсеть используется toohost ASE hello диапазон адресов подсети hello нельзя изменить. По этой причине мы рекомендуем подсети hello содержит по крайней мере 64 адресов tooaccommodate к дальнейшему росту ASE.
* Может быть никаких других в подсети hello, но hello ASE.

В отличие от hello размещенной службы, содержащей hello ASE, hello [виртуальной сети] [ virtualnetwork] и подсети находятся в пользовательский элемент управления.  Можно администрировать виртуальной сети через hello виртуальной сети пользовательского интерфейса или PowerShell.  ASE можно развернуть в классической виртуальной сети или в виртуальной сети Resource Manager.  интерфейсы API и портал Hello несколько различаются между классический и диспетчер ресурсов виртуальных сетей, но hello ASE качества является таким же hello.

Hello виртуальной сети, используемых toohost ASE можно использовать либо частные RFC1918 IP-адреса или его можно использовать общедоступные IP-адреса.  Если вы хотите toouse диапазон IP-адресов, не связанная с RFC1918 (10.0.0.0/8 172.16.0.0/12, 192.168.0.0/16), потребуется toocreate используемые вашей ASE опережает ASE создания виртуальной сети и подсети toobe.

Поскольку эта возможность помещает hello службе приложений Azure в виртуальной сети, значит теперь доступность приложений, размещенных в вашей ASE ресурсы, которые становятся доступными через ExpressRoute или сеть сеть виртуальной частной сети (VPN) непосредственно. Hello приложения, которые находятся в пределах среды службы приложений не требуют дополнительных сетевых компонентов tooaccess ресурсы доступных toohello виртуальной сети, на котором размещается среды службы приложений. Это означает, что нет необходимости toouse Интеграция виртуальной сети или гибридные подключения tooresources tooget в или tooyour подключенной виртуальной сети. Обе эти функции по-прежнему можно использовать то, что tooaccess ресурсы в сети, не подключен tooyour виртуальной сети.

Например можно использовать toointegrate Интеграция виртуальной сети с помощью виртуальной сети, но не подключенных toohello виртуальной сети, ваш ASE в вашей подписке. Также по-прежнему можно использовать ресурсы tooaccess гибридных подключений, которые находятся в других сетях, так же, как обычно.  

При наличии виртуальной сети с VPN ExpressRoute должны учитывать некоторые имеет ASE hello маршрутизации потребности. Некоторые конфигурации определяемых пользователем маршрутов не поддерживаются в среде ASE. Дополнительные сведения о настройке виртуальной сети с ExpressRoute для среды службы приложений см. в [этой статье][ExpressRoute].

#### <a name="securing-inbound-traffic"></a>Защита входящего трафика
Существует два основных способа toocontrol ASE tooyour трафик входящих подключений.  Можно использовать toocontrol Groups(NSGs) безопасности сети, какие IP адресов можно получить доступ к вашей ASE как описано здесь [как toocontrol входящий трафик в среде службы приложений](app-service-app-service-environment-control-inbound-traffic.md) можно также настроить в вашей ASE внутренней нагрузки Balancer(ILB).  Эти функции могут также использоваться совместно toorestrict доступа с помощью Nsg tooyour ILB ASE.

При создании ASE в виртуальной сети создается виртуальный IP-адрес.  Существует два типа виртуальных IP-адресов: внешние и внутренние.  При создании ASE с внешним виртуальным IP-адресом приложения в ASE будут доступны в Интернете по маршрутизируемому IP-адресу. При выборе внутреннего IP-адреса для среды ASE будет настроен внутренний балансировщик нагрузки и к ней невозможно будет получить доступ напрямую через Интернет.  Среде ASE с внутренним балансировщиком нагрузки по-прежнему требуется внешний виртуальный IP-адрес, но он используется только для доступа к управлению и обслуживанию Azure.  

Во время создания ILB ASE указывается hello дочерний домен, используемый hello ILB ASE и будет иметь toomanage DNS hello поддомен, указываемые.  Поскольку задано имя поддомена hello необходимо также toomanage hello сертификат, используемый для доступа по протоколу HTTPS.  После ASE создания, которые запрос сертификата tooprovide hello.  чтение toolearn Дополнительные сведения о создании и использовании ILB ASE [использование внутренней подсистемы балансировки нагрузки с среды службы приложений][ILBASE]. 

## <a name="portal"></a>Microsoft Azure
Можно управлять и наблюдать за среду службы приложений с помощью hello пользовательского интерфейса в hello портал Azure. При наличии ASE, затем используется hello скорее всего, toosee символ службы приложений на боковой панели. Этот символ используется используется toorepresent среды службы приложения в hello портала Azure:

![Символ среды службы приложений Azure][1]

tooopen Здравствуйте, пользовательский Интерфейс, который перечисляет все среды службы приложения, можно использовать значок hello или выберите hello шеврона (» > «символ) внизу hello hello боковой панели tooselect среды службы приложения. Выбрав одно из перечисленных ASEs hello, откройте пользовательский Интерфейс, который будет использоваться toomonitor hello и управлять им.

![Пользовательский интерфейс для мониторинга среды службы приложений и управления ею][2]

В первой колонке отображаются некоторые свойства среды ASE, а также диаграмма с метриками для пула ресурсов. Некоторые свойства hello, показанные в hello **Essentials** блока, также гиперссылки, которые будут откройте колонку hello, связанный с ним. Например, можно выбрать hello **виртуальной сети** tooopen имя копии hello пользовательского интерфейса связанные с hello виртуальной сети, работающей в вашей ASE. Если щелкнуть **Планы службы приложений** и **Приложения**, откроются колонки со списком соответствующих элементов, размещенных в среде ASE.  

### <a name="monitoring"></a>Мониторинг
Hello диаграммы позволяют toosee разнообразных метрик производительности в каждом пуле ресурсов. Hello пула переднего плана вы можете отслеживать hello средняя загрузка ЦП и памяти. Для рабочих пулов и можно отслеживать количество hello, которое используется доступное количество hello.

Несколько службы приложений, которые можно вносить в планы использовать hello рабочих процессов в пуле рабочих процессов. Рабочая нагрузка Hello не распространяется в hello таким же способом с помощью hello серверы переднего плана, поэтому hello использования ЦП и памяти не обеспечивают основном hello, полезной информации. Он является более важным tootrack сколько рабочих процессов, которые вы использовали и доступны — особенно в том случае, если вы управляете этой системы для других toouse.  

Также можно использовать все hello метрик, которые можно отслеживать в tooset hello диаграмм, предупреждений. Настройка предупреждения здесь, работает таким же, как в других частях hello в службе приложений. Можно настроить оповещение из либо hello **оповещения** пользовательского интерфейса принадлежит, либо из детализируя метрик, пользовательского интерфейса и выбрав **добавить предупреждение**.

![Пользовательский интерфейс метрик][3]

Hello метрики, которые были только что обсудили представляют Привет среды службы приложений метрики. Существуют также метрик, которые можно найти по адресу hello уровне плана служб приложений. Именно на этом уровне целесообразно отслеживать показатели использования ЦП и памяти.

В ASE все планы службы приложений приветствия, выделенный планы служб приложений. Это означает, что hello проходят только приложения, выполняющихся на toothat выделенных узлов hello план служб приложений hello в этом плане обслуживания приложений. toosee сведения о вашем плане служб приложений подключить план служб приложений из любого списков hello hello ASE пользовательского интерфейса или из **планы службы приложений Обзор** (который перечисляет все из них).   

### <a name="settings"></a>данных
В колонке hello ASE есть **параметры** раздел, содержащий несколько важных возможностей:

**Параметры** > **свойства**: hello **параметры** колонке автоматически открывается при развертывании вашей ASE колонку. Hello является начало **свойства**. Существует несколько элементов здесь, избыточных toowhat см в **Essentials**, очень удобно использовать, но **виртуальный IP-адрес**, а также **исходящий IP-адреса**.

![Колонка "Параметры" и "Свойства"][4]

**Параметры** > **IP-адреса**. При создании приложения SSL на основе IP в ASE должен присутствовать адрес SSL на основе IP. В порядке tooobtain один ваш ASE должен адресов SSL на ОСНОВЕ IP, принадлежащих ему, которое может быть выделено. Для этой цели в ASE добавляется 1 адрес SSL на основе IP, но позже можно добавить дополнительные адреса. Отсутствует плата для дополнительных SSL на ОСНОВЕ IP адресов, как показано в [служб приложений Ценовая] [ AppServicePricing] (в разделе hello на SSL-подключения). Hello дополнительных цены — hello цена SSL на ОСНОВЕ IP.

**Параметры** > **Front End пула** / **рабочих пулов**: каждый из этих колонках пула ресурсов предлагает hello возможность toosee данные только для этого пула ресурсов , кроме tooproviding управляющий toofully этого пула ресурсов.  

Hello базовый колонку для каждого пула ресурсов предоставляет список метрик для этого пула ресурсов. Так же, как с диаграммами hello из колонки ASE hello, можно перейти в диаграмме hello и установки предупреждений в случае необходимости. Задание предупреждения из колонки ASE hello конкретный ресурс в пуле hello же, что таким же образом из пула ресурсов hello. Из пула рабочих hello **параметры** колонки, у вас есть доступ tooall hello приложений или планы службы приложений, которые выполняются в этом пуле рабочего процесса.

![Пользовательский интерфейс параметров рабочего пула][5]

### <a name="portal-scale-capabilities"></a>Возможности масштабирования портала
Существует три типа операций масштабирования:

* Изменение числа hello IP-адресов в hello ASE, доступные для использования SSL на ОСНОВЕ IP.
* Изменение размера hello hello вычислительного ресурса, используемый в пуле ресурсов.
* Изменение количества hello вычислительные ресурсы, используемые в пуле ресурсов, вручную или автоматическое масштабирование.

На портале hello существует три способа toocontrol количества серверов, которые имеют в пулов ресурсов:

* Операция масштабирования hello главной колонке ASE вверху hello. Можно сделать несколько шкалы изменения конфигурации toohello переднего плана и рабочих пулов. Все они применяются в рамках одной операции.
* Операция масштабирования вручную из пула ресурсов отдельными hello **шкалы** колонки, которая находится под **параметры**.
* Автоматическое масштабирование, настроенной из пула ресурсов отдельными hello **шкалы** колонку.

Операция масштабирования toouse hello в колонке ASE hello, перетащите количество toohello ползунок hello и сохраните. Этот пользовательский Интерфейс также поддерживает изменение размера hello.  

![Пользовательский интерфейс "Масштаб"][6]

toouse hello вручную» или «автомасштабирования возможности в пуле определенного ресурса, перейдите в слишком**параметры** > **Front End пула** / **рабочих пулов** как соответствующие. Затем откройте hello пула, которые должны toochange. Go слишком**параметры** > **масштабное развертывание** или **параметры** > **масштабирования вверх**. Hello **масштабное развертывание** колонке включает количество toocontrol экземпляра. **Масштабирование вверх** позволяет toocontrol размер ресурса.  

![Пользовательский интерфейс "Настройки масштабирования"][7]

## <a name="fault-tolerance-considerations"></a>Рекомендации относительно отказоустойчивости
Вы можете настроить среду службы приложений toouse too55 общее вычислительных ресурсов. Эти 55 вычислительных ресурсов только 50 может быть используется toohost рабочих нагрузок. Hello причин этого — двоякое. Существует как минимум 2 вычислительных ресурса для интерфейсов.  Оставляет копирование hello рабочего пула too53 toosupport распределения. Порядок tooprovide отказоустойчивости требуется toohave дополнительных вычислительных ресурсов, выделенных в соответствии с правилами toohello:

* Каждый пул рабочих требуется по крайней мере 1 дополнительных вычислительных ресурсов, не доступных toobe, назначенный рабочей нагрузки.
* Когда hello количество вычислительных ресурсов в пуле рабочего процесса выходит за пределы определенного значения, другой вычислительных ресурсов является обязательным для обеспечения отказоустойчивости. Это не так hello в пуле переднего плана hello.

Внутри любого пула один рабочий hello отказоустойчивости существуют следующие требования для данного значения X ресурсы присвоение tooa рабочего пула.

* Если X от 2 до 20, hello объем использования вычислительных ресурсов, которые можно использовать для рабочих нагрузок — x-1.
* Если X от 21 до 40, hello объем использования вычислительных ресурсов, которые можно использовать для рабочих нагрузок — X-2.
* Если X имеет между 41 и 53, hello объем использования вычислительных ресурсов, которые можно использовать для рабочих нагрузок — X-3.

Минимальный объем памяти Hello имеет 2 серверы переднего плана и 2 рабочих процесса.  С hello выше затем инструкций ниже приведены несколько примеров tooclarify.  

* При наличии 30 рабочих процессов в один пул 28 из них можно использовать toohost рабочих нагрузок.
* При наличии 2 рабочих процесса в одном пуле 1 можно использовать toohost рабочих нагрузок.
* При наличии 20 рабочих процессов в один пул 19 можно использовать toohost рабочих нагрузок.  
* Если у вас 21 рабочих процессов в один пул, по-прежнему только 19 можно использовать toohost рабочих нагрузок.  

аспект отказоустойчивости Hello важна, но необходимо tookeep масштабировать его в виду, что и у вас выше определенных пороговых значений. Если вы хотите tooadd больше емкости, поступающих из 20 экземпляров, а затем последовательно выберите too22 или более поздней версии из-за 21 не добавляет любой дополнительной емкости. то же верно и будет выше 40, где hello следующий номер, который добавляет емкости: 42 приветствия.  

## <a name="deleting-an-app-service-environment"></a>Удаление среды службы приложений
Если вы хотите toodelete среды службы приложений, просто используйте hello **удалить** действие hello верхней части колонки hello среды службы приложений. При этом вы будете имя hello запрашиваемые tooenter tooconfirm вашей среды службы приложений, что действительно требуется toodo это. Обратите внимание, что при удалении среды службы приложений, удалить все содержимое hello в нем также.  

![Пользовательский интерфейс удаления среды службы приложений][9]  

## <a name="getting-started"></a>Приступая к работе
tooget к работе с среды службы приложения, в разделе [как toocreate среды службы приложений](app-service-web-how-to-create-an-app-service-environment.md).

Дополнительные сведения о платформе hello службе приложений Azure см. в разделе [службе приложений Azure](../app-service/app-service-value-prop-what-is.md).

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!--Image references-->
[1]: ./media/app-service-web-configure-an-app-service-environment/ase-icon.png
[2]: ./media/app-service-web-configure-an-app-service-environment/aseconfig-aseblade.png
[3]: ./media/app-service-web-configure-an-app-service-environment/aseconfig-poolchart.png
[4]: ./media/app-service-web-configure-an-app-service-environment/aseconfig-properties.png
[5]: ./media/app-service-web-configure-an-app-service-environment/aseconfig-poolblade.png
[6]: ./media/app-service-web-configure-an-app-service-environment/aseconfig-scalecommand.png
[7]: ./media/app-service-web-configure-an-app-service-environment/aseconfig-poolscale.png
[8]: ./media/app-service-web-configure-an-app-service-environment/aseconfig-pricingtiers.png
[9]: ./media/app-service-web-configure-an-app-service-environment/aseconfig-deletease.png

<!--Links-->
[WhatisASE]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[Appserviceplans]: http://azure.microsoft.com/documentation/articles/azure-web-sites-web-hosting-plans-in-depth-overview/
[HowtoCreateASE]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[HowtoScale]: http://azure.microsoft.com/documentation/articles/app-service-web-scale-a-web-app-in-an-app-service-environment/
[ControlInbound]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[AppServicePricing]: http://azure.microsoft.com/pricing/details/app-service/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[ASEAutoscale]: http://azure.microsoft.com/documentation/articles/app-service-environment-auto-scale/
[ExpressRoute]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-network-configuration-expressroute/
[ILBASE]: http://azure.microsoft.com/documentation/articles/app-service-environment-with-internal-load-balancer/
