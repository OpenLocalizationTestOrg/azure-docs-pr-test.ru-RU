---
title: "aaaProvision и развернуть микрослужбами предсказуемо в Azure"
description: "Узнайте, как toodeploy приложения, состоящие из микрослужбами в службе приложений Azure как единое целое и предсказуемым образом с помощью JSON ресурсов группы шаблонов и сценариев PowerShell."
services: app-service
documentationcenter: 
author: cephalin
manager: erikre
editor: jimbe
ms.assetid: bb51e565-e462-4c60-929a-2ff90121f41d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/06/2016
ms.author: cephalin
ms.openlocfilehash: d32c2fc82a8b09e89224ec437e5819b65b2e9e78
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="provision-and-deploy-microservices-predictably-in-azure"></a><span data-ttu-id="5d7fd-103">Предсказуемые подготовка и развертывание микрослужб в Azure</span><span class="sxs-lookup"><span data-stu-id="5d7fd-103">Provision and deploy microservices predictably in Azure</span></span>
<span data-ttu-id="5d7fd-104">В этом учебнике показано как tooprovision и развертывать приложения, состоящие из [микрослужбами](https://en.wikipedia.org/wiki/Microservices) в [службе приложений Azure](/services/app-service/) как единое целое и предсказуемым образом с помощью шаблонов группы ресурсов JSON и Создание скриптов PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-104">This tutorial shows how tooprovision and deploy an application composed of [microservices](https://en.wikipedia.org/wiki/Microservices) in [Azure App Service](/services/app-service/) as a single unit and in a predictable manner using JSON resource group templates and PowerShell scripting.</span></span> 

<span data-ttu-id="5d7fd-105">При подготовке и развертывании приложения крупномасштабных, которые состоят из высокой изоляцией микрослужбами, повторяемости и предсказуемость являются ключевым toosuccess.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-105">When provisioning and deploying high-scale applications that are composed of highly decoupled microservices, repeatability and predictability are crucial toosuccess.</span></span> <span data-ttu-id="5d7fd-106">[Служба приложений Azure](/services/app-service/) позволяет микрослужбами toocreate, в том числе веб-приложений, мобильных приложений, приложений API и логику приложения.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-106">[Azure App Service](/services/app-service/) enables you toocreate microservices that include web apps, mobile apps, API apps, and logic apps.</span></span> <span data-ttu-id="5d7fd-107">[Диспетчер ресурсов Azure](../azure-resource-manager/resource-group-overview.md) позволяет вам toomanage все микрослужбами hello как единое целое, вместе с зависимости ресурсов, таких как базы данных и источник параметров управления.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) enables you toomanage all hello microservices as a unit, together with resource dependencies such as database and source control settings.</span></span> <span data-ttu-id="5d7fd-108">Теперь можно также развернуть такое приложение с помощью шаблонов JSON и простых скриптов PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-108">Now, you can also deploy such an application using JSON templates and simple PowerShell scripting.</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="what-you-will-do"></a><span data-ttu-id="5d7fd-109">Выполняемая задача</span><span class="sxs-lookup"><span data-stu-id="5d7fd-109">What you will do</span></span>
<span data-ttu-id="5d7fd-110">В учебнике hello развертыванием приложения, которое содержит:</span><span class="sxs-lookup"><span data-stu-id="5d7fd-110">In hello tutorial, you will deploy an application that includes:</span></span>

* <span data-ttu-id="5d7fd-111">два веб-приложения (т. е. две микрослужбы);</span><span class="sxs-lookup"><span data-stu-id="5d7fd-111">Two web apps (i.e. two microservices)</span></span>
* <span data-ttu-id="5d7fd-112">базу данных SQL внутреннего сервера;</span><span class="sxs-lookup"><span data-stu-id="5d7fd-112">A backend SQL Database</span></span>
* <span data-ttu-id="5d7fd-113">параметры приложения, строки подключения и система управления версиями;</span><span class="sxs-lookup"><span data-stu-id="5d7fd-113">App settings, connection strings, and source control</span></span>
* <span data-ttu-id="5d7fd-114">анализы приложений, предупреждения, параметры автоматического масштабирования.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-114">Application insights, alerts, autoscaling settings</span></span>

## <a name="tools-you-will-use"></a><span data-ttu-id="5d7fd-115">Используемые инструменты</span><span class="sxs-lookup"><span data-stu-id="5d7fd-115">Tools you will use</span></span>
<span data-ttu-id="5d7fd-116">В этом учебнике будет использоваться hello следующие средства.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-116">In this tutorial, you will use hello following tools.</span></span> <span data-ttu-id="5d7fd-117">Так как он не подробного обсуждения о средствах, я буду toostick toohello начала до конца сценария и просто назначьте tooeach Краткое введение и где можно найти дополнительные сведения о его.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-117">Since it’s not comprehensive discussion on tools, I’m going toostick toohello end-to-end scenario and just give you a brief intro tooeach, and where you can find more information on it.</span></span> 

### <a name="azure-resource-manager-templates-json"></a><span data-ttu-id="5d7fd-118">Шаблоны диспетчера ресурсов Azure (JSON)</span><span class="sxs-lookup"><span data-stu-id="5d7fd-118">Azure Resource Manager templates (JSON)</span></span>
<span data-ttu-id="5d7fd-119">Каждый раз при создании веб-приложения в службе приложений Azure, например, диспетчера ресурсов Azure использует группу JSON hello toocreate шаблона весь ресурс с hello ресурсов компонента.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-119">Every time you create a web app in Azure App Service, for example, Azure Resource Manager uses a JSON template toocreate hello entire resource group with hello component resources.</span></span> <span data-ttu-id="5d7fd-120">Сложные шаблоны из hello [Azure Marketplace](/marketplace) как hello [масштабируемой WordPress](/marketplace/partners/wordpress/scalablewordpress/) приложения могут включать hello базы данных MySQL, учетные записи хранения, hello план служб приложений, веб-приложения hello сам, правила оповещений, приложение параметры, параметры автоматического масштабирования и дополнительные и все эти шаблоны являются tooyou доступны через PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-120">A complex template from hello [Azure Marketplace](/marketplace) like hello [Scalable WordPress](/marketplace/partners/wordpress/scalablewordpress/) app can include hello MySQL database, storage accounts, hello App Service plan, hello web app itself, alert rules, app settings, autoscale settings, and more, and all these templates are available tooyou through PowerShell.</span></span> <span data-ttu-id="5d7fd-121">Сведения о toodownload и использовать эти шаблоны в статье [с помощью Azure PowerShell с помощью диспетчера ресурсов Azure](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="5d7fd-121">For information on how toodownload and use these templates, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>

<span data-ttu-id="5d7fd-122">Дополнительные сведения о шаблонах hello диспетчера ресурсов Azure см. в разделе [разработки шаблонов диспетчера ресурсов Azure](../azure-resource-manager/resource-group-authoring-templates.md)</span><span class="sxs-lookup"><span data-stu-id="5d7fd-122">For more information on hello Azure Resource Manager templates, see [Authoring Azure Resource Manager Templates](../azure-resource-manager/resource-group-authoring-templates.md)</span></span>

### <a name="azure-sdk-26-for-visual-studio"></a><span data-ttu-id="5d7fd-123">Пакет SDK для Azure 2.6 для Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5d7fd-123">Azure SDK 2.6 for Visual Studio</span></span>
<span data-ttu-id="5d7fd-124">Hello новейшие SDK содержит улучшения toohello поддержка шаблонов диспетчера ресурсов в редакторе JSON hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-124">hello newest SDK contains improvements toohello Resource Manager template support in hello JSON editor.</span></span> <span data-ttu-id="5d7fd-125">Можно использовать этот tooquickly создать шаблон группы ресурсов с нуля или открыть существующий шаблон JSON (например, шаблон загруженного галереи) для изменения заполнения файла параметров hello и даже развертывания группы ресурсов hello непосредственно из Azure Решения для группы ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-125">You can use this tooquickly create a resource group template from scratch or open an existing JSON template (such as a downloaded gallery template) for modification, populate hello parameters file, and even deploy hello resource group directly from an Azure Resource Group solution.</span></span>

<span data-ttu-id="5d7fd-126">Дополнительные сведения см. в разделе [Пакет SDK для Azure версии 2.6 для Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span><span class="sxs-lookup"><span data-stu-id="5d7fd-126">For more information, see [Azure SDK 2.6 for Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span></span>

### <a name="azure-powershell-080-or-later"></a><span data-ttu-id="5d7fd-127">Azure PowerShell 0.8.0 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="5d7fd-127">Azure PowerShell 0.8.0 or later</span></span>
<span data-ttu-id="5d7fd-128">Начиная с версии 0.8.0 hello Установка Azure PowerShell включает модуль диспетчера ресурсов Azure hello сложения toohello модуль Azure.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-128">Beginning in version 0.8.0, hello Azure PowerShell installation includes hello Azure Resource Manager module in addition toohello Azure module.</span></span> <span data-ttu-id="5d7fd-129">Этот новый модуль включает развертывания hello tooscript групп ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-129">This new module enables you tooscript hello deployment of resource groups.</span></span>

<span data-ttu-id="5d7fd-130">Дополнительные сведения см. в статье [Использование Azure PowerShell с Azure Resource Manager](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="5d7fd-130">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md)</span></span>

### <a name="azure-resource-explorer"></a><span data-ttu-id="5d7fd-131">Обозреватель ресурсов Azure</span><span class="sxs-lookup"><span data-stu-id="5d7fd-131">Azure Resource Explorer</span></span>
<span data-ttu-id="5d7fd-132">Это [средство предварительного просмотра](https://resources.azure.com) позволяет tooexplore hello JSON определения всех групп ресурсов hello в подписке и hello отдельных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-132">This [preview tool](https://resources.azure.com) enables you tooexplore hello JSON definitions of all hello resource groups in your subscription and hello individual resources.</span></span> <span data-ttu-id="5d7fd-133">В средстве hello можно изменять определения JSON hello ресурса, удаление всей иерархии ресурсов и создания новых ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-133">In hello tool, you can edit hello JSON definitions of a resource, delete an entire hierarchy of resources, and create new resources.</span></span>  <span data-ttu-id="5d7fd-134">Hello сведения доступны в это средство служит для создания шаблона, поскольку она показывает, что свойства, необходимые tooset для определенного типа ресурса, hello исправьте значения и т. д. Можно даже создать группы ресурсов в hello [портала Azure](https://portal.azure.com/), затем проверьте его определения JSON в toohelp средство обозревателя hello templatize hello группы ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-134">hello information readily available in this tool is very helpful for template authoring because it shows you what properties you need tooset for a particular type of resource, hello correct values, etc. You can even create your resource group in hello [Azure Portal](https://portal.azure.com/), then inspect its JSON definitions in hello explorer tool toohelp you templatize hello resource group.</span></span>

### <a name="deploy-tooazure-button"></a><span data-ttu-id="5d7fd-135">TooAzure кнопка "Развертывание"</span><span class="sxs-lookup"><span data-stu-id="5d7fd-135">Deploy tooAzure button</span></span>
<span data-ttu-id="5d7fd-136">Если вы используете GitHub для системы управления версиями, можно поместить [кнопку Развернуть tooAzure](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) в ваш файл README. MD обеспечивает tooAzure под ключ развертывания пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-136">If you use GitHub for source control, you can put a [Deploy tooAzure button](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) into your README.MD, which enables a turn-key deployment UI tooAzure.</span></span> <span data-ttu-id="5d7fd-137">Хотя это можно сделать для любой простой веб-приложения, можно расширить этот tooenable развертывание группы весь ресурс путем помещения файла azuredeploy.json в корень репозитория hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-137">While you can do this for any simple web app, you can extend this tooenable deploying an entire resource group by putting an azuredeploy.json file in hello repository root.</span></span> <span data-ttu-id="5d7fd-138">Этот файл JSON, который содержит шаблон группы ресурсов hello, будет использоваться развертывание hello tooAzure toocreate кнопку hello группы ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-138">This JSON file, which contains hello resource group template, will be used by hello Deploy tooAzure button toocreate hello resource group.</span></span> <span data-ttu-id="5d7fd-139">Пример см. в разделе hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) пример, который будет использоваться в этом руководстве.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-139">For an example, see hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) sample, which you will use in this tutorial.</span></span>

## <a name="get-hello-sample-resource-group-template"></a><span data-ttu-id="5d7fd-140">Получить шаблон группы ресурсов образец hello</span><span class="sxs-lookup"><span data-stu-id="5d7fd-140">Get hello sample resource group template</span></span>
<span data-ttu-id="5d7fd-141">Теперь давайте tooit вправо.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-141">So now let’s get right tooit.</span></span>

1. <span data-ttu-id="5d7fd-142">Перейдите toohello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) образец приложения службы.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-142">Navigate toohello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) App Service sample.</span></span>
2. <span data-ttu-id="5d7fd-143">В файле readme.md, нажмите кнопку **развертывание tooAzure**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-143">In readme.md, click **Deploy tooAzure**.</span></span>
3. <span data-ttu-id="5d7fd-144">Вы будете перенаправлены toohello [развертывание для azure](https://deploy.azure.com) сайта и задаваемые tooinput параметры развертывания.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-144">You’re taken toohello [deploy-to-azure](https://deploy.azure.com) site and asked tooinput deployment parameters.</span></span> <span data-ttu-id="5d7fd-145">Обратите внимание, что большинство полей hello заполнены имя репозитория hello и некоторых случайных строк для вас.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-145">Notice that most of hello fields are populated with hello repository name and some random strings for you.</span></span> <span data-ttu-id="5d7fd-146">Все поля hello можно изменить, если требуется, но у вас есть tooenter единственное, что hello — это имя входа администратора SQL Server hello и hello пароль, а затем щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-146">You can change all hello fields if you want, but hello only things you have tooenter are hello SQL Server administrative login and hello password, then click **Next**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-1-deploybuttonui.png)
4. <span data-ttu-id="5d7fd-147">Далее щелкните **развернуть** процесс развертывания toostart hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-147">Next, click **Deploy** toostart hello deployment process.</span></span> <span data-ttu-id="5d7fd-148">После выполнения процесса hello toocompletion щелкните hello http://todoapp*XXXX*. azurewebsites.net ссылку toobrowse hello развернутого приложения.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-148">Once hello process runs toocompletion, click hello http://todoapp*XXXX*.azurewebsites.net link toobrowse hello deployed application.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-2-deployprogress.png)
   
   <span data-ttu-id="5d7fd-149">Hello пользовательского интерфейса может быть несколько медленнее, если вы сначала просмотреть tooit, поскольку приложения hello просто запускается, но убедиться, что это полностью функциональное приложение.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-149">hello UI would be a little slow when you first browse tooit because hello apps are just starting up, but convince yourself that it’s a fully-functional application.</span></span>
5. <span data-ttu-id="5d7fd-150">Обратно hello развертывания на странице нажмите кнопку hello **управление** связать новое приложение hello toosee в hello портала Azure.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-150">Back in hello Deploy page, click hello **Manage** link toosee hello new application in hello Azure Portal.</span></span>
6. <span data-ttu-id="5d7fd-151">В hello **Essentials** раскрывающийся список, щелкните ссылку группы ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-151">In hello **Essentials** dropdown, click hello resource group link.</span></span> <span data-ttu-id="5d7fd-152">Примечание также веб-приложения hello уже подключен репозитории GitHub toohello под **внешнем проекте**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-152">Note also that hello web app is already connected toohello GitHub repository under **External Project**.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-3-portalresourcegroup.png)
7. <span data-ttu-id="5d7fd-153">В колонке группы ресурсов hello Обратите внимание, что уже два веб-приложений и одной базы данных SQL в группе ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-153">In hello resource group blade, note that there are already two web apps and one SQL Database in hello resource group.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-4-portalresourcegroupclicked.png)

<span data-ttu-id="5d7fd-154">Все, что вы видели только через несколько минут на короткий приложении полностью развернутый двух микрослужбу со всеми компонентами hello, зависимости, параметры, базы данных и непрерывной публикации по задано автоматическое согласование диспетчера ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-154">Everything that you just saw in a few short minutes is a fully deployed two-microservice application, with all hello components, dependencies, settings, database, and continuous publishing, set up by an automated orchestration in Azure Resource Manager.</span></span> <span data-ttu-id="5d7fd-155">Все это было проделано с помощью двух вещей:</span><span class="sxs-lookup"><span data-stu-id="5d7fd-155">All this was done by two things:</span></span>

* <span data-ttu-id="5d7fd-156">Кнопка tooAzure развернуть Hello</span><span class="sxs-lookup"><span data-stu-id="5d7fd-156">hello Deploy tooAzure button</span></span>
* <span data-ttu-id="5d7fd-157">azuredeploy.JSON в корне репозитория hello</span><span class="sxs-lookup"><span data-stu-id="5d7fd-157">azuredeploy.json in hello repo root</span></span>

<span data-ttu-id="5d7fd-158">Можно развернуть этот же приложение десятков, сотен или тысяч раз и точное же конфигурацию hello каждый раз.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-158">You can deploy this same application tens, hundreds, or thousands of times and have hello exact same configuration every time.</span></span> <span data-ttu-id="5d7fd-159">Hello повторяемости и hello предсказуемость такой подход позволяет toodeploy крупномасштабных приложений и без труда достоверности.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-159">hello repeatability and hello predictability of this approach enables you toodeploy high-scale applications with ease and confidence.</span></span>

## <a name="examine-or-edit-azuredeployjson"></a><span data-ttu-id="5d7fd-160">Изучение (или изменение) файла AZUREDEPLOY.JSON</span><span class="sxs-lookup"><span data-stu-id="5d7fd-160">Examine (or edit) AZUREDEPLOY.JSON</span></span>
<span data-ttu-id="5d7fd-161">Теперь давайте рассмотрим настроек репозитории GitHub hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-161">Now let’s look at how hello GitHub repository was set up.</span></span> <span data-ttu-id="5d7fd-162">Вы будете использовать редактор JSON hello в hello Azure .NET SDK, поэтому если вы еще не установили [Azure .NET SDK 2.6](/downloads/), сделайте это сейчас.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-162">You will be using hello JSON editor in hello Azure .NET SDK, so if you haven’t already installed [Azure .NET SDK 2.6](/downloads/), do it now.</span></span>

1. <span data-ttu-id="5d7fd-163">Клон hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) репозитория с помощью средства избранные git.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-163">Clone hello [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) repository using your favorite git tool.</span></span> <span data-ttu-id="5d7fd-164">В приведенном далее снимке экрана приветствия я делаю это в Team Explorer в Visual Studio 2013 hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-164">In hello screenshot below, I’m doing this in hello Team Explorer in Visual Studio 2013.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-1-vsclone.png)
2. <span data-ttu-id="5d7fd-165">Из корневой папки репозитория Привет откройте azuredeploy.json в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-165">From hello repository root, open azuredeploy.json in Visual Studio.</span></span> <span data-ttu-id="5d7fd-166">Если вы не видите панель hello структуры JSON, вы должны tooinstall Azure .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-166">If you don’t see hello JSON Outline pane, you need tooinstall Azure .NET SDK.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-2-vsjsoneditor.png)

<span data-ttu-id="5d7fd-167">Я меня не будет toodescribe все детали hello формат JSON, но hello [дополнительные ресурсы](#resources) разделе имеются ссылки для изучения языка шаблона группы ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-167">I’m not going toodescribe every detail of hello JSON format, but hello [More Resources](#resources) section has links for learning hello resource group template language.</span></span> <span data-ttu-id="5d7fd-168">Здесь я создаю tooshow hello интересных функций, которые помогут вам приступить к работе в принятии свой собственный пользовательский шаблон для развертывания приложения.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-168">Here, I’m just going tooshow you hello interesting features that can help you get started in making your own custom template for app deployment.</span></span>

### <a name="parameters"></a><span data-ttu-id="5d7fd-169">Параметры</span><span class="sxs-lookup"><span data-stu-id="5d7fd-169">Parameters</span></span>
<span data-ttu-id="5d7fd-170">Взгляните на toosee раздел параметров hello, большинство из этих параметров являются какие hello **развертывание tooAzure** кнопку предлагает tooinput.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-170">Take a look at hello parameters section toosee that most of these parameters are what hello **Deploy tooAzure** button prompts you tooinput.</span></span> <span data-ttu-id="5d7fd-171">Hello сайта за hello **развертывание tooAzure** кнопку заполняет hello ввода пользовательского интерфейса с помощью hello параметры, определенные в azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-171">hello site behind hello **Deploy tooAzure** button populates hello input UI using hello parameters defined in azuredeploy.json.</span></span> <span data-ttu-id="5d7fd-172">Эти параметры используются по всему hello определения ресурсов, таких как имена ресурсов, значения свойств и т. д.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-172">These parameters are used throughout hello resource definitions, such as resource names, property values, etc.</span></span>

### <a name="resources"></a><span data-ttu-id="5d7fd-173">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="5d7fd-173">Resources</span></span>
<span data-ttu-id="5d7fd-174">Узел ресурсов «hello» вы увидите, что определены 4 ресурсы верхнего уровня, включая экземпляр SQL Server, план служб приложений и два веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-174">In hello resources node, you can see that 4 top-level resources are defined, including a SQL Server instance, an App Service plan, and two web apps.</span></span> 

#### <a name="app-service-plan"></a><span data-ttu-id="5d7fd-175">План службы приложений</span><span class="sxs-lookup"><span data-stu-id="5d7fd-175">App Service plan</span></span>
<span data-ttu-id="5d7fd-176">Давайте начнем с простой на корневом уровне ресурс в hello JSON.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-176">Let’s start with a simple root-level resource in hello JSON.</span></span> <span data-ttu-id="5d7fd-177">В hello структуры JSON, нажмите кнопку с именем плана служб приложений hello **[hostingPlanName]** toohighlight hello соответствующий код JSON.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-177">In hello JSON Outline, click hello App Service plan named **[hostingPlanName]** toohighlight hello corresponding JSON code.</span></span> 

![](./media/app-service-deploy-complex-application-predictably/examinejson-3-appserviceplan.png)

<span data-ttu-id="5d7fd-178">Обратите внимание, что hello `type` элемент указывает строку hello для плана службы приложений (он был вызван фермы серверов long, long давно), и другие элементы и свойства заполняются с использованием параметров hello, определенные в файле JSON hello не имеет этого ресурса любой вложенных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-178">Note that hello `type` element specifies hello string for an App Service plan (it was called a server farm a long, long time ago), and other elements and properties are filled in using hello parameters defined in hello JSON file, and this resource doesn’t have any nested resources.</span></span>

> [!NOTE]
> <span data-ttu-id="5d7fd-179">Обратите внимание, что значение hello `apiVersion` сообщает Azure версии hello API-интерфейса REST toouse hello JSON определения ресурса с и он может повлиять на способ форматирования hello ресурсов внутри hello `{}`.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-179">Note also that hello value of `apiVersion` tells Azure which version of hello REST API toouse hello JSON resource definition with, and it can affect how hello resource should be formatted inside hello `{}`.</span></span> 
> 
> 

#### <a name="sql-server"></a><span data-ttu-id="5d7fd-180">SQL Server</span><span class="sxs-lookup"><span data-stu-id="5d7fd-180">SQL Server</span></span>
<span data-ttu-id="5d7fd-181">Нажмите кнопку с именем ресурса SQL Server hello **SQLServer** в hello структуры JSON.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-181">Next, click on hello SQL Server resource named **SQLServer** in hello JSON Outline.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-4-sqlserver.png)

<span data-ttu-id="5d7fd-182">Примечание hello, следуя о hello выделенный код JSON:</span><span class="sxs-lookup"><span data-stu-id="5d7fd-182">Note hello following about hello highlighted JSON code:</span></span>

* <span data-ttu-id="5d7fd-183">Использование Hello параметров обеспечивает с именем и настроены так, чтобы их согласованность друг с другом hello создания ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-183">hello use of parameters ensures that hello created resources are named and configured in a way that makes them consistent with one another.</span></span>
* <span data-ttu-id="5d7fd-184">Hello SQLServer ресурсов имеет два вложенных ресурсов, каждый из них имеет другое значение для `type`.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-184">hello SQLServer resource has two nested resources, each has a different value for `type`.</span></span>
* <span data-ttu-id="5d7fd-185">Hello вложенных ресурсов в `“resources”: […]`, где определяются hello базы данных и правилами брандмауэра hello у `dependsOn` элемент, который задает идентификатор ресурса hello ресурсов SQLServer hello корневого уровня.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-185">hello nested resources inside `“resources”: […]`, where hello database and hello firewall rules are defined, have a `dependsOn` element that specifies hello resource ID of hello root-level SQLServer resource.</span></span> <span data-ttu-id="5d7fd-186">Это значение определяет Azure Resource Manager «прежде чем создавать этот ресурс, на другой ресурс должен уже существует; и других ресурсов, определен в шаблоне hello, создайте такой сначала».</span><span class="sxs-lookup"><span data-stu-id="5d7fd-186">This tells Azure Resource Manager, “before you create this resource, that other resource must already exist; and if that other resource is defined in hello template, then create that one first”.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="5d7fd-187">Подробные сведения о том, как toouse hello `resourceId()` см. в разделе [функции шаблона диспетчера ресурсов Azure](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span><span class="sxs-lookup"><span data-stu-id="5d7fd-187">For detailed information on how toouse hello `resourceId()` function, see [Azure Resource Manager Template Functions](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span></span>
  > 
  > 
* <span data-ttu-id="5d7fd-188">Здравствуйте, эффект hello `dependsOn` элемент является, диспетчера ресурсов Azure можно узнать, какие ресурсы могут быть созданы в параллельном режиме и какие ресурсы должны быть созданы последовательно.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-188">hello effect of hello `dependsOn` element is that Azure Resource Manager can know which resources can be created in parallel and which resources must be created sequentially.</span></span> 

#### <a name="web-app"></a><span data-ttu-id="5d7fd-189">Веб-приложение</span><span class="sxs-lookup"><span data-stu-id="5d7fd-189">Web app</span></span>
<span data-ttu-id="5d7fd-190">Теперь перейдем toohello фактическое веб-приложения самостоятельно, которые являются более сложным.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-190">Now, let’s move on toohello actual web apps themselves, which are more complicated.</span></span> <span data-ttu-id="5d7fd-191">Щелкните веб-приложения hello [variables('apiSiteName')] в toohighlight структуры JSON hello его код JSON.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-191">Click hello [variables(‘apiSiteName’)] web app in hello JSON Outline toohighlight its JSON code.</span></span> <span data-ttu-id="5d7fd-192">Теперь вы увидите гораздо более интересные вещи.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-192">You’ll notice that things are getting much more interesting.</span></span> <span data-ttu-id="5d7fd-193">Для этой цели мы поговорим о возможностях hello по одному:</span><span class="sxs-lookup"><span data-stu-id="5d7fd-193">For this purpose, I’ll talk about hello features one by one:</span></span>

##### <a name="root-resource"></a><span data-ttu-id="5d7fd-194">Корневой ресурс</span><span class="sxs-lookup"><span data-stu-id="5d7fd-194">Root resource</span></span>
<span data-ttu-id="5d7fd-195">веб-приложения Hello зависит от двух разных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-195">hello web app depends on two different resources.</span></span> <span data-ttu-id="5d7fd-196">Это означает, что диспетчера ресурсов Azure создаст hello веб-приложения только после обоих hello создания плана служб приложений и hello экземпляр SQL Server.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-196">This means that Azure Resource Manager will create hello web app only after both hello App Service plan and hello SQL Server instance are created.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-5-webapproot.png)

##### <a name="app-settings"></a><span data-ttu-id="5d7fd-197">Параметры приложения</span><span class="sxs-lookup"><span data-stu-id="5d7fd-197">App settings</span></span>
<span data-ttu-id="5d7fd-198">Параметры приложения Hello также определены как вложенных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-198">hello app settings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-6-webappsettings.png)

<span data-ttu-id="5d7fd-199">В hello `properties` элемент для `config/appsettings`, у вас есть два параметра приложения в формате hello `“<name>” : “<value>”`.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-199">In hello `properties` element for `config/appsettings`, you have two app settings in hello format `“<name>” : “<value>”`.</span></span>

* <span data-ttu-id="5d7fd-200">`PROJECT`— [KUDU параметр](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) сообщающее развертывания Azure какие toouse проекта в решении несколько проектов Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-200">`PROJECT` is a [KUDU setting](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) that tells Azure deployment which project toouse in a multi-project Visual Studio solution.</span></span> <span data-ttu-id="5d7fd-201">Я расскажу позже, как настроить систему управления версиями, но поскольку hello ToDoApp кода в решении несколько проектов Visual Studio, необходимо, чтобы этот параметр.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-201">I will show you later how source control is configured, but since hello ToDoApp code is in a multi-project Visual Studio solution, we need this setting.</span></span>
* <span data-ttu-id="5d7fd-202">`clientUrl`— просто задание, код приложения hello приложение использует.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-202">`clientUrl` is simply an app setting that hello application code uses.</span></span>

##### <a name="connection-strings"></a><span data-ttu-id="5d7fd-203">Строки подключения</span><span class="sxs-lookup"><span data-stu-id="5d7fd-203">Connection strings</span></span>
<span data-ttu-id="5d7fd-204">строки подключения Hello также определены как вложенных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-204">hello connection strings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-7-webappconnstr.png)

<span data-ttu-id="5d7fd-205">В hello `properties` элемент для `config/connectionstrings`, каждая строка подключения также определяется как пара имя-значение с hello специальный формат `“<name>” : {“value”: “…”, “type”: “…”}`.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-205">In hello `properties` element for `config/connectionstrings`, each connection string is also defined as a name:value pair, with hello specific format of `“<name>” : {“value”: “…”, “type”: “…”}`.</span></span> <span data-ttu-id="5d7fd-206">Для hello `type` элемент, возможные значения: `MySql`, `SQLServer`, `SQLAzure`, и `Custom`.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-206">For hello `type` element, possible values are `MySql`, `SQLServer`, `SQLAzure`, and `Custom`.</span></span>

> [!TIP]
> <span data-ttu-id="5d7fd-207">Определенный список типов подключения строку hello, запустите следующую команду в Azure PowerShell hello: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span><span class="sxs-lookup"><span data-stu-id="5d7fd-207">For a definitive list of hello connection string types, run hello following command in Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span></span>
> 
> 

##### <a name="source-control"></a><span data-ttu-id="5d7fd-208">Система управления версиями</span><span class="sxs-lookup"><span data-stu-id="5d7fd-208">Source control</span></span>
<span data-ttu-id="5d7fd-209">параметры системы управления версиями Hello также определены как вложенных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-209">hello source control settings are also defined as a nested resource.</span></span> <span data-ttu-id="5d7fd-210">Диспетчер ресурсов Azure использует этот ресурс tooconfigure непрерывной публикации (см. Примечание `IsManualIntegration` более поздней версии) и также tookick off hello развертывание кода приложения автоматически во время обработки hello hello JSON-файла.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-210">Azure Resource Manager uses this resource tooconfigure continuous publishing (see caveat on `IsManualIntegration` later) and also tookick off hello deployment of application code automatically during hello processing of hello JSON file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-8-webappsourcecontrol.png)

<span data-ttu-id="5d7fd-211">`RepoUrl`и `branch` должно быть интуитивно и должен указывать toohello Git репозитория и hello имя toopublish hello ветвь из.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-211">`RepoUrl` and `branch` should be pretty intuitive and should point toohello Git repository and hello name of hello branch toopublish from.</span></span> <span data-ttu-id="5d7fd-212">Опять же, они определяются входными параметрами.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-212">Again, these are defined by input parameters.</span></span> 

<span data-ttu-id="5d7fd-213">Примечание в hello `dependsOn` элемент, который в toohello Добавление веб-приложения ресурс, `sourcecontrols/web` также зависит от `config/appsettings` и `config/connectionstrings`.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-213">Note in hello `dependsOn` element that, in addition toohello web app resource itself, `sourcecontrols/web` also depends on `config/appsettings` and `config/connectionstrings`.</span></span> <span data-ttu-id="5d7fd-214">Это, поскольку после `sourcecontrols/web` является настройки hello процесса развертывания Azure автоматически предпримет toodeploy, сборка и запуск кода приложения hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-214">This is because once `sourcecontrols/web` is configured, hello Azure deployment process will automatically attempt toodeploy, build, and start hello application code.</span></span> <span data-ttu-id="5d7fd-215">Таким образом Вставка Эта зависимость поможет убедиться, что вы это приложение hello имеет доступ toohello необходимые приложения и строки подключения перед выполнением кода приложения hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-215">Therefore, inserting this dependency helps you make sure that hello application has access toohello required app settings and connection strings before hello application code is run.</span></span> 

> [!NOTE]
> <span data-ttu-id="5d7fd-216">Обратите внимание, что `IsManualIntegration` задано слишком`true`.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-216">Note also that `IsManualIntegration` is set too`true`.</span></span> <span data-ttu-id="5d7fd-217">Это свойство является необходимым в этом учебнике, поскольку фактически не владеет репозитории GitHub hello и таким образом не может предоставить фактически разрешение tooAzure tooconfigure непрерывной публикации из [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (т. е. Принудительная автоматическая репозиторий tooAzure обновления).</span><span class="sxs-lookup"><span data-stu-id="5d7fd-217">This property is necessary in this tutorial because you do not actually own hello GitHub repository, and thus cannot actually grant permission tooAzure tooconfigure continuous publishing from [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (i.e. push automatic repository updates tooAzure).</span></span> <span data-ttu-id="5d7fd-218">Можно использовать значение по умолчанию hello `false` для hello в указанном репозитории только в том случае, если вы настроили учетные данные GitHub hello владельца hello [портал Azure](https://portal.azure.com/) до.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-218">You can use hello default value `false` for hello specified repository only if you have configured hello owner’s GitHub credentials in hello [Azure portal](https://portal.azure.com/) before.</span></span> <span data-ttu-id="5d7fd-219">Другими словами Если вы настроили tooGitHub управления источника или BitBucket для любого приложения в hello [портала Azure](https://portal.azure.com/) ранее, с помощью пользователя учетные данные, то Azure будет запоминать учетные данные hello и использовать их при развертывании из любого приложения GitHub или BitBucket в будущем hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-219">In other words, if you have set up source control tooGitHub or BitBucket for any app in hello [Azure Portal](https://portal.azure.com/) previously, using your user credentials, then Azure will remember hello credentials and use them whenever you deploy any app from GitHub or BitBucket in hello future.</span></span> <span data-ttu-id="5d7fd-220">Тем не менее если вы еще не сделали это, произойдет сбой развертывания шаблона JSON hello, когда диспетчера ресурсов Azure пытается параметры системы управления версиями tooconfigure hello веб-приложения, так как он не может входить в GitHub или BitBucket с учетными данными владельца репозитория hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-220">However, if you haven’t done this already, deployment of hello JSON template will fail when Azure Resource Manager tries tooconfigure hello web app’s source control settings because it cannot log into GitHub or BitBucket with hello repository owner’s credentials.</span></span>
> 
> 

## <a name="compare-hello-json-template-with-deployed-resource-group"></a><span data-ttu-id="5d7fd-221">Сравнение hello шаблона JSON с группой ресурсов, развернутых</span><span class="sxs-lookup"><span data-stu-id="5d7fd-221">Compare hello JSON template with deployed resource group</span></span>
<span data-ttu-id="5d7fd-222">Здесь вы можете пройти все hello веб-приложения колонок в hello [портала Azure](https://portal.azure.com/), но есть другое средство, не только как полезны, если несколько.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-222">Here, you can go through all hello web app’s blades in hello [Azure Portal](https://portal.azure.com/), but there’s another tool that’s just as useful, if not more.</span></span> <span data-ttu-id="5d7fd-223">Go toohello [обозревателя ресурсов Azure](https://resources.azure.com) средства предварительного просмотра, которое предоставляет JSON-представление всех групп ресурсов hello в ваших подписок, поскольку они фактически существуют в hello Azure серверной части.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-223">Go toohello [Azure Resource Explorer](https://resources.azure.com) preview tool, which gives you a JSON representation of all hello resource groups in your subscriptions, as they actually exist in hello Azure backend.</span></span> <span data-ttu-id="5d7fd-224">Можно узнать, как группа ресурсов hello иерархии JSON в Azure соответствует иерархии hello в файле шаблона hello, которое использовалось toocreate его.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-224">You can also see how hello resource group’s JSON hierarchy in Azure corresponds with hello hierarchy in hello template file that’s used toocreate it.</span></span>

<span data-ttu-id="5d7fd-225">Например, если перейти toohello [обозревателя ресурсов Azure](https://resources.azure.com) инструмент и разверните узлы hello в обозревателе hello, отображаются группы ресурсов hello и ресурсы hello корневого уровня, которые собираются в типам соответствующих ресурсов.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-225">For example, when I go toohello [Azure Resource Explorer](https://resources.azure.com) tool and expand hello nodes in hello explorer, I can see hello resource group and hello root-level resources that are collected under their respective resource types.</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-1-treeview.png)

<span data-ttu-id="5d7fd-226">Если детализация углублением tooa веб-приложение, должен быть может toosee web app конфигурации сведения аналогичные toohello приведенном ниже снимке экрана:</span><span class="sxs-lookup"><span data-stu-id="5d7fd-226">If you drill down tooa web app, you should be able toosee web app configuration details similar toohello below screenshot:</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-2-jsonview.png)

<span data-ttu-id="5d7fd-227">Еще раз hello вложенных ресурсов должно toothose схожий иерархии в файле шаблона JSON, и вы увидите параметры приложения hello, строки подключения, т. д., правильно отражаются в области hello JSON.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-227">Again, hello nested resources should have a hierarchy very similar toothose in your JSON template file, and you should see hello app settings, connection strings, etc., properly reflected in hello JSON pane.</span></span> <span data-ttu-id="5d7fd-228">отсутствие Hello здесь параметров может указывать на проблему с JSON-файла и могут помочь устранить файла шаблона JSON.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-228">hello absence of settings here may indicate an issue with your JSON file and can help you troubleshoot your JSON template file.</span></span>

## <a name="deploy-hello-resource-group-template-yourself"></a><span data-ttu-id="5d7fd-229">Развернуть шаблон группы ресурсов hello вручную</span><span class="sxs-lookup"><span data-stu-id="5d7fd-229">Deploy hello resource group template yourself</span></span>
<span data-ttu-id="5d7fd-230">Hello **развертывание tooAzure** кнопку отлично, но с ее помощью можно шаблон группы ресурсов toodeploy hello в azuredeploy.json только в том случае, если вы уже принудительно отправлены azuredeploy.json tooGitHub.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-230">hello **Deploy tooAzure** button is great, but it allows you toodeploy hello resource group template in azuredeploy.json only if you have already pushed azuredeploy.json tooGitHub.</span></span> <span data-ttu-id="5d7fd-231">Hello Azure .NET SDK также предоставляет средства hello вы toodeploy любой файл шаблона JSON непосредственно с локального компьютера.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-231">hello Azure .NET SDK also provides hello tools for you toodeploy any JSON template file directly from your local machine.</span></span> <span data-ttu-id="5d7fd-232">toodo это, выполните hello шаги:</span><span class="sxs-lookup"><span data-stu-id="5d7fd-232">toodo this, follow hello steps below:</span></span>

1. <span data-ttu-id="5d7fd-233">В Visual Studio выберите **Файл** > **Создать** > **Проект**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-233">In Visual Studio, click **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="5d7fd-234">Выберите **Visual C#** > **Облако** > **Группа ресурсов Azure**, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-234">Click **Visual C#** > **Cloud** > **Azure Resource Group**, then click **OK**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-1-vsproject.png)
3. <span data-ttu-id="5d7fd-235">В разделе **Выберите шаблон Azure** выберите **Пустой шаблон** и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-235">In **Select Azure Template**, select **Blank Template** and click **OK**.</span></span>
4. <span data-ttu-id="5d7fd-236">Перетащите в hello azuredeploy.json **шаблона** папку нового проекта.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-236">Drag azuredeploy.json into hello **Template** folder of your new project.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-2-copyjson.png)
5. <span data-ttu-id="5d7fd-237">В обозревателе решений откройте azuredeploy.json hello копируются.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-237">From Solution Explorer, open hello copied azuredeploy.json.</span></span>
6. <span data-ttu-id="5d7fd-238">Только ради hello демонстрации hello, добавим некоторые стандартные Application Insight ресурсы tooour JSON-файл, нажав **добавить ресурс**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-238">Just for hello sake of hello demonstration, let’s add some standard Application Insight resources tooour JSON file, by clicking **Add Resource**.</span></span> <span data-ttu-id="5d7fd-239">Если вас интересует только развертывание hello JSON-файл, пропустите шаги развертывания toohello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-239">If you’re just interested in deploying hello JSON file, skip toohello deploy steps.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-3-newresource.png)
7. <span data-ttu-id="5d7fd-240">Выберите **Application Insights для веб-приложений**, убедитесь, что выбран существующий план службы приложений и выбрано веб-приложение, а затем нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-240">Select **Application Insights for Web Apps**, then make sure an existing App Service plan and web app is selected, and then click **Add**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-4-newappinsight.png)
   
   <span data-ttu-id="5d7fd-241">Вам потребуется выполнить теперь быть может toosee несколько новых ресурсов, в зависимости от ресурсов hello и действие, имеют зависимости от либо hello службы приложений плана или hello веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-241">You’ll now be able toosee several new resources that, depending on hello resource and what it does, have dependencies on either hello App Service plan or hello web app.</span></span> <span data-ttu-id="5d7fd-242">Эти ресурсы по их существующее определение не включены, и вы собираетесь toochange.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-242">These resources are not enabled by their existing definition and you’re going toochange that.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-5-appinsightresources.png)
8. <span data-ttu-id="5d7fd-243">В hello структуры JSON, щелкните **appInsights автомасштабирования** toohighlight его код JSON.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-243">In hello JSON Outline, click **appInsights AutoScale** toohighlight its JSON code.</span></span> <span data-ttu-id="5d7fd-244">Это hello масштабирование параметр для плана служб приложений.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-244">This is hello scaling setting for your App Service plan.</span></span>
9. <span data-ttu-id="5d7fd-245">В hello выделенный код JSON, найдите hello `location` и `enabled` свойства и укажите их, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-245">In hello highlighted JSON code, locate hello `location` and `enabled` properties and set them as shown below.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-6-autoscalesettings.png)
10. <span data-ttu-id="5d7fd-246">В hello структуры JSON, щелкните **CPUHigh appInsights** toohighlight его код JSON.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-246">In hello JSON Outline, click **CPUHigh appInsights** toohighlight its JSON code.</span></span> <span data-ttu-id="5d7fd-247">Это предупреждение.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-247">This is an alert.</span></span>
11. <span data-ttu-id="5d7fd-248">Найдите hello `location` и `isEnabled` свойства и укажите их, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-248">Locate hello `location` and `isEnabled` properties and set them as shown below.</span></span> <span data-ttu-id="5d7fd-249">Hello одинаково для hello других трех оповещений (фиолетовый лампочки).</span><span class="sxs-lookup"><span data-stu-id="5d7fd-249">Do hello same for hello other three alerts (purple bulbs).</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-7-alerts.png)
12. <span data-ttu-id="5d7fd-250">Теперь вы готовы toodeploy.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-250">You’re now ready toodeploy.</span></span> <span data-ttu-id="5d7fd-251">Щелкните правой кнопкой мыши проект hello и выберите **развернуть** > **новое развертывание**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-251">Right-click hello project and select **Deploy** > **New Deployment**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-8-newdeployment.png)
13. <span data-ttu-id="5d7fd-252">Войдите в свою учетную запись Azure, если вы еще этого не сделали.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-252">Log into your Azure account if you haven’t already done so.</span></span>
14. <span data-ttu-id="5d7fd-253">Выберите существующую группу ресурсов в подписке или создайте новую. Выберите файл **azuredeploy.json**, а затем нажмите кнопку **Изменить параметры**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-253">Select an existing resource group in your subscription or create a new one, select **azuredeploy.json**, and then click **Edit Parameters**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-9-deployconfig.png)
    
    <span data-ttu-id="5d7fd-254">Теперь вы сможете может tooedit все параметры hello определены в файле шаблона hello в таблицу с низким приоритетом.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-254">You’ll now be able tooedit all hello parameters defined in hello template file in a nice table.</span></span> <span data-ttu-id="5d7fd-255">Параметры, определяющие значения по умолчанию, уже будут иметь значения по умолчанию, а параметры, определяющие список допустимых значений, будут отображаться в виде раскрывающихся списков.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-255">Parameters that define defaults will already have their default values, and parameters that define a list of allowed values will be shown as dropdowns.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-10-parametereditor.png)
15. <span data-ttu-id="5d7fd-256">Заполните все параметры пустой hello и использовать hello [адрес репозитория GitHub ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) в **repoUrl**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-256">Fill in all hello empty parameters, and use hello [GitHub repo address for ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) in **repoUrl**.</span></span> <span data-ttu-id="5d7fd-257">Нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-257">Then, click **Save**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-11-parametereditorfilled.png)
    
    > [!NOTE]
    > <span data-ttu-id="5d7fd-258">Автоматическое масштабирование — функция, предлагаемая в **Стандартная** уровня или более поздней версии и уровне плана оповещения, возможности, предлагаемые **основные** категорию или более поздней версии, вам потребуется tooset hello **sku** параметр слишком**Стандартная** или **Premium** чтобы toosee все новые подробные сведения о приложении ресурсы подсветка.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-258">Autoscaling is a feature offered in **Standard** tier or higher, and plan-level alerts are features offered in **Basic** tier or higher, you’ll need tooset hello **sku** parameter too**Standard** or **Premium** in order toosee all your new App Insights resources light up.</span></span>
    > 
    > 
16. <span data-ttu-id="5d7fd-259">Щелкните **Развернуть**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-259">Click **Deploy**.</span></span> <span data-ttu-id="5d7fd-260">Если вы выбрали **сохранить пароли**, hello пароль будет сохранен в файл параметров hello **в виде обычного текста**.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-260">If you selected **Save passwords**, hello password will be saved in hello parameter file **in plain text**.</span></span> <span data-ttu-id="5d7fd-261">В противном случае запрашивается пароль базы данных hello tooinput во время развертывания hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-261">Otherwise, you’ll be asked tooinput hello database password during hello deployment process.</span></span>

<span data-ttu-id="5d7fd-262">Это все!</span><span class="sxs-lookup"><span data-stu-id="5d7fd-262">That’s it!</span></span> <span data-ttu-id="5d7fd-263">Теперь необходимо просто toogo toohello [портала Azure](https://portal.azure.com/) и hello [обозревателя ресурсов Azure](https://resources.azure.com) toosee средство hello новые предупреждения и добавлены параметры автоматического масштабирования tooyour JSON развернутого приложения.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-263">Now you just need toogo toohello [Azure Portal](https://portal.azure.com/) and hello [Azure Resource Explorer](https://resources.azure.com) tool toosee hello new alerts and autoscale settings added tooyour JSON deployed application.</span></span>

<span data-ttu-id="5d7fd-264">Действия, описанные в этом основном выполняются hello следующее:</span><span class="sxs-lookup"><span data-stu-id="5d7fd-264">Your steps in this section mainly accomplished hello following:</span></span>

1. <span data-ttu-id="5d7fd-265">Файл шаблона подготовленного hello</span><span class="sxs-lookup"><span data-stu-id="5d7fd-265">Prepared hello template file</span></span>
2. <span data-ttu-id="5d7fd-266">Создан файл параметров toogo с использованием файла шаблона hello</span><span class="sxs-lookup"><span data-stu-id="5d7fd-266">Created a parameter file toogo with hello template file</span></span>
3. <span data-ttu-id="5d7fd-267">Файл шаблона развернутое приложение hello, а параметр hello</span><span class="sxs-lookup"><span data-stu-id="5d7fd-267">Deployed hello template file with hello parameter file</span></span>

<span data-ttu-id="5d7fd-268">Последний этап Hello легко выполняется с помощью командлета PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-268">hello last step is easily done by a PowerShell cmdlet.</span></span> <span data-ttu-id="5d7fd-269">toosee что сделал Visual Studio при его развертывании вашего приложения, откройте Scripts\Deploy-AzureResourceGroup.ps1.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-269">toosee what Visual Studio did when it deployed your application, open Scripts\Deploy-AzureResourceGroup.ps1.</span></span> <span data-ttu-id="5d7fd-270">Имеется большой объем кода существует, но я создаю toohighlight все нужные кода hello требуется файл шаблона hello toodeploy с файлом параметр hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-270">There’s a lot of code there, but I’m just going toohighlight all hello pertinent code you need toodeploy hello template file with hello parameter file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/deploy-12-powershellsnippet.png)

<span data-ttu-id="5d7fd-271">Здравствуйте, последний командлет `New-AzureResourceGroup`, — hello, который фактически выполняет действие hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-271">hello last cmdlet, `New-AzureResourceGroup`, is hello one that actually performs hello action.</span></span> <span data-ttu-id="5d7fd-272">После этого следует демонстрации tooyou, что, с помощью средства hello, это относительно простой toodeploy вашей предсказуемо облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-272">All this should demonstrate tooyou that, with hello help of tooling, it is relatively straightforward toodeploy your cloud application predictably.</span></span> <span data-ttu-id="5d7fd-273">При каждом запуске командлета hello на hello того же шаблона с hello же файл параметров, которые планируется tooget hello того же результата.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-273">Every time you run hello cmdlet on hello same template with hello same parameter file, you’re going tooget hello same result.</span></span>

## <a name="summary"></a><span data-ttu-id="5d7fd-274">Сводка</span><span class="sxs-lookup"><span data-stu-id="5d7fd-274">Summary</span></span>
<span data-ttu-id="5d7fd-275">В DevOps повторяемости и предсказуемость являются ключи tooany успешного развертывания крупномасштабных приложений, состоящие из микрослужбами.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-275">In DevOps, repeatability and predictability are keys tooany successful deployment of a high-scale application composed of microservices.</span></span> <span data-ttu-id="5d7fd-276">В этом учебнике вы развернули tooAzure микрослужбу два приложения в качестве единой группы ресурсов с помощью шаблона Azure Resource Manager hello.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-276">In this tutorial, you have deployed a two-microservice application tooAzure as a single resource group using hello Azure Resource Manager template.</span></span> <span data-ttu-id="5d7fd-277">Надеюсь, он предоставил вам hello базы знаний, необходимых в порядке toostart преобразования приложения в Azure в шаблон и можно подготовить и развернуть его предсказуемо.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-277">Hopefully, it has given you hello knowledge you need in order toostart converting your application in Azure into a template and can provision and deploy it predictably.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="5d7fd-278">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="5d7fd-278">Next Steps</span></span>
<span data-ttu-id="5d7fd-279">Узнайте, как слишком[применить гибкие методологии и постоянно опубликовать приложение микрослужбами с легкостью](app-service-agile-software-development.md) и дополнительные методы развертывания как [проекте, которая должна развертывания](app-service-web-test-in-production-controlled-test-flight.md) легко.</span><span class="sxs-lookup"><span data-stu-id="5d7fd-279">Find out how too[apply agile methodologies and continuously publish your microservices application with ease](app-service-agile-software-development.md) and advanced deployment techniques like [flighting deployment](app-service-web-test-in-production-controlled-test-flight.md) easily.</span></span>

<a name="resources"></a>

## <a name="more-resources"></a><span data-ttu-id="5d7fd-280">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="5d7fd-280">More resources</span></span>
* [<span data-ttu-id="5d7fd-281">Язык шаблонов в диспетчере ресурсов Azure</span><span class="sxs-lookup"><span data-stu-id="5d7fd-281">Azure Resource Manager Template Language</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="5d7fd-282">Создание шаблонов диспетчера ресурсов Azure</span><span class="sxs-lookup"><span data-stu-id="5d7fd-282">Authoring Azure Resource Manager Templates</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="5d7fd-283">Функции шаблонов в диспетчере ресурсов Azure</span><span class="sxs-lookup"><span data-stu-id="5d7fd-283">Azure Resource Manager Template Functions</span></span>](../azure-resource-manager/resource-group-template-functions.md)
* [<span data-ttu-id="5d7fd-284">Развертывание приложения с использованием шаблона диспетчера ресурсов Azure</span><span class="sxs-lookup"><span data-stu-id="5d7fd-284">Deploy an application with Azure Resource Manager template</span></span>](../azure-resource-manager/resource-group-template-deploy.md)
* [<span data-ttu-id="5d7fd-285">Использование Azure PowerShell с диспетчером ресурсов Azure</span><span class="sxs-lookup"><span data-stu-id="5d7fd-285">Using Azure PowerShell with Azure Resource Manager</span></span>](../azure-resource-manager/powershell-azure-resource-manager.md)
* [<span data-ttu-id="5d7fd-286">Устранение неполадок при развертывании групп ресурсов в Azure</span><span class="sxs-lookup"><span data-stu-id="5d7fd-286">Troubleshooting Resource Group Deployments in Azure</span></span>](../azure-resource-manager/resource-manager-common-deployment-errors.md)

