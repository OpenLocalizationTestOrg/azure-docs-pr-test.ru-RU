---
title: "aaaGet к выполнению тестов в рабочей среде для веб-приложений"
description: "Дополнительные сведения о hello тестирования в рабочей среде (TiP) функция в веб-приложениях службы приложений Azure."
services: app-service\web
documentationcenter: 
author: cephalin
manager: erikre
editor: 
ms.assetid: 4623468d-886e-4203-8012-8f86deb2790b
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/13/2016
ms.author: cephalin
ms.openlocfilehash: 2ddbd532ffe2a4f3e07fd386d9741a3fde3639ca
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="get-started-with-test-in-production-for-web-apps"></a><span data-ttu-id="8c1db-103">Введение в тестирование веб-приложений в рабочей среде</span><span class="sxs-lookup"><span data-stu-id="8c1db-103">Get started with test in production for Web Apps</span></span>
<span data-ttu-id="8c1db-104">Тестирование в рабочей среде или тестирование веб-приложения с использованием текущего пользовательского трафика является популярной стратегией тестирования, которую разработчики приложений широко интегрируют в методологию [гибкой разработки](https://en.wikipedia.org/wiki/Agile_software_development).</span><span class="sxs-lookup"><span data-stu-id="8c1db-104">Testing in production, or live-testing your web app using live customer traffic, is a test strategy that app developers increasingly integrate into their [agile development](https://en.wikipedia.org/wiki/Agile_software_development) methodology.</span></span> <span data-ttu-id="8c1db-105">Благодаря этому можно tootest hello качества приложений с динамической пользовательский трафик в рабочей среде, в противоположность toosynthesized данных в тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="8c1db-105">It enables you tootest hello quality of your apps with live user traffic in your production environment, as opposed toosynthesized data in a test environment.</span></span> <span data-ttu-id="8c1db-106">Путем предоставления доступа к новым пользователям tooreal приложения, могут получать уведомления на hello серьезные проблемы, которые могут возникнуть приложения после его развертывания.</span><span class="sxs-lookup"><span data-stu-id="8c1db-106">By exposing your new app tooreal users, you can be informed on hello real problems your app may face once it is deployed.</span></span> <span data-ttu-id="8c1db-107">Можно проверить функциональные возможности hello, производительность и обновления приложения от hello тома, скорости и разнообразных трафик реальному пользователю, который никогда не может получить приблизительный в тестовой среде.</span><span class="sxs-lookup"><span data-stu-id="8c1db-107">You can verify hello functionality, performance, and value of your app updates against hello volume, velocity, and variety of real user traffic, which you can never approximate in a test environment.</span></span>

## <a name="traffic-routing-in-app-service-web-apps"></a><span data-ttu-id="8c1db-108">Маршрутизация трафика в веб-приложениях службы приложений</span><span class="sxs-lookup"><span data-stu-id="8c1db-108">Traffic Routing in App Service Web Apps</span></span>
<span data-ttu-id="8c1db-109">С hello маршрутизации трафика, входящего в [службе приложений Azure](http://go.microsoft.com/fwlink/?LinkId=529714), можно направить часть tooone трафик динамической пользователя или более [слоты развертывания](web-sites-staged-publishing.md)и затем анализ приложения с [приложения Azure Аналитики](/services/application-insights/) или [Azure HDInsight](/services/hdinsight/), или стороннего средства, такие как [New Relic](/marketplace/partners/newrelic/newrelic/) toovalidate внесенные изменения.</span><span class="sxs-lookup"><span data-stu-id="8c1db-109">With hello Traffic Routing feature in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714), you can direct a portion of live user traffic tooone or more [deployment slots](web-sites-staged-publishing.md), and then analyze your app with [Azure Application Insights](/services/application-insights/) or [Azure HDInsight](/services/hdinsight/), or a third-party tool like [New Relic](/marketplace/partners/newrelic/newrelic/) toovalidate your change.</span></span> <span data-ttu-id="8c1db-110">Например можно реализовать следующие сценарии с службой приложения hello.</span><span class="sxs-lookup"><span data-stu-id="8c1db-110">For example, you can implement hello following scenarios with App Service:</span></span>

* <span data-ttu-id="8c1db-111">Обнаружение ошибок работы или выявить узкие места производительности в развертывании обновлений предыдущего уровня toosite</span><span class="sxs-lookup"><span data-stu-id="8c1db-111">Discover functional bugs or pinpoint performance bottlenecks in your updates prior toosite-wide deployment</span></span>
* <span data-ttu-id="8c1db-112">Выполнить «управляемой тестовой рейсов» изменений путем измерения метрики удобства использования на приложение hello бета-версии</span><span class="sxs-lookup"><span data-stu-id="8c1db-112">Perform "controlled test flights" of your changes by measuring usability metrics on hello beta app</span></span>
* <span data-ttu-id="8c1db-113">Постепенно освоить tooa новым обновлением и корректно обратно вниз toohello текущей версии, при возникновении ошибки</span><span class="sxs-lookup"><span data-stu-id="8c1db-113">Gradually ramp up tooa new update, and gracefully back down toohello current version if an error occurs</span></span> 
* <span data-ttu-id="8c1db-114">Оптимизация результатов бизнес-приложения путем выполнения [альфа- и бета-тестирования](https://en.wikipedia.org/wiki/A/B_testing) или [многовариантного тестирования](https://en.wikipedia.org/wiki/Multivariate_testing_in_marketing) в нескольких слотах развертывания.</span><span class="sxs-lookup"><span data-stu-id="8c1db-114">Optimize your app's business results by running [A/B tests](https://en.wikipedia.org/wiki/A/B_testing) or [multivariate tests](https://en.wikipedia.org/wiki/Multivariate_testing_in_marketing) in multiple deployment slots</span></span>

### <a name="requirements-for-using-traffic-routing-in-web-apps"></a><span data-ttu-id="8c1db-115">Требования для использования маршрутизации трафика в веб-приложениях</span><span class="sxs-lookup"><span data-stu-id="8c1db-115">Requirements for using Traffic Routing in Web Apps</span></span>
* <span data-ttu-id="8c1db-116">Веб-приложение должно выполняться в категории **Стандартный** или **Премиум**, так как это требуется для нескольких слотов развертывания.</span><span class="sxs-lookup"><span data-stu-id="8c1db-116">Your web app must run in **Standard** or **Premium** tier, as it is required for multiple deployment slots.</span></span>
* <span data-ttu-id="8c1db-117">В порядке toowork надлежащим образом, для маршрутизации трафика требуется toobe файлы Cookie включены в браузере hello пользователей.</span><span class="sxs-lookup"><span data-stu-id="8c1db-117">In order toowork properly, Traffic Routing requires cookies toobe enabled in hello users' browser.</span></span> <span data-ttu-id="8c1db-118">Маршрутизации трафика использует файлы cookie toopin слота развертывания tooa браузера клиента для сеанса клиента hello жизни hello.</span><span class="sxs-lookup"><span data-stu-id="8c1db-118">Traffic Routing uses cookies toopin a client browser tooa deployment slot for hello life hello client session.</span></span>
* <span data-ttu-id="8c1db-119">Маршрутизация трафика поддерживает расширенные сценарии тестирования в рабочей среде с использованием командлетов Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8c1db-119">Traffic Routing supports advanced TiP scenarios through Azure PowerShell cmdlets.</span></span>

## <a name="route-traffic-segment-tooa-deployment-slot"></a><span data-ttu-id="8c1db-120">Слот развертывания tooa сегмент трафик маршрута</span><span class="sxs-lookup"><span data-stu-id="8c1db-120">Route traffic segment tooa deployment slot</span></span>
<span data-ttu-id="8c1db-121">На уровне basic hello в каждом сценарии TiP маршрутизацию стандартному проценту от ваш слот развертывания нерабочей tooa трафик динамической.</span><span class="sxs-lookup"><span data-stu-id="8c1db-121">At hello basic level in every TiP scenario, you route a predefined percentage of your live traffic tooa non-production deployment slot.</span></span> <span data-ttu-id="8c1db-122">toodo это, выполните hello шаги:</span><span class="sxs-lookup"><span data-stu-id="8c1db-122">toodo this, follow hello steps below:</span></span>

> [!NOTE]
> <span data-ttu-id="8c1db-123">Hello при выполнении шагов предполагается, что уже [слот развертывания нерабочей](web-sites-staged-publishing.md) и что hello требуемого приложения веб-содержимого уже [развертывания](web-sites-deploy.md) tooit.</span><span class="sxs-lookup"><span data-stu-id="8c1db-123">hello steps here assumes that you already have a [non-production deployment slot](web-sites-staged-publishing.md) and that hello desired web app content is already [deployed](web-sites-deploy.md) tooit.</span></span>
> 
> 

1. <span data-ttu-id="8c1db-124">Войти в hello [портала Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="8c1db-124">Log into hello [Azure Portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="8c1db-125">В колонке веб-приложения щелкните **Параметры** > **Маршрутизация трафика**.</span><span class="sxs-lookup"><span data-stu-id="8c1db-125">In your web app's blade, click **Settings** > **Traffic Routing**.</span></span>
   ![](./media/app-service-web-test-in-production/01-traffic-routing.png)
3. <span data-ttu-id="8c1db-126">Выберите hello слот, где требуется tooroute tooand трафика hello процент hello всего трафика, вам нужен, а затем нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="8c1db-126">Select hello slot that you want tooroute traffic tooand hello percentage of hello total traffic you desire, then click **Save**.</span></span>
   
    ![](./media/app-service-web-test-in-production/02-select-slot.png)
4. <span data-ttu-id="8c1db-127">Перейдите в колонку слот развертывания toohello.</span><span class="sxs-lookup"><span data-stu-id="8c1db-127">Go toohello deployment slot's blade.</span></span> <span data-ttu-id="8c1db-128">Теперь вы увидите, перенаправленное tooit трафик динамической.</span><span class="sxs-lookup"><span data-stu-id="8c1db-128">You should now see live traffic being routed tooit.</span></span>
   
    ![](./media/app-service-web-test-in-production/03-traffic-routed.png)

<span data-ttu-id="8c1db-129">После настройки маршрутизации трафика hello указанный процент клиентов будет случайным образом перенаправленное tooyour не производственный слот.</span><span class="sxs-lookup"><span data-stu-id="8c1db-129">Once Traffic Routing is configured, hello specified percentage of clients will be randomly routed tooyour non-production slot.</span></span> <span data-ttu-id="8c1db-130">Однако это важно toonote, что после клиент автоматически перенаправленное tooa конкретных слот, она будет слот «закрепленные» toothat hello время жизни сеанса клиента.</span><span class="sxs-lookup"><span data-stu-id="8c1db-130">However, it is important toonote that once a client is automatically routed tooa specific slot, it will be "pinned" toothat slot for hello life of that client session.</span></span> <span data-ttu-id="8c1db-131">Это сделано с помощью сеанса пользователя hello toopin куки-файл.</span><span class="sxs-lookup"><span data-stu-id="8c1db-131">This done using a cookie toopin hello user session.</span></span> <span data-ttu-id="8c1db-132">Проверить, hello HTTP-запросов, вы обнаружите `TipMix` каждый последующий запрос в файле cookie.</span><span class="sxs-lookup"><span data-stu-id="8c1db-132">If you inspect hello HTTP requests, you will find a `TipMix` cookie in every subsequent request.</span></span>

![](./media/app-service-web-test-in-production/04-tip-cookie.png)

## <a name="force-client-requests-tooa-specific-slot"></a><span data-ttu-id="8c1db-133">Принудительно слот конкретных tooa запросы клиента</span><span class="sxs-lookup"><span data-stu-id="8c1db-133">Force client requests tooa specific slot</span></span>
<span data-ttu-id="8c1db-134">В добавление tooautomatic для маршрутизации трафика, службы приложений является может tooroute запросов tooa конкретных слота.</span><span class="sxs-lookup"><span data-stu-id="8c1db-134">In addition tooautomatic traffic routing, App Service is able tooroute requests tooa specific slot.</span></span> <span data-ttu-id="8c1db-135">Это полезно при необходимости вашей может tooopt toobe пользователи — в или отказаться от бета-версии приложения.</span><span class="sxs-lookup"><span data-stu-id="8c1db-135">This is useful when you want your users toobe able tooopt-into or opt-out of your beta app.</span></span> <span data-ttu-id="8c1db-136">toodo это, используйте hello `x-ms-routing-name` параметр запроса.</span><span class="sxs-lookup"><span data-stu-id="8c1db-136">toodo this, you use hello `x-ms-routing-name` query parameter.</span></span>

<span data-ttu-id="8c1db-137">tooreroute пользователи tooa конкретных слот с помощью `x-ms-routing-name`, необходимо проверить этот слот hello уже добавлен в список маршрутизации трафика toohello.</span><span class="sxs-lookup"><span data-stu-id="8c1db-137">tooreroute users tooa specific slot using `x-ms-routing-name`, you must make sure that hello slot is already added toohello Traffic Routing list.</span></span> <span data-ttu-id="8c1db-138">Поскольку слот tooa tooroute необходимо явным образом, hello фактическое маршрутизации процентное соотношение задать не имеет значения.</span><span class="sxs-lookup"><span data-stu-id="8c1db-138">Since you want tooroute tooa slot explicitly, hello actual routing percentage you set doesn't matter.</span></span> <span data-ttu-id="8c1db-139">Если требуется, можно создать «бета-версии ссылку», пользователи могут щелкнуть tooaccess hello бета-версии приложения.</span><span class="sxs-lookup"><span data-stu-id="8c1db-139">If you want, you can craft a "beta link" that users can click tooaccess hello beta app.</span></span>

![](./media/app-service-web-test-in-production/06-enable-x-ms-routing-name.png)

### <a name="opt-users-out-of-beta-app"></a><span data-ttu-id="8c1db-140">Отказ пользователей от использования бета-версии приложения</span><span class="sxs-lookup"><span data-stu-id="8c1db-140">Opt users out of beta app</span></span>
<span data-ttu-id="8c1db-141">Пользователи toolet отказаться от бета-версии приложения, например, можно поместить эту ссылку на веб-странице:</span><span class="sxs-lookup"><span data-stu-id="8c1db-141">toolet users opt out of your beta app, for example, you can put this link in your web page:</span></span>

    <a href="<webappname>.azurewebsites.net/?x-ms-routing-name=self">Go back tooproduction app</a>

<span data-ttu-id="8c1db-142">Здравствуйте, строка `x-ms-routing-name=self` указывает hello производственный слот.</span><span class="sxs-lookup"><span data-stu-id="8c1db-142">hello string `x-ms-routing-name=self` specifies hello production slot.</span></span> <span data-ttu-id="8c1db-143">После hello hello ссылки доступа к браузера клиента, не только его перенаправлено toohello производственный слот, но каждый последующий запрос будет содержать hello `x-ms-routing-name=self` файл cookie, который фиксирует hello сеанса toohello производственный слот.</span><span class="sxs-lookup"><span data-stu-id="8c1db-143">Once hello client browser access hello link, not only is it redirected toohello production slot, but every subsequent request will contain hello `x-ms-routing-name=self` cookie that pins hello session toohello production slot.</span></span>

![](./media/app-service-web-test-in-production/05-access-production-slot.png)

### <a name="opt-users-in-toobeta-app"></a><span data-ttu-id="8c1db-144">Выбрать пользователей в приложении toobeta</span><span class="sxs-lookup"><span data-stu-id="8c1db-144">Opt users in toobeta app</span></span>
<span data-ttu-id="8c1db-145">Пользователи toolet согласие tooyour бета-версии приложения, набора hello же запрос имени параметра toohello слота нерабочей hello, например:</span><span class="sxs-lookup"><span data-stu-id="8c1db-145">toolet users opt in tooyour beta app, set hello same query parameter toohello name of hello non-production slot, for example:</span></span>

        <webappname>.azurewebsites.net/?x-ms-routing-name=staging

## <a name="more-resources"></a><span data-ttu-id="8c1db-146">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="8c1db-146">More resources</span></span>
* [<span data-ttu-id="8c1db-147">Настройка промежуточных сред для веб-приложений в службе приложений Azure</span><span class="sxs-lookup"><span data-stu-id="8c1db-147">Set up staging environments for web apps in Azure App Service</span></span>](web-sites-staged-publishing.md)
* [<span data-ttu-id="8c1db-148">Предсказуемое развертывание сложного приложения в Azure</span><span class="sxs-lookup"><span data-stu-id="8c1db-148">Deploy a complex application predictably in Azure</span></span>](app-service-deploy-complex-application-predictably.md)
* [<span data-ttu-id="8c1db-149">Гибкая разработка программного обеспечения с помощью службы приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="8c1db-149">Agile software development with Azure App Service</span></span>](app-service-agile-software-development.md)
* [<span data-ttu-id="8c1db-150">Эффективное использование сред разработки и операций для веб-приложений</span><span class="sxs-lookup"><span data-stu-id="8c1db-150">Use DevOps environments effectively for your web apps</span></span>](app-service-web-staged-publishing-realworld-scenarios.md)

