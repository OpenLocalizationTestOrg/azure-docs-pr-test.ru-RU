---
title: "aaaIntegrate приложения с помощью виртуальной сети Azure"
description: "Показано, как tooconnect приложения в службе приложений Azure tooa новой или существующей виртуальной сети Azure"
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: cephalin
ms.assetid: 90bc6ec6-133d-4d87-a867-fcf77da75f5a
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/23/2017
ms.author: ccompy
ms.openlocfilehash: a93c504481400245b02220b541a008a7c874d10a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="integrate-your-app-with-an-azure-virtual-network"></a>Интеграция приложения с виртуальной сетью Azure
Этот документ описывает функции интеграции виртуальной сети службы приложений Azure hello и показывает, как tooset его с приложениями в [службе приложений Azure](http://go.microsoft.com/fwlink/?LinkId=529714). Если вы не знакомы с Azure виртуальных сетей (Vnet), это возможность, которая позволяет вам tooplace, многие ресурсы Azure в сети routeable не через Интернет, которым можно управлять доступом к. Затем эти сети можно подключенных tooyour локальным сетям с помощью разнообразных технологии виртуальных частных СЕТЕЙ. Дополнительные сведения о виртуальных сетях Azure toolearn начать здесь сведениями hello: [Обзор виртуальной сети Azure][VNETOverview]. 

Hello службе приложений Azure имеет две формы. 

1. Hello систем несколькими клиентами, которые поддерживают полный диапазон hello Тарифные планы
2. Hello среды службы приложений (ASE) premium функции, которая развертывает в виртуальной сети. 

В этом документе рассматривается интеграция с виртуальной сетью, а не среда службы приложений. Дополнительные сведения о функции hello ASE toolearn следует запустить здесь сведениями hello: [введение среды службы приложений][ASEintro].

Интеграция виртуальной сети позволяет tooresources доступ приложения к web в виртуальной сети, но не предоставляет доступ к закрытому tooyour веб-приложения hello в виртуальной сети. Доступ к закрытым узлу ссылается toomaking приложение доступно только из частной сети как из внутри виртуальной сети Azure. Доступ к частным сайтам возможен, только если для ASE настроен внутренний балансировщик нагрузки (ILB). Дополнительные сведения об использовании ILB ASE приступить к статье hello здесь: [Создание и использование ILB ASE][ILBASE]. 

Общие сценарии, где используется Интеграция виртуальной сети Включение доступа из вашего веб-приложения tooa база данных или веб-службы, выполняемой на виртуальной машине в виртуальной сети Azure. Благодаря интеграции виртуальной сети вам не требуется tooexpose общедоступную конечную точку для приложений на виртуальной Машине, но вместо этого можно использовать частные адреса маршрутизируемый hello не через Интернет. 

Функция интеграции виртуальной сети Hello:

* требуется тарифный план "Стандартный", "Премиум" или "Isolated"; 
* работает с классической виртуальной сетью или с виртуальной сетью Resource Manager; 
* поддерживает TCP и UDP;
* поддерживается веб-приложениями, мобильными приложениями и приложениями API;
* включает tooonly tooconnect приложение 1 виртуальной сети одновременно
* включает копирование toofive toobe виртуальных сетей, интегрировать в план служб приложений 
* позволяет hello toobe же виртуальной сети, используемой нескольких приложений в план служб приложений
* поддерживает 99,9% SLA, из-за toohello соглашения об уровне ОБСЛУЖИВАНИЯ для hello шлюза виртуальной сети

Функции, не поддерживаемые при интеграции с виртуальной сетью:

* подключение диска;
* интеграция с AD; 
* NetBios;
* доступ к частным сайтам.

### <a name="getting-started"></a>Приступая к работе
Ниже приведены некоторые вещи tookeep учитывать перед подключением виртуальной сети tooa приложения web.

* К виртуальной сети можно подключить только приложения тарифного плана **Стандартный**, **Премиум** или **Isolated**. Если включить функцию hello, а затем масштабирование вашей tooan план обслуживания приложений не поддерживается ценовой план приложений потерять свои подключения toohello виртуальных сетей, они используют. 
* Целевой виртуальной сети уже существует, должно иметь точка сеть VPN с включенной с шлюз динамической маршрутизации может быть подключенным tooan приложения. Если для шлюза настроена статическая маршрутизация, то подключение виртуальной частной сети типа "точка — сеть" (VPN) невозможно активировать.
* Hello виртуальной сети должны находиться в hello той же подписке, Plan(ASP) службы вашего приложения. 
* Hello приложений, которые интегрируются с виртуальной сети используйте hello DNS, которая указана для этой виртуальной сети.
* По умолчанию приложения интеграции только направлять трафик в виртуальной сети на основе маршрутов hello, которые определены в виртуальной сети. 

## <a name="enabling-vnet-integration"></a>Включение интеграции с виртуальной сетью
В этом документе основное внимание уделено главным образом с помощью hello портал Azure для интеграции виртуальной сети. tooenable Интеграция виртуальной сети с помощью приложения с помощью PowerShell, следуйте инструкциям hello здесь: [подключения виртуальной сети tooyour приложения с помощью PowerShell][IntPowershell].

У вас есть параметр tooconnect hello приложения tooa новой или существующей виртуальной сети. При создании новой сети в рамках интеграции, затем Кроме toojust Создание hello виртуальной сети, шлюз с динамической маршрутизацией предварительно настраивается автоматически и включена точка tooSite VPN. 

> [!NOTE]
> Настройка интеграции с новой виртуальной сетью может занять несколько минут. 
> 
> 

tooenable Интеграция виртуальной сети, откройте приложение параметров, а затем выберите сеть. пользовательский Интерфейс, который открывает Hello предлагает три сетевые возможности. В этом руководстве подробно описывается только интеграция с виртуальной сетью. Использование гибридных подключений и сред службы приложений вкратце рассматривается в конце документа. 

Если приложение не hello правильный ценовой план, hello пользовательский Интерфейс позволяет tooscale tooa вашего плана, выше цены плана по своему усмотрению.

![][1]

### <a name="enabling-vnet-integration-with-a-pre-existing-vnet"></a>Включение интеграции с существующей виртуальной сетью
Hello пользовательского интерфейса интеграции виртуальной сети позволяет tooselect из списка своих сетей Vnet. Hello классических виртуальных сетей указать для них таких словом hello «Классическая» в виртуальной сети имя следующего toohello круглые скобки. Hello список отсортирован таким образом, что hello виртуальных сетей диспетчера ресурсов являются первыми. В hello изображения, приведенные ниже, то можно увидеть, могут быть выбраны только одной виртуальной сети. Виртуальные сети могут быть неактивными в этом списке по разным причинам, например:

* Hello виртуальной сети находится в другой подписке, что доступ к вашей учетной записи
* Hello виртуальной сети не поддерживает точки tooSite включена
* Hello виртуальной сети нет шлюза с динамической маршрутизацией

![][2]

Интеграция tooenable просто щелкнуть hello нужно toointegrate с виртуальной сети. После выбора hello виртуальной сети, приложение автоматически перезапускается для эффекта tootake изменения hello. 

##### <a name="enable-point-toosite-in-a-classic-vnet"></a>Включить tooSite точки в классической виртуальной сети
Если виртуальной сети нет шлюза, и не имеет точки tooSite, то должны будете tooset первый элемент вверх. go toodo для классической виртуальной сети, toohello [портал Azure] [ AzurePortal] , чтобы вызвать список виртуальных Networks(classic) hello. Щелкните здесь, hello сети toointegrate с и щелкните на hello большое поле Essentials называется VPN-подключений. Здесь можно создать точки toosite VPN и даже заставить его создать шлюз. После перехода по toosite точки hello навыки создания шлюза будет около 30 минут, прежде чем будет готов к работе. 

![][8]

##### <a name="enabling-point-toosite-in-a-resource-manager-vnet"></a>Включение точки tooSite в диспетчер ресурсов виртуальной сети
tooconfigure виртуальная сеть диспетчера ресурсов с шлюза и tooSite точки PowerShell можно использовать либо как описано здесь [Настройка точки сайтами подключения tooa виртуальной сети с помощью PowerShell] [ V2VNETP2S] или использовать hello портал Azure как описано здесь [Настройка точки сайтами соединения tooa виртуальной сети с помощью портала Azure "hello"][V2VNETPortal]. Hello tooperform пользовательского интерфейса эта возможность еще не доступны. Помните, что вы должны toocreate сертификаты для конфигурации точки tooSite hello. Это настраивается автоматически при подключении к веб-приложение toohello виртуальной сети. 

### <a name="creating-a-pre-configured-vnet"></a>Создание предварительно настроенной виртуальной сети
Если вы хотите toocreate новую виртуальную сеть, в которой настроен шлюз и точки сайтами, hello сети пользовательского интерфейса службы приложений имеет возможность toodo hello, но только для диспетчера ресурсов виртуальной сети. При желании toocreate классической виртуальной сети, шлюз и точка-сайт, затем требуется toodo вручную через пользовательский интерфейс сети hello. 

toocreate диспетчер ресурсов виртуальной сети через hello пользовательского интерфейса интеграции виртуальной сети, просто выберите **создать новую виртуальную сеть** и укажите:

* имя виртуальной сети;
* блок адресов виртуальной сети;
* Имя подсети
* блок адресов подсети;
* блок адресов шлюза;
* блок адресов подключения "точка-сеть".

Если вы хотите tooany tooconnect этой виртуальной сети других сетей, следует избегать, комплектации пространство IP-адресов, который пересекается с этим сетям. 

> [!NOTE]
> Создания диспетчера ресурсов виртуальной сети со шлюзом занимает около 30 минут и в настоящее время не поддерживает интеграцию hello виртуальной сети с приложения. После создания виртуальной сети со шлюзом hello требуется toocome задней tooyour приложение пользовательского интерфейса интеграции виртуальной сети и выберите в новую виртуальную сеть.
> 
> 

![][3]

Виртуальные сети Azure обычно создаются с адресами, принадлежащими к диапазону частных сетей. По умолчанию hello Интеграция виртуальной сети компонент маршрутизирует любого трафика, предназначенного для этих диапазонов IP-адресов в виртуальной сети. приведены Hello частных IP-адресов.

* -Это является hello же, как 10.0.0.0 - 10.0.0.0/8 10.255.255.255
* -Это является hello же, как 172.16.0.0 - 172.16.0.0/12 172.31.255.255 
* -Это является hello же, как 192.168.0.0 - 192.168.0.0/16 192.168.255.255

Hello адресное пространство виртуальной сети должен toobe указаны в нотации CIDR. Если вы не знакомы с помощью нотации CIDR, он является методом для указания блокировок адрес, используя IP-адрес и целое число, представляющее hello маска сети. Например, запись 10.1.0.0/24 представляет 256 адресов, а запись 10.1.0.0/25 — 128 адресов. Для протокола IPv4 маска /32 представляет только один адрес. 

Если заданные hello данные DNS-сервера, который задается для виртуальной сети. После создания виртуальной сети можно изменить эту информацию с пользовательским интерфейсом hello виртуальной сети. Если изменить hello DNS hello виртуальной сети, должны tooperform синхронизации сетевую операцию.

При создании классической виртуальной сети, с помощью hello пользовательского интерфейса интеграции виртуальной сети, он создает виртуальную сеть в hello же группе ресурсов приложения. 

## <a name="how-hello-system-works"></a>Как работает система hello
На деле hello эта функция строится на основе технологии tooconnect точка-сеть VPN вашего приложения tooyour виртуальной сети. Приложения в службе приложений Azure имеют мультитенантную архитектуру, которая не позволяет подготовить приложение непосредственно в виртуальной сети, как это происходит с виртуальными машинами. С опорой на технологии точка сеть ограничена сетевого доступа toojust hello размещения виртуальных машин приложение hello. Сетевой доступ к toohello ограничивается на этих узлах приложения, чтобы ваши приложения доступны только сети hello, настройте их tooaccess. 

![][4]

Если вы еще не настроили DNS-сервер виртуальную сеть, вашему приложению потребуется tooreach toouse IP-адреса ресурса в hello виртуальной сети. При использовании IP-адреса, помните, что hello основных преимуществ этой возможности, он позволяет toouse hello частных адресов в частной сети. Здравствуйте, при установке приложения вверх toouse общих IP-адресов для одного из виртуальных машин, то неиспользуемые функции hello интеграции виртуальной сети и обмениваются данными через Интернет.

## <a name="managing-hello-vnet-integrations"></a>Управление hello интеграции виртуальной сети
Здравствуйте, возможность tooconnect и отключите tooa виртуальной сети находится на уровне приложения. Операции, которые могут повлиять на hello Интеграция виртуальной сети для нескольких приложений, на уровне ASP. Сведения можно получить из hello пользовательского интерфейса, который отображается на уровне приложения hello в вашей виртуальной сети. Большинство приветствия же информация также отображается в hello ASP-уровня. 

![][5]

На странице состояния компонентов сети hello можно увидеть, если приложение будет tooyour подключенной виртуальной сети. Если шлюз виртуальной сети по какой-либо причине не работает, здесь будет указано, что подключение не установлено. 

сведения Hello, теперь у вас есть доступные tooyou в приложение hello уровня пользовательского интерфейса интеграции виртуальной сети является hello же hello подробных сведений, получаемых из hello ASP. Они представлены ниже.

* Имя виртуальной сети - эта ссылка открывает hello виртуальной сети Azure пользовательского интерфейса
* Расположение — это отражает hello расположение виртуальной сети. Это возможно toointegrate с виртуальной сети в другом месте.
* Состояние сертификата — существуют сертификаты, используемые toosecure hello VPN-подключение между приложение hello и hello виртуальной сети. Это отражает tooensure тестирования, они находятся в синхронизированном состоянии.
* Состояние шлюза — следует шлюзов не работает для какой-либо причине затем приложение не может обращаться к ресурсам hello виртуальной сети. 
* Адресное пространство виртуальной сети — это hello пространство IP-адресов для виртуальной сети. 
* Адресное пространство tooSite точка - это пространство IP-адресов hello toosite точки для виртуальной сети. Приложение отображает действия как поступающие от одного hello IP-адреса в этом адресном пространстве. 
* Адресное пространство сайта toosite - можно использовать узел tooSite VPN tooconnect вашей виртуальной сети tooyour локальных ресурсов или tooother виртуальной сети. При возникновении настроенной затем определенные диапазоны IP-адресов hello с здесь показано VPN-подключения.
* DNS-серверы. Здесь перечислены DNS-серверы, настроенные для виртуальной сети.
* IP-адреса, перенаправленные toohello виртуальной сети — существует список IP-адресов виртуальной сети имеет маршрутизации, определенные для, и эти адреса будут отображены здесь. 

Hello только операции, выполняемые в режиме приложения hello интеграции вашей виртуальной сети является toodisconnect приложения hello в настоящее время он подключен к виртуальной сети. Отключить это просто щелкните вверху hello toodo. Это действие не изменяет настройки виртуальной сети. Hello виртуальной сети и его конфигурацией, включая шлюзы hello остается неизменным. Если вы захотите toodelete виртуальной сети, необходимо toofirst delete hello ресурсы, в том числе шлюзы hello. 

Hello план служб приложений представление имеет ряд дополнительных операций. Он также осуществляется иначе, чем из приложение hello. hello tooreach пользовательского интерфейса сети ASP просто открыть пользовательский Интерфейс ASP и прокрутите страницу вниз. Здесь вы увидите элемент интерфейса «Состояние компонентов сети». Он содержит некоторые краткие сведения, имеющие отношение к интеграции с виртуальной сетью. Если выбрать этот пользовательский Интерфейс откроется hello пользовательского интерфейса состояние компонентов сети. Если затем выбрать на «щелкните здесь toomanage», hello пользовательский Интерфейс, который перечисляет hello открывается интеграции виртуальной сети в этой среде ASP.

![][6]

Hello hello ASP находится хорошо tooremember при просмотре hello расположения hello виртуальных сетей можно интегрировать с. Является намного более вероятно проблемы задержки toosee hello виртуальной сети находится в другом месте. 

Hello виртуальных сетей, интегрировать является напоминание на количество виртуальных сетей, приложений встроены в этом ASP и сколько может быть. 

toosee добавлены сведения в каждой виртуальной сети, просто нажмите кнопку на hello виртуальной сети, которые вас интересуют. В дополнение к этому toohello сведения, которые были уже отмечалось ранее, также появится список приложения hello в этой среде ASP, которые используются этой виртуальной сети. 

С учетом tooactions существует — это два источника действия. Во-первых, Hello является hello возможность tooadd маршруты, диск трафика, оставляя приложение в виртуальной сети. второе действие Hello — hello возможность toosync сертификаты и сведения о сети.

![][7]

**Маршрутизация** как уже отмечалось hello маршруты, которые определены в виртуальной сети, используемой для перенаправления трафика в сети из приложения. Хотя клиенты место toosend дополнительных исходящий трафик из приложения в виртуальной сети hello и для них эта возможность предоставляется существуют некоторые варианты. Что происходит toohello трафика после toohow hello клиента настраивает их виртуальной сети. 

**Сертификаты** hello состояние сертификата отражает проверку, выполняемой hello hello сертификаты, которые мы используем для hello VPN-подключение по-прежнему подходят toovalidate службы приложений. При включении интеграции виртуальной сети, если это hello первой интеграции toothat виртуальной сети из любого приложения в этой среде ASP существует, не требуется exchange сертификаты tooensure hello безопасности подключения hello. Вместе с сертификатами hello получить конфигурацию DNS hello, маршрутов и прочего аналогичные, описывающие hello сети.
При изменении этих сертификатов или сведения о сети, вы должны tooclick «Network синхронизации». **Примечание**. Выполнение синхронизации с сетью сопровождается кратковременной потерей подключения между приложением и виртуальной сетью. Пока приложение не перезагружается, hello потеря подключения может привести к функции toonot сайта должным образом. 

## <a name="accessing-on-premises-resources"></a>Доступ к локальным ресурсам
Одним из преимуществ hello hello компонент интеграции виртуальной сети является, если подключение виртуальной сети tooyour в локальной сети с сайта tooSite VPN затем приложения могут иметь доступ к ресурсам в локальной tooyour из приложения. Для этого toowork на то, что может потребоваться tooupdate локального шлюза VPN с hello направляет для диапазона IP-вашей tooSite точки. При первой настройке сайта hello tooSite VPN, а затем использовать сценарии hello tooconfigure следует настроить маршруты, включая точки tooSite VPN. При добавлении hello VPN tooSite точки после создания вашего сайта tooSite VPN требуется tooupdate hello маршруты вручную. Сведения о как toodo зависит от конкретного шлюза, не описанные здесь. 

> [!NOTE]
> Функция интеграции виртуальной сети Hello не интегрировать приложения виртуальную сеть, которая имеет шлюз ExpressRoute. Даже если настроена hello шлюз ExpressRoute [режим сосуществования] [ VPNERCoex] hello Интеграция виртуальной сети не работает. Если требуется tooaccess ресурсам через подключение ExpressRoute, то можно использовать [среды службы приложений][ASE], который выполняется в виртуальной сети.
> 
> 

## <a name="pricing-details"></a>Сведения о тарифах
Существуют некоторые особенности, которые следует иметь в виду при использовании компонента интеграции виртуальной сети hello цены. Существует 3 связанных плата toohello использование этой функции:

* требования к ценовой категории плана ASP;
* расходы, связанные с передачей данных;
* расходы, связанные с использованием VPN-шлюза.

Для вашего приложения, toobe может toouse эту функцию, они должны toobe в Standard или Premium плана. Дополнительные сведения о ценах на планы см. на странице [цен на службу приложений][ASPricing]. 

Из-за toohello образом обрабатываются VPN tooSite точки, всегда необходимо плата для исходящих данных через подключение к виртуальной сети интеграции даже если hello виртуальной сети находится в hello же центре обработки данных. toosee каковы эти расходы, посмотрите здесь: [передать сведения о ценах данных][DataPricing]. 

последний элемент Hello является стоимость hello hello шлюзов виртуальной сети. Если вам не нужен hello шлюзы для других целей, например сайта tooSite VPN, вы платите для функции интеграции виртуальной сети hello toosupport шлюзов. Сведения о связанных расценках см. на странице [Цены — VPN-шлюзы][VNETPricing]. 

## <a name="troubleshooting"></a>Устранение неполадок
Хотя функция hello легко tooset вверх, это не означает, что работу будет проблемы свободного. Должно возникать проблемы с доступом к требуемой конечной являются некоторые программы, можно использовать подключение tootest из консольного приложения hello. Есть два варианта использования консоли: Одна из консоли Kudu hello а hello других — hello консоли, можно достичь в hello портал Azure. консоль Kudu toohello tooget из приложения перейдите tooTools -> Kudu. Это является Здравствуйте таким же, как происходит слишком [имя_узла]. scm.azurewebsites.net. После этого откроется просто перейдите toohello отладки консоли вкладку tooget toohello портала размещенного консоли Azure из приложения перейдите tooTools -> консоль. 

#### <a name="tools"></a>Средства
проверку связи со средствами Hello, nslookup и tracert не будет работать через консоль hello из-за ограничений toosecurity. существует void hello toofill были добавлены два средства. Порядок tootest DNS функциональные возможности, мы добавили средство с именем nameresolver.exe. используется синтаксис Hello:

    nameresolver.exe hostname [optional: DNS Server]

Можно использовать имена узлов nameresolver toocheck hello зависит от приложения. Таким образом, вы можете протестировать Если каким-либо неправильно настроен в DNS или возможно, нет доступа к tooyour DNS-сервер.

Далее программы Hello можно tootest для подключения tooa узла и порта комбинацией TCP. Это средство называется tcpping.exe и hello синтаксис:

    tcpping.exe hostname [optional: port]

Программа Hello tcpping сообщает, если можно достичь определенного узла и порт. Он может отображаться только успех при: приложение ожидает комбинация hello узла и порта, и нет доступа к сети из приложения toohello указанного узла и порт.

#### <a name="debugging-access-toovnet-hosted-resources"></a>Отладка tooVNet доступа к размещенным ресурсам
У приложения могут возникнуть проблемы с доступом к определенной комбинации «узел:порт». Это происходит по многим причинам. Большую часть времени hello это одно из трех действий:

* **Установлен брандмауэр hello способом** при наличии брандмауэра образом hello столкнутся времени ожидания TCP hello. В нашем случае это 21 секунда. Используйте средство tootest hello tcpping подключения. Время ожидания TCP можно из-за действия toomany за брандмауэрами, но начать прямо отсюда. 
* **DNS не доступен** времени ожидания DNS hello составляет 3 секунды на DNS-сервер. Если у вас есть два DNS-сервера, время ожидания hello — 6 секунд. Используйте nameresolver toosee, если служба DNS работает. Помните, что нельзя использовать nslookup используются hello виртуальная сеть настроена с DNS.
* **Недопустимый диапазон P2S IP** hello toosite точки, диапазон IP-адресов должен toobe в частных IP-диапазонов hello RFC 1918 (10.0.0.0-10.255.255.255 / 172.16.0.0-172.31.255.255 / 192.168.0.0-192.168.255.255). Если диапазон hello использует IP-адреса за пределами, действий не будет работать. 

Если эти элементы не получить ответ на проблему, найдите первый hello простой вопросах: 

* Показывать hello шлюза как если бы hello портала?
* Синхронизированы ли сертификаты?
* Был любой пользователь без выполнения «синхронизации в сети с» hello затронутых страницы ASP изменен hello сетевая конфигурация 

Если шлюз не работает, восстановите его работоспособность. Если сертификаты не синхронизированы, перейдите в представление ASP toohello интеграции виртуальной сети и попадания «Network синхронизации». Если есть подозрение, что было изменений конфигурации виртуальной сети tooyour и синхронизации не было бы с вашей страницы ASP, затем перейдите представление ASP toohello интеграции виртуальной сети и попадания просто «Network синхронизации» для напоминания, это приводит к тому короткий перерыв в работе с подключения к виртуальной сети и приложений . 

Если все это нормально, необходимо toodig в немного более глубокого:

* То все другие приложения, использование ресурсов tooreach Интеграция виртуальной сети в hello одной виртуальной сети? 
* Можно перейти toohello консольного приложения и использовать другие ресурсы tcpping tooreach в виртуальной сети? 

Если либо hello выше верны, затем подходит интеграции виртуальной сети и hello проблема заключается в другом месте. Это происходит, когда он получает toobe более сложной задачей из-за не toosee удобное средство, почему не удается достичь узла: порт. Ниже перечислены некоторые причины hello.

* Вы используете брандмауэр на узле Предотвращение доступа к порту приложения toohello от вашей точки toosite IP-диапазон. Для подключения между подсетями часто требуется разрешить общий доступ.
* Целевой узел не работает.
* Целевое приложение не работает.
* необходимо было hello неправильный IP-адрес или имя узла
* Приложение ожидает передачи данных не по тому порту, который предполагается. Это можно проверить, перейдя на этом узле и с помощью «netstat - aon» из командной строки hello. Вы видите идентификаторы процессов и прослушиваемые ими порты. 
* группы безопасности сети настроены таким образом, чтобы они не доступа tooyour приложения узла и порта из диапазона IP toosite точки

Помните, что вы не знаете какой IP к диапазону IP-tooSite точки, которую приложение будет использовать, нужен доступ tooallow из hello весь диапазон. 

Можно выполнить дополнительные действия по отладке.

* Войдите на другой виртуальной Машиной в вашей виртуальной сети и попытки tooreach ресурсов узла: порт оттуда. Это можно сделать с помощью любых служебных программ на основе TCP ping или средства telnet. Hello цель здесь — просто toodetermine при связи с этой виртуальной Машины. 
* подключить приложение на другой виртуальной Машиной и тестирование доступа toothat узла и порта из консоли hello из приложения

#### <a name="on-premises-resources"></a>Локальные ресурсы ####
Если приложение не может достичь локальные ресурсы, первое hello следует проверить это, если можно получить доступ к ресурсу в виртуальной сети. Если это работает, попробуйте tooreach hello локального приложения из виртуальной Машины в виртуальной сети hello. Для этого используйте служебную программу telnet или TCP ping. Если ВМ не удается подключиться к локальному ресурсу, затем убедитесь, что работа сайта tooSite VPN-подключение. Если он работает, проверьте hello и те же действия отмечалось ранее, а также настройки шлюза в локальной среде hello и состояние. 

Теперь если размещенной виртуальной сети виртуальная машина может получить доступ к локальной системе, но приложение не может затем hello причина — это одна из следующих hello:

* Ваш маршруты не настраиваются с помощью диапазонов IP-toosite точки в локального шлюза
* группы безопасности сети блокируют доступ для диапазона IP tooSite точки
* брандмауэры локальной блокируют трафик от вашей точки tooSite IP-диапазон
* у вас есть Route(UDR) определенных пользователей в вашей виртуальной сети, который предотвращает доступ к локальной сети tooSite точки на основе трафика

## <a name="hybrid-connections-and-app-service-environments"></a>Гибридные подключения и среда службы приложений
Существует три функции, позволяющие размещенных tooVNet доступ к ресурсам. К ним относятся:

* интеграция с виртуальной сетью;
* через гибридные подключения
* среда службы приложений.

Гибридные подключения требуется tooinstall агента ретрансляции, вызывается hello Manager(HCM) гибридные подключения в сети. Hello HCM должен tooAzure может tooconnect toobe, а также tooyour приложения. Это решение особенно удобно для доступа из удаленной сети (локальной или другой облачной сети), так как для него не требуется конечная точка, доступная из Интернета. Hello HCM выполняется только в Windows и может содержать до экземпляров toofive, выполняющихся tooprovide высокого уровня доступности. Гибридные подключения поддерживает только TCP хотя и каждая конечная точка Контроллер имеет toomatch tooa конкретного узла: порт сочетания. 

Hello среды службы приложений позволяет toorun экземпляр hello службе приложений Azure в виртуальной сети. Приложение получает доступ к ресурсам виртуальной сети без каких-либо дополнительных действий. Некоторые из hello другие преимущества среды службы приложений являются, которые можно использовать на основе Dv2 работников вверх too14 ГБ ОЗУ. Дополнительным преимуществом является то, что можно масштабировать toomeet системы hello вашим потребностям. В отличие от hello несколькими клиентами средах, где ваш ASP является ограниченной too20 экземпляров в ASE можно увеличивать масштаб too100 ASP экземпляров. Одно из действий hello, получаемых с ASE, не с помощью интеграции виртуальной сети — работы среды службы приложений с помощью VPN ExpressRoute. 

Хотя существуют некоторые использовать перекрытие case, ни один из этих компонентов можно заменить любой hello другим пользователям. Изучения, какие функции toouse связанные tooyour потребностей. Например:

* Если разработчик и просто хотите toorun сайта в Azure и имеют доступ к базе данных hello на рабочей станции hello в службу поддержки гибридных подключений является простым самое toouse hello. 
* Если вы используете крупной организации, в которой необходимо tooput большое количество веб-свойства в общедоступном облаке hello и управлять ими в своей сети, вы хотите toogo с hello среды службы приложений. 
* Если имеется несколько приложений службы размещенных приложений просто tooaccess ресурсы в сети, необходимо будет toogo hello способ интеграции виртуальной сети. 

Помимо варианты использования hello, существуют некоторые простоты связанных аспекты. Если ваша виртуальная сеть уже подключен tooyour в локальной сети, затем с помощью интеграции виртуальной сети или среды службы приложений — это простой tooconsume локальным ресурсам. На hello другой стороны, если ваша виртуальная сеть не подключен tooyour локальной сети, то дополнительных издержек на tooset копии сайта toosite VPN с виртуальной сетью по сравнению с установкой hello HCM с большим. 

Далее Здравствуйте функциональные различия, также цены различия. функция Hello среды службы приложений — это служба Premium, предложения, кроме предложений hello большинства вариантов настройки сети в дополнение к этому tooother замечательных функций. Интеграция виртуальной сети можно использовать с Standard или Premium страницы ASP и идеально подходит для безопасного потребление ресурсов в виртуальной сети с несколькими клиентами hello службы приложений. Гибридные подключения в настоящее время зависит от учетной записи, которая имеет ценам, запустить свободного и затем получить постепенно дороже, исходя из суммы hello нужные BizTalk. Что касается tooworking через несколько сетей Впрочем, другие возможность как гибридные подключения, который можно включить ресурсы tooaccess свыше 100 раздельные сети отсутствует. 

<!--Image references-->
[1]: ./media/web-sites-integrate-with-vnet/vnetint-upgradeplan.png
[2]: ./media/web-sites-integrate-with-vnet/vnetint-existingvnet.png
[3]: ./media/web-sites-integrate-with-vnet/vnetint-createvnet.png
[4]: ./media/web-sites-integrate-with-vnet/vnetint-howitworks.png
[5]: ./media/web-sites-integrate-with-vnet/vnetint-appmanage.png
[6]: ./media/web-sites-integrate-with-vnet/vnetint-aspmanage.png
[7]: ./media/web-sites-integrate-with-vnet/vnetint-aspmanagedetail.png
[8]: ./media/web-sites-integrate-with-vnet/vnetint-vnetp2s.png

<!--Links-->
[VNETOverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-overview/ 
[AzurePortal]: http://portal.azure.com/
[ASPricing]: http://azure.microsoft.com/pricing/details/app-service/
[VNETPricing]: http://azure.microsoft.com/pricing/details/vpn-gateway/
[DataPricing]: http://azure.microsoft.com/pricing/details/data-transfers/
[V2VNETP2S]: http://azure.microsoft.com/documentation/articles/vpn-gateway-howto-point-to-site-rm-ps/
[IntPowershell]: http://azure.microsoft.com/documentation/articles/app-service-vnet-integration-powershell/
[ASEintro]: http://docs.microsoft.com/azure/app-service/app-service-environment/intro
[ILBASE]: http://docs.microsoft.com/azure/app-service/app-service-environment/create-ilb-ase
[V2VNETPortal]: https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal
[VPNERCoex]: http://docs.microsoft.com/en-us/azure/expressroute/expressroute-howto-coexist-resource-manager
[ASE]: http://docs.microsoft.com/azure/app-service/app-service-environment/intro
