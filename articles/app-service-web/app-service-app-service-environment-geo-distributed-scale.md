---
title: "aaaGeo масштаба распределенных со среды службы приложений"
description: "Узнайте, как toohorizontally масштабирование приложений с помощью географического распределения с диспетчера трафика и среды службы приложения."
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: c1b05ca8-3703-4d87-a9ae-819d741787fb
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/07/2016
ms.author: stefsch
ms.openlocfilehash: 9b441f637d8b7f679b3d83240baf99b8ee57e8f3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="geo-distributed-scale-with-app-service-environments"></a><span data-ttu-id="e029b-103">Географически распределенное масштабирование с использованием сред службы приложений</span><span class="sxs-lookup"><span data-stu-id="e029b-103">Geo Distributed Scale with App Service Environments</span></span>
## <a name="overview"></a><span data-ttu-id="e029b-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="e029b-104">Overview</span></span>
<span data-ttu-id="e029b-105">Сценарии приложений, которым требуется очень высокий уровень масштабирования может превышать hello вычислительных ресурсов емкости доступных tooa одного развертывания приложения.</span><span class="sxs-lookup"><span data-stu-id="e029b-105">Application scenarios which require very high scale can exceed hello compute resource capacity available tooa single deployment of an app.</span></span>  <span data-ttu-id="e029b-106">К примерам таких сценариев относятся проведение голосования, организация спортивных событий и телевизионных трансляций.</span><span class="sxs-lookup"><span data-stu-id="e029b-106">Voting applications, sporting events, and televised entertainment events are all examples of scenarios that require extremely high scale.</span></span> <span data-ttu-id="e029b-107">Можно выполнить требований высокой масштабируемостью, горизонтальное масштабирование приложений, с несколькими развертываниями приложений, внесенного в одном регионе, а также по регионам, требования к чрезмерной нагрузки toohandle.</span><span class="sxs-lookup"><span data-stu-id="e029b-107">High scale requirements can be met by horizontally scaling out apps, with multiple app deployments being made within a single region, as well as across regions, toohandle extreme load requirements.</span></span>

<span data-ttu-id="e029b-108">Идеальной платформой для горизонтального масштабирования являются среды службы приложений.  После выбора конфигурации среды службы приложений, может поддерживать скорость известных запроса, разработчики могут развертывать дополнительные среды службы приложения в форме «штампа» tooattain требуемой пиковую нагрузки.</span><span class="sxs-lookup"><span data-stu-id="e029b-108">App Service Environments are an ideal platform for horizontal scale out.  Once an App Service Environment configuration has been selected that can support a known request rate, developers can deploy additional App Service Environments in "cookie cutter" fashion tooattain a desired peak load capacity.</span></span>

<span data-ttu-id="e029b-109">Например, предположим, что приложение, запущенное на конфигурации среды службы приложений была протестированных toohandle 20 КБ запросов в секунду.</span><span class="sxs-lookup"><span data-stu-id="e029b-109">For example suppose an app running on an App Service Environment configuration has been tested toohandle 20K requests per second (RPS).</span></span>  <span data-ttu-id="e029b-110">Если hello требуемой пиковой нагрузки емкость составляет 100 КБ RPS, среды службы приложения пяти (5) могут быть созданы и настроенного tooensure hello приложение может обрабатывать максимальной нагрузки проецируемых hello.</span><span class="sxs-lookup"><span data-stu-id="e029b-110">If hello desired peak load capacity is 100K RPS, then five (5) App Service Environments can be created and configured tooensure hello application can handle hello maximum projected load.</span></span>

<span data-ttu-id="e029b-111">Поскольку клиенты обычно доступ приложений с помощью настраиваемых (или именного) домена, разработчики должны приложении toodistribute способом запросов для всех экземпляров среды службы приложения hello.</span><span class="sxs-lookup"><span data-stu-id="e029b-111">Since customers typically access apps using a custom (or vanity) domain, developers need a way toodistribute app requests across all of hello App Service Environment instances.</span></span>  <span data-ttu-id="e029b-112">Хорошим способом tooaccomplish, это с помощью пользовательского домена hello tooresolve [профиль диспетчера трафика Azure][AzureTrafficManagerProfile].</span><span class="sxs-lookup"><span data-stu-id="e029b-112">A great way tooaccomplish this is tooresolve hello custom domain using an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="e029b-113">Hello диспетчера трафика профиль может быть настроенный toopoint всех hello соответствующей среды службы приложения.</span><span class="sxs-lookup"><span data-stu-id="e029b-113">hello Traffic Manager profile can be configured toopoint at all of hello individual App Service Environments.</span></span>  <span data-ttu-id="e029b-114">Диспетчер трафика автоматически будет обрабатывать распределение клиентов по всем hello среды службы приложения в зависимости от параметров в профиле диспетчера трафика hello балансировки нагрузки hello.</span><span class="sxs-lookup"><span data-stu-id="e029b-114">Traffic Manager will automatically handle distributing customers across all of hello App Service Environments based on hello load balancing settings in hello Traffic Manager profile.</span></span>  <span data-ttu-id="e029b-115">Такой подход работает независимо от того все среды службы приложения hello будут развернуты в одном регионе Azure, или по нескольким регионам Azure, развернутым по всему миру.</span><span class="sxs-lookup"><span data-stu-id="e029b-115">This approach works regardless of whether all of hello App Service Environments are deployed in a single Azure region, or deployed worldwide across multiple Azure regions.</span></span>

<span data-ttu-id="e029b-116">Кроме того поскольку клиентам получать доступ к приложениям через hello именного домена, клиенты, независимо от числа hello среды службы приложений, запуск приложения.</span><span class="sxs-lookup"><span data-stu-id="e029b-116">Furthermore, since customers access apps through hello vanity domain, customers are unaware of hello number of App Service Environments running an app.</span></span>  <span data-ttu-id="e029b-117">Поэтому разработчики могут быстро добавлять и удалять среды службы приложений в зависимости от ожидаемого трафика.</span><span class="sxs-lookup"><span data-stu-id="e029b-117">As a result developers can quickly and easily add, and remove, App Service Environments based on observed traffic load.</span></span>

<span data-ttu-id="e029b-118">Hello концептуальной приведенной ниже схеме показан приложения горизонтально масштабировать по три среды службы приложения в одном регионе.</span><span class="sxs-lookup"><span data-stu-id="e029b-118">hello conceptual diagram below depicts an app horizontally scaled out across three App Service Environments within a single region.</span></span>

![Концепция архитектуры][ConceptualArchitecture] 

<span data-ttu-id="e029b-120">Hello оставшейся части этого раздела вы научитесь hello действия, связанные с настройкой распределенной топологии для примера приложения hello, с помощью нескольких средах службы приложений.</span><span class="sxs-lookup"><span data-stu-id="e029b-120">hello remainder of this topic walks through hello steps involved with setting up a distributed topology for hello sample app using multiple App Service Environments.</span></span>

## <a name="planning-hello-topology"></a><span data-ttu-id="e029b-121">Планирование топологии hello</span><span class="sxs-lookup"><span data-stu-id="e029b-121">Planning hello Topology</span></span>
<span data-ttu-id="e029b-122">Перед построением out объем распределенного приложения, он помогает toohave несколько частей сведения заранее.</span><span class="sxs-lookup"><span data-stu-id="e029b-122">Before building out a distributed app footprint, it helps toohave a few pieces information ahead of time.</span></span>

* <span data-ttu-id="e029b-123">**Пользовательский домен, чтобы приложение hello:** возможности hello пользовательское доменное имя, что клиенты будут использовать приложение hello tooaccess?</span><span class="sxs-lookup"><span data-stu-id="e029b-123">**Custom domain for hello app:**  What is hello custom domain name that customers will use tooaccess hello app?</span></span>  <span data-ttu-id="e029b-124">Имя для пользовательского домена приложения образец hello hello — *www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="e029b-124">For hello sample app hello custom domain name is *www.scalableasedemo.com*</span></span>
* <span data-ttu-id="e029b-125">**Домен диспетчера трафика:** имя домена должно toobe, выбранных при создании [профиль диспетчера трафика Azure][AzureTrafficManagerProfile].</span><span class="sxs-lookup"><span data-stu-id="e029b-125">**Traffic Manager domain:**  A domain name needs toobe chosen when creating an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="e029b-126">Это имя будет добавляться к hello *trafficmanager.net* суффикс tooregister запись домена, который управляется диспетчером трафика.</span><span class="sxs-lookup"><span data-stu-id="e029b-126">This name will be combined with hello *trafficmanager.net* suffix tooregister a domain entry that is managed by Traffic Manager.</span></span>  <span data-ttu-id="e029b-127">Для примера приложения hello, — имя выбранного hello *масштабируемой ase Демонстрация*.</span><span class="sxs-lookup"><span data-stu-id="e029b-127">For hello sample app, hello name chosen is *scalable-ase-demo*.</span></span>  <span data-ttu-id="e029b-128">В результате будет hello полное доменное имя, которое управляется диспетчером трафика *масштабируемой ase demo.trafficmanager.net*.</span><span class="sxs-lookup"><span data-stu-id="e029b-128">As a result hello full domain name that is managed by Traffic Manager is *scalable-ase-demo.trafficmanager.net*.</span></span>
* <span data-ttu-id="e029b-129">**Стратегии для масштабирования занимаемое место приложение hello:** будут распространяться место, занимаемое приложением hello в нескольких средах службы приложений в одном регионе?</span><span class="sxs-lookup"><span data-stu-id="e029b-129">**Strategy for scaling hello app footprint:**  Will hello application footprint be distributed across multiple App Service Environments in a single region?</span></span>  <span data-ttu-id="e029b-130">в нескольких регионах,</span><span class="sxs-lookup"><span data-stu-id="e029b-130">Multiple regions?</span></span>  <span data-ttu-id="e029b-131">или вы будете применять гибридный подход?</span><span class="sxs-lookup"><span data-stu-id="e029b-131">A mix-and-match of both approaches?</span></span>  <span data-ttu-id="e029b-132">где трафик клиента будет получен, а также как хорошо hello остальной части приложения, поддерживающие серверной инфраструктуры можно масштабировать ожидания должен быть основан Hello принятия решений.</span><span class="sxs-lookup"><span data-stu-id="e029b-132">hello decision should be based on expectations of where customer traffic will originate, as well as how well hello rest of an app's supporting back-end infrastructure can scale.</span></span>  <span data-ttu-id="e029b-133">Например, приложение, не хранящее сведения о состоянии, можно масштабировать, развернув конфигурацию из нескольких сред службы приложений в одном регионе, а также в нескольких регионах Azure.</span><span class="sxs-lookup"><span data-stu-id="e029b-133">For example, with a 100% stateless application, an app can be massively scaled using a combination of multiple App Service Environments per Azure region,  multiplied by App Service Environments deployed across multiple Azure regions.</span></span>  <span data-ttu-id="e029b-134">С 15 + открытый регионах Azure доступны toochoose из клиентам действительно создавать объем мире крупномасштабных приложений.</span><span class="sxs-lookup"><span data-stu-id="e029b-134">With 15+ public Azure regions available toochoose from, customers can truly build a world-wide hyper-scale application footprint.</span></span>  <span data-ttu-id="e029b-135">Для пример приложения hello, используется для данной статьи три среды службы приложения были созданы в одном регионе Azure (Юг центральной части США).</span><span class="sxs-lookup"><span data-stu-id="e029b-135">For hello sample app used for this article, three App Service Environments were created in a single Azure region (South Central US).</span></span>
* <span data-ttu-id="e029b-136">**Соглашения об именовании для среды службы приложения hello:** Each среды службы приложений требует уникального имени.</span><span class="sxs-lookup"><span data-stu-id="e029b-136">**Naming convention for hello App Service Environments:**  Each App Service Environment requires a unique name.</span></span>  <span data-ttu-id="e029b-137">За один или два среды службы приложения является полезным toohave соглашение об именовании toohelp идентификации каждой среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="e029b-137">Beyond one or two App Service Environments it is helpful toohave a naming convention toohelp identify each App Service Environment.</span></span>  <span data-ttu-id="e029b-138">Пример приложения hello была использована простая соглашение об именовании.</span><span class="sxs-lookup"><span data-stu-id="e029b-138">For hello sample app a simple naming convention was used.</span></span>  <span data-ttu-id="e029b-139">Hello среды службы приложения hello трех называются *fe1ase*, *fe2ase*, и *fe3ase*.</span><span class="sxs-lookup"><span data-stu-id="e029b-139">hello names of hello three App Service Environments are *fe1ase*, *fe2ase*, and *fe3ase*.</span></span>
* <span data-ttu-id="e029b-140">**Соглашения об именовании для приложения hello:** так, как будет выполнено несколько экземпляров приложения hello, требуется указать имя для каждого экземпляра приложения hello развертывания.</span><span class="sxs-lookup"><span data-stu-id="e029b-140">**Naming convention for hello apps:**  Since multiple instances of hello app will be deployed, a name is needed for each instance of hello deployed app.</span></span>  <span data-ttu-id="e029b-141">Один малоизвестных, но очень удобное средство среды службы приложения является, имя приложения может использоваться в нескольких средах службы приложения hello.</span><span class="sxs-lookup"><span data-stu-id="e029b-141">One little-known but very convenient feature of App Service Environments is that hello same app name can be used across multiple App Service Environments.</span></span>  <span data-ttu-id="e029b-142">Поскольку каждый среды службы приложений имеет уникальный доменный суффикс, разработчики могут выбрать использование toore hello точное имя приложения в каждой среде.</span><span class="sxs-lookup"><span data-stu-id="e029b-142">Since each App Service Environment has a unique domain suffix, developers can choose toore-use hello exact same app name in each environment.</span></span>  <span data-ttu-id="e029b-143">Например, разработчик может назвать приложения так: *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net* и т. п.  Для примера приложения hello хотя каждый экземпляр приложения также имеет уникальное имя.</span><span class="sxs-lookup"><span data-stu-id="e029b-143">For example a developer could have apps named as follows:  *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net*, etc.  For hello sample app though each app instance also has a unique name.</span></span>  <span data-ttu-id="e029b-144">Hello приложения экземпляра называются *webfrontend1*, *webfrontend2*, и *webfrontend3*.</span><span class="sxs-lookup"><span data-stu-id="e029b-144">hello app instance names used are *webfrontend1*, *webfrontend2*, and *webfrontend3*.</span></span>

## <a name="setting-up-hello-traffic-manager-profile"></a><span data-ttu-id="e029b-145">Настройка hello профиля диспетчера трафика</span><span class="sxs-lookup"><span data-stu-id="e029b-145">Setting up hello Traffic Manager Profile</span></span>
<span data-ttu-id="e029b-146">После развертывания в нескольких средах службы приложений несколько экземпляров приложения hello отдельным приложениям экземпляры могут быть зарегистрированы с помощью диспетчера трафика.</span><span class="sxs-lookup"><span data-stu-id="e029b-146">Once multiple instances of an app are deployed on multiple App Service Environments, hello  individual app instances can be registered with Traffic Manager.</span></span>  <span data-ttu-id="e029b-147">Пример приложения hello диспетчера трафика профиль необходима для *масштабируемой ase demo.trafficmanager.net* , можно направить экземпляров приложения tooany из hello после развертывания клиентов:</span><span class="sxs-lookup"><span data-stu-id="e029b-147">For hello sample app a Traffic Manager profile is needed for *scalable-ase-demo.trafficmanager.net* that can route customers tooany of hello following deployed app instances:</span></span>

* <span data-ttu-id="e029b-148">**webfrontend1.fe1ase.p.azurewebsites.NET:** экземпляр пример приложения hello, развернутый на hello первый среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="e029b-148">**webfrontend1.fe1ase.p.azurewebsites.net:**  An instance of hello sample app deployed on hello first App Service Environment.</span></span>
* <span data-ttu-id="e029b-149">**webfrontend2.fe2ase.p.azurewebsites.NET:** экземпляр пример приложения hello, развернутый на hello второй среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="e029b-149">**webfrontend2.fe2ase.p.azurewebsites.net:**  An instance of hello sample app deployed on hello second App Service Environment.</span></span>
* <span data-ttu-id="e029b-150">**webfrontend3.fe3ase.p.azurewebsites.NET:** экземпляр пример приложения hello, развернутый на hello третий среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="e029b-150">**webfrontend3.fe3ase.p.azurewebsites.net:**  An instance of hello sample app deployed on hello third App Service Environment.</span></span>

<span data-ttu-id="e029b-151">Здравствуйте, наиболее простым способом tooregister несколько службе приложений Azure конечных точек, работают в hello **же** регион Azure — с hello Powershell [поддержки диспетчера трафика Azure Resource Manager] [ ARMTrafficManager].</span><span class="sxs-lookup"><span data-stu-id="e029b-151">hello easiest way tooregister multiple Azure App Service endpoints, all running in hello **same** Azure region, is with hello Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

<span data-ttu-id="e029b-152">Hello первым шагом является toocreate профиль диспетчера трафика Azure.</span><span class="sxs-lookup"><span data-stu-id="e029b-152">hello first step is toocreate an Azure Traffic Manager profile.</span></span>  <span data-ttu-id="e029b-153">Hello код демонстрирует, как был создан профиль hello для примера приложения hello:</span><span class="sxs-lookup"><span data-stu-id="e029b-153">hello code below shows how hello profile was created for hello sample app:</span></span>

    $profile = New-AzureTrafficManagerProfile –Name scalableasedemo -ResourceGroupName yourRGNameHere -TrafficRoutingMethod Weighted -RelativeDnsName scalable-ase-demo -Ttl 30 -MonitorProtocol HTTP -MonitorPort 80 -MonitorPath "/"

<span data-ttu-id="e029b-154">Обратите внимание, каким образом hello *RelativeDnsName* параметра было задано слишком*масштабируемой ase Демонстрация*.</span><span class="sxs-lookup"><span data-stu-id="e029b-154">Notice how hello *RelativeDnsName* parameter was set too*scalable-ase-demo*.</span></span>  <span data-ttu-id="e029b-155">Это как hello доменное имя *масштабируемой ase demo.trafficmanager.net* и связывается с профилем диспетчера трафика.</span><span class="sxs-lookup"><span data-stu-id="e029b-155">This is how hello domain name *scalable-ase-demo.trafficmanager.net* is created and associated with a Traffic Manager profile.</span></span>

<span data-ttu-id="e029b-156">Hello *TrafficRoutingMethod* параметр определяет hello политики балансировки нагрузки диспетчера трафика будет использовать toodetermine, как загрузить toospread клиента во всех доступных конечных точек hello.</span><span class="sxs-lookup"><span data-stu-id="e029b-156">hello *TrafficRoutingMethod* parameter defines hello load balancing policy Traffic Manager will use toodetermine how toospread customer load across all of hello available endpoints.</span></span>  <span data-ttu-id="e029b-157">В этом примере hello *Взвешенное* выбрали метод.</span><span class="sxs-lookup"><span data-stu-id="e029b-157">In this example hello *Weighted* method was chosen.</span></span>  <span data-ttu-id="e029b-158">Это приведет к во всех конечных точек приложения hello зарегистрированные основании hello относительный вес, связанный с каждой конечной точки на другие запросы от клиентов.</span><span class="sxs-lookup"><span data-stu-id="e029b-158">This will result in customer requests being spread across all of hello registered application endpoints based on hello relative weights associated with each endpoint.</span></span> 

<span data-ttu-id="e029b-159">Hello профиль создан каждый экземпляр приложения добавляется toohello профиль как собственный конечной точки Azure.</span><span class="sxs-lookup"><span data-stu-id="e029b-159">With hello profile created, each app instance is added toohello profile as a native Azure endpoint.</span></span>  <span data-ttu-id="e029b-160">Приведенный ниже код Hello извлекает ссылку tooeach внешнего интерфейса веб-приложения и добавляет каждое приложение как конечную точку диспетчера трафика посредством hello *идентификатором TargetResourceId* параметра.</span><span class="sxs-lookup"><span data-stu-id="e029b-160">hello code below fetches a reference tooeach front end web app, and then adds each app as a Traffic Manager endpoint by way of hello *TargetResourceId* parameter.</span></span>

    $webapp1 = Get-AzureRMWebApp -Name webfrontend1
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend1 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp1.Id –EndpointStatus Enabled –Weight 10

    $webapp2 = Get-AzureRMWebApp -Name webfrontend2
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend2 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp2.Id –EndpointStatus Enabled –Weight 10

    $webapp3 = Get-AzureRMWebApp -Name webfrontend3
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend3 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp3.Id –EndpointStatus Enabled –Weight 10

    Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile

<span data-ttu-id="e029b-161">Обратите внимание на один вызов слишком*AzureTrafficManagerEndpointConfig добавить* для каждого экземпляра для отдельных приложений.</span><span class="sxs-lookup"><span data-stu-id="e029b-161">Notice how there is one call too*Add-AzureTrafficManagerEndpointConfig* for each individual app instance.</span></span>  <span data-ttu-id="e029b-162">Hello *идентификатором TargetResourceId* параметр в каждой команде Powershell ссылается на один из трех экземпляров развернутое приложение hello.</span><span class="sxs-lookup"><span data-stu-id="e029b-162">hello *TargetResourceId* parameter in each Powershell command references one of hello three deployed app instances.</span></span>  <span data-ttu-id="e029b-163">Hello профиля диспетчера трафика будет распределяться нагрузки все три конечные точки, зарегистрированные в профиле hello.</span><span class="sxs-lookup"><span data-stu-id="e029b-163">hello Traffic Manager profile will spread load across all three endpoints registered in hello profile.</span></span>

<span data-ttu-id="e029b-164">Все три конечные точки используют hello hello такие же значения (10) hello *вес* параметра.</span><span class="sxs-lookup"><span data-stu-id="e029b-164">All of hello three endpoints use hello same value (10) for hello *Weight* parameter.</span></span>  <span data-ttu-id="e029b-165">поэтому диспетчер трафика распределяет клиентские запросы между всеми тремя экземплярами приложения относительно равномерно.</span><span class="sxs-lookup"><span data-stu-id="e029b-165">This results in Traffic Manager spreading customer requests across all three app instances relatively evenly.</span></span> 

## <a name="pointing-hello-apps-custom-domain-at-hello-traffic-manager-domain"></a><span data-ttu-id="e029b-166">Указывает приложение hello пользовательского домена в домен диспетчера трафика hello</span><span class="sxs-lookup"><span data-stu-id="e029b-166">Pointing hello App's Custom Domain at hello Traffic Manager Domain</span></span>
<span data-ttu-id="e029b-167">последним шагом Hello необходимые является toopoint hello пользовательского домена приложения hello в домен диспетчера трафика hello.</span><span class="sxs-lookup"><span data-stu-id="e029b-167">hello final step necessary is toopoint hello custom domain of hello app at hello Traffic Manager domain.</span></span>  <span data-ttu-id="e029b-168">Пример приложения hello это означает, указывающий *www.scalableasedemo.com* в *масштабируемой ase demo.trafficmanager.net*.</span><span class="sxs-lookup"><span data-stu-id="e029b-168">For hello sample app this means pointing *www.scalableasedemo.com* at *scalable-ase-demo.trafficmanager.net*.</span></span>  <span data-ttu-id="e029b-169">Этот шаг должен toobe завершилась hello регистратора, который управляет hello пользовательского домена.</span><span class="sxs-lookup"><span data-stu-id="e029b-169">This step needs toobe completed with hello domain registrar that manages hello custom domain.</span></span>  

<span data-ttu-id="e029b-170">С помощью средств управления регистратора домена toobe потребностей записей CNAME какие точек hello личный домен создан на домен диспетчера трафика hello.</span><span class="sxs-lookup"><span data-stu-id="e029b-170">Using your registrar's domain management tools, a CNAME records needs toobe created which points hello custom domain at hello Traffic Manager domain.</span></span>  <span data-ttu-id="e029b-171">Hello рисунке ниже показан пример того, как выглядит эта конфигурация CNAME.</span><span class="sxs-lookup"><span data-stu-id="e029b-171">hello picture below shows an example of what this CNAME configuration looks like:</span></span>

![CNAME для именного домена][CNAMEforCustomDomain] 

<span data-ttu-id="e029b-173">Несмотря на то, что в этом разделе не рассматриваются, помните, что каждому экземпляру отдельным приложениям требуются пользовательского домена toohave hello зарегистрированных в нем также.</span><span class="sxs-lookup"><span data-stu-id="e029b-173">Although not covered in this topic, remember that each individual app instance needs toohave hello custom domain registered with it as well.</span></span>  <span data-ttu-id="e029b-174">В противном случае — запрос выполняет экземпляр приложения tooan приложения hello нет hello пользовательский домен, зарегистрированный на приложение hello, hello запрос завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="e029b-174">Otherwise if a request makes it tooan app instance, and hello application does not have hello custom domain registered with hello app, hello request will fail.</span></span>  

<span data-ttu-id="e029b-175">В этом примере hello доменом является *www.scalableasedemo.com*, и каждый экземпляр приложения hello пользовательский домен, связанный с ним.</span><span class="sxs-lookup"><span data-stu-id="e029b-175">In this example hello custom domain is *www.scalableasedemo.com*, and each application instance has hello custom domain associated with it.</span></span>

![Личный домен][CustomDomain] 

<span data-ttu-id="e029b-177">Повторение по регистрации пользовательского домена приложений служб приложений Azure, в разделе hello следующей статьей [регистрации пользовательских доменов][RegisterCustomDomain].</span><span class="sxs-lookup"><span data-stu-id="e029b-177">For a recap of of registering a custom domain with Azure App Service apps, see hello following article on [registering custom domains][RegisterCustomDomain].</span></span>

## <a name="trying-out-hello-distributed-topology"></a><span data-ttu-id="e029b-178">Ознакомление hello Распределенная топология</span><span class="sxs-lookup"><span data-stu-id="e029b-178">Trying out hello Distributed Topology</span></span>
<span data-ttu-id="e029b-179">Hello конечным результатом hello конфигурации диспетчера трафика и DNS является требованием для *www.scalableasedemo.com* будет проходить через hello следующая последовательность:</span><span class="sxs-lookup"><span data-stu-id="e029b-179">hello end result of hello Traffic Manager and DNS configuration is that requests for *www.scalableasedemo.com* will flow through hello following sequence:</span></span>

1. <span data-ttu-id="e029b-180">Браузер или устройство выполняет поиск *www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="e029b-180">A browser or device will make a DNS lookup for *www.scalableasedemo.com*</span></span>
2. <span data-ttu-id="e029b-181">запись CNAME у регистратора имен доменов hello Hello вызывает hello DNS подстановки перенаправлен toobe tooAzure диспетчера трафика.</span><span class="sxs-lookup"><span data-stu-id="e029b-181">hello CNAME entry at hello domain registrar causes hello DNS lookup toobe redirected tooAzure Traffic Manager.</span></span>
3. <span data-ttu-id="e029b-182">Уточняющий запрос DNS выполняется для *масштабируемой ase demo.trafficmanager.net* к одному из серверов DNS диспетчера трафика Azure hello.</span><span class="sxs-lookup"><span data-stu-id="e029b-182">A DNS lookup is made for *scalable-ase-demo.trafficmanager.net* against one of hello Azure Traffic Manager DNS servers.</span></span>
4. <span data-ttu-id="e029b-183">На основе политика балансировки нагрузки hello (hello *TrafficRoutingMethod* использовалось ранее, при создании профиля диспетчера трафика hello параметра), диспетчер трафика будет выбрать одну из hello настроить конечные точки и возвращают hello, полное доменное имя Конечная точка toohello браузер или устройство.</span><span class="sxs-lookup"><span data-stu-id="e029b-183">Based on hello load balancing policy (hello *TrafficRoutingMethod* parameter used earlier when creating hello Traffic Manager profile), Traffic Manager will select one of hello configured endpoints and return hello FQDN of that endpoint toohello browser or device.</span></span>
5. <span data-ttu-id="e029b-184">Так как полное доменное имя конечной точки hello hello hello URL-адрес экземпляра приложения, выполняющегося в среде службы приложений, hello браузер или устройство запрашивает Microsoft Azure DNS-сервер tooresolve hello полное доменное имя tooan IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="e029b-184">Since hello FQDN of hello endpoint is hello Url of an app instance running on an App Service Environment, hello browser or device will ask a Microsoft Azure DNS server tooresolve hello FQDN tooan IP address.</span></span> 
6. <span data-ttu-id="e029b-185">Hello браузер или устройство будет отправлять hello HTTP/S запроса toohello IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="e029b-185">hello browser or device will send hello HTTP/S request toohello IP address.</span></span>  
7. <span data-ttu-id="e029b-186">запрос Hello будут поступать в один из экземпляров приложения hello, запущенной на одном из среды службы приложения hello.</span><span class="sxs-lookup"><span data-stu-id="e029b-186">hello request will arrive at one of hello app instances running on one of hello App Service Environments.</span></span>

<span data-ttu-id="e029b-187">Hello консоли рисунке ниже показаны поиска DNS для пример приложения hello пользовательский домен успешно разрешение tooan приложения, работающий на одном из образца hello три среды службы приложений (в этом случае hello среды службы приложения hello три секунды):</span><span class="sxs-lookup"><span data-stu-id="e029b-187">hello console picture below shows a DNS lookup for hello sample app's custom domain successfully resolving tooan app instance running on one of hello three sample App Service Environments (in this case hello second of hello three App Service Environments):</span></span>

![Поиск в DNS][DNSLookup] 

## <a name="additional-links-and-information"></a><span data-ttu-id="e029b-189">Дополнительные ссылки и сведения</span><span class="sxs-lookup"><span data-stu-id="e029b-189">Additional Links and Information</span></span>
<span data-ttu-id="e029b-190">Все статьи и как-для пользователя для среды службы приложений теперь доступны в hello [файл README для среды службы приложения](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="e029b-190">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="e029b-191">Документацию по hello Powershell [поддержки диспетчера трафика Azure Resource Manager][ARMTrafficManager].</span><span class="sxs-lookup"><span data-stu-id="e029b-191">Documentation on hello Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[AzureTrafficManagerProfile]: ../traffic-manager/traffic-manager-manage-profiles.md
[ARMTrafficManager]: ../traffic-manager/traffic-manager-powershell-arm.md
[RegisterCustomDomain]: app-service-web-tutorial-custom-domain.md


<!-- IMAGES -->
[ConceptualArchitecture]: ./media/app-service-app-service-environment-geo-distributed-scale/ConceptualArchitecture-1.png
[CNAMEforCustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CNAMECustomDomain-1.png
[DNSLookup]:  ./media/app-service-app-service-environment-geo-distributed-scale/DNSLookup-1.png
[CustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CustomDomain-1.png 
