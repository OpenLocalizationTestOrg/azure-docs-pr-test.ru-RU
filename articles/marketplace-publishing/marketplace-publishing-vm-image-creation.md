---
title: "aaaCreating образ виртуальной машины для hello Azure Marketplace | Документы Microsoft"
description: "Подробные инструкции о том, как toocreate виртуальной машины из образа для hello Azure Marketplace для других toopurchase."
services: Azure Marketplace
documentationcenter: 
author: HannibalSII
manager: hascipio
editor: 
ms.assetid: 5c937b8e-e28d-4007-9fef-624046bca2ae
ms.service: marketplace
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: Azure
ms.workload: na
ms.date: 01/05/2017
ms.author: hascipio; v-divte
ms.openlocfilehash: 65e1c0530bb050fb379a52544e36c55faacd84df
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="guide-toocreate-a-virtual-machine-image-for-hello-azure-marketplace"></a><span data-ttu-id="fe3e9-103">Руководство по toocreate образ виртуальной машины для hello Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="fe3e9-103">Guide toocreate a virtual machine image for hello Azure Marketplace</span></span>
<span data-ttu-id="fe3e9-104">В этой статье **шаг 2**, руководство по подготовке hello виртуальные жесткие диски (VHD), развертывается toohello Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-104">This article, **Step 2**, walks you through preparing hello virtual hard disks (VHDs) that you will deploy toohello Azure Marketplace.</span></span> <span data-ttu-id="fe3e9-105">Виртуальные жесткие диски являются основой hello ваш SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-105">Your VHDs are hello foundation of your SKU.</span></span> <span data-ttu-id="fe3e9-106">Hello процесса зависит от того, предоставляется под управлением Linux или на основе Windows SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-106">hello process differs depending on whether you are providing a Linux-based or Windows-based SKU.</span></span> <span data-ttu-id="fe3e9-107">В этой статье рассматриваются оба сценария.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-107">This article covers both scenarios.</span></span> <span data-ttu-id="fe3e9-108">Описываемую процедуру можно выполнять параллельно с [созданием учетной записи разработчика Майкрософт][link-acct-creation].</span><span class="sxs-lookup"><span data-stu-id="fe3e9-108">This process can be performed in parallel with [Account creation and registration][link-acct-creation].</span></span>

## <a name="1-define-offers-and-skus"></a><span data-ttu-id="fe3e9-109">1. Определение предложений и номеров SKU</span><span class="sxs-lookup"><span data-stu-id="fe3e9-109">1. Define Offers and SKUs</span></span>
<span data-ttu-id="fe3e9-110">В этом разделе вы узнаете, как toodefine hello предложений и их связанные номера SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-110">In this section, you learn toodefine hello offers and their associated SKUs.</span></span>

<span data-ttu-id="fe3e9-111">Предложение имеет «родительский» tooall его номеров SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-111">An offer is a "parent" tooall of its SKUs.</span></span> <span data-ttu-id="fe3e9-112">Вы можете создать несколько предложений.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-112">You can have multiple offers.</span></span> <span data-ttu-id="fe3e9-113">Как решить toostructure вашей работает tooyou.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-113">How you decide toostructure your offers is up tooyou.</span></span> <span data-ttu-id="fe3e9-114">При передаче toostaging предложение, оно помещается вместе со всеми ее номера SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-114">When an offer is pushed toostaging, it is pushed along with all of its SKUs.</span></span> <span data-ttu-id="fe3e9-115">Внимательно рассмотрите вашей идентификаторы SKU, так как они будут отображаться в URL-АДРЕСЕ hello:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-115">Carefully consider your SKU identifiers, because they will be visible in hello URL:</span></span>

* <span data-ttu-id="fe3e9-116">Azure.com: http://azure.microsoft.com/marketplace/partners/{пространство_имен_партнера}/{идентификатор_заказа}-{идентификатор_SKU};</span><span class="sxs-lookup"><span data-stu-id="fe3e9-116">Azure.com: http://azure.microsoft.com/marketplace/partners/{PartnerNamespace}/{OfferIdentifier}-{SKUidentifier}</span></span>
* <span data-ttu-id="fe3e9-117">портал предварительной версии Azure: https://portal.azure.com/#gallery/{пространство_имен_издателя}.{идентификатор_заказа}{идентификатор_SKU}.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-117">Azure preview portal: https://portal.azure.com/#gallery/{PublisherNamespace}.{OfferIdentifier}{SKUIDdentifier}</span></span>  

<span data-ttu-id="fe3e9-118">SKU — hello коммерческих имя образа виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-118">A SKU is hello commercial name for a VM image.</span></span> <span data-ttu-id="fe3e9-119">Образ VM содержит один диск операционной системы и от нуля до нескольких дисков данных.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-119">A VM image contains one operating system disk and zero or more data disks.</span></span> <span data-ttu-id="fe3e9-120">Это по сути профиль hello завершения хранилища для виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-120">It is essentially hello complete storage profile for a virtual machine.</span></span> <span data-ttu-id="fe3e9-121">Для одного диска требуется один VHD.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-121">One VHD is needed per disk.</span></span> <span data-ttu-id="fe3e9-122">Диски с данными даже пустые требуют toobe виртуальный жесткий ДИСК создан.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-122">Even blank data disks require a VHD toobe created.</span></span>

<span data-ttu-id="fe3e9-123">Независимо от того, какая операционная система используется добавьте только hello минимальное число дисков данных, необходимые для hello SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-123">Regardless of which operating system you use, add only hello minimum number of data disks needed by hello SKU.</span></span> <span data-ttu-id="fe3e9-124">Не удается удалить диски, которые являются частью изображения во время развертывания hello клиенты, но всегда можно добавить диски во время или после развертывания, если они необходимы.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-124">Customers cannot remove disks that are part of an image at hello time of deployment but can always add disks during or after deployment if they need them.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="fe3e9-125">**Не изменяйте число дисков в новой версии образа.**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-125">**Do not change disk count in a new image version.**</span></span> <span data-ttu-id="fe3e9-126">Если необходимо перенастроить диски с данными в образе hello, определите новая Конфигурация.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-126">If you must reconfigure Data disks in hello image, define a new SKU.</span></span> <span data-ttu-id="fe3e9-127">Публикации новой версии изображения с учетом количества другой диск будет иметь hello вероятность нарушения новое развертывание на основе версии нового образа hello в случаях развертываний автоматического масштабирования, автоматический решений через шаблоны ARM и других сценариев.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-127">Publishing a new image version with different disk counts will have hello potential of breaking new deployment based on hello new image version in cases of auto-scaling, automatic deployments of solutions through ARM templates and other scenarios.</span></span>
>
>

### <a name="11-add-an-offer"></a><span data-ttu-id="fe3e9-128">1.1. Добавление предложения</span><span class="sxs-lookup"><span data-stu-id="fe3e9-128">1.1 Add an offer</span></span>
1. <span data-ttu-id="fe3e9-129">Войдите в toohello [портал публикации] [ link-pubportal] с помощью учетной записи продавца.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-129">Sign in toohello [Publishing Portal][link-pubportal] by using your seller account.</span></span>
2. <span data-ttu-id="fe3e9-130">Выберите hello **виртуальные машины** вкладке hello портал публикации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-130">Select hello **Virtual Machines** tab of hello Publishing Portal.</span></span> <span data-ttu-id="fe3e9-131">В поле запроса ввода hello введите имя предложения.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-131">In hello prompted entry field, enter your offer name.</span></span> <span data-ttu-id="fe3e9-132">имя предложения Hello обычно — имя hello hello продукта или услуги, планировании toosell в hello Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-132">hello offer name is typically hello name of hello product or service that you plan toosell in hello Azure Marketplace.</span></span>
3. <span data-ttu-id="fe3e9-133">Нажмите кнопку **Создать**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-133">Select **Create**.</span></span>

### <a name="12-define-a-sku"></a><span data-ttu-id="fe3e9-134">1.2. Определение номера SKU</span><span class="sxs-lookup"><span data-stu-id="fe3e9-134">1.2 Define a SKU</span></span>
<span data-ttu-id="fe3e9-135">После добавления предложения требуется toodefine и идентификации вашей конфигурации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-135">After you have added an offer, you need toodefine and identify your SKUs.</span></span> <span data-ttu-id="fe3e9-136">У вас может быть несколько предложений, и каждое из них может содержать несколько номеров SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-136">You can have multiple offers, and each offer can have multiple SKUs under it.</span></span> <span data-ttu-id="fe3e9-137">При передаче toostaging предложение, оно помещается вместе со всеми ее номера SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-137">When an offer is pushed toostaging, it is pushed along with all of its SKUs.</span></span>

1. <span data-ttu-id="fe3e9-138">**Добавьте номер SKU.**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-138">**Add a SKU.**</span></span> <span data-ttu-id="fe3e9-139">Hello SKU требует идентификатора, который используется в URL-адрес hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-139">hello SKU requires an identifier, which is used in hello URL.</span></span> <span data-ttu-id="fe3e9-140">Hello идентификатор должен быть уникальным в пределах ваш профиль публикации, но нет риска возникновения конфликта идентификатор с другими издателями.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-140">hello identifier must be unique within your publishing profile, but there is no risk of identifier collision with other publishers.</span></span>

   > [!NOTE]
   > <span data-ttu-id="fe3e9-141">предложение Hello и идентификаторы SKU, отображаются в hello предложение URL-адрес hello Marketplace.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-141">hello offer and SKU identifiers are displayed in hello offer URL in hello Marketplace.</span></span>
   >
   >
2. <span data-ttu-id="fe3e9-142">**Добавьте сводное описание для номера SKU.**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-142">**Add a summary description for your SKU.**</span></span> <span data-ttu-id="fe3e9-143">Сводных описаний являются видимыми toocustomers, поэтому необходимо сделать их легко читаемыми.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-143">Summary descriptions are visible toocustomers, so you should make them easily readable.</span></span> <span data-ttu-id="fe3e9-144">Эти сведения не обязательно toobe заблокирована до фазы «Принудительной tooStaging» hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-144">This information does not need toobe locked until hello "Push tooStaging" phase.</span></span> <span data-ttu-id="fe3e9-145">До тех пор являются свободного tooedit его.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-145">Until then, you are free tooedit it.</span></span>
3. <span data-ttu-id="fe3e9-146">При использовании ОС Windows SKU выполните предлагаемые связи hello tooacquire hello утверждения версий Windows Server.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-146">If you are using Windows-based SKUs, follow hello suggested links tooacquire hello approved versions of Windows Server.</span></span>

## <a name="2-create-an-azure-compatible-vhd-linux-based"></a><span data-ttu-id="fe3e9-147">2. Создание виртуального жесткого диска, совместимого с Azure (для Linux)</span><span class="sxs-lookup"><span data-stu-id="fe3e9-147">2. Create an Azure-compatible VHD (Linux-based)</span></span>
<span data-ttu-id="fe3e9-148">Этот раздел содержит рекомендации по созданию образа виртуальной Машины на основе Linux для hello Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-148">This section focuses on best practices for creating a Linux-based VM image for hello Azure Marketplace.</span></span> <span data-ttu-id="fe3e9-149">Пошаговое руководство см. в разделе toohello Следующая документация: [Создание и загрузка виртуального жесткого диска, который содержит hello операционной системы Linux](../virtual-machines/linux/classic/create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json)</span><span class="sxs-lookup"><span data-stu-id="fe3e9-149">For a step-by-step walkthrough, refer toohello following documentation: [Creating and Uploading a Virtual Hard Disk that Contains hello Linux Operating System](../virtual-machines/linux/classic/create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json)</span></span>

## <a name="3-create-an-azure-compatible-vhd-windows-based"></a><span data-ttu-id="fe3e9-150">3. Создание виртуального жесткого диска, совместимого с Azure (на основе Windows)</span><span class="sxs-lookup"><span data-stu-id="fe3e9-150">3. Create an Azure-compatible VHD (Windows-based)</span></span>
<span data-ttu-id="fe3e9-151">Этот раздел посвящен toocreate действия hello SKU, на основе Windows Server для hello Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-151">This section focuses on hello steps toocreate a SKU based on Windows Server for hello Azure Marketplace.</span></span>

### <a name="31-ensure-that-you-are-using-hello-correct-base-vhds"></a><span data-ttu-id="fe3e9-152">3.1 Убедитесь, что вы используете hello исправьте базовые виртуальные жесткие диски</span><span class="sxs-lookup"><span data-stu-id="fe3e9-152">3.1 Ensure that you are using hello correct base VHDs</span></span>
<span data-ttu-id="fe3e9-153">Hello операционной системы для образа виртуальной Машины должен быть основан на утвержденные Azure базового образа, содержащего Windows Server или SQL Server.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-153">hello operating system VHD for your VM image must be based on an Azure-approved base image that contains Windows Server or SQL Server.</span></span>

<span data-ttu-id="fe3e9-154">toobegin, создайте виртуальную Машину из одного hello после изображения, находящийся в hello [портал Microsoft Azure][link-azure-portal]:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-154">toobegin, create a VM from one of hello following images, located at hello [Microsoft Azure portal][link-azure-portal]:</span></span>

* <span data-ttu-id="fe3e9-155">Windows Server ([2012 R2 Datacenter][link-datactr-2012-r2], [2012 Datacenter][link-datactr-2012], [2008 R2 SP1][link-datactr-2008-r2]);</span><span class="sxs-lookup"><span data-stu-id="fe3e9-155">Windows Server ([2012 R2 Datacenter][link-datactr-2012-r2], [2012 Datacenter][link-datactr-2012], [2008 R2 SP1][link-datactr-2008-r2])</span></span>
* <span data-ttu-id="fe3e9-156">SQL Server 2014 ([Enterprise][link-sql-2014-ent], [Standard][link-sql-2014-std], [Web][link-sql-2014-web]);</span><span class="sxs-lookup"><span data-stu-id="fe3e9-156">SQL Server 2014 ([Enterprise][link-sql-2014-ent], [Standard][link-sql-2014-std], [Web][link-sql-2014-web])</span></span>
* <span data-ttu-id="fe3e9-157">SQL Server 2012 SP2 ([Enterprise][link-sql-2012-ent], [Standard][link-sql-2012-std], [Web][link-sql-2012-web]).</span><span class="sxs-lookup"><span data-stu-id="fe3e9-157">SQL Server 2012 SP2 ([Enterprise][link-sql-2012-ent], [Standard][link-sql-2012-std], [Web][link-sql-2012-web])</span></span>

<span data-ttu-id="fe3e9-158">Эти ссылки можно также найти в hello портал публикации под страницей SKU hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-158">These links can also be found in hello Publishing Portal under hello SKU page.</span></span>

> [!TIP]
> <span data-ttu-id="fe3e9-159">Если вы используете hello текущей версией портала Azure или PowerShell, утверждаются образов Windows Server, опубликованные на 8 сентября 2014 г. и более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-159">If you are using hello current Azure portal or PowerShell, Windows Server images published on September 8, 2014 and later are approved.</span></span>
>
>

### <a name="32-create-your-windows-based-vm"></a><span data-ttu-id="fe3e9-160">3.2. Создайте виртуальную машину Windows</span><span class="sxs-lookup"><span data-stu-id="fe3e9-160">3.2 Create your Windows-based VM</span></span>
<span data-ttu-id="fe3e9-161">С портала Microsoft Azure hello можно создать ВМ на основе утвержденных базового образа всего несколько простых шагов.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-161">From hello Microsoft Azure portal, you can create your VM based on an approved base image in just a few simple steps.</span></span> <span data-ttu-id="fe3e9-162">Hello ниже приведен обзор процесса hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-162">hello following is an overview of hello process:</span></span>

1. <span data-ttu-id="fe3e9-163">На странице приветствия базового образа, выбрать **создания виртуальной машины** toobe направленный toohello новый [портал Microsoft Azure][link-azure-portal].</span><span class="sxs-lookup"><span data-stu-id="fe3e9-163">From hello base image page, select **Create Virtual Machine** toobe directed toohello new [Microsoft Azure portal][link-azure-portal].</span></span>

    ![рисунок][img-acom-1]
2. <span data-ttu-id="fe3e9-165">Войдите в портал toohello с hello учетную запись Майкрософт и пароль для подписки Azure, требуется toouse hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-165">Sign in toohello portal with hello Microsoft account and password for hello Azure subscription you want toouse.</span></span>
3. <span data-ttu-id="fe3e9-166">Выполните запросы hello toocreate виртуальной Машины с помощью hello базового образа, которые вы выбрали.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-166">Follow hello prompts toocreate a VM by using hello base image you have selected.</span></span> <span data-ttu-id="fe3e9-167">Требуется tooprovide имя узла (имя компьютера hello), (зарегистрированный с правами администратора) имя пользователя и пароль для hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-167">You need tooprovide a host name (name of hello computer), user name (registered as an administrator), and password for hello VM.</span></span>

    ![рисунок][img-portal-vm-create]
4. <span data-ttu-id="fe3e9-169">Выберите размер виртуальной Машины toodeploy hello hello:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-169">Select hello size of hello VM toodeploy:</span></span>

    <span data-ttu-id="fe3e9-170">а.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-170">a.</span></span>    <span data-ttu-id="fe3e9-171">Если планируется toodevelop hello виртуальный жесткий ДИСК в локальной среде, размер hello не имеет значения.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-171">If you plan toodevelop hello VHD on-premises, hello size does not matter.</span></span> <span data-ttu-id="fe3e9-172">Можно воспользоваться одним из hello меньшего размера виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-172">Consider using one of hello smaller VMs.</span></span>

    <span data-ttu-id="fe3e9-173">b.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-173">b.</span></span>    <span data-ttu-id="fe3e9-174">Если планируется toodevelop hello образ в Azure, можно с помощью одного из hello рекомендуемые размеры виртуальных Машин для выбранного образа hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-174">If you plan toodevelop hello image in Azure, consider using one of hello recommended VM sizes for hello selected image.</span></span>

    <span data-ttu-id="fe3e9-175">c.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-175">c.</span></span>    <span data-ttu-id="fe3e9-176">Сведения о ценах, см. в разделе toohello **рекомендуется ценовым категориям** селектор отображается на портале hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-176">For pricing information, refer toohello **Recommended pricing tiers** selector displayed on hello portal.</span></span> <span data-ttu-id="fe3e9-177">Он предоставляет hello три рекомендуемые размеры, предоставленную издателем hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-177">It will provide hello three recommended sizes provided by hello publisher.</span></span> <span data-ttu-id="fe3e9-178">(В этом случае издатель hello — Microsoft.)</span><span class="sxs-lookup"><span data-stu-id="fe3e9-178">(In this case, hello publisher is Microsoft.)</span></span>

    ![рисунок][img-portal-vm-size]
5. <span data-ttu-id="fe3e9-180">Задайте свойства.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-180">Set properties:</span></span>

    <span data-ttu-id="fe3e9-181">а.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-181">a.</span></span>    <span data-ttu-id="fe3e9-182">Для быстрого развертывания можно оставить значения по умолчанию для свойств hello в hello **необязательная конфигурация** и **группы ресурсов**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-182">For quick deployment, you can leave hello default values for hello properties under **Optional Configuration** and **Resource Group**.</span></span>

    <span data-ttu-id="fe3e9-183">b.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-183">b.</span></span>    <span data-ttu-id="fe3e9-184">В разделе **учетной записи хранилища**, при необходимости можно выбрать учетную запись хранения hello, в какие hello, операционная система будет храниться виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-184">Under **Storage Account**, you can optionally select hello storage account in which hello operating system VHD will be stored.</span></span>

    <span data-ttu-id="fe3e9-185">c.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-185">c.</span></span>    <span data-ttu-id="fe3e9-186">В разделе **группы ресурсов**, при необходимости можно выбрать hello логическую группу, в которой tooplace hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-186">Under **Resource Group**, you can optionally select hello logical group in which tooplace hello VM.</span></span>
6. <span data-ttu-id="fe3e9-187">Выберите hello **расположение** для развертывания:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-187">Select hello **Location** for deployment:</span></span>

    <span data-ttu-id="fe3e9-188">а.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-188">a.</span></span>    <span data-ttu-id="fe3e9-189">Если планируется toodevelop hello виртуальный жесткий ДИСК в локальной среде, расположение hello не имеет значения tooAzure hello образ будет отправлен позже.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-189">If you plan toodevelop hello VHD on-premises, hello location does not matter because you will upload hello image tooAzure later.</span></span>

    <span data-ttu-id="fe3e9-190">b.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-190">b.</span></span>    <span data-ttu-id="fe3e9-191">Если планируется toodevelop hello образ в Azure, можно воспользоваться одним из регионов США под управлением Microsoft Azure hello с начала hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-191">If you plan toodevelop hello image in Azure, consider using one of hello US-based Microsoft Azure regions from hello beginning.</span></span> <span data-ttu-id="fe3e9-192">Это ускоряет hello VHD процесса копирования, выполняющий Microsoft от вашего имени, при отправке изображения для сертификации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-192">This speeds up hello VHD copying process that Microsoft performs on your behalf when you submit your image for certification.</span></span>

    ![рисунок][img-portal-vm-location]
7. <span data-ttu-id="fe3e9-194">Щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-194">Click **Create**.</span></span> <span data-ttu-id="fe3e9-195">Hello виртуальных Машин запускает toodeploy.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-195">hello VM starts toodeploy.</span></span> <span data-ttu-id="fe3e9-196">В течение минут будет иметь успешного развертывания и можно начать toocreate hello изображения для вашей конфигурации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-196">Within minutes, you will have a successful deployment and can begin toocreate hello image for your SKU.</span></span>

### <a name="33-develop-your-vhd-in-hello-cloud"></a><span data-ttu-id="fe3e9-197">3.3 разработки вашего виртуального жесткого диска в облаке hello</span><span class="sxs-lookup"><span data-stu-id="fe3e9-197">3.3 Develop your VHD in hello cloud</span></span>
<span data-ttu-id="fe3e9-198">Настоятельно рекомендуется разрабатывать вашего виртуального жесткого диска в облаке hello, с помощью удаленного рабочего стола (RDP).</span><span class="sxs-lookup"><span data-stu-id="fe3e9-198">We strongly recommend that you develop your VHD in hello cloud by using Remote Desktop Protocol (RDP).</span></span> <span data-ttu-id="fe3e9-199">TooRDP подключиться с hello имя пользователя и пароль, указанные во время инициализации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-199">You connect tooRDP with hello user name and password specified during provisioning.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="fe3e9-200">В случае локальной разработки виртуального жесткого диска (мы не рекомендуем) см. статью [Локальная разработка образа виртуальной машины для Azure Marketplace](marketplace-publishing-vm-image-creation-on-premise.md).</span><span class="sxs-lookup"><span data-stu-id="fe3e9-200">If you develop your VHD on-premises (which is not recommended), see [Creating a virtual machine image on-premises](marketplace-publishing-vm-image-creation-on-premise.md).</span></span> <span data-ttu-id="fe3e9-201">Загрузка вашего виртуального жесткого диска не является обязательным, если вы разрабатываете в облаке hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-201">Downloading your VHD is not necessary if you are developing in hello cloud.</span></span>
>
>

<span data-ttu-id="fe3e9-202">**Подключаться с помощью протокола удаленного рабочего СТОЛА с помощью hello [портал Microsoft Azure][link-azure-portal]**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-202">**Connect via RDP using hello [Microsoft Azure portal][link-azure-portal]**</span></span>

1. <span data-ttu-id="fe3e9-203">Выберите **Обзор** > **Виртуальные машины**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-203">Select **Browse** > **VMs**.</span></span>
2. <span data-ttu-id="fe3e9-204">Открывает колонку Hello виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-204">hello Virtual machines blade opens.</span></span> <span data-ttu-id="fe3e9-205">Убедитесь, что hello виртуальная машина, которую вы хотите tooconnect с работает и выберите его из списка hello развернутых виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-205">Ensure that hello VM that you want tooconnect with is running, and then select it from hello list of deployed VMs.</span></span>
3. <span data-ttu-id="fe3e9-206">Открывается колонка, которое описывает hello выбранной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-206">A blade opens that describes hello selected VM.</span></span> <span data-ttu-id="fe3e9-207">В верхней части экрана приветствия нажмите кнопку **Connect**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-207">At hello top, click **Connect**.</span></span>
4. <span data-ttu-id="fe3e9-208">Вы являетесь запрашиваемые tooenter hello пользователя имя и пароль, указанный во время инициализации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-208">You are prompted tooenter hello user name and password that you specified during provisioning.</span></span>

<span data-ttu-id="fe3e9-209">**Подключение по протоколу RDP с помощью PowerShell**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-209">**Connect via RDP using PowerShell**</span></span>

<span data-ttu-id="fe3e9-210">toodownload tooa локальном компьютере файл удаленного рабочего стола, используйте hello [командлет Get-AzureRemoteDesktopFile][link-technet-2].</span><span class="sxs-lookup"><span data-stu-id="fe3e9-210">toodownload a remote desktop file tooa local machine, use hello [Get-AzureRemoteDesktopFile cmdlet][link-technet-2].</span></span> <span data-ttu-id="fe3e9-211">В заказ toouse этот командлет, требуются имя hello tooknow hello службы и имя виртуальной Машины hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-211">In order toouse this cmdlet, you need tooknow hello name of hello service and name of hello VM.</span></span> <span data-ttu-id="fe3e9-212">При создании виртуальной Машины hello с hello [портал Microsoft Azure][link-azure-portal], можно найти эту информацию в свойствах виртуальной Машины:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-212">If you created hello VM from hello [Microsoft Azure portal][link-azure-portal], you can find this information under VM properties:</span></span>

1. <span data-ttu-id="fe3e9-213">На портале Microsoft Azure hello, выберите **Обзор** > **виртуальные машины**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-213">In hello Microsoft Azure portal, select **Browse** > **VMs**.</span></span>
2. <span data-ttu-id="fe3e9-214">Открывает колонку Hello виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-214">hello Virtual machines blade opens.</span></span> <span data-ttu-id="fe3e9-215">Выберите виртуальную Машину, которая была развернута hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-215">Select hello VM that you deployed.</span></span>
3. <span data-ttu-id="fe3e9-216">Открывается колонка, которое описывает hello выбранной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-216">A blade opens that describes hello selected VM.</span></span>
4. <span data-ttu-id="fe3e9-217">Щелкните **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-217">Click **Properties**.</span></span>
5. <span data-ttu-id="fe3e9-218">Первая часть Hello hello доменное имя — имя службы hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-218">hello first portion of hello domain name is hello service name.</span></span> <span data-ttu-id="fe3e9-219">Имя узла Hello — имя виртуальной Машины hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-219">hello host name is hello VM name.</span></span>

    ![рисунок][img-portal-vm-rdp]
6. <span data-ttu-id="fe3e9-221">Hello командлет toodownload hello RDP-файл для hello создана виртуальная машина toohello администратора локальный рабочий стол выглядит следующим образом.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-221">hello cmdlet toodownload hello RDP file for hello created VM toohello administrator's local desktop is as follows.</span></span>

        Get‐AzureRemoteDesktopFile ‐ServiceName “baseimagevm‐6820cq00” ‐Name “BaseImageVM” –LocalPath “C:\Users\Administrator\Desktop\BaseImageVM.rdp”

<span data-ttu-id="fe3e9-222">Дополнительные сведения о RDP можно найти в библиотеке MSDN в статье hello [подключения tooan ВМ Azure с помощью протокола удаленного рабочего СТОЛА или SSH](http://msdn.microsoft.com/library/azure/dn535788.aspx).</span><span class="sxs-lookup"><span data-stu-id="fe3e9-222">More information about RDP can be found on MSDN in hello article [Connect tooan Azure VM with RDP or SSH](http://msdn.microsoft.com/library/azure/dn535788.aspx).</span></span>

<span data-ttu-id="fe3e9-223">**Настройка виртуальной машины и создание номера SKU**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-223">**Configure a VM and create your SKU**</span></span>

<span data-ttu-id="fe3e9-224">После hello ОС загруженном виртуального жесткого диска Hyper-v и настройки toobegin виртуальной Машины, создание ваш SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-224">After hello operating system VHD is downloaded, use Hyper­V and configure a VM toobegin creating your SKU.</span></span> <span data-ttu-id="fe3e9-225">Подробные инструкции можно найти в hello TechNet по ссылке: [установить Hyper-v и настройка виртуальной Машины](http://technet.microsoft.com/library/hh846766.aspx).</span><span class="sxs-lookup"><span data-stu-id="fe3e9-225">Detailed steps can be found at hello following TechNet link: [Install Hyper­V and Configure a VM](http://technet.microsoft.com/library/hh846766.aspx).</span></span>

### <a name="34-choose-hello-correct-vhd-size"></a><span data-ttu-id="fe3e9-226">3.4 выберите hello правильный размер виртуального жесткого диска</span><span class="sxs-lookup"><span data-stu-id="fe3e9-226">3.4 Choose hello correct VHD size</span></span>
<span data-ttu-id="fe3e9-227">Hello операционной системы Windows виртуального жесткого диска в образ виртуальной Машины должна быть создана как виртуальный жесткий ДИСК фиксированного формата 128 ГБ.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-227">hello Windows operating system VHD in your VM image should be created as a 128-GB fixed-format VHD.</span></span>  

<span data-ttu-id="fe3e9-228">Если hello физический размер не превышает 128 ГБ, hello виртуального жесткого диска должен быть разреженным.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-228">If hello physical size is less than 128 GB, hello VHD should be sparse.</span></span> <span data-ttu-id="fe3e9-229">Hello базовый Windows и SQL Server образов, предоставляемых уже удовлетворяют этим требованиям, поэтому не hello формат или hello размер hello получить виртуальный жесткий ДИСК.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-229">hello base Windows and SQL Server images provided already meet these requirements, so do not change hello format or hello size of hello VHD obtained.</span></span>  

<span data-ttu-id="fe3e9-230">Размер дисков данных может достигать 1 ТБ.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-230">Data disks can be as large as 1 TB.</span></span> <span data-ttu-id="fe3e9-231">При принятии решения о hello места на диске, помните, что клиентам не удается изменить размер виртуальных жестких дисков в изображении во время развертывания hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-231">When deciding on hello disk size, remember that customers cannot resize VHDs within an image at hello time of deployment.</span></span> <span data-ttu-id="fe3e9-232">Виртуальные жесткие диски для дисков данных должны создаваться в фиксированном формате.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-232">Data disk VHDs should be created as a fixed-format VHD.</span></span> <span data-ttu-id="fe3e9-233">Тем не менее их также следует разбивать на части.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-233">They should also be sparse.</span></span> <span data-ttu-id="fe3e9-234">Диски данных могут быть пустыми или содержать данные.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-234">Data disks can be empty or contain data.</span></span>

### <a name="35-install-hello-latest-windows-patches"></a><span data-ttu-id="fe3e9-235">3.5 установите последние обновления Windows hello</span><span class="sxs-lookup"><span data-stu-id="fe3e9-235">3.5 Install hello latest Windows patches</span></span>
<span data-ttu-id="fe3e9-236">Hello базовые образы содержат последние исправления hello вверх tootheir Дата публикации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-236">hello base images contain hello latest patches up tootheir published date.</span></span> <span data-ttu-id="fe3e9-237">Перед публикацией hello операционной системы создания виртуального жесткого диска, убедитесь, выполнение центра обновления Windows и все hello последние критических и важных обновлениях безопасности были установлены.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-237">Before publishing hello operating system VHD you have created, ensure that Windows Update has been run and that all hello latest Critical and Important security updates have been installed.</span></span>

### <a name="36-perform-additional-configuration-and-schedule-tasks-as-necessary"></a><span data-ttu-id="fe3e9-238">3.6. Выполнение дополнительной настройки и задание расписания для выполнения задач по мере необходимости</span><span class="sxs-lookup"><span data-stu-id="fe3e9-238">3.6 Perform additional configuration and schedule tasks as necessary</span></span>
<span data-ttu-id="fe3e9-239">Если требуется дополнительная настройка, рассмотрите возможность использования запланированную задачу, которая выполняется в toomake запуска любого окончательных изменений toohello виртуальной Машины, после его развертывания:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-239">If additional configuration is needed, consider using a scheduled task that runs at startup toomake any final changes toohello VM after it has been deployed:</span></span>

* <span data-ttu-id="fe3e9-240">Это наиболее задачу hello toohave рекомендуется удалить сам после успешного выполнения.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-240">It is a best practice toohave hello task delete itself upon successful execution.</span></span>
* <span data-ttu-id="fe3e9-241">Конфигурация не следует полагаться на дисках, отличных от дисков C и D, так как эти hello только двух дисков, которые гарантированно tooexist.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-241">No configuration should rely on drives other than drives C or D, because these are hello only two drives that are always guaranteed tooexist.</span></span> <span data-ttu-id="fe3e9-242">Диск C — hello диска операционной системы, а диск D — hello временный локальный диск.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-242">Drive C is hello operating system disk, and drive D is hello temporary local disk.</span></span>

### <a name="37-generalize-hello-image"></a><span data-ttu-id="fe3e9-243">3.7 обобщить образ hello</span><span class="sxs-lookup"><span data-stu-id="fe3e9-243">3.7 Generalize hello image</span></span>
<span data-ttu-id="fe3e9-244">Все образы в Azure Marketplace hello необходимо для повторного использования в универсальный код.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-244">All images in hello Azure Marketplace must be reusable in a generic fashion.</span></span> <span data-ttu-id="fe3e9-245">Другими словами обобщенный hello операционной системы:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-245">In other words, hello operating system VHD must be generalized:</span></span>

* <span data-ttu-id="fe3e9-246">Для Windows hello изображения должно быть «командой Sysprep» и конфигурации не должно выполняться, не поддерживающие hello **sysprep** команды.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-246">For Windows, hello image should be "sysprepped," and no configurations should be done that do not support hello **sysprep** command.</span></span>
* <span data-ttu-id="fe3e9-247">Можно выполнить следующую команду из hello каталог % windir%\System32\Sysprep hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-247">You can run hello following command from hello directory %windir%\System32\Sysprep.</span></span>

        sysprep.exe /generalize /oobe /shutdown

  <span data-ttu-id="fe3e9-248">Рекомендации по как предоставляется toosysprep hello операционной системы на шаге hello см: [Создание и отправка Windows Server VHD tooAzure](../virtual-machines/windows/classic/createupload-vhd.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="fe3e9-248">Guidance on how toosysprep hello operating system is provided in Step of hello following MSDN article: [Create and upload a Windows Server VHD tooAzure](../virtual-machines/windows/classic/createupload-vhd.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>

## <a name="4-deploy-a-vm-from-your-vhds"></a><span data-ttu-id="fe3e9-249">4. Развертывание виртуальной машины из дисков VHD</span><span class="sxs-lookup"><span data-stu-id="fe3e9-249">4. Deploy a VM from your VHDs</span></span>
<span data-ttu-id="fe3e9-250">После загрузки виртуальные жесткие диски (VHD hello обобщенный операционной системы и данных ноль или более виртуальных жестких дисков на диске) tooan учетной записи хранилища Azure, можно зарегистрировать их как образ виртуальной Машины пользователя.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-250">After you have uploaded your VHDs (hello generalized operating system VHD and zero or more data disk VHDs) tooan Azure storage account, you can register them as a user VM image.</span></span> <span data-ttu-id="fe3e9-251">Затем можно приступать к тестированию образа.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-251">Then you can test that image.</span></span> <span data-ttu-id="fe3e9-252">Обратите внимание, что поскольку обобщенный виртуальный жесткий ДИСК операционной системы нельзя развернуть напрямую hello виртуальной Машины, предоставляя hello URL-адрес VHD.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-252">Note that because your operating system VHD is generalized, you cannot directly deploy hello VM by providing hello VHD URL.</span></span>

<span data-ttu-id="fe3e9-253">Дополнительные сведения о образов виртуальных Машин toolearn hello просмотрите следующие записи в блогах:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-253">toolearn more about VM images, review hello following blog posts:</span></span>

* [<span data-ttu-id="fe3e9-254">Образ виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="fe3e9-254">VM Image</span></span>](https://azure.microsoft.com/blog/vm-image-blog-post/)
* [<span data-ttu-id="fe3e9-255">Способы использования PowerShell при работе с образами виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="fe3e9-255">VM Image PowerShell How To</span></span>](https://azure.microsoft.com/blog/vm-image-powershell-how-to-blog-post/)
* [<span data-ttu-id="fe3e9-256">Образы виртуальных машин в Azure</span><span class="sxs-lookup"><span data-stu-id="fe3e9-256">About VM images in Azure</span></span>](https://msdn.microsoft.com/library/azure/dn790290.aspx)

### <a name="set-up-hello-necessary-tools-powershell-and-azure-cli"></a><span data-ttu-id="fe3e9-257">Настроить необходимые средства hello Azure CLI и PowerShell</span><span class="sxs-lookup"><span data-stu-id="fe3e9-257">Set up hello necessary tools, PowerShell and Azure CLI</span></span>
* [<span data-ttu-id="fe3e9-258">Как toosetup PowerShell</span><span class="sxs-lookup"><span data-stu-id="fe3e9-258">How toosetup PowerShell</span></span>](/powershell/azure/overview)
* [<span data-ttu-id="fe3e9-259">Как toosetup Azure CLI</span><span class="sxs-lookup"><span data-stu-id="fe3e9-259">How toosetup Azure CLI</span></span>](../cli-install-nodejs.md)

### <a name="41-create-a-user-vm-image"></a><span data-ttu-id="fe3e9-260">4.1. Создание пользовательского образа виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="fe3e9-260">4.1 Create a user VM image</span></span>
#### <a name="capture-vm"></a><span data-ttu-id="fe3e9-261">Запись виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="fe3e9-261">Capture VM</span></span>
<span data-ttu-id="fe3e9-262">Прочитайте приведенные ниже рекомендации о захвате hello виртуальную Машину с помощью API, PowerShell или Azure CLI ссылки hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-262">Please read hello links given below for guidance on capturing hello VM using API/PowerShell/Azure CLI.</span></span>

* [<span data-ttu-id="fe3e9-263">API</span><span class="sxs-lookup"><span data-stu-id="fe3e9-263">API</span></span>](https://msdn.microsoft.com/library/mt163560.aspx)
* [<span data-ttu-id="fe3e9-264">PowerShell</span><span class="sxs-lookup"><span data-stu-id="fe3e9-264">PowerShell</span></span>](../virtual-machines/windows/capture-image.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="fe3e9-265">интерфейс командной строки Azure</span><span class="sxs-lookup"><span data-stu-id="fe3e9-265">Azure CLI</span></span>](../virtual-machines/linux/capture-image.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

### <a name="generalize-image"></a><span data-ttu-id="fe3e9-266">Подготовка образа</span><span class="sxs-lookup"><span data-stu-id="fe3e9-266">Generalize Image</span></span>
<span data-ttu-id="fe3e9-267">Прочитайте приведенные ниже рекомендации о захвате hello виртуальную Машину с помощью API, PowerShell или Azure CLI ссылки hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-267">Please read hello links given below for guidance on capturing hello VM using API/PowerShell/Azure CLI.</span></span>

* [<span data-ttu-id="fe3e9-268">API</span><span class="sxs-lookup"><span data-stu-id="fe3e9-268">API</span></span>](https://msdn.microsoft.com/library/mt269439.aspx)
* [<span data-ttu-id="fe3e9-269">PowerShell</span><span class="sxs-lookup"><span data-stu-id="fe3e9-269">PowerShell</span></span>](../virtual-machines/windows/capture-image.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="fe3e9-270">интерфейс командной строки Azure</span><span class="sxs-lookup"><span data-stu-id="fe3e9-270">Azure CLI</span></span>](../virtual-machines/linux/capture-image.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

### <a name="42-deploy-a-vm-from-a-user-vm-image"></a><span data-ttu-id="fe3e9-271">4.2 Развертывание виртуальной машины из пользовательского образа VM</span><span class="sxs-lookup"><span data-stu-id="fe3e9-271">4.2 Deploy a VM from a user VM image</span></span>
<span data-ttu-id="fe3e9-272">toodeploy виртуальной Машины из образа виртуальной Машины пользователя может использовать текущий hello [портал Azure](https://manage.windowsazure.com) или PowerShell.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-272">toodeploy a VM from a user VM image, you can use hello current [Azure portal](https://manage.windowsazure.com) or PowerShell.</span></span>

<span data-ttu-id="fe3e9-273">**Развертывание виртуальной Машины из hello текущей версией портала Azure**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-273">**Deploy a VM from hello current Azure portal**</span></span>

1. <span data-ttu-id="fe3e9-274">Go слишком**New** > **вычислений** > **виртуальной машины** > **из коллекции**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-274">Go too**New** > **Compute** > **Virtual machine** > **From gallery**.</span></span>

    ![рисунок][img-manage-vm-new]
2. <span data-ttu-id="fe3e9-276">Go слишком**Мои образы**, а затем выберите hello образа виртуальной Машины, из которых toodeploy виртуальной Машины:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-276">Go too**My images**, and then select hello VM image from which toodeploy a VM:</span></span>

   1. <span data-ttu-id="fe3e9-277">Оплата особое внимание toowhich изображение, выбрать, так как hello **Мои образы** представлении перечислены образов операционных систем и образы виртуальных Машин.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-277">Pay close attention toowhich image you select, because hello **My images** view lists both operating system images and VM images.</span></span>
   2. <span data-ttu-id="fe3e9-278">Просмотрев hello число дисков может помочь определить тип образа выполняется развертывание, так как большинство hello образов виртуальных Машин имеют более одного диска.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-278">Looking at hello number of disks can help determine what type of image you are deploying, because hello majority of VM images have more than one disk.</span></span> <span data-ttu-id="fe3e9-279">Однако это все еще возможно toohave образа виртуальной Машины с только одной операционной системы диска, при котором будет иметь **число дисков** задать too1.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-279">However, it is still possible toohave a VM image with only a single operating system disk, which would then have **Number of disks** set too1.</span></span>

      ![рисунок][img-manage-vm-select]
3. <span data-ttu-id="fe3e9-281">Выполните мастер создания виртуальной Машины hello и укажите имя виртуальной Машины hello, размер виртуальной Машины, расположение, имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-281">Follow hello VM creation wizard and specify hello VM name, VM size, location, user name, and password.</span></span>

<span data-ttu-id="fe3e9-282">**Развертывание виртуальной машины из PowerShell**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-282">**Deploy a VM from PowerShell**</span></span>

<span data-ttu-id="fe3e9-283">toodeploy большая ВМ из hello обобщенный образ виртуальной Машины только что создан, можно использовать следующие командлеты hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-283">toodeploy a large VM from hello generalized VM image just created, you can use hello following cmdlets.</span></span>

    $img = Get-AzureVMImage -ImageName "myVMImage"
    $user = "user123"
    $pass = "adminPassword123"
    $myVM = New-AzureVMConfig -Name "VMImageVM" -InstanceSize "Large" -ImageName $img.ImageName | Add-AzureProvisioningConfig -Windows -AdminUsername $user -Password $pass
    New-AzureVM -ServiceName "VMImageCloudService" -VMs $myVM -Location "West US" -WaitForBoot

> [!IMPORTANT]
> <span data-ttu-id="fe3e9-284">Дополнительные сведения см. в статье [Как устранить распространенные неполадки, возникающие в процессе создания виртуального жесткого диска].</span><span class="sxs-lookup"><span data-stu-id="fe3e9-284">Please refer [Troubleshooting common issues encountered during VHD creation] for additional assistance.</span></span>
>
>

## <a name="5-obtain-certification-for-your-vm-image"></a><span data-ttu-id="fe3e9-285">5. Получение сертификата для образа виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="fe3e9-285">5. Obtain certification for your VM image</span></span>
<span data-ttu-id="fe3e9-286">Следующий этап подготовки образа виртуальной Машины для hello Azure Marketplace Hello — toohave, оно Сертифицировано.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-286">hello next step in preparing your VM image for hello Azure Marketplace is toohave it certified.</span></span>

<span data-ttu-id="fe3e9-287">Этот процесс включает в себя запуск средства специальные сертификации, отправка toohello результаты проверки hello Azure контейнера, где размещаются виртуальные жесткие диски, добавив предложение, определение ваш SKU и отправка ВМ изображений для сертификации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-287">This process includes running a special certification tool, uploading hello verification results toohello Azure container where your VHDs reside, adding an offer, defining your SKU, and submitting your VM image for certification.</span></span>

### <a name="51-download-and-run-hello-certification-test-tool-for-azure-certified"></a><span data-ttu-id="fe3e9-288">5.1 Загрузите и запустите средство тестирования сертификации hello для Azure Certified</span><span class="sxs-lookup"><span data-stu-id="fe3e9-288">5.1 Download and run hello Certification Test Tool for Azure Certified</span></span>
<span data-ttu-id="fe3e9-289">Средство сертификации Hello выполняется на работающей виртуальной Машины, подготовленного образа виртуальной Машины пользователя, tooensure, hello образа виртуальной Машины не совместима с Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-289">hello certification tool runs on a running VM, provisioned from your user VM image, tooensure that hello VM image is compatible with Microsoft Azure.</span></span> <span data-ttu-id="fe3e9-290">Проверит, что выполнены рекомендации hello и требования о подготовке вашего виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-290">It will verify that hello guidance and requirements about preparing your VHD have been met.</span></span> <span data-ttu-id="fe3e9-291">Hello средства hello выводится отчет о совместимости, которого должна быть загружена на hello портал публикации во время запроса сертификации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-291">hello output of hello tool is a compatibility report, which should be uploaded on hello Publishing Portal while requesting certification.</span></span>

<span data-ttu-id="fe3e9-292">можно использовать средство сертификации Hello с Windows и виртуальных машин Linux.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-292">hello certification tool can be used with both Windows and Linux VMs.</span></span> <span data-ttu-id="fe3e9-293">Он подключается виртуальных машин на основе tooWindows через PowerShell, а tooLinux виртуальных машин с помощью SSH.Net:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-293">It connects tooWindows-based VMs via PowerShell and connects tooLinux VMs via SSH.Net:</span></span>

1. <span data-ttu-id="fe3e9-294">Сначала загрузите средство сертификации hello в hello [узла центра загрузки Майкрософт][link-msft-download].</span><span class="sxs-lookup"><span data-stu-id="fe3e9-294">First, download hello certification tool at hello [Microsoft download site][link-msft-download].</span></span>
2. <span data-ttu-id="fe3e9-295">Откройте средство сертификации hello и нажмите кнопку hello **запустить новый тест** кнопки.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-295">Open hello certification tool, and then click hello **Start New Test** button.</span></span>
3. <span data-ttu-id="fe3e9-296">Из hello **тестирования сведения** экране, введите имя для hello тестового запуска.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-296">From hello **Test Information** screen, enter a name for hello test run.</span></span>
4. <span data-ttu-id="fe3e9-297">Выберите операционную систему для вашей виртуальной машины — Linux или Windows.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-297">Choose whether your VM is on Linux or Windows.</span></span> <span data-ttu-id="fe3e9-298">В зависимости от выбранного выберите доступные параметры настройки hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-298">Depending on which you choose, select hello subsequent options.</span></span>

### <a name="connect-hello-certification-tool-tooa-linux-vm-image"></a><span data-ttu-id="fe3e9-299">**Подключение tooa средство сертификации hello образ операционной системы Linux**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-299">**Connect hello certification tool tooa Linux VM image**</span></span>
1. <span data-ttu-id="fe3e9-300">Режим проверки подлинности SSH выберите hello: файл пароля или ключа.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-300">Select hello SSH authentication mode: password or key file.</span></span>
2. <span data-ttu-id="fe3e9-301">При использовании проверки подлинности на основе пароля, введите имя hello доменных имен (DNS), имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-301">If using password-­based authentication, enter hello Domain Name System (DNS) name, user name, and password.</span></span>
3. <span data-ttu-id="fe3e9-302">При использовании файла ключа проверки подлинности, введите hello DNS-имя, имя пользователя и расположение закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-302">If using key file authentication, enter hello DNS name, user name, and private key location.</span></span>

   ![Проверка пароля для образа виртуальной машины Linux][img-cert-vm-pswd-lnx]

   ![Проверка подлинности файла ключа для образа виртуальной машины Linux][img-cert-vm-key-lnx]

### <a name="connect-hello-certification-tool-tooa-windows-based-vm-image"></a><span data-ttu-id="fe3e9-305">**Подключение сертификации средство hello tooa-образ виртуальной Машины на основе Windows**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-305">**Connect hello certification tool tooa Windows-based VM image**</span></span>
1. <span data-ttu-id="fe3e9-306">Введите DNS виртуальной Машины hello полное доменное имя (например, MyVMName.Cloudapp.net).</span><span class="sxs-lookup"><span data-stu-id="fe3e9-306">Enter hello fully qualified VM DNS name (for example, MyVMName.Cloudapp.net).</span></span>
2. <span data-ttu-id="fe3e9-307">Введите имя пользователя hello и пароль.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-307">Enter hello user name and password.</span></span>

   ![Проверка пароля для образа виртуальной машины Windows][img-cert-vm-pswd-win]

<span data-ttu-id="fe3e9-309">После того как выбрана hello правильные параметры для образа виртуальной Машины на основе Windows или Linux, выберите **проверить подключение** tooensure, SSH.Net или PowerShell имеет допустимое соединение в целях тестирования.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-309">After you have selected hello correct options for your Linux or Windows-based VM image, select **Test Connection** tooensure that SSH.Net or PowerShell has a valid connection for testing purposes.</span></span> <span data-ttu-id="fe3e9-310">После установки подключения, выберите **Далее** toostart hello теста.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-310">After a connection is established, select **Next** toostart hello test.</span></span>

<span data-ttu-id="fe3e9-311">После завершения теста hello результаты hello (Pass/Fail/предупреждение) для каждого элемента теста будут получены.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-311">When hello test is complete, you will receive hello results (Pass/Fail/Warning) for each test element.</span></span>

![Тестовые случаи для образа виртуальной машины Linux][img-cert-vm-test-lnx]

![Тестовые случаи для образа виртуальной машины Windows][img-cert-vm-test-win]

<span data-ttu-id="fe3e9-314">В случае сбоя любой тестов hello образ не пройти сертификацию.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-314">If any of hello tests fail, your image will not be certified.</span></span> <span data-ttu-id="fe3e9-315">В этом случае ознакомьтесь с требованиями hello и внесите необходимые изменения.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-315">If this occurs, review hello requirements and make any necessary changes.</span></span>

<span data-ttu-id="fe3e9-316">После hello автоматических тестов, на образ виртуальной Машины через экран анкеты предлагается tooprovide дополнительных входных данных.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-316">After hello automated test, you are asked tooprovide additional input on your VM image via a questionnaire screen.</span></span>  <span data-ttu-id="fe3e9-317">Вопросы hello, а затем выберите **Далее**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-317">Complete hello questions, and then select **Next**.</span></span>

![Анкета средства сертификации][img-cert-vm-questionnaire]

![Анкета средства сертификации][img-cert-vm-questionnaire-2]

<span data-ttu-id="fe3e9-320">После завершения hello анкеты, можно предоставить дополнительные сведения, такие как сведения о SSH доступа для hello образ операционной системы Linux, а также дается описание любой сбой оценки.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-320">After you have completed hello questionnaire, you can provide additional information such as SSH access information for hello Linux VM image and an explanation for any failed assessments.</span></span> <span data-ttu-id="fe3e9-321">Можно загрузить результаты теста hello и файлы журнала для hello выполнения тестовых случаев в ответы toohello сложения tooyour анкеты.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-321">You can download hello test results and log files for hello executed test cases in addition tooyour answers toohello questionnaire.</span></span> <span data-ttu-id="fe3e9-322">Сохранить результаты hello в hello же контейнере, что виртуальные жесткие диски.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-322">Save hello results in hello same container as your VHDs.</span></span>

![Сохранение результатов теста для сертификации][img-cert-vm-results]

### <a name="52-get-hello-shared-access-signature-uri-for-your-vm-images"></a><span data-ttu-id="fe3e9-324">5.2 Получите URI подписи коллективного доступа hello для образов виртуальных Машин</span><span class="sxs-lookup"><span data-stu-id="fe3e9-324">5.2 Get hello shared access signature URI for your VM images</span></span>
<span data-ttu-id="fe3e9-325">Во время процесса публикации hello укажите hello универсальных кодов ресурсов (URI), ведущих tooeach из hello виртуальных жестких дисков, созданных для вашей конфигурации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-325">During hello publishing process, you specify hello uniform resource identifiers (URIs) that lead tooeach of hello VHDs you have created for your SKU.</span></span> <span data-ttu-id="fe3e9-326">Корпорации Майкрософт потребуются доступа toothese виртуальных жестких дисков во время процесса сертификации hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-326">Microsoft needs access toothese VHDs during hello certification process.</span></span> <span data-ttu-id="fe3e9-327">Поэтому необходимо toocreate URI подписи коллективного доступа для каждого виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-327">Therefore, you need toocreate a shared access signature URI for each VHD.</span></span> <span data-ttu-id="fe3e9-328">Это URI, который следует вводить в hello **изображения** на вкладке hello портал публикации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-328">This is hello URI that should be entered in the **Images** tab in hello Publishing Portal.</span></span>

<span data-ttu-id="fe3e9-329">подпись общего доступа Hello создан URI должны соблюдаться следующие требования к toohello:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-329">hello shared access signature URI created should adhere toohello following requirements:</span></span>

* <span data-ttu-id="fe3e9-330">Для создания URI подписанного URL-адреса для виртуальных жестких дисков достаточно разрешений на создание списков и на чтение.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-330">When generating shared access signature URIs for your VHDs, List and Read­ permissions are sufficient.</span></span> <span data-ttu-id="fe3e9-331">Не предоставляйте разрешения на запись или удаление.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-331">Do not provide Write or Delete access.</span></span>
* <span data-ttu-id="fe3e9-332">Длительность Hello для доступа должна быть не менее трех (3) недель от, при создании URI подписи коллективного доступа hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-332">hello duration for access should be a minimum of three (3) weeks from when hello shared access signature URI is created.</span></span>
* <span data-ttu-id="fe3e9-333">toosafeguard для hello выберите день, предшествующий hello текущей даты времени в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-333">toosafeguard for UTC time, select hello day before hello current date.</span></span> <span data-ttu-id="fe3e9-334">Например если hello текущая дата равна 6 октября 2014 г., выберите 10/5/2014.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-334">For example, if hello current date is October 6, 2014, select 10/5/2014.</span></span>

<span data-ttu-id="fe3e9-335">URL-адрес SAS может быть создан в несколько способов tooshare вашего виртуального жесткого диска для Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-335">SAS URL can be generated in multiple ways tooshare your VHD for Azure Marketplace.</span></span>
<span data-ttu-id="fe3e9-336">Следующие являются hello 3 Рекомендованные средства:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-336">Following are hello 3 recommended tools:</span></span>

1.  <span data-ttu-id="fe3e9-337">обозреватель хранилищ Azure</span><span class="sxs-lookup"><span data-stu-id="fe3e9-337">Azure Storage Explorer</span></span>
2.  <span data-ttu-id="fe3e9-338">Обозреватель хранилищ Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="fe3e9-338">Microsoft Storage Explorer</span></span>
3.  <span data-ttu-id="fe3e9-339">Инфраструктура CLI Azure</span><span class="sxs-lookup"><span data-stu-id="fe3e9-339">Azure CLI</span></span>

<span data-ttu-id="fe3e9-340">**Обозреватель хранилищ Azure (рекомендуется для пользователей Windows)**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-340">**Azure Storage Explorer (Recommended for Windows Users)**</span></span>

<span data-ttu-id="fe3e9-341">Ниже приведены шаги hello для формирования URL-адрес SAS с помощью обозревателя хранилищ Azure</span><span class="sxs-lookup"><span data-stu-id="fe3e9-341">Following are hello steps for generating SAS URL by using Azure Storage Explorer</span></span>

1. <span data-ttu-id="fe3e9-342">Скачайте [обозреватель хранилищ Azure версии 6 (предварительная версия 3)](https://azurestorageexplorer.codeplex.com/) на сайте CodePlex.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-342">Download [Azure Storage Explorer 6 Preview 3](https://azurestorageexplorer.codeplex.com/) from CodePlex.</span></span> <span data-ttu-id="fe3e9-343">Go слишком[предварительной версии 6 обозреватель хранилища Azure](https://azurestorageexplorer.codeplex.com/) и нажмите кнопку **«Загрузки»**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-343">Go too[Azure Storage Explorer 6 Preview](https://azurestorageexplorer.codeplex.com/) and click **"Downloads"**.</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_01.png)

2. <span data-ttu-id="fe3e9-345">Скачайте и распакуйте файл [AzureStorageExplorer6Preview3.zip](https://azurestorageexplorer.codeplex.com/downloads/get/891668), а затем установите его.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-345">Download [AzureStorageExplorer6Preview3.zip](https://azurestorageexplorer.codeplex.com/downloads/get/891668) and install after unzipping it.</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_02.png)

3. <span data-ttu-id="fe3e9-347">После установки, откройте приложение hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-347">After it is installed, open hello application.</span></span>
4. <span data-ttu-id="fe3e9-348">Щелкните **Добавить учетную запись**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-348">Click **Add Account**.</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_03.png)

5. <span data-ttu-id="fe3e9-350">Укажите имя учетной записи хранения hello, ключ учетной записи хранилища и домен конечные точки хранилища.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-350">Specify hello storage account name, storage account key, and storage endpoints domain.</span></span> <span data-ttu-id="fe3e9-351">Это hello учетной записи хранилища в подписке Azure, где была сохранена вашего виртуального жесткого диска на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-351">This is hello storage account in your Azure subscription where you have kept your VHD on Azure portal.</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_04.png)

6. <span data-ttu-id="fe3e9-353">После подключения обозревателя хранилищ Azure tooyour конкретной учетной записи хранения, он будет запущен отображение всех hello содержит внутри hello учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-353">Once Azure Storage Explorer is connected tooyour specific storage account, it will start showing all of hello contains within hello storage account.</span></span> <span data-ttu-id="fe3e9-354">Выберите контейнер hello, куда был скопирован hello операционной системы диска VHD-файл (также диски с данными, если они применимы для вашего сценария).</span><span class="sxs-lookup"><span data-stu-id="fe3e9-354">Select hello container where you copied hello operating system disk VHD file (also data disks if they are applicable for your scenario).</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_05.png)

7. <span data-ttu-id="fe3e9-356">После выбора hello контейнер больших двоичных объектов, обозреватель хранилищ Azure начинается отображение файлов hello в контейнере hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-356">After selecting hello blob container, Azure Storage Explorer starts showing hello files within hello container.</span></span> <span data-ttu-id="fe3e9-357">Выберите файл образа hello (.vhd), который должен toobe отправлен.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-357">Select hello image file (.vhd) that needs toobe submitted.</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_06.png)

8.  <span data-ttu-id="fe3e9-359">После выбора hello VHD-файл в контейнере hello щелкните hello **безопасности** вкладки.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-359">After selecting hello .vhd file in hello container, click hello **Security** tab.</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_07.png)

9.  <span data-ttu-id="fe3e9-361">В hello **безопасности контейнер больших двоичных объектов** диалоговое окно, оставьте hello параметрами по умолчанию hello **уровень доступа** , а затем щелкните **подписей общего доступа** вкладки.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-361">In hello **Blob Container Security** dialog box, leave hello defaults on hello **Access Level** tab, and then click **Shared Access Signatures** tab.</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_08.png)

10. <span data-ttu-id="fe3e9-363">Выполните действия hello ниже toogenerate URI подписи коллективного доступа для hello VHD-образ.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-363">Follow hello steps below toogenerate a shared access signature URI for hello .vhd image:</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_09.png)

    <span data-ttu-id="fe3e9-365">а.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-365">a.</span></span> <span data-ttu-id="fe3e9-366">**Доступ разрешен из:** toosafeguard для hello выберите день, предшествующий hello текущей даты времени в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-366">**Access permitted from:** toosafeguard for UTC time, select hello day before hello current date.</span></span> <span data-ttu-id="fe3e9-367">Например если hello текущая дата равна 6 октября 2014 г., выберите 10/5/2014.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-367">For example, if hello current date is October 6, 2014, select 10/5/2014.</span></span>

    <span data-ttu-id="fe3e9-368">b.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-368">b.</span></span> <span data-ttu-id="fe3e9-369">**Доступ разрешен для:** выберите дату, которая имеет по крайней мере 3 недель после hello **доступ разрешен из** даты.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-369">**Access permitted to:** Select a date that is at least 3 weeks after hello **Access permitted from** date.</span></span>

    <span data-ttu-id="fe3e9-370">c.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-370">c.</span></span> <span data-ttu-id="fe3e9-371">**Разрешены действия:** выберите hello **списка** и **чтения** разрешения.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-371">**Actions permitted:** Select hello **List** and **Read** permissions.</span></span>

    <span data-ttu-id="fe3e9-372">d.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-372">d.</span></span> <span data-ttu-id="fe3e9-373">Если вы выбрали файл .vhd правильно, то файл отображается в **больших двоичных объектов tooaccess имя** с расширением .vhd.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-373">If you have selected your .vhd file correctly, then your file appears in **Blob name tooaccess** with extension .vhd.</span></span>

    <span data-ttu-id="fe3e9-374">д.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-374">e.</span></span> <span data-ttu-id="fe3e9-375">Щелкните **Создать подпись**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-375">Click **Generate Signature**.</span></span>

    <span data-ttu-id="fe3e9-376">f.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-376">f.</span></span> <span data-ttu-id="fe3e9-377">В **создается общий доступ подписи URI этого контейнера**, проверьте следующие как видно выше hello:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-377">In **Generated Shared Access Signature URI of this container**, check for hello following as highlighted above:</span></span>

       - <span data-ttu-id="fe3e9-378">Убедитесь, что имя файла изображения и **«.vhd»** в hello URI.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-378">Make sure that your image file name and **".vhd"** are in hello URI.</span></span>
       - <span data-ttu-id="fe3e9-379">Убедитесь, что в конце hello hello подписи **«= rl»** отображается.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-379">At hello end of hello signature, make sure that **"=rl"** appears.</span></span> <span data-ttu-id="fe3e9-380">Это показывает, что права на чтение и создание списков успешно предоставлены.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-380">This demonstrates that Read and List access was provided successfully.</span></span>
       - <span data-ttu-id="fe3e9-381">Убедитесь, что в середине hello подписи **«sr = c»** отображается.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-381">In middle of hello signature, make sure that **"sr=c"** appears.</span></span> <span data-ttu-id="fe3e9-382">Это означает, что у вас есть доступ на уровне контейнера.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-382">This demonstrates that you have container level access</span></span>

11. <span data-ttu-id="fe3e9-383">tooensure, hello созданный общих работы URI подписи доступа, нажмите кнопку **тест в обозревателе**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-383">tooensure that hello generated shared access signature URI works, click **Test in Browser**.</span></span> <span data-ttu-id="fe3e9-384">Он должен запустить процесс загрузки hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-384">It should start hello download process.</span></span>

12. <span data-ttu-id="fe3e9-385">Скопируйте URI подписи коллективного доступа hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-385">Copy hello shared access signature URI.</span></span> <span data-ttu-id="fe3e9-386">Это toopaste URI hello в hello портал публикации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-386">This is hello URI toopaste into hello Publishing Portal.</span></span>

13. <span data-ttu-id="fe3e9-387">Повторите шаги 6-10 для каждого виртуального жесткого диска в hello SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-387">Repeat steps 6-10 for each VHD in hello SKU.</span></span>

<span data-ttu-id="fe3e9-388">**Обозреватель хранилищ Microsoft Azure (Windows/MAC/Linux)**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-388">**Microsoft Azure Storage Explorer (Windows/MAC/Linux)**</span></span>

<span data-ttu-id="fe3e9-389">Ниже приведены шаги hello для формирования URL-адрес SAS с помощью обозревателя хранилищ Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="fe3e9-389">Following are hello steps for generating SAS URL by using Microsoft Azure Storage Explorer</span></span>

1.  <span data-ttu-id="fe3e9-390">Скачайте обозреватель хранилищ Microsoft Azure Storage Explorer на сайте [http://storageexplorer.com/](http://storageexplorer.com/).</span><span class="sxs-lookup"><span data-stu-id="fe3e9-390">Download Microsoft Azure Storage Explorer form [http://storageexplorer.com/](http://storageexplorer.com/) website.</span></span> <span data-ttu-id="fe3e9-391">Go слишком[Microsoft Azure Storage Explorer](http://storageexplorer.com/releasenotes.html) и нажмите кнопку **«Загрузить для Windows»**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-391">Go too[Microsoft Azure Storage Explorer](http://storageexplorer.com/releasenotes.html) and click **“Download for Windows”**.</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_10.png)

2.  <span data-ttu-id="fe3e9-393">После установки, откройте приложение hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-393">After it is installed, open hello application.</span></span>

3.  <span data-ttu-id="fe3e9-394">Щелкните **Добавить учетную запись**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-394">Click **Add Account**.</span></span>

4.  <span data-ttu-id="fe3e9-395">Настройка подписки Microsoft Azure Storage Explorer tooyour знак в учетной записи tooyour</span><span class="sxs-lookup"><span data-stu-id="fe3e9-395">Configure Microsoft Azure Storage Explorer tooyour subscription by sign in tooyour account</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_11.png)

5.  <span data-ttu-id="fe3e9-397">Учетная запись toostorage перейдите и выберите hello контейнера</span><span class="sxs-lookup"><span data-stu-id="fe3e9-397">Go toostorage account and select hello Container</span></span>

6.  <span data-ttu-id="fe3e9-398">Выберите **Get Shared Access Signature** (Получить подписанный URL-адрес),</span><span class="sxs-lookup"><span data-stu-id="fe3e9-398">Select **“Get Share Access Signature..”**</span></span> <span data-ttu-id="fe3e9-399">с помощью правой кнопкой мыши из hello **контейнера**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-399">by using Right Click of hello **container**</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_12.png)

7.  <span data-ttu-id="fe3e9-401">Обновите время начала, время окончания срока действия и разрешения, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-401">Update Start time, Expiry time and Permissions as per following</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_13.png)

    <span data-ttu-id="fe3e9-403">а.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-403">a.</span></span>  <span data-ttu-id="fe3e9-404">**Время начала:** toosafeguard для hello выберите день, предшествующий hello текущей даты времени в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-404">**Start Time:** toosafeguard for UTC time, select hello day before hello current date.</span></span> <span data-ttu-id="fe3e9-405">Например если hello текущая дата равна 6 октября 2014 г., выберите 10/5/2014.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-405">For example, if hello current date is October 6, 2014, select 10/5/2014.</span></span>

    <span data-ttu-id="fe3e9-406">b.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-406">b.</span></span>  <span data-ttu-id="fe3e9-407">**Время окончания:** выберите дату, которая имеет по крайней мере 3 недель после hello **время начала** даты.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-407">**Expiry Time:** Select a date that is at least 3 weeks after hello **Start Time** date.</span></span>

    <span data-ttu-id="fe3e9-408">c.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-408">c.</span></span>  <span data-ttu-id="fe3e9-409">**Разрешения:** выберите hello **списка** и **чтения** разрешения</span><span class="sxs-lookup"><span data-stu-id="fe3e9-409">**Permissions:** Select hello **List** and **Read** permissions</span></span>

8.  <span data-ttu-id="fe3e9-410">Скопируйте подписанный URL-адрес контейнера.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-410">Copy Container shared access signature URI</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_14.png)

    <span data-ttu-id="fe3e9-412">Созданный URL-адрес SAS для контейнера уровень и теперь нам требуется tooadd имени виртуального жесткого диска в нем.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-412">Generated SAS URL is for container Level and now we need tooadd VHD name in it.</span></span>

    <span data-ttu-id="fe3e9-413">Формат URL-адреса SAS на уровне контейнера:`https://testrg009.blob.core.windows.net/vhds?st=2016-04-22T23%3A05%3A00Z&se=2016-04-30T23%3A05%3A00Z&sp=rl&sv=2015-04-05&sr=c&sig=J3twCQZv4L4EurvugRW2klE2l2EFB9XyM6K9FkuVB58%3D`</span><span class="sxs-lookup"><span data-stu-id="fe3e9-413">Format of Container Level SAS URL: `https://testrg009.blob.core.windows.net/vhds?st=2016-04-22T23%3A05%3A00Z&se=2016-04-30T23%3A05%3A00Z&sp=rl&sv=2015-04-05&sr=c&sig=J3twCQZv4L4EurvugRW2klE2l2EFB9XyM6K9FkuVB58%3D`</span></span>

    <span data-ttu-id="fe3e9-414">Вставить имя виртуального жесткого диска после имени контейнера hello в URL-адрес SAS указанным ниже образом`https://testrg009.blob.core.windows.net/vhds/<VHD NAME>?st=2016-04-22T23%3A05%3A00Z&se=2016-04-30T23%3A05%3A00Z&sp=rl&sv=2015-04-05&sr=c&sig=J3twCQZv4L4EurvugRW2klE2l2EFB9XyM6K9FkuVB58%3D`</span><span class="sxs-lookup"><span data-stu-id="fe3e9-414">Insert VHD name after hello container name in SAS URL as below `https://testrg009.blob.core.windows.net/vhds/<VHD NAME>?st=2016-04-22T23%3A05%3A00Z&se=2016-04-30T23%3A05%3A00Z&sp=rl&sv=2015-04-05&sr=c&sig=J3twCQZv4L4EurvugRW2klE2l2EFB9XyM6K9FkuVB58%3D`</span></span>

    <span data-ttu-id="fe3e9-415">Пример:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-415">Example:</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_15.png)

    <span data-ttu-id="fe3e9-417">TestRGVM201631920152.vhd — hello имени виртуального жесткого диска будет URL-адрес SAS виртуального жесткого диска`https://testrg009.blob.core.windows.net/vhds/TestRGVM201631920152.vhd?st=2016-04-22T23%3A05%3A00Z&se=2016-04-30T23%3A05%3A00Z&sp=rl&sv=2015-04-05&sr=c&sig=J3twCQZv4L4EurvugRW2klE2l2EFB9XyM6K9FkuVB58%3D`</span><span class="sxs-lookup"><span data-stu-id="fe3e9-417">TestRGVM201631920152.vhd is hello VHD Name then VHD SAS URL will be `https://testrg009.blob.core.windows.net/vhds/TestRGVM201631920152.vhd?st=2016-04-22T23%3A05%3A00Z&se=2016-04-30T23%3A05%3A00Z&sp=rl&sv=2015-04-05&sr=c&sig=J3twCQZv4L4EurvugRW2klE2l2EFB9XyM6K9FkuVB58%3D`</span></span>

    - <span data-ttu-id="fe3e9-418">Убедитесь, что имя файла изображения и **«.vhd»** в hello URI.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-418">Make sure that your image file name and **".vhd"** are in hello URI.</span></span>
    - <span data-ttu-id="fe3e9-419">Убедитесь, что в середине hello подписи **«sp = rl»** отображается.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-419">In middle of hello signature, make sure that **"sp=rl"** appears.</span></span> <span data-ttu-id="fe3e9-420">Это показывает, что права на чтение и создание списков успешно предоставлены.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-420">This demonstrates that Read and List access was provided successfully.</span></span>
    - <span data-ttu-id="fe3e9-421">Убедитесь, что в середине hello подписи **«sr = c»** отображается.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-421">In middle of hello signature, make sure that **"sr=c"** appears.</span></span> <span data-ttu-id="fe3e9-422">Это означает, что у вас есть доступ на уровне контейнера.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-422">This demonstrates that you have container level access</span></span>

9.  <span data-ttu-id="fe3e9-423">tooensure, hello works URI подписи общего доступа, созданный, проверить его в браузере.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-423">tooensure that hello generated shared access signature URI works, test it in browser.</span></span> <span data-ttu-id="fe3e9-424">Он должен запустить процесс загрузки hello</span><span class="sxs-lookup"><span data-stu-id="fe3e9-424">It should start hello download process</span></span>

10. <span data-ttu-id="fe3e9-425">Скопируйте URI подписи коллективного доступа hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-425">Copy hello shared access signature URI.</span></span> <span data-ttu-id="fe3e9-426">Это toopaste URI hello в hello портал публикации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-426">This is hello URI toopaste into hello Publishing Portal.</span></span>

11. <span data-ttu-id="fe3e9-427">Повторите эти шаги для каждого виртуального жесткого диска в hello SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-427">Repeat these steps for each VHD in hello SKU.</span></span>

<span data-ttu-id="fe3e9-428">**Azure CLI (рекомендуется для непрерывной интеграции и интеграции со сторонними решениями)**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-428">**Azure CLI (Recommended for Non-Windows & Continuous Integration)**</span></span>

<span data-ttu-id="fe3e9-429">Ниже приведены шаги hello для формирования URL-адрес SAS с помощью Azure CLI</span><span class="sxs-lookup"><span data-stu-id="fe3e9-429">Following are hello steps for generating SAS URL by using Azure CLI</span></span>

1.  <span data-ttu-id="fe3e9-430">Скачайте Microsoft Azure CLI [отсюда](https://azure.microsoft.com/en-in/documentation/articles/xplat-cli-install/).</span><span class="sxs-lookup"><span data-stu-id="fe3e9-430">Download Microsoft Azure CLI from [here](https://azure.microsoft.com/en-in/documentation/articles/xplat-cli-install/).</span></span> <span data-ttu-id="fe3e9-431">Также можно использовать ссылки для **[Windows](http://aka.ms/webpi-azure-cli)** и **[MAC OS](http://aka.ms/mac-azure-cli)**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-431">You can also find different links for **[Windows](http://aka.ms/webpi-azure-cli)** and **[MAC OS](http://aka.ms/mac-azure-cli)**.</span></span>

2.  <span data-ttu-id="fe3e9-432">Установите скачанные файлы.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-432">Once it is downloaded, please install</span></span>

3.  <span data-ttu-id="fe3e9-433">Создайте файл PowerShell, используя следующий код, а затем сохраните его в локальной переменной.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-433">Create a PowerShell file with following code and save it in local</span></span>

          $conn="DefaultEndpointsProtocol=https;AccountName=<StorageAccountName>;AccountKey=<Storage Account Key>"
          azure storage container list vhds -c $conn
          azure storage container sas create vhds rl <Permission End Date> -c $conn --start <Permission Start Date>  

    <span data-ttu-id="fe3e9-434">Обновить hello следующие параметры в выше</span><span class="sxs-lookup"><span data-stu-id="fe3e9-434">Update hello following parameters in above</span></span>

    <span data-ttu-id="fe3e9-435">а.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-435">a.</span></span> <span data-ttu-id="fe3e9-436">**`<StorageAccountName>`**: укажите имя учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-436">**`<StorageAccountName>`**: Give your storage account name</span></span>

    <span data-ttu-id="fe3e9-437">b.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-437">b.</span></span> <span data-ttu-id="fe3e9-438">**`<Storage Account Key>`**: укажите ключ учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-438">**`<Storage Account Key>`**: Give your storage account key</span></span>

    <span data-ttu-id="fe3e9-439">c.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-439">c.</span></span> <span data-ttu-id="fe3e9-440">**`<Permission Start Date>`**: toosafeguard для hello выберите день, предшествующий hello текущей даты времени в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-440">**`<Permission Start Date>`**: toosafeguard for UTC time, select hello day before hello current date.</span></span> <span data-ttu-id="fe3e9-441">Например, если hello текущая дата — 26 октября 2016 г., то значение должно быть 10/25/2016</span><span class="sxs-lookup"><span data-stu-id="fe3e9-441">For example, if hello current date is October 26, 2016, then value should be 10/25/2016</span></span>

    <span data-ttu-id="fe3e9-442">d.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-442">d.</span></span> <span data-ttu-id="fe3e9-443">**`<Permission End Date>`**: Выберите дату, которая имеет по крайней мере 3 недель после hello **Дата начала**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-443">**`<Permission End Date>`**: Select a date that is at least 3 weeks after hello **Start Date**.</span></span> <span data-ttu-id="fe3e9-444">Значение должно быть **02.11.2016**.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-444">Then value should be **11/02/2016**.</span></span>

    <span data-ttu-id="fe3e9-445">Ниже приведен пример кода hello после обновления с соответствующими параметрами</span><span class="sxs-lookup"><span data-stu-id="fe3e9-445">Following is hello example code after updating proper parameters</span></span>

          $conn="DefaultEndpointsProtocol=https;AccountName=st20151;AccountKey=TIQE5QWMKHpT5q2VnF1bb+NUV7NVMY2xmzVx1rdgIVsw7h0pcI5nMM6+DVFO65i4bQevx21dmrflA91r0Vh2Yw=="
          azure storage container list vhds -c $conn
          azure storage container sas create vhds rl 11/02/2016 -c $conn --start 10/25/2016  

4.  <span data-ttu-id="fe3e9-446">Запустите редактор Powershell от имени администратора, а затем откройте файл из шага 3.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-446">Open Powershell editor with “Run as Administrator” mode and open file in step #3.</span></span>

5.  <span data-ttu-id="fe3e9-447">Сценарий выполнения hello и обеспечит hello URL-адрес SAS для доступа на уровне контейнера</span><span class="sxs-lookup"><span data-stu-id="fe3e9-447">Run hello script and it will provide you hello SAS URL for container level access</span></span>

    <span data-ttu-id="fe3e9-448">Ниже будет выдано hello hello подписью SAS и скопируйте hello выделенной части блокнота</span><span class="sxs-lookup"><span data-stu-id="fe3e9-448">Following will be hello output of hello SAS Signature and copy hello highlighted part in a notepad</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/img5.2_16.png)

6.  <span data-ttu-id="fe3e9-450">Теперь вы получите уровня контейнера URL-адрес SAS и потребуется tooadd имени виртуального жесткого диска в нем.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-450">Now you will get container level SAS URL and you need tooadd VHD name in it.</span></span>

    <span data-ttu-id="fe3e9-451">URL-адрес SAS уровня контейнера</span><span class="sxs-lookup"><span data-stu-id="fe3e9-451">Container level SAS URL #</span></span>

    `https://st20151.blob.core.windows.net/vhds?st=2016-10-25T07%3A00%3A00Z&se=2016-11-02T07%3A00%3A00Z&sp=rl&sv=2015-12-11&sr=c&sig=wnEw9RfVKeSmVgqDfsDvC9IHhis4x0fc9Hu%2FW4yvBxk%3D`

7.  <span data-ttu-id="fe3e9-452">Вставить имя виртуального жесткого диска после имени контейнера hello в URL-адрес SAS, как показано ниже`https://st20151.blob.core.windows.net/vhds/<VHDName>?st=2016-10-25T07%3A00%3A00Z&se=2016-11-02T07%3A00%3A00Z&sp=rl&sv=2015-12-11&sr=c&sig=wnEw9RfVKeSmVgqDfsDvC9IHhis4x0fc9Hu%2FW4yvBxk%3D`</span><span class="sxs-lookup"><span data-stu-id="fe3e9-452">Insert VHD name after hello container name in SAS URL as shown below `https://st20151.blob.core.windows.net/vhds/<VHDName>?st=2016-10-25T07%3A00%3A00Z&se=2016-11-02T07%3A00%3A00Z&sp=rl&sv=2015-12-11&sr=c&sig=wnEw9RfVKeSmVgqDfsDvC9IHhis4x0fc9Hu%2FW4yvBxk%3D`</span></span>

    <span data-ttu-id="fe3e9-453">Пример:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-453">Example:</span></span>

    <span data-ttu-id="fe3e9-454">TestRGVM201631920152.vhd — hello имени виртуального жесткого диска будет URL-адрес SAS виртуального жесткого диска</span><span class="sxs-lookup"><span data-stu-id="fe3e9-454">TestRGVM201631920152.vhd is hello VHD Name then VHD SAS URL will be</span></span>

    `https://st20151.blob.core.windows.net/vhds/ TestRGVM201631920152.vhd?st=2016-10-25T07%3A00%3A00Z&se=2016-11-02T07%3A00%3A00Z&sp=rl&sv=2015-12-11&sr=c&sig=wnEw9RfVKeSmVgqDfsDvC9IHhis4x0fc9Hu%2FW4yvBxk%3D`

    - <span data-ttu-id="fe3e9-455">Убедитесь, что имя файла изображения и «.vhd» заданы в hello URI.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-455">Make sure that your image file name and ".vhd" are in hello URI.</span></span>
    -   <span data-ttu-id="fe3e9-456">Убедитесь, что в середине hello подписи «sp = rl» отображается.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-456">In middle of hello signature, make sure that "sp=rl" appears.</span></span> <span data-ttu-id="fe3e9-457">Это показывает, что права на чтение и создание списков успешно предоставлены.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-457">This demonstrates that Read and List access was provided successfully.</span></span>
    -   <span data-ttu-id="fe3e9-458">Убедитесь, что в середине подписи hello, «sr = c» отображается.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-458">In middle of hello signature, make sure that "sr=c" appears.</span></span> <span data-ttu-id="fe3e9-459">Это означает, что у вас есть доступ на уровне контейнера.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-459">This demonstrates that you have container level access</span></span>

8.  <span data-ttu-id="fe3e9-460">tooensure, hello works URI подписи общего доступа, созданный, проверить его в браузере.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-460">tooensure that hello generated shared access signature URI works, test it in browser.</span></span> <span data-ttu-id="fe3e9-461">Он должен запустить процесс загрузки hello</span><span class="sxs-lookup"><span data-stu-id="fe3e9-461">It should start hello download process</span></span>

9.  <span data-ttu-id="fe3e9-462">Скопируйте URI подписи коллективного доступа hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-462">Copy hello shared access signature URI.</span></span> <span data-ttu-id="fe3e9-463">Это toopaste URI hello в hello портал публикации.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-463">This is hello URI toopaste into hello Publishing Portal.</span></span>

10. <span data-ttu-id="fe3e9-464">Повторите эти шаги для каждого виртуального жесткого диска в hello SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-464">Repeat these steps for each VHD in hello SKU.</span></span>


### <a name="53-provide-information-about-hello-vm-image-and-request-certification-in-hello-publishing-portal"></a><span data-ttu-id="fe3e9-465">5.3 содержат сведения о образа виртуальной Машины hello и запросить сертификат hello портал публикации</span><span class="sxs-lookup"><span data-stu-id="fe3e9-465">5.3 Provide information about hello VM image and request certification in hello Publishing Portal</span></span>
<span data-ttu-id="fe3e9-466">После создания предложение, SKU, следует ввести сведения об изображении hello, связанные с этой Конфигурацией:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-466">After you have created your offer and SKU, you should enter hello image details associated with that SKU:</span></span>

1. <span data-ttu-id="fe3e9-467">Go toohello [портал публикации][link-pubportal], а затем войдите с учетной записи продавца.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-467">Go toohello [Publishing Portal][link-pubportal], and then sign in with your seller account.</span></span>
2. <span data-ttu-id="fe3e9-468">Выберите hello **образов виртуальных Машин** вкладки.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-468">Select hello **VM images** tab.</span></span>
3. <span data-ttu-id="fe3e9-469">Идентификатор Hello, перечисленные в начале hello страницы приветствия на самом деле идентификатор предложения hello и hello идентификатора SKU.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-469">hello identifier listed at hello top of hello page is actually hello offer identifier and not hello SKU identifier.</span></span>
4. <span data-ttu-id="fe3e9-470">Заполнить hello свойства в разделе hello **SKU** раздела.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-470">Fill out hello properties under hello **SKUs** section.</span></span>
5. <span data-ttu-id="fe3e9-471">В разделе **семейство операционных систем**, выберите тип hello операционной системы, связанные с операционной системой hello виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-471">Under **Operating system family**, click hello operating system type associated with hello operating system VHD.</span></span>
6. <span data-ttu-id="fe3e9-472">В hello **операционной системы** опишите hello операционной системы.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-472">In hello **Operating system** box, describe hello operating system.</span></span> <span data-ttu-id="fe3e9-473">Рекомендуется использовать формат «Семейство ОС, тип, версия, обновления».</span><span class="sxs-lookup"><span data-stu-id="fe3e9-473">Consider a format such as operating system family, type, version, and updates.</span></span> <span data-ttu-id="fe3e9-474">Например, Windows Server Datacenter 2014 R2.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-474">An example is "Windows Server Datacenter 2014 R2."</span></span>
7. <span data-ttu-id="fe3e9-475">Выберите вверх toosix рекомендуемые размеры виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-475">Select up toosix recommended virtual machine sizes.</span></span> <span data-ttu-id="fe3e9-476">Это рекомендации, которые при их решить toopurchase и развертывание образа получить отображаемых toohello клиента в колонке уровень ценообразования hello в hello портала Azure.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-476">These are recommendations that get displayed toohello customer in hello Pricing tier blade in hello Azure Portal when they decide toopurchase and deploy your image.</span></span> <span data-ttu-id="fe3e9-477">**Это только рекомендации. Клиент Hello — может tooselect любого размера виртуальной Машины, чтобы разместить hello дисков, указанный в образ.**</span><span class="sxs-lookup"><span data-stu-id="fe3e9-477">**These are only recommendations. hello customer is able tooselect any VM size that accommodates hello disks specified in your image.**</span></span>
8. <span data-ttu-id="fe3e9-478">Введите версию hello.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-478">Enter hello version.</span></span> <span data-ttu-id="fe3e9-479">поля версии Hello инкапсулирует tooidentify hello семантическую версию продукта и обновления:</span><span class="sxs-lookup"><span data-stu-id="fe3e9-479">hello version field encapsulates a semantic version tooidentify hello product and its updates:</span></span>
   * <span data-ttu-id="fe3e9-480">Версии должен иметь вид hello X.Y.Z, где X, Y и Z являются целыми числами.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-480">Versions should be of hello form X.Y.Z, where X, Y, and Z are integers.</span></span>
   * <span data-ttu-id="fe3e9-481">Образы в разных номерах SKU могут иметь различные основные и дополнительные версии.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-481">Images in different SKUs can have different major and minor versions.</span></span>
   * <span data-ttu-id="fe3e9-482">Версии в SKU должно быть только добавочные изменения, которые увеличить версию исправления hello (Z из X.Y.Z).</span><span class="sxs-lookup"><span data-stu-id="fe3e9-482">Versions within a SKU should only be incremental changes, which increase hello patch version (Z from X.Y.Z).</span></span>
9. <span data-ttu-id="fe3e9-483">В hello **URL-адрес виртуального жесткого диска ОС** введите hello подписанного URL-адреса URI создан для операционной системы hello виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-483">In hello **OS VHD URL** box, enter hello shared access signature URI created for hello operating system VHD.</span></span>
10. <span data-ttu-id="fe3e9-484">При наличии дисков данных, связанных с этим SKU, выберите hello логическую единицу номера (LUN) toowhich хотелось бы этот toobe диск данных, подключенных после развертывания.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-484">If there are data disks associated with this SKU, select hello logical unit number (LUN) toowhich you would like this data disk toobe mounted upon deployment.</span></span>
11. <span data-ttu-id="fe3e9-485">В hello **URL-адрес VHD X LUN** введите hello подписанного URL-адреса для первого данных hello виртуальный жесткий ДИСК создается URI.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-485">In hello **LUN X VHD URL** box, enter hello shared access signature URI created for hello first data VHD.</span></span>

    ![рисунок](media/marketplace-publishing-vm-image-creation/vm-image-pubportal-skus-3.png)


## <a name="common-sas-url-issues--fixes"></a><span data-ttu-id="fe3e9-487">Распространенные проблемы с URL-адресом SAS и способы их устранения</span><span class="sxs-lookup"><span data-stu-id="fe3e9-487">Common SAS URL issues & fixes</span></span>

|<span data-ttu-id="fe3e9-488">Проблема</span><span class="sxs-lookup"><span data-stu-id="fe3e9-488">Issue</span></span>|<span data-ttu-id="fe3e9-489">Сообщение об ошибке</span><span class="sxs-lookup"><span data-stu-id="fe3e9-489">Failure Message</span></span>|<span data-ttu-id="fe3e9-490">Исправление</span><span class="sxs-lookup"><span data-stu-id="fe3e9-490">Fix</span></span>|<span data-ttu-id="fe3e9-491">Ссылка на документацию</span><span class="sxs-lookup"><span data-stu-id="fe3e9-491">Documentation Link</span></span>|
|---|---|---|---|
|<span data-ttu-id="fe3e9-492">Сбой при копировании образов: символ "?" не найден в URL-адресе SAS.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-492">Failure in copying images - "?" is not found in SAS url</span></span>|<span data-ttu-id="fe3e9-493">Ошибка: копирование образов.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-493">Failure: Copying Images.</span></span> <span data-ttu-id="fe3e9-494">Не удается toodownload больших двоичных объектов с помощью предоставленных универсальный код ресурса SAS.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-494">Not able toodownload blob using provided SAS Uri.</span></span>|<span data-ttu-id="fe3e9-495">Рекомендуется использовать URL-адрес SAS hello обновления средств</span><span class="sxs-lookup"><span data-stu-id="fe3e9-495">Update hello SAS Url using recommended tools</span></span>|[<span data-ttu-id="fe3e9-496">https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/</span><span class="sxs-lookup"><span data-stu-id="fe3e9-496">https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/</span></span>](https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/)|
|<span data-ttu-id="fe3e9-497">Сбой при копировании образов: параметры st и se отсутствуют в URL-адресе SAS.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-497">Failure in copying images - “st” and “se” parameters not in SAS url</span></span>|<span data-ttu-id="fe3e9-498">Ошибка: копирование образов.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-498">Failure: Copying Images.</span></span> <span data-ttu-id="fe3e9-499">Не удается toodownload больших двоичных объектов с помощью предоставленных универсальный код ресурса SAS.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-499">Not able toodownload blob using provided SAS Uri.</span></span>|<span data-ttu-id="fe3e9-500">Обновление hello URL-адрес SAS с датами начала и окончания для него</span><span class="sxs-lookup"><span data-stu-id="fe3e9-500">Update hello SAS Url with Start and End dates on it</span></span>|[<span data-ttu-id="fe3e9-501">https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/</span><span class="sxs-lookup"><span data-stu-id="fe3e9-501">https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/</span></span>](https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/)|
|<span data-ttu-id="fe3e9-502">Сбой при копировании образов: параметр sp=rl отсутствует в URL-адресе SAS.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-502">Failure in copying images - “sp=rl” not in SAS url</span></span>|<span data-ttu-id="fe3e9-503">Ошибка: копирование образов.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-503">Failure: Copying Images.</span></span> <span data-ttu-id="fe3e9-504">Не удается toodownload больших двоичных объектов с помощью предоставленных универсальный код ресурса SAS</span><span class="sxs-lookup"><span data-stu-id="fe3e9-504">Not able toodownload blob using provided SAS Uri</span></span>|<span data-ttu-id="fe3e9-505">Обновление hello URL-адрес SAS с разрешениями, установленными как «Чтение» и «список</span><span class="sxs-lookup"><span data-stu-id="fe3e9-505">Update hello SAS Url with permissions set as “Read” & “List</span></span>|[<span data-ttu-id="fe3e9-506">https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/</span><span class="sxs-lookup"><span data-stu-id="fe3e9-506">https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/</span></span>](https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/)|
|<span data-ttu-id="fe3e9-507">Сбой при копировании образов: URL-адрес SAS в имени VHD-файла содержит пробелы.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-507">Failure in copying images - SAS url have white spaces in vhd name</span></span>|<span data-ttu-id="fe3e9-508">Ошибка: копирование образов.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-508">Failure: Copying Images.</span></span> <span data-ttu-id="fe3e9-509">Не удается toodownload больших двоичных объектов с помощью предоставленных универсальный код ресурса SAS.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-509">Not able toodownload blob using provided SAS Uri.</span></span>|<span data-ttu-id="fe3e9-510">Обновление hello URL-адрес SAS без пробелов</span><span class="sxs-lookup"><span data-stu-id="fe3e9-510">Update hello SAS Url without white spaces</span></span>|[<span data-ttu-id="fe3e9-511">https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/</span><span class="sxs-lookup"><span data-stu-id="fe3e9-511">https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/</span></span>](https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/)|
|<span data-ttu-id="fe3e9-512">Сбой при копировании образов: ошибка авторизации URL-адреса SAS.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-512">Failure in copying images – SAS Url Authorization error</span></span>|<span data-ttu-id="fe3e9-513">Ошибка: копирование образов.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-513">Failure: Copying Images.</span></span> <span data-ttu-id="fe3e9-514">Не удается toodownload большой двоичный объект из-за ошибки tooauthorization</span><span class="sxs-lookup"><span data-stu-id="fe3e9-514">Not able toodownload blob due tooauthorization error</span></span>|<span data-ttu-id="fe3e9-515">Повторное создание hello URL-адрес SAS</span><span class="sxs-lookup"><span data-stu-id="fe3e9-515">Regenerate hello SAS Url</span></span>|[<span data-ttu-id="fe3e9-516">https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/</span><span class="sxs-lookup"><span data-stu-id="fe3e9-516">https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/</span></span>](https://azure.microsoft.com/en-us/documentation/articles/storage-dotnet-shared-access-signature-part-1/)|


## <a name="next-step"></a><span data-ttu-id="fe3e9-517">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="fe3e9-517">Next step</span></span>
<span data-ttu-id="fe3e9-518">После завершения подробности номера SKU hello, можно переместить вперед toohello [руководство по содержимому маркетинга Azure Marketplace][link-pushstaging].</span><span class="sxs-lookup"><span data-stu-id="fe3e9-518">After you are done with hello SKU details, you can move forward toohello [Azure Marketplace marketing content guide][link-pushstaging].</span></span> <span data-ttu-id="fe3e9-519">В этот шаг hello процесс публикации, необходимо предоставить hello маркетинг содержимого, ценах и другие сведения о необходимости предварительного слишком**Step 3: тестирование ВМ предоставляют в промежуточной**, где протестировать различные сценарии использования перед развертыванием Hello предложение toohello Azure Marketplace для общей видимостью и покупки.</span><span class="sxs-lookup"><span data-stu-id="fe3e9-519">In that step of hello publishing process, you provide hello marketing content, pricing, and other information necessary prior too**Step 3: Testing your VM offer in staging**, where you test various use-case scenarios before deploying hello offer toohello Azure Marketplace for public visibility and purchase.</span></span>  

## <a name="see-also"></a><span data-ttu-id="fe3e9-520">См. также</span><span class="sxs-lookup"><span data-stu-id="fe3e9-520">See also</span></span>
* [<span data-ttu-id="fe3e9-521">Приступая к работе: как toopublish toohello предложение Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="fe3e9-521">Getting started: How toopublish an offer toohello Azure Marketplace</span></span>](marketplace-publishing-getting-started.md)

[img-acom-1]:media/marketplace-publishing-vm-image-creation/vm-image-acom-datacenter.png
[img-portal-vm-size]:media/marketplace-publishing-vm-image-creation/vm-image-portal-size.png
[img-portal-vm-create]:media/marketplace-publishing-vm-image-creation/vm-image-portal-create-vm.png
[img-portal-vm-location]:media/marketplace-publishing-vm-image-creation/vm-image-portal-location.png
[img-portal-vm-rdp]:media/marketplace-publishing-vm-image-creation/vm-image-portal-rdp.png
[img-azstg-add]:media/marketplace-publishing-vm-image-creation/vm-image-storage-add.png
[img-manage-vm-new]:media/marketplace-publishing-vm-image-creation/vm-image-manage-new.png
[img-manage-vm-select]:media/marketplace-publishing-vm-image-creation/vm-image-manage-select.png
[img-cert-vm-key-lnx]:media/marketplace-publishing-vm-image-creation/vm-image-certification-keyfile-linux.png
[img-cert-vm-pswd-lnx]:media/marketplace-publishing-vm-image-creation/vm-image-certification-password-linux.png
[img-cert-vm-pswd-win]:media/marketplace-publishing-vm-image-creation/vm-image-certification-password-win.png
[img-cert-vm-test-lnx]:media/marketplace-publishing-vm-image-creation/vm-image-certification-test-sample-linux.png
[img-cert-vm-test-win]:media/marketplace-publishing-vm-image-creation/vm-image-certification-test-sample-win.png
[img-cert-vm-results]:media/marketplace-publishing-vm-image-creation/vm-image-certification-results.png
[img-cert-vm-questionnaire]:media/marketplace-publishing-vm-image-creation/vm-image-certification-questionnaire.png
[img-cert-vm-questionnaire-2]:media/marketplace-publishing-vm-image-creation/vm-image-certification-questionnaire-2.png
[img-pubportal-vm-skus]:media/marketplace-publishing-vm-image-creation/vm-image-pubportal-skus.png
[img-pubportal-vm-skus-2]:media/marketplace-publishing-vm-image-creation/vm-image-pubportal-skus-2.png

[link-pushstaging]:marketplace-publishing-push-to-staging.md
[link-github-waagent]:https://github.com/Azure/WALinuxAgent
[link-azure-codeplex]:https://azurestorageexplorer.codeplex.com/
[link-azure-2]:../storage/blobs/storage-dotnet-shared-access-signature-part-2.md
[link-azure-1]:../storage/common/storage-dotnet-shared-access-signature-part-1.md
[link-msft-download]:http://www.microsoft.com/download/details.aspx?id=44299
[link-technet-3]:https://technet.microsoft.com/library/hh846766.aspx
[link-technet-2]:https://msdn.microsoft.com/library/dn495261.aspx
[link-azure-portal]:https://portal.azure.com
[link-pubportal]:https://publish.windowsazure.com
[link-sql-2014-ent]:http://azure.microsoft.com/marketplace/partners/microsoft/sqlserver2014enterprisewindowsserver2012r2/
[link-sql-2014-std]:http://azure.microsoft.com/marketplace/partners/microsoft/sqlserver2014standardwindowsserver2012r2/
[link-sql-2014-web]:http://azure.microsoft.com/marketplace/partners/microsoft/sqlserver2014webwindowsserver2012r2/
[link-sql-2012-ent]:http://azure.microsoft.com/marketplace/partners/microsoft/sqlserver2012sp2enterprisewindowsserver2012/
[link-sql-2012-std]:http://azure.microsoft.com/marketplace/partners/microsoft/sqlserver2012sp2standardwindowsserver2012/
[link-sql-2012-web]:http://azure.microsoft.com/marketplace/partners/microsoft/sqlserver2012sp2webwindowsserver2012/
[link-datactr-2012-r2]:http://azure.microsoft.com/marketplace/partners/microsoft/windowsserver2012r2datacenter/
[link-datactr-2012]:http://azure.microsoft.com/marketplace/partners/microsoft/windowsserver2012datacenter/
[link-datactr-2008-r2]:http://azure.microsoft.com/marketplace/partners/microsoft/windowsserver2008r2sp1/
[link-acct-creation]:marketplace-publishing-accounts-creation-registration.md
[link-technet-1]:https://technet.microsoft.com/library/hh848454.aspx
[link-azure-vm-2]:./virtual-machines-linux-agent-user-guide/
[link-openssl]:https://www.openssl.org/
[link-intsvc]:http://www.microsoft.com/download/details.aspx?id=41554
[link-python]:https://www.python.org/
