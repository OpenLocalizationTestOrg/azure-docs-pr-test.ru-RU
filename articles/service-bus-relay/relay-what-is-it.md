---
title: "Обзор ретранслятора Azure и его возможностей | Документация Майкрософт"
description: "Общие сведения о ретрансляторе Azure"
services: service-bus-relay
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 1e3e971d-2a24-4f96-a88a-ce3ea2b1a1cd
ms.service: service-bus-relay
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: get-started-article
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: 77ee85db0bcc701514a1a98da9405a79d658d49d
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="what-is-azure-relay"></a><span data-ttu-id="0bd87-103">Что такое ретранслятор Azure?</span><span class="sxs-lookup"><span data-stu-id="0bd87-103">What is Azure Relay?</span></span>

<span data-ttu-id="0bd87-104">Ретранслятор Azure упрощает работу с гибридными приложениями, позволяя безопасно предоставлять в общедоступном облаке службы, используемые в корпоративной сети предприятия, без необходимости открывать подключения брандмауэра или вносить значительные изменения в инфраструктуру корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="0bd87-104">The Azure Relay service facilitates hybrid applications by enabling you to securely expose services that reside within a corporate enterprise network to the public cloud, without having to open a firewall connection, or require intrusive changes to a corporate network infrastructure.</span></span> <span data-ttu-id="0bd87-105">Ретранслятор поддерживает множество различных транспортных протоколов и стандартов веб-служб.</span><span class="sxs-lookup"><span data-stu-id="0bd87-105">Relay supports a variety of different transport protocols and web services standards.</span></span>

<span data-ttu-id="0bd87-106">Служба ретрансляции поддерживает традиционный односторонний трафик, трафик на основе запроса и ответа и трафик в одноранговых сетях.</span><span class="sxs-lookup"><span data-stu-id="0bd87-106">The relay service supports traditional one-way, request/response, and peer-to-peer traffic.</span></span> <span data-ttu-id="0bd87-107">Она также поддерживает распространение событий по сети Интернет для поддержки сценариев публикации/подписки и двунаправленного обмена данными по сокетам, что позволяет повысить эффективность соединений типа "точка-точка".</span><span class="sxs-lookup"><span data-stu-id="0bd87-107">It also supports event distribution at internet-scope to enable publish/subscribe scenarios and bi-directional socket communication for increased point-to-point efficiency.</span></span> 

<span data-ttu-id="0bd87-108">В схеме передачи данных с ретрансляцией локальная служба подключается к службе ретранслятора через исходящий порт и создает двунаправленный сокет для обмена данными с привязкой к конкретному необходимому адресу.</span><span class="sxs-lookup"><span data-stu-id="0bd87-108">In the relayed data transfer pattern, an on-premises service connects to the relay service through an outbound port and creates a bi-directional socket for communication tied to a particular rendezvous address.</span></span> <span data-ttu-id="0bd87-109">После этого клиент может обмениваться данными с локальной службой, отправляя трафик в службу ретрансляции, которая перенаправит его по нужному адресу.</span><span class="sxs-lookup"><span data-stu-id="0bd87-109">The client can then communicate with the on-premises service by sending traffic to the relay service targeting the rendezvous address.</span></span> <span data-ttu-id="0bd87-110">Затем служба ретрансляции "ретранслирует" данные в локальную службу через созданный двунаправленный сокет, выделенный каждому клиенту.</span><span class="sxs-lookup"><span data-stu-id="0bd87-110">The relay service then "relays" data to the on-premises service through a bi-directional socket dedicated to each client.</span></span> <span data-ttu-id="0bd87-111">Клиенту не требуются прямое подключение к локальной службе и информация о ее местонахождении, а локальной службе не требуется открывать на брандмауэре входящие порты.</span><span class="sxs-lookup"><span data-stu-id="0bd87-111">The client does not need a direct connection to the on-premises service, it is not required to know where the service resides, and the on-premises service does not need any inbound ports open on the firewall.</span></span>

<span data-ttu-id="0bd87-112">Ключевыми возможностями, предоставляемые ретранслятором, являются двунаправленный обмен данными без буферизации в пределах сети с регулированием наподобие протокола TCP, обнаружение конечных точек, использование состояний подключений и перекрытие безопасности конечных точек.</span><span class="sxs-lookup"><span data-stu-id="0bd87-112">The key capability elements provided by Relay are bi-directional, unbuffered communication across network boundaries with TCP-like throttling, endpoint discovery, connectivity status, and overlaid endpoint security.</span></span> <span data-ttu-id="0bd87-113">Возможности ретранслятора отличаются от возможностей таких технологий интеграции сетевого уровня, как VPN, тем, что ретранслятор может применяться к одной конечной точке приложения на одном компьютере, тогда как влияние технологии VPN гораздо обширнее, ведь предусматривает изменение сетевой среды.</span><span class="sxs-lookup"><span data-stu-id="0bd87-113">The relay capabilities differ from network-level integration technologies such as VPN, in that relay can be scoped to a single application endpoint on a single machine, while VPN technology is far more intrusive as it relies on altering the network environment.</span></span>

<span data-ttu-id="0bd87-114">Ретранслятор Azure предоставляет две функции:</span><span class="sxs-lookup"><span data-stu-id="0bd87-114">Azure Relay has two features:</span></span>

1. <span data-ttu-id="0bd87-115">[Гибридные подключения](#hybrid-connections). Используются веб-сокеты на основе открытых стандартов, что обеспечивает реализацию многоплатформенных сценариев.</span><span class="sxs-lookup"><span data-stu-id="0bd87-115">[Hybrid Connections](#hybrid-connections) - Uses the open standard web sockets enabling multi-platform scenarios.</span></span>
2. <span data-ttu-id="0bd87-116">[Ретрансляторы WCF](#wcf-relays). Используется Windows Communication Foundation (WCF), чтобы обеспечить возможность удаленно вызывать процедуры (RPC).</span><span class="sxs-lookup"><span data-stu-id="0bd87-116">[WCF Relays](#wcf-relays) - Uses Windows Communication Foundation (WCF) to enable remote procedure calls.</span></span> <span data-ttu-id="0bd87-117">Ретранслятор WCF — это устаревшее предложение для ретрансляции, которое многие клиенты уже используют в своих моделях программирования WCF.</span><span class="sxs-lookup"><span data-stu-id="0bd87-117">WCF Relay is the legacy relay offering that many customers already use with their WCF programming models.</span></span>

<span data-ttu-id="0bd87-118">Гибридные подключения и ретрансляторы WCF обеспечивают безопасное подключение к ресурсам в корпоративной сети предприятия.</span><span class="sxs-lookup"><span data-stu-id="0bd87-118">Hybrid Connections and WCF Relays both enable secure connection to assets that exist within a corporate enterprise network.</span></span> <span data-ttu-id="0bd87-119">При выборе одной из этих технологий необходимо учитывать конкретные потребности:</span><span class="sxs-lookup"><span data-stu-id="0bd87-119">Use of one over the other is dependent on your particular needs, as described in the following table:</span></span>

|  | <span data-ttu-id="0bd87-120">Ретранслятор WCF</span><span class="sxs-lookup"><span data-stu-id="0bd87-120">WCF Relay</span></span> | <span data-ttu-id="0bd87-121">через гибридные подключения</span><span class="sxs-lookup"><span data-stu-id="0bd87-121">Hybrid Connections</span></span> |
| --- |:---:|:---:|
| <span data-ttu-id="0bd87-122">**WCF**</span><span class="sxs-lookup"><span data-stu-id="0bd87-122">**WCF**</span></span> |<span data-ttu-id="0bd87-123">x</span><span class="sxs-lookup"><span data-stu-id="0bd87-123">x</span></span> | |
| <span data-ttu-id="0bd87-124">**.NET Core**</span><span class="sxs-lookup"><span data-stu-id="0bd87-124">**.NET Core**</span></span> | |<span data-ttu-id="0bd87-125">x</span><span class="sxs-lookup"><span data-stu-id="0bd87-125">x</span></span> |
| <span data-ttu-id="0bd87-126">**.NET Framework**</span><span class="sxs-lookup"><span data-stu-id="0bd87-126">**.NET Framework**</span></span> |<span data-ttu-id="0bd87-127">x</span><span class="sxs-lookup"><span data-stu-id="0bd87-127">x</span></span> |<span data-ttu-id="0bd87-128">x</span><span class="sxs-lookup"><span data-stu-id="0bd87-128">x</span></span> |
| <span data-ttu-id="0bd87-129">**JavaScript, NodeJS**</span><span class="sxs-lookup"><span data-stu-id="0bd87-129">**JavaScript/NodeJS**</span></span> | |<span data-ttu-id="0bd87-130">x</span><span class="sxs-lookup"><span data-stu-id="0bd87-130">x</span></span> |
| <span data-ttu-id="0bd87-131">**Открытый протокол на основе стандартов**</span><span class="sxs-lookup"><span data-stu-id="0bd87-131">**Standards-Based Open Protocol**</span></span> | |<span data-ttu-id="0bd87-132">x</span><span class="sxs-lookup"><span data-stu-id="0bd87-132">x</span></span> |
| <span data-ttu-id="0bd87-133">**Несколько моделей программирования RPC**</span><span class="sxs-lookup"><span data-stu-id="0bd87-133">**Multiple RPC Programming Models**</span></span> | |<span data-ttu-id="0bd87-134">x</span><span class="sxs-lookup"><span data-stu-id="0bd87-134">x</span></span> |

## <a name="hybrid-connections"></a><span data-ttu-id="0bd87-135">через гибридные подключения</span><span class="sxs-lookup"><span data-stu-id="0bd87-135">Hybrid Connections</span></span>

<span data-ttu-id="0bd87-136">[Гибридные подключения ретранслятора Azure](relay-hybrid-connections-protocol.md) являются безопасным решением на основе открытых протоколов, возникшим вследствие развития существующих возможностей ретранслятора. Его можно реализовать на любой платформе и на любом языке с поддержкой WebSocket, что явно включает в себя API WebSocket в распространенных веб-браузерах.</span><span class="sxs-lookup"><span data-stu-id="0bd87-136">The [Azure Relay Hybrid Connections](relay-hybrid-connections-protocol.md) capability is a secure, open-protocol evolution of the existing Relay features that can be implemented on any platform and in any language that has a basic WebSocket capability, which explicitly includes the WebSocket API in common web browsers.</span></span> <span data-ttu-id="0bd87-137">Гибридные подключения основаны на протоколах HTTP и WebSockets.</span><span class="sxs-lookup"><span data-stu-id="0bd87-137">Hybrid Connections is based on HTTP and WebSockets.</span></span>

### <a name="service-history"></a><span data-ttu-id="0bd87-138">Журнал службы</span><span class="sxs-lookup"><span data-stu-id="0bd87-138">Service history</span></span>

<span data-ttu-id="0bd87-139">Гибридные подключения заменяют предыдущий компонент, также называемый службами BizTalk, созданный на основе ретранслятора WCF служебной шины Azure.</span><span class="sxs-lookup"><span data-stu-id="0bd87-139">Hybrid Connections supplants the former, similarly named "BizTalk Services" feature that was built on the Azure Service Bus WCF Relay.</span></span> <span data-ttu-id="0bd87-140">Новые возможности гибридных подключений дополняют функции существующего ретранслятора WCF. В службе ретранслятора Azure реализованы обе эти возможности.</span><span class="sxs-lookup"><span data-stu-id="0bd87-140">The new Hybrid Connections capability complements the existing WCF Relay feature and these two service capabilities exist side-by-side in the Azure Relay service.</span></span> <span data-ttu-id="0bd87-141">Они совместно используют общий шлюз, но реализуются по-разному.</span><span class="sxs-lookup"><span data-stu-id="0bd87-141">They share a common gateway, but are otherwise different implementations.</span></span>

## <a name="wcf-relays"></a><span data-ttu-id="0bd87-142">Ретрансляторы WCF</span><span class="sxs-lookup"><span data-stu-id="0bd87-142">WCF Relays</span></span>

<span data-ttu-id="0bd87-143">Ретрансляторы WCF подходят для полной платформы .NET Framework (NETFX) и WCF.</span><span class="sxs-lookup"><span data-stu-id="0bd87-143">The WCF Relay works for the full .NET Framework (NETFX) and for WCF.</span></span> <span data-ttu-id="0bd87-144">Подключение между локальной службой и службой ретранслятора создается с помощью привязок WCF для ретранслятора.</span><span class="sxs-lookup"><span data-stu-id="0bd87-144">You initiate the connection between your on-premises service and the relay service using a suite of WCF "relay" bindings.</span></span> <span data-ttu-id="0bd87-145">Привязки для ретрансляции сопоставляются в фоновом режиме с новыми элементами привязки транспорта, предназначенными для создания компонентов канала WCF, которые интегрируются со служебной шиной в облаке.</span><span class="sxs-lookup"><span data-stu-id="0bd87-145">Behind the scenes, the relay bindings map to new transport binding elements designed to create WCF channel components that integrate with Service Bus in the cloud.</span></span>

## <a name="architecture-processing-of-incoming-relay-requests"></a><span data-ttu-id="0bd87-146">Архитектура: обработка входящих запросов на ретрансляцию</span><span class="sxs-lookup"><span data-stu-id="0bd87-146">Architecture: Processing of incoming relay requests</span></span>
<span data-ttu-id="0bd87-147">Когда клиент отправляет запрос [ретранслятору Azure](/azure/service-bus-relay/), подсистема балансировки нагрузки Azure передает его в один из узлов шлюза.</span><span class="sxs-lookup"><span data-stu-id="0bd87-147">When a client sends a request to the [Azure Relay](/azure/service-bus-relay/) service, the Azure load balancer routes it to any of the gateway nodes.</span></span> <span data-ttu-id="0bd87-148">Если запрос связан с прослушиванием, узел шлюза создает новую ретрансляцию.</span><span class="sxs-lookup"><span data-stu-id="0bd87-148">If the request is a listening request, the gateway node creates a new relay.</span></span> <span data-ttu-id="0bd87-149">Если запрос связан с подключением к определенной ретрансляции, узел шлюза переадресовывает его на узел шлюза, которому принадлежит ретрансляция.</span><span class="sxs-lookup"><span data-stu-id="0bd87-149">If the request is a connection request to a specific relay, the gateway node forwards the connection request to the gateway node that owns the relay.</span></span> <span data-ttu-id="0bd87-150">Узел шлюза, которому принадлежит ретрансляция, отправляет запрос о подключении клиенту прослушивания, чтобы прослушиватель создал временный канал к узлу шлюза, получившему запрос на подключение.</span><span class="sxs-lookup"><span data-stu-id="0bd87-150">The gateway node that owns the relay sends a rendezvous request to the listening client, asking the listener to create a temporary channel to the gateway node that received the connection request.</span></span>

<span data-ttu-id="0bd87-151">Как только подключение ретрансляции будет установлено, клиенты смогут обмениваться сообщениями через узел шлюза, используемый для связи.</span><span class="sxs-lookup"><span data-stu-id="0bd87-151">When the relay connection is established, the clients can exchange messages via the gateway node that is used for the rendezvous.</span></span>

![Обработка входящих запросов ретранслятора WCF](./media/relay-what-is-it/ic690645.png)

## <a name="next-steps"></a><span data-ttu-id="0bd87-153">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="0bd87-153">Next steps</span></span>

* [<span data-ttu-id="0bd87-154">Вопросы и ответы по ретранслятору</span><span class="sxs-lookup"><span data-stu-id="0bd87-154">Relay FAQ</span></span>](relay-faq.md)
* [<span data-ttu-id="0bd87-155">Создание пространства имен</span><span class="sxs-lookup"><span data-stu-id="0bd87-155">Create a namespace</span></span>](relay-create-namespace-portal.md)
* [<span data-ttu-id="0bd87-156">Приступая к работе с .NET</span><span class="sxs-lookup"><span data-stu-id="0bd87-156">Get started with .NET</span></span>](relay-hybrid-connections-dotnet-get-started.md)
* [<span data-ttu-id="0bd87-157">Приступая к работе с Node</span><span class="sxs-lookup"><span data-stu-id="0bd87-157">Get started with Node</span></span>](relay-hybrid-connections-node-get-started.md)

