---
title: "aaaHow tooretain постоянного виртуального IP-адреса облачной службы Azure | Документы Microsoft"
description: "Узнайте, как tooensure, hello виртуальный IP-адрес (VIP) облачной службы Azure не изменяется."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 4a58e2c6-7a79-4051-8a2c-99182ff8b881
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 03/21/2017
ms.author: kraigb
ms.openlocfilehash: 9e27121797ffb61517b8d2c2661ec44ff7298968
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="retain-a-constant-virtual-ip-address-for-an-azure-cloud-service"></a><span data-ttu-id="cd117-103">Сохранение постоянного виртуального IP-адреса для облачной службы Azure</span><span class="sxs-lookup"><span data-stu-id="cd117-103">Retain a constant virtual IP address for an Azure cloud service</span></span>
<span data-ttu-id="cd117-104">При обновлении облачной службы, размещенной в Azure, может потребоваться tooensure, hello виртуальный IP-адрес (VIP) hello службы не изменяется.</span><span class="sxs-lookup"><span data-stu-id="cd117-104">When you update a cloud service that's hosted in Azure, you might need tooensure that hello virtual IP address (VIP) of hello service doesn't change.</span></span> <span data-ttu-id="cd117-105">Многие службы управления доменом используют hello доменных имен (DNS) для регистрации доменных имен.</span><span class="sxs-lookup"><span data-stu-id="cd117-105">Many domain management services use hello Domain Name System (DNS) for registering domain names.</span></span> <span data-ttu-id="cd117-106">DNS работает только в том случае, если hello hello виртуальный IP-адрес остается таким же.</span><span class="sxs-lookup"><span data-stu-id="cd117-106">DNS works only if hello VIP remains hello same.</span></span> <span data-ttu-id="cd117-107">Можно использовать hello **мастер публикации** в tooensure инструментов Azure, hello виртуальный IP-адрес облачной службы не изменяется при обновлении.</span><span class="sxs-lookup"><span data-stu-id="cd117-107">You can use hello **Publish Wizard** in Azure Tools tooensure that hello VIP of your cloud service doesn’t change when you update it.</span></span> <span data-ttu-id="cd117-108">Дополнительные сведения о том, как toouse управления доменами DNS для облачных служб в разделе [Настройка имени пользовательского домена для облачной службы Azure](cloud-services/cloud-services-custom-domain-name.md).</span><span class="sxs-lookup"><span data-stu-id="cd117-108">For more information about how toouse DNS domain management for cloud services, see [Configuring a custom domain name for an Azure cloud service](cloud-services/cloud-services-custom-domain-name.md).</span></span>

## <a name="publish-a-cloud-service-without-changing-its-vip"></a><span data-ttu-id="cd117-109">Публикация облачной службы без изменения ее виртуального IP-адреса</span><span class="sxs-lookup"><span data-stu-id="cd117-109">Publish a cloud service without changing its VIP</span></span>
<span data-ttu-id="cd117-110">При первом развертывании tooAzure в конкретной среде, например hello рабочей среде, выделяется Hello виртуальный IP-адрес облачной службы.</span><span class="sxs-lookup"><span data-stu-id="cd117-110">hello VIP of a cloud service is allocated when you first deploy it tooAzure in a particular environment, such as hello production environment.</span></span> <span data-ttu-id="cd117-111">Hello изменения только в том случае, если явно удалить hello развертывания или развертывания hello неявно удаляется hello развертывания процесса обновления.</span><span class="sxs-lookup"><span data-stu-id="cd117-111">hello VIP changes only if you delete hello deployment explicitly or hello deployment is implicitly deleted by hello deployment update process.</span></span> <span data-ttu-id="cd117-112">hello tooretain виртуальных IP-адресов, не требуется удалять развертывание и убедитесь, что Visual Studio не удаляет развертывание автоматически.</span><span class="sxs-lookup"><span data-stu-id="cd117-112">tooretain hello VIP, you must not delete your deployment, and you must make sure that Visual Studio doesn’t delete your deployment automatically.</span></span> 

<span data-ttu-id="cd117-113">Можно указать параметры развертывания в hello **мастер публикации**, который поддерживает несколько вариантов развертывания.</span><span class="sxs-lookup"><span data-stu-id="cd117-113">You can specify deployment settings in hello **Publish Wizard**, which supports several deployment options.</span></span> <span data-ttu-id="cd117-114">Можно указать новое развертывание или развертывание обновления, которое может быть добавочным или одновременным.</span><span class="sxs-lookup"><span data-stu-id="cd117-114">You can specify a fresh deployment or an update deployment, which can be incremental or simultaneous.</span></span> <span data-ttu-id="cd117-115">Оба вида развертывания обновлений сохраняют hello виртуальных IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="cd117-115">Both kinds of update deployment retain hello VIP.</span></span> <span data-ttu-id="cd117-116">Определение разных типов развертывания см. в статье [Мастер публикации приложений Azure](vs-azure-tools-publish-azure-application-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="cd117-116">For definitions of these different types of deployment, see [Publish Azure Application Wizard](vs-azure-tools-publish-azure-application-wizard.md).</span></span> <span data-ttu-id="cd117-117">Кроме того можно управлять, удаляется ли hello предыдущего развертывания облачной службы при возникновении ошибки.</span><span class="sxs-lookup"><span data-stu-id="cd117-117">In addition, you can control whether hello previous deployment of a cloud service is deleted if an error occurs.</span></span> <span data-ttu-id="cd117-118">Если этот параметр не установлен правильно, hello виртуального IP-адреса могут измениться неожиданно.</span><span class="sxs-lookup"><span data-stu-id="cd117-118">If you don't set that option correctly, hello VIP might change unexpectedly.</span></span>

## <a name="update-a-cloud-service-without-changing-its-vip"></a><span data-ttu-id="cd117-119">Обновление облачной службы без изменения ее виртуального IP-адреса</span><span class="sxs-lookup"><span data-stu-id="cd117-119">Update a cloud service without changing its VIP</span></span>
1. <span data-ttu-id="cd117-120">Создайте или откройте проект облачной службы Azure в среде Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="cd117-120">Create or open an Azure cloud service project in Visual Studio.</span></span> 

2. <span data-ttu-id="cd117-121">В **обозревателе решений**, щелкните правой кнопкой мыши проект hello.</span><span class="sxs-lookup"><span data-stu-id="cd117-121">In **Solution Explorer**, right-click hello project.</span></span> <span data-ttu-id="cd117-122">Выберите hello контекстное меню **публикации**.</span><span class="sxs-lookup"><span data-stu-id="cd117-122">On hello shortcut menu, select **Publish**.</span></span>

    ![Меню публикации](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/solution-explorer-publish-menu.png)

3. <span data-ttu-id="cd117-124">В hello **публикации приложения Azure** диалоговое окно, выберите hello toowhich подписки Azure, требуется toodeploy.</span><span class="sxs-lookup"><span data-stu-id="cd117-124">In hello **Publish Azure Application** dialog box, select hello Azure subscription toowhich you want toodeploy.</span></span> <span data-ttu-id="cd117-125">При необходимости войдите в систему и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="cd117-125">Sign in if necessary, and select **Next**.</span></span>

    ![Публикация приложения Azure: страница входа](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-signin.png)

4. <span data-ttu-id="cd117-127">На hello **Общие параметры** убедитесь в существовании hello hello облачной службы toowhich вы развертываете, hello **среды**, hello **конфигурации построения**и hello **Конфигурации службы** заданы правильно.</span><span class="sxs-lookup"><span data-stu-id="cd117-127">On hello **Common Settings** tab, verify that hello name of hello cloud service toowhich you’re deploying, hello **Environment**, hello **Build configuration**, and hello **Service configuration** are all correct.</span></span>

    ![Публикация приложения Azure: вкладка "Общие параметры"](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-common-settings.png)

5. <span data-ttu-id="cd117-129">На hello **Дополнительные параметры** убедитесь, что hello **метка развертывания** и hello **учетной записи хранилища** заданы правильно.</span><span class="sxs-lookup"><span data-stu-id="cd117-129">On hello **Advanced Settings** tab, verify that hello **Deployment label** and hello **Storage account** are correct.</span></span> <span data-ttu-id="cd117-130">Убедитесь, что hello **удалить развертывание при сбое** флажок снят и убедитесь, что hello **обновление развертывания** установлен флажок.</span><span class="sxs-lookup"><span data-stu-id="cd117-130">Verify that hello **Delete deployment on failure** check box is cleared, and verify that hello **Deployment update** check box is selected.</span></span> <span data-ttu-id="cd117-131">При очистке hello **удалить развертывание при сбое** флажок, вы убедитесь, что VIP-адрес не будет потерян при возникновении ошибки во время развертывания.</span><span class="sxs-lookup"><span data-stu-id="cd117-131">By clearing hello **Delete deployment on failure** check box, you ensure that your VIP isn't lost if an error occurs during deployment.</span></span> <span data-ttu-id="cd117-132">Выбрав hello **обновление развертывания** флажок, вы убедитесь, что развертывание не было удалено и VIP-адрес не будет потерян при повторной публикации приложения.</span><span class="sxs-lookup"><span data-stu-id="cd117-132">By selecting hello **Deployment update** check box, you ensure that your deployment isn't deleted and your VIP isn't lost when you republish your application.</span></span> 

    ![Публикация приложения Azure: вкладка "Дополнительные параметры"](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-advanced-settings.png)

6. <span data-ttu-id="cd117-134">toofurther указать, как будет обновлен toobe ролей hello, выберите **параметры** Далее слишком**обновление развертывания**.</span><span class="sxs-lookup"><span data-stu-id="cd117-134">toofurther specify how you want hello roles toobe updated, select **Settings** next too**Deployment update**.</span></span> <span data-ttu-id="cd117-135">Затем выберите **Добавочное обновление** или **Одновременное обновление**. Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="cd117-135">Select either **Incremental update** or **Simultaneous update**, and select **OK**.</span></span> <span data-ttu-id="cd117-136">Выберите **добавочное обновление** tooupdate каждого экземпляра приложения, один за другим, так что hello приложения доступна всегда.</span><span class="sxs-lookup"><span data-stu-id="cd117-136">Choose **Incremental update** tooupdate each instance of your application, one after another, so that hello application is always available.</span></span> <span data-ttu-id="cd117-137">Выберите **одновременное обновление** tooupdate все экземпляры приложения в hello то же время.</span><span class="sxs-lookup"><span data-stu-id="cd117-137">Choose **Simultaneous update** tooupdate all instances of your application at hello same time.</span></span> <span data-ttu-id="cd117-138">Одновременное обновление выполняется быстрее, но службы могут быть недоступны во время процесса обновления hello.</span><span class="sxs-lookup"><span data-stu-id="cd117-138">Simultaneous updating is faster, but your service might not be available during hello update process.</span></span> <span data-ttu-id="cd117-139">По завершении нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="cd117-139">When you are finished, select **Next**.</span></span>

    ![Публикация приложения Azure: страница "Параметры развертывания"](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-deployment-update-settings.png)

7. <span data-ttu-id="cd117-141">В hello **публикации приложения Azure** выберите **Далее** до hello **Сводка** -страница.</span><span class="sxs-lookup"><span data-stu-id="cd117-141">In hello **Publish Azure Application** dialog box, select **Next** until hello **Summary** page is displayed.</span></span> <span data-ttu-id="cd117-142">Проверьте параметры и нажмите кнопку **Опубликовать**.</span><span class="sxs-lookup"><span data-stu-id="cd117-142">Verify your settings, and then select **Publish**.</span></span>
   
    ![Публикация приложения Azure: страница "Сводка"](./media/vs-azure-tools-cloud-service-retain-a-constant-virtual-ip-address/azure-publish-summary.png)

## <a name="next-steps"></a><span data-ttu-id="cd117-144">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="cd117-144">Next steps</span></span>
- [<span data-ttu-id="cd117-145">Используя мастер публикации Visual Studio Azure приложения hello</span><span class="sxs-lookup"><span data-stu-id="cd117-145">Using hello Visual Studio Publish Azure Application Wizard</span></span>](vs-azure-tools-publish-azure-application-wizard.md)

