---
title: "aaaDiagnose и устранения неполадок | Документы Microsoft"
description: "В этом учебнике описано как toodiagnose и разрешать проблемы в вашей среде аналитики ряда времени"
keywords: 
services: time-series-insights
documentationcenter: 
author: venkatgct
manager: almineev
editor: cgronlun
ms.assetid: 
ms.service: time-series-insights
ms.devlang: na
ms.topic: how-to-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 04/24/2017
ms.author: venkatja
ms.openlocfilehash: 00893d4bec497f5f8bf7093be5b96f1844446d13
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="diagnose-and-solve-problems-in-your-time-series-insights-environment"></a><span data-ttu-id="7a798-103">Диагностика и устранение неполадок в среде Time Series Insights</span><span class="sxs-lookup"><span data-stu-id="7a798-103">Diagnose and solve problems in your Time Series Insights environment</span></span>

## <a name="i-dont-see-my-data"></a><span data-ttu-id="7a798-104">Данные не отображаются</span><span class="sxs-lookup"><span data-stu-id="7a798-104">I don't see my data</span></span>
<span data-ttu-id="7a798-105">Ниже приведены некоторые причины, почему могут отсутствовать данные в вашей среде в hello [портала Azure Insights ряда времени](https://insights.timeseries.azure.com).</span><span class="sxs-lookup"><span data-stu-id="7a798-105">Here are some reasons why you might not see your data in your environment in hello [Azure Time Series Insights portal](https://insights.timeseries.azure.com).</span></span>

### <a name="your-event-source-doesnt-have-data-in-json-format"></a><span data-ttu-id="7a798-106">Источник события не содержит данные в формате JSON</span><span class="sxs-lookup"><span data-stu-id="7a798-106">Your event source doesn't have data in JSON format</span></span>
<span data-ttu-id="7a798-107">Сейчас Azure Time Series Insights поддерживает только данные в формате JSON.</span><span class="sxs-lookup"><span data-stu-id="7a798-107">Azure Time Series Insights supports only JSON data today.</span></span> <span data-ttu-id="7a798-108">Примеры JSON см. в разделе [Поддерживаемые формы JSON](time-series-insights-send-events.md#supported-json-shapes).</span><span class="sxs-lookup"><span data-stu-id="7a798-108">For JSON samples, see [Supported JSON shapes](time-series-insights-send-events.md#supported-json-shapes).</span></span>

### <a name="when-you-registered-your-event-source-you-didnt-provide-hello-key-that-has-hello-required-permission"></a><span data-ttu-id="7a798-109">При регистрации источника событий не предоставил hello ключ, который имеет разрешение необходимые hello</span><span class="sxs-lookup"><span data-stu-id="7a798-109">When you registered your event source, you didn't provide hello key that has hello required permission</span></span>
* <span data-ttu-id="7a798-110">Для центра IoT, необходим ключ hello tooprovide с **подключения службы** разрешение.</span><span class="sxs-lookup"><span data-stu-id="7a798-110">For an IoT hub, you need tooprovide hello key that has **service connect** permission.</span></span>

   ![Разрешение на подключение службы Центра Интернета вещей](media/diagnose-and-solve-problems/iothub-serviceconnect-permissions.png)

   <span data-ttu-id="7a798-112">Как показано в hello предшествующий изображения, либо политик hello **iothubowner** и **службы** будет работать, поскольку имеют **подключения службы** разрешение.</span><span class="sxs-lookup"><span data-stu-id="7a798-112">As shown in hello preceding image, either of hello policies **iothubowner** and **service** would work, because both have **service connect** permission.</span></span>
* <span data-ttu-id="7a798-113">Для концентратора событий необходим ключ hello tooprovide с **прослушивания** разрешение.</span><span class="sxs-lookup"><span data-stu-id="7a798-113">For an event hub, you need tooprovide hello key that has **Listen** permission.</span></span>

   ![Разрешение на прослушивание концентратора событий](media/diagnose-and-solve-problems/eventhub-listen-permissions.png)

   <span data-ttu-id="7a798-115">Как показано в hello предшествующий изображения, либо политик hello **чтения** и **управления** будет работать, поскольку имеют **прослушивания** разрешение.</span><span class="sxs-lookup"><span data-stu-id="7a798-115">As shown in hello preceding image, either of hello policies **read** and **manage** would work, because both have **Listen** permission.</span></span>

### <a name="hello-provided-consumer-group-is-not-exclusive-tootime-series-insights"></a><span data-ttu-id="7a798-116">Hello при условии, что группы потребителей не является монопольной tooTime рядов аналитики</span><span class="sxs-lookup"><span data-stu-id="7a798-116">hello provided consumer group is not exclusive tooTime Series Insights</span></span>
<span data-ttu-id="7a798-117">Центр IoT или концентратор событий во время регистрации вам нужно группы потребителей hello toospecify, который должен использоваться для чтения данных.</span><span class="sxs-lookup"><span data-stu-id="7a798-117">For an IoT hub or an event hub, during registration we require you toospecify hello consumer group that should be used for reading your data.</span></span> <span data-ttu-id="7a798-118">Эта группа потребителей не должна быть общей.</span><span class="sxs-lookup"><span data-stu-id="7a798-118">This consumer group must not be shared.</span></span> <span data-ttu-id="7a798-119">Если он является общим, hello базовой концентратора событий автоматически отключает один из модулей чтения hello случайным образом.</span><span class="sxs-lookup"><span data-stu-id="7a798-119">If it's shared, hello underlying event hub automatically disconnects one of hello readers randomly.</span></span>

## <a name="i-see-my-data-but-theres-a-lag"></a><span data-ttu-id="7a798-120">Данные отображаются с задержкой</span><span class="sxs-lookup"><span data-stu-id="7a798-120">I see my data, but there's a lag</span></span>
<span data-ttu-id="7a798-121">Ниже приведены причины, почему вы видите части данных в среде на hello [портала аналитики ряда времени](https://insights.timeseries.azure.com).</span><span class="sxs-lookup"><span data-stu-id="7a798-121">Here are reasons why you might see partial data in your environment in hello [Time Series Insights portal](https://insights.timeseries.azure.com).</span></span>

### <a name="your-environment-is-getting-throttled"></a><span data-ttu-id="7a798-122">Выполняется регулирование среды</span><span class="sxs-lookup"><span data-stu-id="7a798-122">Your environment is getting throttled</span></span>
<span data-ttu-id="7a798-123">Hello предел регулирования применяется на основе типа SKU hello среды и емкости.</span><span class="sxs-lookup"><span data-stu-id="7a798-123">hello throttling limit is enforced based on hello environment's SKU type and capacity.</span></span> <span data-ttu-id="7a798-124">Все источники событий в среде hello совместно использовать эти возможности.</span><span class="sxs-lookup"><span data-stu-id="7a798-124">All event sources in hello environment share this capacity.</span></span> <span data-ttu-id="7a798-125">Если источник событий hello центр IoT или концентратор событий Принудительная отправка данных за пределы hello применяются ограничения, можно увидеть, регулирование и задержка.</span><span class="sxs-lookup"><span data-stu-id="7a798-125">If hello event source for your IoT hub or event hub is pushing data beyond hello enforced limits, you see throttling and a lag.</span></span>

<span data-ttu-id="7a798-126">Следующая схема Hello показана среда аналитики ряда времени с SKU S1 и размером 3.</span><span class="sxs-lookup"><span data-stu-id="7a798-126">hello following diagram shows a Time Series Insights environment that has a SKU of S1 and a capacity of 3.</span></span> <span data-ttu-id="7a798-127">Она может принимать 3 миллиона событий в день.</span><span class="sxs-lookup"><span data-stu-id="7a798-127">It can ingress 3 million events per day.</span></span>

![Текущая емкость номера SKU среды](media/diagnose-and-solve-problems/environment-sku-current-capacity.png)

<span data-ttu-id="7a798-129">Предположим, что эта среда является передаче сообщений из концентратора событий скорость входящих сообщений hello в hello, следующая схема:</span><span class="sxs-lookup"><span data-stu-id="7a798-129">Assume that this environment is ingesting messages from an event hub with hello ingress rate shown in hello following diagram:</span></span>

![Пример скорости входящих данных для концентратора событий](media/diagnose-and-solve-problems/eventhub-ingress-rate.png)

<span data-ttu-id="7a798-131">Как показано на схеме hello ежедневной основе входящих сообщений hello — ~ 67,000 сообщения.</span><span class="sxs-lookup"><span data-stu-id="7a798-131">As shown in hello diagram, hello daily ingress rate is ~67,000 messages.</span></span> <span data-ttu-id="7a798-132">Эта скорость преобразует сообщения too46 каждую минуту приблизительно.</span><span class="sxs-lookup"><span data-stu-id="7a798-132">This rate translates roughly too46 messages every minute.</span></span> <span data-ttu-id="7a798-133">Если каждое сообщение концентратора событий плоский tooa одно событие аналитики ряда времени, эта среда видит без ограничений.</span><span class="sxs-lookup"><span data-stu-id="7a798-133">If each event hub message is flattened tooa single Time Series Insights event, this environment sees no throttling.</span></span> <span data-ttu-id="7a798-134">Если каждое сообщение концентратора событий плоский too100 аналитики ряда времени события, затем 4,600 события должен быть ingested каждую минуту.</span><span class="sxs-lookup"><span data-stu-id="7a798-134">If each event hub message is flattened too100 Time Series Insights events, then 4,600 events should be ingested every minute.</span></span> <span data-ttu-id="7a798-135">Среда с номером SKU S1 и емкостью 3 может принимать только 2100 событий в минуту (1 миллион событий в день = 700 событий в минуту на 3 единицы = 2100 событий в минуту).</span><span class="sxs-lookup"><span data-stu-id="7a798-135">An S1 SKU environment that has a capacity of 3 can ingress only 2,100 events every minute (1 million events per day = 700 events per minute at 3 units = 2,100 events per minute).</span></span> <span data-ttu-id="7a798-136">Таким образом вы видите задержка из-за toothrottling.</span><span class="sxs-lookup"><span data-stu-id="7a798-136">Therefore you see a lag due toothrottling.</span></span> 

<span data-ttu-id="7a798-137">Подробные сведения о логике сведения см. в разделе [Поддерживаемые формы JSON](time-series-insights-send-events.md#supported-json-shapes).</span><span class="sxs-lookup"><span data-stu-id="7a798-137">For a high-level understanding of how flattening logic works, see [Supported JSON shapes](time-series-insights-send-events.md#supported-json-shapes).</span></span>

#### <a name="recommended-steps"></a><span data-ttu-id="7a798-138">Рекомендуемые действия</span><span class="sxs-lookup"><span data-stu-id="7a798-138">Recommended steps</span></span>
<span data-ttu-id="7a798-139">lag hello toofix, увеличение hello емкость номеров SKU среды.</span><span class="sxs-lookup"><span data-stu-id="7a798-139">toofix hello lag, increase hello SKU capacity of your environment.</span></span> <span data-ttu-id="7a798-140">Дополнительные сведения см. в разделе [как tooscale среды аналитики ряда времени](time-series-insights-how-to-scale-your-environment.md).</span><span class="sxs-lookup"><span data-stu-id="7a798-140">For more information, see [How tooscale your Time Series Insights environment](time-series-insights-how-to-scale-your-environment.md).</span></span>

### <a name="youre-pushing-historical-data-and-causing-slow-ingress"></a><span data-ttu-id="7a798-141">Вы отправляете архивные данные, что приводит к медленной передаче входящих данных</span><span class="sxs-lookup"><span data-stu-id="7a798-141">You're pushing historical data and causing slow ingress</span></span>
<span data-ttu-id="7a798-142">Если вы подключаете существующий источник событий, скорее всего, в Центре Интернета вещей или концентраторе событий уже есть данные.</span><span class="sxs-lookup"><span data-stu-id="7a798-142">If you are connecting an existing event source, it's likely that your IoT hub or event hub already has data in it.</span></span> <span data-ttu-id="7a798-143">Поэтому запуска среды hello получение данных из начала hello источник события hello срок хранения сообщений.</span><span class="sxs-lookup"><span data-stu-id="7a798-143">So hello environment starts pulling data from hello beginning of hello event source's message retention period.</span></span> 

<span data-ttu-id="7a798-144">Такое поведение является поведением по умолчанию hello и не может быть переопределен.</span><span class="sxs-lookup"><span data-stu-id="7a798-144">This behavior is hello default behavior and cannot be overridden.</span></span> <span data-ttu-id="7a798-145">Вы можете принять участие регулирования и может занять некоторое время toocatch вверх на передаче исторических данных.</span><span class="sxs-lookup"><span data-stu-id="7a798-145">You can engage throttling, and it may take a while toocatch up on ingesting historical data.</span></span>

#### <a name="recommended-steps"></a><span data-ttu-id="7a798-146">Рекомендуемые действия</span><span class="sxs-lookup"><span data-stu-id="7a798-146">Recommended steps</span></span>
<span data-ttu-id="7a798-147">lag hello toofix, hello выполните следующие шаги:</span><span class="sxs-lookup"><span data-stu-id="7a798-147">toofix hello lag, take hello following steps:</span></span>
1. <span data-ttu-id="7a798-148">Увеличьте hello SKU емкость toohello максимальное значение (в данном случае — 10).</span><span class="sxs-lookup"><span data-stu-id="7a798-148">Increase hello SKU capacity toohello maximum allowed value (10 in this case).</span></span> <span data-ttu-id="7a798-149">После это увеличение емкости hello hello входящих процесс запускается, Запаздывание намного быстрее.</span><span class="sxs-lookup"><span data-stu-id="7a798-149">After hello capacity is increased, hello ingress process starts catching up much faster.</span></span> <span data-ttu-id="7a798-150">Вы можете визуализировать, насколько быстро перехвате по диаграмме доступности hello в hello [портала аналитики ряда времени](https://insights.timeseries.azure.com).</span><span class="sxs-lookup"><span data-stu-id="7a798-150">You can visualize how quickly you're catching up through hello availability chart in hello [Time Series Insights portal](https://insights.timeseries.azure.com).</span></span> <span data-ttu-id="7a798-151">Взимается плата для hello увеличить емкость.</span><span class="sxs-lookup"><span data-stu-id="7a798-151">You are charged for hello increased capacity.</span></span>
2. <span data-ttu-id="7a798-152">После hello синхронизированной запаздывания, уменьшения hello SKU емкости серверной tooyour обычный входящих сообщений.</span><span class="sxs-lookup"><span data-stu-id="7a798-152">After hello lag is caught up, decrease hello SKU capacity back tooyour normal ingress rate.</span></span>

## <a name="my-event-sources-timestamp-property-name-setting-doesnt-work"></a><span data-ttu-id="7a798-153">Параметр *имени свойства метки времени* источника события не работает</span><span class="sxs-lookup"><span data-stu-id="7a798-153">My event source's *timestamp property name* setting doesn't work</span></span>
<span data-ttu-id="7a798-154">Убедиться, что hello имени и значения соответствуют правилам toohello:</span><span class="sxs-lookup"><span data-stu-id="7a798-154">Ensure that hello name and value conform toohello following rules:</span></span>
* <span data-ttu-id="7a798-155">Имя свойства timestamp Hello _с учетом регистра_.</span><span class="sxs-lookup"><span data-stu-id="7a798-155">hello timestamp property name is _case-sensitive_.</span></span>
* <span data-ttu-id="7a798-156">значение свойства Hello отметки времени, которое поступает из источника события как строка JSON, должны иметь формат hello _гггг-мм-ДДТЧЧ. FFFFFFFK_.</span><span class="sxs-lookup"><span data-stu-id="7a798-156">hello timestamp property value that's coming from your event source, as a JSON string, should have hello format _yyyy-MM-ddTHH:mm:ss.FFFFFFFK_.</span></span> <span data-ttu-id="7a798-157">Например 2008-04-12T12:53Z.</span><span class="sxs-lookup"><span data-stu-id="7a798-157">An example of such a string is “2008-04-12T12:53Z”.</span></span>
