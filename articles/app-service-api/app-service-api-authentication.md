---
title: "aaaAuthentication и авторизации для приложения API в службе приложений Azure | Документы Microsoft"
description: "Дополнительные сведения о hello службы аутентификации и авторизации, предоставляемые службе приложений Azure для приложений API."
services: app-service\api
documentationcenter: .net
author: alexkarcher-msft
manager: erikre
editor: 
ms.assetid: d620b53a-5a6f-41c9-84c7-f7ef5ff02ae7
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2016
ms.author: alkarche
ms.openlocfilehash: 6d26754b8b606ec232a74768787922ea80577c95
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-and-authorization-for-api-apps-in-azure-app-service"></a>Проверка подлинности и авторизация для приложений API в службе приложений Azure
## <a name="overview"></a>Обзор
> [!NOTE]
> В этом разделе будет перенесенных tooa консолидированные [проверки подлинности службы для приложения / авторизации](../app-service/app-service-authentication-overview.md) темы, который охватывает Web, мобильных устройств и приложения API.
> 
> 

В службе приложений Azure есть встроенные службы проверки подлинности и авторизации, которые реализуют протоколы [OAuth 2.0](#oauth) и [OpenID Connect](#oauth). Эта статья описывает hello службы и параметры, доступные для приложения API в службе приложений Azure.

Привет, следующая схема иллюстрирует некоторые ключевые характеристики приложения службы проверки подлинности:

* Выполняется предварительная обработка входящих запросов API. Это означает, что проверка подлинности работает с любыми языками и средами, которые поддерживает служба приложений.
* Он предоставляет нужные несколько вариантов какая проверка подлинности работает вы toodo в собственном коде.
* Выполняется проверка подлинности как конечных пользователей, так и учетных записей служб. 
* Поддерживаются пять поставщиков удостоверений: Azure Active Directory, Facebook, Google, Twitter и учетная запись Майкрософт.
* Он работает hello одинаково для приложения API, веб-приложения и мобильные приложения.

![](./media/app-service-api-authentication/api-apps-overview.png)

## <a name="language-agnostic"></a>Независимость от языка
Обработка проверки подлинности службы приложений происходит перед запросы попадают в приложении API, что означает, что функции проверки подлинности hello работать API приложений, написанных на любом языке, framework.  API может основываться на ASP.NET, Java, Node.js или любой платформе, которую поддерживает служба приложений.

Служба приложения передает hello веб-токен JSON (JWT) в заголовке авторизации hello HTTP-запроса, и код, написанный на любом языке, framework может получить hello информации, необходимой с hello токена. Кроме того службы приложений предоставляет упрощенный доступ toohello чаще всего используются утверждения, задав некоторые специальные заголовки, например hello следующие:

* X-MS-CLIENT-PRINCIPAL-NAME
* X-MS-CLIENT-PRINCIPAL-ID
* X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN
* X-MS-TOKEN-FACEBOOK-EXPIRES-ON

В .NET API, можно использовать hello `Authorize` атрибута, а для точного авторизации, можно легко писать код на основе утверждений, поскольку информацию об утверждениях заполняется автоматически в классы .NET.

## <a name="multiple-protection-options"></a>Варианты защиты
Служба приложений может предотвращать поступление анонимных HTTP-запросов в приложение API, передавать все запросы и проверять маркеры на предмет содержащихся в них запросов либо пропускать все запросы, не выполняя с ними никаких действий.

1. Разрешить только tooreach запросов проверки подлинности приложения API.
   
    Если анонимный запрос поступает из браузера, службы приложений будет перенаправлен на страницу входа в систему tooa hello поставщика проверки подлинности (Azure AD, Google, Twitter, т. д.), выбрать. 
   
    Этот параметр не требуется toowrite любой код проверки подлинности во всех в приложении, и код авторизации становится проще, поскольку hello наиболее важных утверждения предоставляются в заголовках hello HTTP.
2. Разрешить все запросы tooreach приложения API, но проверки запросов на проверку подлинности и передают сведения о проверке подлинности в заголовках hello HTTP.
   
    Этот параметр обеспечивает большую гибкость при обработке анонимных запросов, но у вас есть код toowrite Если tooprevent анонимных пользователей с помощью API. Поскольку hello наиболее популярных утверждения передаются в hello заголовки HTTP-запросов, код авторизации относительно проста.
3. Разрешить все запросы tooreach API, на сведения о проверке подлинности в запросах hello не выполнять никаких действий.
   
    Этот параметр оставляет hello задачи проверки подлинности и авторизации полностью вверх tooyour кода приложения.

В hello [портал Azure](https://portal.azure.com/), выберите параметр hello на hello **проверки подлинности и авторизации** колонку.

![](./media/app-service-api-authentication/authblade.png)

Для параметров 1 и 2, включите **проверки подлинности службы приложения**и в hello **tootake действия, если запрос не прошел проверку подлинности** раскрывающемся списке выберите **вход** или **Разрешить запрос (никаких действий)**.  При выборе **входа**, имеют toochoose поставщика проверки подлинности и настройка этого поставщика.

![](./media/app-service-api-authentication/actiontotake.png)

Подробные сведения о том, как tooconfigure проверки подлинности, в разделе [как tooconfigure вход службы приложений toouse приложения Azure Active Directory](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md). статья Hello относится tooAPI приложений, а также мобильные приложения и приводятся ссылки на статьи, посвященные tooother hello других поставщиков проверки подлинности.

## <a id="internal"></a> Проверка подлинности учетной записи службы
Проверки подлинности службы приложений работает для внутренних сценариях, например для вызова из одного приложения tooanother API приложения API. В этом случае для получения маркера используются учетные данные службы вместо учетных данных пользователя. Учетная запись службы также называется *субъектом-службой* , а проверка подлинности с использованием такой учетной записи называется сценарием взаимодействия между службами. 

Для сценариев служба служба защиты hello вызвать API приложения с помощью Azure Active Directory и предоставить маркер AAD службы основной авторизации при вызове приложение hello API. Получить маркер, предоставляя идентификатор клиента hello и клиента, секрет из hello AAD приложения. Нет специального кода только в Azure не требуется, например true toobe используется для обработки маркера hello Zumo мобильных служб. Пример такого сценария с помощью приложения ASP.NET API, связанная с hello учебника [основной проверки подлинности службы для приложений API](app-service-api-dotnet-service-principal-auth.md).

Следует toohandle сценарии для служб без использования проверки подлинности службы приложений можно использовать клиентские сертификаты или обычной проверки подлинности. Сведения о клиентских сертификатов в Azure см. в разделе [как tooConfigure TLS взаимной проверки подлинности для веб-приложений](../app-service-web/app-service-web-configure-tls-mutual-auth.md). Сведения об обычной проверке подлинности в ASP.NET см. в статье [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters) (Фильтры проверки подлинности в веб-API ASP.NET 2).

Проверка подлинности учетной записи службы из приложения tooan API службы приложений логики приложения является особым случаем, который описан в [с помощью настраиваемого API, размещенных в службе приложений с приложениями логики](../logic-apps/logic-apps-custom-hosted-api.md).

## <a name="mobile-client-authentication"></a>Проверка подлинности клиентов мобильных устройств
Сведения о том, как toohandle проверки подлинности мобильных клиентов. в разделе hello [документации о проверке подлинности для мобильных приложений](../app-service-mobile/app-service-mobile-ios-get-started-users.md). Проверка подлинности службы приложений работает hello одинаково для мобильных приложений и API.

## <a name="more-information"></a>Дополнительные сведения
Дополнительные сведения о проверке подлинности и авторизации в службе приложений Azure см. в разделе hello следующие ресурсы:

* [Расширение проверки подлинности и авторизации службы приложений](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/)
* [Как tooconfigure вход службы приложений toouse приложения Azure Active Directory](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (ссылки для других поставщиков проверки подлинности в начале hello страницы приветствия.) 

Дополнительные сведения об OAuth 2.0, OpenID Connect и веб-токены JSON (JWT) см. следующие ресурсы hello.

* [Приступая к работе с протоколом OAuth 2.0](http://shop.oreilly.com/product/0636920021810.do "Getting Started with OAuth 2.0") 
* [TooOAuth2 введение OpenID Connect и JSON Web токены (JWT) — Pluralsight курса](http://www.pluralsight.com/courses/oauth2-json-web-tokens-openid-connect-introduction) 
* [Создание и защита REST API для нескольких клиентов в ASP.NET, курс Pluralsight](http://www.pluralsight.com/courses/building-securing-restful-api-aspdotnet)

Дополнительные сведения о Azure Active Directory см. следующие ресурсы hello.

* [Сценарии проверки подлинности в Azure AD](http://aka.ms/aadscenarios)
* [Руководство разработчика по Azure Active Directory](http://aka.ms/aaddev)
* [Azure Samples (Примеры для Azure)](http://aka.ms/aadsamples)

## <a name="next-steps"></a>Дальнейшие действия
В этой статье вы познакомились с функциями проверки подлинности и авторизации службы приложений, которые можно использовать для приложений API. Следующее руководство Hello в получении hello работы показывает ряды как tooimplement [проверки подлинности пользователя в приложениях API службы приложения](app-service-api-dotnet-user-principal-auth.md).

