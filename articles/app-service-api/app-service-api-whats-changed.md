---
title: "Изменения в приложениях API службы приложений | Документация Майкрософт"
description: "Узнайте о новых возможностях приложений API в службе приложений Azure."
services: app-service\api
documentationcenter: .net
author: mohitsriv
manager: erikre
editor: tdykstra
ms.assetid: a9b58066-e8fd-48b8-a651-4613b1736433
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/29/2016
ms.author: rachelap
ms.openlocfilehash: e4e25f2cd1d39bb0113e3fe2bc37120f92227b28
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="app-service-api-apps---whats-changed"></a><span data-ttu-id="799b8-103">Изменения в приложениях API службы приложений</span><span class="sxs-lookup"><span data-stu-id="799b8-103">App Service API Apps - What's changed</span></span>
<span data-ttu-id="799b8-104">На мероприятии Connect(), состоявшемся в ноябре 2015 года, было [объявлено](https://azure.microsoft.com/blog/azure-app-service-updates-november-2015/)о ряде улучшений в службе приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="799b8-104">At the Connect() event in November 2015, a number of improvements to Azure App Service were [announced](https://azure.microsoft.com/blog/azure-app-service-updates-november-2015/).</span></span> <span data-ttu-id="799b8-105">К ним относятся базовые изменения в приложениях API для лучшей работы с мобильными и веб-приложениями, использование меньшего количества концепций, а также повышение эффективности развертывания и среды выполнения.</span><span class="sxs-lookup"><span data-stu-id="799b8-105">These improvements include underlying changes to API Apps to better align with Mobile and Web Apps, reduce concept count and improve deployment and runtime performance.</span></span> <span data-ttu-id="799b8-106">Соответствующие изменения в создании приложений API с использованием портала управления Azure и нового инструментария вступили в силу 30 ноября 2015 года.</span><span class="sxs-lookup"><span data-stu-id="799b8-106">Starting November 30, 2015, new API apps you create using the Azure management portal or the latest tooling will reflect these changes.</span></span> <span data-ttu-id="799b8-107">В этой статье описаны эти изменения, а также то, как развернуть существующие приложения заново, чтобы использовать все преимущества предоставленных возможностей.</span><span class="sxs-lookup"><span data-stu-id="799b8-107">This article describes these changes, as well as how to redeploy existing apps to take advantage of the capabilities.</span></span>

## <a name="feature-changes"></a><span data-ttu-id="799b8-108">Изменения функций</span><span class="sxs-lookup"><span data-stu-id="799b8-108">Feature changes</span></span>
<span data-ttu-id="799b8-109">Такие ключевые функции приложений API, как проверка подлинности, CORS и использование метаданных API, теперь перемещены прямо в службу приложений.</span><span class="sxs-lookup"><span data-stu-id="799b8-109">The key features of API Apps – authentication, CORS and API metadata – have moved directly into App Service.</span></span> <span data-ttu-id="799b8-110">Благодаря этому изменению ключевые функции стали доступными в веб- и мобильных приложениях, а также приложениях API.</span><span class="sxs-lookup"><span data-stu-id="799b8-110">With this change, the features are available across Web, Mobile and API Apps.</span></span> <span data-ttu-id="799b8-111">По факту в диспетчере ресурсов все они используют ресурс одного и того же типа **Microsoft.Web/sites** .</span><span class="sxs-lookup"><span data-stu-id="799b8-111">In fact, all three share the same **Microsoft.Web/sites** resource type in Resource Manager.</span></span> <span data-ttu-id="799b8-112">Приложениям API больше не нужен шлюз, поэтому они предоставляются без него.</span><span class="sxs-lookup"><span data-stu-id="799b8-112">The API Apps gateway is no longer needed or offered with API Apps.</span></span> <span data-ttu-id="799b8-113">Это также упрощает управление API Azure, так как теперь нужно использовать всего один шлюз.</span><span class="sxs-lookup"><span data-stu-id="799b8-113">This also makes it easier to use Azure API Management since there will be just the single API Management gateway.</span></span>

![Обзор приложений API](./media/app-service-api-whats-changed/api-apps-overview.png)

<span data-ttu-id="799b8-115">Основной принцип проектирования, заложенный в обновлении приложений API, состоит в том, чтобы можно было использовать API «как есть» на желаемом языке.</span><span class="sxs-lookup"><span data-stu-id="799b8-115">A key design principle with the API Apps update is to enable you to bring your API as is, in your language of choice.</span></span>  <span data-ttu-id="799b8-116">Если вы уже развернули API как веб- или мобильное приложение, вам не нужно развертывать приложение заново, чтобы получить все преимущества новых функций.</span><span class="sxs-lookup"><span data-stu-id="799b8-116">If your API is already deployed as a Web App or Mobile App, you do not have to redeploy your app to take advantage of the new features.</span></span> <span data-ttu-id="799b8-117">Если вы используете предварительную версию приложений API, подробные сведения по переходу на новую модель можно просмотреть ниже.</span><span class="sxs-lookup"><span data-stu-id="799b8-117">If you are currently on API Apps preview, migration guidance is detailed below.</span></span>

### <a name="authentication"></a><span data-ttu-id="799b8-118">Аутентификация</span><span class="sxs-lookup"><span data-stu-id="799b8-118">Authentication</span></span>
<span data-ttu-id="799b8-119">Существующие и уже готовые функции проверки подлинности для приложений API, мобильных служб, а также веб-приложений теперь унифицированы и доступны в единой колонке проверки подлинности службы приложений Azure на портале управления.</span><span class="sxs-lookup"><span data-stu-id="799b8-119">The existing turnkey API Apps, Mobile Services/Apps and Web Apps authentication features have been unified and are available in a single Azure App Service authentication blade in the management portal.</span></span> <span data-ttu-id="799b8-120">Общие сведения о проверке подлинности в службе приложений см. в записи блога [Расширение проверки подлинности и авторизации службы приложений](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/).</span><span class="sxs-lookup"><span data-stu-id="799b8-120">For an introduction to authentication services in App Service, see [Expanding App Service authentication / authorization](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/).</span></span>

<span data-ttu-id="799b8-121">Сценарии использования API предоставляют множество новых возможностей:</span><span class="sxs-lookup"><span data-stu-id="799b8-121">For API scenarios, there are a number of relevant new capabilities:</span></span>

* <span data-ttu-id="799b8-122">**Прямое использование Azure Active Directory** без кода клиента для обмена токена AAD на токен сеанса. Согласно спецификации токена носителя клиенту достаточно включить токены AAD в заголовок авторизации.</span><span class="sxs-lookup"><span data-stu-id="799b8-122">**Support for using Azure Active Directory directly**, without client code having to exchange the AAD token for a session token: Your client can just include the AAD tokens in the Authorization header, according to the bearer token specification.</span></span> <span data-ttu-id="799b8-123">Это также означает, что на стороне клиента или сервера больше не требуется устанавливать пакет SDK для конкретной службы приложений.</span><span class="sxs-lookup"><span data-stu-id="799b8-123">This also means no App Service-specific SDK is required on the client or server side.</span></span> 
* <span data-ttu-id="799b8-124">**Взаимодействие между службами или внутренний доступ.**Чтобы пройти проверку подлинности в приложении при использовании управляющей программы или другого клиента, для работы которых обязателен доступ к API без интерфейса, можно запросить токен с помощью субъекта-службы AAD и передать его в службу приложений.</span><span class="sxs-lookup"><span data-stu-id="799b8-124">**Service-to-service or "Internal" access**: If you have a daemon process or some other client needing access to APIs without an interface, you can request a token using an AAD service principal and pass it to App Service for authentication with your application.</span></span>
* <span data-ttu-id="799b8-125">**Отложенная авторизация.**Во множестве приложений для разных частей приложения есть различные ограничения доступа.</span><span class="sxs-lookup"><span data-stu-id="799b8-125">**Deferred authorization**: Many applications have varying access restrictions for different parts of the application.</span></span> <span data-ttu-id="799b8-126">Вам может понадобиться, чтобы одни интерфейсы API были общедоступными, а для использования других требовалось выполнение входа.</span><span class="sxs-lookup"><span data-stu-id="799b8-126">Perhaps you want some APIs to be publicly available, while others require sign-in.</span></span> <span data-ttu-id="799b8-127">Изначально проверка подлинности и авторизация осуществлялись согласно одному подходу, требующему входа в приложение.</span><span class="sxs-lookup"><span data-stu-id="799b8-127">The original Authentication/Authorization feature was all-or-nothing, with the whole site requiring login.</span></span> <span data-ttu-id="799b8-128">Это по-прежнему возможно, но теперь для принятия решений в отношении доступа, когда служба приложений уже выполнила проверку подлинности пользователя, можно использовать код приложения.</span><span class="sxs-lookup"><span data-stu-id="799b8-128">This option still exists, but you can alternatively allow your application code to render access decisions after App Service has authenticated the user.</span></span>

<span data-ttu-id="799b8-129">Дополнительные сведения о новых функциях проверки подлинности см. в статье [Проверка подлинности и авторизация для приложений API в службе приложений Azure](app-service-api-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="799b8-129">For more information about the new authentication features, see [Authentication and authorization for API Apps in Azure App Service](app-service-api-authentication.md).</span></span> <span data-ttu-id="799b8-130">Сведения о миграции существующих приложений API из предыдущей модели приложений API в новую см. в разделе [Перенос существующих приложений API](#migrating-existing-api-apps) далее в этой статье.</span><span class="sxs-lookup"><span data-stu-id="799b8-130">For information about how to migrate existing API apps from the previous API apps model to the new one, see [Migrating existing API apps](#migrating-existing-api-apps) later in this article.</span></span>

### <a name="cors"></a><span data-ttu-id="799b8-131">CORS</span><span class="sxs-lookup"><span data-stu-id="799b8-131">CORS</span></span>
<span data-ttu-id="799b8-132">Теперь для настройки CORS используется колонка на портале управления Azure, а не параметр приложения **MS_CrossDomainOrigins** со значениями, разделенными запятыми.</span><span class="sxs-lookup"><span data-stu-id="799b8-132">Instead of a comma-delimited **MS_CrossDomainOrigins** app setting, there is now a blade in the Azure management portal for configuring CORS.</span></span> <span data-ttu-id="799b8-133">Также приложение можно настроить с помощью таких средств диспетчера ресурсов, как Azure PowerShell, интерфейс командной строки или [обозреватель ресурсов](https://resources.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="799b8-133">Alternatively, it can be configured using Resource Manager tooling such as Azure PowerShell, CLI or [Resource Explorer](https://resources.azure.com/).</span></span> <span data-ttu-id="799b8-134">Задайте свойство **cors** типа ресурса **Microsoft.Web/sites/config** для ресурса **&lt;site name&gt;/web**.</span><span class="sxs-lookup"><span data-stu-id="799b8-134">Set the **cors** property on the **Microsoft.Web/sites/config** resource type for your **&lt;site name&gt;/web** resource.</span></span> <span data-ttu-id="799b8-135">Например:</span><span class="sxs-lookup"><span data-stu-id="799b8-135">For example:</span></span>

    {
        "cors": {
            "allowedOrigins": [
                "https://localhost:44300"
            ]
        }
    } 

### <a name="api-metadata"></a><span data-ttu-id="799b8-136">Метаданные API</span><span class="sxs-lookup"><span data-stu-id="799b8-136">API metadata</span></span>
<span data-ttu-id="799b8-137">Колонка определения API теперь доступна в веб-, мобильных приложениях, а также приложениях API.</span><span class="sxs-lookup"><span data-stu-id="799b8-137">The API definition blade is now available across Web, Mobile and API Apps.</span></span> <span data-ttu-id="799b8-138">На портале управления можно указать относительный или абсолютный URL-адрес конечной точки, в которой размещено представление Swagger 2.0 вашего API.</span><span class="sxs-lookup"><span data-stu-id="799b8-138">In the management portal, you can specify either a relative url or an absolute url pointing to an endpoint that hosts a Swagger 2.0 representation of your API.</span></span> <span data-ttu-id="799b8-139">Кроме того, возможна настройка с помощью инструментария диспетчера ресурсов.</span><span class="sxs-lookup"><span data-stu-id="799b8-139">Alternatively, it can be configured using Resource Manager tooling.</span></span> <span data-ttu-id="799b8-140">Задайте свойство **apiDefinition** типа ресурса **Microsoft.Web/sites/config** для ресурса **&lt;site name&gt;/web**.</span><span class="sxs-lookup"><span data-stu-id="799b8-140">Set the **apiDefinition** property on the **Microsoft.Web/sites/config** resource type for your **&lt;site name&gt;/web** resource.</span></span> <span data-ttu-id="799b8-141">Например:</span><span class="sxs-lookup"><span data-stu-id="799b8-141">For example:</span></span>

    {
        "apiDefinition":
        {
            "url": "https://myStorageAccount.blob.core.windows.net/swagger/apiDefinition.json"
        }
    }

<span data-ttu-id="799b8-142">Сейчас нужна общедоступная конечная точка метаданных, не требующая проверки подлинности, которую будут использовать подчиненные клиенты (например, для создания REST API Visual Studio и потока «Добавить API» PowerApps).</span><span class="sxs-lookup"><span data-stu-id="799b8-142">At this time, the metadata endpoint needs to be publicly accessible without authentication for many downstream clients (e.g. Visual Studio REST API client generation and PowerApps "Add API" flow) to consume it.</span></span> <span data-ttu-id="799b8-143">Это значит, что если используется проверка подлинности службы приложений и необходимо предоставить определение API из самого приложения, вам нужно использовать отложенную проверку подлинности, описанную выше, чтобы маршрут к метаданным Swagger был общедоступен.</span><span class="sxs-lookup"><span data-stu-id="799b8-143">This does mean if you are using App Service authentication and want to expose the API definition from within your app itself, you will need to use the Deferred Authentication option described earlier so that the route to your Swagger metadata is public.</span></span>

## <a name="management-portal"></a><span data-ttu-id="799b8-144">Портал управления</span><span class="sxs-lookup"><span data-stu-id="799b8-144">Management Portal</span></span>
<span data-ttu-id="799b8-145">Выбрав на портале **Создать > Интернет+мобильные устройства > Приложение API**, вы можете создать приложения API со всеми новыми возможностями, описанными в этой статье.</span><span class="sxs-lookup"><span data-stu-id="799b8-145">Selecting **New > Web + Mobile > API App** in the portal will create API apps that reflect the new capabilities described in the article.</span></span> <span data-ttu-id="799b8-146">Выбрав **Обзор > Приложения API**, вы только отобразите новые приложения API.</span><span class="sxs-lookup"><span data-stu-id="799b8-146">**Browse > API Apps** will only show these new API apps.</span></span> <span data-ttu-id="799b8-147">Когда вы входите в приложение API, колонка использует тот же макет и возможности, что используют веб- и мобильные приложения.</span><span class="sxs-lookup"><span data-stu-id="799b8-147">Once you browse into an API app, the blade shares the same layout and capabilities as those of Web and Mobile Apps.</span></span> <span data-ttu-id="799b8-148">Единственное отличие заключается в содержимом быстрого запуска и порядке параметров.</span><span class="sxs-lookup"><span data-stu-id="799b8-148">The only differences are quickstart content and ordering of settings.</span></span>

<span data-ttu-id="799b8-149">Существующие приложения API (или приложения API Marketplace, созданные из приложений логики) с возможностями предварительной версии, доступными ранее, по-прежнему будут отображаться в конструкторе приложений логики и при просмотре всех ресурсов в группе.</span><span class="sxs-lookup"><span data-stu-id="799b8-149">Existing API apps (or Marketplace API apps created from Logic Apps) with the previous Preview capabilities will still be visible in the Logic Apps designer and when browsing all resources in a resource group.</span></span>

## <a name="visual-studio"></a><span data-ttu-id="799b8-150">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="799b8-150">Visual Studio</span></span>
<span data-ttu-id="799b8-151">Большая часть средств для веб-приложений совместимо с новыми приложениями API, так как они используют один и тот же базовый тип ресурсов **Microsoft.Web/sites** .</span><span class="sxs-lookup"><span data-stu-id="799b8-151">Most Web Apps tooling will work with new API apps since they share the same underlying **Microsoft.Web/sites** resource type.</span></span> <span data-ttu-id="799b8-152">Тем не менее, инструментарий Azure Visual Studio следует обновить до версии 2.8.1 или более поздней, так как это предоставит ряд возможностей в зависимости от API.</span><span class="sxs-lookup"><span data-stu-id="799b8-152">The Azure Visual Studio tooling, however, should be upgraded to version 2.8.1 or later since it exposes a number of capabilities specific to APIs.</span></span> <span data-ttu-id="799b8-153">Скачайте пакет SDK на [странице загрузок Azure](https://azure.microsoft.com/downloads/).</span><span class="sxs-lookup"><span data-stu-id="799b8-153">Download the SDK from the [Azure downloads page](https://azure.microsoft.com/downloads/).</span></span>

<span data-ttu-id="799b8-154">В ходе рационализации типов службы приложений также унифицирована функция публикации, которую можно использовать, выбрав **Публикация > Служба приложений Microsoft Azure**:</span><span class="sxs-lookup"><span data-stu-id="799b8-154">With the rationalization of the App Service types, publish is also unified under **Publish > Microsoft Azure App Service**:</span></span>

![Публикация приложений API](./media/app-service-api-whats-changed/api-apps-publish.png)

<span data-ttu-id="799b8-156">Дополнительные сведения о пакете SDK 2.8.1 см. в объявлении в этой [записи блога](https://azure.microsoft.com/blog/announcing-azure-sdk-2-8-1-for-net/).</span><span class="sxs-lookup"><span data-stu-id="799b8-156">To learn more about SDK 2.8.1, read the announcement [blog post](https://azure.microsoft.com/blog/announcing-azure-sdk-2-8-1-for-net/).</span></span>

<span data-ttu-id="799b8-157">Кроме того, профиль публикации можно импортировать вручную на портале управления, чтобы включить публикацию.</span><span class="sxs-lookup"><span data-stu-id="799b8-157">Alternatively, you can manually import the publish profile from the management portal to enable publish.</span></span> <span data-ttu-id="799b8-158">Однако, чтобы использовать Cloud Explorer, создавать код и выбирать или создавать приложения API, необходимо установить пакет SDK 2.8.1 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="799b8-158">However, Cloud Explorer, code generation and API app selection/creation will require SDK 2.8.1 or higher.</span></span>

## <a name="migrating-existing-api-apps"></a><span data-ttu-id="799b8-159">Миграция существующих приложений API</span><span class="sxs-lookup"><span data-stu-id="799b8-159">Migrating existing API apps</span></span>
<span data-ttu-id="799b8-160">Если настраиваемый API развернут в предыдущей предварительной версии приложений API, до 31 декабря 2015 г. нужно перенести эти приложения в новую модель.</span><span class="sxs-lookup"><span data-stu-id="799b8-160">If your custom API is deployed to the previous Preview version of API Apps, we request that you migrate to the new model for API Apps by December 31, 2015.</span></span> <span data-ttu-id="799b8-161">Так как и старая, и новая модель используют веб-API в службе приложений, основную часть существующего кода можно использовать снова.</span><span class="sxs-lookup"><span data-stu-id="799b8-161">Since both the old and new model are based on Web APIs hosted in App Service, the majority of existing code can be reused.</span></span>

### <a name="hosting-and-redeployment"></a><span data-ttu-id="799b8-162">Размещение и повторное развертывание</span><span class="sxs-lookup"><span data-stu-id="799b8-162">Hosting and redeployment</span></span>
<span data-ttu-id="799b8-163">Шаги повторного развертывания такие же, как при развертывании любого существующего веб-API в службе приложений.</span><span class="sxs-lookup"><span data-stu-id="799b8-163">The steps for redeploying are the same as deploying any existing Web API to App Service.</span></span> <span data-ttu-id="799b8-164">Шаги:</span><span class="sxs-lookup"><span data-stu-id="799b8-164">Steps:</span></span>

1. <span data-ttu-id="799b8-165">Создайте пустое приложение API.</span><span class="sxs-lookup"><span data-stu-id="799b8-165">Create an empty API app.</span></span> <span data-ttu-id="799b8-166">Это можно сделать на портале, выбрав «Создать > Приложение API», с использованием публикации в Visual Studio или инструментария диспетчера ресурсов.</span><span class="sxs-lookup"><span data-stu-id="799b8-166">This can be done in the portal with New > API App, in Visual Studio from publish, or from Resource Manager tooling.</span></span> <span data-ttu-id="799b8-167">При использовании шаблонов и средств Resource Manager задайте свойству **kind** типа ресурса **Microsoft.Web/sites** значение **api**. Это приведет быстрый запуск и параметры на портале управления в соответствие сценариям API.</span><span class="sxs-lookup"><span data-stu-id="799b8-167">If using Resource Manager tooling or templates, set the **kind** value to **api** on the **Microsoft.Web/sites** resource type to have the quickstarts and settings in the management portal oriented towards API scenarios.</span></span>
2. <span data-ttu-id="799b8-168">Подключите проект к пустому приложению API и разверните его, используя любой механизм развертывания, который поддерживает служба приложений.</span><span class="sxs-lookup"><span data-stu-id="799b8-168">Connect and deploy your project to the empty API app using any of the deployment mechanisms supported by App Service.</span></span> <span data-ttu-id="799b8-169">Дополнительные сведения см. в [документации по развертыванию службы приложений Azure](../app-service-web/web-sites-deploy.md).</span><span class="sxs-lookup"><span data-stu-id="799b8-169">Read [Azure App Service deployment documentation](../app-service-web/web-sites-deploy.md) to learn more.</span></span> 

### <a name="authentication"></a><span data-ttu-id="799b8-170">Аутентификация</span><span class="sxs-lookup"><span data-stu-id="799b8-170">Authentication</span></span>
<span data-ttu-id="799b8-171">Службы проверки подлинности службы приложений поддерживают те же возможности, что и предыдущая модель приложений API.</span><span class="sxs-lookup"><span data-stu-id="799b8-171">The App Service authentication services support the same capabilities that were available with the previous API Apps model.</span></span> <span data-ttu-id="799b8-172">Если вы используете токены сеансов и вам необходимы пакеты SDK, используйте следующие пакеты для клиента и сервера:</span><span class="sxs-lookup"><span data-stu-id="799b8-172">If you are using session tokens and require SDKs, use the following client and server SDKs:</span></span>

* <span data-ttu-id="799b8-173">Для клиента: [пакет Azure SDK для мобильного клиента](http://www.nuget.org/packages/Microsoft.Azure.Mobile.Client/)</span><span class="sxs-lookup"><span data-stu-id="799b8-173">Client: [Azure Mobile Client SDK](http://www.nuget.org/packages/Microsoft.Azure.Mobile.Client/)</span></span>
* <span data-ttu-id="799b8-174">Для сервера: [расширение проверки подлинности .NET для мобильных приложений Microsoft Azure](http://www.nuget.org/packages/Microsoft.Azure.Mobile.Server.Authentication/)</span><span class="sxs-lookup"><span data-stu-id="799b8-174">Server: [Microsoft Azure Mobile App .NET Authentication Extension](http://www.nuget.org/packages/Microsoft.Azure.Mobile.Server.Authentication/)</span></span> 

<span data-ttu-id="799b8-175">Если же вы используете альфа-версию пакета SDK для службы приложений, такие пакеты являются устаревшими:</span><span class="sxs-lookup"><span data-stu-id="799b8-175">If you were instead using the App Service alpha SDKs, these are now deprecated:</span></span>

* <span data-ttu-id="799b8-176">Для клиента: [пакет SDK для службы приложений Microsoft Azure](http://www.nuget.org/packages/Microsoft.Azure.AppService)</span><span class="sxs-lookup"><span data-stu-id="799b8-176">Client: [Microsoft Azure AppService SDK](http://www.nuget.org/packages/Microsoft.Azure.AppService)</span></span>
* <span data-ttu-id="799b8-177">Для сервера: [Microsoft.Azure.AppService.ApiApps.Service](http://www.nuget.org/packages/Microsoft.Azure.AppService.ApiApps.Service)</span><span class="sxs-lookup"><span data-stu-id="799b8-177">Server: [Microsoft.Azure.AppService.ApiApps.Service](http://www.nuget.org/packages/Microsoft.Azure.AppService.ApiApps.Service)</span></span>

<span data-ttu-id="799b8-178">Для Azure Active Directory не нужна специальная служба приложений, если вы используете токен AAD напрямую.</span><span class="sxs-lookup"><span data-stu-id="799b8-178">In particular with Azure Active Directory, however, no App Service-specific is required if you are using the AAD token directly.</span></span>

### <a name="internal-access"></a><span data-ttu-id="799b8-179">Внутренний доступ</span><span class="sxs-lookup"><span data-stu-id="799b8-179">Internal access</span></span>
<span data-ttu-id="799b8-180">Предыдущая модель приложений API предусматривала встроенный уровень внутреннего доступа.</span><span class="sxs-lookup"><span data-stu-id="799b8-180">The previous API Apps model included a built-in internal access level.</span></span> <span data-ttu-id="799b8-181">При этом было необходимо использовать пакет SDK для подписи запросов.</span><span class="sxs-lookup"><span data-stu-id="799b8-181">This required use of the SDK for signing requests.</span></span> <span data-ttu-id="799b8-182">Как описано ранее в этой статье, субъект-службу AAD можно использовать с новой моделью приложений API в качестве альтернативного метода проверки подлинности с взаимодействием между службами, и при этом не нужно устанавливать специальный пакет SDK для службы приложений.</span><span class="sxs-lookup"><span data-stu-id="799b8-182">As described earlier, with the new API Apps model, AAD service principals can be used as an alternate for service-to-service authentication without requiring an App Service-specific SDK.</span></span> <span data-ttu-id="799b8-183">Дополнительные сведения см. в статье [Проверка подлинности с использованием субъекта-службы для приложений API в службе приложений Azure](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="799b8-183">Learn more in [Service principal authentication for API Apps in Azure App Service](app-service-api-dotnet-service-principal-auth.md).</span></span>

### <a name="discovery"></a><span data-ttu-id="799b8-184">Обнаружение</span><span class="sxs-lookup"><span data-stu-id="799b8-184">Discovery</span></span>
<span data-ttu-id="799b8-185">В предыдущей модели приложений API был API для обнаружения других приложений API в среде выполнения в той же группе ресурсов для одного шлюза.</span><span class="sxs-lookup"><span data-stu-id="799b8-185">The previous API Apps model had APIs for discovering other API apps at runtime in the same resource group behind the same gateway.</span></span> <span data-ttu-id="799b8-186">Это особенно полезно в архитектурах, где реализуются шаблоны микрослужб.</span><span class="sxs-lookup"><span data-stu-id="799b8-186">This is especially useful in architectures that implement microservice patterns.</span></span> <span data-ttu-id="799b8-187">Хотя эта возможность не поддерживается напрямую, есть несколько доступных вариантов.</span><span class="sxs-lookup"><span data-stu-id="799b8-187">While this is not directly supported, a number of options are available:</span></span>

1. <span data-ttu-id="799b8-188">Используйте API Диспетчера ресурсов Azure для обнаружения.</span><span class="sxs-lookup"><span data-stu-id="799b8-188">Use the Azure Resource Manager API's for discovery.</span></span>
2. <span data-ttu-id="799b8-189">Разместите службу управления API Azure перед API, размещенными в службе приложений.</span><span class="sxs-lookup"><span data-stu-id="799b8-189">Put Azure API Management in front of your App Service-hosted APIs.</span></span> <span data-ttu-id="799b8-190">Служба управления API Azure выступает в качестве интерфейсной части и может предоставлять постоянные URL-адреса, доступные извне приложения, даже при изменении внутренней топологии.</span><span class="sxs-lookup"><span data-stu-id="799b8-190">Azure API Management serves as a facade and can provide a stable external facing url even if you internal topology changes.</span></span>
3. <span data-ttu-id="799b8-191">Вы можете создать собственное приложение API для обнаружения и использовать его для регистрации других приложений при запуске.</span><span class="sxs-lookup"><span data-stu-id="799b8-191">Build your own discovery API app and have other API apps register with the discovery app on startup.</span></span>
4. <span data-ttu-id="799b8-192">Во время развертывания задайте для параметров всех приложений API (и клиентов) значения конечных точек других приложений API.</span><span class="sxs-lookup"><span data-stu-id="799b8-192">At deployment time, populate the app settings of all the API apps (and clients) with the endpoints of the other API apps.</span></span> <span data-ttu-id="799b8-193">Это эффективно в шаблонах развертывания, так как теперь приложения API позволяют управлять URL-адресами.</span><span class="sxs-lookup"><span data-stu-id="799b8-193">This is viable in template deployments and since API Apps now give you control of the url.</span></span>

## <a name="using-api-apps-with-logic-apps"></a><span data-ttu-id="799b8-194">Использование приложений API с приложениями логики</span><span class="sxs-lookup"><span data-stu-id="799b8-194">Using API Apps with Logic Apps</span></span>
<span data-ttu-id="799b8-195">Новая модель приложений API хорошо работает с [версией схемы приложений логики от 01-08-2015](../logic-apps/logic-apps-schema-2015-08-01.md).</span><span class="sxs-lookup"><span data-stu-id="799b8-195">The new API apps model works well with [Logic Apps schema version 2015-08-01](../logic-apps/logic-apps-schema-2015-08-01.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="799b8-196">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="799b8-196">Next Steps</span></span>
<span data-ttu-id="799b8-197">Дополнительную информацию см. в статьях в [разделе документации по приложениям API](https://azure.microsoft.com/documentation/services/app-service/api/).</span><span class="sxs-lookup"><span data-stu-id="799b8-197">To learn more, read the articles in the [API Apps Documentation section](https://azure.microsoft.com/documentation/services/app-service/api/).</span></span> <span data-ttu-id="799b8-198">В эти статьи уже добавлены сведения о новой модели для приложений API.</span><span class="sxs-lookup"><span data-stu-id="799b8-198">They have been updated to reflect the new model for API Apps.</span></span> <span data-ttu-id="799b8-199">Кроме того, используйте форумы, чтобы получить дополнительные сведения или рекомендации по миграции:</span><span class="sxs-lookup"><span data-stu-id="799b8-199">In addition, do reach out on the forums for additional details or guidance on migration:</span></span>

* [<span data-ttu-id="799b8-200">Форум MSDN</span><span class="sxs-lookup"><span data-stu-id="799b8-200">MSDN forum</span></span>](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureAPIApps)
* [<span data-ttu-id="799b8-201">Stack Overflow</span><span class="sxs-lookup"><span data-stu-id="799b8-201">Stack Overflow</span></span>](http://stackoverflow.com/questions/tagged/azure-api-apps)

