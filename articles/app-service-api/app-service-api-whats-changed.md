---
title: "API службы приложений — изменения aaaApp | Документы Microsoft"
description: "Узнайте о новых возможностях приложений API в службе приложений Azure."
services: app-service\api
documentationcenter: .net
author: mohitsriv
manager: erikre
editor: tdykstra
ms.assetid: a9b58066-e8fd-48b8-a651-4613b1736433
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/29/2016
ms.author: rachelap
ms.openlocfilehash: 79df54f1dae91d7c5d3b66d208d0d1c1d7d55ae9
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="app-service-api-apps---whats-changed"></a>Изменения в приложениях API службы приложений
В описании события Connect() hello в ноября 2015 г., были ряд улучшений tooAzure службы приложений [было объявлено](https://azure.microsoft.com/blog/azure-app-service-updates-november-2015/). Эти улучшения включают базовые изменения toobetter tooAPI приложений с мобильных и веб-приложений, уменьшения числа концепции и повышения производительности, развертывания и выполнения. Запуск нового приложения API 30 ноября 2015 г., создается с помощью портала управления Azure hello или hello последнюю инструментарий будет отражать эти изменения. В этой статье описаны эти изменения, а также методы tooredeploy существующих приложений tootake преимуществами hello.

## <a name="feature-changes"></a>Изменения функций
ключевые функции Hello API приложения — проверка подлинности, CORS и API метаданных — переместили непосредственно в приложение службы. Благодаря этому изменению hello возможности доступны через Web, мобильных устройств и приложения API. Фактически, все три папки hello же **Microsoft.Web/sites** тип ресурса в диспетчере ресурсов. шлюз приложения API Hello больше не нужны или предлагаемых в приложениях API. Также можно сделать проще toouse API управления Azure с момента будут просто hello один API-Интерфейс управления шлюз.

![Обзор приложений API](./media/app-service-api-whats-changed/api-apps-overview.png)

Основной принцип проектирования модели с hello обновления приложения API — tooenable toobring API, что находится в выбранном языке.  Если API веб-приложения или мобильное приложение уже развернуто, у вас tooredeploy вашего приложения tootake преимуществами новых функций hello. Если вы используете предварительную версию приложений API, подробные сведения по переходу на новую модель можно просмотреть ниже.

### <a name="authentication"></a>Аутентификация
Hello существующих готовое к использованию приложения API, мобильные службы или приложения и веб-приложений функции проверки подлинности были объединены и доступны в одной стоечный модуль проверки подлинности службы приложений Azure на портале управления hello. Службы tooauthentication введение в службе приложений, в разделе [развернув приложение службы проверки подлинности и авторизации](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/).

Сценарии использования API предоставляют множество новых возможностей:

* **Поддержка непосредственно с помощью Azure Active Directory**, без необходимости маркер AAD hello tooexchange для токена сеанса кода клиента: клиент достаточно включить токены AAD hello в заголовок Authorization hello, токен носителя toohello в соответствии с Спецификация. Это также означает SDK не зависящие от приложения службы, необходимые на стороне клиента или сервера hello. 
* **Доступ к Service to service или «Internal»**: при наличии процесса управляющей программы или необходимости tooAPIs доступ без интерфейса другим клиентом, вы можете запросить маркер с использованием участника-службы AAD и передать его tooApp службы для проверки подлинности с вашей приложение.
* **Отложенное авторизации**: многие приложения имеют различные ограничения доступа для разных частей приложения hello. Это может потребоваться toobe некоторые API-интерфейсы общедоступным, а для других требуется вход. Hello исходной функции проверки подлинности и авторизации была основана, с hello всего сайта, требующие входа. Этот параметр по-прежнему существует, но можно также разрешить код приложения toorender доступа решения после приложения службы прошел проверку подлинности пользователя hello.

Дополнительные сведения о новых возможностях проверки подлинности hello см. в разделе [проверки подлинности и авторизации для приложения API в службе приложений Azure](app-service-api-authentication.md). Сведения о том, как toomigrate существующего приложения API из предыдущих API приложения hello модели toohello новый один, см. в разделе [перенос существующего приложения API](#migrating-existing-api-apps) далее в этой статье.

### <a name="cors"></a>CORS
Вместо с разделителями запятыми **MS_CrossDomainOrigins** приложения параметра, теперь есть стоечный модуль в hello портала управления Azure для настройки CORS. Также приложение можно настроить с помощью таких средств диспетчера ресурсов, как Azure PowerShell, интерфейс командной строки или [обозреватель ресурсов](https://resources.azure.com/). Набор hello **cors** свойство hello **Microsoft.Web/sites/config** тип ресурса для вашего  **&lt;имя сайта&gt;или веб-** ресурсов. Например:

    {
        "cors": {
            "allowedOrigins": [
                "https://localhost:44300"
            ]
        }
    } 

### <a name="api-metadata"></a>Метаданные API
колонки определение Hello API доступен через API приложениями, мобильных и веб. На портале управления hello можно указать относительный URL-адрес или абсолютный URL-адрес, указывающий tooan конечной точки, представление узлов Swagger 2.0 API. Кроме того, возможна настройка с помощью инструментария диспетчера ресурсов. Набор hello **apiDefinition** свойство hello **Microsoft.Web/sites/config** тип ресурса для вашего  **&lt;имя сайта&gt;или веб-** ресурсов. Например:

    {
        "apiDefinition":
        {
            "url": "https://myStorageAccount.blob.core.windows.net/swagger/apiDefinition.json"
        }
    }

В настоящее время hello метаданных конечной точки требуется toobe общего доступа без проверки подлинности для многих tooconsume подчиненных клиентов (например Visual Studio API-интерфейса REST создание клиента и PowerApps потока «Добавить API») ее. Это значит, если вы используете проверку подлинности службы приложений и определения API hello tooexpose из в само приложение, необходимо будет toouse hello Отложенная проверка подлинности параметр описано ранее, чтобы метаданные Swagger tooyour маршрут hello является открытым.

## <a name="management-portal"></a>Портал управления
При выборе **Создать > Интернет + мобильные устройства > приложения API** в hello портал создаст приложения API, которые отражают новые возможности hello, описанное в статье hello. Выбрав **Обзор > Приложения API**, вы только отобразите новые приложения API. После просмотра в приложение API общих папок колонке hello hello же макет и возможности, что и веб-приложений и мобильных приложений. Hello единственными отличиями являются примеры использования содержимого и порядок параметров.

Существующие приложения API (или Marketplace API приложений, созданных из Logic Apps) с hello предыдущих возможность просмотра будет по-прежнему отображаться в конструкторе логики приложения hello и при просмотре всех ресурсов в группе ресурсов.

## <a name="visual-studio"></a>Visual Studio
Большинство веб-приложений, поскольку они совместно используют инструментарий будет работать с нового приложения API hello же базовый **Microsoft.Web/sites** типа ресурса. Hello Azure Visual Studio для работы с проектами, но следует обновленного tooversion 2.8.1 или более поздней версии, так как оно предоставляет ряд возможностей конкретного tooAPIs. Загрузить пакет SDK для hello hello [страницу загрузок Azure](https://azure.microsoft.com/downloads/).

Рационализации hello объекта типы служб приложения hello, публиковать также единой под **публикации > службу приложений Microsoft Azure**:

![Публикация приложений API](./media/app-service-api-whats-changed/api-apps-publish.png)

Дополнительные сведения о SDK 2.8.1, объявления hello чтения toolearn [блога](https://azure.microsoft.com/blog/announcing-azure-sdk-2-8-1-for-net/).

Кроме того, можно вручную импортировать hello профиль из tooenable портала управления hello публикации публикации. Однако, чтобы использовать Cloud Explorer, создавать код и выбирать или создавать приложения API, необходимо установить пакет SDK 2.8.1 или более поздней версии.

## <a name="migrating-existing-api-apps"></a>Миграция существующих приложений API
Если настраиваемого API развернутой toohello предыдущей предварительной версии приложения API, мы запроса перенести toohello новую модель для приложений API по 31 декабря 2015 г. Поскольку оба hello старой и новой модели созданы на основе веб-API, размещенных в службе приложений, могут повторно hello основная часть существующего кода.

### <a name="hosting-and-redeployment"></a>Размещение и повторное развертывание
Hello действия для повторного развертывания hello то же, что развертывание любой существующий tooApp веб-API службы. Шаги:

1. Создайте пустое приложение API. Это можно сделать на портале hello с New > приложения API, в Visual Studio, из публикации или средства диспетчера ресурсов. Если используется диспетчер ресурсов средства и шаблоны, задайте hello **вид** значение слишком**api** на hello **Microsoft.Web/sites** краткие руководства по hello toohave типа ресурсов и параметров в портал управления Hello ориентированных сценариев API.
2. Подключите и развертывания проекта toohello пустой API приложения использование всех механизмы развертывания hello поддерживается службой приложений. Чтение [документации по развертыванию службы приложений Azure](../app-service-web/web-sites-deploy.md) toolearn дополнительные. 

### <a name="authentication"></a>Аутентификация
Hello поддержка службы проверки подлинности службы приложений hello такие же возможности, которые были доступны с предыдущей модели приложения API hello. Если используется токенов сеанса и требуется пакеты SDK, используйте hello следующие пакеты SDK клиента и сервера:

* Для клиента: [пакет Azure SDK для мобильного клиента](http://www.nuget.org/packages/Microsoft.Azure.Mobile.Client/)
* Для сервера: [расширение проверки подлинности .NET для мобильных приложений Microsoft Azure](http://www.nuget.org/packages/Microsoft.Azure.Mobile.Server.Authentication/) 

При использовании вместо hello альфа-канал службы приложений пакеты SDK, они не являются устаревшими:

* Для клиента: [пакет SDK для службы приложений Microsoft Azure](http://www.nuget.org/packages/Microsoft.Azure.AppService)
* Для сервера: [Microsoft.Azure.AppService.ApiApps.Service](http://www.nuget.org/packages/Microsoft.Azure.AppService.ApiApps.Service)

В частности с Azure Active Directory, однако нет службы конкретного приложения является обязательным, если маркер AAD hello используется напрямую.

### <a name="internal-access"></a>Внутренний доступ
Hello предыдущей модели приложения API включен уровень встроенных внутреннего доступа. Это потребовало использование hello пакета SDK для подписи запросов. Как было сказано выше, с новой модели приложений API hello, субъекты-службы AAD используется в качестве альтернативы для проверки подлинности службы для службы без необходимости обновления конкретного приложения пакета SDK. Дополнительные сведения см. в статье [Проверка подлинности с использованием субъекта-службы для приложений API в службе приложений Azure](app-service-api-dotnet-service-principal-auth.md).

### <a name="discovery"></a>Обнаружение
Hello предыдущих приложения API модели имели API-интерфейсы для обнаружения других API приложений во время выполнения в hello одну группу ресурсов за hello одного шлюза. Это особенно полезно в архитектурах, где реализуются шаблоны микрослужб. Хотя эта возможность не поддерживается напрямую, есть несколько доступных вариантов.

1. Используйте hello API диспетчера ресурсов Azure для обнаружения.
2. Разместите службу управления API Azure перед API, размещенными в службе приложений. Служба управления API Azure выступает в качестве интерфейсной части и может предоставлять постоянные URL-адреса, доступные извне приложения, даже при изменении внутренней топологии.
3. Создание приложения API обнаружения и другими приложениями API зарегистрировать приложение hello обнаружения во время запуска.
4. Во время развертывания наполнить параметры приложения hello, все hello API приложения (и клиентов) hello конечных точек hello другими приложениями API. Это применяется в шаблон развертывания, и, поскольку теперь позволяют приложениям API управления hello URL-адреса.

## <a name="using-api-apps-with-logic-apps"></a>Использование приложений API с приложениями логики
Hello новой модели приложений API хорошо работает с [Logic Apps схемы версии 2015-08-01](../logic-apps/logic-apps-schema-2015-08-01.md).

## <a name="next-steps"></a>Дальнейшие действия
toolearn более, ознакомьтесь со статьями hello в hello [раздел документации по API приложений](https://azure.microsoft.com/documentation/services/app-service/api/). Их обновленные tooreflect hello новую модель для приложений API. Кроме того направляться на форумах hello для дополнительных сведений или руководство по миграции:

* [Форум MSDN](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureAPIApps)
* [Stack Overflow](http://stackoverflow.com/questions/tagged/azure-api-apps)

