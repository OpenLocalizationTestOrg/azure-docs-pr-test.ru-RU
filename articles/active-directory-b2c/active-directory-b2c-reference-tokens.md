---
title: "Azure Active Directory B2C. Справка по маркерам | Документация Майкрософт"
description: "Hello типов маркеров, выданных в Azure Active Directory B2C"
services: active-directory-b2c
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 6df79878-65cb-4dfc-98bb-2b328055bc2e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: dastrock
ms.openlocfilehash: 776bc88cc0308875ac6e576f19ac9edf50319d08
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-b2c-token-reference"></a><span data-ttu-id="45517-103">Azure AD B2C: справочник по маркерам</span><span class="sxs-lookup"><span data-stu-id="45517-103">Azure AD B2C: Token reference</span></span>
<span data-ttu-id="45517-104">При обработке каждого [потока аутентификации](active-directory-b2c-apps.md) Azure Active Directory B2C (Azure AD B2C) создает маркеры безопасности различных типов.</span><span class="sxs-lookup"><span data-stu-id="45517-104">Azure Active Directory B2C (Azure AD B2C) emits several types of security tokens as it processes each [authentication flow](active-directory-b2c-apps.md).</span></span> <span data-ttu-id="45517-105">В этом документе описывается формат hello, характеристики безопасности и содержимого каждого типа маркера.</span><span class="sxs-lookup"><span data-stu-id="45517-105">This document describes hello format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="45517-106">Типы маркеров</span><span class="sxs-lookup"><span data-stu-id="45517-106">Types of tokens</span></span>
<span data-ttu-id="45517-107">Azure AD B2C поддерживает hello [протокола авторизации OAuth 2.0](active-directory-b2c-reference-protocols.md), который использует оба токены доступа и обновления токенов.</span><span class="sxs-lookup"><span data-stu-id="45517-107">Azure AD B2C supports hello [OAuth 2.0 authorization protocol](active-directory-b2c-reference-protocols.md), which makes use of both access tokens and refresh tokens.</span></span> <span data-ttu-id="45517-108">Оно также поддерживает проверку подлинности и войти через [OpenID Connect](active-directory-b2c-reference-protocols.md), который вводит третий тип маркера: hello маркер идентификатора.</span><span class="sxs-lookup"><span data-stu-id="45517-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-b2c-reference-protocols.md), which introduces a third type of token: hello ID token.</span></span> <span data-ttu-id="45517-109">Каждый из этих маркеров представляется как "токен носителя".</span><span class="sxs-lookup"><span data-stu-id="45517-109">Each of these tokens is represented as a bearer token.</span></span>

<span data-ttu-id="45517-110">Токен носителя — это упрощенный токен безопасности, предоставляет hello tooa доступа «bearer» защищенный ресурс.</span><span class="sxs-lookup"><span data-stu-id="45517-110">A bearer token is a lightweight security token that grants hello "bearer" access tooa protected resource.</span></span> <span data-ttu-id="45517-111">Hello носителя является любая сторона, которая может предъявить токен hello.</span><span class="sxs-lookup"><span data-stu-id="45517-111">hello bearer is any party that can present hello token.</span></span> <span data-ttu-id="45517-112">Перед получением токена носителя сторона должна пройти проверку подлинности в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="45517-112">Azure AD must first authenticate a party before it can receive a bearer token.</span></span> <span data-ttu-id="45517-113">Но hello требуемые действия не предпринимаются токен toosecure hello в передачи и хранения, может быть перехвачено и использовать несанкционированной стороной.</span><span class="sxs-lookup"><span data-stu-id="45517-113">But if hello required steps are not taken toosecure hello token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="45517-114">У некоторых маркеров безопасности есть встроенный механизм, который предотвращает их использование несанкционированными сторонами, но токены носителя не имеют такого механизма.</span><span class="sxs-lookup"><span data-stu-id="45517-114">Some security tokens have a built-in mechanism for preventing unauthorized parties from using them, but bearer tokens do not have this mechanism.</span></span> <span data-ttu-id="45517-115">Они должны передаваться по защищенному каналу, например по протоколу TLS (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="45517-115">They must be transported in a secure channel, such as transport layer security (HTTPS).</span></span>

<span data-ttu-id="45517-116">Если токен носителя, передается за пределами безопасного канала, злоумышленник может использовать токен в третьего tooacquire hello и используйте его toogain несанкционированный доступ tooa защищенных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="45517-116">If a bearer token is transmitted outside a secure channel, a malicious party can use a man-in-the-middle attack tooacquire hello token and use it toogain unauthorized access tooa protected resource.</span></span> <span data-ttu-id="45517-117">Здравствуйте, те же принципы безопасности применяются при токены носителя хранятся или кэш для дальнейшего использования.</span><span class="sxs-lookup"><span data-stu-id="45517-117">hello same security principles apply when bearer tokens are stored or cached for later use.</span></span> <span data-ttu-id="45517-118">Необходимо всегда проверять, что приложение передает и сохраняет токены носителя безопасным образом.</span><span class="sxs-lookup"><span data-stu-id="45517-118">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span>

<span data-ttu-id="45517-119">Дополнительные сведения о безопасности во время применения токенов носителя см. в документе [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750) (RFC 6750, раздел 5).</span><span class="sxs-lookup"><span data-stu-id="45517-119">For additional security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="45517-120">Многие hello токенов, издаваемых Azure AD B2C реализованы в виде веб-маркеры JSON (JWT).</span><span class="sxs-lookup"><span data-stu-id="45517-120">Many of hello tokens that Azure AD B2C issues are implemented as JSON web tokens (JWTs).</span></span> <span data-ttu-id="45517-121">Маркер JWT — это компактное и безопасное для URL-адреса средство передачи информации между двумя сторонами.</span><span class="sxs-lookup"><span data-stu-id="45517-121">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span> <span data-ttu-id="45517-122">Маркеры JWT содержат сведения, называемые утверждениями.</span><span class="sxs-lookup"><span data-stu-id="45517-122">JWTs contain information known as claims.</span></span> <span data-ttu-id="45517-123">Ниже приведены проверочные утверждения информации о носителя hello и hello субъект маркера hello.</span><span class="sxs-lookup"><span data-stu-id="45517-123">These are assertions of information about hello bearer and hello subject of hello token.</span></span> <span data-ttu-id="45517-124">утверждения Hello в JWT — объекты JSON в кодировке и сериализацию для передачи.</span><span class="sxs-lookup"><span data-stu-id="45517-124">hello claims in JWTs are JSON objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="45517-125">Поскольку hello JWT, выданного Azure AD B2C подписан, но не зашифровано, можно легко проверять содержимое hello JWT toodebug его.</span><span class="sxs-lookup"><span data-stu-id="45517-125">Because hello JWTs issued by Azure AD B2C are signed but not encrypted, you can easily inspect hello contents of a JWT toodebug it.</span></span> <span data-ttu-id="45517-126">Это можно сделать с помощью нескольких средств, включая [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="45517-126">Several tools are available that can do this, including [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="45517-127">Дополнительные сведения о JWT ссылаться слишком[спецификации JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="45517-127">For more information about JWTs, refer too[JWT specifications](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="45517-128">Маркеры идентификации</span><span class="sxs-lookup"><span data-stu-id="45517-128">ID tokens</span></span>
<span data-ttu-id="45517-129">Маркер идентификатора представляет собой форму маркера безопасности, приложение получает от hello Azure AD B2C `authorize` и `token` конечных точек.</span><span class="sxs-lookup"><span data-stu-id="45517-129">An ID token is a form of security token that your app receives from hello Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="45517-130">Маркеров безопасности представлены в виде [JWT](#types-of-tokens), и они содержат утверждения, можно использовать tooidentify пользователей в приложении.</span><span class="sxs-lookup"><span data-stu-id="45517-130">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use tooidentify users in your app.</span></span> <span data-ttu-id="45517-131">Когда маркеров безопасности полученных из hello `authorize` конечной точки, они часто представляют собой toosign используется в приложениях tooweb пользователей.</span><span class="sxs-lookup"><span data-stu-id="45517-131">When ID tokens are acquired from hello `authorize` endpoint, they are often used toosign in users tooweb applications.</span></span> <span data-ttu-id="45517-132">Когда маркеров безопасности полученных из hello `token` конечной точки, они передаются в HTTP-запросы во время обмена данными между двумя компонентами hello же приложения или службы.</span><span class="sxs-lookup"><span data-stu-id="45517-132">When ID tokens are acquired from hello `token` endpoint, they can be sent in HTTP requests during communication between two components of hello same application or service.</span></span> <span data-ttu-id="45517-133">Hello утверждения в маркер идентификатора можно использовать по своему усмотрению.</span><span class="sxs-lookup"><span data-stu-id="45517-133">You can use hello claims in an ID token as you see fit.</span></span> <span data-ttu-id="45517-134">Они часто используемые toodisplay учетной записи информации или toomake решения по управлению доступом в приложении.</span><span class="sxs-lookup"><span data-stu-id="45517-134">They are commonly used toodisplay account information or toomake access control decisions in an app.</span></span>  

<span data-ttu-id="45517-135">На текущий момент маркеры идентификации подписываются, но не шифруются.</span><span class="sxs-lookup"><span data-stu-id="45517-135">ID tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="45517-136">Когда приложение или API получает маркер идентификатора, он должен [проверки подписи hello](#token-validation) tooprove, hello маркера подлинным.</span><span class="sxs-lookup"><span data-stu-id="45517-136">When your app or API receives an ID token, it must [validate hello signature](#token-validation) tooprove that hello token is authentic.</span></span> <span data-ttu-id="45517-137">Приложение или API-Интерфейс также необходимо проверить несколько утверждений в токен tooprove hello их правильность.</span><span class="sxs-lookup"><span data-stu-id="45517-137">Your app or API must also validate a few claims in hello token tooprove that it is valid.</span></span> <span data-ttu-id="45517-138">В зависимости от требований к сценарию hello, hello утверждения проверить с помощью приложения можно изменять, но приложения необходимо выполнить некоторые [общие проверки утверждений](#token-validation) в каждом сценарии.</span><span class="sxs-lookup"><span data-stu-id="45517-138">Depending on hello scenario requirements, hello claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="45517-139">Пример маркера идентификации</span><span class="sxs-lookup"><span data-stu-id="45517-139">Sample ID token</span></span>
```
// Line breaks for display purposes only

eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IklkVG9rZW5TaWduaW5nS2V5Q29udGFpbmVyIn0.
eyJleHAiOjE0NDIzNjAwMzQsIm5iZiI6MTQ0MjM1NjQzNCwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9s
b2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLzc3NTUyN2ZmLTlhMzctNDMwNy04YjNkLWNjMzExZjU4ZDkyNS92
Mi4wLyIsImFjciI6ImIyY18xX3NpZ25faW5fc3RvY2siLCJzdWIiOiJOb3Qgc3VwcG9ydGVkIGN1cnJlbnRs
eS4gVXNlIG9pZCBjbGFpbS4iLCJhdWQiOiI5MGMwZmU2My1iY2YyLTQ0ZDUtOGZiNy1iOGJiYzBiMjlkYzYi
LCJpYXQiOjE0NDIzNTY0MzQsImF1dGhfdGltZSI6MTQ0MjM1NjQzNCwiaWRwIjoiZmFjZWJvb2suY29tIn0.
h-uiKcrT882pSKUtWCpj-_3b3vPs3bOWsESAhPMrL-iIIacKc6_uZrWxaWvIYkLra5czBcGKWrYwrAC8ZvQe
DJWZ50WXQrZYODEW1OUwzaD_I1f1HE0c2uvaWdGXBpDEVdsD3ExKaFlKGjFR2V7F-fPThkVDdKmkUDQX3bVc
yyj2V2nlCQ9jd7aGnokTPfLfpOjuIrTsAdPcGpe5hfSEuwYDmqOJjGs9Jp1f-eSNEiCDQOaTBSvr479L5ptP
XWeQZyX2SypN05Rjr05bjZh3j70ZUimiocfJzjibeoDCaQTz907yAg91WYuFOrQxb-5BaUoR7K-O7vxr2M-_
CQhoFA

```

### <a name="access-tokens"></a><span data-ttu-id="45517-140">Маркеры доступа</span><span class="sxs-lookup"><span data-stu-id="45517-140">Access tokens</span></span>
<span data-ttu-id="45517-141">Маркер доступа также представляет собой форму маркера безопасности, приложение получает от hello Azure AD B2C `authorize` и `token` конечных точек.</span><span class="sxs-lookup"><span data-stu-id="45517-141">An access token is also a form of security token that your app receives from hello Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="45517-142">Маркеры доступа также представлены в виде [JWT](#types-of-tokens), и они содержат утверждения, которые можно использовать tooidentify hello предоставлены разрешения tooyour API-интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="45517-142">Access tokens are also represented as [JWTs](#types-of-tokens), and they contain claims that you can use tooidentify hello granted permissions tooyour APIs.</span></span> <span data-ttu-id="45517-143">На текущий момент маркеры доступа подписываются, но не шифруются.</span><span class="sxs-lookup"><span data-stu-id="45517-143">Access tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="45517-144">Маркеры доступа должен быть доступ используется tooprovide tooAPIs и ресурсов серверов.</span><span class="sxs-lookup"><span data-stu-id="45517-144">Access tokens should be used tooprovide access tooAPIs and resource servers.</span></span> <span data-ttu-id="45517-145">Дополнительные сведения о том, как слишком[использовать токены доступа](active-directory-b2c-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="45517-145">Learn more about how too[use access tokens](active-directory-b2c-access-tokens.md).</span></span> 

<span data-ttu-id="45517-146">Когда API получает маркер доступа, он должен [проверки подписи hello](#token-validation) tooprove, hello маркера подлинным.</span><span class="sxs-lookup"><span data-stu-id="45517-146">When your API receives an access token, it must [validate hello signature](#token-validation) tooprove that hello token is authentic.</span></span> <span data-ttu-id="45517-147">API также необходимо проверить несколько утверждений в токен tooprove hello их правильность.</span><span class="sxs-lookup"><span data-stu-id="45517-147">Your API must also validate a few claims in hello token tooprove that it is valid.</span></span> <span data-ttu-id="45517-148">В зависимости от требований к сценарию hello, hello утверждения проверить с помощью приложения можно изменять, но приложения необходимо выполнить некоторые [общие проверки утверждений](#token-validation) в каждом сценарии.</span><span class="sxs-lookup"><span data-stu-id="45517-148">Depending on hello scenario requirements, hello claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

### <a name="claims-in-id-and-access-tokens"></a><span data-ttu-id="45517-149">Утверждения в маркерах идентификации и доступа</span><span class="sxs-lookup"><span data-stu-id="45517-149">Claims in ID and access tokens</span></span>
<span data-ttu-id="45517-150">При использовании Azure AD B2C имеется тонкую настройку hello содержимое из ваших токенов.</span><span class="sxs-lookup"><span data-stu-id="45517-150">When you use Azure AD B2C, you have fine-grained control over hello content of your tokens.</span></span> <span data-ttu-id="45517-151">Можно настроить [политики](active-directory-b2c-reference-policies.md) toosend определенных наборов данных пользователя в утверждения, требуемые приложению для своих операций.</span><span class="sxs-lookup"><span data-stu-id="45517-151">You can configure [policies](active-directory-b2c-reference-policies.md) toosend certain sets of user data in claims that your app requires for its operations.</span></span> <span data-ttu-id="45517-152">Эти правила могут включать стандартные свойства, например hello пользователя `displayName` и `emailAddress`.</span><span class="sxs-lookup"><span data-stu-id="45517-152">These claims can include standard properties such as hello user's `displayName` and `emailAddress`.</span></span> <span data-ttu-id="45517-153">Кроме того, они могут содержать [настраиваемые пользовательские атрибуты](active-directory-b2c-reference-custom-attr.md) , которые вы можете задать в каталоге B2C.</span><span class="sxs-lookup"><span data-stu-id="45517-153">They can also include [custom user attributes](active-directory-b2c-reference-custom-attr.md) that you can define in your B2C directory.</span></span> <span data-ttu-id="45517-154">Каждый маркер идентификации и доступа, который вы получаете, содержит набор утверждений, связанных с безопасностью.</span><span class="sxs-lookup"><span data-stu-id="45517-154">Every ID and access token that you receive contains a certain set of security-related claims.</span></span> <span data-ttu-id="45517-155">Приложения могут использовать эти утверждения toosecurely проверки подлинности пользователей и запросов.</span><span class="sxs-lookup"><span data-stu-id="45517-155">Your applications can use these claims toosecurely authenticate users and requests.</span></span>

<span data-ttu-id="45517-156">Обратите внимание, что hello утверждений в токенах идентификатор не возвращаются в любом порядке.</span><span class="sxs-lookup"><span data-stu-id="45517-156">Note that hello claims in ID tokens are not returned in any particular order.</span></span> <span data-ttu-id="45517-157">Кроме того, новые утверждения могут появиться в маркерах идентификации в любое время.</span><span class="sxs-lookup"><span data-stu-id="45517-157">In addition, new claims can be introduced in ID tokens at any time.</span></span> <span data-ttu-id="45517-158">По мере появления новых утверждений ваше приложение не должно прерывать работу.</span><span class="sxs-lookup"><span data-stu-id="45517-158">Your app should not break as new claims are introduced.</span></span> <span data-ttu-id="45517-159">Ниже приведены hello заявляет, что предполагается tooexist в токенах идентификатор и доступа, выданный службой Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="45517-159">Here are hello claims that you expect tooexist in ID and access tokens issued by Azure AD B2C.</span></span> <span data-ttu-id="45517-160">Все дополнительные утверждения определяются политиками.</span><span class="sxs-lookup"><span data-stu-id="45517-160">Any additional claims are determined by policies.</span></span> <span data-ttu-id="45517-161">Для занятия, попробуйте проверки hello утверждения в маркер идентификатора образец hello, вставив его в [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="45517-161">For practice, try inspecting hello claims in hello sample ID token by pasting it into [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="45517-162">Дополнительные сведения можно найти в hello [спецификация OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="45517-162">Further details can be found in hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

| <span data-ttu-id="45517-163">Имя</span><span class="sxs-lookup"><span data-stu-id="45517-163">Name</span></span> | <span data-ttu-id="45517-164">Утверждение</span><span class="sxs-lookup"><span data-stu-id="45517-164">Claim</span></span> | <span data-ttu-id="45517-165">Пример значения</span><span class="sxs-lookup"><span data-stu-id="45517-165">Example value</span></span> | <span data-ttu-id="45517-166">Описание</span><span class="sxs-lookup"><span data-stu-id="45517-166">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="45517-167">Аудитория</span><span class="sxs-lookup"><span data-stu-id="45517-167">Audience</span></span> |`aud` |`90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6` |<span data-ttu-id="45517-168">Утверждение audience определяет получателя hello предназначен маркер hello.</span><span class="sxs-lookup"><span data-stu-id="45517-168">An audience claim identifies hello intended recipient of hello token.</span></span> <span data-ttu-id="45517-169">Для Azure AD B2C hello аудитория — идентификатор приложения приложения, назначенные tooyour приложение на портале регистрации приложения hello как.</span><span class="sxs-lookup"><span data-stu-id="45517-169">For Azure AD B2C, hello audience is your app's application ID, as assigned tooyour app in hello app registration portal.</span></span> <span data-ttu-id="45517-170">Ваше приложение должно проверить это значение и отклонить hello маркер, если они не совпадают.</span><span class="sxs-lookup"><span data-stu-id="45517-170">Your app should validate this value and reject hello token if it does not match.</span></span> |
| <span data-ttu-id="45517-171">Издатель</span><span class="sxs-lookup"><span data-stu-id="45517-171">Issuer</span></span> |`iss` |`https://login.microsoftonline.com/775527ff-9a37-4307-8b3d-cc311f58d925/v2.0/` |<span data-ttu-id="45517-172">Идентифицирует hello службы маркеров безопасности (STS), создает и возвращает токен hello.</span><span class="sxs-lookup"><span data-stu-id="45517-172">This claim identifies hello security token service (STS) that constructs and returns hello token.</span></span> <span data-ttu-id="45517-173">Он также определяет hello каталог Azure AD, в которой hello пользователь прошел проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="45517-173">It also identifies hello Azure AD directory in which hello user was authenticated.</span></span> <span data-ttu-id="45517-174">Приложение должно проверять hello издателя утверждения, что получено tooensure, hello токена из конечной v2.0 hello Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="45517-174">Your app should validate hello issuer claim tooensure that hello token came from hello Azure Active Directory v2.0 endpoint.</span></span> |
| <span data-ttu-id="45517-175">Время выдачи</span><span class="sxs-lookup"><span data-stu-id="45517-175">Issued at</span></span> |`iat` |`1438535543` |<span data-ttu-id="45517-176">Это утверждение — hello время выдачи маркера какие hello, представленный во время эпохи.</span><span class="sxs-lookup"><span data-stu-id="45517-176">This claim is hello time at which hello token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="45517-177">Время окончания срока действия</span><span class="sxs-lookup"><span data-stu-id="45517-177">Expiration time</span></span> |`exp` |`1438539443` |<span data-ttu-id="45517-178">Hello утверждения время истечения срока действия — hello время какие hello токен становится недопустимым, представленный во время эпохи.</span><span class="sxs-lookup"><span data-stu-id="45517-178">hello expiration time claim is hello time at which hello token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="45517-179">Приложения должны использовать это утверждение tooverify hello допустимость время существования маркера hello.</span><span class="sxs-lookup"><span data-stu-id="45517-179">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="45517-180">Не ранее</span><span class="sxs-lookup"><span data-stu-id="45517-180">Not before</span></span> |`nbf` |`1438535543` |<span data-ttu-id="45517-181">Это утверждение — hello время какие hello токен становится допустимым, представленный во время эпохи.</span><span class="sxs-lookup"><span data-stu-id="45517-181">This claim is hello time at which hello token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="45517-182">Это обычно hello же как выдачи токена hello hello времени.</span><span class="sxs-lookup"><span data-stu-id="45517-182">This is usually hello same as hello time hello token was issued.</span></span> <span data-ttu-id="45517-183">Приложения должны использовать это утверждение tooverify hello допустимость время существования маркера hello.</span><span class="sxs-lookup"><span data-stu-id="45517-183">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="45517-184">Version (версия)</span><span class="sxs-lookup"><span data-stu-id="45517-184">Version</span></span> |`ver` |`1.0` |<span data-ttu-id="45517-185">Это версия hello маркер идентификатора hello, в соответствии с определением Azure AD.</span><span class="sxs-lookup"><span data-stu-id="45517-185">This is hello version of hello ID token, as defined by Azure AD.</span></span> |
| <span data-ttu-id="45517-186">Хэш-код</span><span class="sxs-lookup"><span data-stu-id="45517-186">Code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="45517-187">Хэш-код включается в маркер идентификатора только в том случае, когда выдается маркер hello вместе с кодом авторизации OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="45517-187">A code hash is included in an ID token only when hello token is issued together with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="45517-188">Хэш-код может быть подлинность hello используется toovalidate код авторизации.</span><span class="sxs-lookup"><span data-stu-id="45517-188">A code hash can be used toovalidate hello authenticity of an authorization code.</span></span> <span data-ttu-id="45517-189">Дополнительные сведения о том, как tooperform проверки. в разделе hello [спецификация OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="45517-189">For more details on how tooperform this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>  |
| <span data-ttu-id="45517-190">Хэш маркера доступа</span><span class="sxs-lookup"><span data-stu-id="45517-190">Access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="45517-191">Хеш токена доступа включается в маркер идентификатора только в том случае, когда выдается маркер hello вместе с маркера доступа OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="45517-191">An access token hash is included in an ID token only when hello token is issued together with an OAuth 2.0 access token.</span></span> <span data-ttu-id="45517-192">Хеш токена доступа может быть используется toovalidate hello подлинность маркера доступа.</span><span class="sxs-lookup"><span data-stu-id="45517-192">An access token hash can be used toovalidate hello authenticity of an access token.</span></span> <span data-ttu-id="45517-193">Дополнительные сведения о том, как tooperform проверки. в разделе hello [спецификация OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html)</span><span class="sxs-lookup"><span data-stu-id="45517-193">For more details on how tooperform this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html)</span></span>  |
| <span data-ttu-id="45517-194">Специальное утверждение</span><span class="sxs-lookup"><span data-stu-id="45517-194">Nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="45517-195">Nonce — стратегии используемых toomitigate атак с повторением токенов.</span><span class="sxs-lookup"><span data-stu-id="45517-195">A nonce is a strategy used toomitigate token replay attacks.</span></span> <span data-ttu-id="45517-196">Приложения можно задать nonce в запрос на аутентификацию с помощью hello `nonce` параметр запроса.</span><span class="sxs-lookup"><span data-stu-id="45517-196">Your app can specify a nonce in an authorization request by using hello `nonce` query parameter.</span></span> <span data-ttu-id="45517-197">значение Hello, указываемые в запросе hello будет выдаваться без изменений в hello `nonce` утверждение с правом только маркер идентификатора.</span><span class="sxs-lookup"><span data-stu-id="45517-197">hello value you provide in hello request will be emitted unmodified in hello `nonce` claim of an ID token only.</span></span> <span data-ttu-id="45517-198">Это позволяет значение hello tooverify приложения с hello значением, указанным на hello запрос, который связывает приложение hello сеанса с помощью заданного идентификатора маркера.</span><span class="sxs-lookup"><span data-stu-id="45517-198">This allows your app tooverify hello value against hello value it specified on hello request, which associates hello app's session with a given ID token.</span></span> <span data-ttu-id="45517-199">Это проверку во время процесса проверки токенов идентификатор hello следует выполнять приложения.</span><span class="sxs-lookup"><span data-stu-id="45517-199">Your app should perform this validation during hello ID token validation process.</span></span> |
| <span data-ttu-id="45517-200">Субъект</span><span class="sxs-lookup"><span data-stu-id="45517-200">Subject</span></span> |`sub` |`884408e1-2918-4cz0-b12d-3aa027d7563b` |<span data-ttu-id="45517-201">Это является участником hello, о которых hello подтверждает токен, сведения, такие как hello пользователя приложения.</span><span class="sxs-lookup"><span data-stu-id="45517-201">This is hello principal about which hello token asserts information, such as hello user of an app.</span></span> <span data-ttu-id="45517-202">Это значение является неизменяемым и не может быть переназначено или повторно использовано.</span><span class="sxs-lookup"><span data-stu-id="45517-202">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="45517-203">Используется tooperform проверки авторизации может быть безопасно, например, если маркер hello используется tooaccess ресурса.</span><span class="sxs-lookup"><span data-stu-id="45517-203">It can be used tooperform authorization checks safely, such as when hello token is used tooaccess a resource.</span></span> <span data-ttu-id="45517-204">По умолчанию с Идентификатором hello объекта hello пользователя в каталоге hello заполняется hello субъект утверждений.</span><span class="sxs-lookup"><span data-stu-id="45517-204">By default, hello subject claim is populated with hello object ID of hello user in hello directory.</span></span> <span data-ttu-id="45517-205">toolearn более, в разделе [Azure Active Directory B2C: маркер, сеансов и настройки единого входа](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="45517-205">toolearn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="45517-206">Ссылка на класс контекста проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="45517-206">Authentication context class reference</span></span> |`acr` |<span data-ttu-id="45517-207">Не применяется</span><span class="sxs-lookup"><span data-stu-id="45517-207">Not applicable</span></span> |<span data-ttu-id="45517-208">В настоящее время не используется, за исключением случая hello старые политик.</span><span class="sxs-lookup"><span data-stu-id="45517-208">Not used currently, except in hello case of older policies.</span></span> <span data-ttu-id="45517-209">toolearn более, в разделе [Azure Active Directory B2C: маркер, сеансов и настройки единого входа](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="45517-209">toolearn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="45517-210">Политика инфраструктуры доверия</span><span class="sxs-lookup"><span data-stu-id="45517-210">Trust framework policy</span></span> |`tfp` |`b2c_1_sign_in` |<span data-ttu-id="45517-211">Это имя hello hello политики, которая была маркер идентификатора используется tooacquire hello.</span><span class="sxs-lookup"><span data-stu-id="45517-211">This is hello name of hello policy that was used tooacquire hello ID token.</span></span> |
| <span data-ttu-id="45517-212">Время проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="45517-212">Authentication time</span></span> |`auth_time` |`1438535543` |<span data-ttu-id="45517-213">Это утверждение — hello времени, по которому последнего введенные учетные данные пользователя, представленного во время эпохи.</span><span class="sxs-lookup"><span data-stu-id="45517-213">This claim is hello time at which a user last entered credentials, represented in epoch time.</span></span> |

### <a name="refresh-tokens"></a><span data-ttu-id="45517-214">Маркеры обновления</span><span class="sxs-lookup"><span data-stu-id="45517-214">Refresh tokens</span></span>
<span data-ttu-id="45517-215">Обновить маркеры являются маркерами безопасности, приложение можно использовать новый идентификатор токены tooacquire в и токенов доступа потока OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="45517-215">Refresh tokens are security tokens that your app can use tooacquire new ID tokens and access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="45517-216">Они предоставляют приложения долгосрочной tooresources доступ от имени пользователей без необходимости взаимодействия с пользователями.</span><span class="sxs-lookup"><span data-stu-id="45517-216">They provide your app with long-term access tooresources on behalf of users without requiring interaction with those users.</span></span>

<span data-ttu-id="45517-217">tooreceive токен обновления в ответ на токен, приложение должно запросить hello `offline_acesss` области.</span><span class="sxs-lookup"><span data-stu-id="45517-217">tooreceive a refresh token in a token response, your app must request hello `offline_acesss` scope.</span></span> <span data-ttu-id="45517-218">Дополнительные сведения о hello toolearn `offline_access` области, toohello см. [ссылку Azure AD B2C протокола](active-directory-b2c-reference-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="45517-218">toolearn more about hello `offline_access` scope, refer toohello [Azure AD B2C protocol reference](active-directory-b2c-reference-protocols.md).</span></span>

<span data-ttu-id="45517-219">Токенов обновления и всегда будет, полностью непрозрачный tooyour приложения.</span><span class="sxs-lookup"><span data-stu-id="45517-219">Refresh tokens are, and will always be, completely opaque tooyour app.</span></span> <span data-ttu-id="45517-220">Их выдает служба Azure AD, и только эта служба может их проверять и интерпретировать.</span><span class="sxs-lookup"><span data-stu-id="45517-220">They are issued by Azure AD and can be inspected and interpreted only by Azure AD.</span></span> <span data-ttu-id="45517-221">Они находятся в течение продолжительного времени, но не следует записывать приложение hello предположении, что токен обновления будет продолжаться в течение определенного периода времени.</span><span class="sxs-lookup"><span data-stu-id="45517-221">They are long-lived, but your app should not be written with hello expectation that a refresh token will last for a specific period of time.</span></span> <span data-ttu-id="45517-222">Маркеры обновления могут стать недействительными в любое время по разным причинам.</span><span class="sxs-lookup"><span data-stu-id="45517-222">Refresh tokens can be invalidated at any moment for a variety of reasons.</span></span> <span data-ttu-id="45517-223">Здравствуйте, только для вашего приложения tooknow, если токен обновления является допустимым в том числе tooattempt tooredeem его, делая запроса маркера tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="45517-223">hello only way for your app tooknow if a refresh token is valid is tooattempt tooredeem it by making a token request tooAzure AD.</span></span>

<span data-ttu-id="45517-224">Когда вы активируете новый маркер токена обновления (и если приложение было предоставлено hello `offline_access` области), вы получите новый маркер обновления в ответ на токен hello.</span><span class="sxs-lookup"><span data-stu-id="45517-224">When you redeem a refresh token for a new token (and if your app has been granted hello `offline_access` scope), you will receive a new refresh token in hello token response.</span></span> <span data-ttu-id="45517-225">Сохраняйте hello только что выданный маркер обновления.</span><span class="sxs-lookup"><span data-stu-id="45517-225">You should save hello newly issued refresh token.</span></span> <span data-ttu-id="45517-226">Его следует заменить hello токен обновления, который ранее использовался в запросе hello.</span><span class="sxs-lookup"><span data-stu-id="45517-226">It should replace hello refresh token you previously used in hello request.</span></span> <span data-ttu-id="45517-227">Такой подход обеспечит максимальный срок действия маркеров обновления.</span><span class="sxs-lookup"><span data-stu-id="45517-227">This helps guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="token-validation"></a><span data-ttu-id="45517-228">Проверка маркеров</span><span class="sxs-lookup"><span data-stu-id="45517-228">Token validation</span></span>
<span data-ttu-id="45517-229">toovalidate маркер, приложение должно проверять подпись hello и утверждения токена hello.</span><span class="sxs-lookup"><span data-stu-id="45517-229">toovalidate a token, your app should check both hello signature and claims of hello token.</span></span>

<span data-ttu-id="45517-230">Для проверки маркеров JWT доступны многие библиотеки с открытым исходным кодом в зависимости от выбранного языка.</span><span class="sxs-lookup"><span data-stu-id="45517-230">Many open source libraries are available for validating JWTs, depending on your preferred language.</span></span> <span data-ttu-id="45517-231">Мы рекомендуем изучить различные библиотеки, а не реализовывать логику проверки самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="45517-231">We recommend that you explore those options rather than implement your own validation logic.</span></span> <span data-ttu-id="45517-232">Узнайте, как использовать эти библиотеки в tooproperly может помочь Hello сведения в этом руководстве.</span><span class="sxs-lookup"><span data-stu-id="45517-232">hello information in this guide can help you learn how tooproperly use those libraries.</span></span>

### <a name="validate-hello-signature"></a><span data-ttu-id="45517-233">Проверить подпись hello</span><span class="sxs-lookup"><span data-stu-id="45517-233">Validate hello signature</span></span>
<span data-ttu-id="45517-234">JWT содержит три сегмента, разделенные hello `.` символов.</span><span class="sxs-lookup"><span data-stu-id="45517-234">A JWT contains three segments, separated by hello `.` character.</span></span> <span data-ttu-id="45517-235">Первый сегмент Hello — hello *заголовок*, hello, второй — hello *текст*, и hello третий — hello *подпись*.</span><span class="sxs-lookup"><span data-stu-id="45517-235">hello first segment is hello *header*, hello second is hello *body*, and hello third is hello *signature*.</span></span> <span data-ttu-id="45517-236">Сегмент Hello подпись может быть используется toovalidate hello подлинность маркера hello, чтобы доверенным приложения.</span><span class="sxs-lookup"><span data-stu-id="45517-236">hello signature segment can be used toovalidate hello authenticity of hello token so that it can be trusted by your app.</span></span>

<span data-ttu-id="45517-237">Маркеры Azure AD B2C подписываются при помощи стандартных отраслевых алгоритмов асимметричного шифрования, таких как RSA 256.</span><span class="sxs-lookup"><span data-stu-id="45517-237">Azure AD B2C tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="45517-238">Заголовок Hello hello маркера содержит сведения о ключе hello и метод шифрования используется токен hello toosign:</span><span class="sxs-lookup"><span data-stu-id="45517-238">hello header of hello token contains information about hello key and encryption method used toosign hello token:</span></span>

```
{
        "typ": "JWT",
        "alg": "RS256",
        "kid": "GvnPApfWMdLRi8PDmisFn7bprKg"
}
```

<span data-ttu-id="45517-239">Hello `alg` утверждение указывает hello алгоритм, который был toosign используется токен hello.</span><span class="sxs-lookup"><span data-stu-id="45517-239">hello `alg` claim indicates hello algorithm that was used toosign hello token.</span></span> <span data-ttu-id="45517-240">Hello `kid` утверждение указывает hello определенный открытый ключ, который был toosign используется токен hello.</span><span class="sxs-lookup"><span data-stu-id="45517-240">hello `kid` claim indicates hello particular public key that was used toosign hello token.</span></span>

<span data-ttu-id="45517-241">Azure AD может в любой момент времени подписать маркер с использованием любой пары открытого и закрытого ключей из определенного набора пар.</span><span class="sxs-lookup"><span data-stu-id="45517-241">At any given time, Azure AD can sign a token by using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="45517-242">Azure AD периодически поворачивает hello возможный набор ключей, приложение должно быть написано toohandle этих ключ автоматически изменяется.</span><span class="sxs-lookup"><span data-stu-id="45517-242">Azure AD rotates hello possible set of keys periodically, so your app should be written toohandle those key changes automatically.</span></span> <span data-ttu-id="45517-243">Toocheck разумного частоты для обновления toohello открытых ключей, используемых Azure AD выполняется каждые 24 часа.</span><span class="sxs-lookup"><span data-stu-id="45517-243">A reasonable frequency toocheck for updates toohello public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="45517-244">Служба Azure AD B2C имеет конечную точку метаданных OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="45517-244">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="45517-245">Это позволяет приложениям toofetch сведения об Azure AD B2C во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="45517-245">This allows apps toofetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="45517-246">Эти сведения включают конечные точки, содержимое маркеров и ключи подписи маркеров.</span><span class="sxs-lookup"><span data-stu-id="45517-246">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="45517-247">Для каждой политики в каталоге B2C есть собственный документ метаданных JSON.</span><span class="sxs-lookup"><span data-stu-id="45517-247">Your B2C directory contains a JSON metadata document for each policy.</span></span> <span data-ttu-id="45517-248">Например, документ hello метаданных для hello `b2c_1_sign_in` политики в `fabrikamb2c.onmicrosoft.com` находится в:</span><span class="sxs-lookup"><span data-stu-id="45517-248">For example, hello metadata document for hello `b2c_1_sign_in` policy in  `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in
```

<span data-ttu-id="45517-249">`fabrikamb2c.onmicrosoft.com`— каталог hello B2C используется tooauthenticate hello пользователя, и `b2c_1_sign_in` является hello политики используется токен tooacquire hello.</span><span class="sxs-lookup"><span data-stu-id="45517-249">`fabrikamb2c.onmicrosoft.com` is hello B2C directory used tooauthenticate hello user, and `b2c_1_sign_in` is hello policy used tooacquire hello token.</span></span> <span data-ttu-id="45517-250">toodetermine, какая политика была toosign используется маркер (и где toogo toofetch hello метаданных), у вас есть два варианта.</span><span class="sxs-lookup"><span data-stu-id="45517-250">toodetermine which policy was used toosign a token (and where toogo toofetch hello metadata), you have two options.</span></span> <span data-ttu-id="45517-251">Во-первых, имя политики hello включается в hello `acr` утверждения в маркере hello.</span><span class="sxs-lookup"><span data-stu-id="45517-251">First, hello policy name is included in hello `acr` claim in hello token.</span></span> <span data-ttu-id="45517-252">Вы можете проанализировать утверждения из hello текст hello JWT телом base-64 декодирования hello и десериализации hello JSON строка, которая вызывает.</span><span class="sxs-lookup"><span data-stu-id="45517-252">You can parse claims out of hello body of hello JWT by base-64 decoding hello body and deserializing hello JSON string that results.</span></span> <span data-ttu-id="45517-253">Hello `acr` утверждения будет имя hello hello политики, используемые tooissue hello маркер.</span><span class="sxs-lookup"><span data-stu-id="45517-253">hello `acr` claim will be hello name of hello policy that was used tooissue hello token.</span></span>  <span data-ttu-id="45517-254">Другой вариант — tooencode политики hello в значение hello hello `state` параметра при выдать запрос hello и расшифровать его toodetermine использовался какую политику.</span><span class="sxs-lookup"><span data-stu-id="45517-254">Your other option is tooencode hello policy in hello value of hello `state` parameter when you issue hello request, and then decode it toodetermine which policy was used.</span></span> <span data-ttu-id="45517-255">Каждый из этих методов является допустимым.</span><span class="sxs-lookup"><span data-stu-id="45517-255">Either method is valid.</span></span>

<span data-ttu-id="45517-256">документ метаданных Hello является объект JSON, который содержит несколько важных сведений.</span><span class="sxs-lookup"><span data-stu-id="45517-256">hello metadata document is a JSON object that contains several useful pieces of information.</span></span> <span data-ttu-id="45517-257">К ним относятся hello расположение необходимые tooperform hello конечные точки проверки подлинности OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="45517-257">These include hello location of hello endpoints required tooperform OpenID Connect authentication.</span></span> <span data-ttu-id="45517-258">Они также включают `jwks_uri`, что дает hello расположение hello набор открытых ключей, используемых toosign маркеры.</span><span class="sxs-lookup"><span data-stu-id="45517-258">They also include `jwks_uri`, which gives hello location of hello set of public keys that are used toosign tokens.</span></span> <span data-ttu-id="45517-259">Это расположение представлена ниже, но это лучшее расположение hello toofetch динамически с помощью документа метаданных hello и анализируя `jwks_uri`:</span><span class="sxs-lookup"><span data-stu-id="45517-259">That location is provided here, but it is best toofetch hello location dynamically by using hello metadata document and parsing out `jwks_uri`:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in
```

<span data-ttu-id="45517-260">документ JSON Hello, расположенной на этот URL-адрес содержит все hello сведения об открытом ключе используются в определенный момент.</span><span class="sxs-lookup"><span data-stu-id="45517-260">hello JSON document located at this URL contains all hello public key information in use at a particular moment.</span></span> <span data-ttu-id="45517-261">Приложение может использовать hello `kid` утверждения в hello JWT заголовок tooselect hello открытый ключ в документе JSON hello, используемые toosign данная лексема.</span><span class="sxs-lookup"><span data-stu-id="45517-261">Your app can use hello `kid` claim in hello JWT header tooselect hello public key in hello JSON document that is used toosign a particular token.</span></span> <span data-ttu-id="45517-262">Затем он может выполнять проверку подписи с помощью hello правильный открытый ключ и алгоритм указанного hello.</span><span class="sxs-lookup"><span data-stu-id="45517-262">It can then perform signature validation by using hello correct public key and hello indicated algorithm.</span></span>

<span data-ttu-id="45517-263">Описание того, как проверка подписи tooperform вне hello рамки данного документа.</span><span class="sxs-lookup"><span data-stu-id="45517-263">A description of how tooperform signature validation is outside hello scope of this document.</span></span> <span data-ttu-id="45517-264">Многие библиотеки с открытым исходным кодом, доступных toohelp с его, если вам необходимо.</span><span class="sxs-lookup"><span data-stu-id="45517-264">Many open source libraries are available toohelp you with this if you need it.</span></span>

### <a name="validate-hello-claims"></a><span data-ttu-id="45517-265">Проверки утверждений hello</span><span class="sxs-lookup"><span data-stu-id="45517-265">Validate hello claims</span></span>
<span data-ttu-id="45517-266">Когда приложение или API получает маркер идентификатора, его необходимо выполнить несколько проверок для hello утверждения в маркер идентификатора hello.</span><span class="sxs-lookup"><span data-stu-id="45517-266">When your app or API receives an ID token, it should also perform several checks against hello claims in hello ID token.</span></span> <span data-ttu-id="45517-267">Помимо прочего, к этим утверждениям относятся:</span><span class="sxs-lookup"><span data-stu-id="45517-267">These include, but are not limited to:</span></span>

* <span data-ttu-id="45517-268">Hello **аудитории** утверждения: Это подтверждает этот маркер идентификатор hello предполагаемого toobe заданному tooyour приложения.</span><span class="sxs-lookup"><span data-stu-id="45517-268">hello **audience** claim: This verifies that hello ID token was intended toobe given tooyour app.</span></span>
* <span data-ttu-id="45517-269">Hello **вступления в силу** и **время истечения срока действия** утверждения: они убедитесь, что этот токен идентификатор hello не истек.</span><span class="sxs-lookup"><span data-stu-id="45517-269">hello **not before** and **expiration time** claims: These verify that hello ID token has not expired.</span></span>
* <span data-ttu-id="45517-270">Hello **издателя** утверждения: это проверяет этот маркер hello был выдан tooyour приложения Azure AD.</span><span class="sxs-lookup"><span data-stu-id="45517-270">hello **issuer** claim: This verifies that hello token was issued tooyour app by Azure AD.</span></span>
* <span data-ttu-id="45517-271">Hello **nonce**: это стратегия предотвращения атак воспроизведения токена.</span><span class="sxs-lookup"><span data-stu-id="45517-271">hello **nonce**: This is a strategy for token replay attack mitigation.</span></span>

<span data-ttu-id="45517-272">Полный список проверки должно выполнять приложение, см. в разделе toohello [спецификация OpenID Connect](https://openid.net).</span><span class="sxs-lookup"><span data-stu-id="45517-272">For a full list of validations your app should perform, refer toohello [OpenID Connect specification](https://openid.net).</span></span> <span data-ttu-id="45517-273">Подробные сведения о hello ожидаемые значения для этих утверждений включаются в предыдущем hello [маркера раздела](#types-of-tokens).</span><span class="sxs-lookup"><span data-stu-id="45517-273">Details of hello expected values for these claims are included in hello preceding [token section](#types-of-tokens).</span></span>  

## <a name="token-lifetimes"></a><span data-ttu-id="45517-274">Время существования маркеров</span><span class="sxs-lookup"><span data-stu-id="45517-274">Token lifetimes</span></span>
<span data-ttu-id="45517-275">Hello после времени жизни токенов, предоставленных toofurther вашего ведома.</span><span class="sxs-lookup"><span data-stu-id="45517-275">hello following token lifetimes are provided toofurther your knowledge.</span></span> <span data-ttu-id="45517-276">Они могут пригодиться при разработке и отладке приложений.</span><span class="sxs-lookup"><span data-stu-id="45517-276">They can help you when you develop and debug apps.</span></span> <span data-ttu-id="45517-277">Обратите внимание, что ваши приложения не должно быть записаны tooexpect любой из этих константа tooremain время жизни.</span><span class="sxs-lookup"><span data-stu-id="45517-277">Note that your apps should not be written tooexpect any of these lifetimes tooremain constant.</span></span> <span data-ttu-id="45517-278">Они могут и будут изменяться.</span><span class="sxs-lookup"><span data-stu-id="45517-278">They can and will change.</span></span> <span data-ttu-id="45517-279">Дополнительные сведения о hello [настройки времени жизни токенов](active-directory-b2c-token-session-sso.md) в Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="45517-279">Read more about hello [customization of token lifetimes](active-directory-b2c-token-session-sso.md) in Azure AD B2C.</span></span>

| <span data-ttu-id="45517-280">Маркер</span><span class="sxs-lookup"><span data-stu-id="45517-280">Token</span></span> | <span data-ttu-id="45517-281">Срок действия</span><span class="sxs-lookup"><span data-stu-id="45517-281">Lifetime</span></span> | <span data-ttu-id="45517-282">Описание</span><span class="sxs-lookup"><span data-stu-id="45517-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="45517-283">Маркеры идентификации</span><span class="sxs-lookup"><span data-stu-id="45517-283">ID tokens</span></span> |<span data-ttu-id="45517-284">Один час</span><span class="sxs-lookup"><span data-stu-id="45517-284">One hour</span></span> |<span data-ttu-id="45517-285">Маркеры идентификации обычно действительны в течение часа.</span><span class="sxs-lookup"><span data-stu-id="45517-285">ID tokens are typically valid for an hour.</span></span> <span data-ttu-id="45517-286">Веб-приложения можно использовать это время существования toomaintain свои собственные сеансы с пользователями (рекомендуется).</span><span class="sxs-lookup"><span data-stu-id="45517-286">Your web app can use this lifetime toomaintain its own sessions with users (recommended).</span></span> <span data-ttu-id="45517-287">Кроме того, вы можете выбрать другой срок существования сеанса.</span><span class="sxs-lookup"><span data-stu-id="45517-287">You can also choose a different session lifetime.</span></span> <span data-ttu-id="45517-288">Если ваше приложение должно tooget новый маркер идентификатора, достаточно toomake новый tooAzure запрос входа в AD.</span><span class="sxs-lookup"><span data-stu-id="45517-288">If your app needs tooget a new ID token, it simply needs toomake a new sign-in request tooAzure AD.</span></span> <span data-ttu-id="45517-289">Если у пользователя есть сеанс браузера, допустимые в Azure AD, этот пользователь может оказаться tooenter необходимые учетные данные снова.</span><span class="sxs-lookup"><span data-stu-id="45517-289">If a user has a valid browser session with Azure AD, that user might not be required tooenter credentials again.</span></span> |
| <span data-ttu-id="45517-290">Маркеры обновления</span><span class="sxs-lookup"><span data-stu-id="45517-290">Refresh tokens</span></span> |<span data-ttu-id="45517-291">Копирование too14 дней</span><span class="sxs-lookup"><span data-stu-id="45517-291">Up too14 days</span></span> |<span data-ttu-id="45517-292">Один маркер обновления действителен до 14 дней.</span><span class="sxs-lookup"><span data-stu-id="45517-292">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="45517-293">Тем не менее маркер обновления может стать недопустимым в любое время и по различным причинам.</span><span class="sxs-lookup"><span data-stu-id="45517-293">However, a refresh token can become invalid at any time for a number of reasons.</span></span> <span data-ttu-id="45517-294">Приложения должны продолжать tootry toouse токен обновления до hello запрос завершается ошибкой, или приложение заменяет новый токен обновления hello.</span><span class="sxs-lookup"><span data-stu-id="45517-294">Your app should continue tootry toouse a refresh token until hello request fails, or until your app replaces hello refresh token with a new one.</span></span> <span data-ttu-id="45517-295">Токен обновления также могут стать недопустимыми в том случае, если были пройдены 90 дней с момента пользователя hello последнего ввод учетных данных.</span><span class="sxs-lookup"><span data-stu-id="45517-295">A refresh token can also become invalid if 90 days have passed since hello user last entered credentials.</span></span> |
| <span data-ttu-id="45517-296">Коды авторизации</span><span class="sxs-lookup"><span data-stu-id="45517-296">Authorization codes</span></span> |<span data-ttu-id="45517-297">5 минут</span><span class="sxs-lookup"><span data-stu-id="45517-297">Five minutes</span></span> |<span data-ttu-id="45517-298">Коды авторизации специально обладают коротким сроком действия.</span><span class="sxs-lookup"><span data-stu-id="45517-298">Authorization codes are intentionally short-lived.</span></span> <span data-ttu-id="45517-299">После получения их следует незамедлительно обменять на маркеры доступа, маркеры идентификации или маркеры обновления.</span><span class="sxs-lookup"><span data-stu-id="45517-299">They should be redeemed immediately for access tokens, ID tokens, or refresh tokens when they are received.</span></span> |

