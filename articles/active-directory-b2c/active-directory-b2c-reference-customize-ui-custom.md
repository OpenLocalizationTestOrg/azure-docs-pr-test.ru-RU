---
title: "Azure Active Directory B2C: Ссылки: Настройка hello пользовательского интерфейса его пути пользователя с помощью пользовательских политик | Документы Microsoft"
description: "В этой статье описываются пользовательские политики Azure Active Directory B2C"
services: active-directory-b2c
documentationcenter: 
author: rojasja
manager: krassk
editor: rojasja
ms.assetid: 
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 04/25/2017
ms.author: joroja
ms.openlocfilehash: 11f2a7575b95a186399d83266850fe44d650371b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="customize-hello-ui-of-a-user-journey-with-custom-policies"></a>Настройка пользовательского интерфейса его пути пользователя с помощью пользовательских политик hello

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

> [!NOTE]
> Эта статья является Дополнительно описание как Настройка пользовательского интерфейса работает и как tooenable с B2C пользовательских политик, с помощью hello Identity Framework качества


Удобная работа пользователя является ключевым фактором для любого корпоративного решения, предоставляемого потребителям. Простое взаимодействие с пользователем мы означает качества на устройстве или в браузере, где пути пользователя до нашей службе невозможно отличить от, hello обслуживания клиентов, которые они используют.

## <a name="understand-hello-cors-way-for-ui-customization"></a>Понять, как hello CORS для настройки пользовательского интерфейса

Azure AD B2C позволяет вам toocustomize hello оформление и поведение взаимодействие с пользователем (UX) hello различных страниц, которые потенциально обслуживаться и отображаются с помощью пользовательских политик по Azure AD B2C.

Для этой цели Azure AD B2C выполняется код в браузере вашей потребителя и использует hello современных и стандартный подход [общий доступ к ресурсам независимо от источника (CORS)](http://www.w3.org/TR/cors/) tooload пользовательское содержимое из определенному URL-АДРЕСУ, указанному в настраиваемую политику шаблоны HTML5/CSS tooyour toopoint. CORS является механизм, позволяющий ограниченные ресурсы как шрифты, на веб-странице toobe, запрошено, из другого домена за пределами домена hello, из которой был сформирован hello ресурсов.

По сравнению с toohello старого традиционному подходу, где страницы шаблонов принадлежат hello решение, где указано только текст и изображения, где ограниченное управления макет и вид предлагалось начальные toomore чем tooachieve трудностей эффективной работы, hello CORS средство поддерживает HTML5 и CSS и позволяют:

- Разместить содержимое hello и hello решение внедряет ее элементов управления, используя клиентский сценарий.
- Полный контроль над каждым пикселем и внешним видом макета.

Вы можете предоставить любое количество страниц содержимого, составляя файлы HTML5 и CSS соответствующим образом.

> [!NOTE]
> По соображениям безопасности hello использование JavaScript в данный момент заблокирована для настройки. требуется toounblock JavaScript, использование имени пользовательского домена для вашего клиента Azure AD B2C.

В каждом из ваших шаблонов HTML5/CSS, предоставляют *привязки* элемент, который соответствует toohello необходимые `<div id=”api”>` элемент hello HTML или hello странице содержимого как показано далее. Для Azure AD B2C необходимо, чтобы все страницы содержимого имели этот div.

```
<!DOCTYPE html>
<html>
  <head>
    <title>Your page content’s tile!</title>
  </head>
  <body>
    <div id="api"></div>
  </body>
</html>
```

Azure AD B2C содержимое для страницы приветствия будут вноситься в этот разделитель при hello остальной части страницы приветствия принадлежит вам toocontrol. код JavaScript Hello Azure AD B2C извлекает в содержимом и внедряет нашей HTML в этот элемент div определенных. Azure AD B2C внедряет следующие элементы управления соответствующим образом hello: Выбор элемента управления, элементов управления входом, элементы управления (в настоящее время телефону) многофакторной и элементами управления коллекцией атрибутов учетной записи. Azure AD B2C гарантирует, что все элементы управления hello HTML5 совместимых и доступен, все элементы управления hello может быть полностью со стилем и что версия элемента управления не будет регрессировать.

Hello объединенное содержимое в конечном итоге отображаются в виде потребитель tooyour hello динамического документа.

tooensure из hello выше работает должным образом, необходимо:

- Убедитесь, что содержимое HTML5 соответствует и доступно.
- Убедитесь, что на сервере содержимого включен механизм CORS.
- Передавайте содержимое по протоколу HTTPS.
- Используйте абсолютные URL-адреса для всех ссылок и содержимого CSS, например https://yourdomain/content.

> [!TIP]
> tooverify, hello в размещается контент сайта имеет включен CORS и запросов CORS тестов, можно использовать узел http://test-cors.org/ hello. Спасибо toothis сайта, можно просто отправить hello CORS запрос tooa к удаленному серверу (если поддерживается CORS tootest), или отправить hello CORS запроса tooa тестового сервера (tooexplore некоторых функций CORS).

> [!TIP]
> Hello сайта http://enable-cors.org/ также составляет более полезные ресурсы для CORS.

Благодаря использованию toothis подход на основе CORS hello конечным пользователям будет иметь одинаковое отображение между приложением и обслуживается Azure AD B2C страницы приветствия.

## <a name="create-a-storage-account"></a>Создайте учетную запись хранения.

Перед началом необходимо toocreate учетной записи хранилища. Вам потребуется подписка Azure toocreate учетную запись хранилища больших двоичных объектов. Можно зарегистрировать бесплатную пробную версию на hello [веб-сайте Azure](https://azure.microsoft.com/en-us/pricing/free-trial/).

1. Откройте сеанс браузера и перейдите toohello [портал Azure](https://portal.azure.com).
2. Выполните вход с использованием учетных данных администратора.
3. Последовательно выберите пункты **+Создать** > **Данные+хранилище** > **Учетная запись хранения**.  Откроется колонка **Создание учетной записи хранения**.
4. В **имя**, например, введите имя для учетной записи хранения hello, *contoso369b2c*. Это значение будет позже называться слишком*storageAccountName*.
5. Выберите hello соответствующие значения для hello Ценовая категория, группа ресурсов hello и hello подписки. Убедитесь, что имеется hello **tooStartboard ПИН-код** установлен. Щелкните **Создать**.
6. Вернитесь toohello начальной панели и выберите учетную запись хранения hello только что созданный.
7. В hello **службы** щелкните **большие двоичные объекты**. Откроется колонка **Служба BLOB-объектов**.
8. Щелкните **+ Container** (+ Контейнер).
9. В **имя**, например, введите имя для контейнера hello *b2c*. Это значение будет позже ссылка tooas *containerName*.
9. Выберите **большого двоичного объекта** как hello **тип доступа**. Щелкните **Создать**.
10. Hello контейнер, который вы создали будет отображаться в списке hello на hello **колонке службы BLOB-объекта**.
11. Закрыть hello **большие двоичные объекты** колонку.
12. На hello **колонке учетной записи хранилища**, нажмите кнопку hello **ключ** значок. Откроется колонка **Ключи доступа**.  
13. Запишите значение hello **key1**. Это значение будет позже называться *key1*.

## <a name="downloading-hello-helper-tool"></a>Вспомогательное средство по загрузке hello

1.  Загрузите средство поддержки hello из [GitHub](https://github.com/azureadquickstarts/b2c-azureblobstorage-client/archive/master.zip).
2.  Сохранить hello *B2C AzureBlobStorage-клиент master.zip* файл на локальном компьютере.
3.  Извлечение содержимого hello hello B2C AzureBlobStorage-клиент master.zip файла на локальном диске, например в разделе hello **пакета поддержки интерфейса настройки** папки. В ней появится папка *B2C-AzureBlobStorage-Client-master*.
4.  Откройте эту папку и извлеките содержимое файла архива hello hello *B2CAzureStorageClient.zip* внутри него.

## <a name="upload-hello-ui-customization-pack-sample-files"></a>Отправка файлов образца hello настройки пакета поддержки интерфейса

1.  С помощью проводника Windows перейдите в папку toohello *B2C AzureBlobStorage-клиент главными* в компоненте hello *пакета поддержки интерфейса настройки* папки, созданной в предыдущем разделе hello.
2.  Запустите hello *B2CAzureStorageClient.exe* файла. Эта программа будет просто отправьте все файлы hello в каталоге hello, укажите учетную запись хранения tooyour и включить CORS доступ для этих файлов.
3.  При появлении запроса укажите:  имя вашей учетной записи хранения Hello *storageAccountName*, например *contoso369b2c*.
    b.  Hello первичный ключ доступа хранилища BLOB-объектов azure, *key1*, например *contoso369b2c*.
    c.  Имя контейнера хранилища BLOB-объекта хранилища, Hello *containerName*, например *b2c*.
    d.  путь Hello hello *пакет начального* образцы файлов, например *... \B2CTemplates\wingtiptoys*.

HTML5 и CSS-файлы из hello Здравствуйте, если вы следовали приведенным выше шагам hello, *пакета поддержки интерфейса настройки* для вымышленной компании hello **wingtiptoys** будет указывать tooyour учетной записи хранилища.  Вы можете проверить, содержимое hello отправлен правильно, открыв колонку связанных контейнеров hello в hello портал Azure. Кроме того, вы можете проверить, содержимое hello отправлен правильно hello страницу в браузере. Дополнительные сведения см. в разделе [Azure Active Directory B2C: функции toodemonstrate hello страницы пользовательского интерфейса (UI) настройки используется вспомогательное средство](active-directory-b2c-reference-ui-customization-helper-tool.md).

## <a name="ensure-hello-storage-account-has-cors-enabled"></a>Убедитесь, что учетная запись хранения hello CORS включен

CORS (доступ к ресурсам независимо от источника) должен быть включен на конечной точке для Azure AD B2C Premium tooload контента. Это так, как содержимое размещается на другом домене не hello домен Azure AD B2C Premium будут содержать страницы приветствия.

tooverify с CORS включен, hello хранилища в размещается контент продолжить hello следующие шаги:

1. Откройте сеанс просмотра и перейдите на страницу toohello *unified.html* hello полный URL-адрес расположения в вашей учетной записи хранилища с помощью `https://<storageAccountName>.blob.core.windows.net/<containerName>/unified.html`. Например, https://contoso369b2c.blob.core.windows.net/b2c/unified.html.
2. Перейдите toohttp://test-cors.org. Этот узел позволяет вам tooverify, hello страницу, которую вы используете был включен CORS.  
<!--
![test-cors.org](../../media/active-directory-b2c-customize-ui-of-a-user-journey/test-cors.png)
-->

3. В **URL-адрес удаленного**, введите полный URL-адрес hello unified.html содержимого и нажмите кнопку **запроса на отправку**.
4. Проверьте выходные данные hello в hello **результатов** раздел содержит *XHR состояния: 200*. Это означает, что CORS включен.
<!--
![CORS enabled](../../media/active-directory-b2c-customize-ui-of-a-user-journey/cors-enabled.png)
-->
Учетная запись хранения Hello теперь должен содержать контейнер больших двоичных объектов с именем *b2c* нашей иллюстрации, содержащий следующую wingtiptoys шаблоны из hello hello *пакет начального*.

<!--
![Correctly configured storage account](../../articles/active-directory-b2c/media/active-directory-b2c-reference-customize-ui-custom/storage-account-final.png)
-->

Hello Следующая таблица содержит описание hello назначения hello выше HTML5 страниц.

| Шаблон HTML5 | Описание |
|----------------|-------------|
| *phonefactor.html* | Эта страница используется как шаблон для страницы Многофакторной идентификации. |
| *ResetPassword.html* | Эту страницу можно использовать в качестве шаблона для страницы восстановления пароля. |
| *selfasserted.html* | Эта страница используется как шаблон для страницы регистрации учетных записей социальных сетей, страницы регистрации локальной учетной записи или страницы входа в локальную учетную запись. |
| *unified.html* | Эта страница используется как шаблон для единой страницы регистрации или входа в систему. |
| *updateprofile.html* | Эта страница используется как шаблон для страницы обновления профиля. |

## <a name="add-a-link-tooyour-html5css-templates-tooyour-user-journey"></a>Добавить ссылку tooyour HTML5/CSS шаблоны tooyour пользователя поездки.

Путешествия ссылку Шаблоны HTML5/CSS tooyour tooyour пользователя можно добавить путем непосредственного изменения настраиваемой политики.

пользовательские toouse шаблоны HTML5/CSS Hello в поездке пользователя имеют toobe, указанные в списке содержимого определений, которые можно использовать в пути этих пользователей. Для этой цели необязательный  *<ContentDefinitions>*  XML должен быть объявлен в hello  *<BuildingBlocks>*  вашей настраиваемой политики XML-файла.

Hello следующей таблице описаны hello набор идентификаторов определение содержимого, распознаваемые engine качества hello Azure AD B2C удостоверение и типом hello страниц, связанным toothem.

| Идентификатор определения содержимого | Описание |
|-----------------------|-------------|
| *api.error* | **Страница ошибки.** Эта страница отображается при обнаружении исключения или ошибки. |
| *api.idpselections* | **Страница выбора поставщика удостоверений.** Эта страница содержит список идентификаторов, можно выбрать поставщиков, которые hello пользователя при входе в систему. Это поставщики удостоверений организаций, социальных сетей, например Facebook и Google+, или локальных учетных записей (адрес электронной почты или имя пользователя). |
| *api.idpselections.signup* | **Выбор поставщика удостоверений для регистрации.** Эта страница содержит список идентификаторов, которые можно выбрать поставщиков, которые hello пользователя во время регистрации. Это поставщики удостоверений организаций, социальных сетей, например Facebook и Google+, или локальных учетных записей (адрес электронной почты или имя пользователя). |
| *api.localaccountpasswordreset* | **Страница восстановления пароля.** Эта страница содержит форму пользователь hello не tooinitiate toofill сбросить свой пароль.  |
| *api.localaccountsignin* | **Страница входа в локальную учетную запись.** Эта страница содержит форму входа этого пользователя hello имеет toofill в при входе с использованием локальной учетной записи, которая основана на адрес электронной почты или имя пользователя. Hello форма может содержать поля ввода текста и окне ввода пароля. |
| *api.localaccountsignup* | **Страница регистрации локальной учетной записи.** Эта страница содержит форму регистрации пользователя hello имеет toofill в при регистрации для локальной учетной записи, которая основана на адрес электронной почты или имя пользователя. Hello форма может содержать различные элементы управления для ввода как поле ввода текста, окне ввода пароля, переключатель, раскрывающихся списков выберите один и выбрать несколько флажков. |
| *api.phonefactor* | **Страница Многофакторной идентификации.** Эта страница позволяет пользователю подтвердить свой номер телефона (с помощью SMS-сообщения или голосового звонка) во время регистрации или входа. |
| *api.selfasserted* | **Страница регистрации учетной записи социальных сетей.** Эта страница содержит форму регистрации пользователь hello не toofill в при регистрации с помощью существующей учетной записи от поставщика удостоверений из социальных сетей, например Facebook или Google +. Данная страница является аналогичные toohello выше страницы регистрации социальных учетной записи с исключением hello hello полей ввода пароля. |
| *api.selfasserted.profileupdate* | **Страница обновления профиля.** Эта страница содержит форму hello пользователя можно использовать tooupdate свой профиль. Данная страница является аналогичные toohello выше страницы регистрации социальных учетной записи с исключением hello hello полей ввода пароля. |
| *api.signuporsignin* | **Единая страница регистрации или входа.**  На этой странице обрабатывается регистрация и вход пользователей, которые могут использовать поставщики удостоверений организаций, поставщики удостоверений социальных сетей, такие как Facebook или Google+, или локальные учетные записи.

## <a name="next-steps"></a>Дальнейшие действия
[Ссылка: Понять, каким образом пользовательские политики работают с hello Identity Framework взаимодействие в B2C](active-directory-b2c-reference-custom-policies-understanding-contents.md)
