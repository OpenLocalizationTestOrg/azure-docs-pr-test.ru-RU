---
title: "Azure AD B2C: поток кода авторизации | Документация Майкрософт"
description: "Узнайте, как toobuild веб-приложений с помощью протокола проверки подлинности Azure AD B2C и OpenID Connect."
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: c371aaab-813a-4317-97df-b62e2f53d865
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: 6bf9d37310bd45b39bda346441413556f9fd4fdc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-b2c-oauth-20-authorization-code-flow"></a><span data-ttu-id="69679-103">Azure Active Directory B2C: поток кода авторизации OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="69679-103">Azure Active Directory B2C: OAuth 2.0 authorization code flow</span></span>
<span data-ttu-id="69679-104">Можно использовать предоставления кода авторизации OAuth 2.0 hello в приложения, установленные на устройстве toogain доступа tooprotected ресурсы, такие как веб-API.</span><span class="sxs-lookup"><span data-stu-id="69679-104">You can use hello OAuth 2.0 authorization code grant in apps installed on a device toogain access tooprotected resources, such as web APIs.</span></span> <span data-ttu-id="69679-105">С помощью hello Azure Active Directory B2C (Azure AD B2C) реализацию OAuth 2.0, можно добавить регистрации, вход и управление других идентификаторов задач tooyour мобильных и настольных приложений.</span><span class="sxs-lookup"><span data-stu-id="69679-105">By using hello Azure Active Directory B2C (Azure AD B2C) implementation of OAuth 2.0, you can add sign-up, sign-in, and other identity management tasks tooyour mobile and desktop apps.</span></span> <span data-ttu-id="69679-106">Эта статья не зависит от языка.</span><span class="sxs-lookup"><span data-stu-id="69679-106">This article is language-independent.</span></span> <span data-ttu-id="69679-107">В статье hello описывается как toosend и получать сообщения HTTP без использования все библиотеки с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="69679-107">In hello article, we describe how toosend and receive HTTP messages without using any open-source libraries.</span></span>

<!-- TODO: Need link toolibraries -->

<span data-ttu-id="69679-108">Описывается Hello потока кода авторизации OAuth 2.0 в [раздел 4.1 спецификации OAuth 2.0 hello](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="69679-108">hello OAuth 2.0 authorization code flow is described in [section 4.1 of hello OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="69679-109">Его можно использовать для проверки подлинности и авторизации в большинстве типов приложений, включая [веб-приложения](active-directory-b2c-apps.md#web-apps) и [изначально установленные приложения](active-directory-b2c-apps.md#mobile-and-native-apps).</span><span class="sxs-lookup"><span data-stu-id="69679-109">You can use it for authentication and authorization in most app types, including [web apps](active-directory-b2c-apps.md#web-apps) and [natively installed apps](active-directory-b2c-apps.md#mobile-and-native-apps).</span></span> <span data-ttu-id="69679-110">Можно использовать hello получить toosecurely потока кода авторизации OAuth 2.0 *маркеры доступа* для приложений, которые могут быть используется tooaccess ресурсы, которые защищены с помощью [сервер авторизации](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="69679-110">You can use hello OAuth 2.0 authorization code flow toosecurely acquire *access tokens* for your apps, which can be used tooaccess resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span>

<span data-ttu-id="69679-111">Эта статья посвящена hello **открытый клиентов** потока кода авторизации OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="69679-111">This article focuses on hello **public clients** OAuth 2.0 authorization code flow.</span></span> <span data-ttu-id="69679-112">Открытый клиент — это любое клиентское приложение, которое не может быть доверенным toosecurely целостность hello секретного пароля.</span><span class="sxs-lookup"><span data-stu-id="69679-112">A public client is any client application that cannot be trusted toosecurely maintain hello integrity of a secret password.</span></span> <span data-ttu-id="69679-113">Сюда входят мобильных приложений, классических приложениях и сущности, любое приложение, выполняется на устройстве, которому требуется tooget маркеры доступа.</span><span class="sxs-lookup"><span data-stu-id="69679-113">This includes mobile apps, desktop apps, and essentially any application that runs on a device and needs tooget access tokens.</span></span> 

> [!NOTE]
> <span data-ttu-id="69679-114">tooadd identity management tooa веб-приложения с помощью Azure AD B2C используйте [OpenID Connect](active-directory-b2c-reference-oidc.md) вместо OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="69679-114">tooadd identity management tooa web app by using Azure AD B2C, use [OpenID Connect](active-directory-b2c-reference-oidc.md) instead of OAuth 2.0.</span></span>

<span data-ttu-id="69679-115">Azure AD B2C расширяет стандарт hello потоков OAuth 2.0 toodo больше, чем простой проверки подлинности и авторизации.</span><span class="sxs-lookup"><span data-stu-id="69679-115">Azure AD B2C extends hello standard OAuth 2.0 flows toodo more than simple authentication and authorization.</span></span> <span data-ttu-id="69679-116">Он представляет hello [параметра политики](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="69679-116">It introduces hello [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="69679-117">С помощью встроенных политик можно использовать tooadd взаимодействие с пользователем; tooyour приложения, такие как OAuth 2.0 регистрации, вход и управление профилями пользователей.</span><span class="sxs-lookup"><span data-stu-id="69679-117">With built-in policies, you can use OAuth 2.0 tooadd user experiences tooyour app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="69679-118">В этой статье мы покажем, как toouse OAuth 2.0 и политики tooimplement, каждый из них возникает в машинном коде приложения.</span><span class="sxs-lookup"><span data-stu-id="69679-118">In this article, we show you how toouse OAuth 2.0 and policies tooimplement each of these experiences in your native applications.</span></span> <span data-ttu-id="69679-119">Мы также показано, как tooget токены доступа для доступа к веб-API.</span><span class="sxs-lookup"><span data-stu-id="69679-119">We also show you how tooget access tokens for accessing web APIs.</span></span>

<span data-ttu-id="69679-120">В запросах HTTP пример hello в этой статье, мы используем наш каталог Azure AD B2C образцов, **fabrikamb2c.onmicrosoft.com**. а также наши примеры приложения и политик.</span><span class="sxs-lookup"><span data-stu-id="69679-120">In hello example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**. We also use our sample application and policies.</span></span> <span data-ttu-id="69679-121">Попробуйте hello запросы вручную с помощью этих значений или их можно заменить собственные значения.</span><span class="sxs-lookup"><span data-stu-id="69679-121">You can try hello requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="69679-122">Узнайте, каким образом слишком[собственного каталога Azure AD B2C, приложения и политики](#use-your-own-azure-ad-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="69679-122">Learn how too[get your own Azure AD B2C directory, application, and policies](#use-your-own-azure-ad-b2c-directory).</span></span>

## <a name="1-get-an-authorization-code"></a><span data-ttu-id="69679-123">1. Получение кода авторизации</span><span class="sxs-lookup"><span data-stu-id="69679-123">1. Get an authorization code</span></span>
<span data-ttu-id="69679-124">поток authorization code Hello начинается с клиента hello направления hello пользователя toohello `/authorize` конечной точки.</span><span class="sxs-lookup"><span data-stu-id="69679-124">hello authorization code flow begins with hello client directing hello user toohello `/authorize` endpoint.</span></span> <span data-ttu-id="69679-125">Это hello интерактивную часть потока hello, где hello пользователь предпринимает действия.</span><span class="sxs-lookup"><span data-stu-id="69679-125">This is hello interactive part of hello flow, where hello user takes action.</span></span> <span data-ttu-id="69679-126">В этом запросе hello клиент указывает в hello `scope` параметр hello разрешения, необходимость tooacquire от пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="69679-126">In this request, hello client indicates in hello `scope` parameter hello permissions that it needs tooacquire from hello user.</span></span> <span data-ttu-id="69679-127">В hello `p` параметра, он указывает tooexecute политики hello.</span><span class="sxs-lookup"><span data-stu-id="69679-127">In hello `p` parameter, it indicates hello policy tooexecute.</span></span> <span data-ttu-id="69679-128">Hello следующих трех примерах (с разбиением на строки для удобства чтения) каждого с помощью другой политики.</span><span class="sxs-lookup"><span data-stu-id="69679-128">hello following three examples (with line breaks for readability) each use a different policy.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="69679-129">Пример с политикой входа в систему</span><span class="sxs-lookup"><span data-stu-id="69679-129">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="69679-130">Пример с политикой регистрации</span><span class="sxs-lookup"><span data-stu-id="69679-130">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="69679-131">Пример с политикой изменения профиля</span><span class="sxs-lookup"><span data-stu-id="69679-131">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_edit_profile
```

| <span data-ttu-id="69679-132">Параметр</span><span class="sxs-lookup"><span data-stu-id="69679-132">Parameter</span></span> | <span data-ttu-id="69679-133">Обязательный?</span><span class="sxs-lookup"><span data-stu-id="69679-133">Required?</span></span> | <span data-ttu-id="69679-134">Описание</span><span class="sxs-lookup"><span data-stu-id="69679-134">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="69679-135">client_id</span><span class="sxs-lookup"><span data-stu-id="69679-135">client_id</span></span> |<span data-ttu-id="69679-136">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-136">Required</span></span> |<span data-ttu-id="69679-137">Идентификатор приложения Hello назначен tooyour приложения hello [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="69679-137">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="69679-138">response_type</span><span class="sxs-lookup"><span data-stu-id="69679-138">response_type</span></span> |<span data-ttu-id="69679-139">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-139">Required</span></span> |<span data-ttu-id="69679-140">Тип ответа Hello, который должен включать `code` для потока кода авторизации hello.</span><span class="sxs-lookup"><span data-stu-id="69679-140">hello response type, which must include `code` for hello authorization code flow.</span></span> |
| <span data-ttu-id="69679-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="69679-141">redirect_uri</span></span> |<span data-ttu-id="69679-142">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-142">Required</span></span> |<span data-ttu-id="69679-143">URI приложения, где запросы проверки подлинности отправляемых и получаемых приложением перенаправления Hello.</span><span class="sxs-lookup"><span data-stu-id="69679-143">hello redirect URI of your app, where authentication responses are sent and received by your app.</span></span> <span data-ttu-id="69679-144">Его должен точно соответствовать одно перенаправление hello URI, которые зарегистрированы в портале hello, за исключением того, он должен быть в кодировке URL.</span><span class="sxs-lookup"><span data-stu-id="69679-144">It must exactly match one of hello redirect URIs that you registered in hello portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="69679-145">scope</span><span class="sxs-lookup"><span data-stu-id="69679-145">scope</span></span> |<span data-ttu-id="69679-146">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-146">Required</span></span> |<span data-ttu-id="69679-147">Список областей с разделителями-пробелами.</span><span class="sxs-lookup"><span data-stu-id="69679-147">A space-separated list of scopes.</span></span> <span data-ttu-id="69679-148">Значение одной области указывает tooAzure Active Directory (Azure AD) обоих hello разрешений, которые запрашиваются.</span><span class="sxs-lookup"><span data-stu-id="69679-148">A single scope value indicates tooAzure Active Directory (Azure AD) both of hello permissions that are being requested.</span></span> <span data-ttu-id="69679-149">С помощью клиента hello идентификатор как область hello указывает, что приложение должно маркер доступа, который можно использовать для собственных служб или веб-API, представленный hello же идентификатор клиента.</span><span class="sxs-lookup"><span data-stu-id="69679-149">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="69679-150">Hello `offline_access` области показывает, что приложение требует токен обновления для tooresources долгоживущие доступа.</span><span class="sxs-lookup"><span data-stu-id="69679-150">hello `offline_access` scope indicates that your app needs a refresh token for long-lived access tooresources.</span></span> <span data-ttu-id="69679-151">Также можно использовать hello `openid` toorequest область маркер идентификатора из Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="69679-151">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="69679-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="69679-152">response_mode</span></span> |<span data-ttu-id="69679-153">Рекомендуется</span><span class="sxs-lookup"><span data-stu-id="69679-153">Recommended</span></span> |<span data-ttu-id="69679-154">метод Hello использовать назад tooyour toosend hello полученный авторизации кода приложения.</span><span class="sxs-lookup"><span data-stu-id="69679-154">hello method that you use toosend hello resulting authorization code back tooyour app.</span></span> <span data-ttu-id="69679-155">Он может иметь значение `query`, `form_post` или `fragment`.</span><span class="sxs-lookup"><span data-stu-id="69679-155">It can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="69679-156">state</span><span class="sxs-lookup"><span data-stu-id="69679-156">state</span></span> |<span data-ttu-id="69679-157">Рекомендуется</span><span class="sxs-lookup"><span data-stu-id="69679-157">Recommended</span></span> |<span data-ttu-id="69679-158">Значение, включенных в запрос hello, возвращаемых в ответ на токен hello.</span><span class="sxs-lookup"><span data-stu-id="69679-158">A value included in hello request that is returned in hello token response.</span></span> <span data-ttu-id="69679-159">Он может быть строка любое содержимое, которое следует toouse.</span><span class="sxs-lookup"><span data-stu-id="69679-159">It can be a string of any content that you want toouse.</span></span> <span data-ttu-id="69679-160">Как правило, используется случайный уникальное значение, tooprevent атак с подделкой межсайтовых запросов.</span><span class="sxs-lookup"><span data-stu-id="69679-160">Usually, a randomly generated unique value is  used, tooprevent cross-site request forgery attacks.</span></span> <span data-ttu-id="69679-161">состояние Hello также является используется tooencode сведения о состоянии пользователя hello в приложение hello, до возникновения hello запрос проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="69679-161">hello state also is used tooencode information about hello user's state in hello app before hello authentication request occurred.</span></span> <span data-ttu-id="69679-162">Например пользователь hello hello страницы на или hello политики, который выполнялся.</span><span class="sxs-lookup"><span data-stu-id="69679-162">For example, hello page hello user was on, or hello policy that was being executed.</span></span> |
| <span data-ttu-id="69679-163">p</span><span class="sxs-lookup"><span data-stu-id="69679-163">p</span></span> |<span data-ttu-id="69679-164">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-164">Required</span></span> |<span data-ttu-id="69679-165">политика Hello, выполняется.</span><span class="sxs-lookup"><span data-stu-id="69679-165">hello policy that is executed.</span></span> <span data-ttu-id="69679-166">Он является hello имя политики, которая создается в каталоге Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="69679-166">It's hello name of a policy that is created in your Azure AD B2C directory.</span></span> <span data-ttu-id="69679-167">Имя политики Hello значение должна начинаться с **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="69679-167">hello policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="69679-168">в разделе toolearn о политиках, [встроенных политик Azure AD B2C](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="69679-168">toolearn more about policies, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="69679-169">prompt</span><span class="sxs-lookup"><span data-stu-id="69679-169">prompt</span></span> |<span data-ttu-id="69679-170">Необязательно</span><span class="sxs-lookup"><span data-stu-id="69679-170">Optional</span></span> |<span data-ttu-id="69679-171">Тип Hello это требует взаимодействия с пользователем.</span><span class="sxs-lookup"><span data-stu-id="69679-171">hello type of user interaction that is required.</span></span> <span data-ttu-id="69679-172">В настоящее время является единственным допустимым значением hello `login`, который принудительно hello пользователя tooenter свои учетные данные для этого запроса.</span><span class="sxs-lookup"><span data-stu-id="69679-172">Currently, hello only valid value is `login`, which forces hello user tooenter their credentials on that request.</span></span> <span data-ttu-id="69679-173">Единый вход не сработает.</span><span class="sxs-lookup"><span data-stu-id="69679-173">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="69679-174">На этом этапе hello пользователя запрашивается toocomplete hello политики рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="69679-174">At this point, hello user is asked toocomplete hello policy's workflow.</span></span> <span data-ttu-id="69679-175">Это может вызвать hello пользователь вводит свое имя пользователя и пароль, вход удостоверений из социальных сетей, зарегистрировавшись для каталога hello или любое другое число шагов.</span><span class="sxs-lookup"><span data-stu-id="69679-175">This might involve hello user entering their username and password, signing in with a social identity, signing up for hello directory, or any other number of steps.</span></span> <span data-ttu-id="69679-176">Действие пользователя зависит от того, как определяется политика hello.</span><span class="sxs-lookup"><span data-stu-id="69679-176">User actions depend on how hello policy is defined.</span></span>

<span data-ttu-id="69679-177">После завершения политики hello hello пользователя Azure AD возвращает приложении tooyour ответа hello значения, используемые для `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="69679-177">After hello user completes hello policy, Azure AD returns a response tooyour app at hello value you used for `redirect_uri`.</span></span> <span data-ttu-id="69679-178">Она использует hello метода, указанного в hello `response_mode` параметра.</span><span class="sxs-lookup"><span data-stu-id="69679-178">It uses hello method specified in hello `response_mode` parameter.</span></span> <span data-ttu-id="69679-179">Hello ответа ровно hello же для каждого hello действия сценариев пользователя, независимо от политики hello, который был выполнен.</span><span class="sxs-lookup"><span data-stu-id="69679-179">hello response is exactly hello same for each of hello user action scenarios, independent of hello policy that was executed.</span></span>

<span data-ttu-id="69679-180">Успешный ответ с использованием метода `response_mode=query` выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="69679-180">A successful response that uses `response_mode=query` looks like this:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...        // hello authorization_code, truncated
&state=arbitrary_data_you_can_receive_in_the_response                // hello value provided in hello request
```

| <span data-ttu-id="69679-181">Параметр</span><span class="sxs-lookup"><span data-stu-id="69679-181">Parameter</span></span> | <span data-ttu-id="69679-182">Описание</span><span class="sxs-lookup"><span data-stu-id="69679-182">Description</span></span> |
| --- | --- |
| <span data-ttu-id="69679-183">Код</span><span class="sxs-lookup"><span data-stu-id="69679-183">code</span></span> |<span data-ttu-id="69679-184">Здравствуйте, приложение hello запрошенный код авторизации.</span><span class="sxs-lookup"><span data-stu-id="69679-184">hello authorization code that hello app requested.</span></span> <span data-ttu-id="69679-185">приложение Hello можно использовать toorequest код авторизации hello маркер доступа для целевого ресурса.</span><span class="sxs-lookup"><span data-stu-id="69679-185">hello app can use hello authorization code toorequest an access token for a target resource.</span></span> <span data-ttu-id="69679-186">Срок действия кодов авторизации крайне мал.</span><span class="sxs-lookup"><span data-stu-id="69679-186">Authorization codes are very short-lived.</span></span> <span data-ttu-id="69679-187">и обычно истекает по прошествии порядка 10 минут.</span><span class="sxs-lookup"><span data-stu-id="69679-187">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="69679-188">state</span><span class="sxs-lookup"><span data-stu-id="69679-188">state</span></span> |<span data-ttu-id="69679-189">В разделе hello полное описание в таблице hello в предшествующих раздел hello.</span><span class="sxs-lookup"><span data-stu-id="69679-189">See hello full description in hello table in hello preceding section.</span></span> <span data-ttu-id="69679-190">Если `state` параметр включен в запрос hello hello же значение должно содержаться в ответе hello.</span><span class="sxs-lookup"><span data-stu-id="69679-190">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="69679-191">Hello приложения следует убедиться, что hello `state` значения в hello запроса и ответа идентичны.</span><span class="sxs-lookup"><span data-stu-id="69679-191">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

<span data-ttu-id="69679-192">Сообщения об ошибках могут отправляться также toohello URI перенаправления, чтобы hello приложение может обрабатывать их соответствующим образом:</span><span class="sxs-lookup"><span data-stu-id="69679-192">Error responses also can be sent toohello redirect URI so that hello app can handle them appropriately:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
error=access_denied
&error_description=The+user+has+cancelled+entering+self-asserted+information
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="69679-193">Параметр</span><span class="sxs-lookup"><span data-stu-id="69679-193">Parameter</span></span> | <span data-ttu-id="69679-194">Описание</span><span class="sxs-lookup"><span data-stu-id="69679-194">Description</span></span> |
| --- | --- |
| <span data-ttu-id="69679-195">error</span><span class="sxs-lookup"><span data-stu-id="69679-195">error</span></span> |<span data-ttu-id="69679-196">Строка кода ошибки, который можно использовать типы hello tooclassify возникающие ошибки.</span><span class="sxs-lookup"><span data-stu-id="69679-196">An error code string that you can use tooclassify hello types of errors that occur.</span></span> <span data-ttu-id="69679-197">Также можно использовать tooerrors tooreact строку hello.</span><span class="sxs-lookup"><span data-stu-id="69679-197">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="69679-198">error_description</span><span class="sxs-lookup"><span data-stu-id="69679-198">error_description</span></span> |<span data-ttu-id="69679-199">Сообщение об ошибке, которые могут помочь определить причину ошибки проверки подлинности hello.</span><span class="sxs-lookup"><span data-stu-id="69679-199">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |
| <span data-ttu-id="69679-200">state</span><span class="sxs-lookup"><span data-stu-id="69679-200">state</span></span> |<span data-ttu-id="69679-201">См. полное описание hello в предшествующей таблице hello.</span><span class="sxs-lookup"><span data-stu-id="69679-201">See hello full description in hello preceding table.</span></span> <span data-ttu-id="69679-202">Если `state` параметр включен в запрос hello hello же значение должно содержаться в ответе hello.</span><span class="sxs-lookup"><span data-stu-id="69679-202">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="69679-203">Hello приложения следует убедиться, что hello `state` значения в hello запроса и ответа идентичны.</span><span class="sxs-lookup"><span data-stu-id="69679-203">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

## <a name="2-get-a-token"></a><span data-ttu-id="69679-204">2. Получение маркера</span><span class="sxs-lookup"><span data-stu-id="69679-204">2. Get a token</span></span>
<span data-ttu-id="69679-205">Теперь, когда вы получили код авторизации, можно активировать hello `code` для токена toohello ресурсов, отправив запрос POST toohello `/token` конечной точки.</span><span class="sxs-lookup"><span data-stu-id="69679-205">Now that you've acquired an authorization code, you can redeem hello `code` for a token toohello intended resource by sending a POST request toohello `/token` endpoint.</span></span> <span data-ttu-id="69679-206">В Azure AD B2C hello только ресурсов, можно запросить маркер является серверной части приложения собственных веб-API.</span><span class="sxs-lookup"><span data-stu-id="69679-206">In Azure AD B2C, hello only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="69679-207">Hello соглашение, которое используется для запроса маркера tooyourself имеет идентификатор клиента приложения hello областью toouse:</span><span class="sxs-lookup"><span data-stu-id="69679-207">hello convention that's used for requesting a token tooyourself is toouse your app's client ID as hello scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob

```

| <span data-ttu-id="69679-208">Параметр</span><span class="sxs-lookup"><span data-stu-id="69679-208">Parameter</span></span> | <span data-ttu-id="69679-209">Обязательный?</span><span class="sxs-lookup"><span data-stu-id="69679-209">Required?</span></span> | <span data-ttu-id="69679-210">Описание</span><span class="sxs-lookup"><span data-stu-id="69679-210">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="69679-211">p</span><span class="sxs-lookup"><span data-stu-id="69679-211">p</span></span> |<span data-ttu-id="69679-212">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-212">Required</span></span> |<span data-ttu-id="69679-213">Здравствуйте, политики, которая была используется tooacquire hello авторизации кода.</span><span class="sxs-lookup"><span data-stu-id="69679-213">hello policy that was used tooacquire hello authorization code.</span></span> <span data-ttu-id="69679-214">Другую политику в этом запросе использовать нельзя.</span><span class="sxs-lookup"><span data-stu-id="69679-214">You cannot use a different policy in this request.</span></span> <span data-ttu-id="69679-215">Обратите внимание, что вы добавить toohello этот параметр *строку запроса*, а не в hello тело POST.</span><span class="sxs-lookup"><span data-stu-id="69679-215">Note that you add this parameter toohello *query string*, not in hello POST body.</span></span> |
| <span data-ttu-id="69679-216">client_id</span><span class="sxs-lookup"><span data-stu-id="69679-216">client_id</span></span> |<span data-ttu-id="69679-217">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-217">Required</span></span> |<span data-ttu-id="69679-218">Идентификатор приложения Hello назначен tooyour приложения hello [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="69679-218">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="69679-219">grant_type</span><span class="sxs-lookup"><span data-stu-id="69679-219">grant_type</span></span> |<span data-ttu-id="69679-220">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-220">Required</span></span> |<span data-ttu-id="69679-221">Hello тип используемого предоставления прав.</span><span class="sxs-lookup"><span data-stu-id="69679-221">hello type of grant.</span></span> <span data-ttu-id="69679-222">Для потока кода авторизации hello, должен быть тип предоставления hello `authorization_code`.</span><span class="sxs-lookup"><span data-stu-id="69679-222">For hello authorization code flow, hello grant type must be `authorization_code`.</span></span> |
| <span data-ttu-id="69679-223">scope</span><span class="sxs-lookup"><span data-stu-id="69679-223">scope</span></span> |<span data-ttu-id="69679-224">Рекомендуется</span><span class="sxs-lookup"><span data-stu-id="69679-224">Recommended</span></span> |<span data-ttu-id="69679-225">Список областей с разделителями-пробелами.</span><span class="sxs-lookup"><span data-stu-id="69679-225">A space-separated list of scopes.</span></span> <span data-ttu-id="69679-226">Значение одной области указывает tooAzure AD обоих hello разрешений, которые запрашиваются.</span><span class="sxs-lookup"><span data-stu-id="69679-226">A single scope value indicates tooAzure AD both of hello permissions that are being requested.</span></span> <span data-ttu-id="69679-227">С помощью клиента hello идентификатор как область hello указывает, что приложение должно маркер доступа, который можно использовать для собственных служб или веб-API, представленный hello же идентификатор клиента.</span><span class="sxs-lookup"><span data-stu-id="69679-227">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="69679-228">Hello `offline_access` области показывает, что приложение требует токен обновления для tooresources долгоживущие доступа.</span><span class="sxs-lookup"><span data-stu-id="69679-228">hello `offline_access` scope indicates that your app needs a refresh token for long-lived access tooresources.</span></span>  <span data-ttu-id="69679-229">Также можно использовать hello `openid` toorequest область маркер идентификатора из Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="69679-229">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="69679-230">Код</span><span class="sxs-lookup"><span data-stu-id="69679-230">code</span></span> |<span data-ttu-id="69679-231">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-231">Required</span></span> |<span data-ttu-id="69679-232">Код авторизации Hello, полученному в первый участок потока hello hello.</span><span class="sxs-lookup"><span data-stu-id="69679-232">hello authorization code that you acquired in hello first leg of hello flow.</span></span> |
| <span data-ttu-id="69679-233">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="69679-233">redirect_uri</span></span> |<span data-ttu-id="69679-234">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-234">Required</span></span> |<span data-ttu-id="69679-235">URI приложения hello, которого вы получили код авторизации hello перенаправления Hello.</span><span class="sxs-lookup"><span data-stu-id="69679-235">hello redirect URI of hello application where you received hello authorization code.</span></span> |

<span data-ttu-id="69679-236">Успешный ответ маркера выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="69679-236">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="69679-237">Параметр</span><span class="sxs-lookup"><span data-stu-id="69679-237">Parameter</span></span> | <span data-ttu-id="69679-238">Описание</span><span class="sxs-lookup"><span data-stu-id="69679-238">Description</span></span> |
| --- | --- |
| <span data-ttu-id="69679-239">not_before</span><span class="sxs-lookup"><span data-stu-id="69679-239">not_before</span></span> |<span data-ttu-id="69679-240">время Hello, на какие hello считается действительным, во время эпохи маркер.</span><span class="sxs-lookup"><span data-stu-id="69679-240">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="69679-241">token_type</span><span class="sxs-lookup"><span data-stu-id="69679-241">token_type</span></span> |<span data-ttu-id="69679-242">значение типа токена Hello.</span><span class="sxs-lookup"><span data-stu-id="69679-242">hello token type value.</span></span> <span data-ttu-id="69679-243">Hello вводить только что поддерживает Azure AD является носителя.</span><span class="sxs-lookup"><span data-stu-id="69679-243">hello only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="69679-244">access_token</span><span class="sxs-lookup"><span data-stu-id="69679-244">access_token</span></span> |<span data-ttu-id="69679-245">Hello подпись JSON Web Token (JWT) по запросу.</span><span class="sxs-lookup"><span data-stu-id="69679-245">hello signed JSON Web Token (JWT) that you requested.</span></span> |
| <span data-ttu-id="69679-246">scope</span><span class="sxs-lookup"><span data-stu-id="69679-246">scope</span></span> |<span data-ttu-id="69679-247">Hello областям hello маркер является допустимым для.</span><span class="sxs-lookup"><span data-stu-id="69679-247">hello scopes that hello token is valid for.</span></span> <span data-ttu-id="69679-248">Также можно использовать токены toocache областей для последующего использования.</span><span class="sxs-lookup"><span data-stu-id="69679-248">You also can use scopes toocache tokens for later use.</span></span> |
| <span data-ttu-id="69679-249">expires_in</span><span class="sxs-lookup"><span data-stu-id="69679-249">expires_in</span></span> |<span data-ttu-id="69679-250">Hello продолжительность hello маркер является допустимым (в секундах).</span><span class="sxs-lookup"><span data-stu-id="69679-250">hello length of time that hello token is valid (in seconds).</span></span> |
| <span data-ttu-id="69679-251">refresh_token</span><span class="sxs-lookup"><span data-stu-id="69679-251">refresh_token</span></span> |<span data-ttu-id="69679-252">Маркер обновления OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="69679-252">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="69679-253">приложение Hello можно использовать этот токен tooacquire дополнительные маркеры, после истечения срока действия текущего маркера hello.</span><span class="sxs-lookup"><span data-stu-id="69679-253">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="69679-254">Маркеры обновления имеют большой срок действия.</span><span class="sxs-lookup"><span data-stu-id="69679-254">Refresh tokens are long-lived.</span></span> <span data-ttu-id="69679-255">Их tooresources tooretain доступа можно использовать на длительное время.</span><span class="sxs-lookup"><span data-stu-id="69679-255">You can use them tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="69679-256">Дополнительные сведения см. в разделе hello [ссылку маркера Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="69679-256">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="69679-257">Сообщения об ошибках выглядят следующим образом:</span><span class="sxs-lookup"><span data-stu-id="69679-257">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="69679-258">Параметр</span><span class="sxs-lookup"><span data-stu-id="69679-258">Parameter</span></span> | <span data-ttu-id="69679-259">Описание</span><span class="sxs-lookup"><span data-stu-id="69679-259">Description</span></span> |
| --- | --- |
| <span data-ttu-id="69679-260">error</span><span class="sxs-lookup"><span data-stu-id="69679-260">error</span></span> |<span data-ttu-id="69679-261">Строка кода ошибки, который можно использовать типы hello tooclassify возникающие ошибки.</span><span class="sxs-lookup"><span data-stu-id="69679-261">An error code string that you can use tooclassify hello types of errors that occur.</span></span> <span data-ttu-id="69679-262">Также можно использовать tooerrors tooreact строку hello.</span><span class="sxs-lookup"><span data-stu-id="69679-262">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="69679-263">error_description</span><span class="sxs-lookup"><span data-stu-id="69679-263">error_description</span></span> |<span data-ttu-id="69679-264">Сообщение об ошибке, которые могут помочь определить причину ошибки проверки подлинности hello.</span><span class="sxs-lookup"><span data-stu-id="69679-264">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |

## <a name="3-use-hello-token"></a><span data-ttu-id="69679-265">3. Использование маркера hello</span><span class="sxs-lookup"><span data-stu-id="69679-265">3. Use hello token</span></span>
<span data-ttu-id="69679-266">Теперь, когда вы успешно получили маркер доступа, можно использовать токен hello в запросы tooyour серверной части веб-API, включив его в hello `Authorization` заголовка:</span><span class="sxs-lookup"><span data-stu-id="69679-266">Now that you've successfully acquired an access token, you can use hello token in requests tooyour back-end web APIs by including it in hello `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="4-refresh-hello-token"></a><span data-ttu-id="69679-267">4. Обновление маркера hello</span><span class="sxs-lookup"><span data-stu-id="69679-267">4. Refresh hello token</span></span>
<span data-ttu-id="69679-268">Срок действия маркеров доступа и маркеров идентификации крайне мал.</span><span class="sxs-lookup"><span data-stu-id="69679-268">Access tokens and ID tokens are short-lived.</span></span> <span data-ttu-id="69679-269">После истечения срока их действия, необходимо обновить их toocontinue tooaccess ресурсов.</span><span class="sxs-lookup"><span data-stu-id="69679-269">After they expire, you must refresh them toocontinue tooaccess resources.</span></span> <span data-ttu-id="69679-270">toodo, отправить другой toohello запрос POST `/token` конечной точки.</span><span class="sxs-lookup"><span data-stu-id="69679-270">toodo this, submit another POST request toohello `/token` endpoint.</span></span> <span data-ttu-id="69679-271">На этот раз укажите hello `refresh_token` вместо hello `code`:</span><span class="sxs-lookup"><span data-stu-id="69679-271">This time, provide hello `refresh_token` instead of hello `code`:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

| <span data-ttu-id="69679-272">Параметр</span><span class="sxs-lookup"><span data-stu-id="69679-272">Parameter</span></span> | <span data-ttu-id="69679-273">Обязательный?</span><span class="sxs-lookup"><span data-stu-id="69679-273">Required?</span></span> | <span data-ttu-id="69679-274">Описание</span><span class="sxs-lookup"><span data-stu-id="69679-274">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="69679-275">p</span><span class="sxs-lookup"><span data-stu-id="69679-275">p</span></span> |<span data-ttu-id="69679-276">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-276">Required</span></span> |<span data-ttu-id="69679-277">политика Hello, исходный токен обновления используется tooacquire hello.</span><span class="sxs-lookup"><span data-stu-id="69679-277">hello policy that was used tooacquire hello original refresh token.</span></span> <span data-ttu-id="69679-278">Другую политику в этом запросе использовать нельзя.</span><span class="sxs-lookup"><span data-stu-id="69679-278">You cannot use a different policy in this request.</span></span> <span data-ttu-id="69679-279">Обратите внимание, что вы добавить toohello этот параметр *строку запроса*, а не в hello тело POST.</span><span class="sxs-lookup"><span data-stu-id="69679-279">Note that you add this parameter toohello *query string*, not in hello POST body.</span></span> |
| <span data-ttu-id="69679-280">client_id</span><span class="sxs-lookup"><span data-stu-id="69679-280">client_id</span></span> |<span data-ttu-id="69679-281">Рекомендуется</span><span class="sxs-lookup"><span data-stu-id="69679-281">Recommended</span></span> |<span data-ttu-id="69679-282">Идентификатор приложения Hello назначен tooyour приложения hello [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="69679-282">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="69679-283">grant_type</span><span class="sxs-lookup"><span data-stu-id="69679-283">grant_type</span></span> |<span data-ttu-id="69679-284">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-284">Required</span></span> |<span data-ttu-id="69679-285">Hello тип используемого предоставления прав.</span><span class="sxs-lookup"><span data-stu-id="69679-285">hello type of grant.</span></span> <span data-ttu-id="69679-286">Для этого участок потока кода авторизации hello должен быть тип предоставления hello `refresh_token`.</span><span class="sxs-lookup"><span data-stu-id="69679-286">For this leg of hello authorization code flow, hello grant type must be `refresh_token`.</span></span> |
| <span data-ttu-id="69679-287">scope</span><span class="sxs-lookup"><span data-stu-id="69679-287">scope</span></span> |<span data-ttu-id="69679-288">Рекомендуется</span><span class="sxs-lookup"><span data-stu-id="69679-288">Recommended</span></span> |<span data-ttu-id="69679-289">Список областей с разделителями-пробелами.</span><span class="sxs-lookup"><span data-stu-id="69679-289">A space-separated list of scopes.</span></span> <span data-ttu-id="69679-290">Значение одной области указывает tooAzure AD обоих hello разрешений, которые запрашиваются.</span><span class="sxs-lookup"><span data-stu-id="69679-290">A single scope value indicates tooAzure AD both of hello permissions that are being requested.</span></span> <span data-ttu-id="69679-291">С помощью клиента hello идентификатор как область hello указывает, что приложение должно маркер доступа, который можно использовать для собственных служб или веб-API, представленный hello же идентификатор клиента.</span><span class="sxs-lookup"><span data-stu-id="69679-291">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="69679-292">Hello `offline_access` область показывает, что вашему приложению потребуется токен обновления для tooresources долгоживущие доступа.</span><span class="sxs-lookup"><span data-stu-id="69679-292">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span>  <span data-ttu-id="69679-293">Также можно использовать hello `openid` toorequest область маркер идентификатора из Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="69679-293">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="69679-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="69679-294">redirect_uri</span></span> |<span data-ttu-id="69679-295">Необязательно</span><span class="sxs-lookup"><span data-stu-id="69679-295">Optional</span></span> |<span data-ttu-id="69679-296">URI приложения hello, которого вы получили код авторизации hello перенаправления Hello.</span><span class="sxs-lookup"><span data-stu-id="69679-296">hello redirect URI of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="69679-297">refresh_token</span><span class="sxs-lookup"><span data-stu-id="69679-297">refresh_token</span></span> |<span data-ttu-id="69679-298">Обязательно</span><span class="sxs-lookup"><span data-stu-id="69679-298">Required</span></span> |<span data-ttu-id="69679-299">Hello исходный токен обновления, полученному в hello второго участка hello потока.</span><span class="sxs-lookup"><span data-stu-id="69679-299">hello original refresh token that you acquired in hello second leg of hello flow.</span></span> |

<span data-ttu-id="69679-300">Успешный ответ маркера выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="69679-300">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="69679-301">Параметр</span><span class="sxs-lookup"><span data-stu-id="69679-301">Parameter</span></span> | <span data-ttu-id="69679-302">Описание</span><span class="sxs-lookup"><span data-stu-id="69679-302">Description</span></span> |
| --- | --- |
| <span data-ttu-id="69679-303">not_before</span><span class="sxs-lookup"><span data-stu-id="69679-303">not_before</span></span> |<span data-ttu-id="69679-304">время Hello, на какие hello считается действительным, во время эпохи маркер.</span><span class="sxs-lookup"><span data-stu-id="69679-304">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="69679-305">token_type</span><span class="sxs-lookup"><span data-stu-id="69679-305">token_type</span></span> |<span data-ttu-id="69679-306">значение типа токена Hello.</span><span class="sxs-lookup"><span data-stu-id="69679-306">hello token type value.</span></span> <span data-ttu-id="69679-307">Hello вводить только что поддерживает Azure AD является носителя.</span><span class="sxs-lookup"><span data-stu-id="69679-307">hello only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="69679-308">access_token</span><span class="sxs-lookup"><span data-stu-id="69679-308">access_token</span></span> |<span data-ttu-id="69679-309">Hello подпись JWT по запросу.</span><span class="sxs-lookup"><span data-stu-id="69679-309">hello signed JWT that you requested.</span></span> |
| <span data-ttu-id="69679-310">scope</span><span class="sxs-lookup"><span data-stu-id="69679-310">scope</span></span> |<span data-ttu-id="69679-311">Hello областям hello маркер является допустимым для.</span><span class="sxs-lookup"><span data-stu-id="69679-311">hello scopes that hello token is valid for.</span></span> <span data-ttu-id="69679-312">Также можно использовать токены toocache hello областей для последующего использования.</span><span class="sxs-lookup"><span data-stu-id="69679-312">You also can use hello scopes toocache tokens for later use.</span></span> |
| <span data-ttu-id="69679-313">expires_in</span><span class="sxs-lookup"><span data-stu-id="69679-313">expires_in</span></span> |<span data-ttu-id="69679-314">Hello продолжительность hello маркер является допустимым (в секундах).</span><span class="sxs-lookup"><span data-stu-id="69679-314">hello length of time that hello token is valid (in seconds).</span></span> |
| <span data-ttu-id="69679-315">refresh_token</span><span class="sxs-lookup"><span data-stu-id="69679-315">refresh_token</span></span> |<span data-ttu-id="69679-316">Маркер обновления OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="69679-316">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="69679-317">приложение Hello можно использовать этот токен tooacquire дополнительные маркеры, после истечения срока действия текущего маркера hello.</span><span class="sxs-lookup"><span data-stu-id="69679-317">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="69679-318">Обновить долгоживущие токены и может быть tooresources доступа используется tooretain на длительное время.</span><span class="sxs-lookup"><span data-stu-id="69679-318">Refresh tokens are long-lived, and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="69679-319">Дополнительные сведения см. в разделе hello [ссылку маркера Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="69679-319">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="69679-320">Сообщения об ошибках выглядят следующим образом:</span><span class="sxs-lookup"><span data-stu-id="69679-320">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="69679-321">Параметр</span><span class="sxs-lookup"><span data-stu-id="69679-321">Parameter</span></span> | <span data-ttu-id="69679-322">Описание</span><span class="sxs-lookup"><span data-stu-id="69679-322">Description</span></span> |
| --- | --- |
| <span data-ttu-id="69679-323">error</span><span class="sxs-lookup"><span data-stu-id="69679-323">error</span></span> |<span data-ttu-id="69679-324">Строка кода ошибки, который можно использовать типы tooclassify возникающие ошибки.</span><span class="sxs-lookup"><span data-stu-id="69679-324">An error code string that you can use tooclassify types of errors that occur.</span></span> <span data-ttu-id="69679-325">Также можно использовать tooerrors tooreact строку hello.</span><span class="sxs-lookup"><span data-stu-id="69679-325">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="69679-326">error_description</span><span class="sxs-lookup"><span data-stu-id="69679-326">error_description</span></span> |<span data-ttu-id="69679-327">Сообщение об ошибке, которые могут помочь определить причину ошибки проверки подлинности hello.</span><span class="sxs-lookup"><span data-stu-id="69679-327">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |

## <a name="use-your-own-azure-ad-b2c-directory"></a><span data-ttu-id="69679-328">Использование собственного каталога Azure AD B2C</span><span class="sxs-lookup"><span data-stu-id="69679-328">Use your own Azure AD B2C directory</span></span>
<span data-ttu-id="69679-329">tootry эти запросы самостоятельно, полный hello следующие шаги.</span><span class="sxs-lookup"><span data-stu-id="69679-329">tootry these requests yourself, complete hello following steps.</span></span> <span data-ttu-id="69679-330">Замените hello примеры значений, которые были использованы в этой статье собственными значениями.</span><span class="sxs-lookup"><span data-stu-id="69679-330">Replace hello example values we used in this article with your own values.</span></span>

1. <span data-ttu-id="69679-331">[Создайте каталог Azure AD B2C](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="69679-331">[Create an Azure AD B2C directory](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="69679-332">Используйте hello имя каталога в запросах hello.</span><span class="sxs-lookup"><span data-stu-id="69679-332">Use hello name of your directory in hello requests.</span></span>
2. <span data-ttu-id="69679-333">[Создание приложения](active-directory-b2c-app-registration.md) tooobtain идентификатора приложения и URI перенаправления.</span><span class="sxs-lookup"><span data-stu-id="69679-333">[Create an application](active-directory-b2c-app-registration.md) tooobtain an application ID and a redirect URI.</span></span> <span data-ttu-id="69679-334">Включите собственный клиент в приложение.</span><span class="sxs-lookup"><span data-stu-id="69679-334">Include a native client in your app.</span></span>
3. <span data-ttu-id="69679-335">[Создание политик](active-directory-b2c-reference-policies.md) tooobtain имена ваших политики.</span><span class="sxs-lookup"><span data-stu-id="69679-335">[Create your policies](active-directory-b2c-reference-policies.md) tooobtain your policy names.</span></span>

