---
title: "Azure AD B2C: настройка пользовательского интерфейса с помощью настраиваемых политик | Документация Майкрософт"
description: "Сведения о настройке пользовательского интерфейса с помощью настраиваемых политик в Azure AD B2C."
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 658c597e-3787-465e-b377-26aebc94e46d
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 04/04/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: 6f00995e54c9f9ef27cc51e38f3de07cd5817cc1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-b2c-configure-ui-customization-in-a-custom-policy"></a>Azure Active Directory B2C. Настройка пользовательского интерфейса с помощью настраиваемой политики

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

Выполнив инструкции из этой статьи, вы получите настраиваемую политику регистрации и входа с фирменной символикой и оформлением. С Azure Active Directory B2C (Azure AD B2C), вы получаете практически полный контроль над hello содержимое HTML и CSS, представил toousers. При использовании пользовательской политики, Настройка пользовательского интерфейса настройки в XML вместо использования элементов управления в hello портал Azure. 

## <a name="prerequisites"></a>Предварительные требования

Прежде чем продолжить, ознакомьтесь со статьей [Azure Active Directory B2C. Приступая к работе с настраиваемыми политиками](active-directory-b2c-get-started-custom.md). Для регистрации и входа с использованием локальных учетных записей необходимо иметь рабочую настраиваемую политику.

## <a name="page-ui-customization"></a>Настройка пользовательского интерфейса страницы

С помощью функции настройки пользовательского интерфейса страницы приветствия, можно настроить hello внешний вид и поведение любых пользовательских политик. Кроме того, можно обеспечить согласованность фирменной символики и визуализации в приложении и службе Azure AD B2C.

Вот как это работает. Служба Azure AD B2C выполняет код в браузере пользователя и использует современный метод — [общий доступ к ресурсам независимо от источника (CORS)](http://www.w3.org/TR/cors/). Во-первых указываются URL-адрес в настраиваемой политике hello настроенные HTML-содержимое. Azure AD B2C объединяет элементы пользовательского интерфейса с hello HTML-содержимое, которое загружается из URL-адрес, а затем отображает клиента toohello страницы приветствия.

## <a name="create-your-html5-content"></a>Создание содержимого HTML5

Создание содержимого с марку продукта HTML в заголовок hello.

1. Скопируйте следующий фрагмент кода HTML hello. Он имеет правильный формат HTML5 с пустым элементом называется  *\<div id = «api»\>\</div\>*  , расположенного внутри hello  *\<текст\>*  тегов. Этот элемент указывает, где Azure AD B2C содержимое является toobe вставлены.

   ```html
   <!DOCTYPE html>
   <html>
   <head>
       <title>My Product Brand Name</title>
   </head>
   <body>
       <div id="api"></div>
   </body>
   </html>
   ```

   >[!NOTE]
   >По соображениям безопасности hello использование JavaScript в данный момент заблокирована для настройки.

2. Вставить фрагмент кода hello копируются в текстовом редакторе, а затем сохраните файл hello как *настроить ui.html*.

## <a name="create-an-azure-blob-storage-account"></a>Создание учетной записи хранения BLOB-объектов Azure

>[!NOTE]
> В этой статье мы используем toohost хранилища больших двоичных объектов Azure содержимое веб-узла. Вы можете toohost содержимого на веб-сервере, но для этого необходимо [включить CORS веб-сервера,](https://enable-cors.org/server.html).

toohost это содержимое HTML в хранилище больших двоичных объектов hello следующие:

1. Войдите в toohello [портал Azure](https://portal.azure.com).
2. На hello **концентратора** последовательно выберите пункты **New** > **хранения** > **учетной записи хранилища**.
3. Введите уникальное **имя** учетной записи хранения.
4. Для параметра **Модель развертывания** можно оставить значение **Диспетчер ресурсов**.
5. Изменение **тип учетной записи** слишком**хранилище больших двоичных объектов**.
6. Для параметра **Производительность** можно оставить значение **Стандартная**.
7. Для параметра **Репликация** можно оставить значение **RA-GRS**.
8. Для параметра **Уровень доступа** можно оставить значение **Горячий**.
9. Для параметра **Шифрование службы хранилища** можно оставить значение **Отключено**.
10. Выберите **подписку** для своей учетной записи хранения.
11. Создайте новую **группу ресурсов** или выберите существующую.
12. Выберите hello **географическое расположение** для вашей учетной записи.
13. Нажмите кнопку **создать** toocreate учетной записи хранилища hello.  
    После завершения развертывания hello hello **учетной записи хранилища** колонке открывается автоматически.

## <a name="create-a-container"></a>Создание контейнера

toocreate открытого контейнера в хранилище больших двоичных объектов hello следующие:

1. Нажмите кнопку hello **Обзор** вкладки.
2. Щелкните **Контейнер**.
3. В поле **Имя** введите **$root**.
4. Задать **тип доступа** слишком**большого двоичного объекта**.
5. Нажмите кнопку **$root** tooopen hello новый контейнер.
6. Щелкните **Отправить**.
7. Щелкните значок папки hello рядом слишком**выберите файл**.
8. Go слишком**настроить ui.html**, созданной ранее hello [Настройка пользовательского интерфейса страницы](#the-page-ui-customization-feature) раздела.
9. Щелкните **Отправить**.
10. Выберите hello настроить ui.html загруженный большой двоичный объект.
11. Далее слишком**URL-адрес**, нажмите кнопку **копирования**.
12. В браузере вставьте URL-адрес скопирован hello и toohello сайте. Если hello сайта недоступен, убедитесь, что тип доступа для контейнера hello установлено слишком**большого двоичного объекта**.

## <a name="configure-cors"></a>Настройка CORS

Настройка хранилища больших двоичных объектов для общий доступ к ресурсам независимо от источника, выполнив hello ниже:

>[!NOTE]
>Требуется tootry out hello функции настройки пользовательского интерфейса с помощью наши примеры содержимого HTML и CSS? Используйте [простое вспомогательное приложение](active-directory-b2c-reference-ui-customization-helper-tool.md), чтобы отправить и настроить пример содержимого в учетной записи хранилища BLOB-объектов. Если вы используете средство hello, пропускать слишком[изменения регистрации или входа в настраиваемой политики](#modify-your-sign-up-or-sign-in-custom-policy).

1. На hello **хранения** колонки в разделе **параметры**откройте **CORS**.
2. Щелкните **Добавить**.
3. Для параметра **Разрешенные источники** введите звездочку (\*).
4. В hello **разрешенных команд** раскрывающегося списка, выберите **получить** и **параметры**.
5. Для параметра **Разрешенные заголовки** введите звездочку (\*).
6. Для параметра **Доступные заголовки** введите звездочку (\*).
7. Для параметра **Максимальная длительность (в секундах)** введите **200**.
8. Щелкните **Добавить**.

## <a name="test-cors"></a>Тестирование CORS

Проверьте, что вы будете готовы, выполнив следующие hello:

1. Go toohello [тест cors.org](http://test-cors.org/) веб-сайта, а затем вставить hello URL-адрес hello **URL-адрес удаленного** поле.
2. Щелкните **Send Request** (Отправить запрос).  
    Если произошла ошибка, проверьте правильность [параметров CORS](#configure-cors). Вы может также потребоваться tooclear кэше браузера или открыть сеанс в режиме конфиденциального просмотра, нажав клавиши Ctrl + Shift + P.

## <a name="modify-your-sign-up-or-sign-in-custom-policy"></a>Изменение настраиваемой политики регистрации или входа

В области верхнего уровня hello  *\<TrustFrameworkPolicy\>*  тег, следует найти  *\<BuildingBlocks\>*  тег. В рамках hello  *\<BuildingBlocks\>*  добавление тегов,  *\<ContentDefinitions\>*  тег, скопировав следующий пример hello. Замените *your_storage_account* с именем hello вашей учетной записи хранилища.

  ```xml
  <BuildingBlocks>
    <ContentDefinitions>
      <ContentDefinition Id="api.idpselections">
        <LoadUri>https://{your_storage_account}.blob.core.windows.net/customize-ui.html</LoadUri>
      </ContentDefinition>
    </ContentDefinitions>
  </BuildingBlocks>
  ```

## <a name="upload-your-updated-custom-policy"></a>Отправка обновленной настраиваемой политики

1. В hello [портал Azure](https://portal.azure.com), [переключитесь в контекст hello вашего клиента Azure AD B2C](active-directory-b2c-navigate-to-b2c-context.md), а затем откройте hello **Azure AD B2C** колонку.
2. Щелкните **Все политики**.
3. Выберите **Отправить политику**.
4. Отправка `SignUpOrSignin.xml` с hello  *\<ContentDefinitions\>*  тег, который был добавлен ранее.

## <a name="test-hello-custom-policy-by-using-run-now"></a>Проверка с помощью настраиваемой политики hello **запустить сейчас**

1. На hello **Azure AD B2C** колонке go слишком**все политики**.
2. Выберите настраиваемую политику hello, загруженный и нажмите кнопку hello **запустить сейчас** кнопки.
3. Можно будет toosign копирование с помощью адреса электронной почты.

## <a name="reference"></a>Справочные материалы

Здесь можно найти примеры шаблонов для настройки пользовательского интерфейса:

```
git clone https://github.com/azureadquickstarts/b2c-azureblobstorage-client
```

Папка sample_templates/wingtip Hello содержит следующие файлы HTML hello:

| Шаблон HTML5 | Описание |
|----------------|-------------|
| *phonefactor.html* | Этот файл используется как шаблон для страницы многофакторной проверки подлинности. |
| *ResetPassword.html* | Этот файл используется как шаблон для страницы восстановления пароля. |
| *selfasserted.html* | Этот файл используется как шаблон для страницы регистрации учетных записей социальных сетей, страницы регистрации локальной учетной записи или страницы входа в локальную учетную запись. |
| *unified.html* | Этот файл используется как шаблон для единой страницы регистрации или входа в систему. |
| *updateprofile.html* | Этот файл используется как шаблон для страницы обновления профиля. |

В hello [изменение вашей настраиваемой политики регистрации или входа в разделе](#modify-your-sign-up-or-sign-in-custom-policy), настроить определение содержимого hello для `api.idpselections`. Hello полный набор определение содержимого идентификаторы, распознаваемые framework качества hello Azure AD B2C удостоверений и их описаний, в следующей таблице hello:

| Идентификатор для определения содержимого | Описание | 
|-----------------------|-------------|
| *api.error* | **Страница ошибки.** Эта страница отображается при обнаружении исключения или ошибки. |
| *api.idpselections* | **Страница выбора поставщика удостоверений.** Эта страница содержит список идентификаторов, можно выбрать поставщиков, которые hello пользователя при входе в систему. Это поставщики удостоверений организаций, социальных сетей, включая Facebook и Google+, или локальных учетных записей. |
| *api.idpselections.signup* | **Выбор поставщика удостоверений для регистрации.** Эта страница содержит список идентификаторов, которые можно выбрать поставщиков, которые hello пользователя во время регистрации. Это поставщики удостоверений организаций, социальных сетей, включая Facebook и Google+, или локальных учетных записей. |
| *api.localaccountpasswordreset* | **Страница восстановления пароля.** Эта страница содержит форму hello пользователь должен завершить tooinitiate для сброса пароля.  |
| *api.localaccountsignin* | **Страница входа в локальную учетную запись.** Эта страница содержит форму для входа в локальную учетную запись (на основе адреса электронной почты или имени пользователя). Hello форма может содержать поля ввода текста и окне ввода пароля. |
| *api.localaccountsignup* | **Страница регистрации локальной учетной записи.** Эта страница содержит форму для регистрации локальной учетной записи (на основе адреса электронной почты или имени пользователя). Hello форма может содержать различных элементов управления, например в текстовом поле, окне ввода пароля, типа "переключатель", выбирать раскрывающиеся списки и выбрать несколько флажков. |
| *api.phonefactor* | **Страница Многофакторной идентификации.** Эта страница позволяет пользователю подтвердить свой номер телефона (с помощью SMS-сообщения или голосового вызова) во время регистрации или входа. |
| *api.selfasserted* | **Страница регистрации учетной записи социальных сетей.** Эта страница содержит форму регистрации, которую нужно заполнить при регистрации с использованием существующей учетной записи от таких поставщиков удостоверений социальных сетей, как Facebook или Google+. Данная страница является аналогичные toohello предшествующий социальных учетной записи "Регистрация", за исключением полей ввода пароля hello. |
| *api.selfasserted.profileupdate* | **Страница обновления профиля.** Эта страница содержит формы, что пользователи могут использовать tooupdate свой профиль. Данная страница является аналогичные toohello социальных учетная запись регистрации, за исключением полей ввода пароля hello. |
| *api.signuporsignin* | **Единая страница регистрации или входа.** Эта страница обрабатывает оба hello, регистрация и вход пользователей, которые могут использовать поставщиков удостоверений предприятия, Поставщики удостоверений из социальных сетей, например Facebook или Google + или локальные учетные записи.  |

## <a name="next-steps"></a>Дальнейшие действия

См. [справочное руководство по настройке пользовательского интерфейса для встроенных политик](active-directory-b2c-reference-ui-customization.md).
