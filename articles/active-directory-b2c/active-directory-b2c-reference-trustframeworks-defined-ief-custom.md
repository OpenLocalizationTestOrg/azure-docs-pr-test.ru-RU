---
title: "Azure Active Directory B2C. Справка по инфраструктуре доверия | Документация Майкрософт"
description: "В этой статье рассматриваются пользовательские политики Azure Active Directory B2C и инфраструктура процедур идентификации."
services: active-directory-b2c
documentationcenter: 
author: rojasja
manager: mtillman
editor: rojasja
ms.assetid: 
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 08/04/2017
ms.author: joroja
ms.openlocfilehash: 6dd9039520ec9bfadb358262dad7ebcdb67f6344
ms.sourcegitcommit: e266df9f97d04acfc4a843770fadfd8edf4fa2b7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2017
---
# <a name="define-trust-frameworks-with-azure-ad-b2c-identity-experience-framework"></a>Определение инфраструктур доверия с помощью инфраструктуры процедур идентификации Azure AD B2C

Пользовательские политики Azure Active Directory B2C (Azure AD B2C), использующие инфраструктуру процедур идентификации, предоставляют организации централизованную службу. Эта служба упрощает работу федерации удостоверений в больших сообществах. Благодаря ее использованию процедура ограничивается одним отношением доверия и одной операцией обмена метаданными.

Пользовательские политики Azure AD B2C, применяющие инфраструктуру процедур идентификации, позволят вам найти ответы на следующие вопросы:

- Какие юридические политики, политики безопасности, конфиденциальности и защиты данных необходимо соблюдать?
- С кем нужно связаться, чтобы пройти аккредитацию, и как проходит этот процесс?
- Кто является аккредитованными поставщиками сведений об удостоверениях (также известными как "поставщики утверждений") и какие возможности они могут предложить?
- Кто является аккредитованной проверяющей стороной (и каковы, при необходимости, ее требования)?
- Каковы технические требования к сетевому взаимодействию для участников?
- Какие правила эксплуатации должны применяться к обмену информацией о цифровых удостоверениях?

Чтобы ответить на эти вопросы, в пользовательских политиках Azure AD B2C, в который применяется инфраструктура процедур идентификации, употребляется такой термин, как "инфраструктура доверия". Давайте рассмотрим этот термин и что вообще предоставляет инфраструктура доверия.

## <a name="understand-the-trust-framework-and-federation-management-foundation"></a>Основные сведения об инфраструктуре доверия и основе управления федерацией

Инфраструктура доверия — это письменная спецификация с политиками удостоверений, безопасности, конфиденциальности и защите данных, которым должны следовать участники интересующего сообщества.

Федеративная идентификация позволяет обеспечить защиту удостоверений пользователей в Интернете. При делегировании управления удостоверениями стороннему поставщику несколько проверяющих сторон могут использовать одно цифровое удостоверение для пользователя.  

Для защиты удостоверений поставщикам удостоверений и атрибутов необходимо соблюдать политики безопасности, конфиденциальности и эксплуатации, а также выполнять соответствующие рекомендации.  Если проверяющие стороны не могут выполнять прямые проверки, то им необходимо установить отношения доверия с выбранными поставщиками удостоверений и атрибутов.  

Так как число получателей и поставщиков сведений о цифровых удостоверениях растет, продолжать обоюдное управление этими отношениями доверия или обмен техническими метаданными, необходимыми для подключения к сети, становится сложно.  Концентраторы федерации смогли решить эту проблему лишь частично.

### <a name="what-a-trust-framework-specification-defines"></a>Что определяет спецификация инфраструктуры доверия
Инфраструктуры доверия лежат в основе модели инфраструктуры доверия с открытым обменом удостоверениями (OIX), где каждое интересующее сообщество регулируется отдельной спецификацией инфраструктуры доверия, которая определяет следующее:

- **Метрики безопасности и конфиденциальности для интересующего сообщества с такими определениями:**
    - Уровни гарантии, которые предлагают или требуют участники, например упорядоченный набор оценок достоверности, определяющих подлинность сведений о цифровых удостоверениях.
    - Уровни защиты, которые предлагают или требуют участники, например упорядоченный набор оценок достоверности для обеспечения защиты сведений о цифровых удостоверениях, обрабатываемых участниками интересующего сообщества.

- **Описание сведений о цифровых удостоверениях, которые предлагают или требуют участники**.

- **Технические политики для создания и использования сведений о цифровых удостоверениях, а также для определения уровня гарантии и защиты. Эти письменные политики обычно разделяются на следующие категории:**
    - Политики доказательства идентичности. Пример: *Насколько строго проверяются сведения об удостоверении пользователя?*
    - Политики безопасности. Пример: *Каков уровень зашиты целостности и конфиденциальности данных?*
    - Политики конфиденциальности. Пример: *Может ли пользователь управлять личными сведениями?*
    - Политики устойчивости. Пример: *Как осуществляется непрерывная защита личных сведений, если поставщик прекращает работу?*

- **Технические профили для создания и использования сведений о цифровых удостоверениях. Эти профили включают в себя:**
    - Определения интерфейсов, для которых доступны сведения о цифровых удостоверениях на указанном уровне гарантии.
    - Технические требования к сетевому взаимодействию.

- **Описания различных ролей, которые могут выполнять участники сообщества, а также условия, которые необходимо выполнить для работы с этими ролями.**

Таким образом спецификация инфраструктуры доверия регулирует обмен данными об удостоверениях между участниками интересующего сообщества: проверяющими сторонами, поставщиками удостоверений и атрибутов и лицами, проверяющими атрибуты.

Спецификация инфраструктуры доверия — это один или несколько документов, с помощью которых осуществляется управление сообществом. Эти документы регулируют добавление и использование сведений о цифровых удостоверениях в сообществе. Это задокументированный набор политик и процедур, предназначенный для установления отношений доверия в цифровых удостоверениях, которые используются членами сообщества в интерактивных операциях.  

Другими словами, спецификация инфраструктуры доверия определяет правила создания приемлемой экосистемы федеративных удостоверений для сообщества.

Сейчас множество специалистов сошлись во мнении о преимуществах такого подхода. Спецификации инфраструктуры доверия, несомненно, ускоряют разработку экосистемы цифровых удостоверений с характеристиками безопасности, гарантии и конфиденциальности, которые можно проверить и, таким образом, использовать повторно в нескольких сообществах.

Именно поэтому в пользовательских политиках Azure AD B2C, в которых используется инфраструктура процедур идентификации, спецификация применяется для представления данных для инфраструктуры доверия и упрощения взаимодействия.  

В пользовательских политиках Azure AD B2C, использующих инфраструктуру процедур идентификации, спецификация инфраструктуры доверия представлена как сочетание данных, используемых людьми и компьютерами. Некоторые части этой модели (как правило, ориентированные на управление) представляются в виде ссылок на документацию по опубликованным политикам безопасности и конфиденциальности со связанными процедурами (при их наличии). В других частях подробно описаны метаданные конфигурации и правила эксплуатации для упрощения автоматизации операций.

## <a name="understand-trust-framework-policies"></a>Общие сведения о политиках инфраструктуры доверия

С точки зрения реализации спецификация инфраструктуры доверия состоит из набора политик, обеспечивающих полный контроль над работой с удостоверениями.  Пользовательские политики Azure AD B2C, использующие инфраструктуру процедур идентификации, позволяют создавать свои инфраструктуры доверия через такие декларативные политики, с помощью которых можно определить и настроить следующее:

- Ссылки на документы или ссылки, определяющие экосистему федеративных удостоверений сообщества, связанные с инфраструктурой доверия. Это ссылки на документацию по инфраструктуре доверия. Предопределенные правила эксплуатации или пути взаимодействия пользователя, автоматизирующие обмен утверждениями и их использование, а также управляющие этими процессами. Эти пути взаимодействия пользователя связаны с уровнем гарантии и защиты. Таким образом, в политике могут быть прописаны пути взаимодействия пользователя с разными уровнями гарантии и защиты.

- Поставщики удостоверений и атрибутов или поставщики утверждений в сообществе и технические профили, которые они поддерживают, а также аккредитация по внешним уровням гарантии и защиты, связанная с ними.

- Интеграция с лицами, проверяющими атрибуты, или с поставщиками утверждений.

- Проверяющие стороны в сообществе (за счет определения).

- Метаданные для сетевого подключения между участниками. Эти метаданные вместе с техническими профилями используются во время транзакции для настройки сетевого взаимодействия между проверяющей стороной и другими участниками сообщества.

- Преобразование протокола (если оно есть) (например SAML, OAuth2, WS-Federation и OpenID Connect).

- Требования к проверке подлинности.

- Многофакторная оркестрация (если такая имеется).

- Общая схема для всех доступных утверждений и сопоставлений для участников сообщества.

- Все преобразования утверждений (вместе с возможной в этом контексте минимизацией данных) для поддержки обмена утверждениями и их использования.

- Привязка и шифрование.

- Хранилище утверждений.

### <a name="understand-claims"></a>Общие сведения об утверждениях

> [!NOTE]
> Мы называем все возможные типы данных об удостоверениях, которыми можно обменяться, "утверждениями" (утверждения об учетных данных для аутентификации пользователя, проверке удостоверений, физическом расположении, атрибутах, позволяющих установить личность, и т. д.).  
>
> Мы используем термин "утверждения", а не "атрибуты", потому что при сетевых транзакциях проверяющие стороны не могут проверить эти артефакты данных напрямую, как факты. Это скорее утверждения о фактах, в которых проверяющая сторона должна быть достаточно уверена, чтобы разрешить запрошенную транзакцию пользователя.  
>
> Мы также применяем термин "утверждения", потому что пользовательские политики Azure AD B2C, использующие инфраструктуру процедур идентификации, предназначены для упрощения согласованного обмена всеми типами сведений о цифровых удостоверениях независимо от того, для чего предназначен базовый протокол (для проверки подлинности пользователей или извлечения атрибутов).  Аналогичным образом мы используем термин "поставщики утверждений" для всех поставщиков удостоверений и атрибутов, а также для лиц, проверяющих атрибуты, когда не требуется различать конкретные функции.   

Таким образом они определяют способ обмена сведениями об удостоверениях между проверяющими сторонами, поставщиками удостоверений и атрибутов, а также лицами, проверяющими атрибуты. Кроме того, они позволяют определить поставщиков удостоверений и атрибутов, необходимых для проверки подлинности проверяющей стороны. Их следует рассматривать как доменный язык (DSL), то есть компьютерный язык, предназначенный для конкретного домена приложений с наследованием, инструкциями *IF* и полиморфизмом.

Эти политики составляют часть конструкции инфраструктуры доверия в пользовательских политиках Azure AD B2C, использующих инфраструктуру процедур идентификации, которую применяет компьютер. К ним относятся все операционные сведения, включая метаданные поставщиков утверждений и технические профили, определения схем утверждений, функции преобразования утверждений и пути взаимодействия пользователя, указанные для упрощения оркестрации и автоматизации операций.  

Они считаются *динамическими документами*, так как, вероятнее всего, их содержимое будет изменяться со временем в отношении активных участников, объявленных в политиках. А также, возможно, изменятся условия участия.  

Установка и обслуживание федерации существенно упрощается, так как проверяющим сторонам не нужно постоянно менять конфигурацию отношений доверия и подключения при изменении состава поставщиков утверждений и проверяющих в сообществе, представленном набором политик.

Еще одна нетривиальная задача — это взаимодействие. Для дополнительных поставщиков утверждений и проверяющих нужно выполнить интеграцию, так как маловероятно, что проверяющие стороны поддерживают все необходимые протоколы. В пользовательских политиках Azure AD B2C удалось решить эту проблему. Они поддерживают стандартные отраслевые протоколы и применяют конкретные пути взаимодействия пользователя с системой для транспонирования запросов, если проверяющие стороны и поставщики атрибутов не поддерживают те же протоколы.  

Пути взаимодействия пользователя с системой включают профили протоколов и метаданные, которые используются для настройки сетевого взаимодействия между проверяющей стороной и другими участниками. Существуют также правила эксплуатации, которые применяются к сообщениям с запросами и ответами об обмене сведениями об удостоверениях, чтобы обеспечить соответствие требованиям опубликованных политик в рамках спецификации инфраструктуры доверия. Идея пути взаимодействия пользователя играет ключевую роль в настройке пользовательских возможностей. Она также позволяет узнать о работе системы на уровне протокола.

На этой основе приложения проверяющей стороны и порталы в зависимости от контекста могут вызывать пользовательские политики Azure AD B2C, использующие инфраструктуру процедур идентификации, передав имя конкретной политики, и получить надежное и простое поведение и обмен информацией.
