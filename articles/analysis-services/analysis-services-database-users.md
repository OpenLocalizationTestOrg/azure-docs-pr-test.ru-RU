---
title: "aaaManage базы данных, ролей и пользователей в Azure Analysis Services | Документы Microsoft"
description: "Узнайте, как toomanage базы данных, ролей и пользователей на сервере служб Analysis Services в Azure."
services: analysis-services
documentationcenter: 
author: minewiskan
manager: erikre
editor: 
tags: 
ms.assetid: 
ms.service: analysis-services
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: na
ms.date: 08/15/2017
ms.author: owend
ms.openlocfilehash: 2ad069a6bcce11bc43347625cb32ec400d48af18
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="manage-database-roles-and-users"></a>Управление ролями и пользователями базы данных

На уровне базы данных модели hello все пользователи должны принадлежать роли tooa. Роли определяют пользователей с определенной разрешения для базы данных model hello. Любой пользователь или группа безопасности добавлены tooa роли необходимо настроить учетную запись в клиенте Azure AD в hello ту же подписку сервер hello.

Определение ролей имеет разные в зависимости от используемого средства hello, но эффект hello Здравствуйте, одинаково.

Разрешения ролей включают следующие:
*  **Администратор** -пользователи имеют полные разрешения для базы данных hello. Роли базы данных с разрешениями администратора и администраторы сервера — это не одно и тоже.
*  **Процесс** -пользователи могут подключаться tooand выполнения процесса операций в базе данных hello и анализировать данные модели базы данных.
*  **Чтение** -пользователи могут использовать клиент приложения tooconnect tooand анализ модели базы данных.

При создании проекта табличной модели, вы создаете роли и добавление пользователей или групп toothose ролей с помощью диспетчера ролей в SSDT. При развернутом tooa, с помощью SSMS [командлеты PowerShell для служб Analysis Services](https://msdn.microsoft.com/library/hh758425.aspx), или [языке скриптов табличных моделей](https://msdn.microsoft.com/library/mt614797.aspx) tooadd (TMSL) или удалить роли и члены пользователя.

## <a name="tooadd-or-manage-roles-and-users-in-ssdt"></a>tooadd или управления ролями и пользователями в SSDT  
  
1.  Выберите в SSDT **Обозреватель табличных моделей**, а затем щелкните правой кнопкой мыши **Роли**.  
  
2.  В **диспетчере ролей** нажмите кнопку **Создать**.  
  
3.  Введите имя для роли hello.  
  
     По умолчанию hello имя роли по умолчанию hello номер, последовательно увеличивающийся для каждой новой роли. Рекомендуется ввести имя, ясно определяющее тип члена hello, например, финансовые менеджеры или специалисты по кадрам.  
  
4.  Выберите один из hello следующие разрешения:  
  
    |Разрешение|Описание|  
    |----------------|-----------------|  
    |**None**|Члены не могут изменять схему модели hello и просматривать данные.|  
    |**чтение**|Члены могут запрашивать данные (с учетом фильтров строк), но не могут изменять схему модели hello.|  
    |**Чтение и обработка**|Члены могут запрашивать данные (на основе фильтров строк) и выполнения процесса и обработать все операции, но не могут изменять схему модели hello.|  
    |**Описание процесса**|Участники могут выполнять операции обработки и массовой обработки, Не могут изменять схему модели hello и просматривать данные.|  
    |**Администратор**|Члены могут изменять схему модели hello и просматривать все данные.|   
  
5.  При наличии роли hello Создание чтение или разрешение на чтение и процесса, можно добавить фильтры строк с помощью формулы DAX. Нажмите кнопку hello **фильтры строк** , а затем выберите таблицу, затем щелкните hello **фильтр DAX** поле, а затем введите формулу DAX.
  
6.  Щелкните **Участники** > **Добавить внешнего участника**.  
  
8.  В разделе **Добавить внешнего участника** введите пользователей или группы в клиенте Azure AD, указав адреса электронной почты. После того как вы нажмете кнопку "ОК" и закроете диспетчер ролей, роли и участники ролей появятся в обозревателе табличных моделей. 
 
     ![Роли и пользователи в обозревателе табличных моделей](./media/analysis-services-database-users/aas-roles-tmexplorer.png)

9. Развертывание сервера tooyour Azure Analysis Services.


## <a name="tooadd-or-manage-roles-and-users-in-ssms"></a>tooadd или управления ролями и пользователями в среде SSMS
роли и пользователи tooa tooadd развернутой базе данных модели, должны быть toohello подключенного сервера, администратор сервера или уже в роли базы данных с разрешениями администратора.

1. В обозревателе объекта щелкните правой кнопкой мыши **Роли** > **Новая роль**.

2. В области **Создание роли** введите имя и описание роли.

3. Выберите разрешение.
   |Разрешение|Описание|  
   |----------------|-----------------|  
   |**Полный доступ (администратор)**|Члены могут изменять схему модели hello, обработки и просматривать все данные.| 
   |**Обработка базы данных**|Участники могут выполнять операции обработки и массовой обработки, Не могут изменять схему модели hello и просматривать данные.|  
   |**чтение**|Члены могут запрашивать данные (с учетом фильтров строк), но не могут изменять схему модели hello.|  
  
4. Щелкните **Членство**, а затем введите пользователя или группу в клиенте Azure AD, указав адрес электронной почты.

     ![Добавить пользователя](./media/analysis-services-database-users/aas-roles-adduser-ssms.png)

5. Если hello роль, которую вы создаете имеет разрешение на чтение, можно добавить фильтры строк с помощью формулы DAX. Нажмите кнопку **фильтры строк**, выберите таблицу, а затем введите формулу DAX в hello **фильтр DAX** поля. 

## <a name="tooadd-roles-and-users-by-using-a-tmsl-script"></a>tooadd ролей и пользователей, используя сценарий TMSL
Можно выполнить сценарий TMSL в окно XMLA hello в SSMS или с помощью PowerShell. Используйте hello [CreateOrReplace](https://docs.microsoft.com/sql/analysis-services/tabular-models-scripting-language-commands/createorreplace-command-tmsl) команда и hello [ролей](https://docs.microsoft.com/sql/analysis-services/tabular-models-scripting-language-objects/roles-object-tmsl) объекта.

**Пример скрипта TMSL**

В этом образце внешнего пользователя B2B и группы добавляются toohello аналитик роли с разрешениями на чтение для базы данных SalesBI hello. Оба hello внешний пользователь и группа должна находиться в одном клиенте Azure AD.

```
{
  "createOrReplace": {
    "object": {
      "database": "SalesBI",
      "role": "Analyst"
    },
    "role": {
      "name": "Users",
      "description": "All allowed users tooquery hello model",
      "modelPermission": "read",
      "members": [
        {
          "memberName": "user1@contoso.com",
          "identityProvider": "AzureAD"
        },
        {
          "memberName": "group1@adventureworks.com",
          "identityProvider": "AzureAD"
        }
      ]
    }
  }
}
```

## <a name="tooadd-roles-and-users-by-using-powershell"></a>tooadd ролей и пользователей с помощью PowerShell
Hello [SqlServer](https://msdn.microsoft.com/library/hh758425.aspx) модуль предоставляет базы данных для определенных задач управления командлеты и hello общего назначения командлета Invoke-ASCmd, принимающий запроса табличной языка скриптов модели (TMSL) или сценария. Hello следующие командлеты используются для управления ролями базы данных и пользователей.
  
|Командлет|Описание|
|------------|-----------------| 
|[Add-RoleMember](https://msdn.microsoft.com/library/hh510167.aspx)|Добавьте роль члена tooa базы данных.| 
|[Remove-RoleMember](https://msdn.microsoft.com/library/hh510173.aspx)|Удаление участника из роли базы данных.|   
|[Invoke-ASCmd](https://msdn.microsoft.com/library/hh479579.aspx)|Выполнение сценария TMSL.|

## <a name="row-filters"></a>Фильтры строк  
Фильтры строк определяют, какие строки в таблице могут запросить участники определенной роли. Фильтры строк определяются для каждой таблицы в модели с помощью формул DAX.  
  
Они могут быть определены только для ролей с разрешениями "Чтение" и "Чтение и обработка". По умолчанию Если фильтр строк не задан для конкретной таблицы, члены могут просматривать все строки в таблице hello Если перекрестная фильтрация применяется из другой таблицы.
  
 Фильтры строк требуется формулу DAX, которое должно вычисляться tooa значение TRUE или FALSE, toodefine hello строк, которые могут запрашиваться членами этой роли. Не удается запросить строки, не включенные в формулу DAX hello. Например, hello таблицы Customers с hello, следующее выражение фильтры строк, *= клиентов [Страна] = «США»*, члены роли Sales hello распознает только клиентов из США hello.  
  
Фильтры строк применяются toohello указан строк и строк. Если таблица содержит несколько связей, фильтры применяют защиту hello связи, которая является активной. Фильтры строк пересекаются с другими фильтрами строк, определенными для связанных таблиц, например:  
  
|Таблица|Выражение DAX|  
|-----------|--------------------|  
|Регион|=Region[Country]=”USA”|  
|Категория продукта|=ProductCategory[Name]=”Bicycles”|  
|Транзакции|=Transactions[Year]=2016|  
  
 Hello итоге получается, что члены можно запросить строк данных, где hello клиенты находятся в США hello, hello Категория продуктов — велосипеды, а год hello — 2016. Пользователи не могут запрашивать транзакции за пределами США hello транзакции, которые не велосипедов и транзакции не 2016 если они не являются членами другой роли, которая предоставляет такие разрешения.
  
 Можно использовать фильтр hello *=FALSE()*, toodeny доступ tooall строк для всей таблицы.

## <a name="next-steps"></a>Дальнейшие действия
  [Управление администраторами сервера](analysis-services-server-admins.md)   
  [Управление службами Azure Analysis Services с помощью PowerShell](analysis-services-powershell.md)  
  [Справочник по языку TMSL](https://docs.microsoft.com/sql/analysis-services/tabular-model-scripting-language-tmsl-reference)

