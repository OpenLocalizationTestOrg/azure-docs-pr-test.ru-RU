---
<span data-ttu-id="e7620-101">Заголовок: aaa» Azure Analysis Services tutorial занятия 4: Создание связей | Документы Microsoft» Описание: описание, как связи toocreate в hello проекта tutorial служб Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="e7620-101">title: aaa"Azure Analysis Services tutorial lesson 4: Create relationships | Microsoft Docs" description: Describes how toocreate relationships in hello Azure Analysis Services tutorial project.</span></span> <span data-ttu-id="e7620-102">службы: documentationcenter служб analysis services: '' Автор: диспетчер minewiskan: редактор erikre: '' теги: ''</span><span class="sxs-lookup"><span data-stu-id="e7620-102">services: analysis-services documentationcenter: '' author: minewiskan manager: erikre editor: '' tags: ''</span></span>

<span data-ttu-id="e7620-103">MS.AssetId: ms.service: ms.devlang служб analysis services: н/д ms.topic: get-started-article ms.tgt_pltfrm: ms.workload н/д: н/д ms.date: 26/05/2017 ms.author: owend</span><span class="sxs-lookup"><span data-stu-id="e7620-103">ms.assetid: ms.service: analysis-services ms.devlang: NA ms.topic: get-started-article ms.tgt_pltfrm: NA ms.workload: na ms.date: 05/26/2017 ms.author: owend</span></span>
---
# <a name="lesson-4-create-relationships"></a><span data-ttu-id="e7620-104">Занятие 4. Создание связей</span><span class="sxs-lookup"><span data-stu-id="e7620-104">Lesson 4: Create relationships</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="e7620-105">На этом занятии проверьте hello связи, которые были автоматически созданы во время импорта данных и добавить новые связи между различными таблицами.</span><span class="sxs-lookup"><span data-stu-id="e7620-105">In this lesson, you verify hello relationships that were created automatically when you imported data and add new relationships between different tables.</span></span> <span data-ttu-id="e7620-106">Связь — это соединение между двумя таблицами, которое определяет, каким образом должны соотноситься данные этих таблиц hello.</span><span class="sxs-lookup"><span data-stu-id="e7620-106">A relationship is a connection between two tables that establishes how hello data in those tables should be correlated.</span></span> <span data-ttu-id="e7620-107">Например таблица hello DimProduct и таблица DimProductSubcategory hello иметь связи, в зависимости от hello факт, что каждый продукт принадлежит подкатегории tooa.</span><span class="sxs-lookup"><span data-stu-id="e7620-107">For example, hello DimProduct table and hello DimProductSubcategory table have a relationship based on hello fact that each product belongs tooa subcategory.</span></span> <span data-ttu-id="e7620-108">toolearn более, в разделе [связи](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span><span class="sxs-lookup"><span data-stu-id="e7620-108">toolearn more, see [Relationships](https://docs.microsoft.com/sql/analysis-services/tabular-models/relationships-ssas-tabular).</span></span>
  
<span data-ttu-id="e7620-109">Предполагаемое время toocomplete на этом занятии: **10 минут**</span><span class="sxs-lookup"><span data-stu-id="e7620-109">Estimated time toocomplete this lesson: **10 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="e7620-110">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="e7620-110">Prerequisites</span></span>  
<span data-ttu-id="e7620-111">Этот раздел входит в учебник по табличному моделированию, который следует изучать в предложенном порядке.</span><span class="sxs-lookup"><span data-stu-id="e7620-111">This topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="e7620-112">Перед выполнением задачи hello на этом занятии, необходимо завершить предыдущее занятие hello: [занятия 3: пометить как таблицу дат](../tutorials/aas-lesson-3-mark-as-date-table.md).</span><span class="sxs-lookup"><span data-stu-id="e7620-112">Before performing hello tasks in this lesson, you should have completed hello previous lesson: [Lesson 3: Mark as Date Table](../tutorials/aas-lesson-3-mark-as-date-table.md).</span></span> 
  
## <a name="review-existing-relationships-and-add-new-relationships"></a><span data-ttu-id="e7620-113">Просмотр существующих и добавление новых связей</span><span class="sxs-lookup"><span data-stu-id="e7620-113">Review existing relationships and add new relationships</span></span>  
<span data-ttu-id="e7620-114">Во время импорта данных с помощью получения данных, полученный семь таблиц из базы данных AdventureWorksDW2014 hello.</span><span class="sxs-lookup"><span data-stu-id="e7620-114">When you imported data by using Get Data, you got seven tables from hello AdventureWorksDW2014 database.</span></span> <span data-ttu-id="e7620-115">Как правило при импорте данных из реляционного источника существующие связи автоматически импортируются вместе с данными hello.</span><span class="sxs-lookup"><span data-stu-id="e7620-115">Generally, when you import data from a relational source, existing relationships are automatically imported together with hello data.</span></span> <span data-ttu-id="e7620-116">Однако прежде чем продолжить создание модели, нужно убедиться, что эти связи между таблицами созданы правильно.</span><span class="sxs-lookup"><span data-stu-id="e7620-116">However, before you proceed with authoring your model you should verify those relationships between tables were created properly.</span></span> <span data-ttu-id="e7620-117">В этом руководстве вы добавите три новых связи.</span><span class="sxs-lookup"><span data-stu-id="e7620-117">For this tutorial, you add three new relationships.</span></span>  
  
#### <a name="tooreview-existing-relationships"></a><span data-ttu-id="e7620-118">tooreview существующих связей</span><span class="sxs-lookup"><span data-stu-id="e7620-118">tooreview existing relationships</span></span>  
  
1.  <span data-ttu-id="e7620-119">Нажмите кнопку hello **модель** меню > **представление модели** > **представление диаграммы**.</span><span class="sxs-lookup"><span data-stu-id="e7620-119">Click hello **Model** menu > **Model View** > **Diagram View**.</span></span>  

    <span data-ttu-id="e7620-120">Hello конструктор моделей появится в представлении диаграммы — графическом формате отображения всех таблиц hello импортированные линиями.</span><span class="sxs-lookup"><span data-stu-id="e7620-120">hello model designer now appears in Diagram View, a graphical format displaying all hello tables you imported with lines between them.</span></span> <span data-ttu-id="e7620-121">Hello линии между таблицами указывают hello связей, которые были автоматически созданы во время импорта данных hello.</span><span class="sxs-lookup"><span data-stu-id="e7620-121">hello lines between tables indicate hello relationships that were automatically created when you imported hello data.</span></span>
    
    ![aas-lesson4-diagram](../tutorials/media/aas-lesson4-diagram.png)
  
    <span data-ttu-id="e7620-123">Включите любое количество hello таблиц можно с помощью мини-карту элементов управления в hello правом нижнем углу конструктора моделей hello.</span><span class="sxs-lookup"><span data-stu-id="e7620-123">Include as many of hello tables as possible by using minimap controls in hello lower-right corner of hello model designer.</span></span> <span data-ttu-id="e7620-124">Кроме того, можно также щелкнуть и перетащить расположения toodifferent таблиц, свести вместе или разместить их в определенном порядке.</span><span class="sxs-lookup"><span data-stu-id="e7620-124">You can also click and drag tables toodifferent locations, bringing tables closer together, or putting them in a particular order.</span></span> <span data-ttu-id="e7620-125">Перемещение таблиц не влияет на hello связи между таблицами hello.</span><span class="sxs-lookup"><span data-stu-id="e7620-125">Moving tables does not affect hello relationships already between hello tables.</span></span> <span data-ttu-id="e7620-126">tooview все столбцы hello в определенной таблице щелкните и перетащите край таблицы tooexpand или уменьшить ее.</span><span class="sxs-lookup"><span data-stu-id="e7620-126">tooview all hello columns in a particular table, click and drag on a table edge tooexpand or make it smaller.</span></span>  
  
2.  <span data-ttu-id="e7620-127">Нажмите кнопку hello сплошную линию между hello **DimCustomer** таблицы и hello **DimGeography** таблицы.</span><span class="sxs-lookup"><span data-stu-id="e7620-127">Click hello solid line between hello **DimCustomer** table and hello **DimGeography** table.</span></span> <span data-ttu-id="e7620-128">Hello сплошная линия между этими двумя таблицами показывает, что связь активна, то есть, он используется по умолчанию при расчете DAX-формул.</span><span class="sxs-lookup"><span data-stu-id="e7620-128">hello solid line between these two tables shows this relationship is active, that is, it is used by default when calculating DAX formulas.</span></span>  
  
    <span data-ttu-id="e7620-129">Уведомление hello **GeographyKey** столбца в hello **DimCustomer** таблицы и hello **GeographyKey** столбца в hello **DimGeography** таблицы появились в поле.</span><span class="sxs-lookup"><span data-stu-id="e7620-129">Notice hello **GeographyKey** column in hello **DimCustomer** table and hello **GeographyKey** column in hello **DimGeography** table now both each appear within a box.</span></span> <span data-ttu-id="e7620-130">Эти столбцы используются в отношении hello.</span><span class="sxs-lookup"><span data-stu-id="e7620-130">These columns are used in hello relationship.</span></span> <span data-ttu-id="e7620-131">Hello свойства связи также отображаются в hello **свойства** окна.</span><span class="sxs-lookup"><span data-stu-id="e7620-131">hello relationship’s properties now also appear in hello **Properties** window.</span></span>  
  
    > [!TIP]  
    > <span data-ttu-id="e7620-132">В дополнение к этому toousing Здравствуйте конструктора моделей в представлении диаграммы, можно также использовать hello управление связями диалогового окна поле tooshow hello связей между всеми таблицами в табличном формате.</span><span class="sxs-lookup"><span data-stu-id="e7620-132">In addition toousing hello model designer in diagram view, you can also use hello Manage Relationships dialog box tooshow hello relationships between all tables in a table format.</span></span> <span data-ttu-id="e7620-133">В обозревателе табличных моделей щелкните правой кнопкой мыши **Связи** > **Управление связями**.</span><span class="sxs-lookup"><span data-stu-id="e7620-133">In Tabular Model Explorer, right-click **Relationships** > **Manage Relationships**.</span></span>
  
3.  <span data-ttu-id="e7620-134">Проверьте hello следующие связи были созданы во время каждой из таблиц hello были импортированы из базы данных AdventureWorksDW hello:</span><span class="sxs-lookup"><span data-stu-id="e7620-134">Verify hello following relationships were created when each of hello tables were imported from hello AdventureWorksDW database:</span></span>  
  
    |<span data-ttu-id="e7620-135">Активна</span><span class="sxs-lookup"><span data-stu-id="e7620-135">Active</span></span>|<span data-ttu-id="e7620-136">Таблица</span><span class="sxs-lookup"><span data-stu-id="e7620-136">Table</span></span>|<span data-ttu-id="e7620-137">Соответствующая таблица подстановки</span><span class="sxs-lookup"><span data-stu-id="e7620-137">Related Lookup Table</span></span>|  
    |----------|---------|------------------------|  
    |<span data-ttu-id="e7620-138">Да</span><span class="sxs-lookup"><span data-stu-id="e7620-138">Yes</span></span>|<span data-ttu-id="e7620-139">**DimCustomer [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="e7620-139">**DimCustomer [GeographyKey]**</span></span>|<span data-ttu-id="e7620-140">**DimGeography [GeographyKey]**</span><span class="sxs-lookup"><span data-stu-id="e7620-140">**DimGeography [GeographyKey]**</span></span>|  
    |<span data-ttu-id="e7620-141">Да</span><span class="sxs-lookup"><span data-stu-id="e7620-141">Yes</span></span>|<span data-ttu-id="e7620-142">**DimProduct [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="e7620-142">**DimProduct [ProductSubcategoryKey]**</span></span>|<span data-ttu-id="e7620-143">**DimProductSubcategory [ProductSubcategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="e7620-143">**DimProductSubcategory [ProductSubcategoryKey]**</span></span>|  
    |<span data-ttu-id="e7620-144">Да</span><span class="sxs-lookup"><span data-stu-id="e7620-144">Yes</span></span>|<span data-ttu-id="e7620-145">**DimProductSubcategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="e7620-145">**DimProductSubcategory [ProductCategoryKey]**</span></span>|<span data-ttu-id="e7620-146">**DimProductCategory [ProductCategoryKey]**</span><span class="sxs-lookup"><span data-stu-id="e7620-146">**DimProductCategory [ProductCategoryKey]**</span></span>|  
    |<span data-ttu-id="e7620-147">Да</span><span class="sxs-lookup"><span data-stu-id="e7620-147">Yes</span></span>|<span data-ttu-id="e7620-148">**FactInternetSales [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="e7620-148">**FactInternetSales [CustomerKey]**</span></span>|<span data-ttu-id="e7620-149">**DimCustomer [CustomerKey]**</span><span class="sxs-lookup"><span data-stu-id="e7620-149">**DimCustomer [CustomerKey]**</span></span>|  
    |<span data-ttu-id="e7620-150">Да</span><span class="sxs-lookup"><span data-stu-id="e7620-150">Yes</span></span>|<span data-ttu-id="e7620-151">**FactInternetSales [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="e7620-151">**FactInternetSales [ProductKey]**</span></span>|<span data-ttu-id="e7620-152">**DimProduct [ProductKey]**</span><span class="sxs-lookup"><span data-stu-id="e7620-152">**DimProduct [ProductKey]**</span></span>|  
  
    <span data-ttu-id="e7620-153">Если какие-либо связи hello отсутствуют, убедитесь, что модель включает следующие таблицы hello: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory DimProductSubcategory и FactInternetSales.</span><span class="sxs-lookup"><span data-stu-id="e7620-153">If any of hello relationships are missing, verify that your model includes hello following tables: DimCustomer, DimDate, DimGeography, DimProduct, DimProductCategory, DimProductSubcategory, and FactInternetSales.</span></span> <span data-ttu-id="e7620-154">Если таблицы из одного подключения к источнику данных, импортируются в hello отдельные раз, все связи между этими таблицами не создаются и должны быть созданы вручную.</span><span class="sxs-lookup"><span data-stu-id="e7620-154">If tables from hello same data source connection are imported at separate times, any relationships between those tables are not be created and must be created manually.</span></span>  

### <a name="take-a-closer-look"></a><span data-ttu-id="e7620-155">Более подробный взгляд</span><span class="sxs-lookup"><span data-stu-id="e7620-155">Take a closer look</span></span>
<span data-ttu-id="e7620-156">В представлении диаграммы Обратите внимание, стрелки, звездочку и номер на линии hello, указывающие hello связи между таблицами.</span><span class="sxs-lookup"><span data-stu-id="e7620-156">In Diagram View, notice an arrow, an asterisk, and a number on hello lines that show hello relationship between tables.</span></span>

![aas-lesson4-line](../tutorials/media/aas-lesson4-line.png)

<span data-ttu-id="e7620-158">Hello стрелка показывает направление фильтрации hello.</span><span class="sxs-lookup"><span data-stu-id="e7620-158">hello arrow shows hello filter direction.</span></span> <span data-ttu-id="e7620-159">звездочка Hello показывает, что эта таблица будет hello стороне многие в количество элементов связи hello и hello один показывает, что эта таблица составляет hello одной стороны связи "hello".</span><span class="sxs-lookup"><span data-stu-id="e7620-159">hello asterisk shows this table is hello many side in hello relationship's cardinality, and hello one shows this table is hello one side of hello relationship.</span></span> <span data-ttu-id="e7620-160">Если вам требуется tooedit связь. Например измените направление фильтрации hello отношение или количество элементов, дважды щелкните диалоговое окно Изменение связи hello tooopen в строки связь hello.</span><span class="sxs-lookup"><span data-stu-id="e7620-160">If you need tooedit a relationship; for example, change hello relationship's filter direction or cardinality, double-click hello relationship line tooopen hello Edit Relationship dialog.</span></span>

![aas-lesson4-edit](../tutorials/media/aas-lesson4-edit.png)

<span data-ttu-id="e7620-162">Эти функции предназначены для моделирования данных и находящиеся вне области видимости hello этого учебника.</span><span class="sxs-lookup"><span data-stu-id="e7620-162">These features are meant for advanced data modeling and are outside hello scope of this tutorial.</span></span> <span data-ttu-id="e7620-163">toolearn более, в разделе [двунаправленные кросс-фильтры для табличных моделей в службах Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span><span class="sxs-lookup"><span data-stu-id="e7620-163">toolearn more, see [Bi-directional cross filters for tabular models in Analysis Services](https://docs.microsoft.com/sql/analysis-services/tabular-models/bi-directional-cross-filters-tabular-models-analysis-services).</span></span>

<span data-ttu-id="e7620-164">В некоторых случаях может потребоваться toocreate дополнительных связей между таблицами в вашей модели toosupport определенную бизнес-логику.</span><span class="sxs-lookup"><span data-stu-id="e7620-164">In some cases, you may need toocreate additional relationships between tables in your model toosupport certain business logic.</span></span> <span data-ttu-id="e7620-165">В этом учебнике требуется toocreate три дополнительные связи между таблицами FactInternetSales hello и таблицы DimDate hello.</span><span class="sxs-lookup"><span data-stu-id="e7620-165">For this tutorial, you need toocreate three additional relationships between hello FactInternetSales table and hello DimDate table.</span></span>  
  
#### <a name="tooadd-new-relationships-between-tables"></a><span data-ttu-id="e7620-166">tooadd новых связей между таблицами</span><span class="sxs-lookup"><span data-stu-id="e7620-166">tooadd new relationships between tables</span></span>  
  
1.  <span data-ttu-id="e7620-167">В конструкторе моделей hello в hello **FactInternetSales** таблицы, нажмите и удерживайте на hello **OrderDate** столбца, а затем перетащите hello курсор toohello **даты** столбца в hello  **DimDate** таблицы, а затем отпустите.</span><span class="sxs-lookup"><span data-stu-id="e7620-167">In hello model designer, in hello **FactInternetSales** table, click, and hold on hello **OrderDate** column, then drag hello cursor toohello **Date** column in hello **DimDate** table, and then release.</span></span>  

    <span data-ttu-id="e7620-168">Появится сплошная линия, показывающая создана активная связь между hello **OrderDate** столбца в hello **продажи через Интернет** таблицы и hello **даты** столбца в hello **Даты** таблицы.</span><span class="sxs-lookup"><span data-stu-id="e7620-168">A solid line appears showing you have created an active relationship between hello **OrderDate** column in hello **Internet Sales** table, and hello **Date** column in hello **Date** table.</span></span> 
  
      ![aas-lesson4-new](../tutorials/media/aas-lesson4-new.png) 
  
    > [!NOTE]  
    > <span data-ttu-id="e7620-170">При создании связи, hello количества элементов и фильтр направлении между первичной таблицей hello и hello связанная таблица подстановки выбирается автоматически.</span><span class="sxs-lookup"><span data-stu-id="e7620-170">When creating relationships, hello cardinality and filter direction between hello primary table and hello related lookup table is automatically selected.</span></span>  
  
2.  <span data-ttu-id="e7620-171">В hello **FactInternetSales** щелкните и удерживайте hello **DueDate** столбца, а затем перетащите hello курсор toohello **даты** столбца в hello **DimDate** таблицы, а затем отпустите.</span><span class="sxs-lookup"><span data-stu-id="e7620-171">In hello **FactInternetSales** table, click and hold on hello **DueDate** column, then drag hello cursor toohello **Date** column in hello **DimDate** table, and then release.</span></span>  
  
    <span data-ttu-id="e7620-172">Появится пунктирная линия, показывающая создана неактивная связь между hello **DueDate** столбца в hello **FactInternetSales** таблицы и hello **даты** столбца Hello **DimDate** таблицы.</span><span class="sxs-lookup"><span data-stu-id="e7620-172">A dotted line appears showing you have created an inactive relationship between hello **DueDate** column in hello **FactInternetSales** table, and hello **Date** column in hello **DimDate** table.</span></span> <span data-ttu-id="e7620-173">Можно использовать несколько связей между таблицами, но одновременно может быть активна только одна из них.</span><span class="sxs-lookup"><span data-stu-id="e7620-173">You can have multiple relationships between tables, but only one relationship can be active at a time.</span></span> <span data-ttu-id="e7620-174">Неактивные связи можно сделать агрегаты специальные active tooperform пользовательских выражений DAX.</span><span class="sxs-lookup"><span data-stu-id="e7620-174">Inactive relationships can be made active tooperform special aggregations in custom DAX expressions.</span></span>  
  
3.  <span data-ttu-id="e7620-175">Теперь создайте еще одну связь.</span><span class="sxs-lookup"><span data-stu-id="e7620-175">Finally, create one more relationship.</span></span> <span data-ttu-id="e7620-176">В hello **FactInternetSales** щелкните и удерживайте hello **ShipDate** столбца, а затем перетащите hello курсор toohello **даты** столбца в hello **DimDate** таблицы, а затем отпустите.</span><span class="sxs-lookup"><span data-stu-id="e7620-176">In hello **FactInternetSales** table, click and hold on hello **ShipDate** column, then drag hello cursor toohello **Date** column in hello **DimDate** table, and then release.</span></span>  
    
     ![aas-lesson4-newinactive](../tutorials/media/aas-lesson4-newinactive.png)
  
## <a name="whats-next"></a><span data-ttu-id="e7620-178">Что дальше?</span><span class="sxs-lookup"><span data-stu-id="e7620-178">What's next?</span></span>
<span data-ttu-id="e7620-179">[Занятие 5. Создание вычисляемых столбцов](../tutorials/aas-lesson-5-create-calculated-columns.md).</span><span class="sxs-lookup"><span data-stu-id="e7620-179">[Lesson 5: Create calculated columns](../tutorials/aas-lesson-5-create-calculated-columns.md).</span></span>
  
  
  
