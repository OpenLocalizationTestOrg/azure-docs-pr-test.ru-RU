---
title: "обработки Общие сведения об архитектуре сообщений Service Bus aaaAzure | Документы Microsoft"
description: "Содержит описание архитектуры обработки сообщения hello Azure Service Bus."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: baf94c2d-0e58-4d5d-a588-767f996ccf7f
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: f7606e40cdf6db3797a0db2de9365453ff2a158e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-architecture"></a><span data-ttu-id="52053-103">Архитектура служебной шины</span><span class="sxs-lookup"><span data-stu-id="52053-103">Service Bus architecture</span></span>
<span data-ttu-id="52053-104">В этой статье описывается архитектура обработки сообщений hello Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="52053-104">This article describes hello message processing architecture of Azure Service Bus.</span></span>

## <a name="service-bus-scale-units"></a><span data-ttu-id="52053-105">Единицы масштабирования служебной шины</span><span class="sxs-lookup"><span data-stu-id="52053-105">Service Bus scale units</span></span>
<span data-ttu-id="52053-106">Содержимое служебной шины упорядочено по *единицам масштабирования*.</span><span class="sxs-lookup"><span data-stu-id="52053-106">Service Bus is organized by *scale units*.</span></span> <span data-ttu-id="52053-107">Единицы масштабирования — это единица развертывания и содержит все необходимые выполнения hello службы компонентов.</span><span class="sxs-lookup"><span data-stu-id="52053-107">A scale unit is a unit of deployment and contains all components required run hello service.</span></span> <span data-ttu-id="52053-108">Для каждой области развертывается одна или несколько единиц масштабирования служебной шины.</span><span class="sxs-lookup"><span data-stu-id="52053-108">Each region deploys one or more Service Bus scale units.</span></span>

<span data-ttu-id="52053-109">Пространство имен служебной шины — сопоставленных tooa единица масштабирования.</span><span class="sxs-lookup"><span data-stu-id="52053-109">A Service Bus namespace is mapped tooa scale unit.</span></span> <span data-ttu-id="52053-110">Единица масштабирования Hello обрабатывает все типы объектов Service Bus (очереди, разделы, подписки).</span><span class="sxs-lookup"><span data-stu-id="52053-110">hello scale unit handles all types of Service Bus entities (queues, topics, subscriptions).</span></span> <span data-ttu-id="52053-111">Единицы масштабирования Service Bus состоит из следующих компонентов hello.</span><span class="sxs-lookup"><span data-stu-id="52053-111">A Service Bus scale unit consists of hello following components:</span></span>

* <span data-ttu-id="52053-112">**Набор узлов шлюза.**</span><span class="sxs-lookup"><span data-stu-id="52053-112">**A set of gateway nodes.**</span></span> <span data-ttu-id="52053-113">Узлы шлюза проверяют подлинность входящих запросов.</span><span class="sxs-lookup"><span data-stu-id="52053-113">Gateway nodes authenticate incoming requests.</span></span> <span data-ttu-id="52053-114">У каждого узла шлюза есть общедоступный IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="52053-114">Each gateway node has a public IP address.</span></span>
* <span data-ttu-id="52053-115">**Набор узлов брокера сообщений.**</span><span class="sxs-lookup"><span data-stu-id="52053-115">**A set of messaging broker nodes.**</span></span> <span data-ttu-id="52053-116">Узлы брокера сообщений обрабатывают запросы к сущностям обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="52053-116">Messaging broker nodes process requests concerning messaging entities.</span></span>
* <span data-ttu-id="52053-117">**Единое хранилище шлюза.**</span><span class="sxs-lookup"><span data-stu-id="52053-117">**One gateway store.**</span></span> <span data-ttu-id="52053-118">хранилище шлюза Hello содержит hello данные для каждой сущности, определенные в этой единице масштабирования.</span><span class="sxs-lookup"><span data-stu-id="52053-118">hello gateway store holds hello data for every entity that is defined in this scale unit.</span></span> <span data-ttu-id="52053-119">хранилище шлюза Hello реализована на основе базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="52053-119">hello gateway store is implemented on top of a SQL Azure database.</span></span>
* <span data-ttu-id="52053-120">**Несколько хранилищ сообщений.**</span><span class="sxs-lookup"><span data-stu-id="52053-120">**Multiple messaging stores.**</span></span> <span data-ttu-id="52053-121">Хранилищам сообщений хранения сообщений hello всех очередей, разделов и подписок, которые определены в этой единице масштабирования.</span><span class="sxs-lookup"><span data-stu-id="52053-121">Messaging stores hold hello messages of all queues, topics and subscriptions that are defined in this scale unit.</span></span> <span data-ttu-id="52053-122">Здесь же хранятся все данные подписки.</span><span class="sxs-lookup"><span data-stu-id="52053-122">It also contains all subscription data.</span></span> <span data-ttu-id="52053-123">Если не [секционирование сущностей обмена сообщениями](service-bus-partitioning.md) является включение, очередь или раздел является сопоставленных tooone хранилище сообщений.</span><span class="sxs-lookup"><span data-stu-id="52053-123">Unless [partitioning messaging entities](service-bus-partitioning.md) is enabled, a queue or topic is mapped tooone messaging store.</span></span> <span data-ttu-id="52053-124">Подписки хранятся в hello одно хранилище обмена сообщениями, как их родительским разделом.</span><span class="sxs-lookup"><span data-stu-id="52053-124">Subscriptions are stored in hello same messaging store as their parent topic.</span></span> <span data-ttu-id="52053-125">За исключением Service Bus [отправка сообщений Premium](service-bus-premium-messaging.md), хранилищам сообщений hello реализуются на основе баз данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="52053-125">Except for Service Bus [Premium Messaging](service-bus-premium-messaging.md), hello messaging stores are implemented on top of SQL Azure databases.</span></span>

## <a name="containers"></a><span data-ttu-id="52053-126">Контейнеры</span><span class="sxs-lookup"><span data-stu-id="52053-126">Containers</span></span>
<span data-ttu-id="52053-127">Каждой сущности обмена сообщениями назначается определенный контейнер.</span><span class="sxs-lookup"><span data-stu-id="52053-127">Each messaging entity is assigned a specific container.</span></span> <span data-ttu-id="52053-128">Контейнер — это логическая конструкция, использующего только один обмена сообщениями toostore хранилища все необходимые данные для этого контейнера.</span><span class="sxs-lookup"><span data-stu-id="52053-128">A container is a logical construct that uses exactly one messaging store toostore all relevant data for this container.</span></span> <span data-ttu-id="52053-129">Каждый контейнер назначается tooa узел брокера обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="52053-129">Each container is assigned tooa messaging broker node.</span></span> <span data-ttu-id="52053-130">Обычно контейнеров больше, чем узлов брокера сообщений.</span><span class="sxs-lookup"><span data-stu-id="52053-130">Typically, there are more containers than messaging broker nodes.</span></span> <span data-ttu-id="52053-131">Таким образом, каждый узел брокера сообщений загружает несколько контейнеров.</span><span class="sxs-lookup"><span data-stu-id="52053-131">Therefore, each messaging broker node loads multiple containers.</span></span> <span data-ttu-id="52053-132">распределение узлов брокера обмена сообщениями tooa контейнеры Hello организована таким образом, что все узлы брокера для обмена сообщениями одинаково загружаются.</span><span class="sxs-lookup"><span data-stu-id="52053-132">hello distribution of containers tooa messaging broker node is organized such that all messaging broker nodes are equally loaded.</span></span> <span data-ttu-id="52053-133">Если изменение шаблона нагрузки hello (например, один из возвращает контейнеры hello очень занят) или если узла брокера обмена сообщениями становится временно недоступным hello контейнеры перераспределяются между hello, узлы брокера обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="52053-133">If hello load pattern changes (for example, one of hello containers gets very busy), or if a messaging broker node becomes temporarily unavailable, hello containers are redistributed among hello messaging broker nodes.</span></span>

## <a name="processing-of-incoming-messaging-requests"></a><span data-ttu-id="52053-134">Обработка входящих запросов обмена сообщениями</span><span class="sxs-lookup"><span data-stu-id="52053-134">Processing of incoming messaging requests</span></span>
<span data-ttu-id="52053-135">Когда клиент отправляет запрос tooService шины, hello балансировки нагрузки Azure направляет его tooany узлов шлюза hello.</span><span class="sxs-lookup"><span data-stu-id="52053-135">When a client sends a request tooService Bus, hello Azure load balancer routes it tooany of hello gateway nodes.</span></span> <span data-ttu-id="52053-136">узел шлюза Hello авторизацию hello запроса.</span><span class="sxs-lookup"><span data-stu-id="52053-136">hello gateway node authorizes hello request.</span></span> <span data-ttu-id="52053-137">Если запрос hello касается сущности обмена сообщениями (очередь, раздел, подписка), узел шлюза hello ищет hello объекта в хранилище шлюза hello и определяет, в какой сообщений hello хранилища находится сущность.</span><span class="sxs-lookup"><span data-stu-id="52053-137">If hello request concerns a messaging entity (queue, topic, subscription), hello gateway node looks up hello entity in hello gateway store and determines in which messaging store hello entity is located.</span></span> <span data-ttu-id="52053-138">Затем он ищет обмена сообщениями узла брокера, обрабатываемых в настоящее время этот контейнер и отправляет запрос toothat hello, узел брокера обмена сообщениями.</span><span class="sxs-lookup"><span data-stu-id="52053-138">It then looks up which messaging broker node is currently servicing this container, and sends hello request toothat messaging broker node.</span></span> <span data-ttu-id="52053-139">узел брокера обмена сообщениями Hello обрабатывает запрос hello и обновляет состояние сущности hello в хранилище контейнера hello.</span><span class="sxs-lookup"><span data-stu-id="52053-139">hello messaging broker node processes hello request and updates hello entity state in hello container store.</span></span> <span data-ttu-id="52053-140">узел брокера обмена сообщениями, затем Hello отправляет hello ответ назад toohello шлюза узел, который отправляет первоначальный запрос, выданный hello клиент обратной toohello соответствующий ответ.</span><span class="sxs-lookup"><span data-stu-id="52053-140">hello messaging broker node then sends hello response back toohello gateway node, which sends an appropriate response back toohello client that issued hello original request.</span></span>

![Обработка входящих запросов обмена сообщениями](./media/service-bus-architecture/ic690644.png)

## <a name="next-steps"></a><span data-ttu-id="52053-142">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="52053-142">Next steps</span></span>
<span data-ttu-id="52053-143">Теперь, когда вы прочитали Обзор архитектуры Service Bus, посетите hello следующие ссылки на дополнительные сведения:</span><span class="sxs-lookup"><span data-stu-id="52053-143">Now that you've read an overview of Service Bus architecture, visit hello following links for more information:</span></span>

* [<span data-ttu-id="52053-144">Основные сведения об обмене сообщениями через служебную шину</span><span class="sxs-lookup"><span data-stu-id="52053-144">Service Bus messaging overview</span></span>](service-bus-messaging-overview.md)
* [<span data-ttu-id="52053-145">Базовая информация о Service Bus</span><span class="sxs-lookup"><span data-stu-id="52053-145">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="52053-146">Решение для обмена сообщениями в очередях с помощью очередей служебной шины</span><span class="sxs-lookup"><span data-stu-id="52053-146">A queued messaging solution using Service Bus queues</span></span>](service-bus-dotnet-multi-tier-app-using-service-bus-queues.md)


