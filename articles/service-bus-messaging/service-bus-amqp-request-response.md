---
title: "aaaAMQP 1.0 в операциях запроса ответа на основе Azure Service Bus | Документы Microsoft"
description: "Список операций с запросами и ответами в служебной шине Microsoft Azure."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/27/2017
ms.author: sethm
ms.openlocfilehash: e4f26219c53b0c4172747af683fe511d6366ff2d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="amqp-10-in-microsoft-azure-service-bus-request-response-based-operations"></a>AMQP 1.0 в служебной шине Microsoft Azure: операции c запросами и ответами

В этом разделе определяет список hello Microsoft Azure Service Bus на базе запроса/ответа операции. Эти сведения основан на рабочим эскизом hello AMQP управления версии 1.0.  
  
Дополнительные транспортного уровня AMQP 1.0 протокола инструкции, которая объясняет, как Service Bus реализует и лежит hello Техническая спецификация OASIS AMQP, в разделе hello [AMQP 1.0 в Azure Service Bus и концентраторы событий руководстве протокол](service-bus-amqp-protocol-guide.md).  
  
## <a name="concepts"></a>Основные понятия  
  
### <a name="entity-description"></a>Описание сущности  

Описание сущности ссылается tooeither Service Bus [класс QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription), [класса TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription), или [SubscriptionDescription класс](/dotnet/api/microsoft.servicebus.messaging.subscriptiondescription) объекта.  
  
### <a name="brokered-message"></a>Сообщение в брокере  

Представляет сообщение в Service Bus, которой сопоставленных tooan сообщение AMQP. сопоставление Hello определяется в hello [руководство по Service Bus AMQP протокола](service-bus-amqp-protocol-guide.md).  
  
## <a name="attach-tooentity-management-node"></a>Подключите узел управления tooentity  

Все операции hello, описанные в этом документе следовали шаблону запрос ответ, являются области tooan сущность и требуется присоединение узла управления tooan сущность.  
  
### <a name="create-link-for-sending-requests"></a>Создание ссылки для отправки запросов  

Создает узел управления toohello ссылка для отправки запросов.  
  
```  
requestLink = session.attach(     
role: SENDER,   
    target: { address: "<entity address>/$management" },   
    source: { address: ""<my request link unique address>" }   
)  
  
```  
  
### <a name="create-link-for-receiving-responses"></a>Создание ссылки для получения ответов  

Создает ссылку для получения ответов от узла управления hello.  
  
```  
responseLink = session.attach(    
role: RECEIVER,   
    source: { address: "<entity address>/$management" }   
    target: { address: "<my response link unique address>" }   
)  
  
```  
  
### <a name="transfer-a-request-message"></a>Передача сообщения запроса  

Передача сообщения запроса.  
  
```  
requestLink.sendTransfer(  
        Message(  
                properties: {  
                        message-id: <request id>,  
                        reply-to: "<my response link unique address>"  
                },  
                application-properties: {  
                        "operation" -> "<operation>",  
                },  
        )  
```  
  
### <a name="receive-a-response-message"></a>Получение ответного сообщения  

Получает ответное сообщение hello ссылке hello ответа.  
  
```  
responseMessage = responseLink.receiveTransfer()  
```  
  
ответное сообщение Hello имеет hello следующие формы:
  
```  
Message(  
properties: {     
        correlation-id: <request id>  
    },  
    application-properties: {  
            "statusCode" -> <status code>,  
            "statusDescription" -> <status description>,  
           },         
)  
  
```  
  
### <a name="service-bus-entity-address"></a>Адрес сущности служебной шины  

Адреса сущностей служебной шины составляются следующим образом:  
  
|Тип сущности|Адрес|Пример|  
|-----------------|-------------|-------------|  
|очередь|`<queue_name>`|`“myQueue”`<br /><br /> `“site1/myQueue”`|  
|Раздел|`<topic_name>`|`“myTopic”`<br /><br /> `“site2/page1/myQueue”`|  
|subscription|`<topic_name>/Subscriptions/<subscription_name>`|`“myTopic/Subscriptions/MySub”`|  
  
## <a name="message-operations"></a>Операции с сообщениями  
  
### <a name="message-renew-lock"></a>Блокировка обновления сообщений  

Расширяет hello блокировки сообщения, hello времени, указанного в hello Описание сущности.  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:renew-lock`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
 тело сообщения Hello запроса должен состоять из amqp значение раздела, содержащего карту с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|`lock-tokens`|Массив UUID|Да|Toorenew маркеры блокировки сообщений.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — операция выполнена успешно; в противном случае — сбой.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
текст сообщения ответа Hello должен состоять из amqp значение раздела, содержащего карту с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|expirations|Массив метки времени|Да|Сообщения блокировки маркера новый срок действия соответствующих toohello запроса блокировки маркеров.|  
  
### <a name="peek-message"></a>Просмотр сообщения  

Просмотр сообщений без блокировки.  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:peek-message`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|`from-sequence-number`|длинное целое число|Да|Порядковый номер, из которого toostart считывания.|  
|`message-count`|int|Да|Максимальное количество сообщений toopeek.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — есть дополнительные сообщения.<br /><br /> 0xcc: нет содержимого — больше нет сообщений.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
текст сообщения ответа Hello должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|отправляемых из облака на устройство|Список схем|Да|Список сообщений, в котором каждая схема представляет сообщение.|  
  
карта Hello, представляющая сообщение должно содержать hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|message|Массив байтов|Да|Сообщение с кодированием линии связи AMQP 1.0.|  
  
### <a name="schedule-message"></a>Расписание сообщения  

Расписание для сообщений.  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:schedule-message`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|отправляемых из облака на устройство|Список схем|Да|Список сообщений, в котором каждая схема представляет сообщение.|  
  
карта Hello, представляющая сообщение должно содержать hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|message-id|строка|Да|`amqpMessage.Properties.MessageId` в качестве строки|  
|session-id|строка|Да|`amqpMessage.Properties.GroupId as string`|  
|partition-key|string|Да|`amqpMessage.MessageAnnotations.”x-opt-partition-key"`|  
|message|Массив байтов|Да|Сообщение с кодированием линии связи AMQP 1.0.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — операция выполнена успешно; в противном случае — сбой.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
текст сообщения ответа Hello должен состоять из **значение amqp** раздел, содержащий карту с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|sequence-numbers|Массив длинных чисел|Да|Порядковый номер запланированных сообщений. Порядковый номер является используется toocancel.|  
  
### <a name="cancel-scheduled-message"></a>Отмена запланированного сообщения  

Отмена запланированных сообщений.  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:cancel-scheduled-message`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|sequence-numbers|Массив длинных чисел|Да|Порядковые номера toocancel запланированные сообщения.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — операция выполнена успешно; в противном случае — сбой.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
текст сообщения ответа Hello должен состоять из **значение amqp** раздел, содержащий карту с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|sequence-numbers|Массив длинных чисел|Да|Порядковый номер запланированных сообщений. Порядковый номер является используется toocancel.|  
  
## <a name="session-operations"></a>Операции на уровне сеанса  
  
### <a name="session-renew-lock"></a>Блокировка обновления сеанса  

Расширяет hello блокировки сообщения, hello времени, указанного в hello Описание сущности.  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:renew-session-lock`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|session-id|строка|Да|Идентификатор сеанса.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — есть дополнительные сообщения.<br /><br /> 0xcc: нет содержимого — больше нет сообщений.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
текст сообщения ответа Hello должен состоять из **значение amqp** раздел, содержащий карту с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|expiration|Timestamp|Да|Новый срок действия.|  
  
### <a name="peek-session-message"></a>Просмотр сообщения сеанса  

Просмотр сообщений сеанса без блокировки.  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:peek-message`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|from-sequence-number|длинное целое число|Да|Порядковый номер, из которого toostart считывания.|  
|message-count|int|Да|Максимальное количество сообщений toopeek.|  
|session-id|строка|Да|Идентификатор сеанса.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — есть дополнительные сообщения.<br /><br /> 0xcc: нет содержимого — больше нет сообщений.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
текст сообщения ответа Hello должен состоять из **значение amqp** раздел, содержащий карту с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|отправляемых из облака на устройство|Список схем|Да|Список сообщений, в котором каждая схема представляет сообщение.|  
  
 карта Hello, представляющая сообщение должно содержать hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|message|Массив байтов|Да|Сообщение с кодированием линии связи AMQP 1.0.|  
  
### <a name="set-session-state"></a>Установка состояния сеанса  

Задает hello состояния сеанса.  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:peek-message`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|session-id|строка|Да|Идентификатор сеанса.|  
|session-state|Массив байтов|Да|Непрозрачные двоичные данные.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — операция выполнена успешно; в противном случае — сбой.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
### <a name="get-session-state"></a>Получение состояния сеанса  

Получает состояние сеанса hello.  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:get-session-state`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|session-id|строка|Да|Идентификатор сеанса.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — операция выполнена успешно; в противном случае — сбой.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
текст сообщения ответа Hello должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|session-state|Массив байтов|Да|Непрозрачные двоичные данные.|  
  
### <a name="enumerate-sessions"></a>Перечисление сеансов  

Перечисление сеансов в сущности обмена сообщениями.  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:get-message-sessions`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|last-updated-time|Timestamp|Да|Фильтровать только сеансы tooinclude обновлена в течение заданного времени.|  
|skip|int|Да|Пропуск определенного числа сеансов.|  
|top|int|Да|Максимальное число сеансов.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — есть дополнительные сообщения.<br /><br /> 0xcc: нет содержимого — больше нет сообщений.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
текст сообщения ответа Hello должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|skip|int|Да|Количество пропущенных сеансов, если код состояния равен 200.|  
|sessions-ids|Массив строк|Да|Массив идентификаторов, если код состояния равен 200.|  
  
## <a name="rule-operations"></a>Операции с правилами  
  
### <a name="add-rule"></a>Добавление правила  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:add-rule`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|rule-name|строка|Да|Имя правила без учета имени подписки и раздела.|  
|rule-description|map|Да|Описание правила, как указано в следующем разделе.|  
  
Hello **описание правила** карты должен включать следующие записи: hello где **фильтр sql** и **фильтр корреляции** являются взаимоисключающими:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|sql-filter|map|Да|`sql-filter`, как указано в следующем разделе hello.|  
|correlation-filter|map|Да|`correlation-filter`, как указано в следующем разделе hello.|  
|sql-rule-action|map|Да|`sql-rule-action`, как указано в следующем разделе hello.|  
  
Фильтр sql карты Hello должен включать hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|expression|string|Да|Выражение фильтра SQL.|  
  
Hello **фильтр корреляции** карты необходимо включить хотя бы один из hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|correlation-id|строка|Нет||  
|message-id|строка|Нет||  
|значение|string|Нет||  
|reply-to|string|Нет||  
|label|строка|Нет||  
|session-id|строка|Нет||  
|reply-to-session-id|string|Нет||  
|content-type|строка|Нет||  
|properties|map|Нет|Сопоставляет tooService шины [BrokeredMessage.Properties](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Properties).|  
  
Hello **действия для правила sql** карты необходимо включить hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|expression|string|Да|Выражение действия SQL.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — операция выполнена успешно; в противном случае — сбой.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
### <a name="remove-rule"></a>Удаление правила  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:remove-rule`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|rule-name|строка|Да|Имя правила без учета имени подписки и раздела.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — операция выполнена успешно; в противном случае — сбой.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
## <a name="deferred-message-operations"></a>Операции с отложенными сообщениями  
  
### <a name="receive-by-sequence-number"></a>Получение по порядковому номеру  

Получение отложенных сообщений по порядковым номерам.  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:receive-by-sequence-number`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|sequence-numbers|Массив длинных чисел|Да|Порядковые номера.|  
|receiver-settle-mode|ubyte|Да|Режим **сопоставления получателя**, как указано в AMQP Core 1.0.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — операция выполнена успешно; в противном случае — сбой.|  
|statusDescription|string|Нет|Описание состояния hello.|  
  
текст сообщения ответа Hello должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|отправляемых из облака на устройство|Список схем|Да|Список сообщений, в котором каждая схема представляет сообщение.|  
  
карта Hello, представляющая сообщение должно содержать hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|lock-token|uuid|Да|Маркер блокировки, если значение `receiver-settle-mode` равно -1.|  
|message|Массив байтов|Да|Сообщение с кодированием линии связи AMQP 1.0.|  
  
### <a name="update-disposition-status"></a>Обновление состояния метода обработки  

Обновляет состояние disposition hello отложенных сообщений.  
  
#### <a name="request"></a>Запрос  

приветственное сообщение запроса должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|операция|string|Да|`com.microsoft:update-disposition`|  
|`com.microsoft:server-timeout`|uint|Нет|Время ожидания ответа от сервера, на котором выполняется операция, в миллисекундах.|  
  
текст сообщения Hello запрос должен состоять из **значение amqp** раздел, содержащий **карты** с hello следующие записи:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|disposition-status|строка|Да|выполнено<br /><br /> abandoned (прервано)<br /><br /> suspended (приостановлено)|  
|lock-tokens|Массив UUID|Да|Статус метода обработки tooupdate маркеры блокировки сообщений.|  
|deadletter-reason|string|Нет|Может задаваться, если статус расстановки задано слишком**приостановки**.|  
|deadletter-description|строка|Нет|Может задаваться, если статус расстановки задано слишком**приостановки**.|  
|properties-to-modify|map|Нет|Список Service Bus посредника toomodify свойства сообщения.|  
  
#### <a name="response"></a>Ответ  

ответное сообщение Hello должен включать следующие свойства приложения hello:  
  
|Ключ|Тип значения|Обязательно|Содержимое значения|  
|---------|----------------|--------------|--------------------|  
|statusCode|int|Да|Код ответа HTTP [RFC2616].<br /><br /> 200: ОК — операция выполнена успешно; в противном случае — сбой.|  
|statusDescription|string|Нет|Описание состояния hello.|

## <a name="next-steps"></a>Дальнейшие действия

toolearn Дополнительные сведения о AMQP и Service Bus, посетите hello ссылкам:

* [Протокол AMQP служебной шины — обзор]
* [Поддержка AMQP 1.0 для секционированных очередей и разделов служебной шины]
* [Протокол AMQP служебной шины для Windows Server]

[Протокол AMQP служебной шины — обзор]: service-bus-amqp-overview.md
[Поддержка AMQP 1.0 для секционированных очередей и разделов служебной шины]: service-bus-partitioned-queues-and-topics-amqp-overview.md
[Протокол AMQP служебной шины для Windows Server]: https://msdn.microsoft.com/library/dn574799.asp