---
title: "aaaService шины с помощью .NET и AMQP 1.0 | Документы Microsoft"
description: "Использование служебной шины Azure на платформе .NET с протоколом AMQP"
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 332bcb13-e287-4715-99ee-3d7d97396487
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/19/2017
ms.author: sethm
ms.openlocfilehash: d8b40f92ba29058951556fa3db1adcf9383ee69f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="using-service-bus-from-net-with-amqp-10"></a><span data-ttu-id="64673-103">Использование служебной шины на платформе .NET с протоколом AMQP 1.0</span><span class="sxs-lookup"><span data-stu-id="64673-103">Using Service Bus from .NET with AMQP 1.0</span></span>

## <a name="downloading-hello-service-bus-sdk"></a><span data-ttu-id="64673-104">Загрузка hello пакет SDK служебной шины</span><span class="sxs-lookup"><span data-stu-id="64673-104">Downloading hello Service Bus SDK</span></span>

<span data-ttu-id="64673-105">Поддержка AMQP 1.0 доступна в hello пакет SDK служебной шины версии 2.1 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="64673-105">AMQP 1.0 support is available in hello Service Bus SDK version 2.1 or later.</span></span> <span data-ttu-id="64673-106">Необходимо убедиться, есть последняя версия hello путем загрузки bits Service Bus hello из [NuGet][NuGet].</span><span class="sxs-lookup"><span data-stu-id="64673-106">You can ensure you have hello latest version by downloading hello Service Bus bits from [NuGet][NuGet].</span></span>

## <a name="configuring-net-applications-toouse-amqp-10"></a><span data-ttu-id="64673-107">Настройка приложений .NET toouse AMQP 1.0</span><span class="sxs-lookup"><span data-stu-id="64673-107">Configuring .NET applications toouse AMQP 1.0</span></span>

<span data-ttu-id="64673-108">По умолчанию клиентская библиотека .NET служебной шины hello взаимодействует с hello службы Service Bus с помощью выделенного протокола на основе SOAP.</span><span class="sxs-lookup"><span data-stu-id="64673-108">By default, hello Service Bus .NET client library communicates with hello Service Bus service using a dedicated SOAP-based protocol.</span></span> <span data-ttu-id="64673-109">toouse AMQP 1.0 вместо протокола по умолчанию hello, требуется явно настроить в строке подключения Service Bus hello, как описано в следующем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="64673-109">toouse AMQP 1.0 instead of hello default protocol requires explicit configuration on hello Service Bus connection string, as described in hello next section.</span></span> <span data-ttu-id="64673-110">Помимо этих изменений, код приложения остается без изменений при использовании AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="64673-110">Other than this change, application code remains unchanged when using AMQP 1.0.</span></span>

<span data-ttu-id="64673-111">В текущем выпуске hello существует несколько функций API, которые не поддерживаются при использовании AMQP.</span><span class="sxs-lookup"><span data-stu-id="64673-111">In hello current release, there are a few API features that are not supported when using AMQP.</span></span> <span data-ttu-id="64673-112">Неподдерживаемые функции перечислены ниже в разделе "hello" [неподдерживаемые функции, ограничения и различия в поведении](#unsupported-features-restrictions-and-behavioral-differences).</span><span class="sxs-lookup"><span data-stu-id="64673-112">These unsupported features are listed later in hello section [Unsupported features, restrictions, and behavioral differences](#unsupported-features-restrictions-and-behavioral-differences).</span></span> <span data-ttu-id="64673-113">При использовании AMQP некоторые дополнительные параметры настройки hello также имеют другое значение.</span><span class="sxs-lookup"><span data-stu-id="64673-113">Some of hello advanced configuration settings also have a different meaning when using AMQP.</span></span>

### <a name="configuration-using-appconfig"></a><span data-ttu-id="64673-114">Настройка с помощью файла App.config</span><span class="sxs-lookup"><span data-stu-id="64673-114">Configuration using App.config</span></span>

<span data-ttu-id="64673-115">Рекомендуется для приложений toouse hello App.config toostore настройки файла.</span><span class="sxs-lookup"><span data-stu-id="64673-115">It is good practice for applications toouse hello App.config configuration file toostore settings.</span></span> <span data-ttu-id="64673-116">Для приложения Service Bus можно использовать строку подключения Service Bus hello toostore App.config.</span><span class="sxs-lookup"><span data-stu-id="64673-116">For Service Bus applications, you can use App.config toostore hello Service Bus connection string.</span></span> <span data-ttu-id="64673-117">Ниже приводится пример файла App.config:</span><span class="sxs-lookup"><span data-stu-id="64673-117">An example App.config file is as follows:</span></span>

```xml
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings>
        <add key="Microsoft.ServiceBus.ConnectionString"
             value="Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[SAS key];TransportType=Amqp" />
    </appSettings>
</configuration>
```

<span data-ttu-id="64673-118">Здравствуйте, значение hello `Microsoft.ServiceBus.ConnectionString` задана строка подключения шины обслуживания hello, используемые tooconfigure hello подключения tooService шины.</span><span class="sxs-lookup"><span data-stu-id="64673-118">hello value of hello `Microsoft.ServiceBus.ConnectionString` setting is hello Service Bus connection string that is used tooconfigure hello connection tooService Bus.</span></span> <span data-ttu-id="64673-119">Hello имеет следующий формат:</span><span class="sxs-lookup"><span data-stu-id="64673-119">hello format is as follows:</span></span>

`Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[SAS key];TransportType=Amqp`

<span data-ttu-id="64673-120">Где `[namespace]` и `SharedAccessKey` извлекаются из hello [портал Azure] [ Azure portal] при создании пространства имен Service Bus.</span><span class="sxs-lookup"><span data-stu-id="64673-120">Where `[namespace]` and `SharedAccessKey` are obtained from hello [Azure portal][Azure portal] when you create a Service Bus namespace.</span></span> <span data-ttu-id="64673-121">Дополнительные сведения см. в разделе [создание пространства имен Service Bus с помощью портала Azure hello][Create a Service Bus namespace using hello Azure portal].</span><span class="sxs-lookup"><span data-stu-id="64673-121">For more information, see [Create a Service Bus namespace using hello Azure portal][Create a Service Bus namespace using hello Azure portal].</span></span>

<span data-ttu-id="64673-122">При использовании AMQP добавьте строку hello подключения с `;TransportType=Amqp`.</span><span class="sxs-lookup"><span data-stu-id="64673-122">When using AMQP, append hello connection string with `;TransportType=Amqp`.</span></span> <span data-ttu-id="64673-123">Такая запись предписывает hello клиента библиотеки toomake его tooService соединений шины с помощью AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="64673-123">This notation instructs hello client library toomake its connection tooService Bus using AMQP 1.0.</span></span>

## <a name="message-serialization"></a><span data-ttu-id="64673-124">Сериализация сообщений</span><span class="sxs-lookup"><span data-stu-id="64673-124">Message serialization</span></span>

<span data-ttu-id="64673-125">При использовании протокола по умолчанию hello hello поведение сериализации по умолчанию клиентская библиотека .NET hello — toouse hello [DataContractSerializer] [ DataContractSerializer] введите tooserialize [BrokeredMessage ] [ BrokeredMessage] экземпляр для передачи данных между клиентской библиотеки hello и hello службы шины обслуживания.</span><span class="sxs-lookup"><span data-stu-id="64673-125">When using hello default protocol, hello default serialization behavior of hello .NET client library is toouse hello [DataContractSerializer][DataContractSerializer] type tooserialize a [BrokeredMessage][BrokeredMessage] instance for transport between hello client library and hello Service Bus service.</span></span> <span data-ttu-id="64673-126">При использовании транспортного режима AMQP hello hello клиентская библиотека использует hello систему типов AMQP для сериализации hello [сообщений брокера] [ BrokeredMessage] в сообщение AMQP.</span><span class="sxs-lookup"><span data-stu-id="64673-126">When using hello AMQP transport mode, hello client library uses hello AMQP type system for serialization of hello [brokered message][BrokeredMessage] into an AMQP message.</span></span> <span data-ttu-id="64673-127">Это позволяет toobe сообщение hello полученных и обработанных принимающим приложением, которое может работать на другой платформе, например, приложение Java, которое использует JMS API hello tooaccess Service Bus.</span><span class="sxs-lookup"><span data-stu-id="64673-127">This serialization enables hello message toobe received and interpreted by a receiving application that is potentially running on a different platform, for example, a Java application that uses hello JMS API tooaccess Service Bus.</span></span>

<span data-ttu-id="64673-128">При построении [BrokeredMessage] [ BrokeredMessage] экземпляр, можно ввести объект .NET в качестве tooserve конструктор параметра toohello тексте hello приветственное сообщение.</span><span class="sxs-lookup"><span data-stu-id="64673-128">When you construct a [BrokeredMessage][BrokeredMessage] instance, you can provide a .NET object as a parameter toohello constructor tooserve as hello body of hello message.</span></span> <span data-ttu-id="64673-129">Для объектов, которые могут быть простыми типами сопоставленных tooAMQP текст hello сериализуется в типы данных AMQP.</span><span class="sxs-lookup"><span data-stu-id="64673-129">For objects that can be mapped tooAMQP primitive types, hello body is serialized into AMQP data types.</span></span> <span data-ttu-id="64673-130">Если hello объекта не может быть непосредственно сопоставить с примитивным типом AMQP; то есть, пользовательский тип, определенный приложения hello, а затем hello объект сериализуется с использованием hello [DataContractSerializer][DataContractSerializer], и сериализации hello байт в сообщении данных AMQP.</span><span class="sxs-lookup"><span data-stu-id="64673-130">If hello object cannot be directly mapped into an AMQP primitive type; that is, a custom type defined by hello application, then hello object is serialized using hello [DataContractSerializer][DataContractSerializer], and hello serialized bytes are sent in an AMQP data message.</span></span>

<span data-ttu-id="64673-131">toofacilitate взаимодействие с клиентами, отличными от .NET, используйте только те типы .NET, которые могут быть непосредственно сериализованы в типы AMQP для hello текст сообщения hello.</span><span class="sxs-lookup"><span data-stu-id="64673-131">toofacilitate interoperability with non-.NET clients, use only .NET types that can be serialized directly into AMQP types for hello body of hello message.</span></span> <span data-ttu-id="64673-132">Hello в следующей таблице приведены эти типы и hello соответствующего сопоставления toohello типы amqp.</span><span class="sxs-lookup"><span data-stu-id="64673-132">hello following table details those types and hello corresponding mapping toohello AMQP type system.</span></span>

| <span data-ttu-id="64673-133">Тип объекта текста .NET</span><span class="sxs-lookup"><span data-stu-id="64673-133">.NET Body Object Type</span></span> | <span data-ttu-id="64673-134">Сопоставленный тип AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-134">Mapped AMQP Type</span></span> | <span data-ttu-id="64673-135">Тип раздела текста AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-135">AMQP Body Section Type</span></span> |
| --- | --- | --- |
| <span data-ttu-id="64673-136">bool</span><span class="sxs-lookup"><span data-stu-id="64673-136">bool</span></span> |<span data-ttu-id="64673-137">Логическое</span><span class="sxs-lookup"><span data-stu-id="64673-137">boolean</span></span> |<span data-ttu-id="64673-138">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-138">AMQP Value</span></span> |
| <span data-ttu-id="64673-139">byte</span><span class="sxs-lookup"><span data-stu-id="64673-139">byte</span></span> |<span data-ttu-id="64673-140">ubyte</span><span class="sxs-lookup"><span data-stu-id="64673-140">ubyte</span></span> |<span data-ttu-id="64673-141">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-141">AMQP Value</span></span> |
| <span data-ttu-id="64673-142">ushort</span><span class="sxs-lookup"><span data-stu-id="64673-142">ushort</span></span> |<span data-ttu-id="64673-143">ushort</span><span class="sxs-lookup"><span data-stu-id="64673-143">ushort</span></span> |<span data-ttu-id="64673-144">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-144">AMQP Value</span></span> |
| <span data-ttu-id="64673-145">uint</span><span class="sxs-lookup"><span data-stu-id="64673-145">uint</span></span> |<span data-ttu-id="64673-146">uint</span><span class="sxs-lookup"><span data-stu-id="64673-146">uint</span></span> |<span data-ttu-id="64673-147">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-147">AMQP Value</span></span> |
| <span data-ttu-id="64673-148">ulong</span><span class="sxs-lookup"><span data-stu-id="64673-148">ulong</span></span> |<span data-ttu-id="64673-149">ulong</span><span class="sxs-lookup"><span data-stu-id="64673-149">ulong</span></span> |<span data-ttu-id="64673-150">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-150">AMQP Value</span></span> |
| <span data-ttu-id="64673-151">sbyte</span><span class="sxs-lookup"><span data-stu-id="64673-151">sbyte</span></span> |<span data-ttu-id="64673-152">byte</span><span class="sxs-lookup"><span data-stu-id="64673-152">byte</span></span> |<span data-ttu-id="64673-153">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-153">AMQP Value</span></span> |
| <span data-ttu-id="64673-154">short</span><span class="sxs-lookup"><span data-stu-id="64673-154">short</span></span> |<span data-ttu-id="64673-155">short</span><span class="sxs-lookup"><span data-stu-id="64673-155">short</span></span> |<span data-ttu-id="64673-156">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-156">AMQP Value</span></span> |
| <span data-ttu-id="64673-157">int</span><span class="sxs-lookup"><span data-stu-id="64673-157">int</span></span> |<span data-ttu-id="64673-158">int</span><span class="sxs-lookup"><span data-stu-id="64673-158">int</span></span> |<span data-ttu-id="64673-159">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-159">AMQP Value</span></span> |
| <span data-ttu-id="64673-160">длинное целое число</span><span class="sxs-lookup"><span data-stu-id="64673-160">long</span></span> |<span data-ttu-id="64673-161">длинное целое число</span><span class="sxs-lookup"><span data-stu-id="64673-161">long</span></span> |<span data-ttu-id="64673-162">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-162">AMQP Value</span></span> |
| <span data-ttu-id="64673-163">float;</span><span class="sxs-lookup"><span data-stu-id="64673-163">float</span></span> |<span data-ttu-id="64673-164">float;</span><span class="sxs-lookup"><span data-stu-id="64673-164">float</span></span> |<span data-ttu-id="64673-165">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-165">AMQP Value</span></span> |
| <span data-ttu-id="64673-166">double</span><span class="sxs-lookup"><span data-stu-id="64673-166">double</span></span> |<span data-ttu-id="64673-167">double</span><span class="sxs-lookup"><span data-stu-id="64673-167">double</span></span> |<span data-ttu-id="64673-168">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-168">AMQP Value</span></span> |
| <span data-ttu-id="64673-169">decimal</span><span class="sxs-lookup"><span data-stu-id="64673-169">decimal</span></span> |<span data-ttu-id="64673-170">decimal128</span><span class="sxs-lookup"><span data-stu-id="64673-170">decimal128</span></span> |<span data-ttu-id="64673-171">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-171">AMQP Value</span></span> |
| <span data-ttu-id="64673-172">char;</span><span class="sxs-lookup"><span data-stu-id="64673-172">char</span></span> |<span data-ttu-id="64673-173">char;</span><span class="sxs-lookup"><span data-stu-id="64673-173">char</span></span> |<span data-ttu-id="64673-174">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-174">AMQP Value</span></span> |
| <span data-ttu-id="64673-175">DateTime</span><span class="sxs-lookup"><span data-stu-id="64673-175">DateTime</span></span> |<span data-ttu-id="64673-176">Timestamp</span><span class="sxs-lookup"><span data-stu-id="64673-176">timestamp</span></span> |<span data-ttu-id="64673-177">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-177">AMQP Value</span></span> |
| <span data-ttu-id="64673-178">Guid</span><span class="sxs-lookup"><span data-stu-id="64673-178">Guid</span></span> |<span data-ttu-id="64673-179">uuid</span><span class="sxs-lookup"><span data-stu-id="64673-179">uuid</span></span> |<span data-ttu-id="64673-180">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-180">AMQP Value</span></span> |
| <span data-ttu-id="64673-181">byte[]</span><span class="sxs-lookup"><span data-stu-id="64673-181">byte[]</span></span> |<span data-ttu-id="64673-182">binary;</span><span class="sxs-lookup"><span data-stu-id="64673-182">binary</span></span> |<span data-ttu-id="64673-183">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-183">AMQP Value</span></span> |
| <span data-ttu-id="64673-184">string</span><span class="sxs-lookup"><span data-stu-id="64673-184">string</span></span> |<span data-ttu-id="64673-185">string</span><span class="sxs-lookup"><span data-stu-id="64673-185">string</span></span> |<span data-ttu-id="64673-186">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-186">AMQP Value</span></span> |
| <span data-ttu-id="64673-187">System.Collections.IList</span><span class="sxs-lookup"><span data-stu-id="64673-187">System.Collections.IList</span></span> |<span data-ttu-id="64673-188">list</span><span class="sxs-lookup"><span data-stu-id="64673-188">list</span></span> |<span data-ttu-id="64673-189">Значение AMQP: элементов, содержащихся в коллекции hello можно только те, которые определены в этой таблице.</span><span class="sxs-lookup"><span data-stu-id="64673-189">AMQP Value: items contained in hello collection can only be those that are defined in this table.</span></span> |
| <span data-ttu-id="64673-190">System.Array</span><span class="sxs-lookup"><span data-stu-id="64673-190">System.Array</span></span> |<span data-ttu-id="64673-191">array</span><span class="sxs-lookup"><span data-stu-id="64673-191">array</span></span> |<span data-ttu-id="64673-192">Значение AMQP: элементов, содержащихся в коллекции hello можно только те, которые определены в этой таблице.</span><span class="sxs-lookup"><span data-stu-id="64673-192">AMQP Value: items contained in hello collection can only be those that are defined in this table.</span></span> |
| <span data-ttu-id="64673-193">System.Collections.IDictionary</span><span class="sxs-lookup"><span data-stu-id="64673-193">System.Collections.IDictionary</span></span> |<span data-ttu-id="64673-194">map</span><span class="sxs-lookup"><span data-stu-id="64673-194">map</span></span> |<span data-ttu-id="64673-195">Значение AMQP: элементов, содержащихся в коллекции hello можно только те, которые определены в этой таблице. Примечание: поддерживаются только строковые ключи.</span><span class="sxs-lookup"><span data-stu-id="64673-195">AMQP Value: items contained in hello collection can only be those that are defined in this table.Note: only String keys are supported.</span></span> |
| <span data-ttu-id="64673-196">URI</span><span class="sxs-lookup"><span data-stu-id="64673-196">Uri</span></span> |<span data-ttu-id="64673-197">Описано строки (см. в следующей таблице hello.)</span><span class="sxs-lookup"><span data-stu-id="64673-197">Described string(see hello following table)</span></span> |<span data-ttu-id="64673-198">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-198">AMQP Value</span></span> |
| <span data-ttu-id="64673-199">Datetimeoffset</span><span class="sxs-lookup"><span data-stu-id="64673-199">DateTimeOffset</span></span> |<span data-ttu-id="64673-200">Описано long (см. в следующей таблице hello.)</span><span class="sxs-lookup"><span data-stu-id="64673-200">Described long(see hello following table)</span></span> |<span data-ttu-id="64673-201">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-201">AMQP Value</span></span> |
| <span data-ttu-id="64673-202">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="64673-202">TimeSpan</span></span> |<span data-ttu-id="64673-203">Описано long (см. ниже hello.)</span><span class="sxs-lookup"><span data-stu-id="64673-203">Described long(see hello following)</span></span> |<span data-ttu-id="64673-204">Значение AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-204">AMQP Value</span></span> |
| <span data-ttu-id="64673-205">Поток</span><span class="sxs-lookup"><span data-stu-id="64673-205">Stream</span></span> |<span data-ttu-id="64673-206">binary;</span><span class="sxs-lookup"><span data-stu-id="64673-206">binary</span></span> |<span data-ttu-id="64673-207">Данные AMQP (может быть несколько).</span><span class="sxs-lookup"><span data-stu-id="64673-207">AMQP Data (may be multiple).</span></span> <span data-ttu-id="64673-208">Hello разделы данных содержат необработанные байты hello, считанных из объекта потока hello.</span><span class="sxs-lookup"><span data-stu-id="64673-208">hello Data sections contain hello raw bytes read from hello Stream object.</span></span> |
| <span data-ttu-id="64673-209">Другой объект</span><span class="sxs-lookup"><span data-stu-id="64673-209">Other Object</span></span> |<span data-ttu-id="64673-210">binary;</span><span class="sxs-lookup"><span data-stu-id="64673-210">binary</span></span> |<span data-ttu-id="64673-211">Данные AMQP (может быть несколько).</span><span class="sxs-lookup"><span data-stu-id="64673-211">AMQP Data (may be multiple).</span></span> <span data-ttu-id="64673-212">Содержит двоичной сериализации hello hello объекта, который использует hello DataContractSerializer или сериализатор, предоставляемый приложения hello.</span><span class="sxs-lookup"><span data-stu-id="64673-212">Contains hello serialized binary of hello object that uses hello DataContractSerializer or a serializer supplied by hello application.</span></span> |

| <span data-ttu-id="64673-213">Тип .NET</span><span class="sxs-lookup"><span data-stu-id="64673-213">.NET Type</span></span> | <span data-ttu-id="64673-214">Сопоставленный описанный тип AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-214">Mapped AMQP Described Type</span></span> | <span data-ttu-id="64673-215">Примечания</span><span class="sxs-lookup"><span data-stu-id="64673-215">Notes</span></span> |
| --- | --- | --- |
| <span data-ttu-id="64673-216">URI</span><span class="sxs-lookup"><span data-stu-id="64673-216">Uri</span></span> |`<type name=”uri” class=restricted source=”string”> <descriptor name=”com.microsoft:uri” /></type>` |<span data-ttu-id="64673-217">Uri.AbsoluteUri</span><span class="sxs-lookup"><span data-stu-id="64673-217">Uri.AbsoluteUri</span></span> |
| <span data-ttu-id="64673-218">Datetimeoffset</span><span class="sxs-lookup"><span data-stu-id="64673-218">DateTimeOffset</span></span> |`<type name=”datetime-offset” class=restricted source=”long”> <descriptor name=”com.microsoft:datetime-offset” /></type>` |<span data-ttu-id="64673-219">DateTimeOffset.UtcTicks</span><span class="sxs-lookup"><span data-stu-id="64673-219">DateTimeOffset.UtcTicks</span></span> |
| <span data-ttu-id="64673-220">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="64673-220">TimeSpan</span></span> |`<type name=”timespan” class=restricted source=”long”> <descriptor name=”com.microsoft:timespan” /></type> ` |<span data-ttu-id="64673-221">TimeSpan.Ticks</span><span class="sxs-lookup"><span data-stu-id="64673-221">TimeSpan.Ticks</span></span> |

## <a name="unsupported-features-restrictions-and-behavioral-differences"></a><span data-ttu-id="64673-222">Неподдерживаемые функции, ограничения и различия в поведении</span><span class="sxs-lookup"><span data-stu-id="64673-222">Unsupported features, restrictions, and behavioral differences</span></span>

<span data-ttu-id="64673-223">Привет, следующие функции hello API .NET служебной шины не поддерживается в настоящее время при использовании AMQP:</span><span class="sxs-lookup"><span data-stu-id="64673-223">hello following features of hello Service Bus .NET API are not currently supported when using AMQP:</span></span>

* <span data-ttu-id="64673-224">Транзакции</span><span class="sxs-lookup"><span data-stu-id="64673-224">Transactions</span></span>
* <span data-ttu-id="64673-225">Отправка через место назначения передачи</span><span class="sxs-lookup"><span data-stu-id="64673-225">Send via transfer destination</span></span>

<span data-ttu-id="64673-226">Существуют также некоторые небольшие различия в поведении hello hello API .NET служебной шины при использовании AMQP сравнения toohello протокола по умолчанию:</span><span class="sxs-lookup"><span data-stu-id="64673-226">There are also some small differences in hello behavior of hello Service Bus .NET API when using AMQP, compared toohello default protocol:</span></span>

* <span data-ttu-id="64673-227">Hello [OperationTimeout] [ OperationTimeout] свойство игнорируется.</span><span class="sxs-lookup"><span data-stu-id="64673-227">hello [OperationTimeout][OperationTimeout] property is ignored.</span></span>
* <span data-ttu-id="64673-228">`MessageReceiver.Receive(TimeSpan.Zero)` реализуется в виде `MessageReceiver.Receive(TimeSpan.FromSeconds(10))`.</span><span class="sxs-lookup"><span data-stu-id="64673-228">`MessageReceiver.Receive(TimeSpan.Zero)` is implemented as `MessageReceiver.Receive(TimeSpan.FromSeconds(10))`.</span></span>
* <span data-ttu-id="64673-229">Завершение сообщения с помощью маркеров блокировки можно будет только получателями сообщения hello, первоначально полученных сообщений hello.</span><span class="sxs-lookup"><span data-stu-id="64673-229">Completing messages by lock tokens can only be done by hello message receivers that initially received hello messages.</span></span>

## <a name="controlling-amqp-protocol-settings"></a><span data-ttu-id="64673-230">Параметры управления протоколом AMQP</span><span class="sxs-lookup"><span data-stu-id="64673-230">Controlling AMQP protocol settings</span></span>

<span data-ttu-id="64673-231">Hello [API-интерфейсы .NET](/dotnet/api/) предоставляют несколько параметров toocontrol hello поведение hello протокола AMQP:</span><span class="sxs-lookup"><span data-stu-id="64673-231">hello [.NET APIs](/dotnet/api/) expose several settings toocontrol hello behavior of hello AMQP protocol:</span></span>

* <span data-ttu-id="64673-232">**[MessageReceiver.PrefetchCount](/dotnet/api/microsoft.servicebus.messaging.messagereceiver.prefetchcount?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessageReceiver_PrefetchCount)**: элементы управления hello начальные разрешения, которые применены tooa ссылку.</span><span class="sxs-lookup"><span data-stu-id="64673-232">**[MessageReceiver.PrefetchCount](/dotnet/api/microsoft.servicebus.messaging.messagereceiver.prefetchcount?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessageReceiver_PrefetchCount)**: Controls hello initial credit applied tooa link.</span></span> <span data-ttu-id="64673-233">Hello по умолчанию — 0.</span><span class="sxs-lookup"><span data-stu-id="64673-233">hello default is 0.</span></span>
* <span data-ttu-id="64673-234">**[MessagingFactorySettings.AmqpTransportSettings.MaxFrameSize](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.maxframesize?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_MaxFrameSize)**: элементы управления hello максимальный размер кадра AMQP, доступный при hello согласования во время открытия соединения.</span><span class="sxs-lookup"><span data-stu-id="64673-234">**[MessagingFactorySettings.AmqpTransportSettings.MaxFrameSize](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.maxframesize?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_MaxFrameSize)**: Controls hello maximum AMQP frame size offered during hello negotiation at connection open time.</span></span> <span data-ttu-id="64673-235">по умолчанию Hello — 65 536 байт.</span><span class="sxs-lookup"><span data-stu-id="64673-235">hello default is 65,536 bytes.</span></span>
* <span data-ttu-id="64673-236">**[MessagingFactorySettings.AmqpTransportSettings.BatchFlushInterval](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.batchflushinterval?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_BatchFlushInterval)**: Если перенос batchable, это значение определяет максимальную задержку отправки распоряжений hello.</span><span class="sxs-lookup"><span data-stu-id="64673-236">**[MessagingFactorySettings.AmqpTransportSettings.BatchFlushInterval](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.batchflushinterval?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_BatchFlushInterval)**: If transfers are batchable, this value determines hello maximum delay for sending dispositions.</span></span> <span data-ttu-id="64673-237">По умолчанию наследуется отправителями и получателями.</span><span class="sxs-lookup"><span data-stu-id="64673-237">Inherited by senders/receivers by default.</span></span> <span data-ttu-id="64673-238">Отдельные отправители и получатели могут переопределить hello значения по умолчанию — 20 миллисекунд.</span><span class="sxs-lookup"><span data-stu-id="64673-238">Individual sender/receiver can override hello default, which is 20 milliseconds.</span></span>
* <span data-ttu-id="64673-239">**[MessagingFactorySettings.AmqpTransportSettings.UseSslStreamSecurity](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.usesslstreamsecurity?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_UseSslStreamSecurity)** определяет, устанавливаются ли AMQP-подключения с использованием протокола SSL.</span><span class="sxs-lookup"><span data-stu-id="64673-239">**[MessagingFactorySettings.AmqpTransportSettings.UseSslStreamSecurity](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.usesslstreamsecurity?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_UseSslStreamSecurity)**: Controls whether AMQP connections are established over an SSL connection.</span></span> <span data-ttu-id="64673-240">по умолчанию Hello — **true**.</span><span class="sxs-lookup"><span data-stu-id="64673-240">hello default is **true**.</span></span>

## <a name="next-steps"></a><span data-ttu-id="64673-241">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="64673-241">Next steps</span></span>

<span data-ttu-id="64673-242">Дополнительные готов toolearn?</span><span class="sxs-lookup"><span data-stu-id="64673-242">Ready toolearn more?</span></span> <span data-ttu-id="64673-243">Посетите hello ссылкам:</span><span class="sxs-lookup"><span data-stu-id="64673-243">Visit hello following links:</span></span>

* <span data-ttu-id="64673-244">[Протокол AMQP служебной шины — обзор]</span><span class="sxs-lookup"><span data-stu-id="64673-244">[Service Bus AMQP overview]</span></span>
* <span data-ttu-id="64673-245">[Поддержка AMQP 1.0 для секционированных очередей и разделов служебной шины]</span><span class="sxs-lookup"><span data-stu-id="64673-245">[AMQP 1.0 support for Service Bus partitioned queues and topics]</span></span>
* <span data-ttu-id="64673-246">[Протокол AMQP служебной шины для Windows Server]</span><span class="sxs-lookup"><span data-stu-id="64673-246">[AMQP in Service Bus for Windows Server]</span></span>

[Create a Service Bus namespace using hello Azure portal]: service-bus-create-namespace-portal.md
[DataContractSerializer]: https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx
[BrokeredMessage]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage?view=azureservicebus-4.0.0
[Microsoft.ServiceBus.Messaging.MessagingFactory.AcceptMessageSession]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory.acceptmessagesession?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessagingFactory_AcceptMessageSession
[OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings.operationtimeout?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[NuGet]: http://nuget.org/packages/WindowsAzure.ServiceBus/
[Azure portal]: https://portal.azure.com
[Протокол AMQP служебной шины — обзор]: service-bus-amqp-overview.md
[Поддержка AMQP 1.0 для секционированных очередей и разделов служебной шины]: service-bus-partitioned-queues-and-topics-amqp-overview.md
[Протокол AMQP служебной шины для Windows Server]: https://msdn.microsoft.com/library/dn574799.aspx
