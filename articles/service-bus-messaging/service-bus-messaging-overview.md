---
title: "Основные сведения об обмене сообщениями через служебную шину Azure | Документация Майкрософт"
description: "Описание ретранслятора Azure и обмена сообщениями через служебную шину."
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: f99766cb-8f4b-4baf-b061-4b1e2ae570e4
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: get-started-article
ms.date: 12/21/2017
ms.author: sethm
ms.openlocfilehash: e299ccfe587d37757cd67cb4367f019b21a09b4a
ms.sourcegitcommit: 6f33adc568931edf91bfa96abbccf3719aa32041
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/22/2017
---
# <a name="service-bus-messaging-flexible-data-delivery-in-the-cloud"></a>Обмен сообщениями через служебную шину: гибкая доставка данных в облаке

Служебная шина Microsoft Azure — это надежная служба доставки информации. Она предназначена для упрощения связи. Если двум или более сторонам необходимо обмениваться информацией, им требуется координатор связи. Служебная шина — это механизм обмена данными через брокер или третью сторону. Работа этой службы аналогична работе почтовой службы в реальном мире. Почтовая служба упрощает отправку писем и посылок разных типов и гарантирует доставку практически в любую точку мира.

Подобно доставке писем в почтовой службе, служебная шина обеспечивает гибкую доставку информации как отправителя, так и получателя. Служба обмена сообщениями обеспечивает доставку информации, даже если обе стороны никогда не бывают в сети в то одно и то же время или если они недоступны в один момент времени. Таким образом, принцип обмена сообщениями аналогичен принципу отправки писем, а связь без посредников подобна телефонному звонку (или тому, каким звонок был раньше, когда не было ожидания звонка и идентификатора звонящего, из-за которых это больше напоминает обмен сообщениями через посредника).

Кроме того, у отправителя сообщения может быть множество требований к характеристикам доставки, в том числе к транзакциям, обнаружению повторений, пакетной обработке, прекращению действия по времени и др. У этих шаблонов также есть почтовые аналоги: повторная доставка, обязательная подпись, изменение адреса или отзыв.

Служебная шина поддерживает два различных шаблона обмена сообщениями: с помощью *ретранслятора Azure* и *обмен сообщениями через служебную шину*.

## <a name="azure-relay"></a>Ретранслятор Azure

Компонент [Ретранслятор WCF](../service-bus-relay/relay-what-is-it.md) в составе ретранслятора Azure — это централизованная служба с эффективно распределенной нагрузкой, поддерживающая различные транспортные протоколы и стандарты веб-служб. К ним относятся SOAP, WS-* и даже REST. [Служба ретрансляции](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md) предоставляет разнообразные варианты подключения для ретрансляции и позволяет согласовывать подключения одноранговой сети, если это возможно. Служебная шина оптимизирована для разработчиков .NET, использующих Windows Communication Foundation (WCF), как с точки зрения производительности, так и с точки зрения удобства и обеспечивает полный доступ к службе ретрансляции через интерфейсы SOAP и REST. Это позволяет интегрировать со служебной шиной любую программную среду SOAP или REST.

Служба ретрансляции поддерживает традиционную одностороннюю передачу сообщений, обмен сообщениями на основе запроса/ответа и децентрализованный обмен сообщениями. Она также поддерживает распространение событий по сети Интернет для поддержки сценариев публикации/подписки и двунаправленного обмена данными по сокетам, что позволяет повысить эффективность соединений типа «точка — точка». В схеме обмена сообщениями с ретрансляцией локальная служба подключается к службе ретрансляции через исходящий порт и создает сокет для двунаправленного обмена данными с привязкой к конкретному адресу встречи. После этого клиент может обмениваться данными с локальной службой, отправляя сообщения в службу ретрансляции, которая перенаправит их по нужному адресу. Служба ретрансляции "ретранслирует" сообщения в локальную службу через созданный сокет двунаправленного обмена данными. Клиенту не требуются прямое подключение к локальной службе и информация о ее местонахождении, а локальной службе не требуется открывать на брандмауэре входящие порты.

Подключение между локальной службой и службой ретранслятора создается с помощью привязок WCF для ретранслятора. Привязки для ретрансляции сопоставляются в фоновом режиме с элементами привязки транспорта, предназначенными для создания компонентов канала WCF, которые интегрируются со служебной шиной в облаке.

Ретранслятор WCF дает множество преимуществ, но требует, чтобы сервер и клиент находились в сети одновременно для отправки и получения сообщений. Это не является оптимальным ни для подключений типа HTTP, в которых запросы обычно не существуют достаточно долго, ни для клиентов, подключающихся лишь время от времени, например браузеров, мобильных приложений и т. д. Обмен сообщениями через посредника поддерживает разделенный обмен данными, и он имеет свои преимущества; клиенты и серверы могут подключаться по необходимости и выполнять свои операции в асинхронном режиме.

## <a name="brokered-messaging"></a>Обмен сообщениями через посредника

В отличие от схемы с ретрансляцией, обмен сообщениями через служебную шину с [очередями, разделами и подписками](service-bus-queues-topics-subscriptions.md) можно считать асинхронным, или "темпорально разделенным". Производители (отправители) и потребители (получатели) не должны находиться в сети одновременно. Инфраструктура обмена сообщениями надежно хранит сообщения в "брокере" (например, в очереди), пока принимающая сторона не будет готова к приему. Это позволяет разделять компоненты распределенного приложения как в плановых ситуациях (например, для обслуживания), так и в экстренных случаях, чтобы исключить влияние сбоя одного компонента на систему в целом. Кроме того, принимающее приложение может подключаться к сети только в определенное время дня, например система управления запасами, которую необходимо запускать только в конце рабочего дня.

Основные компоненты инфраструктуры обмена сообщениями через служебную шину — это очереди, разделы и подписки. Главное различие состоит в том, что темы поддерживают возможности публикации и подписки, которые могут использоваться для сложных логик маршрутизации и доставки на основе содержимого, в том числе для отправки нескольким получателям. Эти компоненты позволяют реализовать новые асинхронные сценарии обмена сообщениями, такие как временное отключение, публикация, подписка и балансировка нагрузки. Дополнительные сведения об этих компонентах см. в статье [Очереди, разделы и подписки служебной шины](service-bus-queues-topics-subscriptions.md).

Как и в случае с инфраструктурой ретранслятора WCF, возможности обмена сообщениями через брокер предоставляются для программистов WCF и .NET Framework, а также для REST.

## <a name="next-steps"></a>Дополнительная информация

Дополнительную информацию об обмене сообщениями через служебную шину см. в следующих разделах.

* [Базовая информация о Service Bus](service-bus-fundamentals-hybrid-solutions.md)
* [Очереди, разделы и подписки служебной шины](service-bus-queues-topics-subscriptions.md)
* [Начало работы с очередями служебной шины](service-bus-dotnet-get-started-with-queues.md)
* [Как использовать разделы и подписки служебной шины](service-bus-dotnet-how-to-use-topics-subscriptions.md)

