---
title: "Основные сведения об обмене сообщениями через служебную шину Azure | Документация Майкрософт"
description: "Описание ретранслятора Azure и обмена сообщениями через служебную шину."
services: service-bus-messaging
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: f99766cb-8f4b-4baf-b061-4b1e2ae570e4
ms.service: service-bus-messaging
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: get-started-article
ms.date: 05/25/2017
ms.author: sethm
ms.openlocfilehash: 3a4382979dd6e18c0e94b4a989bb8289882eeb89
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="service-bus-messaging-flexible-data-delivery-in-the-cloud"></a><span data-ttu-id="06d2b-103">Обмен сообщениями через служебную шину: гибкая доставка данных в облаке</span><span class="sxs-lookup"><span data-stu-id="06d2b-103">Service Bus messaging: flexible data delivery in the cloud</span></span>
<span data-ttu-id="06d2b-104">Служебная шина Microsoft Azure — это надежная служба доставки информации.</span><span class="sxs-lookup"><span data-stu-id="06d2b-104">Microsoft Azure Service Bus is a reliable information delivery service.</span></span> <span data-ttu-id="06d2b-105">Она предназначена для упрощения связи.</span><span class="sxs-lookup"><span data-stu-id="06d2b-105">The purpose of this service is to make communication easier.</span></span> <span data-ttu-id="06d2b-106">Если двум или более сторонам необходимо обмениваться информацией, им требуется координатор связи.</span><span class="sxs-lookup"><span data-stu-id="06d2b-106">When two or more parties want to exchange information, they need a communication facilitator.</span></span> <span data-ttu-id="06d2b-107">Служебная шина — это механизм обмена данными через брокер или третью сторону.</span><span class="sxs-lookup"><span data-stu-id="06d2b-107">Service Bus is a brokered, or third-party communication mechanism.</span></span> <span data-ttu-id="06d2b-108">Работа этой службы аналогична работе почтовой службы в реальном мире.</span><span class="sxs-lookup"><span data-stu-id="06d2b-108">This is similar to a postal service in the physical world.</span></span> <span data-ttu-id="06d2b-109">Почтовая служба упрощает отправку писем и посылок разных типов и гарантирует доставку практически в любую точку мира.</span><span class="sxs-lookup"><span data-stu-id="06d2b-109">Postal services make it very easy to send different kinds of letters and packages with a variety of delivery guarantees, anywhere in the world.</span></span>

<span data-ttu-id="06d2b-110">Подобно доставке писем в почтовой службе, служебная шина обеспечивает гибкую доставку информации как отправителя, так и получателя.</span><span class="sxs-lookup"><span data-stu-id="06d2b-110">Similar to the postal service delivering letters, Service Bus is flexible information delivery from both the sender and the recipient.</span></span> <span data-ttu-id="06d2b-111">Служба обмена сообщениями обеспечивает доставку информации, даже если обе стороны никогда не бывают в сети в то одно и то же время или если они недоступны в один момент времени.</span><span class="sxs-lookup"><span data-stu-id="06d2b-111">The messaging service ensures that the information is delivered even if the two parties are never both online at the same time, or if they aren't available at the exact same time.</span></span> <span data-ttu-id="06d2b-112">Таким образом, принцип обмена сообщениями аналогичен принципу отправки писем, а связь без посредников подобна телефонному звонку (или тому, каким звонок был раньше, когда не было ожидания звонка и идентификатора звонящего, из-за которых это больше напоминает обмен сообщениями через посредника).</span><span class="sxs-lookup"><span data-stu-id="06d2b-112">In this way, messaging is similar to sending a letter, while non-brokered communication is similar to placing a phone call (or how a phone call used to be - before call waiting and caller ID, which are much more like brokered messaging).</span></span>

<span data-ttu-id="06d2b-113">Кроме того, у отправителя сообщения может быть множество требований к характеристикам доставки, в том числе к транзакциям, обнаружению повторений, пакетной обработке, прекращению действия по времени и др.</span><span class="sxs-lookup"><span data-stu-id="06d2b-113">The message sender can also require a variety of delivery characteristics including transactions, duplicate detection, time-based expiration, and batching.</span></span> <span data-ttu-id="06d2b-114">У этих шаблонов также есть почтовые аналоги: повторная доставка, обязательная подпись, изменение адреса или отзыв.</span><span class="sxs-lookup"><span data-stu-id="06d2b-114">These patterns have postal analogies as well: repeat delivery, required signature, address change, or recall.</span></span>

<span data-ttu-id="06d2b-115">Служебная шина поддерживает два различных шаблона обмена сообщениями: с помощью *ретранслятора Azure* и *обмен сообщениями через служебную шину*.</span><span class="sxs-lookup"><span data-stu-id="06d2b-115">Service Bus supports two distinct messaging patterns: *Azure Relay* and *Service Bus Messaging*.</span></span>

## <a name="azure-relay"></a><span data-ttu-id="06d2b-116">Ретранслятор Azure</span><span class="sxs-lookup"><span data-stu-id="06d2b-116">Azure Relay</span></span>
<span data-ttu-id="06d2b-117">Компонент [Ретранслятор WCF](../service-bus-relay/relay-what-is-it.md) в составе ретранслятора Azure — это централизованная служба с эффективно распределенной нагрузкой, поддерживающая различные транспортные протоколы и стандарты веб-служб.</span><span class="sxs-lookup"><span data-stu-id="06d2b-117">The [WCF Relay](../service-bus-relay/relay-what-is-it.md) component of Azure Relay is a centralized (but highly load-balanced) service that supports a variety of different transport protocols and Web services standards.</span></span> <span data-ttu-id="06d2b-118">К ним относятся SOAP, WS-* и даже REST.</span><span class="sxs-lookup"><span data-stu-id="06d2b-118">This includes SOAP, WS-*, and even REST.</span></span> <span data-ttu-id="06d2b-119">[Служба ретрансляции](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md) предоставляет разнообразные варианты подключения для ретрансляции и позволяет согласовывать подключения одноранговой сети, если это возможно.</span><span class="sxs-lookup"><span data-stu-id="06d2b-119">The [relay service](../service-bus-relay/service-bus-dotnet-how-to-use-relay.md) provides a variety of different relay connectivity options and can help negotiate direct peer-to-peer connections when it is possible.</span></span> <span data-ttu-id="06d2b-120">Служебная шина оптимизирована для разработчиков .NET, использующих Windows Communication Foundation (WCF), как с точки зрения производительности, так и с точки зрения удобства и обеспечивает полный доступ к службе ретрансляции через интерфейсы SOAP и REST.</span><span class="sxs-lookup"><span data-stu-id="06d2b-120">Service Bus is optimized for .NET developers who use the Windows Communication Foundation (WCF), both with regard to performance and usability, and provides full access to its relay service through SOAP and REST interfaces.</span></span> <span data-ttu-id="06d2b-121">Это позволяет интегрировать со служебной шиной любую программную среду SOAP или REST.</span><span class="sxs-lookup"><span data-stu-id="06d2b-121">This makes it possible for any SOAP or REST programming environment to integrate with Service Bus.</span></span>

<span data-ttu-id="06d2b-122">Служба ретрансляции поддерживает традиционную одностороннюю передачу сообщений, обмен сообщениями на основе запроса/ответа и децентрализованный обмен сообщениями.</span><span class="sxs-lookup"><span data-stu-id="06d2b-122">The relay service supports traditional one-way messaging, request/response messaging, and peer-to-peer messaging.</span></span> <span data-ttu-id="06d2b-123">Она также поддерживает распространение событий по сети Интернет для поддержки сценариев публикации/подписки и двунаправленного обмена данными по сокетам, что позволяет повысить эффективность соединений типа «точка — точка».</span><span class="sxs-lookup"><span data-stu-id="06d2b-123">It also supports event distribution at Internet-scope to enable publish-subscribe scenarios and bi-directional socket communication for increased point-to-point efficiency.</span></span> <span data-ttu-id="06d2b-124">В схеме обмена сообщениями с ретрансляцией локальная служба подключается к службе ретрансляции через исходящий порт и создает сокет для двунаправленного обмена данными с привязкой к конкретному адресу встречи.</span><span class="sxs-lookup"><span data-stu-id="06d2b-124">In the relayed messaging pattern, an on-premises service connects to the relay service through an outbound port and creates a bi-directional socket for communication tied to a particular rendezvous address.</span></span> <span data-ttu-id="06d2b-125">После этого клиент может обмениваться данными с локальной службой, отправляя сообщения в службу ретрансляции, которая перенаправит их по нужному адресу.</span><span class="sxs-lookup"><span data-stu-id="06d2b-125">The client can then communicate with the on-premises service by sending messages to the relay service targeting the rendezvous address.</span></span> <span data-ttu-id="06d2b-126">Служба ретрансляции "ретранслирует" сообщения в локальную службу через созданный сокет двунаправленного обмена данными.</span><span class="sxs-lookup"><span data-stu-id="06d2b-126">The relay service will then "relay" messages to the on-premises service through the bi-directional socket already in place.</span></span> <span data-ttu-id="06d2b-127">Клиенту не требуются прямое подключение к локальной службе и информация о ее местонахождении, а локальной службе не требуется открывать на брандмауэре входящие порты.</span><span class="sxs-lookup"><span data-stu-id="06d2b-127">The client does not need a direct connection to the on-premises service, nor is it required to know where the service resides, and the on-premises service does not need any inbound ports open on the firewall.</span></span>

<span data-ttu-id="06d2b-128">Подключение между локальной службой и службой ретранслятора создается с помощью привязок WCF для ретранслятора.</span><span class="sxs-lookup"><span data-stu-id="06d2b-128">You initiate the connection between your on-premises service and the relay service, using a suite of WCF "relay" bindings.</span></span> <span data-ttu-id="06d2b-129">Привязки для ретрансляции сопоставляются в фоновом режиме с элементами привязки транспорта, предназначенными для создания компонентов канала WCF, которые интегрируются со служебной шиной в облаке.</span><span class="sxs-lookup"><span data-stu-id="06d2b-129">Behind the scenes, the relay bindings map to transport binding elements designed to create WCF channel components that integrate with Service Bus in the cloud.</span></span>

<span data-ttu-id="06d2b-130">Ретранслятор WCF дает множество преимуществ, но требует, чтобы сервер и клиент находились в сети одновременно для отправки и получения сообщений.</span><span class="sxs-lookup"><span data-stu-id="06d2b-130">WCF Relay provides many benefits, but requires the server and client to both be online at the same time in order to send and receive messages.</span></span> <span data-ttu-id="06d2b-131">Это не является оптимальным ни для подключений типа HTTP, в которых запросы обычно не существуют достаточно долго, ни для клиентов, подключающихся лишь время от времени, например браузеров, мобильных приложений и т. д.</span><span class="sxs-lookup"><span data-stu-id="06d2b-131">This is not optimal for HTTP-style communication, in which the requests may not be typically long-lived, nor for clients that connect only occasionally, such as browsers, mobile applications, and so on.</span></span> <span data-ttu-id="06d2b-132">Обмен сообщениями через посредника поддерживает разделенный обмен данными, и он имеет свои преимущества; клиенты и серверы могут подключаться по необходимости и выполнять свои операции в асинхронном режиме.</span><span class="sxs-lookup"><span data-stu-id="06d2b-132">Brokered messaging supports decoupled communication, and has its own advantages; clients and servers can connect when needed and perform their operations in an asynchronous manner.</span></span>

## <a name="brokered-messaging"></a><span data-ttu-id="06d2b-133">Обмен сообщениями через посредника</span><span class="sxs-lookup"><span data-stu-id="06d2b-133">Brokered messaging</span></span>
<span data-ttu-id="06d2b-134">В отличие от схемы с ретранслятором, обмен сообщениями через служебную шину, или [обмен сообщениями через брокер](service-bus-queues-topics-subscriptions.md), можно считать асинхронным или "временно разделенным".</span><span class="sxs-lookup"><span data-stu-id="06d2b-134">In contrast to the relay scheme, Service Bus messaging, or [brokered messaging](service-bus-queues-topics-subscriptions.md) can be thought of as asynchronous, or "temporally decoupled."</span></span> <span data-ttu-id="06d2b-135">Производители (отправители) и потребители (получатели) не должны находиться в сети одновременно.</span><span class="sxs-lookup"><span data-stu-id="06d2b-135">Producers (senders) and consumers (receivers) do not have to be online at the same time.</span></span> <span data-ttu-id="06d2b-136">Инфраструктура обмена сообщениями надежно хранит сообщения в «посреднике» (например, в очереди), пока принимающая сторона не будет готова к приему.</span><span class="sxs-lookup"><span data-stu-id="06d2b-136">The messaging infrastructure reliably stores messages in a "broker" (such as a queue) until the consuming party is ready to receive them.</span></span> <span data-ttu-id="06d2b-137">Это позволяет разделять компоненты распределенного приложения как в плановых ситуациях, например для обслуживания, так и в экстренных случаях, чтобы исключить влияние сбоя одного компонента на систему в целом.</span><span class="sxs-lookup"><span data-stu-id="06d2b-137">This allows the components of the distributed application to be disconnected, either voluntarily; for example, for maintenance, or due to a component crash, without affecting the entire system.</span></span> <span data-ttu-id="06d2b-138">Кроме того, принимающее приложение может подключаться к сети только в определенное время дня, например система управления запасами, которую необходимо запускать только в конце рабочего дня.</span><span class="sxs-lookup"><span data-stu-id="06d2b-138">Furthermore, the receiving application may only have to come online during certain times of the day, such as an inventory management system that only is required to run at the end of the business day.</span></span>

<span data-ttu-id="06d2b-139">Основные компоненты инфраструктуры обмена сообщениями через брокер служебной шины — это очереди, темы и подписки.</span><span class="sxs-lookup"><span data-stu-id="06d2b-139">The core components of the Service Bus brokered messaging infrastructure are queues, topics, and subscriptions.</span></span>  <span data-ttu-id="06d2b-140">Главное различие состоит в том, что темы поддерживают возможности публикации и подписки, которые могут использоваться для сложных логик маршрутизации и доставки на основе содержимого, в том числе для отправки нескольким получателям.</span><span class="sxs-lookup"><span data-stu-id="06d2b-140">The primary difference is that topics support publish/subscribe capabilities that can be used for sophisticated content-based routing and delivery logic, including sending to multiple recipients.</span></span> <span data-ttu-id="06d2b-141">Эти компоненты позволяют реализовать новые асинхронные сценарии обмена сообщениями, такие как временное отключение, публикация, подписка и балансировка нагрузки.</span><span class="sxs-lookup"><span data-stu-id="06d2b-141">These components enable new asynchronous messaging scenarios, such as temporal decoupling, publish/subscribe, and load balancing.</span></span> <span data-ttu-id="06d2b-142">Дополнительные сведения об этих компонентах см. в статье [Очереди, разделы и подписки служебной шины](service-bus-queues-topics-subscriptions.md).</span><span class="sxs-lookup"><span data-stu-id="06d2b-142">For more information about these messaging entities, see [Service Bus queues, topics, and subscriptions](service-bus-queues-topics-subscriptions.md).</span></span>

<span data-ttu-id="06d2b-143">Как и в случае с инфраструктурой ретранслятора WCF, возможности обмена сообщениями через брокер предоставляются для программистов WCF и .NET Framework, а также для REST.</span><span class="sxs-lookup"><span data-stu-id="06d2b-143">As with the WCF Relay infrastructure, the brokered messaging capability is provided for WCF and .NET Framework programmers, and also via REST.</span></span>

## <a name="next-steps"></a><span data-ttu-id="06d2b-144">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="06d2b-144">Next steps</span></span>
<span data-ttu-id="06d2b-145">Дополнительную информацию об обмене сообщениями через служебную шину см. в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="06d2b-145">To learn more about Service Bus messaging, see the following topics.</span></span>

* [<span data-ttu-id="06d2b-146">Базовая информация о Service Bus</span><span class="sxs-lookup"><span data-stu-id="06d2b-146">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="06d2b-147">Очереди, разделы и подписки служебной шины</span><span class="sxs-lookup"><span data-stu-id="06d2b-147">Service Bus queues, topics, and subscriptions</span></span>](service-bus-queues-topics-subscriptions.md)
* [<span data-ttu-id="06d2b-148">Как использовать очереди служебной шины</span><span class="sxs-lookup"><span data-stu-id="06d2b-148">How to use Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="06d2b-149">Как использовать разделы и подписки служебной шины</span><span class="sxs-lookup"><span data-stu-id="06d2b-149">How to use Service Bus topics and subscriptions</span></span>](service-bus-dotnet-how-to-use-topics-subscriptions.md)

