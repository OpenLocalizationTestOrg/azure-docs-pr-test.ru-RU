---
title: "Создание облачной службы Hello World для Azure в Eclipse"
description: "Узнайте, как создать простое приложение Hello World с помощью набора средств Azure для Eclipse."
services: 
documentationcenter: java
author: rmcmurray
manager: erikre
editor: 
ms.assetid: 7262e705-59d6-43ce-b888-29a21c8e0cb7
ms.service: multiple
ms.workload: na
ms.tgt_pltfrm: multiple
ms.devlang: Java
ms.topic: article
ms.date: 04/14/2017
ms.author: robmcm
ms.openlocfilehash: 9b31f0faeb6ee7b5e7b8fe3a1f2827133d6188e6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="create-a-hello-world-cloud-service-for-azure-in-eclipse"></a>Создание облачной службы Hello World для Azure в Eclipse
Приведенные здесь шаги демонстрируют, как создать и развернуть базовое приложение JSP в Azure с помощью набора средств Azure для Eclipse. Пример с JSP приведен для простоты, но при развертывании в Azure можно применять практически идентичные шаги для сервлета Java.

Приложение будет выглядеть следующим образом:

![][ic600360]

## <a name="prerequisites"></a>Предварительные требования
* Java Developer Kit (JDK), версия 1.7 или более поздняя.
* Интегрированная среда разработки Eclipse для разработчиков Java EE, версия Indigo или более поздняя. Скачать ее можно на веб-странице <http://www.eclipse.org/downloads/>.
* Дистрибутив веб-сервера или сервера приложений на основе Java, например Apache Tomcat, GlassFish, сервер приложений JBoss, Jetty или IBM® WebSphere® Application Server Liberty Core.
* Подписка на Azure, которую можно получить, перейдя по ссылке <http://azure.microsoft.com/pricing/purchase-options/>.
* Набор средств Azure для Eclipse. Дополнительные сведения см. в статье [Установка набора средств Azure для Eclipse][Installing the Azure Toolkit for Eclipse].

## <a name="to-create-a-hello-world-application"></a>Создание приложения Hello World
Сначала необходимо создать проект Java.

1. Запустите Eclipse и в меню **Файл** щелкните **Создать**, а затем — **Dynamic Web Project** (Динамический веб-проект). (Если элемента **Dynamic Web Project** (Динамический веб-проект) нет в списке доступных проектов после выбора пунктов **Файл**, **Создать**, то сделайте следующее: щелкните **Файл**, **Создать**, **Проект**, разверните узел **Интернет**, щелкните **Dynamic Web Project** (Динамический веб-проект) и нажмите кнопку **Далее**.)

1. Для целей данного руководства присвойте проекту имя **MyHelloWorld**. (Обязательно используйте это имя, так как на последующих шагах в руководстве предполагается, что WAR-файл будет называться MyHelloWorld.) Экран будет выглядеть следующим образом:

   ![][ic589576]

1. Нажмите кнопку **Готово**

1. В окне обозревателя проектов в Eclipse разверните узел **MyHelloWorld**. Щелкните правой кнопкой мыши **WebContent**, выберите **Создать**, затем щелкните **JSP File** (JSP-файл).

1. В диалоговом окне **New JSP File** (Новый JSP-файл) укажите для файла имя **index.jsp**. Сохраните родительскую папку с именем **MyHelloWorld/WebContent**, как показано в следующем примере:

   ![][ic659262]

1. Для рассматриваемого примера в диалоговом окне **Select JSP Template** (Выбор шаблона JSP) выберите **New JSP File (html)** (Новый JSP-файл (HTML)) и нажмите кнопку **Готово**.

1. Открыв файл index.jsp в Eclipse, добавьте код для динамического отображения фразы **Hello World!** в существующий элемент `<body>`. Обновленное содержимое элемента `<body>` должно иметь следующий вид:
   ```
   <body>
   <b><% out.println("Hello World!"); %></b>
   </body>
   ```
1. Сохраните index.jsp.

## <a name="to-deploy-your-application-to-azure-the-quick-and-simple-way"></a>Простой и быстрый способ развернуть приложение в Azure
Как только веб-приложение Java готово к тестированию, можно использовать следующий упрощенный подход, чтобы опробовать его непосредственно в облаке Azure.

1. В обозревателе проектов Eclipse щелкните правой кнопкой мыши **MyHelloWorld**.

2. На панели инструментов Eclipse нажмите разворачивающуюся кнопку **Опубликовать** и выберите **Publish As Azure Cloud Service** (Опубликовать как облачную службу Azure).

   ![][publishDropdownButton]

3. Если это приложение публикуется в Azure впервые, и ранее для него не был создан проект развертывания Azure, он будет создан автоматически. Вы увидите следующий запрос, в котором также указаны пакет JDK и сервер приложений, которые будут автоматически развернуты для запуска приложения.

   ![][ic789598]
   
   Этот упрощенный подход обеспечивает простой и быстрый способ тестирования приложения в Azure без необходимости настраивать конкретный сервер или JDK, которые отличаются от установленных по умолчанию. Если вас устраивают значения по умолчанию, нажмите кнопку **ОК** , чтобы перейти к следующим шагам.
   В то же время, если вы хотите изменить JDK или сервер приложений, которые будут использованы для вашего приложения, можно сделать это позже, изменив автоматически созданный проект развертывания Azure, или прямо сейчас нажмите кнопку **Отменить** и прочитайте раздел **О проектах развертывания Azure** этого руководства.

4. В диалоговом окне **Публикация в Azure** :

   1. Если список **Подписки** все еще пуст, выполните следующие действия для импорта сведений о подписке.
      1. Щелкните **Импорт из PUBLISHSETTINGS-файла**.
      2. В диалоговом окне **Import Subscription Information** (Импорт сведений о подписке) щелкните **Download PUBLISH-SETTINGS File** (Скачать PUBLISHSETTINGS-файл). Если вы еще не вошли в учетную запись Azure, вам будет предложено войти. Затем вам будет предложено сохранить файл настроек публикации Azure. Сохраните его на локальном компьютере.
      3. В диалоговом окне **Import Subscription Information** (Импорт сведений о подписке) нажмите кнопку **Обзор**, выберите файл настроек публикации, локально сохраненный на предыдущем шаге, и нажмите кнопку **Открыть**. Экран должен выглядеть следующим образом: ![][ic644267]
      4. Нажмите кнопку **ОК**.
   2. В поле **Подписка**выберите подписку, которую вы хотите использовать для развертывания.
   3. В поле **Учетная запись хранения** выберите учетную запись хранения, которую требуется использовать, или нажмите кнопку **Создать**, чтобы создать учетную запись хранения.
   4. В поле **Имя службы** выберите облачную службу, которую требуется использовать, или нажмите кнопку **Создать**, чтобы создать облачную службу.
   5. В поле **Целевая ОС**выберите версию операционной системы, которую требуется использовать для развертывания.
   6. В поле **Целевая среда** для целей этого руководства выберите **Промежуточная среда**. (Когда вы будете готовы выполнить развертывание на рабочем сайте, можно будет изменить это значение на **Рабочая**.)
   7. (Дополнительно.) Если необходимо, чтобы новое развертывание автоматически заменило собой предыдущее развертывание, следует установить флажок **Overwrite previous deployment** (Перезаписать предыдущее развертывание). Это позволит вам предотвратить проблемы, связанные с ошибкой «409 Конфликт» при публикации в том же расположении.
      Обратите внимание, что диалоговое окно **Publish to Azure** (Публикация в Azure) содержит раздел **Удаленный доступ**. По умолчанию удаленный доступ выключен, и мы не будем включать его в этом примере. Чтобы включить удаленный доступ, необходимо ввести имя пользователя и пароль для удаленного входа. Дополнительные сведения об удаленном доступе см. в статье [Включение удаленного доступа для развертываний Azure в Eclipse][Enabling Remote Access for Azure Deployments in Eclipse].
      Диалоговое окно **Publish to Azure** (Публикация в Azure) будет выглядеть следующим образом: ![][ic719488]

5. Для публикации в промежуточной среде нажмите кнопку **Опубликовать** .

   При появлении запроса на выполнение полной сборки нажмите кнопку **Да**. Первая сборка может занять несколько минут.
   В разделе представлений с вкладками Eclipse откроется **журнал действий Azure** .
   ![][ic719489] Этот журнал, а также представление **Консоль** можно использовать, чтобы следить за ходом выполнения развертывания. Альтернативным вариантом является вход на [портал управления Azure][Azure Management Portal] и использование раздела **Облачные службы**.

6. После успешного развертывания в **журнале действий Azure** отобразится состояние **Опубликовано**. Щелкните **Опубликовано**, как показано на следующем рисунке, и в браузере откроется экземпляр развертывания.

   ![][ic719490]

Так как это было развертывание в промежуточной среде, DNS-имя будет иметь вид http://&lt;*guid*&gt;.cloudapp.net, а URL-адрес будет содержать DNS-имя и суффикс приложения. Например, http://447564652c20426f6220526f636b7321.cloudapp.net/MyHelloWorld. (В части **MyHelloWorld** учитывается регистр.) При щелчке имени развертывания на портале управления платформой Azure (в разделе «Облачные службы» на портале управления) отобразится DNS-имя.

Несмотря на то что это пошаговое руководство предназначено для развертывания в промежуточной среде, для развертывания в рабочей среде выполняются точно такие же действия. Только в диалоговом окне **Publish to Azure** (Публикация в Azure) для параметра **Целевая среда** необходимо выбрать **Рабочая** вместо **Промежуточная среда**. В результате развертывания в рабочей среде URL-адрес будет основан на выбранном вами DNS-имени, а не на GUID, используемом в промежуточной среде.

> [!WARNING]
> На этом этапе вы развернули приложение Azure в облаке. Но прежде чем продолжить, учтите, что развернутое приложение продолжает увеличивать оплачиваемое время вашей подписки, даже если оно не запущено. Поэтому крайне важно удалять ненужные развертывания из подписки Azure.
> 
> 

## <a name="about-azure-deployment-projects"></a>О проектах развертывания Azure
Чтобы развернуть одно или несколько приложений Java в Azure, необходим проект развертывания Azure. Он выполняет роль пакета, в который должны заключаться приложения, чтобы быть опубликованными в Azure.

Помимо сведений о приложениях проект развертывания Azure также содержит информацию о других ключевых компонентах развертывания, главные из которых: контейнер сервера приложений, в котором запускается веб-приложение, и среда выполнения Java. В Azure доступно большое количество сред выполнения Java и серверов приложений Java.

Несмотря на то, что приведенный пример значительно упрощен в целях обучения, проект развертывания Azure также может содержать другие важные сведения о конфигурации, позволяющие создавать довольно сложные масштабируемые, высокодоступные, многоуровневые облачные службы в приложениях. Вы можете включить **сходство сеансов** ("прикрепленные сеансы"), **быстрое кэширование**, **разгрузку SSL**, **маршрутизацию брандмауэра и порта**, **удаленный доступ** и ряд других эффективных возможностей.

Если вы выполнили действия в предыдущем разделе этого руководства ("Простой и быстрый способ развернуть приложение в Azure"), теперь в обозревателе проектов будет отображаться новый автоматически созданный проект развертывания Azure с именем **MyHelloWorld_onAzure**.

Можно также начать с самостоятельного создания пустого проекта развертывания Azure, а затем добавить в него приложения. Это более длинный путь, но таким образом вы сможете лучше управлять начальной конфигурацией.

Чтобы создать проект развертывания Azure с нуля, нажмите кнопку **New Azure Deployment Project** (Создать проект развертывания Azure) ![][ic710876].

Независимо от того, работаете ли вы с уже существующим проектом развертывания Azure или создаете его с нуля, в любой момент можно изменить его параметры конфигурации и компоненты, такие как JDK или сервер приложений.

Чтобы изменить JDK, сервер приложений или список приложений в существующем проекте развертывания Azure сделайте следующее:

1. В обозревателе проектов разверните узел проекта (например, **MyHelloWorld_onAzure**).

2. Щелкните правой кнопкой мыши **WorkerRole1**

3. В контекстном меню разверните подменю **Azure** .

4. Нажмите кнопку **Конфигурация сервера**

Вне зависимости от того, перешли ли вы к конфигурации сервера путем внесения изменений в существующий проект развертывания Azure, как показано выше, или путем создания нового проекта с нуля, вы увидите те же диалоговые окна для настройки компонентов JDK, сервера и приложения. Дополнительные сведения об изменении параметров в этих диалоговых окнах, например, изменении JDK, сервера приложений и о добавлении или удалении приложений в развертывании, см. в статье [Свойства конфигурации сервера][Server configuration properties].

## <a name="windows-only-to-deploy-your-application-to-the-compute-emulator"></a>Только для Windows. Развертывание приложения в эмуляторе вычислений

> [!NOTE]
> Эмулятор Azure доступен только в Windows. Этот раздел можно пропустить, если вы используете другую операционную систему.
> 
> 

Если вы создали проект развертывания Azure, следуя описанным выше действиям, а именно неявно путем публикации приложения в Azure, то JDK и серверы приложения были настроены для облака, а не для локальной эмуляции. Чтобы подготовить проект для тестирования в локальном эмуляторе, сделайте следующее:

1. В обозревателе проектов Eclipse щелкните **MyHelloWorld_onAzure**.

2. Щелкните правой кнопкой мыши **WorkerRole1**.

3. В контекстном меню разверните подменю **Azure** .

4. Щелкните **Конфигурация сервера**.

5. На вкладке **JDK** проверьте, выполнил ли набор средств предварительную настройку локального JDK. Если нет или если требуется изменить предложенные значения по умолчанию, следует установить флажок **Использовать JDK из этого пути к файлу для локального тестирования** , а также задать желаемый путь установки JDK. Если вы хотите изменить его, нажмите кнопку **Обзор** и с помощью элемента управления «Обзор» выберите расположение каталога JDK, которое требуется использовать.

6. Откройте вкладку **Сервер** .

7. В текстовом поле **Local server path** (Путь к локальному серверу) в нижней части диалогового окна введите путь к локально установленному серверу, который соответствует типу и номеру основной версии сервера, выбранному в верхней части диалогового окна под флажком **Deploy a server of this type** (Развернуть сервер этого типа). Если вы хотите использовать другой тип или основную версию сервера приложений, сначала измените выбор в списке под этим флажком.

8. Нажмите кнопку **ОК**.

9. На панели инструментов Eclipse нажмите кнопку **Run in Azure Emulator** (Запуск в эмуляторе Azure) ![][ic710879]. Если кнопка **Run in Azure Emulator** (Запуск в эмуляторе Azure) недоступна, в обозревателе проектов Eclipse выберите **MyHelloWorld_onAzure** и откройте текущее окно. Сначала будет запущена полная сборка проекта, после которой в эмуляторе вычислений запустится веб-приложение Java. (Обратите внимание, что в зависимости от характеристик производительности компьютера первая сборка может занять от нескольких секунд до нескольких минут, но последующие сборки будут запускаться быстрее.) После выполнения первого шага сборки служба контроля учетных записей Windows (UAC) выведет запрос на разрешение этой команды для внесения изменений в компьютер. Щелкните **Да**.

> [!IMPORTANT]
> Если запрос UAC не отображается, найдите на панели задач Windows значок UAC и щелкните его. Иногда запрос UAC не отображается поверх всех окон, а виден только как значок на панели задач.
> 
> 

1. Проанализируйте выходные данные в пользовательском интерфейсе эмулятора вычислений, чтобы определить наличие проблем с проектом. В зависимости от содержимого развертывания для полного запуска приложения в эмуляторе вычислений может потребоваться несколько минут.

2. Запустите браузер и используйте URL-адрес `http://localhost:8080/MyHelloWorld` в качестве адреса (в части `MyHelloWorld` URL-адреса учитывается регистр). Приложение MyHelloWorld (выходные данные index.jsp) должно выглядеть следующим образом:

   ![][ic589579]

Когда вы будете готовы остановить выполнение приложения в эмуляторе вычислений, на панели инструментов Eclipse нажмите кнопку **Reset Azure Emulator** (Сбросить эмулятор Azure) ![][ic710880].

## <a name="to-delete-your-deployment"></a>Удаление развертывания
Чтобы удалить развертывание в наборе средств Azure для Eclipse, в обозревателе проектов Eclipse выберите **MyHelloWorld_onAzure** и откройте текущее окно, а затем на панели инструментов Eclipse нажмите кнопку **Отменить публикацию** ![][ic710883]. (Эту же операцию можно выполнить, щелкнув правой кнопкой мыши **MyHelloWorld_onAzure** в обозревателе проектов Eclipse, выбрав **Azure** и **Undeploy from Azure Cloud** (Отменить развертывание в облаке Azure).) Отобразится диалоговое окно **Unpublish Azure Project** (Отменить публикацию проекта Azure).

![][ic719491]

Выберите подписку и облачную службу, содержащую развертывание, выберите развертывание, которое требуется удалить, и нажмите кнопку **Отменить публикацию**.

(Вместо набора средств для удаления развертывания можно воспользоваться разделом **Облачные службы** на портале управления Azure. Перейдите к развертыванию, выберите его и нажмите кнопку **Удалить**. Развертывание будет остановлено, а затем удалено. Если требуется только остановить развертывание, но не удалять его, вместо кнопки **Удалить** нажмите кнопку **Остановить** (но, как было сказано выше, если развертывание не будет удалено, его оплачиваемое время будет увеличиваться, даже если оно не выполняется).)

## <a name="see-also"></a>См. также
[Набор средств Azure для Eclipse][Azure Toolkit for Eclipse]

[Установка набора средств Azure для Eclipse][Installing the Azure Toolkit for Eclipse] 

[Новые возможности набора средств Azure для Eclipse][What's New in the Azure Toolkit for Eclipse]

Дополнительные сведения об использовании Azure с Java можно найти в [Центре разработчиков Java для Azure][Azure Java Developer Center].

<!-- URL List -->

[Azure Java Developer Center]: http://go.microsoft.com/fwlink/?LinkID=699547
[Azure Management Portal]: http://go.microsoft.com/fwlink/?LinkID=512959
[Azure Role Properties]: http://go.microsoft.com/fwlink/?LinkID=699525
[Azure Toolkit for Eclipse]: http://go.microsoft.com/fwlink/?LinkID=699529
[Enabling Remote Access for Azure Deployments in Eclipse]: http://go.microsoft.com/fwlink/?LinkID=699538
[Installing the Azure Toolkit for Eclipse]: http://go.microsoft.com/fwlink/?LinkId=699546
[Server configuration properties]: http://go.microsoft.com/fwlink/?LinkID=699525#server_configuration_properties
[What's New in the Azure Toolkit for Eclipse]: http://go.microsoft.com/fwlink/?LinkID=699552

<!-- IMG List -->

[ic589576]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic589576.png
[ic589579]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic589579.png
[ic600360]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic600360.png
[ic644267]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic644267.png
[ic659262]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic659262.png
[ic710876]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic710876.png
[ic710879]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic710879.png
[ic710880]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic710880.png
[ic710882]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic710882.png
[ic710883]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic710883.png
[ic719488]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic719488.png
[ic719489]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic719489.png
[ic719490]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic719490.png
[ic719491]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic719491.png
[ic789598]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/ic789598.png
[publishDropdownButton]: ./media/azure-toolkit-for-eclipse-creating-a-hello-world-application/publishDropdownButton.png

<!-- Legacy MSDN URL = https://msdn.microsoft.com/library/azure/hh690944.aspx -->
