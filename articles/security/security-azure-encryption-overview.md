---
title: "Общие сведения о шифровании Azure | Документация Майкрософт"
description: "Дополнительные сведения о различных возможностях шифрования в Azure"
services: security
documentationcenter: na
author: Barclayn
manager: MBaldwin
editor: TomShinder
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ums.workload: na
ms.date: 08/18/2017
ms.author: barclayn
ms.openlocfilehash: 752568747ab96bc0a9c7fc5f24ff28c3bce4e09f
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="azure-encryption-overview"></a>Общие сведения о шифровании в Azure

В этой статье представлен обзор использования шифрования в Microsoft Azure. Здесь приведены сведения об основных областях шифрования, включая шифрование неактивных данных, шифрование данных в процессе, а также об управлении ключами с помощью Key Vault. В каждом разделе содержатся ссылки для получения дополнительных сведений.

## <a name="encryption-of-data-at-rest"></a>Шифрование неактивных данных

К неактивным данным относятся сведения, хранящиеся в постоянном хранилище на физическом носителе в любом цифровом формате. Это файлы на магнитных или оптических носителях, архивированные данные и резервные копии данных. Microsoft Azure предлагает различные решения для хранения данных для разных нужд, включая дисковое и файловое хранилище, а также хранилище больших двоичных объектов и таблиц. Корпорация Майкрософт также предоставляет возможности шифрования для защиты [базы данных SQL Azure](../sql-database/sql-database-technical-overview.md), [Cosmos DB](../cosmos-db/introduction.md) и Azure Data Lake.

Шифрование неактивных данных доступно для службы с облачными моделями Azure "программное обеспечение как услуга" (SaaS), "платформа как услуга" (PaaS) и "инфраструктура как услуга" (IaaS). В этом документе приводятся ресурсы, которые помогут вам воспользоваться различными вариантами шифрования Azure.

Подробные сведения о шифровании неактивных данных в Azure см. в [этой статье](azure-security-encryption-atrest.md)

## <a name="azure-encryption-models"></a>Модели шифрования Azure

Azure поддерживает различные модели шифрования, включая шифрование на стороне сервера с помощью ключей, управляемых службами, ключей, управляемых клиентами в Azure Key Vault, или ключей на оборудовании, управляемом клиентом. Шифрование на стороне клиента позволяет хранить ключи локально или в другом защищенном месте, а также управлять ими.

### <a name="client-side-encryption"></a>шифрования на стороне клиента

Шифрование на стороне клиента выполняется за пределами Azure. При шифровании на стороне клиента шифруются такие данные:

- Данные, зашифрованные приложением, выполняющимся в центре обработки данных клиента, или приложением службы.
- Зашифрованные данные, полученные Azure.

При шифровании на стороне клиента у поставщика облачных служб нет доступа к ключам шифрования и он не может расшифровать эти данные. Вы полностью управляете ключами.

### <a name="server-side-encryption"></a>Шифрование на стороне сервера

Три модели шифрования на стороне сервера имеют разные характеристики управления ключами, которые можно выбрать в соответствии с требованиями.

- **Ключи, управляемые службами**, обеспечивают возможности управления, удобство и низкие издержки.

- **Ключи, управляемые клиентом**, дают возможность контролировать ключи, включая возможность использования собственных ключей (BYOK) или их создания.

- **Ключи на оборудовании, управляемом клиентом**, позволяют управлять ключами в собственном репозитории вне доступа корпорации Майкрософт. Это называется размещением собственного ключа (HYOK). Однако конфигурация сложна, потому большинство служб Azure не поддерживают эту модель.

### <a name="azure-disk-encryption"></a>Дисковое шифрование Azure

Виртуальные машины Windows и Linux можно защитить с помощью [шифрования дисков Azure](azure-security-disk-encryption.md), при котором используется технология [Windows BitLocker](https://technet.microsoft.com/library/cc766295(v=ws.10).aspx), и Linux [DM-Crypt](https://en.wikipedia.org/wiki/Dm-crypt) для защиты дисков операционной системы и дисков данных с шифрованием всего тома.

Защита ключей шифрования и секретов обеспечивается в подписке [Azure Key Vault](../key-vault/key-vault-whatis.md). Виртуальные машины, зашифрованные с помощью конфигурации ключа шифрования ключей, можно архивировать и восстанавливать с использованием службы Azure Backup.

### <a name="azure-storage-service-encryption"></a>Шифрование службы хранилища Azure

Неактивные данные, которые хранятся в хранилище Azure (хранилище больших двоичных объектов и файловое хранилище), можно зашифровать на стороне сервера и клиента.

При [шифровании службы хранилища Azure](../storage/storage-service-encryption.md) (SSE) данные можно автоматически зашифровать перед их сохранением и автоматически расшифровать после их получения. Таким образом процесс становится полностью понятен пользователям. Здесь используется 256-разрядное [шифрование AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard), которое является одним из сильнейших блочных шифров. При этом обеспечивается полностью прозрачное шифрование, расшифровка и управление ключами.

### <a name="client-side-encryption-of-azure-blobs"></a>Шифрование больших двоичных объектов Azure на стороне клиента

Такой тип шифрования можно выполнить по-разному.

Вы можете воспользоваться клиентской библиотекой службы хранилища Azure для пакета NuGet .NET для шифрования данных в клиентских приложениях до их отправки в службу хранилища Azure.

Дополнительные сведения о клиентской библиотеке службы хранилища Azure для пакета NuGet .NET см. в документации по [службе хранилища Azure 8.3.0](https://www.nuget.org/packages/WindowsAzure.Storage).

При использовании шифрования на стороне клиента с Azure Key Vault данные шифруются с помощью одноразового симметричного ключа шифрования содержимого (CEK), который создает пакет SDK для клиента службы хранилища Azure. CEK зашифрован с помощью ключа шифрования ключей (KEK), который может быть парой симметричных или асимметричных ключей. Ими можно управлять локально или сохранить в Azure Key Vault. Зашифрованные данные затем передаются в службу хранилища Azure.

Дополнительные сведения о шифровании на стороне клиента с помощью Azure Key Vault и инструкции см. в документе [Tutorial: Encrypt and decrypt blobs in Microsoft Azure Storage using Azure Key Vault](../storage/storage-encrypt-decrypt-blobs-key-vault.md) (Шифрование и расшифровка больших двоичных объектов в хранилище Microsoft Azure с помощью Azure Key Vault).

Вы также можете использовать клиентскую библиотеку службы хранилища Azure для Java, чтобы шифровать данные на стороне клиента перед передачей в службу хранилища Azure и расшифровывать их при скачивании в клиент. Эта библиотека также поддерживает интеграцию с [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) для управления ключами учетной записи хранения.

### <a name="encryption-of-data-at-rest-with-azure-sql-database"></a>Шифрование неактивных данных с помощью базы данных SQL Azure

[База данных SQL Azure](../sql-database/sql-database-technical-overview.md) — это реляционная база данных общего назначения (служба) в Microsoft Azure, которая поддерживает такие структуры, как реляционные данные, JSON, пространственные данные и XML. Azure SQL поддерживает шифрование на стороне сервера путем прозрачного шифрования данных (TDE) и шифрование на стороне клиента через Always Encrypted.

#### <a name="transparent-data-encryption"></a>Прозрачное шифрование данных

[Прозрачное шифрование данных](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-tde) используется для шифрования файлов данных [SQL Server](https://www.microsoft.com/sql-server/sql-server-2016), [базы данных SQL Azure](../sql-database/sql-database-technical-overview.md) и [хранилища данных SQL Azure](../sql-data-warehouse/sql-data-warehouse-overview-what-is.md) в режиме реального времени с помощью ключа шифрования базы данных (DEK), хранящегося в загрузочной записи базы данных для обеспечения доступности во время восстановления.

TDE обеспечивает защиту данных и файлов журналов с помощью алгоритмов шифрования AES и 3DES. Шифрование файла базы данных выполняется на уровне страницы. Страницы в зашифрованной базе данных шифруются перед записью на диск и расшифровываются во время чтения в памяти. В созданных базах данных Azure SQL TDE включено по умолчанию.

#### <a name="always-encrypted"></a>Постоянное шифрование

Функция [Always Encrypted](https://docs.microsoft.com/sql/relational-databases/security/encryption/always-encrypted-database-engine) в SQL Azure позволяет шифровать данные в клиентских приложениях перед их сохранением в базе данных SQL Azure, а также делегировать права администратора локальной базы данных третьим лицам и обеспечивает разделение между пользователями, владеющими данными и имеющими возможность их просматривать, и пользователями, управляющими данными, у которых не должно быть доступа к ним.

#### <a name="cellcolumn-level-encryption"></a>Шифрование на уровне ячеек и столбцов

База данных SQL Azure позволяет применять симметричное шифрование к столбцу данных с помощью Transact-SQL. Это называется [шифрование на уровне ячейки или столбца](https://docs.microsoft.com/sql/relational-databases/security/encryption/encrypt-a-column-of-data) (CLE), так как при этом можно зашифровать определенные столбцы или даже ячейки данных с помощью разных ключей шифрования. При этом обеспечивается более детальное шифрование, чем при TDE, при котором данные шифруются на страницах.

CLE имеет встроенные функции, которые можно использовать для шифрования данных с помощью симметричных или асимметричных ключей, с помощью открытого ключа сертификата или парольной фразы с использованием 3DES.

### <a name="cosmos-db-database-encryption"></a>Шифрование базы данных Cosmos DB

[Azure Cosmos DB](../cosmos-db/database-encryption-at-rest.md) — это глобально распределенная многомодельная база данных Майкрософт. Данные пользователя, хранящиеся в Cosmos DB во временном хранилище (твердотельные накопители), шифруются по умолчанию. Невозможно включить или отключить такое шифрование. Шифрование неактивных данных реализуется с применением различных технологий обеспечения безопасности, включая безопасные системы хранения ключей, зашифрованные сети и криптографические API. Ключами шифрования управляет корпорация Майкрософт, и их смена осуществляется в соответствии с ее внутренними правилами.

### <a name="at-rest-encryption-in-azure-data-lake"></a>Шифрование неактивных данных в Azure Data Lake

[Azure Data Lake](../data-lake-store/data-lake-store-encryption.md) — корпоративный централизованный репозиторий данных различных типов, собранных до любого формального определения требований или схемы. Azure Data Lake Store поддерживает модель "Включено по умолчанию", прозрачное шифрование неактивных данных, настраиваемое во время создания учетной записи. По умолчанию Data Lake Store управляет ключами автоматически, но вы можете управлять ими вручную.

При шифровании и расшифровке данных используются три типа ключей: главный ключ шифрования (MEK), ключ шифрования данных (DEK) и ключ шифрования блоков (BEK). MEK используется для шифрования DEK, хранящегося на постоянном носителе, а BEK можно получить на основе DEK и блока данных. Если вы управляете собственными ключами, MEK можно сменить.

## <a name="encryption-of-data-in-transit"></a>Шифрование передаваемых данных

Azure предлагает множество механизмов защиты данных при их перемещении из одного расположения в другое.

### <a name="tlsssl-encryption-in-azure"></a>Шифрование TLS и SSL в Azure

Корпорация Майкрософт использует протокол [TLS](https://en.wikipedia.org/wiki/Transport_Layer_Security) для защиты данных при их передаче между облачными службами и клиентами. Центры обработки данных Майкрософт устанавливают подключение по протоколу TLS с клиентскими системами, подключающимися к службам Azure. TLS обеспечивает надежную аутентификацию, конфиденциальность сообщений, целостность (включая обнаружение незаконного изменения, перехвата и подделки сообщений), взаимодействие, гибкость алгоритма, простоту развертывания и использования.

[Полная безопасность пересылки](https://en.wikipedia.org/wiki/Forward_secrecy) (PFS) позволяет защитить соединения между клиентскими системами заказчиков и облачными службами Майкрософт с помощью уникальных ключей. Соединения также используют ключи шифрования на 2048 бит на основе RSA. Благодаря такому сочетанию усложняется перехват данных и доступ к ним во время передачи.

### <a name="azure-storage-transactions"></a>Транзакции со службой хранилища Azure

При взаимодействии со службой хранилища Azure на портале Azure все транзакции выполняются по протоколу HTTPS. Кроме того, для взаимодействия со службой хранилища Azure можно использовать REST API службы хранилища по протоколу HTTPS. Можно принудительно задать использование протокола HTTPS при вызове интерфейсов REST API для доступа к объектам в учетных записях хранения, включив параметр Требуется безопасное перемещение для учетной записи хранения.

Подписанные URL-адреса ([SAS](../storage/storage-dotnet-shared-access-signature-part-1.md)), которые можно использовать для делегирования доступа к объектам службы хранилища Azure, предусматривают возможность указывать, что при использовании подписанных URL-адресов можно использовать только протокол HTTPS. Таким образом любой пользователь, отправляя ссылки с токенами SAS, будет использовать правильный тип протокола.

[Протокол SMB 3.0](https://technet.microsoft.com/library/dn551363(v=ws.11).aspx#BKMK_SMBEncryption), используемый для доступа к общим файловым ресурсам Azure, поддерживает шифрование и может использоваться в Windows Server 2012 R2, Windows 8, Windows 8.1 и Windows 10 для обеспечения доступа между регионами и даже для доступа на компьютере.

При шифровании на стороне клиента данные шифруются перед отправкой в службу хранилища Azure, чтобы обеспечить их шифрование при передаче по сети.

### <a name="smb-encryption-over-azure-virtual-networks"></a>Шифрование SMB через виртуальные сети Azure 

Используя [SMB 3.0](https://support.microsoft.com/help/2709568/new-smb-3-0-features-in-the-windows-server-2012-file-server) в виртуальных машинах Azure под управлением Windows Server 2012 и более поздних версий, вы можете обеспечить защиту данных от незаконного изменения и прослушивания при передаче через виртуальные сети Azure, зашифровав их. Администраторы могут включить шифрование SMB для всего сервера или определенных общих ресурсов.

По умолчанию после включения шифрования SMB для общего ресурса или сервера доступ к зашифрованным общим ресурсам разрешен только клиентам SMB 3.

## <a name="in-transit-encryption-in-azure-virtual-machines"></a>Шифрование во время передачи в виртуальных машинах Azure

В зависимости от типа соединения шифрование данных, передаваемых между виртуальными машинами Azure под управлением Windows, осуществляется несколькими способами.

### <a name="rdp-sessions"></a>Сеансы RDP

Вы можете подключиться к виртуальной машине Azure и войти в нее по [протоколу удаленного рабочего стола](https://msdn.microsoft.com/library/aa383015(v=vs.85).aspx) с клиентского компьютера Windows или с компьютера Mac с установленным клиентом RDP. Данные, передаваемые по сети во время сеанса RDP, можно защитить с помощью протокола TLS.

Кроме того, можно воспользоваться удаленным рабочим столом для подключения к виртуальной машине Linux в Azure

### <a name="secure-access-to-linux-vms-with-ssh"></a>Защита доступа к виртуальным машинам Linux с помощью SSH

С помощью [Secure Shell](../virtual-machines/linux/ssh-from-windows.md) (SSH) можно подключиться к виртуальным машинам Linux, работающим в Azure, для удаленного управления. SSH — это протокол зашифрованного подключения, позволяющий безопасно входить в систему через незащищенные соединения. Это протокол подключения по умолчанию для виртуальных машин Linux, размещенных в Azure. Используя ключи SSH для аутентификации, не нужно применять пароли для входа. SSH использует пару открытого и закрытого ключей (асимметричное шифрование) для аутентификации.

## <a name="azure-vpn-encryption"></a>Шифрование Azure VPN

К Azure можно подключиться через виртуальную частную сеть, создающую безопасный туннель, защищающий данные, отправляемые по сети.

### <a name="azure-vpn-gateway"></a>VPN-шлюз Azure

[VPN-шлюз Azure](../vpn-gateway/vpn-gateway-about-vpn-gateway-settings.md) можно использовать для отправки зашифрованного трафика между виртуальной сетью и локальным расположением по общедоступному подключению или между виртуальными сетями.

VPN типа "сеть — сеть" использует [IPsec](https://en.wikipedia.org/wiki/IPsec) для шифрования транспорта. VPN-шлюзы Azure используют набор предложений по умолчанию. VPN-шлюзы Azure можно настроить для использования настраиваемой политики IPsec/IKE с определенными алгоритмами шифрования и надежностью ключа, а не наборов политик по умолчанию Azure.

### <a name="point-to-site-vpn"></a>VPN типа "точка — сеть";

VPN типа "точка — сеть" позволяет отдельным клиентским компьютерам выполнять доступ к виртуальной сети Azure. [Secure Socket Tunneling Protocol](https://technet.microsoft.com/library/2007.06.cableguy.aspx) (SSTP) используется для создания туннеля VPN и прохождения через брандмауэры (туннель представляет собой HTTPS-соединение). Корневой ЦС собственной внутренней системы PKI можно использовать для подключения типа "точка — сеть".

Вы можете настроить VPN-подключение типа "точка — сеть" к виртуальной сети на портале Azure путем аутентификации на основе сертификата или с помощью PowerShell.

Дополнительные сведения о VPN-подключении типа "точка — сеть" к виртуальным сетям Azure см. в статье [Настройка подключения типа "точка — сеть" к виртуальной сети с помощью проверки подлинности на основе сертификата, используя портал Azure](../vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal.md) и

[Настройка подключения типа "точка — сеть" к виртуальной сети с помощью проверки подлинности на основе сертификата, используя PowerShell](../vpn-gateway/vpn-gateway-howto-point-to-site-rm-ps.md).

### <a name="site-to-site-vpn"></a>VPN "сайт — сайт" 

Подключение VPN-шлюза типа "сеть — сеть" используется для подключения между локальной сетью и виртуальной сетью Azure через туннель VPN по протоколу IPsec/IKE (IKEv1 или IKEv2). Для этого типа подключения требуется локальное VPN-устройство, которому назначен внешний общедоступный IP-адрес.

Вы можете настроить VPN-подключение типа "сеть — сеть" к виртуальной сети на портале Azure с помощью PowerShell или интерфейса командной строки Azure (CLI).

Дополнительные сведения см. в следующих статьях:

[Создание подключения типа "сеть — сеть" на портале Azure](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md);

[Создание виртуальной сети с VPN-подключением типа "сеть — сеть" с помощью PowerShell](../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md);

[Создание виртуальной сети с VPN типа "сеть — сеть" с помощью интерфейса командной строки](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-cli.md).

## <a name="in-transit-encryption-in-azure-data-lake"></a>Шифрование передаваемых данных в Azure Data Lake

Передаваемые (перемещаемые) данные также всегда шифруются в Data Lake Store. Данные не только шифруются перед сохранением на постоянный носитель. Они также всегда защищены при передаче благодаря использованию протокола HTTPS. HTTPS — единственный протокол, который поддерживают интерфейсы REST в Data Lake Store.

Дополнительные сведения о шифровании передаваемых данных в Azure Data Lake см. в документе [Шифрование данных в Azure Data Lake Store](../data-lake-store/data-lake-store-encryption.md).

## <a name="key-management-with-azure-key-vault"></a>Управление ключами с помощью Azure Key Vault

Без соответствующей защиты и управления ключами шифрование бесполезно. Специалисты корпорации Майкрософт рекомендуют использовать Azure Key Vault в качестве решения для управления доступом к ключам шифрования, используемым облачными службами. Разрешения на доступ к ключам можно назначить службам или пользователям с помощью учетных записей Azure Active Directory.

Azure Key Vault освобождает организации от необходимости настройки, обновления и обслуживания аппаратных модулей безопасности и программного обеспечения по управлению ключами. Если вы используете Azure Key Vault, специалисты Майкрософт не видят ваши ключи, а приложения не имеют к ним прямого доступа, поэтому вы сохраняете контроль. Кроме того, аппаратные модули безопасности позволяют импортировать и создавать ключи.

## <a name="next-steps"></a>Дальнейшие действия

- [Общие сведения о безопасности в Azure](security-get-started-overview.md)
- [Обзор сетевой безопасности Azure](security-network-overview.md)
- [Общие сведения о защите базы данных Azure](azure-database-security-overview.md)
- [Общие сведения о безопасности при использовании виртуальных машин Azure](security-virtual-machines-overview.md)
- [Шифрование неактивных данных](azure-security-encryption-atrest.md)
- [Рекомендации по шифрованию и обеспечению защиты данных](azure-security-data-encryption-best-practices.md)
