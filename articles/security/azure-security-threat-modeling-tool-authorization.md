---
title: "aaaAuthorization - Microsoft средства моделирования угроз - Azure | Документы Microsoft"
description: "защиту от угроз, которые представлены в hello средства моделирования угроз"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 3ea7ae2b46baa8578e574e6006b98dfe172829e7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-authorization--mitigations"></a>Механизм безопасности. Авторизация | Устранение рисков 
| Продукт или служба | Статья |
| --------------- | ------- |
| **Граница доверия между компьютерами** | <ul><li>[Убедитесь, что соответствующие списки управления доступом toodata настроенных toorestrict несанкционированного доступа на устройстве hello](#acl-restricted-access)</li><li>[Конфиденциальное пользовательское содержимое приложения должно храниться в каталоге профиля пользователя](#sensitive-directory)</li><li>[Убедитесь, что hello развертывания приложений выполняются с минимальным числом привилегий](#deployed-privileges)</li></ul> |
| **Веб-приложение** | <ul><li>[Обеспечьте последовательный порядок обработки потоков бизнес-логики](#sequential-logic)</li><li>[Реализовать механизм tooprevent перечисления ограничение частоты](#rate-enumeration)</li><li>[Обеспечьте применение соответствующего типа авторизации и соблюдение принципа наименьших необходимых привилегий](#principle-least-privilege)</li><li>[Бизнес-логика и принятие решений об авторизации доступа к ресурсам не должны основываться на параметрах входящего запроса](#logic-request-parameters)</li><li>[Убедитесь, что содержимое и ресурсы не могут быть перечислены или доступны путем несанкционированного просмотра](#enumerable-browsing)</li></ul> |
| **База данных** | <ul><li>[Убедитесь, что учетные записи с минимальными правами доступа используется tooconnect tooDatabase сервера](#privileged-server)</li><li>[Реализация безопасности на УРОВНЕ строк tooprevent клиентам доступ к данным](#rls-tenants)</li><li>[Роль системного администратора должна быть только у необходимых действительных пользователей](#sysadmin-users)</li></ul> |
| **Облачный шлюз Интернета вещей** | <ul><li>[Подключение шлюза tooCloud использование токенов с минимальными правами](#cloud-least-privileged)</li></ul> |
| **Концентратор событий Azure** | <ul><li>[Для создания маркеров устройства используйте ключ SAS с разрешениями только для отправки](#sendonly-sas)</li><li>[Не используйте маркеры доступа, предоставить прямой доступ toohello концентратора событий](#access-tokens-hub)</li><li>[TooEvent, ключи с помощью SAS концентратора, имеют hello минимальные разрешения, необходимые подключиться](#sas-minimum-permissions)</li></ul> |
| **Azure DocumentDB** | <ul><li>[Используйте tooDocumentDB tooconnect маркеры ресурсов по возможности](#resource-docdb)</li></ul> |
| **Граница доверия Azure** | <ul><li>[Включение доступа точного управления tooAzure подписки с помощью RBAC](#grained-rbac)</li></ul> |
| **Граница доверия Service Fabric** | <ul><li>[Ограничить операции toocluster доступа клиента, с помощью RBAC](#cluster-rbac)</li></ul> |
| **Dynamics CRM** | <ul><li>[Выполняйте моделирование безопасности, при необходимости применяя безопасность на уровне полей](#modeling-field)</li></ul> |
| **Портал Dynamics CRM** | <ul><li>[Выполнить моделирования безопасности портала учетных записей, помня о модели безопасности hello для портала hello отличается от остальных hello CRM](#portal-security)</li></ul> |
| **Хранилище Azure** | <ul><li>[Предоставьте детальное разрешение диапазону сущностей в хранилище таблиц Azure](#permission-entities)</li><li>[Включить учетную запись хранилища tooAzure управления доступом на основе ролей (RBAC) с помощью диспетчера ресурсов Azure](#rbac-azure-manager)</li></ul> |
| **Мобильный клиент** | <ul><li>[Реализуйте неявное обнаружение снятия защиты или получение административного доступа](#rooting-detection)</li></ul> |
| **WCF** | <ul><li>[Слабый механизм ссылки на класс в WCF](#weak-class-wcf)</li><li>[Реализуйте контроль авторизации WCF](#wcf-authz)</li></ul> |
| **Веб-интерфейс API** | <ul><li>[Реализуйте соответствующий механизм авторизации в веб-API ASP.NET](#authz-aspnet)</li></ul> |
| **Устройство IoT** | <ul><li>[Выполнить проверки авторизации в hello устройства, если он поддерживает различные действия, которые требуются различные уровни доступа](#device-permission)</li></ul> |
| **Полевой шлюз Интернета вещей** | <ul><li>[Выполнить проверки авторизации в hello шлюз поля, если он поддерживает различные действия, которые требуются различные уровни доступа](#field-permission)</li></ul> |

## <a id="acl-restricted-access"></a>Убедитесь, что соответствующие списки управления доступом toodata настроенных toorestrict несанкционированного доступа на устройстве hello

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Отношения доверия между компьютерами | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Убедитесь, что соответствующие списки управления доступом toodata настроенных toorestrict несанкционированного доступа на устройстве hello|

## <a id="sensitive-directory"></a>Конфиденциальное пользовательское содержимое приложения должно храниться в каталоге профиля пользователя

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Отношения доверия между компьютерами | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Убедитесь, что важное содержимое приложения хранится в каталоге профиля пользователя. Это tooprevent машины hello нескольким пользователям доступ к данным.|

## <a id="deployed-privileges"></a>Убедитесь, что hello развертывания приложений выполняются с минимальным числом привилегий

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Отношения доверия между компьютерами | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Убедитесь, выполнение приложения hello развертывания с минимумом прав доступа. |

## <a id="sequential-logic"></a>Обеспечьте последовательный порядок обработки потоков бизнес-логики

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | В порядке tooverify выполнения этого этапа подлинность пользователя будет tooenforce hello приложения tooonly бизнес логики потоки процессов в порядке последовательных шага с все шаги, обрабатываемые реального времени человека и не обработать по порядку, пропущено действия, обработанных действия из другого пользователя, или слишком быстро отправки транзакции.|

## <a id="rate-enumeration"></a>Реализовать механизм tooprevent перечисления ограничение частоты

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Убедитесь, что конфиденциальные идентификаторы являются случайными. Реализуйте элемент управления CAPTCHA для анонимных страниц. Убедитесь, что ошибки и исключения не раскрывают определенные данные.|

## <a id="principle-least-privilege"></a>Обеспечьте применение соответствующего типа авторизации и соблюдение принципа наименьших необходимых привилегий

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | <p>Принцип Hello означает, предоставляя только те права, являющиеся работы пользователей essential toothat учетной записи пользователя. Например, резервного копирования пользователя не требуется программное обеспечение tooinstall: таким образом, hello резервного копирования пользователь имеет права только toorun резервного копирования и резервному копированию приложений. Другие привилегии, такие как установка нового программного обеспечения, блокируются. Hello принцип применяется также tooa персональный компьютер пользователя, который обычно работает в учетной записи обычного пользователя и откроется привилегированной, защищенные паролем учетной записи (то есть суперпользователя) только при ситуации hello абсолютно требует его. </p><p>Это правило также может быть применен tooyour веб приложения. Вместо исключительно в зависимости от методов проверки подлинности на основе ролей, с помощью сеансов, мы довольно необходимо tooassign toousers правами с помощью системы проверки подлинности на основе базы данных. Мы по-прежнему использовать сеансы в порядке tooidentify, если hello пользователь вошел в правильно, только теперь вместо назначения пользователю с определенной ролью мы назначить ему с правами tooverify действия, он является привилегированным tooperform системе hello. Также является большой pro этого метода всякий раз, когда у пользователя есть назначенный ограниченные полномочия на лету hello будут применены изменения, так как назначение hello не зависят от сеанса hello, которые в противном случае сначала было tooexpire toobe.</p>|

## <a id="logic-request-parameters"></a>Бизнес-логика и принятие решений об авторизации доступа к ресурсам не должны основываться на параметрах входящего запроса

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Всякий раз, когда вы проверяете, является ли пользователь ограниченных tooreview определенные данные доступа hello ограничения должны быть обработаны серверные. Hello userID должны храниться в переменной сеанса при входе в систему и должны быть используется tooretrieve данных пользователя из базы данных hello |

### <a name="example"></a>Пример
```SQL
SELECT data 
FROM personaldata 
WHERE userID=:id < - session var 
```
Теперь злоумышленник возможные можно не изменять; изменить операции приложения hello, поскольку hello идентификатор для извлечения данных hello обрабатываются серверные.

## <a id="enumerable-browsing"></a>Убедитесь, что содержимое и ресурсы не могут быть перечислены или доступны путем несанкционированного просмотра

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | <p>Конфиденциальные файлы конфигурации и статические не должны храниться в корневой веб hello. Для открытых содержимого не требуется toobe права доступа, элементы управления должны быть применены или удаление hello содержимого самого.</p><p>Кроме того принудительное просмотра обычно объединяется с подбора методы toogather сведения, попробуйте tooaccess столько URL-адреса как возможные tooenumerate каталогов и файлов на сервере. Злоумышленники могут проверять все виды широко распространенных файлов. Например, поиск файла пароля будет охватывать такие файлы, как psswd.txt, password.htm, password.dat и другие.</p><p>toomitigate это возможности обнаружения подбора попыток должно быть включено.</p>|

## <a id="privileged-server"></a>Убедитесь, что учетные записи с минимальными правами доступа используется tooconnect tooDatabase сервера

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | База данных | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Иерархия разрешений (компонент Database Engine)](https://msdn.microsoft.com/library/ms191465), [Защищаемые объекты](https://msdn.microsoft.com/library/ms190401) |
| **Действия** | Минимальными учетные записи должны быть базы данных используется tooconnect toohello. Имя входа приложения должны быть ограничены в базе данных hello и выполнять только выбранные хранимые процедуры. Также оно не должно иметь прямого доступа к таблицам. |

## <a id="rls-tenants"></a>Реализация безопасности на УРОВНЕ строк tooprevent клиентам доступ к данным

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | База данных | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | SQL Azure, локальные |
| **Атрибуты**              | Версия SQL: 12, MsSQL2016 |
| **Справочные материалы**              | [Безопасность на уровне строк](https://msdn.microsoft.com/library/azure/dn765131.aspx) |
| **Действия** | <p>Безопасность на уровне строк позволяет клиентам toocontrol доступа toorows в таблицу базы данных, основанной на характеристиках hello hello пользователя, выполняющего запрос (например, группа членство или контекст выполнения).</p><p>Безопасность на уровне строк (RLS) упрощает проектирование hello и кодирование безопасности в приложении. RLS позволяет tooimplement ограничения на доступ к строкам данных. Например, обеспечивать сотрудники могут получить доступ к только те строки данных, которые являются нужные tootheir отдела, или ограничивать клиента данные доступа tooonly hello соответствующие tootheir данных компании.</p><p>Hello логика ограничения находится на уровне базы данных hello, а не самих данных hello на другом уровне приложения. Hello базы данных система применяет ограничения доступа hello, каждый раз при попытке доступа к данным с любого уровня. Это делает hello систему безопасности более надежной и устойчивой за счет уменьшения контактной зоны системы безопасности hello hello.</p><p>|

Обратите внимание, что RLS как средство out of box базы данных является tooSQL применимо только начиная с 2016 сервера и базы данных Azure SQL. Если функция RLS out of box hello не реализована, он должен гарантировать, доступ к данным — только с помощью представлений и процедур

## <a id="sysadmin-users"></a>Роль системного администратора должна быть только у необходимых действительных пользователей

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | База данных | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Иерархия разрешений (компонент Database Engine)](https://msdn.microsoft.com/library/ms191465), [Защищаемые объекты](https://msdn.microsoft.com/library/ms190401) |
| **Действия** | Члены фиксированной серверной роли SysAdmin hello следует быть очень ограничен и не должны содержать учетные записи, используемые приложениями.  Просмотрите список пользователей в роли hello hello и удалите все ненужные учетные записи|

## <a id="cloud-least-privileged"></a>Подключение шлюза tooCloud использование токенов с минимальными правами

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Облачный шлюз Интернета вещей | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Выбор шлюза: Центр Интернета вещей Azure |
| **Справочные материалы**              | [Руководство разработчика по Центру Интернета вещей Azure](https://azure.microsoft.com/documentation/articles/iot-hub-devguide/#Security) |
| **Действия** | Предоставить разрешения toovarious компоненты подключаются tooCloud шлюза (IoT Hub) наименьших прав доступа. Например, компоненту управления и подготовки устройств нужны разрешения на чтение и запись в реестр, а обработчику событий (ASA) разрешения на подключение службы. Отдельные устройства подключаются с помощью учетных данных.|

## <a id="sendonly-sas"></a>Для создания маркеров устройства используйте ключ SAS с разрешениями только для отправки

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | концентратору событий Azure | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Обзор проверки подлинности концентраторов событий и модели безопасности](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| **Действия** | Ключ SAS — токены используется toogenerate отдельных устройств. Используйте ключ SAS разрешения только для отправки при создании токен устройства hello для данного издателя|

## <a id="access-tokens-hub"></a>Не используйте маркеры доступа, предоставить прямой доступ toohello концентратора событий

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | концентратору событий Azure | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Обзор проверки подлинности концентраторов событий и модели безопасности](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| **Действия** | Маркер, который предоставляет прямой доступ концентратора событий toohello не должны быть даны toohello устройства. С помощью наименее привилегированных маркера для hello устройства, которое позволяет только tooa издателя может помочь в идентификации и защитить его черным списком, если доступ к найден toobe случайный или нарушения безопасности устройства.|

## <a id="sas-minimum-permissions"></a>TooEvent, ключи с помощью SAS концентратора, имеют hello минимальные разрешения, необходимые подключиться

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | концентратору событий Azure | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Обзор проверки подлинности концентраторов событий и модели безопасности](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| **Действия** | Предоставить разрешения toovarious серверных приложений, подключающихся toohello концентратора событий наименьших прав доступа. Создавать отдельные ключи SAS для каждой серверной части приложения и только предоставляют hello необходимые разрешения - toothem Send, Receive и управление ими.|

## <a id="resource-docdb"></a>Используйте tooCosmos tooconnect маркеры ресурсов базы данных, когда это возможно

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Azure DocumentDB | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Маркер ресурсов связан с ресурсом разрешения DocumentDB и снимки hello связь между hello пользователя базы данных и hello разрешений, этот пользователь имеет для конкретного ресурса приложения DocumentDB (например, коллекции, документ). Всегда используйте hello маркера tooaccess ресурсов DocumentDB, если hello клиента не может быть доверие при помощи обработки ключей - как это приложение конечного пользователя, такого как клиент мобильных или настольных master или только для чтения. Используйте ключ или ключи только для чтения из внутренних приложений, которые можно безопасно хранить эти ключи.|

## <a id="grained-rbac"></a>Включение доступа точного управления tooAzure подписки с помощью RBAC

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Граница доверия Azure | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Использовать tooyour роли назначения toomanage доступ к ресурсам подписки Azure](https://azure.microsoft.com/documentation/articles/role-based-access-control-configure/)  |
| **Действия** | Контроль доступа на основе ролей (RBAC) Azure обеспечивает точное управление доступом для Azure. С помощью RBAC, можно предоставить только hello уровень доступа, пользователи должны tooperform свою работу.|

## <a id="cluster-rbac"></a>Ограничить операции toocluster доступа клиента, с помощью RBAC

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Граница доверия Service Fabric | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Среда: Azure |
| **Справочные материалы**              | [Контроль доступа на основе ролей для клиентов Service Fabric](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security-roles/) |
| **Действия** | <p>Azure Service Fabric поддерживает два типа элемента управления различный уровень доступа для клиентов, подключенных tooa кластера Service Fabric: администратора и пользователя. Контроль доступа позволяет hello кластера администратора toolimit доступа toocertain кластера операции для разных групп пользователей, повышение безопасности кластера hello.</p><p>Администраторы имеют полный доступ toomanagement возможности (включая возможности чтения и записи). Пользователи, по умолчанию имеют только доступ на чтение toomanagement возможности (например, возможности работы с запросами), hello возможность tooresolve, приложений и служб.</p><p>Укажите hello двух ролей клиента (администратора и клиента) во время создания кластера hello, предоставляя отдельных сертификатов.</p>|

## <a id="modeling-field"></a>Выполняйте моделирование безопасности, при необходимости применяя безопасность на уровне полей

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Dynamics CRM | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Выполняйте моделирование безопасности, при необходимости применяя безопасность на уровне полей|

## <a id="portal-security"></a>Выполнить моделирования безопасности портала учетных записей, помня о модели безопасности hello для портала hello отличается от остальных hello CRM

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Портал Dynamics CRM | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Выполнить моделирования безопасности портала учетных записей, помня о модели безопасности hello для портала hello отличается от остальных hello CRM|

## <a id="permission-entities"></a>Предоставьте детальное разрешение диапазону сущностей в хранилище таблиц Azure

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Хранилище Azure | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Тип хранилища: таблица |
| **Справочные материалы**              | [Как toodelegate доступ к tooobjects в вашей учетной записи хранилища Azure с помощью SAS](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_data-plane-security) |
| **Действия** | В некоторых сценариях бизнеса табличного хранилища Azure может быть конфиденциальные данные, необходимые toostore прекрасно toodifferent сторон. Например конфиденциальные данные, относящиеся toodifferent странах. В таких случаях подписи SAS можно создать, указав hello секций и строк диапазонов ключей, таким образом, что пользователь может обращаться к определенной стране tooa конкретных данных.| 

## <a id="rbac-azure-manager"></a>Включить учетную запись хранилища tooAzure управления доступом на основе ролей (RBAC) с помощью диспетчера ресурсов Azure

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Хранилище Azure | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Как toosecure вашей учетной записи хранилища с помощью управления доступом на основе ролей (RBAC)](https://azure.microsoft.com/documentation/articles/storage-security-guide/#management-plane-security) |
| **Действия** | <p>При создании учетной записи хранения необходимо выбрать модель развертывания: классическую или на основе Azure Resource Manager. Hello классической модели во время создания ресурсов Azure допускает только доступа отдельных toohello подписки и в свою очередь, hello учетной записи хранилища.</p><p>С моделью hello диспетчера ресурсов Azure поместите hello учетной записи хранилища в ресурсов группы и контроль доступа toohello управления плоскости из этой конкретной учетной записи хранения с помощью Azure Active Directory. Например можно предоставить определенным пользователям hello возможность tooaccess hello ключи учетной записи хранения, другим пользователям можно просмотреть сведения об учетной записи хранилища hello, но не может получить доступ к hello ключи учетной записи хранения.</p>|

## <a id="rooting-detection"></a>Реализуйте неявное обнаружение снятия защиты или получение административного доступа

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Мобильный клиент | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | <p>Приложение должно обеспечить защиту собственной конфигурации и данных пользователя в случае, если обнаружено, что на телефоне снята защита или к нему получен административный доступ. Такие случаи подразумевают, что злоумышленник имеет несанкционированный доступ к телефону. Таким образом приложения должны иметь логика неявного определения при запуске приложения, toodetect Если hello телефон был корневыми.</p><p>Логика обнаружения Hello может просто доступ к файлам какие обычно только корневой пользователя есть доступ, например:</p><ul><li>/system/app/Superuser.apk;</li><li>/sbin/su;</li><li>/system/bin/su;</li><li>/system/xbin/su;</li><li>/data/local/xbin/su;</li><li>/data/local/bin/su;</li><li>/system/sd/xbin/su;</li><li>/system/bin/failsafe/su;</li><li>/data/local/su.</li></ul><p>Приложение hello можно получить доступ к любой из этих файлов, указывает, что приложение hello выполняется как пользователь root.</p>|

## <a id="weak-class-wcf"></a>Слабый механизм ссылки на класс в WCF

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | WCF | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальные, .NET Framework 3 |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html) |
| **Действия** | <p>Hello система использует слабое класс ссылку, которая может позволить злоумышленнику несанкционированный tooexecute кода. Программа Hello ссылается на пользовательский класс, который однозначно идентифицируется. При загрузке этого слабо определенного класса hello CLR тип загрузчик ищет класс hello в следующих элементов в hello hello в .NET указан порядок:</p><ol><li>Если известна hello сборки типа hello, загрузчик выполняет hello hello файл конфигурации перенаправления расположения, в глобальный кэш СБОРОК, hello текущей сборке, используя сведения о конфигурации и hello базовой папки приложения</li><li>Если сборка hello неизвестна, загрузчик выполняет hello hello текущей сборке mscorlib и расположение hello, возвращаемого обработчиком событий TypeResolve hello</li><li>Этот порядок поиска в среде CLR могут быть изменены с ловушки, например hello механизм пересылки типа и событие AppDomain.TypeResolve hello</li></ol><p>Если злоумышленник может использовать порядок поиска в среде CLR hello, создав класс альтернативных с hello же именем и помещения его в другое расположение, CLR будет загружать сначала приветствия, hello CLR непреднамеренно, выполняют код предоставленный злоумышленник hello</p>|

### <a name="example"></a>Пример
Hello `<behaviorExtensions/>` tooadd WCF определенное расширение WCF пользовательское поведение класса tooa указывает, что элемент файла конфигурации WCF hello ниже.
```
<system.serviceModel>
    <extensions>
        <behaviorExtensions>
            <add name=""myBehavior"" type=""MyBehavior"" />
        </behaviorExtensions>
    </extensions>
</system.serviceModel>
```
Использование полных (надежных) имен однозначно определяет тип и повышает безопасность системы. Используйте полные имена сборок при регистрации типов в файлах machine.config и app.config hello.

### <a name="example"></a>Пример
Hello `<behaviorExtensions/>` элемента файла конфигурации WCF hello ниже предписывает WCF tooadd ссылки на строго пользовательское поведение класса tooa определенного расширения WCF.
```
<system.serviceModel>
    <extensions>
        <behaviorExtensions>
            <add name=""myBehavior"" type=""Microsoft.ServiceModel.Samples.MyBehaviorSection, MyBehavior,
            Version=1.0.0.0, Culture=neutral, PublicKeyToken=null"" />
        </behaviorExtensions>
    </extensions>
</system.serviceModel>
```

## <a id="wcf-authz"></a>Реализуйте контроль авторизации WCF

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | WCF | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальные, .NET Framework 3 |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html) |
| **Действия** | <p>Эта служба не использует контроль авторизации. Когда клиент вызывает определенной службы WCF, WCF предоставляет различные схемы авторизации, убедитесь, что запрашивающего hello имеет метод разрешение tooexecute hello службы на сервере hello. Если элементы контроля авторизации не включены для служб WCF, прошедший проверку подлинности пользователь может добиться расширения привилегий.</p>|

### <a name="example"></a>Пример
Следующая конфигурация Hello указывает, что WCF toonot hello авторизации уровень проверки hello клиента при выполнении службы hello:
```
<behaviors>
    <serviceBehaviors>
        <behavior>
            ...
            <serviceAuthorization principalPermissionMode=""None"" />
        </behavior>
    </serviceBehaviors>
</behaviors>
```
Tooverify схемы авторизации службы, код, вызывающий метод службы hello hello используется авторизованным toodo таким образом. WCF предоставляет два режима и разрешает hello определение схемы настраиваемой авторизации. режим UseWindowsGroups Hello использует Windows ролей и пользователей и режим UseAspNetRoles hello поставщика ролей ASP.NET, например SQL Server, tooauthenticate.

### <a name="example"></a>Пример
Hello следующая конфигурация указывает, что том, что этот клиент hello является частью группы "Администраторы" hello, перед выполнением hello добавить службы toomake WCF:
```
<behaviors>
    <serviceBehaviors>
        <behavior>
            ...
            <serviceAuthorization principalPermissionMode=""UseWindowsGroups"" />
        </behavior>
    </serviceBehaviors>
</behaviors>
```
Затем служба Hello объявляется hello следующим образом:
```
[PrincipalPermission(SecurityAction.Demand,
Role = ""Builtin\\Administrators"")]
public double Add(double n1, double n2)
{
double result = n1 + n2;
return result;
}
```

## <a id="authz-aspnet"></a>Реализуйте соответствующий механизм авторизации в веб-API ASP.NET

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-интерфейс API | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальные, MVC 5 |
| **Атрибуты**              | Н/Д, поставщик удостоверений — ADFS или Azure AD |
| **Справочные материалы**              | [Проверка подлинности и авторизация в веб-API ASP.NET](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api) |
| **Действия** | <p>Сведения о роли для пользователей приложения hello могут быть производными от Azure AD или утверждения служб федерации Active Directory, если приложение hello зависит от их как поставщика удостоверений или само приложение hello может указать его. Во всех этих случаях реализация настраиваемой авторизации hello следует проверить сведения о ролях пользователей hello.</p><p>Сведения о роли для пользователей приложения hello могут быть производными от Azure AD или утверждения служб федерации Active Directory, если приложение hello зависит от их как поставщика удостоверений или само приложение hello может указать его. Во всех этих случаях реализация настраиваемой авторизации hello следует проверить сведения о ролях пользователей hello.</p>

### <a name="example"></a>Пример
```C#
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = true)]
public class ApiAuthorizeAttribute : System.Web.Http.AuthorizeAttribute
{
        public async override Task OnAuthorizationAsync(HttpActionContext actionContext, CancellationToken cancellationToken)
        {
            if (actionContext == null)
            {
                throw new Exception();
            }

            if (!string.IsNullOrEmpty(base.Roles))
            {
                bool isAuthorized = ValidateRoles(actionContext);
                if (!isAuthorized)
                {
                    HandleUnauthorizedRequest(actionContext);
                }
            }

            base.OnAuthorization(actionContext);
        }

public bool ValidateRoles(actionContext)
{
   //Authorization logic here; returns true or false
}

}
```
Здравствуйте, все контроллеры и методы действий, которые требуется tooprotected должен быть снабжен атрибутом выше атрибута.
```C#
[ApiAuthorize]
public class CustomController : ApiController
{
     //Application code goes here
}
```

## <a id="device-permission"></a>Выполнить проверки авторизации в hello устройства, если он поддерживает различные действия, которые требуются различные уровни доступа

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Устройства Интернета вещей | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | <p>Hello устройства следует авторизовать toocheck hello вызывающего объекта, если запрошенное hello действие hello необходимые разрешения tooperform у вызывающего объекта hello. Для например позволяет сказать hello устройства смарт-дверца блокировку, которая может осуществляться из облака hello, а также предоставляет функциональные возможности, например удаленно блокировки дверцы hello.</p><p>Hello Smart Lock дверца функциональная снятие блокировки только в том случае, когда кто-то физически перейдет рядом с дверь hello с картой. В этом случае hello реализацию Удаленная команда hello и управления должно выполняться таким образом, он не поддерживает все функциональные возможности toounlock hello дверца как шлюз облака hello не авторизованные toosend двери hello toounlock команды.</p>|

## <a id="field-permission"></a>Выполнить проверки авторизации в hello шлюз поля, если он поддерживает различные действия, которые требуются различные уровни доступа

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Полевой шлюз Интернета вещей | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Hello шлюз поля должен авторизовать toocheck hello вызывающего объекта, если запрошенное hello действие hello необходимые разрешения tooperform у вызывающего объекта hello. Например должны быть различные разрешения для пользователя admin API-интерфейса используется tooconfigure поле шлюзов v в секунду, которые подключения tooit.|
