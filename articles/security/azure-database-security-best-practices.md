---
title: "рекомендации по обеспечению безопасности базы данных aaaAzure | Документы Microsoft"
description: "В этой статье представлены рекомендации по безопасности баз данных Azure."
services: security
documentationcenter: na
author: unifycloud
manager: swadhwa
editor: tomsh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/21/2017
ms.author: tomsh
ms.openlocfilehash: 78984291e8f74879c7f738e2ce3176c4be18d154
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-database-security-best-practices"></a>Рекомендации по обеспечению безопасности базы данных Azure

При управлении базами данных безопасность имеет первостепенное значение и всегда была приоритетной задачей для базы данных SQL Azure. Базы данных может быть строго охраняемом toohelp удовлетворяют наиболее нормативным или требования безопасности, включая HIPAA ISO 27001/27002 и PCI DSS уровня 1, среди прочего. Текущий список сертификатов соответствия требованиям безопасности доступен на hello [сайта Центр управления безопасностью Microsoft](http://azure.microsoft.com/support/trust-center/services/). Вы также можете tooplace баз данных в определенных центрах обработки данных Azure на основе нормативных требований.

В этой статье мы рассмотрим рекомендации по обеспечению безопасности баз данных Azure. Эти методы являются производными от опыт безопасности базы данных SQL Azure и hello взаимодействия клиентов, например самостоятельно.

Для каждой рекомендации будет предоставлено объяснение следующих аспектов:

-   Какие hello рекомендуется
-   Почему нужно tooenable этой рекомендации
-   Если этого не рекомендуется hello tooenable, что может быть результатом hello
-   Как вы узнаете tooenable hello, рекомендации

В этой статье рекомендации по обеспечению безопасности базы данных Azure основан на возможности платформы Azure и мнение согласие, и набор функциональных возможностей, имеющиеся на момент hello написания этой статьи. Мнения и технологии со временем меняться, и в этой статье будут обновлены на регулярной основе tooreflect эти изменения.

Здесь рассматриваются следующие рекомендации по обеспечению безопасности баз данных Azure:

-   Используйте доступ к базе данных toorestrict правила брандмауэра
-   Включение проверки подлинности базы данных
-   защита данных с помощью шифрования;
-   Защита данных при передаче
-   включение аудита базы данных;
-   Обнаружение угроз для базы данных


## <a name="use-firewall-rules-toorestrict-database-access"></a>Используйте доступ к базе данных toorestrict правила брандмауэра

База данных SQL Microsoft Azure предоставляет службу реляционных баз данных для Azure и других интернет-приложений. безопасность доступа к tooprovide, база данных SQL управляет доступом с правилами брандмауэра ограничение подключение по IP-адресу механизмов проверки подлинности, требующие tooprove пользователей их идентификаторов и механизмы авторизации ограничений toospecific действий пользователей и данных. Брандмауэр не все сервера базы данных access tooyour, пока вы не укажете компьютеры, на которых есть разрешение. Hello брандмауэр предоставляет доступ toodatabases основании hello, рассчитанные на IP-адреса каждого запроса.

![Правила файрволла](./media/azure-database-security-best-practices/azure-database-security-best-practices-Fig1.png)

Hello службы базы данных SQL Azure доступна только через TCP-порт 1433. tooaccess базы данных SQL с компьютера, убедитесь, что брандмауэр клиентского компьютера разрешает исходящие соединения через TCP-порт 1433. Заблокируйте входящие подключения по протоколу TCP через порт 1433, если они не требуются для других приложений, используя правила брандмауэра.

В рамках процесса подключения hello подключений от виртуальных машин Azure, перенаправленный tooa другой IP-адрес и порт, уникальный для каждой рабочей роли. Hello используется порт в диапазоне hello от 11000 too11999. Дополнительные сведения о TCP-портах см. в статье [Порты для ADO.NET 4.5, отличные от порта 1433](https://docs.microsoft.com/azure/sql-database/sql-database-develop-direct-route-ports-adonet-v12).

> [!Note]
> Дополнительные сведения о правилах брандмауэра см. в статье [Обзор правил брандмауэра базы данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure).

## <a name="enable-database-authentication"></a>Включение проверки подлинности базы данных
База данных SQL поддерживает два типа проверки подлинности, проверку подлинности SQL и проверку подлинности Azure Active Directory (аутентификацию Azure AD).

**Проверка подлинности SQL** рекомендуется, если требуется поддержка следующих случаев:

-   Она позволяет средах toosupport SQL Azure с несколькими операционными системами, где все пользователи не проходят проверку подлинности домена Windows.
-   Позволяет SQL Azure toosupport старые приложения и приложения, поставляемые сторонними производителями, для которых требуется проверка подлинности SQL Server.
-   Позволяет пользователям tooconnect из неизвестных или ненадежных доменов. Например приложение, в котором клиенты подключаются с выделенными имена входа SQL Server tooreceive hello состояние их заказов.
-   Позволяет toosupport SQL Azure веб-приложений которых пользователи сами создают собственные удостоверения.
-   Позволяет программному обеспечению разработчики toodistribute свои приложения с помощью сложной иерархии разрешений на основе известны, предустановленные имена входа SQL Server.

> [!Note]
> Однако для проверки подлинности SQL Server не используются процедуры обеспечения безопасности Kerberos.

Если вы используете **проверку подлинности SQL**, вам потребуется:

-   Управление учетными данными строгого hello, самостоятельно.
-   Защитить hello учетные данные в строке подключения hello.
-   (Потенциально) защитить hello учетные данные, передаваемые по сети hello с веб-сервера hello toohello-база данных. Дополнительные сведения см. [как: подключение tooSQL сервера с помощью проверки подлинности SQL в ASP.NET 2.0](https://msdn.microsoft.com/library/ms998300.aspx).

**Проверка подлинности Azure Active Directory** — это механизм подключения tooMicrosoft базы данных SQL Azure и [хранилище данных SQL](https://docs.microsoft.com/azure/sql-data-warehouse/sql-data-warehouse-overview-what-is) с помощью удостоверений в Azure Active Directory (Azure AD). С помощью проверки подлинности Azure AD можно централизованно управлять hello удостоверений пользователей базы данных и другие службы Майкрософт, в одном централизованном месте. Централизованное управление идентификатор представляет собой единое место toomanage пользователей базы данных и упрощает управление разрешениями. Hello следующие преимущества:

-   Он предоставляет альтернативные tooSQL проверки подлинности сервера.
-   Позволяет остановить hello увеличением числа пользователей на серверах базы данных.
-   возможность чередования паролей в одном расположении;
-   клиенты могут управлять разрешениями базы данных с помощью внешних групп (AAD);
-   возможность исключить хранение паролей с помощью встроенной проверки подлинности Windows и других видов проверки подлинности, поддерживаемых Azure Active Directory;
-   Проверки подлинности Azure AD использует удостоверения tooauthenticate пользователей автономной базы данных на уровне базы данных hello.
-   Azure AD поддерживает проверку подлинности на основе токена для приложений, соединяющихся tooSQL базы данных.
-   Azure AD поддерживает проверку подлинности с использованием AD FS (федерация доменов) или собственную проверку подлинности с помощью имени пользователя и пароля для локального каталога Azure Active Directory без синхронизации домена.
-   Azure AD поддерживает подключения из SQL Server Management Studio, использующие универсальную проверку подлинности Active Directory, в том числе многофакторную идентификацию (MFA). MFA обеспечивает надежную аутентификацию с использованием ряда простых вариантов проверки посредством телефонного звонка, текстового сообщения, смарт-карты с ПИН-кодом или уведомления в мобильном приложении. Дополнительные сведения см. в разделе [Поддержка SSMS в Azure AD MFA для базы данных SQL и хранилища данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-ssms-mfa-authentication).

действия по настройке Hello включают следующие процедуры tooconfigure hello и использование проверки подлинности Azure Active Directory.

-   Создайте и заполните каталог Azure AD.
-   Необязательно: Связать или изменение hello active directory, который сейчас связан с подпиской Azure.
-   Создайте учетную запись администратора Azure Active Directory для сервера Azure SQL Server или [хранилища данных SQL Azure](https://azure.microsoft.com/services/sql-data-warehouse/).
- Настройте клиентские компьютеры.
-   Создайте пользователей автономной базы данных в вашей базы данных сопоставлен tooAzure удостоверений AD.
-   Подключение tooyour базы данных с помощью удостоверений Azure AD.

Дополнительные сведения см. [здесь](https://docs.microsoft.com/azure/sql-database/sql-database-aad-authentication).

## <a name="protect-your-data-using-encryption"></a>Защита данных с помощью шифрования

[Прозрачное шифрование базы данных SQL Azure (TDE)](https://msdn.microsoft.com/library/dn948096.aspx) защиты от угроз вредоносных действий hello, выполняя в реальном времени шифрование и расшифровку hello базы данных, связанных резервных копий и файлов журнала транзакций хранятся без требование изменения toohello приложения. TDE шифрует hello хранения всей базы данных с помощью ключа шифрования симметричного ключа вызываемой hello базы данных.

Даже в том случае, если хранилище всей hello шифруется, очень важно tooalso шифрование самой базы данных. Это представляет собой реализацию защиты hello в глубину подход для защиты данных. Если используется база данных SQL Azure и хотите tooprotect конфиденциальных данных, таких как кредитных карт или номера социального страхования, можно зашифровать баз данных с FIPS 140-2 проверки 256 битного шифрования AES которой различные отраслевые стандарты (например, HIPAA, соответствует требованиям hello PCI).

Важно слишком связанные файлы toounderstand[буферного пула расширения](https://docs.microsoft.com/sql/database-engine/configure-windows/buffer-pool-extension) , не шифруются, если база данных зашифрована с помощью прозрачного шифрования данных. Необходимо использовать средства шифрования на уровне файловой системы как [BitLocker](https://technet.microsoft.com/library/cc732774) или hello [шифрованной файловой системы (EFS)](https://technet.microsoft.com/library/cc700811.aspx) файлов с расширением BPE.

Так как авторизованный пользователь такие, как администратор безопасности или администратором базы данных hello данные доступны даже если hello база данных зашифрована с помощью прозрачного шифрования данных, необходимо также следовать приведенным ниже рекомендациям hello:

-   Включение проверки подлинности SQL на уровне базы данных hello.
-   выполнять проверку подлинности Azure AD с использованием [ролей RBAC](https://docs.microsoft.com/azure/active-directory/role-based-access-control-what-is);
-   Пользователи и приложения должны использовать tooauthenticate отдельную учетную запись. Таким образом, можно ограничить разрешения hello toousers и приложения и снижения степени риска hello вредоносных действий.
-   Реализуйте безопасность на уровне базы данных с помощью предопределенных ролей базы данных (например, db_datareader и db_datawriter), или можно создать пользовательские роли для вашего приложения toogrant объектов базы данных tooselected явные разрешения.

Другие способы tooencrypt данных, можно воспользоваться.

-   [Шифрование на уровне ячейки](https://msdn.microsoft.com/library/ms179331.aspx) tooencrypt определенных столбцов или даже ячеек данных с разными ключами шифрования.
-   Шифрование с помощью постоянного шифрования используется: [постоянного шифрования](https://msdn.microsoft.com/library/mt163865.aspx) позволяет клиентам tooencrypt конфиденциальные данные в клиентских приложениях, а не раскрывать toohello ключи шифрования hello ядра базы данных (база данных SQL или SQL Server). В результате постоянное шифрование позволяет разделить пользователей на тех, кто владеет данных hello (или ее могли просматривать) и тех, кто управляет hello данных (но не должен иметь к ним доступа).
-   С помощью безопасности на уровне строк: безопасность на уровне строк позволяет клиентам toocontrol доступа toorows в таблицу базы данных, основанной на характеристиках hello hello пользователя, выполняющего запрос (например, группа членство или контекст выполнения). Дополнительные сведения см. в статье [Безопасность на уровне строк](https://msdn.microsoft.com/library/dn765131).

## <a name="protect-data-in-transit"></a>Защита данных при передаче
Защита данных при передаче обязательно должна быть учтена в стратегии защиты данных. Так как данные будут перехода вперед и назад из различных расположений, hello рекомендуется использовать данные tooexchange протоколов SSL/TLS в разных расположениях. В некоторых случаях может потребоваться tooisolate hello всей коммуникационный канал между локальной и облачной инфраструктуры с помощью виртуальной частной сети (VPN).

Для перемещения данных между локальной инфраструктурой и Azure следует применять соответствующие меры безопасности, например использовать HTTPS или VPN.

Для организаций, которым требуется toosecure доступ из нескольких рабочих станциях от локальной tooAzure, используйте [Azure сеть сеть VPN](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-site-to-site-create).

Для организаций, которым требуется toosecure доступ из отдельных рабочих станций локально или дистанционно tooAzure, рассмотрите возможность использования [точка-сеть VPN](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-point-to-site-create).

Большие наборы данных можно перемещать по выделенному высокоскоростному каналу глобальной сети, например [ExpressRoute](https://azure.microsoft.com/services/expressroute/). При выборе toouse ExpressRoute можно зашифровать данные hello hello уровня приложения с помощью [SSL/TLS](https://support.microsoft.com/kb/257591) или другие протоколы для дополнительной защиты.

Если взаимодействуют со службой хранилища Azure через портал Azure hello всех транзакций выполняется через HTTPS. [API REST хранилища](https://msdn.microsoft.com/library/azure/dd179355.aspx) по протоколу HTTPS также могут использоваться toointeract с [хранилища Azure](https://azure.microsoft.com/services/storage/) и [базы данных SQL Azure](https://azure.microsoft.com/services/sql-database/).

Организаций, которые не прошли tooprotect данных во время передачи, более уязвимы для [атак в середине](https://technet.microsoft.com/library/gg195821.aspx), [перехвата](https://technet.microsoft.com/library/gg195641.aspx) и перехват сеансов. Первым шагом hello в получении доступа к данным tooconfidential могут быть эти атаки.

Дополнительные сведения о Azure VPN параметр, прочитав статью hello toolearn [планирования и проектирования для шлюза VPN](https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-plan-design).

## <a name="enable-database-auditing"></a>Включение аудита базы данных
Аудит экземпляр SQL Server Database Engine hello или отдельной базы данных включает в себя отслеживание и протоколирование событий, происходящих в hello компонента Database Engine. Подсистема аудита SQL Server позволяет проводить аудит сервера, который может предусматривать спецификации аудита серверов для событий на уровне сервера и спецификации аудита баз данных для событий на уровне базы данных. События аудита могут записываться в журналы событий toohello или tooaudit файлов.

Для SQL Server есть несколько уровней аудита в зависимости от нормативных или стандартных требований для вашей установки. Подсистема аудита SQL Server предоставляет hello средств и процессов, необходимо иметь tooenable, хранилище и представление аудитов на различных объектах серверов и баз данных.

[Аудит базы данных Azure SQL](https://docs.microsoft.com/azure/sql-database/sql-database-auditing) отслеживает события базы данных и записывает их в журнал аудита tooan вашей учетной записи хранилища Azure.

Аудит может помочь вам соблюсти требования нормативов, проанализировать работу с базой данных и получить представление о расхождениях и аномалиях, которые могут указывать на бизнес-проблемы или предполагаемые нарушения безопасности.

Аудит позволяет и обеспечивает соблюдение стандартов toocompliance но не гарантирует соответствие.

Дополнительные сведения о базе данных аудита toolearn и как tooenable, прочтите статью hello [включения аудита и угрозы обнаружения на SQL Server в центр безопасности Azure](https://docs.microsoft.com/azure/security-center/security-center-enable-auditing-on-sql-servers).

## <a name="enable-database-threat-detection"></a>Обнаружение угроз для базы данных
Обнаружение угроз SQL позволяет toodetect и отвечать toopotential угроз, как только они происходят, предоставляя предупреждения системы безопасности о подозрительной активности. Вы получаете оповещения о подозрительных действиях с базами данных, потенциальных уязвимостях, атаках путем внедрения кода SQL и аномальных закономерностях в доступе к базам данных. Предупреждения для обнаружения угроз SQL предоставляют подробные сведения о подозрительной активности и рекомендуем действия, о том, как tooinvestigate и устранить угрозу hello.

Например путем внедрения кода SQL — один из hello общих Web вопросами безопасности приложений на hello Интернета, используемых tooattack управляемых данными приложений. Злоумышленникам воспользоваться преимуществами tooinject уязвимостей приложения злонамеренные инструкции SQL в поля записи приложения, нарушения или изменение данных в базе данных hello.

toolearn о том, как tooset вверх для обнаружения угроз для базы данных в hello Azure портала см. в разделе [обнаружением угроз для базы данных SQL](https://docs.microsoft.com/azure/sql-database/sql-database-threat-detection).

Кроме того, оповещения об обнаружении угроз базы данных SQL интегрируются с [центром безопасности Azure](https://azure.microsoft.com/services/security-center/). Мы приглашаем вас tootry его 60 дней для освобождения.

Дополнительные сведения о базе данных для обнаружения угроз toolearn и как tooenable, прочтите статью hello [включения аудита и угрозы обнаружения на SQL Server в центр безопасности Azure](https://docs.microsoft.com/azure/security-center/security-center-enable-auditing-on-sql-servers).

## <a name="conclusion"></a>Заключение
База данных Azure — это надежная платформа базы данных с полным набором функций безопасности, которые удовлетворяют многим организационным и нормативным требованиям. Чтобы защитить данные, управление hello физический доступ tooyour данных и с помощью различных вариантов для защиты данных в hello файла, столбца или уровне строк с помощью прозрачного шифрования данных, шифрование на уровне ячейки или безопасность на уровне строк. Всегда Encrypted также позволяет операций, выполняемых зашифрованные данные, что упрощает процесс обновления приложения hello. В свою очередь журналы событий tooauditing действия базы данных SQL предоставляет hello необходимые сведения, позволяя tooknow, как и при доступе к данным.

## <a name="next-steps"></a>Дальнейшие действия
- toolearn Дополнительные сведения о правилах брандмауэра. в разделе [правила брандмауэра](https://docs.microsoft.com/azure/sql-database/sql-database-firewall-configure).
- toolearn о пользователях и имена входа, в разделе [Управление именами входа](https://docs.microsoft.com/azure/sql-database/sql-database-manage-logins).
- Ознакомьтесь с руководством [Защита базы данных SQL Azure](https://docs.microsoft.com/azure/sql-database/sql-database-security-tutorial).
