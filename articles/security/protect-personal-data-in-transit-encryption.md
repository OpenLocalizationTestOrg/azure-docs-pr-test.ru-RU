---
title: "Защита персональных данных при передаче с помощью шифрования в Azure | Документация Майкрософт"
description: "Сведения о защите персональных данных с помощью шифрования в Azure."
services: security
documentationcenter: na
author: Barclayn
manager: MBaldwin
editor: TomSh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/22/2017
ms.author: barclayn
ms.custom: 
ms.openlocfilehash: 461ddfda796bfe6639e27f6c4cd53e82b4e397d1
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="azure-encryption-technologies-protect-personal-data-in-transit-with-encryption"></a>Технологии шифрования Azure. Защита неактивных персональных данных при передаче с помощью шифрования

Эта статья поможет понять, как защитить данные при передаче на основе технологий шифрования Azure. 

Защита конфиденциальности персональных данных во время их передачи по сети — это важная часть многоуровневой эшелонированной стратегии защиты. Шифрование при передаче не позволяет злоумышленнику, перехватывающему передачи, просматривать или использовать данные.

## <a name="scenario"></a>Сценарий

Большая круизная компания, расположенная в США, расширяет масштабы своей деятельности и предлагает маршруты в Средиземном, Адриатическом и Балтийском морях, а также на Британских островах. Чтобы реализовать эту программу, компания приобрела несколько небольших круизных фирм, расположенных в Италии, Германии, Дании и Великобритании. 

Корпоративные данные компании хранятся в облаке Microsoft Azure. Сюда входят персональные данные, позволяющие установить личность, например имена, адреса, номера телефонов и данные кредитной карты в глобальной клиентской базе. Кроме того, к этим данным относятся стандартные сведения о кадрах, например адреса, номера телефонов, идентификационные номера налогоплательщиков и другие сведения о сотрудниках во всех расположениях. Круизная компания также содержит большую базу данных участников программ лояльности и программ скидок, которая, в свою очередь, содержит персональные данные, позволяющие отслеживать связи с текущими и бывшими клиентами.

Персональные данные клиентов вводятся в базу данных из филиалов компании и туристических агентств, расположенных по всему миру. Документы, содержащие сведения о клиенте передаются по сети в хранилище Azure.

## <a name="problem-statement"></a>Проблема

Компания должна защищать конфиденциальность персональных данных клиентов и сотрудников при передаче в службы Azure и из них.

## <a name="company-goal"></a>Цель компании

Компания должна гарантировать шифрование персональных данных при передаче. Если посторонние лица перехватят эти данные, благодаря шифрованию, они не смогут прочитать их. Применение шифрования должно быть простым или полностью прозрачным для пользователей и администраторов.

## <a name="solutions"></a>Решения

Службы Azure предоставляют несколько инструментов и технологий защиты персональных данных при передаче.

### <a name="azure-storage"></a>Хранилище Azure

Данные, хранящиеся в облаке, должны переместиться с клиента, который может физически располагаться в любой точке мира, в центр обработки данных Azure. После извлечения данных пользователями они возвращаются в обратном направлении. При передаче данных через общедоступный Интернет всегда есть риск их перехвата злоумышленниками. Очень важно защитить конфиденциальность персональных данных с помощью шифрования на транспортном уровне. Это позволяет обеспечить безопасность при перемещении между расположениями.

Протокол HTTPS предоставляет безопасный, зашифрованный коммуникационный канал через Интернет. При получении доступа к объектам в службе хранилища Azure и вызове REST API должен использоваться протокол HTTPS. Он применяется при использовании [подписанного URL-адреса](https://docs.microsoft.com/azure/storage/storage-dotnet-shared-access-signature-part-1) (SAS), обеспечивающего делегирование доступа к объектам службы хранилища Azure. Существует два типа SAS: уровня службы и учетной записи.

#### <a name="how-do-i-construct-a-service-sas"></a>Создание подписанного URL-адреса уровня службы

SAS уровня службы делегирует доступ к ресурсу только в одной из служб хранения: службе BLOB-объектов, очередей, таблиц или файлов. Чтобы создать подписанный URL-адрес уровня службы, выполните такие действия:

1. Укажите поле подписанной версии.

2. Укажите подписанный ресурс (только служба BLOB-объектов и файлов).

3. Укажите параметры запроса переопределения заголовков объекта (только служба BLOB-объектов и служба файлов).

4. Укажите имя таблицы (только служба таблиц).

5. Укажите политику доступа.

6. Укажите период действия подписи.

8. Укажите разрешения.

9. Укажите IP-адрес или диапазон IP-адресов.

10. Укажите протокол HTTP.

11. Укажите диапазон доступа к таблицам.

12. Укажите идентификатор подписи.

13. Укажите подпись.

Дополнительные сведения см. в статье [Создание подписанного URL-адреса уровня службы](https://docs.microsoft.com/rest/api/storageservices/Constructing-a-Service-SAS?redirectedfrom=MSDN).

#### <a name="how-do-i-construct-an-account-sas"></a>Создание подписанного URL-адреса уровня учетной записи

SAS уровня учетной записи делегирует доступ к ресурсам в одной или нескольких службах хранилища. Вы также можете делегировать доступ к операциям чтения, записи и удаления в контейнерах больших двоичных объектов, таблицах, очередях и общих папках, которые запрещены в SAS службы. Создание SAS уровня учетной записи аналогично созданию SAS уровня службы. Дополнительные сведения см. в статье [Создание подписанного URL-адреса уровня учетной записи](https://docs.microsoft.com/rest/api/storageservices/Constructing-an-Account-SAS?redirectedfrom=MSDN).

#### <a name="how-do-i-enforce-https-when-calling-rest-apis"></a>Принудительное использование HTTPS при вызове REST API

Чтобы принудительно задать использование протокола HTTPS при вызове REST API для доступа к объектам в учетных записях хранения, можно включить параметр "Требуется безопасное перемещение" в учетной записи хранения. 

1. На портале Azure выберите **Создание учетной записи хранения**. Если у вас уже есть учетная запись хранения, выберите **Параметры**, а затем — **Конфигурация**.

2. В разделе **Требуется безопасное перемещение** выберите **Включено**.

![Создание учетной записи хранения](media/protect-personal-data-in-transit-encryption/create-storage-account.png)

Дополнительные сведения, в том числе способы включения параметра "Требуется безопасное перемещение" программным способом, см. в статье [Требование безопасной передачи](https://docs.microsoft.com/azure/storage/storage-require-secure-transfer).

#### <a name="how-do-i-encrypt-data-in-azure-file-storage"></a>Шифрование данных в хранилище файлов Azure

Чтобы реализовать шифрование данных при передаче с помощью [хранилища файлов Azure](https://docs.microsoft.com/azure/storage/storage-file-how-to-use-files-portal), вы можете использовать SMB 3.x с Windows 8, 8.1 и 10, и Windows Server 2012 R2 и Windows Server 2016. Кроме того, если этот параметр включен, то при использовании службы файлов Azure любое подключение без шифрования завершается сбоем. Это относится к сценариям, включающим в себя SMB 2.1, SMB 3.0 без шифрования и некоторые конфигурации SMB-клиента Linux.

#### <a name="azure-client-side-encryption"></a>Шифрование Azure на стороне клиента

Еще один вариант защиты персональных данных при переносе между клиентскими приложениями и службой хранилища Azure — [шифрование на стороне клиента](https://docs.microsoft.com/azure/storage/storage-client-side-encryption). В этом случае данные шифруются перед передачей в службу хранилища Azure, а при их извлечении они расшифровываются на стороне клиента.

### <a name="azure-site-to-site-vpn"></a>VPN типа "сеть — сеть" Azure

Эффективный способ защиты персональных данных при передаче между корпоративной сетью или пользователем и виртуальной сетью Azure — использование виртуальной частной сети типа ["сеть — сеть"](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal) или ["точка — сеть"](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal). VPN-подключение создает зашифрованный безопасный туннель через Интернет.

#### <a name="how-do-i-create-a-site-to-site-vpn-connection"></a>Создание VPN-подключения типа "сеть — сеть"

VPN типа "сеть — сеть" подключает нескольких пользователей корпоративной сети к Azure. Чтобы создать подключение этого типа на портале Azure, выполните такие действия:

1. Создайте виртуальную сеть.

2. Укажите DNS-сервер

3. Создайте подсеть шлюза.

4. Создайте шлюз VPN. 

    ![](media/protect-personal-data-in-transit-encryption/vpn-step-01.png)

5. Создайте локальный сетевой шлюз.

    ![](media/protect-personal-data-in-transit-encryption/vpn-step-02.png)

6. Настройте устройство VPN.

7. Создайте VPN-подключение.

    ![](media/protect-personal-data-in-transit-encryption/vpn-step-03.png)

8. Проверьте VPN-подключение.

Дополнительные сведения о том, как создавать подключения типа "сеть — сеть" на портале Azure, см. в [этой статье] (https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal).

#### <a name="how-do-i-create-a-point-to-site-vpn-connection"></a>Создание VPN-подключения типа "точка — сеть"

VPN-подключение типа "точка — сеть" создает защищенное подключение к виртуальной сети с отдельного клиентского компьютера. Это полезно в том случае, если нужно подключиться к Azure из удаленного расположения, например из дома, гостиницы или конференц-зала. Чтобы создать VPN-подключение типа "точка — сеть" на портале Azure, сделайте следующее:

1. Создайте виртуальную сеть.

2. Добавьте подсеть шлюза.

3. Укажите DNS-сервер (необязательно).

4. Создайте шлюз виртуальной сети.

5. Создайте сертификаты.

6. Добавьте пулы адресов клиента.

7. Отправьте данные об открытом ключе корневого сертификата.

8. Создайте и установите пакет конфигурации VPN-клиента.

9. Установите экспортированный сертификат клиента.

10. Подключение к Azure.

11. Проверьте подключение.

Дополнительные сведения см. в статье [Настройка подключения типа "точка — сеть" к виртуальной сети с помощью проверки подлинности на основе сертификата, используя портал Azure](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal).

### <a name="ssltls"></a>Протокол SSL/TLS

Корпорация Майкрософт рекомендует всегда использовать протоколы SSL и TLS при обмене данными между разными расположениями. Организации, перемещающие большие наборы данных через выделенный высокоскоростной канал WAN с помощью [ExpressRoute](https://docs.microsoft.com/azure/expressroute/), могут также шифровать данные на уровне приложения, используя SSL, TLS или другие протоколы для дополнительной защиты.

### <a name="encryption-by-default"></a>Шифрование по умолчанию

Корпорация Майкрософт использует шифрование для защиты данных при передаче между клиентами и облачными служба Azure. Если вы обращаетесь к службе хранилища Azure через портал Azure, все транзакции проходят по протоколу HTTPS.

[Протокол TLS](https://en.wikipedia.org/wiki/Transport_Layer_Security) — это протокол, который центры обработки данных Майкрософт попытаются согласовать с клиентскими системами, подключенными к облачным службам (Майкрософт). TLS обеспечивает надежную аутентификацию, конфиденциальность сообщений, целостность (включая обнаружение незаконного изменения, перехвата и подделки сообщений), взаимодействие, гибкость алгоритма, простоту развертывания и использования.

[Полная безопасность пересылки](https://en.wikipedia.org/wiki/Forward_secrecy) (PFS), которая также применяется, позволяет защитить соединения между клиентскими системами заказчиков и облачными службами (Майкрософт) с помощью уникальных ключей. При подключении к облачным службам (Майкрософт) также используются ключи шифрования на 2048 бит на основе RSA. Сочетание протокола TLS, ключей шифрования на 2048 бит на основе RSA и PFS значительно усложняет перехват и получение доступа к данным, которые передаются между облачными службами (Майкрософт) и клиентами.

Данные при передаче всегда шифруются в [Data Lake Store] (https://docs.microsoft.com/azure/data-lake-store/data-lake-store-security-overview). Данные не только шифруются перед сохранением на постоянный носитель. Они также всегда защищены при передаче благодаря использованию протокола HTTPS. HTTPS — единственный протокол, который поддерживают интерфейсы REST в Data Lake Store.

## <a name="summary"></a>Сводка

Компания может достичь своей цели (защиты персональных данных и их конфиденциальности), применяя подключения HTTPS к службе хранилища Azure, используя подписанные URL-адреса и включив параметр "Требуется безопасное перемещение" в учетных записях хранения. Кроме того, компания сможет защищать персональные данные с помощью подключений SMB 3.0 и реализации шифрования на стороне клиента. VPN-подключения типа "сеть — сеть" из корпоративной сети к виртуальной сети Azure и VPN-подключения типа "точка — сеть" от отдельных пользователей создадут защищенный туннель для безопасной передачи персональных данных. Стандартные методы шифрования корпорации Майкрософт по-прежнему будут защищать конфиденциальность персональных данных.

## <a name="next-steps"></a>Дальнейшие действия

- [Рекомендации по защите и шифрованию данных в Azure](https://docs.microsoft.com/azure/security/azure-security-data-encryption-best-practices)

- [Планирование и проектирование VPN-шлюза](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-plan-design)

- [VPN-шлюз: вопросы и ответы](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-vpn-faq)

- [Приобретение и настройка сертификата SSL для службы приложений Azure](https://docs.microsoft.com/azure/app-service/web-sites-purchase-ssl-web-site)
