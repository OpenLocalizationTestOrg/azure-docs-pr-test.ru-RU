---
title: "Защита персональных данных с помощью функций безопасности сети Azure | Документация Майкрософт"
description: "Сведения о защите персональных данных с помощью функций безопасности сети Azure."
services: security
documentationcenter: na
author: Barclayn
manager: MBaldwin
editor: TomSh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/22/2017
ms.author: barclayn
ms.custom: 
ms.openlocfilehash: d61b29f1327f57bc32b2c53de3fe58e53fcf3cac
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="protect-personal-data-with-network-security-features-azure-application-gateway-and-network-security-groups"></a>Защита персональных данных с помощью функций безопасности сети Azure: шлюз приложений и группы безопасности сети Azure

В этой статье представлены сведения и процедуры, которые помогут защитить персональные данные с помощью шлюза приложений и групп безопасности сети Azure.

Важный элемент многоуровневой стратегии защиты конфиденциальности персональных данных — это защита от распространенных уязвимостей, таких как атака путем внедрения кода SQL или атака с выполнением межсайтовых сценариев. Устранение нежелательного сетевого трафика из виртуальной сети Azure помогает защититься от потенциальных нарушений безопасности конфиденциальных данных, а Microsoft Azure предоставляет инструменты защиты данных от злоумышленников.

## <a name="scenario"></a>Сценарий

Большая круизная компания, расположенная в США, расширяет масштабы своей деятельности и предлагает маршруты в Средиземном, Адриатическом и Балтийском морях, а также на Британских островах. Чтобы реализовать эту возможность, компания приобрела несколько небольших круизных организаций, расположенных в Италии, Германии, Дании и Великобритании.

Корпоративные данные компании хранятся в облаке Microsoft Azure, а их обработка и доступ к ним осуществляются с помощью приложений на виртуальных машинах. К этим данным относятся персональные данные, позволяющие установить личность, например имена, адреса, номера телефонов и данные кредитной карты в глобальной клиентской базе. Кроме того, они включают стандартные сведения о кадрах, например адреса, номера телефонов, идентификационные номера налогоплательщиков и другие сведения о сотрудниках во всех расположениях. Круизная компания также содержит большую базу данных участников программ лояльности и программ скидок, которая, в свою очередь, содержит персональные данные, позволяющие отслеживать связи с текущими и бывшими клиентами.

Сотрудники компании получают доступ к сети из удаленных филиалов, а туристические агентства, расположенные по всему миру, имеют доступ к отдельным ресурсам, к которым они подключаются через веб-приложения, размещенные на виртуальных машинах Azure.

## <a name="problem-statement"></a>Проблема

Компания должна защищать конфиденциальность персональных данных клиентов и сотрудников от злоумышленников, которые используют уязвимости программного обеспечения и выполняют вредоносный код. Все это может нарушать безопасность персональных данных, которые хранятся в облачных приложениях компании или используются ими.

## <a name="company-goal"></a>Цель компании

Компания должна гарантировать защиту корпоративных виртуальных сетей Azure от доступа посторонних лиц, а также защиту приложений и данных от распространенных уязвимостей. 

## <a name="solutions"></a>Решения

Microsoft Azure предоставляет механизмы безопасности, которые позволяют предотвратить попадание нежелательного трафика в виртуальные сети Azure. Управление исходящим и входящим трафиком обычно осуществляется брандмауэрами. В Azure шлюз приложений можно использовать с брандмауэром веб-приложения и группами безопасности сети (NSG), которые действуют как простой распределенный брандмауэр. Эти инструменты позволяют определять и блокировать нежелательный сетевой трафик.

### <a name="application-gatewayweb-application-firewall"></a>Шлюз приложений или брандмауэр веб-приложения

Компонент [брандмауэра веб-приложения](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview) (WAF) [шлюза приложений Azure](https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction) защищает веб-приложения, на которые часто направлены вредоносные атаки, использующие распространенные уязвимости. Централизованный брандмауэр веб-приложения обеспечивает защиту от атак и упрощает управление безопасностью без каких-либо изменений приложения.

Брандмауэр веб-приложения Azure защищает от различных категорий атак, в том числе атаки путем внедрения кода SQL, атаки с выполнением межсайтовых сценариев, нарушения протокола HTTP, аномалии, боты, программы-обходчики, сканеры, распространенные неправильные настройки приложений, отказ в обслуживании HTTP, а также других распространенных атак, таких как внедрение команд, несанкционированные HTTP-запросы, разделение HTTP-запросов и атаки с включением удаленного файла. 

Вы можете создать шлюз приложений с брандмауэром веб-приложения или добавить его в имеющийся шлюз. В любом случае шлюзу приложений Azure требуется собственная подсеть.

#### <a name="how-do-i-create-an-application-gateway-with-waf"></a>Создание шлюза приложений с WAF 

Чтобы создать шлюз приложений с включенным WAF, выполните следующие действия:

1. Войдите на портал Azure. В области **Избранное** выберите **Создать**

2. В колонке **Создать** щелкните **Сети**.

3. Щелкните **Шлюз приложений**.

4. Перейдите на портал Azure и выберите **Создать \> Сети \> Шлюз приложений**.

   ![Создание шлюзов приложений](media/protect-netsec/app-gateway-01.png)

5. В открывшейся колонке **Основные сведения** введите значения для следующих полей: "Имя", "Уровень" (стандартный или WAF), "Размер номера SKU" (маленький, средний или большой), "Число экземпляров" (2 для высокой доступности), "Подписка", "Группа ресурсов" и "Расположение".

6. В колонке **Параметры**, которая отображается под областью **Виртуальная сеть**, щелкните **Выберите виртуальную сеть**. Откроется колонка "Выбрать виртуальную сеть".

7. Щелкните **Создать**, чтобы открыть колонку **Создание виртуальной сети**.

8. Введите следующие значения: "Имя", "Пространство адресов", "Имя подсети", "Диапазон адресов подсети". Нажмите кнопку **ОК**.

9. В колонке **Параметры** в разделе **Интерфейсная IP-конфигурация** выберите тип IP-адреса.

10. Щелкните **Выберите общедоступный IP-адрес**, а затем нажмите кнопку **Создать**.

11. Примите значение по умолчанию и нажмите кнопку **ОК**.

12. В колонке **Параметры** в разделе **Конфигурация прослушивателя** для параметра **Протокол** установите значение HTTP или HTTPS. Чтобы использовать HTTPS, требуется сертификат.

13. Настройте определенные параметры WAF: **Состояние брандмауэра** (**Включено**) и **Режим брандмауэра** (**Предотвращение**). При выборе режима **Обнаружение** записывается только трафик.

14. Просмотрите страницу **сводки** и нажмите кнопку **ОК**. Теперь шлюз приложений поставлен в очередь и создан.

После создания шлюза приложений перейдите к нему на портале, чтобы продолжить его настройку.

![Созданный шлюз приложений](media/protect-netsec/adatum-app-gateway.png)

#### <a name="how-do-i-add-waf-to-an-existing-application"></a>Добавление WAF в имеющееся приложение

Чтобы реализовать поддержку WAF в режиме предотвращения в имеющемся шлюзе приложений, выполните такие действия:

1. На портале Azure в области **Избранное** щелкните **Все ресурсы**.

2. Выберите существующий шлюз приложений в колонке **Все ресурсы**. 
>[!NOTE]
Примечание. Если выбранная подписка имеет несколько ресурсов, в поле "Фильтровать по имени..." введите имя, чтобы быстро получить доступ к необходимой зоне DNS.
3. Щелкните **Брандмауэр веб-приложения** и обновите параметры шлюза приложений: **Обновление до уровня WAF** ("проверено"), **Состояние брандмауэра** ("включено"), **Режим брандмауэра** ("Предотвращение"). Необходимо также настроить набор правил и отключенные правила.

Дополнительные сведения о создании шлюза приложений с WAF и добавлении WAF в имеющийся шлюз приложений см. в статье [Создание шлюза приложений с брандмауэром веб-приложения с помощью портала](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-portal).

### <a name="network-security-groups"></a>группы сетевой безопасности;

[Группы безопасности сети](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg) содержат перечень правил безопасности, которые разрешают или запрещают передачу сетевого трафика к ресурсам, подключенным к [виртуальным сетям Azure](https://docs.microsoft.com/azure/virtual-network/). Их можно связать с подсетями или отдельными виртуальными машинами. Если группа безопасности сети связана с подсетью, эти правила применяются ко всем ресурсам в подсети. Кроме того, трафик можно ограничить, связав группу безопасности сети с отдельной виртуальной машиной или сетевым интерфейсом.

Группы безопасности сети содержат четыре свойства: "Имя", "Область", "Группа ресурсов" и "Правила".
>[!Note]
Несмотря на то что группа NSG входит в определенную группу ресурсов, ее можно связать с ресурсами в любой другой группе при условии, что ресурс находится в одном регионе Azure с группой NSG.

Правила NSG содержат девять свойств: "Имя", "Протокол" (TCP, UDP или \*, которые включают ICMP а также UDP и TCP), "Диапазон исходных портов", "Диапазон портов назначения", Source address prefix (Префикс адреса источника), Destination address prefix (Префикс адреса назначения), "Направление" (входящие или исходящие), "Приоритет" (между 100 и 4096) и "Тип доступа" (разрешить или запретить). Все группы безопасности сети содержат набор правил по умолчанию, который можно удалить или переопределить с помощью созданных правил.

#### <a name="how-do-i-implement-nsgs"></a>Реализация групп безопасности сети

Реализация NSG требует тщательного планирования. При этом необходимо принимать во внимание несколько аспектов. К ним относятся ограничение числа NSG на подписку и правил на подписки; проектирование подсетей и виртуальных сетей, специальные правила, трафик ICMP, изоляция уровней с помощью подсетей, подсистемы балансировки нагрузки и многое другое.

Дополнительные сведения о планировании и реализации NSG, а также примеры сценариев развертывания см. в статье [Фильтрация сетевого трафика с помощью групп безопасности сети](https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg).

#### <a name="how-do-i-create-rules-in-an-nsg"></a>Создание правила NSG

Чтобы создать правила для входящего трафика в имеющейся группе безопасности сети, выполните такие действия:

1. Щелкните **Обзор**, а затем выберите **Группы безопасности сети**.

2. В списке групп безопасности сети выберите **NSG-FrontEnd**, а затем щелкните **Правила безопасности для входящего трафика**.

3. В списке правил безопасности для входящего трафика щелкните **Добавить**.

4. Введите значения в следующие поля: "Имя", "Приоритет", "Источник", "Протокол", "Исходный диапазон", "Назначения", "Диапазон портов назначения" и "Действие".

Через несколько секунд в NGS появится новое правило.

![Правила безопасности сети](media/protect-netsec/inbound-security.png)

Дополнительные сведения о создании NGS в подсетях, правил и связывании NGS с интерфейсными и внутренними подсетями см. в статье [Создание групп безопасности сети с помощью портала Azure](https://docs.microsoft.com/azure/virtual-network/virtual-networks-create-nsg-arm-pportal).

## <a name="next-steps"></a>Дальнейшие действия

[Сетевая безопасность Azure](https://azure.microsoft.com/blog/azure-network-security/)

[Рекомендации по обеспечению безопасности в сети Azure](https://docs.microsoft.com/azure/security/azure-security-network-security-best-practices)

[Группы безопасности сети](https://docs.microsoft.com/rest/api/network/virtualnetwork/get-information-about-a-network-security-group)

[Брандмауэр веб-приложения (WAF)](https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview)
