---
title: "Общие сведения о безопасности структуры службы aaaAzure | Документы Microsoft"
description: "В этой статье Обзор hello Azure service fabric безопасности."
services: security
documentationcenter: na
author: unifycloud
manager: swadhwa
editor: tomsh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/04/2017
ms.author: tomsh
ms.openlocfilehash: ec5355983c5d59f4e0c3b855965f03ac47f1a4c1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-service-fabric-security-overview"></a>Общие сведения о безопасности Azure Service Fabric
[Azure Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview) — это платформа распределенных систем, который позволяет легко toopackage развертывание и управление масштабируемыми и надежными микро служб. Service Fabric адреса hello значительным препятствием для разработки и управления ими облачных приложений. Получая гарантированную масштабируемость, надежность и управляемость, разработчики и администраторы могут сосредоточиться на реализации критически важных и ресурсоемких рабочих нагрузок вместо того, чтобы тратить силы на решение сложных проблем с инфраструктурой.

В этой статье Общие сведения о безопасности Azure Service Fabric основное внимание уделяется hello в следующих областях:

-   Защита кластера
-   Мониторинг и диагностика.
-   Безопасное использование сертификатов.
-   Управление доступом на основе ролей (RBAC)
-   Защита кластера с помощью системы безопасности Windows.
-   Настройка безопасности приложений в Service Fabric.
-   Защита взаимодействия служб в Azure Service Fabric.

## <a name="securing-your-cluster"></a>Защита кластера
Azure Service Fabric orchestrator службы в кластере машин, кластеры должен быть защищенным tooprevent несанкционированный пользователей подключение кластера tooyour, особенно в том случае, если он имеет рабочих нагрузок, запущенными на нем. Хотя это возможно toocreate небезопасные кластера, это позволит tooit tooconnect анонимных пользователей, если он предоставляет toohello конечные точки управления общедоступный Интернет.

В этом разделе содержится обзор hello сценариев обеспечения безопасности для кластеров под управлением Azure или на отдельном и hello tooimplement различные технологии, используемые в этих сценариях. Ниже перечислены сценарии безопасности кластера Hello.

-   безопасность обмена данными между узлами;
-   безопасность обмена данными между клиентами и узлами;

### <a name="node-to-node-security"></a>безопасность обмена данными между узлами;
Обеспечивает безопасность взаимодействия между hello виртуальных машин или машин в кластере hello. Это гарантирует, что только авторизованные toojoin hello кластера компьютерах могут участвовать в размещения приложений и служб в кластере hello.

Кластеры, работающие в Azure, или автономные кластеры, работающие под управлением Windows, могут использовать [безопасность на основе сертификатов](https://msdn.microsoft.com/library/ff649801.aspx) или [безопасность Windows](https://msdn.microsoft.com/library/ff649396.aspx) для компьютеров Windows Server.

**Безопасность обмена данными между узлами на основе сертификатов**

Service Fabric используются сертификаты X.509 сервера, которые указываются как часть конфигурации hello тип узла, при создании кластера. Краткий обзор этих сертификатов и [способа их получения или создания приведен в этой статье](https://docs.microsoft.com/dotnet/framework/wcf/feature-details/working-with-certificates).

При создании кластера hello, или через портал Azure hello, шаблоны Azure Resource Manager или шаблон JSON автономный настройки параметров безопасности сертификата. Вы можете указать основной сертификат и необязательный дополнительный сертификат, который будет использоваться для смены сертификатов. Hello первичные и вторичные сертификаты указываются должна отличаться от клиента администрирования hello и сертификаты клиента только для чтения, укажите для [безопасности узла клиента](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-cluster-security).

### <a name="client-to-node-security"></a>безопасность обмена данными между клиентами и узлами;
Клиент toonode безопасности настраивается с помощью удостоверения клиента. tooestablish доверия между клиентом и hello кластера, необходимо настроить tooknow кластера hello идентификаторы, которые клиент, он может доверять. Это можно сделать двумя способами:

-   Укажите пользователи группы домена hello, которым может подключаться или
-   Укажите узел пользователи hello домена, которые могут подключаться.

Service Fabric поддерживает два типа элемента управления различный уровень доступа для клиентов, подключенных tooa кластера Service Fabric.

-   Администратор
-   Пользователь

Управление доступом предоставляет возможность hello hello кластера администратора toolimit доступа toocertain типы операций кластера для разных групп пользователей, повышение безопасности кластера hello. Администраторы имеют полный доступ toomanagement возможности (включая возможности чтения и записи). Пользователи, по умолчанию имеют только доступ на чтение toomanagement возможности (например, возможности работы с запросами), hello возможность tooresolve, приложений и служб.

**Безопасность обмена данными между клиентами и узлами на основе сертификатов**

Защита с помощью сертификата клиента для узла настраивается при создании кластера hello, либо с помощью hello Azure portal шаблона JSON автономный путем указания сертификата клиента администратора и/или сертификат клиента пользователя или шаблонов диспетчера ресурсов. Hello клиента и пользователя сертификаты клиента администратора указываемые должна отличаться от hello первичные и вторичные сертификаты, указанные для безопасности узла на узел.

Клиенты, подключающиеся с использованием сертификата hello администратора кластера toohello имеют полный доступ toomanagement возможности. Клиенты, подключающиеся toohello кластера, с помощью сертификата клиента hello пользователя только для чтения имеют только возможности toomanagement доступ для чтения. В других word эти сертификаты используются для hello роли сформирует ролей (RBAC).

Для чтения, Azure [настроить кластер с помощью шаблона Azure Resource Manager](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) toolearn как tooconfigure сертификат безопасности в кластере.

**Безопасность обмена данными между клиентами и узлами Azure Active Directory в Azure**

Кластеров под управлением Azure для защиты доступа к toohello конечные точки управления с помощью Azure Active Directory (AAD). . В разделе [настроить кластер с помощью шаблона Azure Resource Manager](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) сведения о как toocreate hello необходимые артефакты AAD как toopopulate их во время кластера Создание и как tooconnect toothose кластеры позже.

AAD позволяет организациям (известный как клиенты) toomanage пользователя доступ tooapplications, которой разделяются на приложения с веб-входа пользовательского интерфейса и приложения с помощью интерфейса собственного клиента.

Кластер Service Fabric предлагает несколько tooits точки входа функции управления, включая hello веб-обозреватель Service Fabric и Visual Studio. В результате создания кластера toohello два AAD приложения toocontrol доступа, одно веб-приложение и один собственное приложение.
Кластеры Azure рекомендуется использовать клиенты tooauthenticate AAD безопасности и сертификаты для безопасности узла на узел.

Если в рамках автономных кластеров Windows Server используется Windows Server 2012 R2 и Active Directory, рекомендуется применять безопасность Windows с учетными записями, управляемыми группой. В противном случае используйте безопасность Windows с учетными записями Windows.

## <a name="monitoring-and-diagnostics-for-azure-service-fabric"></a>Мониторинг и диагностика для Azure Service Fabric
[Мониторинг и диагностика](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-overview) являются критические toodeveloping, тестирования и развертывания приложений и служб в любой среде. Оптимальная работа решений Service Fabric зависит от эффективного планирования и реализации мониторинга и диагностики, которые помогают обеспечить правильную работу приложений и служб в локальной среде разработки или в производственной среде.

С точки зрения безопасности hello основных целей наблюдения и диагностики, чтобы:

-   Обнаружение и диагностика неполадок оборудования и инфраструктуры, может произойти из-за tooa событий безопасности.
-   Выявление проблем с программным обеспечением и приложениями, благодаря которым можно определить индикатор компрометации.
-   Понимать ресурсов toohelp потребления предотвратить непреднамеренное отказ в обслуживании.

Здравствуйте общего процесса наблюдения и диагностики состоит из трех этапов:

-   **Созданием события:** Сюда входят события (журналов, трассировок, пользовательские события) на уровне приложения или службы и инфраструктуры hello (кластер). Дополнительные сведения о [событий на уровне инфраструктуры](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-generation-infra) и [события уровня приложения](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-generation-app) toounderstand предоставляемыми и как tooadd Далее инструментирования.
-   **Статистическая обработка событий:** созданные события должны toobe собираются и статистически обрабатываются, прежде чем они могут быть показаны. Как правило, рекомендуется использовать [диагностики Azure](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-aggregation-wad) (больше похож на основе tooagent сбора журналов) или [EventFlow](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-aggregation-eventflow) (в процессе сбора журналов).
-   **Анализ:** события должны toobe Визуализированный и доступен в некоторых формате, tooallow для анализа и отображения при необходимости. Существует несколько отличный платформы, существующие в hello рынка, когда речь заходит toohello анализа и визуализации данных наблюдения и диагностики. Hello два, мы рекомендуем являются [OMS](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-analysis-oms) и [Application Insights](https://docs.microsoft.com/azure/service-fabric/service-fabric-diagnostics-event-analysis-appinsights) из-за tootheir лучше интегрирован с Service Fabric.

Можно также использовать [монитора Azure](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview) toomonitor многие hello ресурсы Azure, на которых строится кластера Service Fabric.

Контрольный является отдельной службе, можно посмотреть работоспособности и загрузка различных служб и отчет о работоспособности для любого элемента в иерархии модели работоспособности hello. Это поможет предотвратить ошибки, которые не будут обнаружены на основе представления hello одной службы. Watchdogs также являются хорошая toohost код, который выполняет корректирующие действия без взаимодействия с пользователем (например, очистки файлов журнала в хранилище через определенные промежутки времени). Пример реализации службы наблюдения см. [здесь](https://azure.microsoft.com/resources/samples/service-fabric-watchdog-service/).

## <a name="secure-using-certificates"></a>Безопасное использование сертификатов
С помощью сертификатов, он указывает, как toosecure hello взаимодействия hello различные узлы кластера Windows, автономные также тем tooauthenticate клиенты подключения кластера toothis с использованием сертификатов X.509. Это гарантирует, что только авторизованные пользователи могут получить доступ к кластера hello hello развернутых приложений и выполнять задачи управления. При создании кластера hello на hello кластера должна быть включена защита с помощью сертификата.

### <a name="x509-certificates-and-service-fabric"></a>Сертификаты X.509 и Service Fabric
Цифровые сертификаты X.509 являются tooauthenticate часто используемые клиентами и серверами и tooencrypt и цифрового подписывания сообщений.

Hello следующей таблице перечислены hello сертификаты, необходимые для настройки кластера.

|Параметр сведений о сертификате |Описание|
|-------------------------------|-----------|
|ClusterCertificate|    Этот сертификат является обязательным toosecure hello взаимодействия между hello узлы в кластере. Для обновления можно использовать два разных сертификата — основной и дополнительный.|
|ServerCertificate| Этот сертификат представлены toohello клиента, она попытается tooconnect toothis кластера. Для обновления можно использовать два разных сертификата сервера — основной и дополнительный.|
|ClientCertificateThumbprints|  Это набор сертификатов, которые должны tooinstall на клиентах hello с проверкой подлинности.|
|ClientCertificateCommonNames|  Задать hello общее имя hello первый сертификат клиента для hello CertificateCommonName. Hello CertificateIssuerThumbprint является отпечатком hello для hello поставщиком этого сертификата.|
|ReverseProxyCertificate|   Это необязательный сертификат, который может быть указан, если необходимо, чтобы toosecure вашей [обратного прокси-сервера](https://docs.microsoft.com/azure/service-fabric/service-fabric-reverseproxy).|

Дополнительные сведения о защите сертификатов см. [здесь](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security).

## <a name="role-based-access-control-rbac"></a>Управление доступом на основе ролей (RBAC)
Контроль доступа позволяет hello кластера администратора toolimit доступа toocertain кластера операции для разных групп пользователей, повышение безопасности кластера hello. Для клиентов, подключающихся tooa кластера поддерживаются два типа элемента управления различный уровень доступа: роль администратора и роль пользователя.

Администраторы имеют полный доступ toomanagement возможности (включая возможности чтения и записи). Пользователи, по умолчанию имеют только доступ на чтение toomanagement возможности (например, возможности работы с запросами), hello возможность tooresolve, приложений и служб.

Можно указать hello администратора и пользователя клиента роли во время создания кластера hello, предоставляя удостоверения (сертификаты, AAD и т.д.) для каждого. Дополнительные сведения о параметры управления доступом по умолчанию hello и как toochange hello параметры по умолчанию см. в разделе [управления доступом на основе ролей для клиентов Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-roles).

## <a name="secure-standalone-cluster-using-windows-security"></a>Защита автономного кластера с помощью системы безопасности Windows
tooprevent несанкционированный доступ кластера Service Fabric tooa, необходимо обеспечить безопасность кластера hello. Безопасность особенно важна, запускаемый рабочих нагрузок кластера hello. Он описывает, как tooconfigure безопасности узла на узел и узел клиента с помощью средств безопасности Windows в hello файл ClusterConfig.JSON.

**Настройка безопасности Windows с помощью групповой управляемой учетной записи службы**

Настройки параметров безопасности toonode узел, установив [ClustergMSAIdentity](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-windows-security) структуры службы, когда потребуется toorun под групповой управляемой учетной записи. В порядке toobuild отношений доверия между узлами они должны быть в курсе друг с другом.

Клиент toonode безопасности настраивается с помощью ClientIdentities. В порядке tooestablish отношения доверия между клиентом и hello кластера необходимо настроить tooknow кластера hello идентификаторы, которые клиент, он может доверять.

**Настройка безопасности Windows с использованием группы компьютеров**

Узел toonode безопасности задаются на параметр с помощью ClusterIdentity, если требуется, чтобы toouse группу компьютеров в домене Active Directory. Дополнительные сведения см. в статье [How to Create a Group in Active Directory](https://msdn.microsoft.com/library/aa545347) (Как создать группу компьютеров в Active Directory).

Защиту обмена данными между клиентом и узлом можно настроить с помощью параметра ClientIdentities. tooestablish доверие между клиентом и hello кластера, необходимо настроить клиент hello tooknow кластера hello, можно доверять удостоверений, которые hello кластера. Установить отношения доверия можно двумя разными способами:

-   Укажите пользователи группы домена hello, которые могут подключаться.
-   Укажите узел пользователи hello домена, которые могут подключаться.

## <a name="configure-application-security-in-service-fabric"></a>Настройка безопасности приложений в Service Fabric.
### <a name="managing-secrets-in-service-fabric-applications"></a>Управление секретами в приложениях Service Fabric
Этот метод помогает с управлением секретами в приложении Service Fabric. Секретом может считаться любая конфиденциальная информации, например строка подключения к хранилищу, пароль или другое значение, которое не должно обрабатываться в виде обычного текста.

Этот подход использует [хранилище ключей Azure](https://docs.microsoft.com/azure/key-vault/key-vault-whatis) toomanage ключи и секретные коды. Тем не менее использование секретной информации в приложении — облака tooallow платформенно независимые приложения toobe развертывания tooa кластера размещена в любом месте. Этот поток состоит из четырех основных шагов.

-   Получение сертификата шифрования данных.
-   Установите сертификат hello в кластере.
-   Шифрование значения секрета при развертывании приложения с сертификатом hello и вставить их в файл конфигурации службы Settings.xml.
-   Чтение зашифрованные значения из Settings.xml, расшифровывая с hello того же сертификата шифрование.

>[!Note]
>Дополнительные сведения см. в статье [Управление секретами в приложениях Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-secret-management).

### <a name="configure-security-policies-for-your-application"></a>Настройка политик безопасности для приложения
С помощью безопасности структуры службы Azure, вы можете помочь безопасных приложений, запущенных в кластере hello с разными учетными записями. Безопасность структуры службы также помогает безопасного hello ресурсы, используемые приложениями во время hello развертывания под учетными записями пользователей hello — например, файлы, каталоги и сертификаты. Это позволяет изолировать друг от друга выполняемые приложения, даже если они запущены в общей среде.
Hello шаги включают:

-   Настройте политику hello для точки входа установки службы.
-   Запуск команд PowerShell из точки входа настройки.
-   Использование перенаправления консоли для локальной отладки.
-   Настройка политики для пакетов кода службы.
-   Назначение политики безопасности доступа для конечных точек HTTP и HTTPS.

## <a name="secure-communication-for-services-in-azure-service-fabric-security"></a>Защита взаимодействия служб в Azure Service Fabric.
Безопасность является одним из самых важных аспектов hello связи. Платформа приложения Hello надежные службы предоставляет несколько готовых связи стеки и средства, которые могут быть tooimprove используется безопасности.

-   [Защита взаимодействия служб в Azure Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-secure-communication)
-   [Защита службы при использовании стека взаимодействия на основе WCF](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-secure-communication#help-secure-a-service-when-youre-using-a-wcf-based-communication-stack)

## <a name="next-steps"></a>Дальнейшие действия
- Основные сведения о безопасности кластера см. в статье [Создание кластера Service Fabric в Azure с помощью Azure Resource Manager](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) и на [портале Azure](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-portal).
- Ознакомьтесь с дополнительными сведениями о [защите кластера Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security).
