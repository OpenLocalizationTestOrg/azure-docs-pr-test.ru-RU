---
title: "Конфиденциальные данные. Средство моделирования угроз Microsoft Azure | Документация Майкрософт"
description: "Устранение угроз, обнаруженных с помощью средства моделирования угроз"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 21d1ba02052862e16ef27ec313d53cd0bffcc21a
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="security-frame-sensitive-data--mitigations"></a><span data-ttu-id="42f06-103">Механизм безопасности. Конфиденциальные данные | Устранение угроз</span><span class="sxs-lookup"><span data-stu-id="42f06-103">Security Frame: Sensitive Data | Mitigations</span></span> 
| <span data-ttu-id="42f06-104">Продукт или служба</span><span class="sxs-lookup"><span data-stu-id="42f06-104">Product/Service</span></span> | <span data-ttu-id="42f06-105">Статья</span><span class="sxs-lookup"><span data-stu-id="42f06-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="42f06-106">**Граница доверия между компьютерами**</span><span class="sxs-lookup"><span data-stu-id="42f06-106">**Machine Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="42f06-107">Двоичные файлы, содержащие конфиденциальные данные, должны быть замаскированы</span><span class="sxs-lookup"><span data-stu-id="42f06-107">Ensure that binaries are obfuscated if they contain sensitive information</span></span>](#binaries-info)</li><li>[<span data-ttu-id="42f06-108">Используйте шифрование на уровне файловой системы (EFS) для защиты конфиденциальных данных пользователя</span><span class="sxs-lookup"><span data-stu-id="42f06-108">Consider using Encrypted File System (EFS) is used to protect confidential user-specific data</span></span>](#efs-user)</li><li>[<span data-ttu-id="42f06-109">Настройте шифрование конфиденциальных данных, сохраняемых приложением в файловой системе</span><span class="sxs-lookup"><span data-stu-id="42f06-109">Ensure that sensitive data stored by the application on the file system is encrypted</span></span>](#filesystem)</li></ul> | 
| <span data-ttu-id="42f06-110">**Веб-приложение**</span><span class="sxs-lookup"><span data-stu-id="42f06-110">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="42f06-111">Конфиденциальное содержимое не должно кэшироваться в браузере</span><span class="sxs-lookup"><span data-stu-id="42f06-111">Ensure that sensitive content is not cached on the browser</span></span>](#cache-browser)</li><li>[<span data-ttu-id="42f06-112">Зашифруйте разделы файлов конфигурации веб-приложения, содержащие конфиденциальные данные</span><span class="sxs-lookup"><span data-stu-id="42f06-112">Encrypt sections of Web App's configuration files that contain sensitive data</span></span>](#encrypt-data)</li><li>[<span data-ttu-id="42f06-113">Явным образом отключите автозаполнение атрибута HTML в конфиденциальных формах и входных данных</span><span class="sxs-lookup"><span data-stu-id="42f06-113">Explicitly disable the autocomplete HTML attribute in sensitive forms and inputs</span></span>](#autocomplete-input)</li><li>[<span data-ttu-id="42f06-114">Замаскируйте конфиденциальные данные, отображаемые на экране пользователя</span><span class="sxs-lookup"><span data-stu-id="42f06-114">Ensure that sensitive data displayed on the user screen is masked</span></span>](#data-mask)</li></ul> | 
| <span data-ttu-id="42f06-115">**База данных**</span><span class="sxs-lookup"><span data-stu-id="42f06-115">**Database**</span></span> | <ul><li>[<span data-ttu-id="42f06-116">Реализуйте динамическую маскировку данных, чтобы уменьшить шансы раскрытия конфиденциальных данных для непривилегированных пользователей</span><span class="sxs-lookup"><span data-stu-id="42f06-116">Implement dynamic data masking to limit sensitive data exposure non privileged users</span></span>](#dynamic-users)</li><li>[<span data-ttu-id="42f06-117">Обеспечьте хранение паролей в формате хэша с использованием случайной строки данных</span><span class="sxs-lookup"><span data-stu-id="42f06-117">Ensure that passwords are stored in salted hash format</span></span>](#salted-hash)</li><li>[<span data-ttu-id="42f06-118">Шифруйте конфиденциальные данные в столбцах базы данных</span><span class="sxs-lookup"><span data-stu-id="42f06-118"> Ensure that sensitive data in database columns is encrypted</span></span>](#db-encrypted)</li><li>[<span data-ttu-id="42f06-119">Включите шифрование уровня базы данных (TDE)</span><span class="sxs-lookup"><span data-stu-id="42f06-119">Ensure that database-level encryption (TDE) is enabled</span></span>](#tde-enabled)</li><li>[<span data-ttu-id="42f06-120">Зашифруйте резервные копии базы данных</span><span class="sxs-lookup"><span data-stu-id="42f06-120">Ensure that database backups are encrypted</span></span>](#backup)</li></ul> | 
| <span data-ttu-id="42f06-121">**Веб-интерфейс API**</span><span class="sxs-lookup"><span data-stu-id="42f06-121">**Web API**</span></span> | <ul><li>[<span data-ttu-id="42f06-122">В хранилище браузера не должны храниться конфиденциальные данные, относящиеся к веб-API</span><span class="sxs-lookup"><span data-stu-id="42f06-122">Ensure that sensitive data relevant to Web API is not stored in browser's storage</span></span>](#api-browser)</li></ul> | 
| <span data-ttu-id="42f06-123">Azure DocumentDB</span><span class="sxs-lookup"><span data-stu-id="42f06-123">Azure Document DB</span></span> | <ul><li>[<span data-ttu-id="42f06-124">Шифруйте конфиденциальные данные, хранящиеся в DocumentDB</span><span class="sxs-lookup"><span data-stu-id="42f06-124">Encrypt sensitive data stored in DocumentDB</span></span>](#encrypt-docdb)</li></ul> | 
| <span data-ttu-id="42f06-125">**Граница доверия виртуальной машины IaaS Azure**</span><span class="sxs-lookup"><span data-stu-id="42f06-125">**Azure IaaS VM Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="42f06-126">Шифруйте диски, используемые виртуальными машинами, с помощью шифрования дисков Azure</span><span class="sxs-lookup"><span data-stu-id="42f06-126">Use Azure Disk Encryption to encrypt disks used by Virtual Machines</span></span>](#disk-vm)</li></ul> | 
| <span data-ttu-id="42f06-127">**Граница доверия Service Fabric**</span><span class="sxs-lookup"><span data-stu-id="42f06-127">**Service Fabric Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="42f06-128">Шифруйте секреты в приложениях Service Fabric</span><span class="sxs-lookup"><span data-stu-id="42f06-128">Encrypt secrets in Service Fabric applications</span></span>](#fabric-apps)</li></ul> | 
| <span data-ttu-id="42f06-129">**Dynamics CRM**</span><span class="sxs-lookup"><span data-stu-id="42f06-129">**Dynamics CRM**</span></span> | <ul><li>[<span data-ttu-id="42f06-130">Выполняйте моделирование безопасности, при необходимости привлекая рабочие подразделения и группы</span><span class="sxs-lookup"><span data-stu-id="42f06-130">Perform security modeling and use Business Units/Teams where required</span></span>](#modeling-teams)</li><li>[<span data-ttu-id="42f06-131">Ограничьте доступ к общим функциям критически важных сущностей</span><span class="sxs-lookup"><span data-stu-id="42f06-131">Minimize access to share feature on critical entities</span></span>](#entities)</li><li>[<span data-ttu-id="42f06-132">Информируйте пользователей о рисках, связанных с использованием функции "Поделиться" Dynamics CRM, и предоставьте им рекомендации безопасности</span><span class="sxs-lookup"><span data-stu-id="42f06-132">Train users on the risks associated with the Dynamics CRM Share feature and good security practices</span></span>](#good-practices)</li><li>[<span data-ttu-id="42f06-133">Включите стандартные правила разработки, запрещающие показ данных о конфигурации в управлении исключениями</span><span class="sxs-lookup"><span data-stu-id="42f06-133">Include a development standards rule proscribing showing config details in exception management</span></span>](#exception-mgmt)</li></ul> | 
| <span data-ttu-id="42f06-134">**Хранилище Azure**</span><span class="sxs-lookup"><span data-stu-id="42f06-134">**Azure Storage**</span></span> | <ul><li>[<span data-ttu-id="42f06-135">Используйте шифрование службы хранилища Azure (SSE) для неактивных данных (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="42f06-135">Use Azure Storage Service Encryption (SSE) for Data at Rest (Preview)</span></span>](#sse-preview)</li><li>[<span data-ttu-id="42f06-136">Используйте шифрование на стороне клиента для хранения конфиденциальных данных в службе хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="42f06-136">Use Client-Side Encryption to store sensitive data in Azure Storage</span></span>](#client-storage)</li></ul> | 
| <span data-ttu-id="42f06-137">**Мобильный клиент**</span><span class="sxs-lookup"><span data-stu-id="42f06-137">**Mobile Client**</span></span> | <ul><li>[<span data-ttu-id="42f06-138">Шифруйте конфиденциальные данные или личные данные, записываемые в локальное хранилище телефонов</span><span class="sxs-lookup"><span data-stu-id="42f06-138">Encrypt sensitive or PII data written to phones local storage</span></span>](#pii-phones)</li><li>[<span data-ttu-id="42f06-139">Маскируйте созданные двоичные файлы перед их распространением конечным пользователям</span><span class="sxs-lookup"><span data-stu-id="42f06-139">Obfuscate generated binaries before distributing to end users</span></span>](#binaries-end)</li></ul> | 
| <span data-ttu-id="42f06-140">**WCF**</span><span class="sxs-lookup"><span data-stu-id="42f06-140">**WCF**</span></span> | <ul><li>[<span data-ttu-id="42f06-141">Установите для параметра clientCredentialType значение Certificate или Windows</span><span class="sxs-lookup"><span data-stu-id="42f06-141"> Set clientCredentialType to Certificate or Windows</span></span>](#cert)</li><li>[<span data-ttu-id="42f06-142">Не включен режим безопасности WCF</span><span class="sxs-lookup"><span data-stu-id="42f06-142">WCF-Security Mode is not enabled</span></span>](#security)</li></ul> | 

## <span data-ttu-id="42f06-143"><a id="binaries-info"></a>Двоичные файлы, содержащие конфиденциальные данные, должны быть замаскированы</span><span class="sxs-lookup"><span data-stu-id="42f06-143"><a id="binaries-info"></a>Ensure that binaries are obfuscated if they contain sensitive information</span></span>

| <span data-ttu-id="42f06-144">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-144">Title</span></span>                   | <span data-ttu-id="42f06-145">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-145">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-146">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-146">**Component**</span></span>               | <span data-ttu-id="42f06-147">Отношения доверия между компьютерами</span><span class="sxs-lookup"><span data-stu-id="42f06-147">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="42f06-148">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-148">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-149">Развертывание</span><span class="sxs-lookup"><span data-stu-id="42f06-149">Deployment</span></span> |  
| <span data-ttu-id="42f06-150">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-150">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-151">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-151">Generic</span></span> |
| <span data-ttu-id="42f06-152">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-152">**Attributes**</span></span>              | <span data-ttu-id="42f06-153">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-153">N/A</span></span>  |
| <span data-ttu-id="42f06-154">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-154">**References**</span></span>              | <span data-ttu-id="42f06-155">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-155">N/A</span></span>  |
| <span data-ttu-id="42f06-156">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-156">**Steps**</span></span> | <span data-ttu-id="42f06-157">Двоичные файлы, содержащие конфиденциальные данные, например коммерческие тайны или конфиденциальную бизнес-логику, которую нельзя отменить, следует маскировать.</span><span class="sxs-lookup"><span data-stu-id="42f06-157">Ensure that binaries are obfuscated if they contain sensitive information such as trade secrets, sensitive business logic that should not reversed.</span></span> <span data-ttu-id="42f06-158">Это позволит остановить проведение инженерного анализа сборок.</span><span class="sxs-lookup"><span data-stu-id="42f06-158">This is to stop reverse engineering of assemblies.</span></span> <span data-ttu-id="42f06-159">Для этой цели можно использовать такой инструмент, как `CryptoObfuscator`.</span><span class="sxs-lookup"><span data-stu-id="42f06-159">Tools like `CryptoObfuscator` may be used for this purpose.</span></span> |

## <span data-ttu-id="42f06-160"><a id="efs-user"></a>Используйте шифрование на уровне файловой системы (EFS) для защиты конфиденциальных данных пользователя</span><span class="sxs-lookup"><span data-stu-id="42f06-160"><a id="efs-user"></a>Consider using Encrypted File System (EFS) is used to protect confidential user-specific data</span></span>

| <span data-ttu-id="42f06-161">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-161">Title</span></span>                   | <span data-ttu-id="42f06-162">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-162">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-163">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-163">**Component**</span></span>               | <span data-ttu-id="42f06-164">Отношения доверия между компьютерами</span><span class="sxs-lookup"><span data-stu-id="42f06-164">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="42f06-165">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-165">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-166">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-166">Build</span></span> |  
| <span data-ttu-id="42f06-167">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-167">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-168">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-168">Generic</span></span> |
| <span data-ttu-id="42f06-169">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-169">**Attributes**</span></span>              | <span data-ttu-id="42f06-170">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-170">N/A</span></span>  |
| <span data-ttu-id="42f06-171">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-171">**References**</span></span>              | <span data-ttu-id="42f06-172">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-172">N/A</span></span>  |
| <span data-ttu-id="42f06-173">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-173">**Steps**</span></span> | <span data-ttu-id="42f06-174">Рассмотрите возможность использования шифрования на уровне файловой системы для защиты конфиденциальных данных пользователя от злоумышленников, использующих физический доступ к компьютеру.</span><span class="sxs-lookup"><span data-stu-id="42f06-174">Consider using Encrypted File System (EFS) is used to protect confidential user-specific data from adversaries with physical access to the computer.</span></span> |

## <span data-ttu-id="42f06-175"><a id="filesystem"></a>Настройте шифрование конфиденциальных данных, сохраняемых приложением в файловой системе</span><span class="sxs-lookup"><span data-stu-id="42f06-175"><a id="filesystem"></a>Ensure that sensitive data stored by the application on the file system is encrypted</span></span>

| <span data-ttu-id="42f06-176">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-176">Title</span></span>                   | <span data-ttu-id="42f06-177">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-177">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-178">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-178">**Component**</span></span>               | <span data-ttu-id="42f06-179">Отношения доверия между компьютерами</span><span class="sxs-lookup"><span data-stu-id="42f06-179">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="42f06-180">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-180">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-181">Развертывание</span><span class="sxs-lookup"><span data-stu-id="42f06-181">Deployment</span></span> |  
| <span data-ttu-id="42f06-182">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-182">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-183">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-183">Generic</span></span> |
| <span data-ttu-id="42f06-184">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-184">**Attributes**</span></span>              | <span data-ttu-id="42f06-185">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-185">N/A</span></span>  |
| <span data-ttu-id="42f06-186">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-186">**References**</span></span>              | <span data-ttu-id="42f06-187">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-187">N/A</span></span>  |
| <span data-ttu-id="42f06-188">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-188">**Steps**</span></span> | <span data-ttu-id="42f06-189">Шифруйте конфиденциальные данные, сохраняемые приложением в файловой системе (например, с помощью DPAPI), если невозможно применить шифрование на уровне файловой системы.</span><span class="sxs-lookup"><span data-stu-id="42f06-189">Ensure that sensitive data stored by the application on the file system is encrypted (e.g., using DPAPI), if EFS cannot be enforced</span></span> |

## <span data-ttu-id="42f06-190"><a id="cache-browser"></a>Конфиденциальное содержимое не должно кэшироваться в браузере</span><span class="sxs-lookup"><span data-stu-id="42f06-190"><a id="cache-browser"></a>Ensure that sensitive content is not cached on the browser</span></span>

| <span data-ttu-id="42f06-191">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-191">Title</span></span>                   | <span data-ttu-id="42f06-192">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-192">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-193">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-193">**Component**</span></span>               | <span data-ttu-id="42f06-194">Веб-приложение</span><span class="sxs-lookup"><span data-stu-id="42f06-194">Web Application</span></span> | 
| <span data-ttu-id="42f06-195">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-195">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-196">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-196">Build</span></span> |  
| <span data-ttu-id="42f06-197">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-197">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-198">Универсальные, веб-формы, MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="42f06-198">Generic, Web Forms, MVC5, MVC6</span></span> |
| <span data-ttu-id="42f06-199">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-199">**Attributes**</span></span>              | <span data-ttu-id="42f06-200">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-200">N/A</span></span>  |
| <span data-ttu-id="42f06-201">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-201">**References**</span></span>              | <span data-ttu-id="42f06-202">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-202">N/A</span></span>  |
| <span data-ttu-id="42f06-203">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-203">**Steps**</span></span> | <span data-ttu-id="42f06-204">Браузеры могут сохранять информацию для кэширования и ведения истории.</span><span class="sxs-lookup"><span data-stu-id="42f06-204">Browsers can store information for purposes of caching and history.</span></span> <span data-ttu-id="42f06-205">Эти кэшированные файлы хранятся в папке, подобной папке временных файлов Интернета в Internet Explorer.</span><span class="sxs-lookup"><span data-stu-id="42f06-205">These cached files are stored in a folder, like the Temporary Internet Files folder in the case of Internet Explorer.</span></span> <span data-ttu-id="42f06-206">При повторном обращении к страницам браузер отображает их из кэша.</span><span class="sxs-lookup"><span data-stu-id="42f06-206">When these pages are referred again, the browser displays them from its cache.</span></span> <span data-ttu-id="42f06-207">Если конфиденциальные сведения отображаются пользователю (например, адреса, данные кредитной карты, номер социального страхования или имя пользователя), эта информация может быть сохранена в кэше браузера, а значит ее можно получить путем проверки кэша браузера или просто нажатием кнопки "Назад" в браузере.</span><span class="sxs-lookup"><span data-stu-id="42f06-207">If sensitive information is displayed to the user (such as their address, credit card details, Social Security Number, or username), then this information could be stored in browser’s cache, and therefore retrievable through examining the browser's cache or by simply pressing the browser's "Back" button.</span></span> <span data-ttu-id="42f06-208">Задайте для заголовка ответа Cache-Control значение no-store ("не сохранять") для всех страниц.</span><span class="sxs-lookup"><span data-stu-id="42f06-208">Set cache-control response header value to “no-store” for all pages.</span></span> |

### <a name="example"></a><span data-ttu-id="42f06-209">Пример</span><span class="sxs-lookup"><span data-stu-id="42f06-209">Example</span></span>
```XML
<configuration>
  <system.webServer>
   <httpProtocol>
    <customHeaders>
        <add name="Cache-Control" value="no-cache" />
        <add name="Pragma" value="no-cache" />
        <add name="Expires" value="-1" />
    </customHeaders>
  </httpProtocol>
 </system.webServer>
</configuration>
```

### <a name="example"></a><span data-ttu-id="42f06-210">Пример</span><span class="sxs-lookup"><span data-stu-id="42f06-210">Example</span></span>
<span data-ttu-id="42f06-211">Вы можете сделать это, используя фильтр.</span><span class="sxs-lookup"><span data-stu-id="42f06-211">This may be implemented through a filter.</span></span> <span data-ttu-id="42f06-212">Воспользуйтесь следующим примером.</span><span class="sxs-lookup"><span data-stu-id="42f06-212">Following example may be used:</span></span> 
```C#
public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
            if (filterContext == null || (filterContext.HttpContext != null && filterContext.HttpContext.Response != null && filterContext.HttpContext.Response.IsRequestBeingRedirected))
            {
                //// Since this is MVC pipeline, this should never be null.
                return;
            }

            var attributes = filterContext.ActionDescriptor.GetCustomAttributes(typeof(System.Web.Mvc.OutputCacheAttribute), false);
            if (attributes == null || **Attributes**.Count() == 0)
            {
                filterContext.HttpContext.Response.Cache.SetNoStore();
                filterContext.HttpContext.Response.Cache.SetCacheability(HttpCacheability.NoCache);
                filterContext.HttpContext.Response.Cache.SetExpires(DateTime.UtcNow.AddHours(-1));
                if (!filterContext.IsChildAction)
                {
                    filterContext.HttpContext.Response.AppendHeader("Pragma", "no-cache");
                }
            }

            base.OnActionExecuting(filterContext);
        }
``` 

## <span data-ttu-id="42f06-213"><a id="encrypt-data"></a>Зашифруйте разделы файлов конфигурации веб-приложения, содержащие конфиденциальные данные</span><span class="sxs-lookup"><span data-stu-id="42f06-213"><a id="encrypt-data"></a>Encrypt sections of Web App's configuration files that contain sensitive data</span></span>

| <span data-ttu-id="42f06-214">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-214">Title</span></span>                   | <span data-ttu-id="42f06-215">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-215">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-216">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-216">**Component**</span></span>               | <span data-ttu-id="42f06-217">Веб-приложение</span><span class="sxs-lookup"><span data-stu-id="42f06-217">Web Application</span></span> | 
| <span data-ttu-id="42f06-218">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-218">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-219">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-219">Build</span></span> |  
| <span data-ttu-id="42f06-220">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-220">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-221">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-221">Generic</span></span> |
| <span data-ttu-id="42f06-222">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-222">**Attributes**</span></span>              | <span data-ttu-id="42f06-223">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-223">N/A</span></span>  |
| <span data-ttu-id="42f06-224">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-224">**References**</span></span>              | <span data-ttu-id="42f06-225">[Руководство по шифрованию разделов конфигурации в ASP.NET 2.0 с помощью DPAPI](https://msdn.microsoft.com/library/ff647398.aspx), [сведения об указании поставщика защищенной конфигурации](https://msdn.microsoft.com/library/68ze1hb2.aspx), [использование Azure Key Vault для защиты секретов приложения](https://azure.microsoft.com/documentation/articles/guidance-multitenant-identity-keyvault/)</span><span class="sxs-lookup"><span data-stu-id="42f06-225">[How To: Encrypt Configuration Sections in ASP.NET 2.0 Using DPAPI](https://msdn.microsoft.com/library/ff647398.aspx), [Specifying a Protected Configuration Provider](https://msdn.microsoft.com/library/68ze1hb2.aspx), [Using Azure Key Vault to protect application secrets](https://azure.microsoft.com/documentation/articles/guidance-multitenant-identity-keyvault/)</span></span> |
| <span data-ttu-id="42f06-226">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-226">**Steps**</span></span> | <span data-ttu-id="42f06-227">Такие файлы конфигурации, как web.config и appsettings.json, часто используются для хранения конфиденциальной информации, включая имена пользователей, пароли, строки подключения к базам данных и ключи шифрования.</span><span class="sxs-lookup"><span data-stu-id="42f06-227">Configuration files such as the Web.config, appsettings.json are often used to hold sensitive information, including user names, passwords, database connection strings, and encryption keys.</span></span> <span data-ttu-id="42f06-228">Если эти данные не защищены, приложение становится уязвимым для злоумышленников, которые таким образом могут получить различные конфиденциальные сведения, например имена учетных записей пользователей, пароли, имена баз данных и имена серверов.</span><span class="sxs-lookup"><span data-stu-id="42f06-228">If you do not protect this information, your application is vulnerable to attackers or malicious users obtaining sensitive information such as account user names and passwords, database names and server names.</span></span> <span data-ttu-id="42f06-229">На основе типа развертывания (Azure или локального) зашифруйте конфиденциальные разделы файлов конфигурации с помощью DPAPI или таких служб, как Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="42f06-229">Based on the deployment type (azure/on-prem), encrypt the sensitive sections of config files using DPAPI or services like Azure Key Vault.</span></span> |

## <span data-ttu-id="42f06-230"><a id="autocomplete-input"></a>Явным образом отключите автозаполнение атрибута HTML в конфиденциальных формах и входных данных</span><span class="sxs-lookup"><span data-stu-id="42f06-230"><a id="autocomplete-input"></a>Explicitly disable the autocomplete HTML attribute in sensitive forms and inputs</span></span>

| <span data-ttu-id="42f06-231">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-231">Title</span></span>                   | <span data-ttu-id="42f06-232">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-232">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-233">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-233">**Component**</span></span>               | <span data-ttu-id="42f06-234">Веб-приложение</span><span class="sxs-lookup"><span data-stu-id="42f06-234">Web Application</span></span> | 
| <span data-ttu-id="42f06-235">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-235">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-236">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-236">Build</span></span> |  
| <span data-ttu-id="42f06-237">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-237">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-238">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-238">Generic</span></span> |
| <span data-ttu-id="42f06-239">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-239">**Attributes**</span></span>              | <span data-ttu-id="42f06-240">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-240">N/A</span></span>  |
| <span data-ttu-id="42f06-241">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-241">**References**</span></span>              | <span data-ttu-id="42f06-242">[Сведения об атрибуте autocomplete на сайте MSDN](http://msdn.microsoft.com/library/ms533486(VS.85).aspx), [использование функции автозаполнение в формах HTML](http://msdn.microsoft.com/library/ms533032.aspx), [Бюллетень по безопасности (Майкрософт) MS10-071 — критическое](http://technet.microsoft.com/security/bulletin/MS10-071), [запись блога о функции автозаполнения](http://blog.mindedsecurity.com/2011/10/autocompleteagain.html)</span><span class="sxs-lookup"><span data-stu-id="42f06-242">[MSDN: autocomplete attribute](http://msdn.microsoft.com/library/ms533486(VS.85).aspx), [Using AutoComplete in HTML](http://msdn.microsoft.com/library/ms533032.aspx), [HTML Sanitization Vulnerability](http://technet.microsoft.com/security/bulletin/MS10-071), [Autocomplete.,again?!](http://blog.mindedsecurity.com/2011/10/autocompleteagain.html)</span></span> |
| <span data-ttu-id="42f06-243">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-243">**Steps**</span></span> | <span data-ttu-id="42f06-244">Атрибут autocompletee указывает, включено ли автозаполнение формы.</span><span class="sxs-lookup"><span data-stu-id="42f06-244">The autocomplete attribute specifies whether a form should have autocomplete on or off.</span></span> <span data-ttu-id="42f06-245">Если автозаполнение включено, браузер автоматически использует значения, введенные пользователем.</span><span class="sxs-lookup"><span data-stu-id="42f06-245">When autocomplete is on, the browser automatically complete values based on values that the user has entered before.</span></span> <span data-ttu-id="42f06-246">Например, если форма, в которую вы ввели новое имя и пароль, успешно отправлена, браузер спрашивает, нужно ли сохранить пароль. В дальнейшем при отображении формы имя и пароль заполняются автоматически или непосредственно во время введения имени.</span><span class="sxs-lookup"><span data-stu-id="42f06-246">For example, when a new name and password is entered in a form and the form is submitted, the browser asks if the password should be saved.Thereafter when the form is displayed, the name and password are filled in automatically or are completed as the name is entered.</span></span> <span data-ttu-id="42f06-247">Злоумышленник, у которого есть локальный доступ, может получить открытый пароль из кэша браузера.</span><span class="sxs-lookup"><span data-stu-id="42f06-247">An attacker with local access could obtain the clear text password from the browser cache.</span></span> <span data-ttu-id="42f06-248">По умолчанию автозаполнение включено, поэтому его явным образом следует отключить.</span><span class="sxs-lookup"><span data-stu-id="42f06-248">By default autocomplete is enabled, and it must explicitly be disabled.</span></span> |

### <a name="example"></a><span data-ttu-id="42f06-249">Пример</span><span class="sxs-lookup"><span data-stu-id="42f06-249">Example</span></span>
```C#
<form action="Login.aspx" method="post " autocomplete="off" >
      Social Security Number: <input type="text" name="ssn" />
      <input type="submit" value="Submit" />    
</form>
```

## <span data-ttu-id="42f06-250"><a id="data-mask"></a>Замаскируйте конфиденциальные данные, отображаемые на экране пользователя</span><span class="sxs-lookup"><span data-stu-id="42f06-250"><a id="data-mask"></a>Ensure that sensitive data displayed on the user screen is masked</span></span>

| <span data-ttu-id="42f06-251">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-251">Title</span></span>                   | <span data-ttu-id="42f06-252">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-252">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-253">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-253">**Component**</span></span>               | <span data-ttu-id="42f06-254">Веб-приложение</span><span class="sxs-lookup"><span data-stu-id="42f06-254">Web Application</span></span> | 
| <span data-ttu-id="42f06-255">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-255">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-256">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-256">Build</span></span> |  
| <span data-ttu-id="42f06-257">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-257">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-258">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-258">Generic</span></span> |
| <span data-ttu-id="42f06-259">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-259">**Attributes**</span></span>              | <span data-ttu-id="42f06-260">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-260">N/A</span></span>  |
| <span data-ttu-id="42f06-261">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-261">**References**</span></span>              | <span data-ttu-id="42f06-262">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-262">N/A</span></span>  |
| <span data-ttu-id="42f06-263">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-263">**Steps**</span></span> | <span data-ttu-id="42f06-264">Конфиденциальные данные, такие как пароли, номера кредитных карт, номера социального страхования и т. д., при отображении на экране должны быть скрыты.</span><span class="sxs-lookup"><span data-stu-id="42f06-264">Sensitive data such as passwords, credit card numbers, SSN etc. should be masked when displayed on the screen.</span></span> <span data-ttu-id="42f06-265">Это необходимо для предотвращения несанкционированного доступа к данным (например, сотрудники могут просмотреть пароль при его вводе другим сотрудником, персонал группы поддержки может просмотреть номера социального страхования пользователей).</span><span class="sxs-lookup"><span data-stu-id="42f06-265">This is to prevent unauthorized personnel from accessing the data (e.g., shoulder-surfing passwords, support personnel viewing SSN numbers of users) .</span></span> <span data-ttu-id="42f06-266">Убедитесь, что эти данные не отображаются в обычном тексте и что они скрыты должным образом.</span><span class="sxs-lookup"><span data-stu-id="42f06-266">Ensure that these data elements are not visible in plain text and are appropriately masked.</span></span> <span data-ttu-id="42f06-267">Вам необходимо позаботиться об этом как на этапе принятия их в качестве входных данных (например,</span><span class="sxs-lookup"><span data-stu-id="42f06-267">This has to be taken care while accepting them as input (e.g,.</span></span> <span data-ttu-id="42f06-268">input type="password"), так и при отображении на экране (например, отображать только последние 4 цифры номера кредитной карты).</span><span class="sxs-lookup"><span data-stu-id="42f06-268">input type="password") as well as displaying back on the screen (e.g., display only the last 4 digits of the credit card number).</span></span> |

## <span data-ttu-id="42f06-269"><a id="dynamic-users"></a>Реализуйте динамическую маскировку данных, чтобы уменьшить шансы раскрытия конфиденциальных данных для непривилегированных пользователей</span><span class="sxs-lookup"><span data-stu-id="42f06-269"><a id="dynamic-users"></a>Implement dynamic data masking to limit sensitive data exposure non privileged users</span></span>

| <span data-ttu-id="42f06-270">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-270">Title</span></span>                   | <span data-ttu-id="42f06-271">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-271">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-272">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-272">**Component**</span></span>               | <span data-ttu-id="42f06-273">База данных</span><span class="sxs-lookup"><span data-stu-id="42f06-273">Database</span></span> | 
| <span data-ttu-id="42f06-274">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-274">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-275">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-275">Build</span></span> |  
| <span data-ttu-id="42f06-276">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-276">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-277">SQL Azure, локальные</span><span class="sxs-lookup"><span data-stu-id="42f06-277">Sql Azure, OnPrem</span></span> |
| <span data-ttu-id="42f06-278">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-278">**Attributes**</span></span>              | <span data-ttu-id="42f06-279">Версия SQL: 12, MsSQL2016</span><span class="sxs-lookup"><span data-stu-id="42f06-279">SQL Version - V12, SQL Version - MsSQL2016</span></span> |
| <span data-ttu-id="42f06-280">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-280">**References**</span></span>              | [<span data-ttu-id="42f06-281">динамическое маскирование данных;</span><span class="sxs-lookup"><span data-stu-id="42f06-281">Dynamic Data Masking</span></span>](https://msdn.microsoft.com/library/mt130841) |
| <span data-ttu-id="42f06-282">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-282">**Steps**</span></span> | <span data-ttu-id="42f06-283">Цель динамической маскировки данных — уменьшить шансы раскрытия конфиденциальных данных пользователями, у которых нет разрешения на их просмотр.</span><span class="sxs-lookup"><span data-stu-id="42f06-283">The purpose of dynamic data masking is to limit exposure of sensitive data, preventing users who should not have access to the data from viewing it.</span></span> <span data-ttu-id="42f06-284">Динамическая маскировка данных не предотвращает подключение пользователей базы данных непосредственно к базе данных и выполнение тщательных запросов, способных выявить фрагменты конфиденциальных данных.</span><span class="sxs-lookup"><span data-stu-id="42f06-284">Dynamic data masking does not aim to prevent database users from connecting directly to the database and running exhaustive queries that expose pieces of the sensitive data.</span></span> <span data-ttu-id="42f06-285">Динамическая маскировка данных дополняет другие функции безопасности SQL Server (аудит, шифрование, защита на уровне строк и т. д.). Мы рекомендуем использовать эту функцию в сочетании с другими для обеспечения лучшей защиты конфиденциальных сведений базы данных.</span><span class="sxs-lookup"><span data-stu-id="42f06-285">Dynamic data masking is complementary to other SQL Server security features (auditing, encryption, row level security…) and it is highly recommended to use this feature in conjunction with them in addition in order to better protect the sensitive data in the database.</span></span> <span data-ttu-id="42f06-286">Обратите внимание, что эта функция поддерживается только в SQL Server (начиная с версии 2016) и базе данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="42f06-286">Please note that this feature is supported only by SQL Server starting with 2016 and Azure SQL Database.</span></span> |

## <span data-ttu-id="42f06-287"><a id="salted-hash"></a>Обеспечьте хранение паролей в формате хэша с использованием случайной строки данных</span><span class="sxs-lookup"><span data-stu-id="42f06-287"><a id="salted-hash"></a>Ensure that passwords are stored in salted hash format</span></span>

| <span data-ttu-id="42f06-288">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-288">Title</span></span>                   | <span data-ttu-id="42f06-289">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-289">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-290">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-290">**Component**</span></span>               | <span data-ttu-id="42f06-291">База данных</span><span class="sxs-lookup"><span data-stu-id="42f06-291">Database</span></span> | 
| <span data-ttu-id="42f06-292">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-292">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-293">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-293">Build</span></span> |  
| <span data-ttu-id="42f06-294">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-294">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-295">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-295">Generic</span></span> |
| <span data-ttu-id="42f06-296">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-296">**Attributes**</span></span>              | <span data-ttu-id="42f06-297">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-297">N/A</span></span>  |
| <span data-ttu-id="42f06-298">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-298">**References**</span></span>              | [<span data-ttu-id="42f06-299">Хеширование паролей с использованием API .NET для шифрования</span><span class="sxs-lookup"><span data-stu-id="42f06-299">Password Hashing using .NET Crypto APIs</span></span>](http://docs.asp.net/en/latest/security/data-protection/consumer-apis/password-hashing.html) |
| <span data-ttu-id="42f06-300">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-300">**Steps**</span></span> | <span data-ttu-id="42f06-301">Пароли не должны храниться в пользовательских базах данных хранилища.</span><span class="sxs-lookup"><span data-stu-id="42f06-301">Passwords should not be stored in custom user store databases.</span></span> <span data-ttu-id="42f06-302">Вместо этого хэши паролей должны храниться со случайными данными.</span><span class="sxs-lookup"><span data-stu-id="42f06-302">Password hashes should be stored with salt values instead.</span></span> <span data-ttu-id="42f06-303">Эти данные должны быть уникальными для каждого пользователя. Кроме того, перед сохранением пароля необходимо применить bcrypt, scrypt или PBKDF2 с минимальным числом итераций рабочего фактора в 150 000 циклов, чтобы предотвратить возможность атак методом подбора.</span><span class="sxs-lookup"><span data-stu-id="42f06-303">Make sure the salt for the user is always unique and you apply b-crypt, s-crypt or PBKDF2 before storing the password, with a minimum work factor iteration count of 150,000 loops to eliminate the possibility of brute forcing.</span></span>| 

## <span data-ttu-id="42f06-304"><a id="db-encrypted"></a>Шифруйте конфиденциальные данные в столбцах базы данных</span><span class="sxs-lookup"><span data-stu-id="42f06-304"><a id="db-encrypted"></a>Ensure that sensitive data in database columns is encrypted</span></span>

| <span data-ttu-id="42f06-305">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-305">Title</span></span>                   | <span data-ttu-id="42f06-306">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-306">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-307">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-307">**Component**</span></span>               | <span data-ttu-id="42f06-308">База данных</span><span class="sxs-lookup"><span data-stu-id="42f06-308">Database</span></span> | 
| <span data-ttu-id="42f06-309">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-309">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-310">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-310">Build</span></span> |  
| <span data-ttu-id="42f06-311">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-311">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-312">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-312">Generic</span></span> |
| <span data-ttu-id="42f06-313">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-313">**Attributes**</span></span>              | <span data-ttu-id="42f06-314">Версия SQL: все</span><span class="sxs-lookup"><span data-stu-id="42f06-314">SQL Version - All</span></span> |
| <span data-ttu-id="42f06-315">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-315">**References**</span></span>              | <span data-ttu-id="42f06-316">[Контрольный список. Шифрование конфиденциальных данных](https://technet.microsoft.com/library/ff848751(v=sql.105).aspx), [Шифрование столбца данных](https://msdn.microsoft.com/library/ms179331), [ENCRYPTBYCERT (Transact-SQL)](https://msdn.microsoft.com/library/ms188061)</span><span class="sxs-lookup"><span data-stu-id="42f06-316">[Encrypting sensitive data in SQL server](https://technet.microsoft.com/library/ff848751(v=sql.105).aspx), [How to: Encrypt a Column of Data in SQL Server](https://msdn.microsoft.com/library/ms179331), [Encrypt by Certificate](https://msdn.microsoft.com/library/ms188061)</span></span> |
| <span data-ttu-id="42f06-317">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-317">**Steps**</span></span> | <span data-ttu-id="42f06-318">В базе данных должны быть зашифрованы такие конфиденциальные данные, как номера кредитных карт.</span><span class="sxs-lookup"><span data-stu-id="42f06-318">Sensitive data such as credit card numbers has to be encrypted in the database.</span></span> <span data-ttu-id="42f06-319">К данным можно применять шифрование на уровне столбцов или функции шифрования с помощью функции-приложения.</span><span class="sxs-lookup"><span data-stu-id="42f06-319">Data can be encrypted using column-level encryption or by an application function using the encryption functions.</span></span> |

## <span data-ttu-id="42f06-320"><a id="tde-enabled"></a>Включите шифрование уровня базы данных (TDE)</span><span class="sxs-lookup"><span data-stu-id="42f06-320"><a id="tde-enabled"></a>Ensure that database-level encryption (TDE) is enabled</span></span>

| <span data-ttu-id="42f06-321">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-321">Title</span></span>                   | <span data-ttu-id="42f06-322">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-322">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-323">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-323">**Component**</span></span>               | <span data-ttu-id="42f06-324">База данных</span><span class="sxs-lookup"><span data-stu-id="42f06-324">Database</span></span> | 
| <span data-ttu-id="42f06-325">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-325">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-326">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-326">Build</span></span> |  
| <span data-ttu-id="42f06-327">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-327">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-328">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-328">Generic</span></span> |
| <span data-ttu-id="42f06-329">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-329">**Attributes**</span></span>              | <span data-ttu-id="42f06-330">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-330">N/A</span></span>  |
| <span data-ttu-id="42f06-331">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-331">**References**</span></span>              | <span data-ttu-id="42f06-332">[Основные сведения о прозрачном шифровании данных (TDE)](https://technet.microsoft.com/library/bb934049(v=sql.105).aspx)</span><span class="sxs-lookup"><span data-stu-id="42f06-332">[Understanding SQL Server Transparent Data Encryption (TDE)](https://technet.microsoft.com/library/bb934049(v=sql.105).aspx)</span></span> |
| <span data-ttu-id="42f06-333">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-333">**Steps**</span></span> | <span data-ttu-id="42f06-334">Функция прозрачного шифрования данных (TDE) в SQL Server помогает шифровать конфиденциальные данные в базе данных и защищать ключи, используемые для шифрования данных с помощью сертификата.</span><span class="sxs-lookup"><span data-stu-id="42f06-334">Transparent Data Encryption (TDE) feature in SQL server helps in encrypting sensitive data in a database and protect the keys that are used to encrypt the data with a certificate.</span></span> <span data-ttu-id="42f06-335">Таким образом, пользователи без ключей не смогут использовать эти данные.</span><span class="sxs-lookup"><span data-stu-id="42f06-335">This prevents anyone without the keys from using the data.</span></span> <span data-ttu-id="42f06-336">Функция TDE защищает неактивные данные, то есть файлы данных и файлы журналов.</span><span class="sxs-lookup"><span data-stu-id="42f06-336">TDE protects data "at rest", meaning the data and log files.</span></span> <span data-ttu-id="42f06-337">Это дает возможность соблюдать требования многих законов, норм и рекомендаций, установленных в различных отраслях.</span><span class="sxs-lookup"><span data-stu-id="42f06-337">It provides the ability to comply with many laws, regulations, and guidelines established in various industries.</span></span> |

## <span data-ttu-id="42f06-338"><a id="backup"></a>Зашифруйте резервные копии базы данных</span><span class="sxs-lookup"><span data-stu-id="42f06-338"><a id="backup"></a>Ensure that database backups are encrypted</span></span>

| <span data-ttu-id="42f06-339">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-339">Title</span></span>                   | <span data-ttu-id="42f06-340">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-340">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-341">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-341">**Component**</span></span>               | <span data-ttu-id="42f06-342">База данных</span><span class="sxs-lookup"><span data-stu-id="42f06-342">Database</span></span> | 
| <span data-ttu-id="42f06-343">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-343">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-344">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-344">Build</span></span> |  
| <span data-ttu-id="42f06-345">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-345">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-346">SQL Azure, локальные</span><span class="sxs-lookup"><span data-stu-id="42f06-346">SQL Azure, OnPrem</span></span> |
| <span data-ttu-id="42f06-347">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-347">**Attributes**</span></span>              | <span data-ttu-id="42f06-348">Версия SQL: 12, MsSQL2014</span><span class="sxs-lookup"><span data-stu-id="42f06-348">SQL Version - V12, SQL Version - MsSQL2014</span></span> |
| <span data-ttu-id="42f06-349">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-349">**References**</span></span>              | [<span data-ttu-id="42f06-350">Шифрование резервной копии</span><span class="sxs-lookup"><span data-stu-id="42f06-350">SQL database backup encryption</span></span>](https://msdn.microsoft.com/library/dn449489) |
| <span data-ttu-id="42f06-351">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-351">**Steps**</span></span> | <span data-ttu-id="42f06-352">SQL Server может шифровать данные при создании резервной копии.</span><span class="sxs-lookup"><span data-stu-id="42f06-352">SQL Server has the ability to encrypt the data while creating a backup.</span></span> <span data-ttu-id="42f06-353">Для создания зашифрованных файлов резервной копии достаточно указать алгоритм шифрования и шифратор (сертификат или асимметричный ключ) при создании резервной копии.</span><span class="sxs-lookup"><span data-stu-id="42f06-353">By specifying the encryption algorithm and the encryptor (a Certificate or Asymmetric Key) when creating a backup, one can create an encrypted backup file.</span></span> |

## <span data-ttu-id="42f06-354"><a id="api-browser"></a>В хранилище браузера не должны храниться конфиденциальные данные, относящиеся к веб-API</span><span class="sxs-lookup"><span data-stu-id="42f06-354"><a id="api-browser"></a>Ensure that sensitive data relevant to Web API is not stored in browser's storage</span></span>

| <span data-ttu-id="42f06-355">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-355">Title</span></span>                   | <span data-ttu-id="42f06-356">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-356">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-357">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-357">**Component**</span></span>               | <span data-ttu-id="42f06-358">Веб-интерфейс API</span><span class="sxs-lookup"><span data-stu-id="42f06-358">Web API</span></span> | 
| <span data-ttu-id="42f06-359">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-359">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-360">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-360">Build</span></span> |  
| <span data-ttu-id="42f06-361">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-361">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-362">MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="42f06-362">MVC 5, MVC 6</span></span> |
| <span data-ttu-id="42f06-363">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-363">**Attributes**</span></span>              | <span data-ttu-id="42f06-364">Поставщик удостоверений — ADFS или Azure AD</span><span class="sxs-lookup"><span data-stu-id="42f06-364">Identity Provider - ADFS, Identity Provider - Azure AD</span></span> |
| <span data-ttu-id="42f06-365">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-365">**References**</span></span>              | <span data-ttu-id="42f06-366">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-366">N/A</span></span>  |
| <span data-ttu-id="42f06-367">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-367">**Steps**</span></span> | <p><span data-ttu-id="42f06-368">В некоторых реализациях конфиденциальные артефакты, связанные с проверкой подлинности веб-API, хранятся в локальном хранилище браузера.</span><span class="sxs-lookup"><span data-stu-id="42f06-368">In certain implementations, sensitive artifacts relevant to Web API's authentication are stored in browser's local storage.</span></span> <span data-ttu-id="42f06-369">Например, такие артефакты проверки подлинности Azure AD, как adal.idtoken, adal.nonce.idtoken, adal.access.token.key, adal.token.keys, adal.state.login, adal.session.state, adal.expiration.key и другие.</span><span class="sxs-lookup"><span data-stu-id="42f06-369">E.g., Azure AD authentication artifacts like adal.idtoken, adal.nonce.idtoken, adal.access.token.key, adal.token.keys, adal.state.login, adal.session.state, adal.expiration.key etc.</span></span></p><p><span data-ttu-id="42f06-370">Эти артефакты доступны даже после выхода или закрытия браузера.</span><span class="sxs-lookup"><span data-stu-id="42f06-370">All these artifacts are available even after sign out or browser is closed.</span></span> <span data-ttu-id="42f06-371">Если злоумышленник получит доступ к этим артефактам, он может повторно использовать их для доступа к защищенным ресурсам (API).</span><span class="sxs-lookup"><span data-stu-id="42f06-371">If an adversary gets access to these artifacts, he/she can reuse them to access the protected resources (APIs).</span></span> <span data-ttu-id="42f06-372">Убедитесь, что все конфиденциальные артефакты, относящиеся к веб-API, не хранятся в хранилище браузера.</span><span class="sxs-lookup"><span data-stu-id="42f06-372">Ensure that all sensitive artifacts related to Web API is not stored in browser's storage.</span></span> <span data-ttu-id="42f06-373">Когда доступ к клиентскому хранилищу (например, одностраничные приложения, которые используют неявные потоки OpenIdConnect или OAuth, хранят маркеры доступа локально) неизбежен, используйте временные хранилища.</span><span class="sxs-lookup"><span data-stu-id="42f06-373">In cases where client-side storage is unavoidable (e.g., Single Page Applications (SPA) that leverage Implicit OpenIdConnect/OAuth flows need to store access tokens locally), use storage choices with do not have persistence.</span></span> <span data-ttu-id="42f06-374">Например, вместо локального хранилища используйте хранилище для сеанса.</span><span class="sxs-lookup"><span data-stu-id="42f06-374">e.g., prefer SessionStorage to LocalStorage.</span></span></p>| 

### <a name="example"></a><span data-ttu-id="42f06-375">Пример</span><span class="sxs-lookup"><span data-stu-id="42f06-375">Example</span></span>
<span data-ttu-id="42f06-376">Приведенный ниже фрагмент кода JavaScript взят из пользовательской библиотеки проверки подлинности, хранящей артефакты проверки подлинности в локальном хранилище.</span><span class="sxs-lookup"><span data-stu-id="42f06-376">The below JavaScript snippet is from a custom authentication library which stores authentication artifacts in local storage.</span></span> <span data-ttu-id="42f06-377">Необходимо избегать таких реализаций.</span><span class="sxs-lookup"><span data-stu-id="42f06-377">Such implementations should be avoided.</span></span> 
```javascript
ns.AuthHelper.Authenticate = function () {
window.config = {
instance: 'https://login.microsoftonline.com/',
tenant: ns.Configurations.Tenant,
clientId: ns.Configurations.AADApplicationClientID,
postLogoutRedirectUri: window.location.origin,
cacheLocation: 'localStorage', // enable this for IE, as sessionStorage does not work for localhost.
};
```

## <span data-ttu-id="42f06-378"><a id="encrypt-docdb"></a>Шифрование конфиденциальных данных, хранящихся в Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="42f06-378"><a id="encrypt-docdb"></a>Encrypt sensitive data stored in Cosmos DB</span></span>

| <span data-ttu-id="42f06-379">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-379">Title</span></span>                   | <span data-ttu-id="42f06-380">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-380">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-381">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-381">**Component**</span></span>               | <span data-ttu-id="42f06-382">Azure DocumentDB</span><span class="sxs-lookup"><span data-stu-id="42f06-382">Azure Document DB</span></span> | 
| <span data-ttu-id="42f06-383">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-383">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-384">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-384">Build</span></span> |  
| <span data-ttu-id="42f06-385">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-385">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-386">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-386">Generic</span></span> |
| <span data-ttu-id="42f06-387">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-387">**Attributes**</span></span>              | <span data-ttu-id="42f06-388">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-388">N/A</span></span>  |
| <span data-ttu-id="42f06-389">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-389">**References**</span></span>              | <span data-ttu-id="42f06-390">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-390">N/A</span></span>  |
| <span data-ttu-id="42f06-391">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-391">**Steps**</span></span> | <span data-ttu-id="42f06-392">Зашифруйте конфиденциальные данные на уровне приложения, прежде чем сохранить их в DocumentDB, или сохраните все конфиденциальные данные в других решениях хранения, например в службе хранилища Azure или Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="42f06-392">Encrypt sensitive data at application level before storing in document DB or store any sensitive data in other storage solutions like Azure Storage or Azure SQL</span></span>| 

## <span data-ttu-id="42f06-393"><a id="disk-vm"></a>Шифруйте диски, используемые виртуальными машинами, с помощью шифрования дисков Azure</span><span class="sxs-lookup"><span data-stu-id="42f06-393"><a id="disk-vm"></a>Use Azure Disk Encryption to encrypt disks used by Virtual Machines</span></span>

| <span data-ttu-id="42f06-394">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-394">Title</span></span>                   | <span data-ttu-id="42f06-395">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-395">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-396">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-396">**Component**</span></span>               | <span data-ttu-id="42f06-397">Границы доверия виртуальной машины IaaS Azure</span><span class="sxs-lookup"><span data-stu-id="42f06-397">Azure IaaS VM Trust Boundary</span></span> | 
| <span data-ttu-id="42f06-398">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-398">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-399">Развертывание</span><span class="sxs-lookup"><span data-stu-id="42f06-399">Deployment</span></span> |  
| <span data-ttu-id="42f06-400">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-400">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-401">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-401">Generic</span></span> |
| <span data-ttu-id="42f06-402">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-402">**Attributes**</span></span>              | <span data-ttu-id="42f06-403">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-403">N/A</span></span>  |
| <span data-ttu-id="42f06-404">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-404">**References**</span></span>              | [<span data-ttu-id="42f06-405">Руководство по безопасности службы хранилища Azure. Применение шифрования дисков Azure для шифрования дисков, используемых виртуальными машинами</span><span class="sxs-lookup"><span data-stu-id="42f06-405">Using Azure Disk Encryption to encrypt disks used by your virtual machines</span></span>](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_using-azure-disk-encryption-to-encrypt-disks-used-by-your-virtual-machines) |
| <span data-ttu-id="42f06-406">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-406">**Steps**</span></span> | <p><span data-ttu-id="42f06-407">Шифрование дисков Azure — это новая функция, которая в настоящее время находится на этапе предварительной версии.</span><span class="sxs-lookup"><span data-stu-id="42f06-407">Azure Disk Encryption is a new feature that is currently in preview.</span></span> <span data-ttu-id="42f06-408">Она позволяет шифровать диски ОС и данных, используемые виртуальными машинами IaaS.</span><span class="sxs-lookup"><span data-stu-id="42f06-408">This feature allows you to encrypt the OS disks and Data disks used by an IaaS Virtual Machine.</span></span> <span data-ttu-id="42f06-409">Для Windows диски шифруются с помощью стандартной отраслевой технологии шифрования BitLocker.</span><span class="sxs-lookup"><span data-stu-id="42f06-409">For Windows, the drives are encrypted using industry-standard BitLocker encryption technology.</span></span> <span data-ttu-id="42f06-410">Для Linux диски шифруются с помощью технологии DM-Crypt.</span><span class="sxs-lookup"><span data-stu-id="42f06-410">For Linux, the disks are encrypted using the DM-Crypt technology.</span></span> <span data-ttu-id="42f06-411">Функция интегрируется с хранилищем ключей Azure, что позволяет управлять ключами шифрования дисков.</span><span class="sxs-lookup"><span data-stu-id="42f06-411">This is integrated with Azure Key Vault to allow you to control and manage the disk encryption keys.</span></span> <span data-ttu-id="42f06-412">Решение для шифрования дисков Azure поддерживает следующие три сценария шифрования данных клиента:</span><span class="sxs-lookup"><span data-stu-id="42f06-412">The Azure Disk Encryption solution supports the following three customer encryption scenarios:</span></span></p><ul><li><span data-ttu-id="42f06-413">включение шифрования в новых виртуальных машинах IaaS, созданных на основе шифруемых клиентом файлов VHD и предоставленных клиентом ключей шифрования, которые хранятся в хранилище ключей Azure;</span><span class="sxs-lookup"><span data-stu-id="42f06-413">Enable encryption on new IaaS VMs created from customer-encrypted VHD files and customer-provided encryption keys, which are stored in Azure Key Vault.</span></span></li><li><span data-ttu-id="42f06-414">включение шифрования в новых виртуальных машинах IaaS, созданных с помощью Azure Marketplace;</span><span class="sxs-lookup"><span data-stu-id="42f06-414">Enable encryption on new IaaS VMs created from the Azure Marketplace.</span></span></li><li><span data-ttu-id="42f06-415">включение шифрования в существующих виртуальных машинах IaaS, которые уже работают в Azure.</span><span class="sxs-lookup"><span data-stu-id="42f06-415">Enable encryption on existing IaaS VMs already running in Azure.</span></span></li></ul>| 

## <span data-ttu-id="42f06-416"><a id="fabric-apps"></a>Шифруйте секреты в приложениях Service Fabric</span><span class="sxs-lookup"><span data-stu-id="42f06-416"><a id="fabric-apps"></a>Encrypt secrets in Service Fabric applications</span></span>

| <span data-ttu-id="42f06-417">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-417">Title</span></span>                   | <span data-ttu-id="42f06-418">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-418">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-419">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-419">**Component**</span></span>               | <span data-ttu-id="42f06-420">Граница доверия Service Fabric</span><span class="sxs-lookup"><span data-stu-id="42f06-420">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="42f06-421">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-421">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-422">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-422">Build</span></span> |  
| <span data-ttu-id="42f06-423">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-423">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-424">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-424">Generic</span></span> |
| <span data-ttu-id="42f06-425">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-425">**Attributes**</span></span>              | <span data-ttu-id="42f06-426">Среда: Azure</span><span class="sxs-lookup"><span data-stu-id="42f06-426">Environment - Azure</span></span> |
| <span data-ttu-id="42f06-427">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-427">**References**</span></span>              | [<span data-ttu-id="42f06-428">Управление секретами в приложениях Service Fabric</span><span class="sxs-lookup"><span data-stu-id="42f06-428">Managing secrets in Service Fabric applications</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-application-secret-management/) |
| <span data-ttu-id="42f06-429">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-429">**Steps**</span></span> | <span data-ttu-id="42f06-430">Секретом может считаться любая конфиденциальная информации, например строка подключения к хранилищу, пароль или другое значение, которое не должно обрабатываться в виде обычного текста.</span><span class="sxs-lookup"><span data-stu-id="42f06-430">Secrets can be any sensitive information, such as storage connection strings, passwords, or other values that should not be handled in plain text.</span></span> <span data-ttu-id="42f06-431">Используйте Azure Key Vault для управления ключами и секретами в приложениях Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="42f06-431">Use Azure Key Vault to manage keys and secrets in service fabric applications.</span></span> |

## <span data-ttu-id="42f06-432"><a id="modeling-teams"></a>Выполняйте моделирование безопасности, при необходимости привлекая рабочие подразделения и группы</span><span class="sxs-lookup"><span data-stu-id="42f06-432"><a id="modeling-teams"></a>Perform security modeling and use Business Units/Teams where required</span></span>

| <span data-ttu-id="42f06-433">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-433">Title</span></span>                   | <span data-ttu-id="42f06-434">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-434">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-435">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-435">**Component**</span></span>               | <span data-ttu-id="42f06-436">Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="42f06-436">Dynamics CRM</span></span> | 
| <span data-ttu-id="42f06-437">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-437">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-438">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-438">Build</span></span> |  
| <span data-ttu-id="42f06-439">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-439">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-440">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-440">Generic</span></span> |
| <span data-ttu-id="42f06-441">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-441">**Attributes**</span></span>              | <span data-ttu-id="42f06-442">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-442">N/A</span></span>  |
| <span data-ttu-id="42f06-443">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-443">**References**</span></span>              | <span data-ttu-id="42f06-444">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-444">N/A</span></span>  |
| <span data-ttu-id="42f06-445">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-445">**Steps**</span></span> | <span data-ttu-id="42f06-446">Выполняйте моделирование безопасности, при необходимости привлекая рабочие подразделения и группы</span><span class="sxs-lookup"><span data-stu-id="42f06-446">Perform security modeling and use Business Units/Teams where required</span></span> |

## <span data-ttu-id="42f06-447"><a id="entities"></a>Ограничьте доступ к общим функциям критически важных сущностей</span><span class="sxs-lookup"><span data-stu-id="42f06-447"><a id="entities"></a>Minimize access to share feature on critical entities</span></span>

| <span data-ttu-id="42f06-448">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-448">Title</span></span>                   | <span data-ttu-id="42f06-449">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-449">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-450">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-450">**Component**</span></span>               | <span data-ttu-id="42f06-451">Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="42f06-451">Dynamics CRM</span></span> | 
| <span data-ttu-id="42f06-452">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-452">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-453">Развертывание</span><span class="sxs-lookup"><span data-stu-id="42f06-453">Deployment</span></span> |  
| <span data-ttu-id="42f06-454">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-454">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-455">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-455">Generic</span></span> |
| <span data-ttu-id="42f06-456">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-456">**Attributes**</span></span>              | <span data-ttu-id="42f06-457">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-457">N/A</span></span>  |
| <span data-ttu-id="42f06-458">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-458">**References**</span></span>              | <span data-ttu-id="42f06-459">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-459">N/A</span></span>  |
| <span data-ttu-id="42f06-460">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-460">**Steps**</span></span> | <span data-ttu-id="42f06-461">Ограничьте доступ к общим функциям критически важных сущностей</span><span class="sxs-lookup"><span data-stu-id="42f06-461">Minimize access to share feature on critical entities</span></span> |

## <span data-ttu-id="42f06-462"><a id="good-practices"></a>Информируйте пользователей о рисках, связанных с использованием функции "Поделиться" Dynamics CRM, и предоставьте им рекомендации безопасности</span><span class="sxs-lookup"><span data-stu-id="42f06-462"><a id="good-practices"></a>Train users on the risks associated with the Dynamics CRM Share feature and good security practices</span></span>

| <span data-ttu-id="42f06-463">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-463">Title</span></span>                   | <span data-ttu-id="42f06-464">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-464">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-465">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-465">**Component**</span></span>               | <span data-ttu-id="42f06-466">Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="42f06-466">Dynamics CRM</span></span> | 
| <span data-ttu-id="42f06-467">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-467">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-468">Развертывание</span><span class="sxs-lookup"><span data-stu-id="42f06-468">Deployment</span></span> |  
| <span data-ttu-id="42f06-469">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-469">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-470">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-470">Generic</span></span> |
| <span data-ttu-id="42f06-471">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-471">**Attributes**</span></span>              | <span data-ttu-id="42f06-472">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-472">N/A</span></span>  |
| <span data-ttu-id="42f06-473">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-473">**References**</span></span>              | <span data-ttu-id="42f06-474">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-474">N/A</span></span>  |
| <span data-ttu-id="42f06-475">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-475">**Steps**</span></span> | <span data-ttu-id="42f06-476">Информируйте пользователей о рисках, связанных с использованием функции "Поделиться" Dynamics CRM, и предоставьте им рекомендации безопасности</span><span class="sxs-lookup"><span data-stu-id="42f06-476">Train users on the risks associated with the Dynamics CRM Share feature and good security practices</span></span> |

## <span data-ttu-id="42f06-477"><a id="exception-mgmt"></a>Включите стандартные правила разработки, запрещающие показ данных о конфигурации в управлении исключениями</span><span class="sxs-lookup"><span data-stu-id="42f06-477"><a id="exception-mgmt"></a>Include a development standards rule proscribing showing config details in exception management</span></span>

| <span data-ttu-id="42f06-478">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-478">Title</span></span>                   | <span data-ttu-id="42f06-479">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-479">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-480">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-480">**Component**</span></span>               | <span data-ttu-id="42f06-481">Dynamics CRM</span><span class="sxs-lookup"><span data-stu-id="42f06-481">Dynamics CRM</span></span> | 
| <span data-ttu-id="42f06-482">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-482">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-483">Развертывание</span><span class="sxs-lookup"><span data-stu-id="42f06-483">Deployment</span></span> |  
| <span data-ttu-id="42f06-484">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-484">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-485">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-485">Generic</span></span> |
| <span data-ttu-id="42f06-486">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-486">**Attributes**</span></span>              | <span data-ttu-id="42f06-487">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-487">N/A</span></span>  |
| <span data-ttu-id="42f06-488">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-488">**References**</span></span>              | <span data-ttu-id="42f06-489">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-489">N/A</span></span>  |
| <span data-ttu-id="42f06-490">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-490">**Steps**</span></span> | <span data-ttu-id="42f06-491">Включите стандартные правила разработки, запрещающие показ данных о конфигурации в управлении исключениями за пределами среды разработки.</span><span class="sxs-lookup"><span data-stu-id="42f06-491">Include a development standards rule proscribing showing config details in exception management outside development.</span></span> <span data-ttu-id="42f06-492">Протестируйте эту возможность как часть проверки кода или во время периодических проверок.</span><span class="sxs-lookup"><span data-stu-id="42f06-492">Test for this as part of code reviews or periodic inspection.</span></span>|

## <span data-ttu-id="42f06-493"><a id="sse-preview"></a>Используйте шифрование службы хранилища Azure (SSE) для неактивных данных (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="42f06-493"><a id="sse-preview"></a>Use Azure Storage Service Encryption (SSE) for Data at Rest (Preview)</span></span>

| <span data-ttu-id="42f06-494">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-494">Title</span></span>                   | <span data-ttu-id="42f06-495">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-495">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-496">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-496">**Component**</span></span>               | <span data-ttu-id="42f06-497">Хранилище Azure</span><span class="sxs-lookup"><span data-stu-id="42f06-497">Azure Storage</span></span> | 
| <span data-ttu-id="42f06-498">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-498">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-499">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-499">Build</span></span> |  
| <span data-ttu-id="42f06-500">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-500">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-501">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-501">Generic</span></span> |
| <span data-ttu-id="42f06-502">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-502">**Attributes**</span></span>              | <span data-ttu-id="42f06-503">Тип хранилища: большой двоичный объект</span><span class="sxs-lookup"><span data-stu-id="42f06-503">StorageType - Blob</span></span> |
| <span data-ttu-id="42f06-504">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-504">**References**</span></span>              | [<span data-ttu-id="42f06-505">Шифрование службы хранилища Azure для неактивных данных (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="42f06-505">Azure Storage Service Encryption for Data at Rest (Preview)</span></span>](https://azure.microsoft.com/documentation/articles/storage-service-encryption/) |
| <span data-ttu-id="42f06-506">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-506">**Steps**</span></span> | <p><span data-ttu-id="42f06-507">Шифрование службы хранилища Azure (SSE) для неактивных данных помогает защитить данные в соответствии с предложениями по безопасности и соответствию вашей организации.</span><span class="sxs-lookup"><span data-stu-id="42f06-507">Azure Storage Service Encryption (SSE) for Data at Rest helps you protect and safeguard your data to meet your organizational security and compliance commitments.</span></span> <span data-ttu-id="42f06-508">С помощью этой функции служба хранилища Azure автоматически шифрует данные перед сохранением в хранилище и расшифровывает их перед извлечением.</span><span class="sxs-lookup"><span data-stu-id="42f06-508">With this feature, Azure Storage automatically encrypts your data prior to persisting to storage and decrypts prior to retrieval.</span></span> <span data-ttu-id="42f06-509">Шифрование, расшифровка и управление ключами полностью прозрачны для пользователей.</span><span class="sxs-lookup"><span data-stu-id="42f06-509">The encryption, decryption and key management is totally transparent to users.</span></span> <span data-ttu-id="42f06-510">Шифрование службы хранилища применяется только к блочным, страничным и добавочным BLOB-объектам.</span><span class="sxs-lookup"><span data-stu-id="42f06-510">SSE applies only to block blobs, page blobs, and append blobs.</span></span> <span data-ttu-id="42f06-511">Другие типы данных, включая таблицы, очереди и файлы, не шифруются.</span><span class="sxs-lookup"><span data-stu-id="42f06-511">The other types of data, including tables, queues, and files, will not be encrypted.</span></span></p><p><span data-ttu-id="42f06-512">Ниже описан рабочий процесс шифрования и расшифровки.</span><span class="sxs-lookup"><span data-stu-id="42f06-512">Encryption and Decryption Workflow:</span></span></p><ul><li><span data-ttu-id="42f06-513">Клиент включает шифрование в учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="42f06-513">The customer enables encryption on the storage account</span></span></li><li><span data-ttu-id="42f06-514">Когда клиент записывает новые данные (выполняя операции PUT Blob, PUT Block, PUT Page и другие) в хранилище BLOB-объектов, к каждой операции записи применяется 256-разрядное шифрование AES, являющееся самой надежной технологией блочного шифрования на сегодняшний день.</span><span class="sxs-lookup"><span data-stu-id="42f06-514">When the customer writes new data (PUT Blob, PUT Block, PUT Page, etc.) to Blob storage; every write is encrypted using 256-bit AES encryption, one of the strongest block ciphers available</span></span></li><li><span data-ttu-id="42f06-515">Когда клиенту требуется получить доступ к данным (например, GET Blob и т. д.), они автоматически расшифровываются перед возвратом пользователю.</span><span class="sxs-lookup"><span data-stu-id="42f06-515">When the customer needs to access data (GET Blob, etc.), data is automatically decrypted before returning to the user</span></span></li><li><span data-ttu-id="42f06-516">Если шифрование отключено, новые операции записи не шифруются, а уже зашифрованные данные остаются в таком состоянии, пока не будут перезаписаны пользователем.</span><span class="sxs-lookup"><span data-stu-id="42f06-516">If encryption is disabled, new writes are no longer encrypted and existing encrypted data remains encrypted until rewritten by the user.</span></span> <span data-ttu-id="42f06-517">Когда шифрование включено, операции записи в хранилище BLOB-объектов шифруются.</span><span class="sxs-lookup"><span data-stu-id="42f06-517">While encryption is enabled, writes to Blob storage will be encrypted.</span></span> <span data-ttu-id="42f06-518">Состояние данных не изменяется, когда пользователь переключается между включенным и отключенным шифрованием для учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="42f06-518">The state of data does not change with the user toggling between enabling/disabling encryption for the storage account</span></span></li><li><span data-ttu-id="42f06-519">Все ключи шифрования хранятся в зашифрованном виде и управляются корпорацией Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="42f06-519">All encryption keys are stored, encrypted, and managed by Microsoft</span></span></li></ul><p><span data-ttu-id="42f06-520">Обратите внимание, что в настоящее время ключами, используемыми для шифрования, управляет корпорация Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="42f06-520">Please note that at this time, the keys used for the encryption are managed by Microsoft.</span></span> <span data-ttu-id="42f06-521">Майкрософт создает исходные ключи и управляет их безопасным хранением, а также регулярной заменой в соответствии с внутренней политикой Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="42f06-521">Microsoft generates the keys originally, and manage the secure storage of the keys as well as the regular rotation as defined by internal Microsoft policy.</span></span> <span data-ttu-id="42f06-522">В будущем клиенты получат возможность управлять своими ключами шифрования самостоятельно и им будет предоставлен план перехода с ключей, управляемых корпорацией Майкрософт, на ключи, управляемые клиентом.</span><span class="sxs-lookup"><span data-stu-id="42f06-522">In the future, customers will get the ability to manage their own >encryption keys, and provide a migration path from Microsoft-managed keys to customer-managed keys.</span></span></p>| 

## <span data-ttu-id="42f06-523"><a id="client-storage"></a>Используйте шифрование на стороне клиента для хранения конфиденциальных данных в службе хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="42f06-523"><a id="client-storage"></a>Use Client-Side Encryption to store sensitive data in Azure Storage</span></span>

| <span data-ttu-id="42f06-524">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-524">Title</span></span>                   | <span data-ttu-id="42f06-525">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-525">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-526">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-526">**Component**</span></span>               | <span data-ttu-id="42f06-527">Хранилище Azure</span><span class="sxs-lookup"><span data-stu-id="42f06-527">Azure Storage</span></span> | 
| <span data-ttu-id="42f06-528">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-528">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-529">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-529">Build</span></span> |  
| <span data-ttu-id="42f06-530">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-530">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-531">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-531">Generic</span></span> |
| <span data-ttu-id="42f06-532">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-532">**Attributes**</span></span>              | <span data-ttu-id="42f06-533">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-533">N/A</span></span>  |
| <span data-ttu-id="42f06-534">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-534">**References**</span></span>              | <span data-ttu-id="42f06-535">[Шифрование на стороне клиента для службы хранилища Microsoft Azure](https://azure.microsoft.com/documentation/articles/storage-client-side-encryption/), [Шифрование и расшифровка BLOB-объектов в хранилище Microsoft Azure с помощью хранилища ключей Azure](https://azure.microsoft.com/documentation/articles/storage-encrypt-decrypt-blobs-key-vault/), [запись блога о безопасном хранении данных в хранилище BLOB-объектов Azure с расширениями шифрования Azure](https://blogs.msdn.microsoft.com/partnercatalystteam/2015/06/17/storing-data-securely-in-azure-blob-storage-with-azure-encryption-extensions/)</span><span class="sxs-lookup"><span data-stu-id="42f06-535">[Client-Side Encryption and Azure Key Vault for Microsoft Azure Storage](https://azure.microsoft.com/documentation/articles/storage-client-side-encryption/), [Tutorial: Encrypt and decrypt blobs in Microsoft Azure Storage using Azure Key Vault](https://azure.microsoft.com/documentation/articles/storage-encrypt-decrypt-blobs-key-vault/), [Storing Data Securely in Azure Blob Storage with Azure Encryption Extensions](https://blogs.msdn.microsoft.com/partnercatalystteam/2015/06/17/storing-data-securely-in-azure-blob-storage-with-azure-encryption-extensions/)</span></span> |
| <span data-ttu-id="42f06-536">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-536">**Steps**</span></span> | <p><span data-ttu-id="42f06-537">Клиентская библиотека службы хранилища Azure для пакета Nuget для .NET поддерживает шифрование данных в клиентских приложениях перед их отправкой в службу хранилища Azure и их расшифровку во время скачивания клиентом.</span><span class="sxs-lookup"><span data-stu-id="42f06-537">The Azure Storage Client Library for .NET Nuget package supports encrypting data within client applications before uploading to Azure Storage, and decrypting data while downloading to the client.</span></span> <span data-ttu-id="42f06-538">Библиотека также поддерживает интеграцию с хранилищем ключей Azure для управления ключами учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="42f06-538">The library also supports integration with Azure Key Vault for storage account key management.</span></span> <span data-ttu-id="42f06-539">Вот краткое описание того, как работает шифрование на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="42f06-539">Here is a brief description of how client side encryption works:</span></span></p><ul><li><span data-ttu-id="42f06-540">Пакет SDK клиента хранилища Azure создает ключ шифрования содержимого (CEK), который является одноразовым симметричным ключом.</span><span class="sxs-lookup"><span data-stu-id="42f06-540">The Azure Storage client SDK generates a content encryption key (CEK), which is a one-time-use symmetric key</span></span></li><li><span data-ttu-id="42f06-541">Данные пользователей шифруются с помощью этого ключа CEK.</span><span class="sxs-lookup"><span data-stu-id="42f06-541">Customer data is encrypted using this CEK</span></span></li><li><span data-ttu-id="42f06-542">Ключ CEK, в свою очередь, шифруется с помощью ключа шифрования ключа KEK.</span><span class="sxs-lookup"><span data-stu-id="42f06-542">The CEK is then wrapped (encrypted) using the key encryption key (KEK).</span></span> <span data-ttu-id="42f06-543">Ключ KEK определяется идентификатором ключа и может быть парой асимметричных ключей или симметричным ключом. Вы можете управлять им локально или хранить его в хранилище ключей Azure.</span><span class="sxs-lookup"><span data-stu-id="42f06-543">The KEK is identified by a key identifier and can be an asymmetric key pair or a symmetric key and can be managed locally or stored in Azure Key Vault.</span></span> <span data-ttu-id="42f06-544">У самого клиента хранилища нет доступа к KEK.</span><span class="sxs-lookup"><span data-stu-id="42f06-544">The Storage client itself never has access to the KEK.</span></span> <span data-ttu-id="42f06-545">Он просто вызывает алгоритм шифрования ключа, предоставляемый хранилищем ключей.</span><span class="sxs-lookup"><span data-stu-id="42f06-545">It just invokes the key wrapping algorithm that is provided by Key Vault.</span></span> <span data-ttu-id="42f06-546">Пользователи могут при необходимости использовать настраиваемые поставщики для шифрования и расшифровки ключа.</span><span class="sxs-lookup"><span data-stu-id="42f06-546">Customers can choose to use custom providers for key wrapping/unwrapping if they want</span></span></li><li><span data-ttu-id="42f06-547">Зашифрованные данные затем передаются в службу хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="42f06-547">The encrypted data is then uploaded to the Azure Storage service.</span></span> <span data-ttu-id="42f06-548">Просмотрите ссылки в разделе справочных сведений, чтобы получить низкоуровневые сведения о реализации.</span><span class="sxs-lookup"><span data-stu-id="42f06-548">Check the links in the references section for low-level implementation details.</span></span></li></ul>|

## <span data-ttu-id="42f06-549"><a id="pii-phones"></a>Шифруйте конфиденциальные данные или личные данные, записываемые в локальное хранилище телефонов</span><span class="sxs-lookup"><span data-stu-id="42f06-549"><a id="pii-phones"></a>Encrypt sensitive or PII data written to phones local storage</span></span>

| <span data-ttu-id="42f06-550">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-550">Title</span></span>                   | <span data-ttu-id="42f06-551">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-551">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-552">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-552">**Component**</span></span>               | <span data-ttu-id="42f06-553">Мобильный клиент</span><span class="sxs-lookup"><span data-stu-id="42f06-553">Mobile Client</span></span> | 
| <span data-ttu-id="42f06-554">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-554">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-555">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-555">Build</span></span> |  
| <span data-ttu-id="42f06-556">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-556">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-557">Универсальные, Xamarin</span><span class="sxs-lookup"><span data-stu-id="42f06-557">Generic, Xamarin</span></span>  |
| <span data-ttu-id="42f06-558">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-558">**Attributes**</span></span>              | <span data-ttu-id="42f06-559">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-559">N/A</span></span>  |
| <span data-ttu-id="42f06-560">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-560">**References**</span></span>              | <span data-ttu-id="42f06-561">[Создание политики конфигурации](https://docs.microsoft.com/intune/deploy-use/manage-settings-and-features-on-your-devices-with-microsoft-intune-policies#create-a-configuration-policy), [сведения об обслуживании цепочки ключей](https://components.xamarin.com/view/square.valet)</span><span class="sxs-lookup"><span data-stu-id="42f06-561">[Manage settings and features on your devices with Microsoft Intune policies](https://docs.microsoft.com/intune/deploy-use/manage-settings-and-features-on-your-devices-with-microsoft-intune-policies#create-a-configuration-policy), [Keychain Valet](https://components.xamarin.com/view/square.valet)</span></span> |
| <span data-ttu-id="42f06-562">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-562">**Steps**</span></span> | <p><span data-ttu-id="42f06-563">Перед записью в локальную файловую систему персональные данные пользователя (электронная почта, номер телефона, имя, фамилия, параметры и т. д.), которые приложение записывает в файловую систему мобильного устройства, должны быть зашифрованы.</span><span class="sxs-lookup"><span data-stu-id="42f06-563">If the application writes sensitive information like user's PII (email, phone number, first name, last name, preferences etc.)- on mobile's file system, then it should be encrypted before writing to the local file system.</span></span> <span data-ttu-id="42f06-564">Если приложение является корпоративным, рассмотрите возможности публикации приложения с помощью Windows Intune.</span><span class="sxs-lookup"><span data-stu-id="42f06-564">If the application is an enterprise application, then explore the possibility of publishing application using Windows Intune.</span></span></p>|

### <a name="example"></a><span data-ttu-id="42f06-565">Пример</span><span class="sxs-lookup"><span data-stu-id="42f06-565">Example</span></span>
<span data-ttu-id="42f06-566">Вы можете настроить Intune со следующими политиками безопасности для защиты конфиденциальных данных:</span><span class="sxs-lookup"><span data-stu-id="42f06-566">Intune can be configured with following security policies to safeguard sensitive data:</span></span> 
```C#
Require encryption on mobile device    
Require encryption on storage cards
Allow screen capture
```

### <a name="example"></a><span data-ttu-id="42f06-567">Пример</span><span class="sxs-lookup"><span data-stu-id="42f06-567">Example</span></span>
<span data-ttu-id="42f06-568">Если приложение не является корпоративным, используйте предоставленное платформой хранилище ключей и цепочки ключей для хранения ключей шифрования и выполняйте тип операции шифрования, допустимый в файловой системе.</span><span class="sxs-lookup"><span data-stu-id="42f06-568">If the application is not an enterprise application, then use platform provided keystore, keychains to store encryption keys, using which cryptographic operation may be performed on the file system.</span></span> <span data-ttu-id="42f06-569">Фрагмент кода ниже отображает получение ключа из цепочки ключей с помощью Xamarin.</span><span class="sxs-lookup"><span data-stu-id="42f06-569">Following code snippet shows how to access key from keychain using xamarin:</span></span> 
```C#
        protected static string EncryptionKey
        {
            get
            {
                if (String.IsNullOrEmpty(_Key))
                {
                    var query = new SecRecord(SecKind.GenericPassword);
                    query.Service = NSBundle.MainBundle.BundleIdentifier;
                    query.Account = "UniqueID";

                    NSData uniqueId = SecKeyChain.QueryAsData(query);
                    if (uniqueId == null)
                    {
                        query.ValueData = NSData.FromString(System.Guid.NewGuid().ToString());
                        var err = SecKeyChain.Add(query);
                        _Key = query.ValueData.ToString();
                    }
                    else
                    {
                        _Key = uniqueId.ToString();
                    }
                }

                return _Key;
            }
        }
```

## <span data-ttu-id="42f06-570"><a id="binaries-end"></a>Маскируйте созданные двоичные файлы перед их распространением конечным пользователям</span><span class="sxs-lookup"><span data-stu-id="42f06-570"><a id="binaries-end"></a>Obfuscate generated binaries before distributing to end users</span></span>

| <span data-ttu-id="42f06-571">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-571">Title</span></span>                   | <span data-ttu-id="42f06-572">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-572">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-573">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-573">**Component**</span></span>               | <span data-ttu-id="42f06-574">Мобильный клиент</span><span class="sxs-lookup"><span data-stu-id="42f06-574">Mobile Client</span></span> | 
| <span data-ttu-id="42f06-575">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-575">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-576">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-576">Build</span></span> |  
| <span data-ttu-id="42f06-577">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-577">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-578">Универсальный</span><span class="sxs-lookup"><span data-stu-id="42f06-578">Generic</span></span> |
| <span data-ttu-id="42f06-579">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-579">**Attributes**</span></span>              | <span data-ttu-id="42f06-580">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-580">N/A</span></span>  |
| <span data-ttu-id="42f06-581">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-581">**References**</span></span>              | [<span data-ttu-id="42f06-582">Crypto Obfuscator для .NET</span><span class="sxs-lookup"><span data-stu-id="42f06-582">Crypto Obfuscation For .Net</span></span>](http://www.ssware.com/cryptoobfuscator/obfuscator-net.htm) |
| <span data-ttu-id="42f06-583">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-583">**Steps**</span></span> | <span data-ttu-id="42f06-584">Созданные двоичные файлы (сборки в APK) должны быть замаскированы, чтобы остановить проведение инженерного анализа сборок. Для этой цели могут использоваться такие инструменты, как `CryptoObfuscator`.</span><span class="sxs-lookup"><span data-stu-id="42f06-584">Generated binaries (assemblies within apk) should be obfuscated to stop reverse engineering of assemblies.Tools like `CryptoObfuscator` may be used for this purpose.</span></span> |

## <span data-ttu-id="42f06-585"><a id="cert"></a>Установите для параметра clientCredentialType значение Certificate или Windows</span><span class="sxs-lookup"><span data-stu-id="42f06-585"><a id="cert"></a>Set clientCredentialType to Certificate or Windows</span></span>

| <span data-ttu-id="42f06-586">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-586">Title</span></span>                   | <span data-ttu-id="42f06-587">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-587">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-588">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-588">**Component**</span></span>               | <span data-ttu-id="42f06-589">WCF</span><span class="sxs-lookup"><span data-stu-id="42f06-589">WCF</span></span> | 
| <span data-ttu-id="42f06-590">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-590">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-591">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-591">Build</span></span> |  
| <span data-ttu-id="42f06-592">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-592">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-593">.NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="42f06-593">.NET Framework 3</span></span> |
| <span data-ttu-id="42f06-594">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-594">**Attributes**</span></span>              | <span data-ttu-id="42f06-595">Недоступно</span><span class="sxs-lookup"><span data-stu-id="42f06-595">N/A</span></span>  |
| <span data-ttu-id="42f06-596">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-596">**References**</span></span>              | [<span data-ttu-id="42f06-597">Fortify</span><span class="sxs-lookup"><span data-stu-id="42f06-597">Fortify</span></span>](https://vulncat.fortify.com/en/vulncat/index.html) |
| <span data-ttu-id="42f06-598">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-598">**Steps**</span></span> | <span data-ttu-id="42f06-599">Использование маркера имени пользователя с открытым паролем в незащищенном канале делает пароль уязвимым к атакам злоумышленников, которые могут получить доступ к сообщениям, передаваемым по протоколу SOAP.</span><span class="sxs-lookup"><span data-stu-id="42f06-599">Using a UsernameToken with a plaintext password over an unencrypted channel exposes the password to attackers who can sniff the SOAP messages.</span></span> <span data-ttu-id="42f06-600">Поставщики служб, которые используют маркер имени пользователя, могут принять пароли, отправленные обычным текстом.</span><span class="sxs-lookup"><span data-stu-id="42f06-600">Service Providers that use the UsernameToken might accept passwords sent in plaintext.</span></span> <span data-ttu-id="42f06-601">В случае отправки открытых паролей через незащищенный канал учетные данные становятся уязвимыми к атакам злоумышленников, которые могут получить доступ к сообщениям, передаваемым по протоколу SOAP.</span><span class="sxs-lookup"><span data-stu-id="42f06-601">Sending plaintext passwords over an unencrypted channel can expose the credential to attackers who can sniff the SOAP message.</span></span> | 

### <a name="example"></a><span data-ttu-id="42f06-602">Пример</span><span class="sxs-lookup"><span data-stu-id="42f06-602">Example</span></span>
<span data-ttu-id="42f06-603">Ниже представлена конфигурация поставщика службы WCF, в которой используется маркер имени пользователя.</span><span class="sxs-lookup"><span data-stu-id="42f06-603">The following WCF service provider configuration uses the UsernameToken:</span></span> 
```
<security mode="Message"> 
<message clientCredentialType="UserName" />
``` 
<span data-ttu-id="42f06-604">Установите для параметра clientCredentialType значение Certificate или Windows.</span><span class="sxs-lookup"><span data-stu-id="42f06-604">Set clientCredentialType to Certificate or Windows.</span></span> 

## <span data-ttu-id="42f06-605"><a id="security"></a>Не включен режим безопасности WCF</span><span class="sxs-lookup"><span data-stu-id="42f06-605"><a id="security"></a>WCF-Security Mode is not enabled</span></span>

| <span data-ttu-id="42f06-606">Название</span><span class="sxs-lookup"><span data-stu-id="42f06-606">Title</span></span>                   | <span data-ttu-id="42f06-607">Сведения</span><span class="sxs-lookup"><span data-stu-id="42f06-607">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="42f06-608">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="42f06-608">**Component**</span></span>               | <span data-ttu-id="42f06-609">WCF</span><span class="sxs-lookup"><span data-stu-id="42f06-609">WCF</span></span> | 
| <span data-ttu-id="42f06-610">**Этап SDL**</span><span class="sxs-lookup"><span data-stu-id="42f06-610">**SDL Phase**</span></span>               | <span data-ttu-id="42f06-611">Создание</span><span class="sxs-lookup"><span data-stu-id="42f06-611">Build</span></span> |  
| <span data-ttu-id="42f06-612">**Применимые технологии**</span><span class="sxs-lookup"><span data-stu-id="42f06-612">**Applicable Technologies**</span></span> | <span data-ttu-id="42f06-613">Универсальные, .NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="42f06-613">Generic, .NET Framework 3</span></span> |
| <span data-ttu-id="42f06-614">**Атрибуты**</span><span class="sxs-lookup"><span data-stu-id="42f06-614">**Attributes**</span></span>              | <span data-ttu-id="42f06-615">Режим безопасности — транспорт или сообщение</span><span class="sxs-lookup"><span data-stu-id="42f06-615">Security Mode - Transport, Security Mode - Message</span></span> |
| <span data-ttu-id="42f06-616">**Справочные материалы**</span><span class="sxs-lookup"><span data-stu-id="42f06-616">**References**</span></span>              | <span data-ttu-id="42f06-617">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html), [основы безопасности WCF](http://www.codemag.com/article/0611051)</span><span class="sxs-lookup"><span data-stu-id="42f06-617">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html), [Fundamentals of WCF Security CoDe Magazine](http://www.codemag.com/article/0611051)</span></span> |
| <span data-ttu-id="42f06-618">**Действия**</span><span class="sxs-lookup"><span data-stu-id="42f06-618">**Steps**</span></span> | <span data-ttu-id="42f06-619">Безопасность доставки и сообщений не определена.</span><span class="sxs-lookup"><span data-stu-id="42f06-619">No transport or message security has been defined.</span></span> <span data-ttu-id="42f06-620">Приложения, передающие сообщения без защиты доставки или сообщений, не могут гарантировать их целостность и конфиденциальность.</span><span class="sxs-lookup"><span data-stu-id="42f06-620">Applications that transmit messages without transport or message security cannot guarantee the integrity or confidentiality of the messages.</span></span> <span data-ttu-id="42f06-621">Если для привязки безопасности WCF задано значение None, безопасность доставки и сообщений отключена.</span><span class="sxs-lookup"><span data-stu-id="42f06-621">When a WCF security binding is set to None, both transport and message security are disabled.</span></span> |

### <a name="example"></a><span data-ttu-id="42f06-622">Пример</span><span class="sxs-lookup"><span data-stu-id="42f06-622">Example</span></span>
<span data-ttu-id="42f06-623">В конфигурации ниже для режима безопасности задано значение None.</span><span class="sxs-lookup"><span data-stu-id="42f06-623">The following configuration sets the security mode to None.</span></span> 
```
<system.serviceModel> 
  <bindings> 
    <wsHttpBinding> 
      <binding name=""MyBinding""> 
        <security mode=""None""/> 
      </binding> 
  </bindings> 
</system.serviceModel> 
```

### <a name="example"></a><span data-ttu-id="42f06-624">Пример</span><span class="sxs-lookup"><span data-stu-id="42f06-624">Example</span></span>
<span data-ttu-id="42f06-625">Ниже приведены пять режимов безопасности, доступных для всех привязок служб.</span><span class="sxs-lookup"><span data-stu-id="42f06-625">Security Mode Across all service bindings there are five possible security modes:</span></span> 
* <span data-ttu-id="42f06-626">Отсутствует.</span><span class="sxs-lookup"><span data-stu-id="42f06-626">None.</span></span> <span data-ttu-id="42f06-627">Отключает безопасность.</span><span class="sxs-lookup"><span data-stu-id="42f06-627">Turns security off.</span></span> 
* <span data-ttu-id="42f06-628">Transport.</span><span class="sxs-lookup"><span data-stu-id="42f06-628">Transport.</span></span> <span data-ttu-id="42f06-629">Применяет безопасность доставки для взаимной проверки подлинности и защиты сообщений.</span><span class="sxs-lookup"><span data-stu-id="42f06-629">Uses transport security for mutual authentication and message protection.</span></span> 
* <span data-ttu-id="42f06-630">Message.</span><span class="sxs-lookup"><span data-stu-id="42f06-630">Message.</span></span> <span data-ttu-id="42f06-631">Применяет безопасность сообщений для взаимной проверки подлинности и защиты сообщений.</span><span class="sxs-lookup"><span data-stu-id="42f06-631">Uses message security for mutual authentication and message protection.</span></span> 
* <span data-ttu-id="42f06-632">Both.</span><span class="sxs-lookup"><span data-stu-id="42f06-632">Both.</span></span> <span data-ttu-id="42f06-633">Позволяет задать параметры безопасности доставки и сообщений (только для MSMQ).</span><span class="sxs-lookup"><span data-stu-id="42f06-633">Allows you to supply settings for transport and message-level security (only MSMQ supports this).</span></span> 
* <span data-ttu-id="42f06-634">TransportWithMessageCredential.</span><span class="sxs-lookup"><span data-stu-id="42f06-634">TransportWithMessageCredential.</span></span> <span data-ttu-id="42f06-635">Учетные данные передаются с сообщением, а безопасность сообщений и проверка подлинности сервера обеспечиваются на уровне доставки.</span><span class="sxs-lookup"><span data-stu-id="42f06-635">Credentials are passed with the message and message protection and server authentication are provided by the transport layer.</span></span> 
* <span data-ttu-id="42f06-636">TransportCredentialOnly.</span><span class="sxs-lookup"><span data-stu-id="42f06-636">TransportCredentialOnly.</span></span> <span data-ttu-id="42f06-637">Учетные данные клиента передаются на уровне доставки, безопасность сообщений не применяется.</span><span class="sxs-lookup"><span data-stu-id="42f06-637">Client credentials are passed with the transport layer and no message protection is applied.</span></span> <span data-ttu-id="42f06-638">Применяйте безопасность доставки и сообщений для защиты целостности и конфиденциальности сообщений.</span><span class="sxs-lookup"><span data-stu-id="42f06-638">Use transport and message security to protect the integrity and confidentiality of messages.</span></span> <span data-ttu-id="42f06-639">Ниже представлен пример конфигурации, в соответствии с которым служба будет применять защиту доставки с использованием учетных данных сообщения.</span><span class="sxs-lookup"><span data-stu-id="42f06-639">The configuration below tells the service to use transport security with message credentials.</span></span>
```
<system.serviceModel>
  <bindings>
    <wsHttpBinding>
    <binding name=""MyBinding""> 
    <security mode=""TransportWithMessageCredential""/> 
    <message clientCredentialType=""Windows""/> 
    </binding> 
  </bindings> 
</system.serviceModel> 
```
