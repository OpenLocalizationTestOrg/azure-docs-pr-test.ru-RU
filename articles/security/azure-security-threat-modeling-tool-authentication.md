---
title: "aaaAuthentication - Microsoft средства моделирования угроз - Azure | Документы Microsoft"
description: "защиту от угроз, которые представлены в hello средства моделирования угроз"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 06c1b1aebab25e6fb5b666d24ecd9d86085d656c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-authentication--mitigations"></a>Механизм безопасности. Проверка подлинности | Устранение рисков 
| Продукт или служба | Статья |
| --------------- | ------- |
| **Веб-приложение**    | <ul><li>[Рассмотрите возможность использования tooWeb tooauthenticate механизм стандартной проверки подлинности приложения](#standard-authn-web-app)</li><li>[Приложения должны надежно обрабатывать сценарии неудачной проверки подлинности](#handle-failed-authn)</li><li>[Включите проверку подлинности повышенного уровня или адаптивную проверку подлинности](#step-up-adaptive-authn)</li><li>[Интерфейсы администрирования должны быть заблокированы соответствующим образом](#admin-interface-lockdown)</li><li>[Реализуйте безопасный механизм восстановления пароля](#forgot-pword-fxn)</li><li>[Настройте применение политик учетных записей и паролей](#pword-account-policy)</li><li>[Реализация элементов управления tooprevent username перечисления](#controls-username-enum)</li></ul> |
| **База данных** | <ul><li>[По возможности используйте проверку подлинности Windows для подключения tooSQL сервера](#win-authn-sql)</li><li>[По возможности используйте проверку подлинности Azure Active Directory для tooSQL подключение базы данных](#aad-authn-sql)</li><li>[Если используется режим проверки подлинности SQL, обеспечьте применение политики учетных записей и паролей на сервере SQL Server](#authn-account-pword)</li><li>[Не используйте проверку подлинности SQL в автономных базах данных](#autn-contained-db)</li></ul> |
| **Концентратор событий Azure** | <ul><li>[Используйте учетные данные проверки подлинности на уровне отдельного устройства с помощью маркеров SaS](#authn-sas-tokens)</li></ul> |
| **Граница доверия Azure** | <ul><li>[Включите Многофакторную идентификацию Azure для администраторов Azure](#multi-factor-azure-admin)</li></ul> |
| **Граница доверия Service Fabric** | <ul><li>[Ограничить анонимный доступ tooService кластера Fabric](#anon-access-cluster)</li><li>[Сертификат Service Fabric для обмена данными между клиентом и узлом должен отличаться от простого сертификата для обмена данными между узлами](#fabric-cn-nn)</li><li>[Использовать AAD tooauthenticate клиенты tooservice структуры кластеров](#aad-client-fabric)</li><li>[Нужно использовать сертификаты Service Fabric, полученные из утвержденного Центра сертификации](#fabric-cert-ca)</li></ul> |
| **Сервер удостоверений** | <ul><li>[Используйте стандартные сценарии проверки подлинности, поддерживаемые сервером удостоверений](#standard-authn-id)</li><li>[Переопределить hello по умолчанию удостоверение сервера кэша маркера масштабируемой альтернативой](#override-token)</li></ul> |
| **Граница доверия между компьютерами** | <ul><li>[Двоичные файлы развернутого приложения должны иметь цифровую подпись](#binaries-signed)</li></ul> |
| **WCF** | <ul><li>[Включение проверки подлинности при подключении tooMSMQ очереди в WCF](#msmq-queues)</li><li>[Выполните WCF не задан сообщение toonone clientCredentialType](#message-none)</li><li>[Выполните WCF не установлено toonone clientCredentialType транспорта](#transport-none)</li></ul> |
| **Веб-интерфейс API** | <ul><li>[Убедитесь, что методы стандартной проверки подлинности используется toosecure веб-API](#authn-secure-api)</li></ul> |
| **Azure AD** | <ul><li>[Используйте стандартные сценарии проверки подлинности, поддерживаемые Azure Active Directory](#authn-aad)</li><li>[Переопределить hello по умолчанию ADAL кэша маркера масштабируемой альтернативой](#adal-scalable)</li><li>[Убедитесь, что TokenReplayCache используется tooprevent hello воспроизведения маркеров проверки подлинности ADAL](#tokenreplaycache-adal)</li><li>[Использование библиотеки ADAL toomanage маркера запрашивает у клиентов tooAAD OAuth2 (или локальной AD)](#adal-oauth2)</li></ul> |
| **Полевой шлюз Интернета вещей** | <ul><li>[Проверка подлинности устройств, подключающихся toohello шлюз поля](#authn-devices-field)</li></ul> |
| **Облачный шлюз Интернета вещей** | <ul><li>[Обеспечить проверку подлинности устройств, подключающихся tooCloud шлюза](#authn-devices-cloud)</li><li>[Используйте учетные данные проверки подлинности на уровне отдельного устройства](#authn-cred)</li></ul> |
| **Хранилище Azure** | <ul><li>[Убедитесь, что только hello требуемые контейнеры и большие двоичные объекты получают анонимный доступ для чтения](#req-containers-anon)</li><li>[Предоставить ограниченный доступ tooobjects в хранилище Azure с использованием SAS или SAP](#limited-access-sas)</li></ul> |

## <a id="standard-authn-web-app"></a>Рассмотрите возможность использования tooWeb tooauthenticate механизм стандартной проверки подлинности приложения

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| Сведения | <p>Проверка подлинности — процесс hello, где сущность подтверждает свою подлинность, обычно с помощью учетных данных, таких как имя пользователя и пароль. Существует множество протоколов проверки подлинности, включая следующие:</p><ul><li>Client certificates</li><li>на основе Windows;</li><li>на основе форм;</li><li>федерация: ADFS;</li><li>федерация: Azure AD;</li><li>федерация: сервер удостоверений.</li></ul><p>Рассмотрите возможность использования стандартной проверки подлинности механизм tooidentify hello исходного процесса</p>|

## <a id="handle-failed-authn"></a>Приложения должны надежно обрабатывать сценарии неудачной проверки подлинности

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| Сведения | <p>Приложения, которые явным образом проверять подлинность пользователей должен обрабатывать ошибки проверки подлинности сценарии, которые должны securely.hello механизм проверки подлинности:</p><ul><li>Запретить доступ tooprivileged ресурсов при сбое проверки подлинности</li><li>отображать общее сообщение об ошибке после неудачной проверки подлинности и запрета доступа.</li></ul><p>Проверьте, обеспечивает ли механизм проверки подлинности следующее:</p><ul><li>защиту привилегированных ресурсов после неудачных попыток входа;</li><li>отображение общего сообщения об ошибке после неудачной проверки подлинности и запрета доступа;</li><li>отключение учетных записей после слишком большого количества неудачных попыток.</li><ul>|

## <a id="step-up-adaptive-authn"></a>Включите проверку подлинности повышенного уровня или адаптивную проверку подлинности

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| Сведения | <p>Проверьте приложение hello имеет дополнительные авторизации (такие как шаг или адаптивной аутентификации, многофакторной проверки подлинности, например, отправку SMS, электронной почты и т.д. или ожидает повторной проверки подлинности OTP), является вызваны hello пользователя до предоставления им доступа сведения о toosensitive. Это правило также применяется для создания учетной записи tooan критически важных изменений или действие</p><p>Это также означает, что адаптации hello проверки подлинности имеет toobe реализован таким способом, которые приложение hello правильно применяются контекстно-зависимое авторизации так, чтобы toonot разрешить несанкционированные манипуляции с помощью параметра в примере несанкционированное изменение параметров</p>|

## <a id="admin-interface-lockdown"></a>Интерфейсы администрирования должны быть заблокированы соответствующим образом

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| Сведения | Первое решение Hello — toogrant доступ только из определенного источника IP диапазон toohello административный интерфейс. Если это решение нельзя сделать не всегда рекомендуется tooenforce повышение или Адаптивная проверки подлинности для входа административном интерфейсе hello |

## <a id="forgot-pword-fxn"></a>Реализуйте безопасный механизм восстановления пароля

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| Сведения | <p>Первое, что Hello — tooverify, забыли пароль и другие пути восстановления отправки ссылки, включая временными активации токена, а не hello пароль сам. Дополнительная проверка подлинности на основе токенов программной (например, SMS маркера мобильного приложения, т. д.) может быть обязательной также перед отправкой через ссылку hello. Во-вторых вы должны не блокировки hello пользователи учетной записи во время процесса hello получения нового пароля идет.</p><p>Это может привести к tooa атаки отказа в обслуживании, каждый раз, когда он решает блокировки toointentionally hello пользователей с автоматическую атаку. В-третьих каждый раз, когда выполняется был задан новый пароль запрос hello, приветственное сообщение, которые отображены следует обобщить перечисления username tooprevent заказа. В-четвертых всегда запретить использование старых паролей hello и реализуйте политику надежных паролей.</p> |

## <a id="pword-account-policy"></a>Настройте применение политик учетных записей и паролей

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| Сведения | <p>Политика паролей и учетных записей должна быть реализована в соответствии с политикой организации и рекомендациями.</p><p>toodefend от подбора и словаря на основе угадывания: политики надежных паролей должно быть реализовано tooensure, что пользователи создавать сложный пароль (например, минимальная длина 12 символов, буквы и специальные символы).</p><p>Политики блокировки учетных записей могут использоваться следующие способом hello:</p><ul><li>**Мягкая блокировка.** Может быть хорошим вариантом для защиты пользователей от атак методом прямого подбора. Например каждый раз, когда hello пользователь вводит неправильный пароль приложения hello три раза может блокировки hello учетной записи на одну минуту, в порядке tooslow вниз hello процесс принудительного свой пароль, сделав его меньше рентабельности для hello злоумышленник tooproceed грубой; Это бы tooimplement жестких противодействия блокировки для этого примера бы добиться a «Dos», без возможности восстановления блокировки учетных записей. Кроме того, приложение может создать OTP (один раз пароль) и отправлять их по каналу (по электронной почте, sms и т.д.) toohello пользователя. Другой подход может быть tooimplement CAPTCHA, по достижении порогового значения числа неудачных попыток входа.</li><li>**Жесткие блокировки:** этого типа блокировки должны применяться при каждом определить пользователя, для взлома приложения и счетчика ему посредством окончательно блокировки учетной записи пока группы реагирования toodo время их расследований. После этого процесса можно решить toogive обратно hello пользователя учетной записи или принимать дальнейшей юридических действия, выполняемые с ним. Такой подход не позволяет злоумышленнику hello дальнейшей penetrating приложений и инфраструктуры.</li></ul><p>toodefend от атак на прогнозируемый учетными записями и по умолчанию убедитесь, что все ключи и пароли можно заменить и создаются или заменяет время установки.</p><p>Если приложения hello tooauto-формирования паролей, гарантировать hello созданные пароли носят случайный характер и с высокой энтропией.</p>|

## <a id="controls-username-enum"></a>Реализация элементов управления tooprevent username перечисления

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Все сообщения об ошибках следует обобщить перечисления username tooprevent заказа. Иногда не удается избежать утечки информации при использовании определенного компонента или функции, например страницы регистрации пользователя. Здесь требуется toouse ограничение скорости таких методов, как CAPTCHA tooprevent автоматические атаки злоумышленником. |

## <a id="win-authn-sql"></a>По возможности используйте проверку подлинности Windows для подключения tooSQL сервера

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | База данных | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Локальные |
| **Атрибуты**              | Версия SQL: все |
| **Справочные материалы**              | [Выбор режима проверки подлинности](https://msdn.microsoft.com/library/ms144284.aspx) |
| **Действия** | Проверка подлинности Windows использует протокол безопасности Kerberos, обеспечивает соблюдение политики паролей с учета toocomplexity проверки надежных паролей, поддерживает блокировку учетных записей и позволяет истечение срока действия пароля.|

## <a id="aad-authn-sql"></a>По возможности используйте проверку подлинности Azure Active Directory для tooSQL подключение базы данных

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | База данных | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | SQL Azure |
| **Атрибуты**              | Версия SQL: 12 |
| **Справочные материалы**              | [Подключение tooSQL базы данных с использованием Azure Active Directory проверки подлинности](https://azure.microsoft.com/documentation/articles/sql-database-aad-authentication/) |
| **Действия** | **Минимальная версия:** базы данных SQL Azure V12 требуется база данных SQL Azure tooallow toouse проверки подлинности AAD для hello каталогов Microsoft |

## <a id="authn-account-pword"></a>Если используется режим проверки подлинности SQL, обеспечьте применение политики учетных записей и паролей на сервере SQL Server

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | База данных | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Политика паролей](https://technet.microsoft.com/library/ms161959(v=sql.110).aspx) |
| **Действия** | При использовании проверки подлинности SQL Server создаются имена входа, которые не основаны на учетных записях Windows. Hello имя пользователя и пароль hello создаются с помощью SQL Server и хранящихся в SQL Server. SQL Server может использовать механизмы политики паролей Windows. Оно может применять hello же политики сложности и истечения срока действия, используемые в Windows toopasswords, используемым в SQL Server. |

## <a id="autn-contained-db"></a>Не используйте проверку подлинности SQL в автономных базах данных

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | База данных | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Локальное, SQL Azure |
| **Атрибуты**              | Версия SQL: MSSQL2012, версия SQL: 12 |
| **Справочные материалы**              | [Рекомендации по обеспечению безопасности автономных баз данных](http://msdn.microsoft.com/library/ff929055.aspx) |
| **Действия** | отсутствие Hello политики принудительно пароль может увеличить вероятность hello слабых учетных данных, устанавливаемое в автономной базе данных. Используйте проверку подлинности Windows. |

## <a id="authn-sas-tokens"></a>Используйте учетные данные проверки подлинности на уровне отдельного устройства с помощью маркеров SaS

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | концентратору событий Azure | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Обзор проверки подлинности концентраторов событий и модели безопасности](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| **Действия** | <p>модель безопасности концентраторов событий Hello основан на сочетание маркеры подписи общего доступа (SAS) и издателей событий. Имя издателя Hello представляет hello DeviceID, получает маркер hello. Это помогает связать hello токены, созданные с соответствующими устройствами hello.</p><p>Все сообщения помечаются отправителем на стороне службы, что дает возможность обнаруживать попытки подделки происхождения в полезных данных. При проверке подлинности устройств, необходимо создать по издателю уникальный токен с областью tooa SaS устройств.</p>|

## <a id="multi-factor-azure-admin"></a>Включите Многофакторную идентификацию Azure для администраторов Azure

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Граница доверия Azure | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Что такое Многофакторная идентификация Azure?](https://azure.microsoft.com/documentation/articles/multi-factor-authentication/) |
| **Действия** | <p>Многофакторная проверка подлинности (MFA) — это метод проверки подлинности, требующий более одного метода проверки и добавляющий важный второй уровень безопасности toouser входов и транзакций. Для работы требуется любые два или более hello следующие методы проверки:</p><ul><li>Что-то, что известно вам (обычно это пароль).</li><li>Что-то, что у вас есть (доверенное устройство, которое непросто дублируется, такое как телефон).</li><li>Что-то, относящееся непосредственно к вам (биометрические данные).</li><ul>|

## <a id="anon-access-cluster"></a>Ограничить анонимный доступ tooService кластера Fabric

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Граница доверия Service Fabric | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Среда: Azure  |
| **Справочные материалы**              | [Сценарии защиты кластера Service Fabric](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security) |
| **Действия** | <p>Кластеры всегда должно быть защищенной tooprevent несанкционированный пользователей подключение кластера tooyour, особенно в том случае, если он имеет рабочих нагрузок, запущенными на нем.</p><p>При создании кластера service fabric, убедитесь, что режим безопасности hello задано слишком «безопасность» и настройте сертификат X.509 необходимые hello. Создание кластера «небезопасного» будет разрешить любые tooit tooconnect анонимного пользователя, если он предоставляет toohello конечные точки управления общедоступный Интернет.</p>|

## <a id="fabric-cn-nn"></a>Сертификат Service Fabric для обмена данными между клиентом и узлом должен отличаться от простого сертификата для обмена данными между узлами

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Граница доверия Service Fabric | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Среда: Azure, автономная |
| **Справочные материалы**              | [Защита с помощью сертификата клиента для узла Service Fabric](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#_client-to-node-certificate-security), [кластера безопасного tooa подключение с использованием сертификата клиента](https://azure.microsoft.com/documentation/articles/service-fabric-connect-to-secure-cluster/) |
| **Действия** | <p>При создании кластера hello либо с помощью портала Azure hello, шаблоны диспетчера ресурсов или автономного шаблона JSON, указав сертификат клиента администратора и/или сертификат клиента пользователя настроена защита с помощью сертификата клиента для узла.</p><p>Hello клиента и пользователя сертификаты клиента администратора указываемые должна отличаться от hello первичные и вторичные сертификаты, указанные для безопасности узла на узел.</p>|

## <a id="aad-client-fabric"></a>Использовать AAD tooauthenticate клиенты tooservice структуры кластеров

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Граница доверия Service Fabric | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Среда: Azure |
| **Справочные материалы**              | [Рекомендации по обеспечению безопасности](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#security-recommendations) |
| **Действия** | Кластеров под управлением Azure для защиты доступа к toohello конечные точки управления с помощью Azure Active Directory (AAD), помимо клиентские сертификаты. Кластеры Azure рекомендуется использовать клиенты tooauthenticate AAD безопасности и сертификаты для безопасности узла на узел.|

## <a id="fabric-cert-ca"></a>Нужно использовать сертификаты Service Fabric, полученные из утвержденного Центра сертификации

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Граница доверия Service Fabric | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Среда: Azure |
| **Справочные материалы**              | [Сертификаты X.509 и Service Fabric](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#x509-certificates-and-service-fabric) |
| **Действия** | <p>Для проверки подлинности узлов и клиентов Service Fabric использует сертификаты сервера X.509.</p><p>Tooconsider некоторые важные моменты при использовании сертификатов в службе структур:</p><ul><li>Сертификаты, которые используются в кластерах, выполняющих рабочие нагрузки в рабочей среде, следует создать с помощью правильно настроенной службы сертификации Windows Server или получить из утвержденного центра сертификации. Hello ЦС может быть утвержденных внешнего центра сертификации или правильно управляемого внутренней инфраструктуры открытых ключей (PKI)</li><li>Никогда не используйте в рабочей среде какие-либо временные или тестовые сертификаты, созданные с помощью таких инструментов, как MakeCert.exe.</li><li>Можно использовать самозаверяющий сертификат, но это следует делать только для тестовых кластеров, а не в рабочей среде.</li></ul>|

## <a id="standard-authn-id"></a>Используйте стандартные сценарии проверки подлинности, поддерживаемые сервером удостоверений

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Сервер удостоверений | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [IdentityServer3 - hello общую картину](https://identityserver.github.io/Documentation/docsv2/overview/bigPicture.html) |
| **Действия** | <p>Ниже приведены типичные варианты взаимодействия машин, поддерживаемых сервером удостоверение hello.</p><ul><li>Браузеры взаимодействуют с веб-приложениями.</li><li>Веб-приложения взаимодействуют с веб-API (иногда самостоятельно, иногда от имени пользователя).</li><li>Браузерные приложения взаимодействуют с веб-API.</li><li>Собственные приложения взаимодействуют с веб-API.</li><li>Серверные приложения взаимодействуют с веб-API.</li><li>Веб-API взаимодействуют с веб-API (иногда самостоятельно, иногда от имени пользователя).</li></ul>|

## <a id="override-token"></a>Переопределить hello по умолчанию удостоверение сервера кэша маркера масштабируемой альтернативой

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Сервер удостоверений | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Развертывание сервера удостоверений. Кэширование](https://identityserver.github.io/Documentation/docsv2/advanced/deployment.html) |
| **Действия** | <p>Сервер удостоверений имеет простой встроенный кэш, работающий в памяти. Это хорошо подходит для небольших крупномасштабных приложений в машинном коде, он не является масштабируемым mid и уровня сервера приложений для приложения hello следующих причин:</p><ul><li>Доступ к этим приложениям осуществляют несколько пользователей одновременно. Сохранение все токены доступа в hello одно хранилище создает изоляции проблем и представляет трудности при работе в масштабе: много пользователей, каждый из которых столько маркеры как ресурсы hello hello обращений приложения от их имени может означать огромное и очень дорого Уточняющий запрос операции</li><li>Эти приложения обычно развертываются на распределенных топологиях, где несколько узлов должен иметь доступ toohello же кэша</li><li>Кэшированные маркеры должны выдерживать перезапуски и деактивации процесса.</li><li>Для всех hello выше причин, при реализации веб-приложений рекомендуется кэша маркера по умолчанию удостоверение toooverride hello Server масштабируемой другое изображение, например для кэша Azure Redis</li></ul>|

## <a id="binaries-signed"></a>Двоичные файлы развернутого приложения должны иметь цифровую подпись

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Отношения доверия между компьютерами | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Убедитесь, цифровую подпись двоичные файлы развернутого приложения, можно проверить целостность hello hello двоичных файлов|

## <a id="msmq-queues"></a>Включение проверки подлинности при подключении tooMSMQ очереди в WCF

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | WCF | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальные, .NET Framework 3 |
| **Атрибуты**              | Недоступно |
| **Справочные материалы**              | [MSDN](https://msdn.microsoft.com/library/ff648500.aspx) |
| **Действия** | Программа не tooenable проверки подлинности при подключении tooMSMQ очередей, злоумышленник может отправить анонимно toohello сообщений в очереди для обработки. Если проверка подлинности не используется tooconnect tooan MSMQ очереди, используемой toodeliver программы tooanother сообщение, злоумышленник может подавать сообщение анонимные, вредоносных.|

### <a name="example"></a>Пример
Hello `<netMsmqBinding/>` ниже файла конфигурации WCF hello указывает, что проверка подлинности toodisable WCF при подключении tooan очереди MSMQ для доставки сообщений.
```
<bindings>
    <netMsmqBinding>
        <binding>
            <security>
                <transport msmqAuthenticationMode=""None"" />
            </security>
        </binding>
    </netMsmqBinding>
</bindings>
```
Настройте проверку подлинности домена Windows или сертификат toorequire MSMQ постоянно наличие входящих или исходящих сообщений.

### <a name="example"></a>Пример
Hello `<netMsmqBinding/>` ниже файла конфигурации WCF hello указывает, что проверка подлинности сертификата tooenable WCF при подключении tooan очереди MSMQ. Hello Клиент проходит проверку подлинности с использованием сертификатов X.509. Hello клиента сертификат должен присутствовать в хранилище сертификатов сервера hello hello.
```
<bindings>
    <netMsmqBinding>
        <binding>
            <security>
                <transport msmqAuthenticationMode=""Certificate"" />
            </security>
        </binding>
    </netMsmqBinding>
</bindings>
```

## <a id="message-none"></a>Выполните WCF не задан сообщение toonone clientCredentialType

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | WCF | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | .NET Framework 3 |
| **Атрибуты**              | Тип учетных данных клиента: None |
| **Справочные материалы**              | [MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html) |
| **Действия** | Hello отсутствие проверки подлинности означает все является может tooaccess этой службы. Служба, которая не выполняет проверку подлинности клиентов доступ tooall пользователей. Настройте tooauthenticate приложения hello для получения учетных данных клиента. Это можно сделать, задав tooWindows clientCredentialType сообщения hello или сертификата. |

### <a name="example"></a>Пример
```
<message clientCredentialType=""Certificate""/>
```

## <a id="transport-none"></a>Выполните WCF не установлено toonone clientCredentialType транспорта

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | WCF | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальные, .NET Framework 3 |
| **Атрибуты**              | Тип учетных данных клиента: None |
| **Справочные материалы**              | [MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html) |
| **Действия** | Hello отсутствие проверки подлинности означает все является может tooaccess этой службы. Служба, которая не выполняет проверку подлинности клиентов позволяет все пользователи tooaccess его функциональность. Настройте tooauthenticate приложения hello для получения учетных данных клиента. Это можно сделать, задав tooWindows clientCredentialType hello транспорта или сертификата. |

### <a name="example"></a>Пример
```
<transport clientCredentialType=""Certificate""/>
```

## <a id="authn-secure-api"></a>Убедитесь, что методы стандартной проверки подлинности используется toosecure веб-API

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-интерфейс API | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Проверка подлинности и авторизация в веб-API ASP.NET](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api), [сведения о внешних службах проверки подлинности с веб-API ASP.NET (C#)](http://www.asp.net/web-api/overview/security/external-authentication-services) |
| **Действия** | <p>Проверка подлинности — процесс hello, где сущность подтверждает свою подлинность, обычно с помощью учетных данных, таких как имя пользователя и пароль. Существует множество протоколов проверки подлинности, включая следующие:</p><ul><li>Client certificates</li><li>на основе Windows;</li><li>на основе форм;</li><li>федерация: ADFS;</li><li>федерация: Azure AD;</li><li>федерация: сервер удостоверений.</li></ul><p>В разделе references hello ссылкам низкоуровневые на как каждая из схем проверки подлинности hello могут быть реализованы toosecure веб-API.</p>|

## <a id="authn-aad"></a>Используйте стандартные сценарии проверки подлинности, поддерживаемые Azure Active Directory

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Azure AD | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Сценарии аутентификации в Azure Active Directory](https://azure.microsoft.com/documentation/articles/active-directory-authentication-scenarios/), [Примеры кода Azure Active Directory](https://azure.microsoft.com/documentation/articles/active-directory-code-samples/), [Руководство разработчика по Azure Active Directory](https://azure.microsoft.com/documentation/articles/active-directory-developers-guide/) |
| **Действия** | <p>Azure Active Directory (Azure AD) упрощает аутентификацию для разработчиков, предоставляя удостоверение как услугу, благодаря поддержке стандартных протоколов, например OAuth 2.0 и OpenID Connect. Ниже приведены пять основных сценариев приложений поддерживаемых Azure AD hello.</p><ul><li>Веб-браузер tooWeb приложения: пользователю нужно toosign в tooa веб-приложение, защищенное Azure AD</li><li>Одностраничного приложения (SPA): Пользователю требуется toosign в tooa одностраничное приложение, защищенное Azure AD</li><li>TooWeb собственного приложения API: собственное приложение, запускаемое на телефоне, планшете или tooauthenticate потребностей ПК tooget пользователя ресурсы из веб-API, защищенные Azure AD</li><li>Веб-приложение tooWeb API: веб-приложению требуются tooget ресурсы из веб-API, защищенного Azure AD</li><li>Управляющая программа или серверное приложение tooWeb API: приложение-демон или серверное приложение без веб-интерфейса пользователя требуются tooget ресурсы из веб-API, защищенного Azure AD</li></ul><p>См. сведения о реализации низкоуровневых toohello ссылки в разделе references hello</p>|

## <a id="adal-scalable"></a>Переопределить hello по умолчанию ADAL кэша маркера масштабируемой альтернативой

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Azure AD | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Современная проверка подлинности с помощью Azure Active Directory для веб-приложений](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/), [запись блога об использовании Redis в качестве кэша маркеров ADAL](https://blogs.msdn.microsoft.com/mrochon/2016/09/19/using-redis-as-adal-token-cache/)  |
| **Действия** | <p>кэш по умолчанию Hello, который использует ADAL (библиотеку аутентификации Active Directory) — кэш в памяти, основанный на статический хранилища, доступные всего процесса. Хотя этот способ подходит для приложений в машинном коде, он не является масштабируемым mid и уровня сервера приложений для приложения hello следующих причин:</p><ul><li>Доступ к этим приложениям осуществляют несколько пользователей одновременно. Сохранение все токены доступа в hello одно хранилище создает изоляции проблем и представляет трудности при работе в масштабе: много пользователей, каждый из которых столько маркеры как ресурсы hello hello обращений приложения от их имени может означать огромное и очень дорого Уточняющий запрос операции</li><li>Эти приложения обычно развертываются на распределенных топологиях, где несколько узлов должен иметь доступ toohello же кэша</li><li>Кэшированные маркеры должны выдерживать перезапуски и деактивации процесса.</li></ul><p>Для всех hello выше причин, при реализации веб-приложений рекомендуется toooverride hello по умолчанию ADAL кэша маркера масштабируемой другое изображение, например для кэша Azure Redis.</p>|

## <a id="tokenreplaycache-adal"></a>Убедитесь, что TokenReplayCache используется tooprevent hello воспроизведения маркеров проверки подлинности ADAL

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Azure AD | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Современная проверка подлинности с помощью Azure Active Directory для веб-приложений](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/) |
| **Действия** | <p>Свойство TokenReplayCache Hello позволяет разработчикам toodefine кэш воспроизведения токена, хранилища, который может использоваться для сохранения токены hello с целью проверки, что токен не может использоваться более одного раза.</p><p>Эта мера от распространенных атак, hello соответствующее называется атакой воспроизведения токена: перехват hello токен, отправленный при входе в систему злоумышленники могут пытаться toosend его toohello приложение еще раз («воспроизвести») для установки нового сеанса. Например, в OIDC-предоставления кода потока, после успешной проверки подлинности пользователя, запрос слишком «/ signin oidc» становится конечной точки hello проверяющей стороны с «id_token», «код» и «состояние» параметры.</p><p>Здравствуйте, проверяющая сторона проверяет этот запрос и создает новый сеанс. Если злоумышленник перехватывает данный запрос и воспроизводит его, он может установить Успешный сеанс и подделка hello пользователя. наличие Hello специальное слово hello в OpenID Connect можно ограничить, но не полностью устранить hello ситуациях, в которых hello атаки можно активированная успешно. tooprotect разработчикам приложений, можно предоставить реализацию ITokenReplayCache и назначить tooTokenReplayCache экземпляра.</p>|

### <a name="example"></a>Пример
```C#
// ITokenReplayCache defined in ADAL
public interface ITokenReplayCache
{
bool TryAdd(string securityToken, DateTime expiresOn);
bool TryFind(string securityToken);
}
```

### <a name="example"></a>Пример
Ниже приведен пример реализации интерфейса ITokenReplayCache hello. (Выполните соответствующие настройки и реализуйте платформу кэширования конкретного проекта.)
```C#
public class TokenReplayCache : ITokenReplayCache
{
    private readonly ICacheProvider cache; // Your project-specific cache provider
    public TokenReplayCache(ICacheProvider cache)
    {
        this.cache = cache;
    }
    public bool TryAdd(string securityToken, DateTime expiresOn)
    {
        if (this.cache.Get<string>(securityToken) == null)
        {
            this.cache.Set(securityToken, securityToken);
            return true;
        }
        return false;
    }
    public bool TryFind(string securityToken)
    {
        return this.cache.Get<string>(securityToken) != null;
    }
}
```
Hello реализации кэша имеет toobe, на который ссылается OIDC функций через hello свойство «TokenValidationParameters» следующим образом.
```C#
OpenIdConnectOptions openIdConnectOptions = new OpenIdConnectOptions
{
    AutomaticAuthenticate = true,
    ... // other configuration properties follow..
    TokenValidationParameters = new TokenValidationParameters
    {
        TokenReplayCache = new TokenReplayCache(/*Inject your cache provider*/);
    }
}
```

Проверьте эффективность hello tootest, эта конфигурация входа в приложение локального защищенных OIDC Обратите внимание и записать hello запроса слишком`"/signin-oidc"` конечной точки в fiddler. Когда защита hello не на месте, воспроизведение этот запрос в fiddler установит новый файл cookie. При запросе hello воспроизводится После добавления защиты TokenReplayCache hello, приложение hello вызовет исключение следующим образом:`SecurityTokenReplayDetectedException: IDX10228: hello securityToken has previously been validated, securityToken: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSIsImtpZCI6Ik1uQ1......`

## <a id="adal-oauth2"></a>Использование библиотеки ADAL toomanage маркера запрашивает у клиентов tooAAD OAuth2 (или локальной AD)

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Azure AD | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [ADAL](https://azure.microsoft.com/documentation/articles/active-directory-authentication-libraries/) |
| **Действия** | <p>Hello Azure AD включает библиотеку (ADAL) проверки подлинности клиента tooeasily разработчики приложения проверки подлинности пользователей toocloud локальной Active Directory (AD) и затем получать токены доступа для безопасных вызовов API.</p><p>ADAL имеет множество функций, которые упрощают проверку подлинности для разработчиков. К ним относятся поддержка асинхронных операций, настраиваемый кэш маркеров, в котором хранятся маркеры доступа и маркеры обновления, автоматическое обновление маркера, когда срок действия маркера доступа истекает и маркер обновления доступен, и многие другие функции.</p><p>Обрабатывая самые hello сложности, ADAL может помочь разработчику сосредоточиться на бизнес-логики в приложении и легко защитить ресурсы, не становясь экспертом по безопасности. Отдельные библиотеки доступны для .NET, JavaScript (клиент и Node.js), iOS, Android и Java.</p>|

## <a id="authn-devices-field"></a>Проверка подлинности устройств, подключающихся toohello шлюз поля

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Полевой шлюз Интернета вещей | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Убедитесь, что каждое устройство проходит проверку подлинности с hello шлюз поля, прежде чем принимать данные от них и перед эффективного вышестоящего взаимодействия с hello шлюза в облаке. Кроме того, настройте подключение устройств с помощью учетных данных на уровне отдельного устройства, чтобы уникально идентифицировать отдельные устройства.|

## <a id="authn-devices-cloud"></a>Обеспечить проверку подлинности устройств, подключающихся tooCloud шлюза

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Облачный шлюз Интернета вещей | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальное, C#, Node.js  |
| **Атрибуты**              | Н/д, выбор шлюза: Центр Интернета вещей Azure |
| **Справочные материалы**              | Н/д, [Приступая к работе с Центром Интернета вещей Azure (.NET)](https://azure.microsoft.com/documentation/articles/iot-hub-csharp-csharp-getstarted/), [Приступая к работе с Центром Интернета вещей Azure (Node)](https://azure.microsoft.com/documentation/articles/iot-hub-node-node-getstarted), [Поддерживаемые сертификаты X.509](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/), [репозиторий Git](https://github.com/Azure/azure-iot-sdks/tree/master/node) |
| **Действия** | <ul><li>**Универсальное:** устройства hello проверять подлинность, используя Transport Layer Security (TLS) или протокол IPSec. Инфраструктура должна поддерживать общие ключи для тех устройств, которые не выполняют полное асимметричное шифрование. Используйте Azure AD, OAuth.</li><li>**C#:** при создании экземпляра DeviceClient, по умолчанию, hello метод Create создает экземпляр DeviceClient, который использует toocommunicate протокола AMQP hello с центром IoT. hello toouse протокола HTTPS, используйте переопределение hello hello создать метод, который позволяет toospecify hello протокола. При использовании протокола HTTPS hello, следует также добавить hello `Microsoft.AspNet.WebApi.Client` NuGet пакета tooyour проекта tooinclude hello `System.Net.Http.Formatting` пространства имен.</li></ul>|

### <a name="example"></a>Пример
```C#
static DeviceClient deviceClient;

static string deviceKey = "{device key}";
static string iotHubUri = "{iot hub hostname}";

var messageString = "{message in string format}";
var message = new Message(Encoding.ASCII.GetBytes(messageString));

deviceClient = DeviceClient.Create(iotHubUri, new DeviceAuthenticationWithRegistrySymmetricKey("myFirstDevice", deviceKey));

await deviceClient.SendEventAsync(message);
```

### <a name="example"></a>Пример
**Проверка подлинности Node.js**
#### <a name="symmetric-key"></a>Симметричный ключ
* Создайте Центр Интернета вещей в Azure.
* Создать запись в реестре удостоверений устройств hello
    ```javascript
    var device = new iothub.Device(null);
    device.deviceId = <DeviceId >
    registry.create(device, function(err, deviceInfo, res) {})
    ```
* Создайте виртуальное устройство.
    ```javascript
    var clientFromConnectionString = require('azure-iot-device-amqp').clientFromConnectionString;
    var Message = require('azure-iot-device').Message;
    var connectionString = 'HostName=<HostName>DeviceId=<DeviceId>SharedAccessKey=<SharedAccessKey>';
    var client = clientFromConnectionString(connectionString);
    ```
#### <a name="sas-token"></a>Маркер SAS
* Создается в системе при использовании симметричного ключа, но его также можно создать и использовать явным образом.
* Определите протокол: `var Http = require('azure-iot-device-http').Http;`
* Создайте маркер SAS:
    ```javascript
    resourceUri = encodeURIComponent(resourceUri.toLowerCase()).toLowerCase();
    var deviceName = "<deviceName >";
    var expires = (Date.now() / 1000) + expiresInMins * 60;
    var toSign = resourceUri + '\n' + expires;
    // using crypto
    var decodedPassword = new Buffer(signingKey, 'base64').toString('binary');
    const hmac = crypto.createHmac('sha256', decodedPassword);
    hmac.update(toSign);
    var base64signature = hmac.digest('base64');
    var base64UriEncoded = encodeURIComponent(base64signature);
    // construct authorization string
    var token = "SharedAccessSignature sr=" + resourceUri + "%2fdevices%2f"+deviceName+"&sig="
    + base64UriEncoded + "&se=" + expires;
    if (policyName) token += "&skn="+policyName;
    return token;
    ```
* Подключитесь с помощью маркера SAS: 
    ```javascript
    Client.fromSharedAccessSignature(sas, Http); 
    ```
#### <a name="certificates"></a>Сертификаты
* Создать собственный знаком X509 сертификат с помощью любого средства например OpenSSL toogenerate .cert и .key файлы toostore hello сертификат и hello ключ соответственно
* Подготовьте устройство, которое принимает безопасное подключение с использованием сертификатов.
    ```javascript
    var connectionString = '<connectionString>';
    var registry = iothub.Registry.fromConnectionString(connectionString);
    var deviceJSON = {deviceId:"<deviceId>",
    authentication: {
        x509Thumbprint: {
        primaryThumbprint: "<PrimaryThumbprint>",
        secondaryThumbprint: "<SecondaryThumbprint>"
        }
    }}
    var device = deviceJSON;
    registry.create(device, function (err) {});
    ```
* Подключите устройство с помощью сертификата.
    ```javascript
    var Protocol = require('azure-iot-device-http').Http;
    var Client = require('azure-iot-device').Client;
    var connectionString = 'HostName=<HostName>DeviceId=<DeviceId>x509=true';
    var client = Client.fromConnectionString(connectionString, Protocol);
    var options = {
        key: fs.readFileSync('./key.pem', 'utf8'),
        cert: fs.readFileSync('./server.crt', 'utf8')
    }; 
    // Calling setOptions with hello x509 certificate and key (and optionally, passphrase) will configure hello client //transport toouse x509 when connecting tooIoT Hub
    client.setOptions(options);
    //call fn tooexecute after hello connection is set up
    client.open(fn);
    ```

## <a id="authn-cred"></a>Используйте учетные данные проверки подлинности на уровне отдельного устройства

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Облачный шлюз Интернета вещей  | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Выбор шлюза: Центр Интернета вещей Azure |
| **Справочные материалы**              | [Маркеры безопасности Центра Интернета вещей Azure](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/) |
| **Действия** | Используйте учетные данные проверки подлинности с помощью маркеров SAS на основе ключа устройства или сертификата клиента для каждого отдельного устройства вместо политик общего доступа на уровне Центра Интернета вещей. Это запрещает повторное использование hello токены проверки подлинности одного шлюза устройства или поле в другом |

## <a id="req-containers-anon"></a>Убедитесь, что только hello требуемые контейнеры и большие двоичные объекты получают анонимный доступ для чтения

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Хранилище Azure | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Тип хранилища: большой двоичный объект |
| **Справочные материалы**              | [Управление toocontainers анонимный доступ для чтения и большие двоичные объекты](https://azure.microsoft.com/documentation/articles/storage-manage-access-to-resources/), [Shared Access Signatures, Part 1: Общие сведения о модели SAS hello](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/) |
| **Действия** | <p>По умолчанию контейнер и все большие двоичные объекты в ней может обращаться только владелец учетной записи хранилища hello hello. toogive анонимным пользователям разрешения на чтение tooa контейнера и BLOB-объектов, один набор hello контейнера разрешения tooallow общего доступа. Анонимные пользователи могут считывать большие двоичные объекты в контейнере общедоступный без проверки подлинности запроса hello.</p><p>Контейнеры обеспечивают следующие параметры для управления доступом к контейнеру hello:</p><ul><li>Полный общий доступ на чтение: контейнер и данные больших двоичных объектов можно считывать с помощью анонимного запроса. Клиенты могут перечислять большие двоичные объекты в контейнере hello через анонимный запрос, но не могут перечислять контейнеры в учетной записи хранилища hello.</li><li>Общий доступ на чтение только для больших двоичных объектов: данные больших двоичных объектов в этом контейнере можно считать с помощью анонимного запроса, но данные контейнера недоступны. Клиенты не могут перечислять большие двоичные объекты в контейнере hello через анонимный запрос</li><li>Отсутствует общий доступ на чтение: hello только владельцем учетной записи могут считываться данные контейнера и больших двоичных объектов</li></ul><p>Анонимный доступ лучше всего подходит для сценариев, когда определенные большие двоичные объекты нужно сделать всегда доступными для анонимного доступа на чтение. Для детальный контроль один можно создать подпись общего доступа, который позволяет получать доступ ограничен toodelegate использование различных разрешений, а также через указанный интервал времени. Проверьте, чтобы случайно не был предоставлен анонимный доступ к контейнерам и большим двоичным объектам, которые могут содержать конфиденциальные данные.</p>|

## <a id="limited-access-sas"></a>Предоставить ограниченный доступ tooobjects в хранилище Azure с использованием SAS или SAP

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Хранилище Azure | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно |
| **Справочные материалы**              | [Shared Access Signatures, Part 1: Общие сведения о hello модели SAS](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/), [Shared Access Signatures, Part 2: Создание и использование SAS с хранилищем больших двоичных объектов](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-2/), [как toodelegate доступ к tooobjects в учетной записи с помощью Подписи коллективного доступа и хранимые политики доступа](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies) |
| **Действия** | <p>Использование подписи общего доступа (SAS) — tooobjects доступа эффективный способ toogrant ограничены в клиенты tooother учетной записи хранилища, без необходимости tooexpose ключа доступа учетной записи. Hello SAS является URI, который включает в себя параметрами запроса все hello сведения, необходимые для прошедших проверку подлинности доступа к ресурсу хранилища tooa. tooaccess ресурсов хранения в hello SAS, hello клиент должен только toopass hello SAS toohello соответствующий конструктор или метод.</p><p>SAS можно использовать при необходимости tooresources tooprovide доступ в клиенте tooa учетной записи хранилища, не могут быть доверенными с ключом учетной записи hello. Ключи учетной записи хранилища включают как первичные и вторичные ключи, обоих видов предоставить учетной записи tooyour административный доступ и все ресурсы hello в нем. Предоставление доступа к любой из ключи учетной записи открывает вероятность вредоносной или намеренное использование вашей учетной записи toohello. Подписанные URL-адреса являются безопасным вариантом, позволяющую другим клиентам tooread, запись и удаление данных в вашей учетной записи хранилища, в соответствии с toohello разрешения, которые вы предоставили и без необходимости hello ключ учетной записи.</p><p>Если у вас есть логически связанный и относительно постоянный набор параметров, лучше использовать хранимую политику доступа. Так как использование SAS, производным от хранимой политикой доступа позволяет hello toorevoke возможность, что SAS немедленно, он является hello рекомендуется tooalways лучший подход использовать политики доступа хранятся по возможности.</p>|
