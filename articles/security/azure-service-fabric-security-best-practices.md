---
title: "рекомендации по обеспечению безопасности Service Fabric aaaAzure | Документы Microsoft"
description: "В этой статье представлены рекомендации по безопасности Azure Service Fabric."
services: security
documentationcenter: na
author: unifycloud
manager: swadhwa
editor: tomsh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/04/2017
ms.author: tomsh
ms.openlocfilehash: 483a21240da17d56bb4641653093ddcbad379d6a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-service-fabric-security-best-practices"></a><span data-ttu-id="6dc28-103">Рекомендации по безопасности Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="6dc28-103">Azure Service Fabric security best practices</span></span>
<span data-ttu-id="6dc28-104">Развертывание приложения в Azure — быстрое, удобное и экономичное.</span><span class="sxs-lookup"><span data-stu-id="6dc28-104">Deploying an application on Azure is fast, easy, and cost-effective.</span></span> <span data-ttu-id="6dc28-105">Перед развертыванием облачного приложения в полезные toohave производства рекомендуется так сделать, tooassist в оценке приложения со списком важных и рекомендуемых рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="6dc28-105">Before deploying cloud application in production useful toohave a best practice tooassist in evaluating your application against a list of essential and recommended best practices.</span></span>

<span data-ttu-id="6dc28-106">Azure Service Fabric — это платформа распределенных систем, который позволяет легко toopackage, развертывания и управления масштабируемыми и надежными микрослужбами.</span><span class="sxs-lookup"><span data-stu-id="6dc28-106">Azure Service Fabric is a distributed systems platform that makes it easy toopackage, deploy, and manage scalable and reliable microservices.</span></span> <span data-ttu-id="6dc28-107">Service Fabric также устраняет hello значительным препятствием для разработки и управления ими облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="6dc28-107">Service Fabric also addresses hello significant challenges in developing and managing cloud applications.</span></span> <span data-ttu-id="6dc28-108">Получая гарантированную масштабируемость, надежность и управляемость, разработчики и администраторы могут сосредоточиться на реализации критически важных и ресурсоемких рабочих нагрузок вместо того, чтобы тратить силы на решение сложных проблем с инфраструктурой.</span><span class="sxs-lookup"><span data-stu-id="6dc28-108">Developers and administrators can avoid complex infrastructure problems and focus on implementing mission-critical, demanding workloads that are scalable, reliable, and manageable.</span></span> 

<span data-ttu-id="6dc28-109">Для каждой рекомендации будет предоставлено объяснение следующих аспектов:</span><span class="sxs-lookup"><span data-stu-id="6dc28-109">For each best practice, we explain:</span></span>

-   <span data-ttu-id="6dc28-110">Какие hello рекомендуется</span><span class="sxs-lookup"><span data-stu-id="6dc28-110">What hello best practice is</span></span>
-   <span data-ttu-id="6dc28-111">Почему нужно tooenable этой рекомендации</span><span class="sxs-lookup"><span data-stu-id="6dc28-111">Why you want tooenable that best practice</span></span>
-   <span data-ttu-id="6dc28-112">Если этого не рекомендуется hello tooenable, что может быть результатом hello</span><span class="sxs-lookup"><span data-stu-id="6dc28-112">What might be hello result if you fail tooenable hello best practice</span></span>
-   <span data-ttu-id="6dc28-113">Как вы узнаете tooenable hello, рекомендации</span><span class="sxs-lookup"><span data-stu-id="6dc28-113">How you can learn tooenable hello best practice</span></span>

<span data-ttu-id="6dc28-114">В настоящее время у нас есть следующие рекомендации по безопасности Azure Service Fabric hello:</span><span class="sxs-lookup"><span data-stu-id="6dc28-114">We currently have hello following Azure Service Fabric security best practices:</span></span>

-   <span data-ttu-id="6dc28-115">Используйте шаблон Manager(ARM) ресурсов Azure и безопасной кластера toocreate модуля PowerShell Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="6dc28-115">Use Azure Resource Manager(ARM) template and Service Fabric Azure PowerShell Module toocreate secure cluster</span></span>
-   <span data-ttu-id="6dc28-116">Использование сертификата X.509.</span><span class="sxs-lookup"><span data-stu-id="6dc28-116">Use X.509 certificates</span></span>
-   <span data-ttu-id="6dc28-117">Настройка политик безопасности.</span><span class="sxs-lookup"><span data-stu-id="6dc28-117">Configure security policies</span></span>
-   <span data-ttu-id="6dc28-118">Настройка безопасности с помощью Reliable Actors.</span><span class="sxs-lookup"><span data-stu-id="6dc28-118">Reliable Actors security configuration</span></span>
-   <span data-ttu-id="6dc28-119">Настройка SSL для Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="6dc28-119">Configure SSL for Azure Service Fabric</span></span>
-   <span data-ttu-id="6dc28-120">Обеспечение сетевой изоляции и безопасности с помощью Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="6dc28-120">Network Isolation/Security with Azure Service Fabric</span></span>
-   <span data-ttu-id="6dc28-121">Настройка хранилища ключей для обеспечения безопасности.</span><span class="sxs-lookup"><span data-stu-id="6dc28-121">Set up a key vault for security</span></span>
-   <span data-ttu-id="6dc28-122">Назначить пользователей tooroles</span><span class="sxs-lookup"><span data-stu-id="6dc28-122">Assign users tooroles</span></span>


## <a name="best-practices-for-securing-your-cluster"></a><span data-ttu-id="6dc28-123">Рекомендации по обеспечению безопасности кластера</span><span class="sxs-lookup"><span data-stu-id="6dc28-123">Best practices for securing your cluster</span></span>

<span data-ttu-id="6dc28-124">**Общая картина**</span><span class="sxs-lookup"><span data-stu-id="6dc28-124">**Big Picture**</span></span>

<span data-ttu-id="6dc28-125">Всегда используйте безопасный кластер.</span><span class="sxs-lookup"><span data-stu-id="6dc28-125">Always use a secure cluster</span></span>
-   <span data-ttu-id="6dc28-126">Безопасность кластера. Используйте сертификаты.</span><span class="sxs-lookup"><span data-stu-id="6dc28-126">Cluster security – use Certificates</span></span>
-   <span data-ttu-id="6dc28-127">Клиентский доступ (для администраторов и только для чтения). Используйте AAD.</span><span class="sxs-lookup"><span data-stu-id="6dc28-127">Client access (Admin and Read only) – use AAD</span></span>

<span data-ttu-id="6dc28-128">Используйте автоматическое развертывание.</span><span class="sxs-lookup"><span data-stu-id="6dc28-128">Use automated deployments</span></span>
-   <span data-ttu-id="6dc28-129">Использовать toogenerate скрипты, развертывать и, наведите курсор на секретов</span><span class="sxs-lookup"><span data-stu-id="6dc28-129">Use scripts toogenerate, deploy and, roll over secrets</span></span>
-   <span data-ttu-id="6dc28-130">Хранить секреты hello в Кв, использовать AD для других клиентского доступа</span><span class="sxs-lookup"><span data-stu-id="6dc28-130">Keep hello secrets in KV, use AD for all other client access</span></span>
-   <span data-ttu-id="6dc28-131">Ни один человек должен иметь toothem доступ без проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="6dc28-131">No human should have access toothem without authentication.</span></span>

<span data-ttu-id="6dc28-132">Кроме того рассмотрите hello ниже:</span><span class="sxs-lookup"><span data-stu-id="6dc28-132">Additionally, consider hello following:</span></span>
-   <span data-ttu-id="6dc28-133">Создавайте сети периметра с помощью групп безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="6dc28-133">Create DMZs using Network Security Groups (NSGs)</span></span>
-   <span data-ttu-id="6dc28-134">Использовать tooRDP перехода серверы в кластере виртуальных машин или toomanage кластера</span><span class="sxs-lookup"><span data-stu-id="6dc28-134">Use Jump servers tooRDP into cluster VMs or toomanage your cluster</span></span>

<span data-ttu-id="6dc28-135">Кластеры должны быть защищенным tooprevent несанкционированный пользователями подключение кластера tooyour, особенно в том случае, если он имеет рабочих нагрузок, запущенными на нем.</span><span class="sxs-lookup"><span data-stu-id="6dc28-135">Clusters must be secured tooprevent unauthorized users from connecting tooyour cluster, especially when it has production workloads running on it.</span></span> <span data-ttu-id="6dc28-136">Хотя это возможно toocreate небезопасные кластера, это позволит tooit tooconnect анонимных пользователей, если он предоставляет toohello конечные точки управления общедоступный Интернет.</span><span class="sxs-lookup"><span data-stu-id="6dc28-136">Although it is possible toocreate an unsecured cluster, doing so allows anonymous users tooconnect tooit, if it exposes management endpoints toohello public Internet.</span></span>

<span data-ttu-id="6dc28-137">Используемые технологии tooimplement этих сценариев.</span><span class="sxs-lookup"><span data-stu-id="6dc28-137">Technologies used tooimplement those scenarios.</span></span> <span data-ttu-id="6dc28-138">Hello [кластера сценарии безопасности](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security) являются:</span><span class="sxs-lookup"><span data-stu-id="6dc28-138">hello [cluster security scenarios](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security) are:</span></span>

-   <span data-ttu-id="6dc28-139">Узел узел безопасности это защищает взаимодействие между hello виртуальных машин и компьютеров в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-139">Node-to-node security- This secures communication between hello VMs and computers in hello cluster.</span></span> <span data-ttu-id="6dc28-140">Это гарантирует, что только авторизованные toojoin hello кластера компьютерах могут участвовать в размещения приложений и служб в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-140">This ensures that only computers that are authorized toojoin hello cluster can participate in hosting applications and services in hello cluster.</span></span>
<span data-ttu-id="6dc28-141">Кластеры, работающие в Azure, или автономные кластеры, работающие под управлением Windows, могут использовать [безопасность на основе сертификатов](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security) или [безопасность Windows](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-windows-cluster-windows-security) для компьютеров Windows Server.</span><span class="sxs-lookup"><span data-stu-id="6dc28-141">Clusters running on Azure or standalone clusters running on Windows can use either [Certificate Security](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security) or [Windows Security](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-windows-cluster-windows-security) for Windows Server machines.</span></span>
-   <span data-ttu-id="6dc28-142">Узел клиента безопасности это защищает обмен данными между клиентом Service Fabric и отдельные узлы в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-142">Client-to-node security- This secures communication between a Service Fabric client and individual nodes in hello cluster.</span></span>
-   <span data-ttu-id="6dc28-143">Управление доступом на основе ролей (RBAC) - указании ролей hello администратора и пользователя клиента во время создания кластера hello, предоставляя удостоверения (сертификаты, AAD и т.д.) для каждого.</span><span class="sxs-lookup"><span data-stu-id="6dc28-143">Role-based access control (RBAC) - You specify hello administrator and user client roles at hello time of cluster creation by providing separate identities (certificates, AAD etc.) for each.</span></span>
-   <span data-ttu-id="6dc28-144">Рекомендации по обеспечению безопасности-кластеры для Azure, рекомендуется использовать клиенты tooauthenticate AAD безопасности и сертификаты для безопасности узла на узел.</span><span class="sxs-lookup"><span data-stu-id="6dc28-144">Security Recommendations-For Azure clusters, it is recommended that you use AAD security tooauthenticate clients and certificates for node-to-node security.</span></span>

<span data-ttu-id="6dc28-145">автономный hello tooconfigure кластера Windows. в разделе [Настройка параметров для кластера windows автономный](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-manifest).</span><span class="sxs-lookup"><span data-stu-id="6dc28-145">tooconfigure hello standalone Windows cluster, see [configure settings for standalone windows cluster](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-manifest).</span></span>

<span data-ttu-id="6dc28-146">Используйте шаблоны Azure Resource Manager и модуля PowerShell Azure Service Fabric toocreate безопасности кластера.</span><span class="sxs-lookup"><span data-stu-id="6dc28-146">Use Azure Resource Manager templates and Service Fabric Azure PowerShell Module toocreate secure cluster.</span></span>
<span data-ttu-id="6dc28-147">Пошаговое руководство, которое поможет выполнить настройку защищенного кластера Azure Service Fabric в Azure с помощью Azure Resource Manager, доступно [здесь](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm).</span><span class="sxs-lookup"><span data-stu-id="6dc28-147">A step-by-step guide walks you through setting up a secure Azure Service Fabric cluster in Azure by using Azure Resource Manager is available [here](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm).</span></span>

<span data-ttu-id="6dc28-148">Использовать toocustomize шаблона диспетчера ресурсов Azure hello кластера</span><span class="sxs-lookup"><span data-stu-id="6dc28-148">Use hello Azure Resource Manager template toocustomize your cluster</span></span>
-   <span data-ttu-id="6dc28-149">Настройте управляемое хранилище для виртуальных жестких дисков виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="6dc28-149">Setup-managed storage for VM VHDs</span></span>

<span data-ttu-id="6dc28-150">Использование диспетчера ресурсов Azure шаблона hello toodrive изменения tooyour группы ресурсов</span><span class="sxs-lookup"><span data-stu-id="6dc28-150">Use hello Azure Resource Manager template toodrive changes tooyour Resource Group</span></span>
-   <span data-ttu-id="6dc28-151">Простое управление конфигурацией.</span><span class="sxs-lookup"><span data-stu-id="6dc28-151">Easy configuration management</span></span>
-   <span data-ttu-id="6dc28-152">Аудит</span><span class="sxs-lookup"><span data-stu-id="6dc28-152">Auditing</span></span>

<span data-ttu-id="6dc28-153">Считайте конфигурацию кластера кодом.</span><span class="sxs-lookup"><span data-stu-id="6dc28-153">Treat your cluster configuration as Code</span></span>
-   <span data-ttu-id="6dc28-154">Тщательности при проверке конфигурации hello выберите toodeploy</span><span class="sxs-lookup"><span data-stu-id="6dc28-154">Be thorough in checking hello configurations you choose toodeploy</span></span>
-   <span data-ttu-id="6dc28-155">Избегайте использования неявного команды tootweak ресурсы непосредственно</span><span class="sxs-lookup"><span data-stu-id="6dc28-155">Avoid using implicit commands tootweak your resources directly</span></span>

<span data-ttu-id="6dc28-156">Многие аспекты hello [жизненный цикл приложений фабрики служб](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-lifecycle) можно автоматизировать.</span><span class="sxs-lookup"><span data-stu-id="6dc28-156">Many aspects of hello [Service Fabric application lifecycle](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-lifecycle) can be automated.</span></span> <span data-ttu-id="6dc28-157">[Модуль PowerShell Azure для Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-remove-applications#upload-the-application-package) автоматизирует типовые задачи по развертыванию, обновлению, удалению и тестированию приложений Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="6dc28-157">[Service Fabric Azure PowerShell Module](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-remove-applications#upload-the-application-package) automates common tasks for deploying, upgrading, removing, and testing Azure Service Fabric applications.</span></span> <span data-ttu-id="6dc28-158">Также доступны управляемые API и API HTTP для управления приложениями.</span><span class="sxs-lookup"><span data-stu-id="6dc28-158">Managed and HTTP APIs for app management are also available.</span></span>

## <a name="use-x509-certificates"></a><span data-ttu-id="6dc28-159">Использование сертификата X.509.</span><span class="sxs-lookup"><span data-stu-id="6dc28-159">Use X.509 certificates</span></span>
<span data-ttu-id="6dc28-160">Кластеры всегда должны быть защищены с помощью сертификатов X.509 или службы безопасности Windows.</span><span class="sxs-lookup"><span data-stu-id="6dc28-160">Clusters should always be secured using X.509 certificates or Windows security.</span></span> <span data-ttu-id="6dc28-161">Во время создания кластера только настройки безопасности и не возможные tooenable безопасности после создания кластера hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-161">Security is only configured at cluster creation time and it is not possible tooenable security after hello cluster is created.</span></span>

<span data-ttu-id="6dc28-162">При указании [кластера сертификат](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security), задайте значение ClusterCredentialType tooX509 hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-162">If you are specifying a [cluster certificate](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security), set hello value of ClusterCredentialType tooX509.</span></span> <span data-ttu-id="6dc28-163">При указании сертификата сервера для внешних соединений, задайте hello ServerCredentialType tooX509.</span><span class="sxs-lookup"><span data-stu-id="6dc28-163">If you are specifying server certificate for outside connections, set hello ServerCredentialType tooX509.</span></span>

-   <span data-ttu-id="6dc28-164">Сертификаты, которые используются в кластерах, выполняющих рабочие нагрузки в рабочей среде, следует создать с помощью правильно настроенной службы сертификации Windows Server или получить из утвержденного центра сертификации.</span><span class="sxs-lookup"><span data-stu-id="6dc28-164">Certificates used in clusters running production workloads should be created by using a correctly configured Windows Server certificate service or obtained from an approved Certificate Authority (CA).</span></span>
-   <span data-ttu-id="6dc28-165">Никогда не используйте в рабочей среде какие-либо временные или тестовые сертификаты, созданные с помощью таких инструментов, как MakeCert.exe.</span><span class="sxs-lookup"><span data-stu-id="6dc28-165">Never use any temporary or test certificates in production that are created with tools such as MakeCert.exe.</span></span>
-   <span data-ttu-id="6dc28-166">Можно использовать самозаверяющий сертификат, но это следует делать только для тестовых кластеров, а не в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="6dc28-166">You can use a self-signed certificate, but should only do so for test clusters and not in production.</span></span>

<span data-ttu-id="6dc28-167">Если кластер hello является безопасным.</span><span class="sxs-lookup"><span data-stu-id="6dc28-167">If hello cluster is unsecure.</span></span> <span data-ttu-id="6dc28-168">Любой пользователь может анонимно подключиться и выполнять операции управления, поэтому рабочие кластеры нужно обязательно защищать с помощью сертификатов X.509 или средств обеспечения безопасности Windows.</span><span class="sxs-lookup"><span data-stu-id="6dc28-168">Anyone can connect anonymously and perform management operations, so production clusters should always be secured using X.509 certificates or Windows security.</span></span>

<span data-ttu-id="6dc28-169">более tooenable сертификаты из кластера service fabric. в статье, toolearn [добавлять и удалять сертификаты для кластера service fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure).</span><span class="sxs-lookup"><span data-stu-id="6dc28-169">toolearn more how tooenable certificates in service fabric cluster see, [add or remove certificates for a service fabric cluster](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure).</span></span>

## <a name="configure-security-policies"></a><span data-ttu-id="6dc28-170">Настройка политик безопасности.</span><span class="sxs-lookup"><span data-stu-id="6dc28-170">Configure security policies</span></span>
<span data-ttu-id="6dc28-171">Service Fabric также помогает безопасного hello ресурсы, используемые приложениями во время hello развертывания под учетными записями пользователей hello — например, файлы, каталоги и сертификаты.</span><span class="sxs-lookup"><span data-stu-id="6dc28-171">Service Fabric also helps secure hello resources that are used by applications at hello time of deployment under hello user accounts--for example, files, directories, and certificates.</span></span> <span data-ttu-id="6dc28-172">Это позволяет изолировать друг от друга выполняемые приложения, даже если они запущены в общей среде.</span><span class="sxs-lookup"><span data-stu-id="6dc28-172">This makes running applications, even in a shared hosted environment, more secure from one another.</span></span>

-   <span data-ttu-id="6dc28-173">Использовать группу домена Active Directory или пользователя: можно запустить службу hello hello учетными данными для учетной записи пользователя или группы Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6dc28-173">Use an Active Directory domain group or user: You can run hello service under hello credentials for an Active Directory user or group account.</span></span> <span data-ttu-id="6dc28-174">Речь идет о локальной службе Active Directory в домене, а не Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="6dc28-174">This is Active Directory on-premises within your domain and is not with Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="6dc28-175">С помощью пользователя домена или группы, затем доступны другие ресурсы hello домена (например, общие файловые ресурсы), которые были предоставлены разрешения.</span><span class="sxs-lookup"><span data-stu-id="6dc28-175">By using a domain user or group, you can then access other resources in hello domain (for example, file shares) that have been granted permissions.</span></span>

-   <span data-ttu-id="6dc28-176">Назначение политики безопасности доступа для конечных точек HTTP и HTTPS: Если применяются политики tooa запуска от имени службы и манифест службы hello объявляет ресурсы конечной точки с протоколом hello HTTP, необходимо указать tooensure SecurityAccessPolicy, что порты выделение toothese конечные точки являются правильно-контроль доступа для учетной записи пользователя запуска от имени которой выполняется служба hello hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-176">Assign a security access policy for HTTP and HTTPS endpoints: If you apply a RunAs policy tooa service and hello service manifest declares endpoint resources with hello HTTP protocol, you must specify a SecurityAccessPolicy tooensure that ports allocated toothese endpoints are correctly access-controlled listed for hello RunAs user account that hello service runs under.</span></span> <span data-ttu-id="6dc28-177">В противном случае http.sys не имеет доступа к toohello службы и получить сбоев с вызовов от клиента hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-177">Otherwise, http.sys does not have access toohello service, and you get failures with calls from hello client.</span></span>
<span data-ttu-id="6dc28-178">toolearn более включить политики безопасности см. в разделе структуры службы, [Настройка политик безопасности для приложения](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-runas-security).</span><span class="sxs-lookup"><span data-stu-id="6dc28-178">toolearn more enable security policies in service fabric see, [configure security policies for your application](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-runas-security).</span></span>

## <a name="reliable-actors-security-configuration"></a><span data-ttu-id="6dc28-179">Настройка безопасности с помощью Reliable Actors.</span><span class="sxs-lookup"><span data-stu-id="6dc28-179">Reliable Actors security configuration</span></span>
<span data-ttu-id="6dc28-180">Служба структуры службы Reliable Actor представляет собой реализацию hello субъекта конструктивного шаблона.</span><span class="sxs-lookup"><span data-stu-id="6dc28-180">Service Fabric Reliable Actors is an implementation of hello actor design pattern.</span></span> <span data-ttu-id="6dc28-181">Как и любой шаблон разработки программного обеспечения, решение hello ли toouse шаблону выполняется с учетом ли программного обеспечения проектирования проблема помещается шаблон hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-181">As with any software design pattern, hello decision whether toouse a specific pattern is made based on whether or not a software design problem fits hello pattern.</span></span>

<span data-ttu-id="6dc28-182">Как общие рекомендации рекомендуется использовать шаблон toomodel hello субъекта вашей проблемы или сценарии если.</span><span class="sxs-lookup"><span data-stu-id="6dc28-182">As general guidance, consider hello actor pattern toomodel your problem or scenario if:</span></span>
-   <span data-ttu-id="6dc28-183">Проблемное пространство включает множество (тысячи и больше) небольших независимых и изолированных единиц состояния и логики.</span><span class="sxs-lookup"><span data-stu-id="6dc28-183">Your problem space involves a large number (thousands or more) of small, independent, and isolated units of state and logic.</span></span>
-   <span data-ttu-id="6dc28-184">Вы хотите toowork с одним потоком объектами, не требующие значительных взаимодействия с внешними компонентами, включая запросы состояния между несколькими субъектами.</span><span class="sxs-lookup"><span data-stu-id="6dc28-184">You want toowork with single-threaded objects that do not require significant interaction from external components, including querying state across a set of actors.</span></span>
-   <span data-ttu-id="6dc28-185">Экземпляры субъекта не должны блокировать вызывающие объекты с непредсказуемыми задержками, выполняя операции ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="6dc28-185">Your actor instances won't block callers with unpredictable delays by issuing I/O operations.</span></span>

<span data-ttu-id="6dc28-186">В Service Fabric субъекты реализуются в framework службы Reliable Actor hello: построены на основе субъекта шаблон на основе исполняющую среду [надежного служб Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction).</span><span class="sxs-lookup"><span data-stu-id="6dc28-186">In Service Fabric, actors are implemented in hello Reliable Actors framework: An actor-pattern-based application framework built on top of [Service Fabric Reliable Services](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction).</span></span> <span data-ttu-id="6dc28-187">Каждая написанный вами субъект Reliable Actor фактически представляет собой секционированную надежную службу Reliable Service с отслеживанием состояния.</span><span class="sxs-lookup"><span data-stu-id="6dc28-187">Each Reliable Actor service you write is actually a partitioned, stateful Reliable Service.</span></span>
<span data-ttu-id="6dc28-188">Каждый субъект определяется как экземпляр типа субъекта, идентичные toohello как объект .NET является экземпляром типа .NET.</span><span class="sxs-lookup"><span data-stu-id="6dc28-188">Every actor is defined as an instance of an actor type, identical toohello way a .NET object is an instance of a .NET type.</span></span> <span data-ttu-id="6dc28-189">Например может быть тип субъекта, который реализует функциональность hello калькулятора, и может быть много агентам этого типа, распределенных в различных узлах в кластере.</span><span class="sxs-lookup"><span data-stu-id="6dc28-189">For example, there may be an actor type that implements hello functionality of a calculator and there could be many actors of that type that are distributed on various nodes across a cluster.</span></span> <span data-ttu-id="6dc28-190">У каждого такого субъекта есть уникальный идентификатор.</span><span class="sxs-lookup"><span data-stu-id="6dc28-190">Each such actor is uniquely identified by an actor ID.</span></span>

<span data-ttu-id="6dc28-191">[Конфигурации безопасности репликации](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-kvsactorstateprovider-configuration) , используемые toosecure hello коммуникационный канал, используемый во время репликации.</span><span class="sxs-lookup"><span data-stu-id="6dc28-191">[Replicator security configurations](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-kvsactorstateprovider-configuration) are used toosecure hello communication channel that is used during replication.</span></span> <span data-ttu-id="6dc28-192">Это означает, что службы не может видеть друг друга трафик репликации, обеспечивая также безопасные данные hello, это обеспечит высокую доступность.</span><span class="sxs-lookup"><span data-stu-id="6dc28-192">This means that services cannot see each other's replication traffic, ensuring that hello data that is made highly available is also secure.</span></span> <span data-ttu-id="6dc28-193">По умолчанию пустой раздел конфигурации безопасности означает, что канал репликации не защищен.</span><span class="sxs-lookup"><span data-stu-id="6dc28-193">By default, an empty security configuration section prevents replication security.</span></span>
<span data-ttu-id="6dc28-194">Конфигурации репликации настроить hello репликации, который отвечает за установку состояния поставщик состояния субъекта hello высокую степень доступности.</span><span class="sxs-lookup"><span data-stu-id="6dc28-194">Replicator configurations configure hello replicator that is responsible for making hello Actor State Provider state highly reliable.</span></span>

## <a name="configure-ssl-for-azure-service-fabric"></a><span data-ttu-id="6dc28-195">Настройка SSL для Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="6dc28-195">Configure SSL for Azure Service Fabric</span></span>

<span data-ttu-id="6dc28-196">Проверка подлинности сервера: [проверка подлинности](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) hello кластера управления конечными точками tooa управления клиента, чтобы hello управления клиент узнает, осуществляет обмен данными toohello реальные кластера.</span><span class="sxs-lookup"><span data-stu-id="6dc28-196">Server authentication: [Authenticates](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) hello cluster management endpoints tooa management client, so that hello management client knows it is talking toohello real cluster.</span></span> <span data-ttu-id="6dc28-197">Этот сертификат также обеспечивает [SSL](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-cluster-creation-via-arm) для hello API управления HTTPS и обозреватель Service Fabric по протоколу HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6dc28-197">This certificate also provides an [SSL](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-cluster-creation-via-arm) for hello HTTPS management API and for Service Fabric Explorer over HTTPS.</span></span>
<span data-ttu-id="6dc28-198">Необходимо получить имя личного домена для кластера.</span><span class="sxs-lookup"><span data-stu-id="6dc28-198">You must obtain a custom domain name for your cluster.</span></span> <span data-ttu-id="6dc28-199">При запросить сертификат от центра сертификации, hello имя субъекта сертификата должно соответствовать hello собственное доменное имя для вашего кластера.</span><span class="sxs-lookup"><span data-stu-id="6dc28-199">When you request a certificate from a CA, hello certificate's subject name must match hello custom domain name that you use for your cluster.</span></span>

<span data-ttu-id="6dc28-200">tooconfigure SSL для приложения, необходимо сначала tooget SSL-сертификат, подписанный по сертификации (ЦС), доверенным сторонним, выдающий сертификаты для этой цели.</span><span class="sxs-lookup"><span data-stu-id="6dc28-200">tooconfigure SSL for an application, you first need tooget an SSL certificate that has been signed by a Certificate Authority (CA), a trusted third party who issues certificates for this purpose.</span></span> <span data-ttu-id="6dc28-201">Если вы не сделали этого, необходимо один tooobtain компания продает SSL-сертификаты.</span><span class="sxs-lookup"><span data-stu-id="6dc28-201">If you do not already have one, you need tooobtain one from a company that sells SSL certificates.</span></span>

<span data-ttu-id="6dc28-202">Hello сертификат должен удовлетворять hello следующие требования к SSL-сертификаты в Azure.</span><span class="sxs-lookup"><span data-stu-id="6dc28-202">hello certificate must meet hello following requirements for SSL certificates in Azure:</span></span>
-   <span data-ttu-id="6dc28-203">Hello сертификат должен содержать закрытый ключ.</span><span class="sxs-lookup"><span data-stu-id="6dc28-203">hello certificate must contain a private key.</span></span>
-   <span data-ttu-id="6dc28-204">необходимо создать сертификат Hello для обмена ключами, tooa экспортируемый файл обмена личной информацией (PFX-файл).</span><span class="sxs-lookup"><span data-stu-id="6dc28-204">hello certificate must be created for key exchange, exportable tooa Personal Information Exchange (.pfx) file.</span></span>
-   <span data-ttu-id="6dc28-205">Hello имя субъекта сертификата должно соответствовать hello домен, используемый tooaccess hello облачной службы.</span><span class="sxs-lookup"><span data-stu-id="6dc28-205">hello certificate's subject name must match hello domain used tooaccess hello cloud service.</span></span> <span data-ttu-id="6dc28-206">Не удается получить SSL-сертификат из сертификата центром сертификации (ЦС) для домена cloudapp.net hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-206">You cannot obtain an SSL certificate from a certificate authority (CA) for hello cloudapp.net domain.</span></span> <span data-ttu-id="6dc28-207">Для этого нужно получить имя пользовательского домена toouse при обращении к службе.</span><span class="sxs-lookup"><span data-stu-id="6dc28-207">You must acquire a custom domain name toouse when access your service.</span></span> <span data-ttu-id="6dc28-208">Когда вы запрашиваете сертификат из центра сертификации, имя субъекта сертификата hello должно соответствовать hello доменное имя, используемое tooaccess приложения.</span><span class="sxs-lookup"><span data-stu-id="6dc28-208">When you request a certificate from a CA, hello certificate's subject name must match hello custom domain name used tooaccess your application.</span></span> <span data-ttu-id="6dc28-209">Например, если вы используете домен contoso.com, необходимо запросить сертификат из центра сертификации для **.contoso.com** или **www.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="6dc28-209">For example, if your custom domain name is contoso.com you would request a certificate from your CA for **.contoso.com** or **www.contoso.com.**</span></span>
-   <span data-ttu-id="6dc28-210">Hello сертификата необходимо использовать не менее 2048-битное шифрование.</span><span class="sxs-lookup"><span data-stu-id="6dc28-210">hello certificate must use a minimum of 2048-bit encryption.</span></span>

<span data-ttu-id="6dc28-211">HTTP не защищен и является субъекта tooeavesdropping атак, поскольку hello данных, передаваемых с hello веб браузера toohello веб-сервера или между другими конечными точками, передается в виде обычного текста.</span><span class="sxs-lookup"><span data-stu-id="6dc28-211">HTTP is insecure and is subject tooeavesdropping attacks because hello data being transferred from hello web browser toohello web server or between other endpoints, is transmitted in plaintext.</span></span> <span data-ttu-id="6dc28-212">Это означает, что злоумышленники могут перехватывать и просматривать конфиденциальные данные, такие как сведения о кредитной карте и учетных данных.</span><span class="sxs-lookup"><span data-stu-id="6dc28-212">This means attackers can intercept and view sensitive data, such as credit card details and account logins.</span></span> <span data-ttu-id="6dc28-213">При отправке или публикации данных с помощью браузера по протоколу HTTPS SSL обеспечивает шифрование таких сведений и их защиту от перехвата.</span><span class="sxs-lookup"><span data-stu-id="6dc28-213">When data is sent or posted through a browser using HTTPS, SSL ensures that such information is encrypted and secure from interception.</span></span>

<span data-ttu-id="6dc28-214">toolearn более, просмотра, [Настройка SSL для приложения azure](https://docs.microsoft.com/azure/cloud-services/cloud-services-configure-ssl-certificate).</span><span class="sxs-lookup"><span data-stu-id="6dc28-214">toolearn more, see, [Configure SSL for azure application](https://docs.microsoft.com/azure/cloud-services/cloud-services-configure-ssl-certificate).</span></span>

## <a name="network-isolationsecurity-with-azure-service-fabric"></a><span data-ttu-id="6dc28-215">Обеспечение сетевой изоляции и безопасности с помощью Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="6dc28-215">Network Isolation/Security with Azure Service Fabric</span></span>
<span data-ttu-id="6dc28-216">Используйте [шаблона диспетчера ресурсов Azure (ARM)](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-authoring-templates) как образец для настройки трех nodetype безопасного кластера и toocontrol hello входящий и исходящий сетевой трафик, использование групп безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="6dc28-216">Use [Azure Resource Manager (ARM) template](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-authoring-templates) as a sample for setting up a three nodetype secure cluster and toocontrol hello inbound and outbound network traffic using Network Security Groups.</span></span>

<span data-ttu-id="6dc28-217">шаблон Hello имеет группы безопасности сети для каждого hello шкалы set(VMSS) toocontrol hello весь трафик виртуальных машин и из него hello VMSS.</span><span class="sxs-lookup"><span data-stu-id="6dc28-217">hello template has a Network Security Group for each of hello virtual machine scale set(VMSS) toocontrol hello traffic in and out of hello VMSS.</span></span> <span data-ttu-id="6dc28-218">По умолчанию правила hello настраиваются tooallow все hello трафика, необходимого hello системы hello и службы приложения портов, указанных в шаблоне hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-218">As a default, hello rules are set up tooallow all hello traffic needed by hello system services and hello application ports specified in hello template.</span></span> <span data-ttu-id="6dc28-219">Просмотрите эти правила и внести изменения toofit вашим потребностям, включая добавление новых записей для ваших приложений.</span><span class="sxs-lookup"><span data-stu-id="6dc28-219">Review those rules and make changes toofit your needs, including add any new ones for your applications.</span></span>

<span data-ttu-id="6dc28-220">Дополнительные сведения см. в статье [Схемы сетевых подключений Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-patterns-networking).</span><span class="sxs-lookup"><span data-stu-id="6dc28-220">For more information, see [Azure Service Fabric – Common Networking Scenarios](https://docs.microsoft.com/azure/service-fabric/service-fabric-patterns-networking).</span></span>

## <a name="set-up-a-key-vault-for-security"></a><span data-ttu-id="6dc28-221">Настройка хранилища ключей для обеспечения безопасности.</span><span class="sxs-lookup"><span data-stu-id="6dc28-221">Set up a key vault for security</span></span>
<span data-ttu-id="6dc28-222">Сертификаты используются в Service Fabric tooprovide проверки подлинности и шифрования toosecure различные аспекты кластера и его применения.</span><span class="sxs-lookup"><span data-stu-id="6dc28-222">Certificates are used in Service Fabric tooprovide authentication and encryption toosecure various aspects of a cluster and its applications.</span></span>

<span data-ttu-id="6dc28-223">Service Fabric использует сертификаты X.509 toosecure кластера и обеспечивает функции безопасности приложения.</span><span class="sxs-lookup"><span data-stu-id="6dc28-223">Service Fabric uses X.509 certificates toosecure a cluster and provide application security features.</span></span> <span data-ttu-id="6dc28-224">Использовать хранилище ключей слишком[Управление сертификатами](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure) для кластеров Service Fabric в Azure.</span><span class="sxs-lookup"><span data-stu-id="6dc28-224">You use Key Vault too[manage certificates](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure) for Service Fabric clusters in Azure.</span></span> <span data-ttu-id="6dc28-225">При развертывании в Azure, hello поставщика ресурсов Azure, который отвечает за создание кластеров Service Fabric извлекает сертификаты из хранилища ключей и устанавливает их на кластере hello виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="6dc28-225">When a cluster is deployed in Azure, hello Azure resource provider that's responsible for creating Service Fabric clusters pulls certificates from Key Vault and installs them on hello cluster VMs.</span></span>

<span data-ttu-id="6dc28-226">Здравствуйте, связь между [хранилище ключей Azure](https://docs.microsoft.com/azure/key-vault/key-vault-secure-your-key-vault), кластера service fabric и hello поставщика ресурсов Azure, которая использует сертификаты, хранящиеся в хранилище ключей при создании кластера.</span><span class="sxs-lookup"><span data-stu-id="6dc28-226">hello relationship between [Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-secure-your-key-vault), a service fabric cluster, and hello Azure resource provider that uses certificates stored in a key vault when it creates a cluster.</span></span>

<span data-ttu-id="6dc28-227">**Создание группы ресурсов** hello первым шагом является toocreate группы ресурсов, в частности для хранилища ключей.</span><span class="sxs-lookup"><span data-stu-id="6dc28-227">**Create a resource group** hello first step is toocreate a resource group specifically for your key vault.</span></span> <span data-ttu-id="6dc28-228">Рекомендуется поместить hello хранилища ключей в отдельной группе ресурсов.</span><span class="sxs-lookup"><span data-stu-id="6dc28-228">We recommend that you put hello key vault into its own resource group.</span></span> <span data-ttu-id="6dc28-229">Это действие позволяет удалить hello вычислений и хранения групп ресурсов, включая hello группы ресурсов, содержащем кластер Service Fabric, без потери ключи и секретные коды.</span><span class="sxs-lookup"><span data-stu-id="6dc28-229">This action lets you remove hello compute and storage resource groups, including hello resource group that contains your Service Fabric cluster, without losing your keys and secrets.</span></span> <span data-ttu-id="6dc28-230">Группа ресурсов Hello, содержащий ваше хранилище ключа должна находиться в hello же регионе, что кластер hello, он используется.</span><span class="sxs-lookup"><span data-stu-id="6dc28-230">hello resource group that contains your key vault must be in hello same region as hello cluster that is using it.</span></span>

<span data-ttu-id="6dc28-231">**Создание хранилища ключей в новую группу ресурсов hello** hello хранилища ключей необходимо включить для развертывания tooallow hello сертификаты tooget поставщика вычислительных ресурсов от него и установить его на экземплярах виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="6dc28-231">**Create a key vault in hello new resource group** hello key vault must be enabled for deployment tooallow hello compute resource provider tooget certificates from it and install it on virtual machine instances.</span></span>
<span data-ttu-id="6dc28-232">более tooset копии хранилища ключей Azure. в статье, toolearn [приступить к работе с хранилищем ключей Azure](https://docs.microsoft.com/azure/key-vault/key-vault-get-started).</span><span class="sxs-lookup"><span data-stu-id="6dc28-232">toolearn more how tooset up Azure key vault see, [Get started with Azure Key Vault](https://docs.microsoft.com/azure/key-vault/key-vault-get-started).</span></span>

## <a name="assign-users-roles"></a><span data-ttu-id="6dc28-233">Назначение ролей пользователей</span><span class="sxs-lookup"><span data-stu-id="6dc28-233">Assign users roles</span></span>
<span data-ttu-id="6dc28-234">После создания toorepresent приложения hello кластера, ролям пользователей toohello поддерживаемые Service Fabric: только для чтения и администрирования. С помощью hello классический портал Azure можно назначить роли hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-234">After you have created hello applications toorepresent your cluster, assign your users toohello roles supported by Service Fabric: read-only and admin. You can assign hello roles by using hello Azure classic portal.</span></span>

>[!Note]
> <span data-ttu-id="6dc28-235">Дополнительные сведения о ролях в Service Fabric см. в статье [Контроль доступа на основе ролей для клиентов Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-roles).</span><span class="sxs-lookup"><span data-stu-id="6dc28-235">For more information about roles in Service Fabric, see [Role-based access control for Service Fabric clients](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-roles).</span></span>

<span data-ttu-id="6dc28-236">Azure Service Fabric поддерживает два типа элемента управления различный уровень доступа для клиентов, подключенных tooa [кластера Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm): администратора и пользователя.</span><span class="sxs-lookup"><span data-stu-id="6dc28-236">Azure Service Fabric supports two different access control types for clients that are connected tooa [Service Fabric cluster](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm): administrator and user.</span></span> <span data-ttu-id="6dc28-237">Контроль доступа позволяет hello кластера администратора toolimit доступа toocertain кластера операции для разных групп пользователей, повышение безопасности кластера hello.</span><span class="sxs-lookup"><span data-stu-id="6dc28-237">Access control allows hello cluster administrator toolimit access toocertain cluster operations for different groups of users, making hello cluster more secure.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6dc28-238">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="6dc28-238">Next steps</span></span>
- <span data-ttu-id="6dc28-239">Настройка [среды разработки](https://docs.microsoft.com/azure/service-fabric/service-fabric-get-started).</span><span class="sxs-lookup"><span data-stu-id="6dc28-239">Setting up your Service Fabric [development environment](https://docs.microsoft.com/azure/service-fabric/service-fabric-get-started).</span></span>
- <span data-ttu-id="6dc28-240">Узнайте о [вариантах поддержки Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-support).</span><span class="sxs-lookup"><span data-stu-id="6dc28-240">Learn about [Service Fabric support options](https://docs.microsoft.com/azure/service-fabric/service-fabric-support).</span></span>

