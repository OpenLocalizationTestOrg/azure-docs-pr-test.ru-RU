---
title: "рекомендации по обеспечению безопасности Service Fabric aaaAzure | Документы Microsoft"
description: "В этой статье представлены рекомендации по безопасности Azure Service Fabric."
services: security
documentationcenter: na
author: unifycloud
manager: swadhwa
editor: tomsh
ms.assetid: 
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/04/2017
ms.author: tomsh
ms.openlocfilehash: 483a21240da17d56bb4641653093ddcbad379d6a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-service-fabric-security-best-practices"></a>Рекомендации по безопасности Azure Service Fabric
Развертывание приложения в Azure — быстрое, удобное и экономичное. Перед развертыванием облачного приложения в полезные toohave производства рекомендуется так сделать, tooassist в оценке приложения со списком важных и рекомендуемых рекомендаций.

Azure Service Fabric — это платформа распределенных систем, который позволяет легко toopackage, развертывания и управления масштабируемыми и надежными микрослужбами. Service Fabric также устраняет hello значительным препятствием для разработки и управления ими облачных приложений. Получая гарантированную масштабируемость, надежность и управляемость, разработчики и администраторы могут сосредоточиться на реализации критически важных и ресурсоемких рабочих нагрузок вместо того, чтобы тратить силы на решение сложных проблем с инфраструктурой. 

Для каждой рекомендации будет предоставлено объяснение следующих аспектов:

-   Какие hello рекомендуется
-   Почему нужно tooenable этой рекомендации
-   Если этого не рекомендуется hello tooenable, что может быть результатом hello
-   Как вы узнаете tooenable hello, рекомендации

В настоящее время у нас есть следующие рекомендации по безопасности Azure Service Fabric hello:

-   Используйте шаблон Manager(ARM) ресурсов Azure и безопасной кластера toocreate модуля PowerShell Azure Service Fabric
-   Использование сертификата X.509.
-   Настройка политик безопасности.
-   Настройка безопасности с помощью Reliable Actors.
-   Настройка SSL для Azure Service Fabric.
-   Обеспечение сетевой изоляции и безопасности с помощью Azure Service Fabric.
-   Настройка хранилища ключей для обеспечения безопасности.
-   Назначить пользователей tooroles


## <a name="best-practices-for-securing-your-cluster"></a>Рекомендации по обеспечению безопасности кластера

**Общая картина**

Всегда используйте безопасный кластер.
-   Безопасность кластера. Используйте сертификаты.
-   Клиентский доступ (для администраторов и только для чтения). Используйте AAD.

Используйте автоматическое развертывание.
-   Использовать toogenerate скрипты, развертывать и, наведите курсор на секретов
-   Хранить секреты hello в Кв, использовать AD для других клиентского доступа
-   Ни один человек должен иметь toothem доступ без проверки подлинности.

Кроме того рассмотрите hello ниже:
-   Создавайте сети периметра с помощью групп безопасности сети.
-   Использовать tooRDP перехода серверы в кластере виртуальных машин или toomanage кластера

Кластеры должны быть защищенным tooprevent несанкционированный пользователями подключение кластера tooyour, особенно в том случае, если он имеет рабочих нагрузок, запущенными на нем. Хотя это возможно toocreate небезопасные кластера, это позволит tooit tooconnect анонимных пользователей, если он предоставляет toohello конечные точки управления общедоступный Интернет.

Используемые технологии tooimplement этих сценариев. Hello [кластера сценарии безопасности](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security) являются:

-   Узел узел безопасности это защищает взаимодействие между hello виртуальных машин и компьютеров в кластере hello. Это гарантирует, что только авторизованные toojoin hello кластера компьютерах могут участвовать в размещения приложений и служб в кластере hello.
Кластеры, работающие в Azure, или автономные кластеры, работающие под управлением Windows, могут использовать [безопасность на основе сертификатов](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security) или [безопасность Windows](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-windows-cluster-windows-security) для компьютеров Windows Server.
-   Узел клиента безопасности это защищает обмен данными между клиентом Service Fabric и отдельные узлы в кластере hello.
-   Управление доступом на основе ролей (RBAC) - указании ролей hello администратора и пользователя клиента во время создания кластера hello, предоставляя удостоверения (сертификаты, AAD и т.д.) для каждого.
-   Рекомендации по обеспечению безопасности-кластеры для Azure, рекомендуется использовать клиенты tooauthenticate AAD безопасности и сертификаты для безопасности узла на узел.

автономный hello tooconfigure кластера Windows. в разделе [Настройка параметров для кластера windows автономный](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-manifest).

Используйте шаблоны Azure Resource Manager и модуля PowerShell Azure Service Fabric toocreate безопасности кластера.
Пошаговое руководство, которое поможет выполнить настройку защищенного кластера Azure Service Fabric в Azure с помощью Azure Resource Manager, доступно [здесь](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm).

Использовать toocustomize шаблона диспетчера ресурсов Azure hello кластера
-   Настройте управляемое хранилище для виртуальных жестких дисков виртуальной машины.

Использование диспетчера ресурсов Azure шаблона hello toodrive изменения tooyour группы ресурсов
-   Простое управление конфигурацией.
-   Аудит

Считайте конфигурацию кластера кодом.
-   Тщательности при проверке конфигурации hello выберите toodeploy
-   Избегайте использования неявного команды tootweak ресурсы непосредственно

Многие аспекты hello [жизненный цикл приложений фабрики служб](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-lifecycle) можно автоматизировать. [Модуль PowerShell Azure для Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-deploy-remove-applications#upload-the-application-package) автоматизирует типовые задачи по развертыванию, обновлению, удалению и тестированию приложений Service Fabric. Также доступны управляемые API и API HTTP для управления приложениями.

## <a name="use-x509-certificates"></a>Использование сертификата X.509.
Кластеры всегда должны быть защищены с помощью сертификатов X.509 или службы безопасности Windows. Во время создания кластера только настройки безопасности и не возможные tooenable безопасности после создания кластера hello.

При указании [кластера сертификат](https://docs.microsoft.com/azure/service-fabric/service-fabric-windows-cluster-x509-security), задайте значение ClusterCredentialType tooX509 hello. При указании сертификата сервера для внешних соединений, задайте hello ServerCredentialType tooX509.

-   Сертификаты, которые используются в кластерах, выполняющих рабочие нагрузки в рабочей среде, следует создать с помощью правильно настроенной службы сертификации Windows Server или получить из утвержденного центра сертификации.
-   Никогда не используйте в рабочей среде какие-либо временные или тестовые сертификаты, созданные с помощью таких инструментов, как MakeCert.exe.
-   Можно использовать самозаверяющий сертификат, но это следует делать только для тестовых кластеров, а не в рабочей среде.

Если кластер hello является безопасным. Любой пользователь может анонимно подключиться и выполнять операции управления, поэтому рабочие кластеры нужно обязательно защищать с помощью сертификатов X.509 или средств обеспечения безопасности Windows.

более tooenable сертификаты из кластера service fabric. в статье, toolearn [добавлять и удалять сертификаты для кластера service fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure).

## <a name="configure-security-policies"></a>Настройка политик безопасности.
Service Fabric также помогает безопасного hello ресурсы, используемые приложениями во время hello развертывания под учетными записями пользователей hello — например, файлы, каталоги и сертификаты. Это позволяет изолировать друг от друга выполняемые приложения, даже если они запущены в общей среде.

-   Использовать группу домена Active Directory или пользователя: можно запустить службу hello hello учетными данными для учетной записи пользователя или группы Active Directory. Речь идет о локальной службе Active Directory в домене, а не Azure Active Directory (Azure AD). С помощью пользователя домена или группы, затем доступны другие ресурсы hello домена (например, общие файловые ресурсы), которые были предоставлены разрешения.

-   Назначение политики безопасности доступа для конечных точек HTTP и HTTPS: Если применяются политики tooa запуска от имени службы и манифест службы hello объявляет ресурсы конечной точки с протоколом hello HTTP, необходимо указать tooensure SecurityAccessPolicy, что порты выделение toothese конечные точки являются правильно-контроль доступа для учетной записи пользователя запуска от имени которой выполняется служба hello hello. В противном случае http.sys не имеет доступа к toohello службы и получить сбоев с вызовов от клиента hello.
toolearn более включить политики безопасности см. в разделе структуры службы, [Настройка политик безопасности для приложения](https://docs.microsoft.com/azure/service-fabric/service-fabric-application-runas-security).

## <a name="reliable-actors-security-configuration"></a>Настройка безопасности с помощью Reliable Actors.
Служба структуры службы Reliable Actor представляет собой реализацию hello субъекта конструктивного шаблона. Как и любой шаблон разработки программного обеспечения, решение hello ли toouse шаблону выполняется с учетом ли программного обеспечения проектирования проблема помещается шаблон hello.

Как общие рекомендации рекомендуется использовать шаблон toomodel hello субъекта вашей проблемы или сценарии если.
-   Проблемное пространство включает множество (тысячи и больше) небольших независимых и изолированных единиц состояния и логики.
-   Вы хотите toowork с одним потоком объектами, не требующие значительных взаимодействия с внешними компонентами, включая запросы состояния между несколькими субъектами.
-   Экземпляры субъекта не должны блокировать вызывающие объекты с непредсказуемыми задержками, выполняя операции ввода-вывода.

В Service Fabric субъекты реализуются в framework службы Reliable Actor hello: построены на основе субъекта шаблон на основе исполняющую среду [надежного служб Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-services-introduction). Каждая написанный вами субъект Reliable Actor фактически представляет собой секционированную надежную службу Reliable Service с отслеживанием состояния.
Каждый субъект определяется как экземпляр типа субъекта, идентичные toohello как объект .NET является экземпляром типа .NET. Например может быть тип субъекта, который реализует функциональность hello калькулятора, и может быть много агентам этого типа, распределенных в различных узлах в кластере. У каждого такого субъекта есть уникальный идентификатор.

[Конфигурации безопасности репликации](https://docs.microsoft.com/azure/service-fabric/service-fabric-reliable-actors-kvsactorstateprovider-configuration) , используемые toosecure hello коммуникационный канал, используемый во время репликации. Это означает, что службы не может видеть друг друга трафик репликации, обеспечивая также безопасные данные hello, это обеспечит высокую доступность. По умолчанию пустой раздел конфигурации безопасности означает, что канал репликации не защищен.
Конфигурации репликации настроить hello репликации, который отвечает за установку состояния поставщик состояния субъекта hello высокую степень доступности.

## <a name="configure-ssl-for-azure-service-fabric"></a>Настройка SSL для Azure Service Fabric.

Проверка подлинности сервера: [проверка подлинности](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm) hello кластера управления конечными точками tooa управления клиента, чтобы hello управления клиент узнает, осуществляет обмен данными toohello реальные кластера. Этот сертификат также обеспечивает [SSL](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-cluster-creation-via-arm) для hello API управления HTTPS и обозреватель Service Fabric по протоколу HTTPS.
Необходимо получить имя личного домена для кластера. При запросить сертификат от центра сертификации, hello имя субъекта сертификата должно соответствовать hello собственное доменное имя для вашего кластера.

tooconfigure SSL для приложения, необходимо сначала tooget SSL-сертификат, подписанный по сертификации (ЦС), доверенным сторонним, выдающий сертификаты для этой цели. Если вы не сделали этого, необходимо один tooobtain компания продает SSL-сертификаты.

Hello сертификат должен удовлетворять hello следующие требования к SSL-сертификаты в Azure.
-   Hello сертификат должен содержать закрытый ключ.
-   необходимо создать сертификат Hello для обмена ключами, tooa экспортируемый файл обмена личной информацией (PFX-файл).
-   Hello имя субъекта сертификата должно соответствовать hello домен, используемый tooaccess hello облачной службы. Не удается получить SSL-сертификат из сертификата центром сертификации (ЦС) для домена cloudapp.net hello. Для этого нужно получить имя пользовательского домена toouse при обращении к службе. Когда вы запрашиваете сертификат из центра сертификации, имя субъекта сертификата hello должно соответствовать hello доменное имя, используемое tooaccess приложения. Например, если вы используете домен contoso.com, необходимо запросить сертификат из центра сертификации для **.contoso.com** или **www.contoso.com**.
-   Hello сертификата необходимо использовать не менее 2048-битное шифрование.

HTTP не защищен и является субъекта tooeavesdropping атак, поскольку hello данных, передаваемых с hello веб браузера toohello веб-сервера или между другими конечными точками, передается в виде обычного текста. Это означает, что злоумышленники могут перехватывать и просматривать конфиденциальные данные, такие как сведения о кредитной карте и учетных данных. При отправке или публикации данных с помощью браузера по протоколу HTTPS SSL обеспечивает шифрование таких сведений и их защиту от перехвата.

toolearn более, просмотра, [Настройка SSL для приложения azure](https://docs.microsoft.com/azure/cloud-services/cloud-services-configure-ssl-certificate).

## <a name="network-isolationsecurity-with-azure-service-fabric"></a>Обеспечение сетевой изоляции и безопасности с помощью Azure Service Fabric.
Используйте [шаблона диспетчера ресурсов Azure (ARM)](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-authoring-templates) как образец для настройки трех nodetype безопасного кластера и toocontrol hello входящий и исходящий сетевой трафик, использование групп безопасности сети.

шаблон Hello имеет группы безопасности сети для каждого hello шкалы set(VMSS) toocontrol hello весь трафик виртуальных машин и из него hello VMSS. По умолчанию правила hello настраиваются tooallow все hello трафика, необходимого hello системы hello и службы приложения портов, указанных в шаблоне hello. Просмотрите эти правила и внести изменения toofit вашим потребностям, включая добавление новых записей для ваших приложений.

Дополнительные сведения см. в статье [Схемы сетевых подключений Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-patterns-networking).

## <a name="set-up-a-key-vault-for-security"></a>Настройка хранилища ключей для обеспечения безопасности.
Сертификаты используются в Service Fabric tooprovide проверки подлинности и шифрования toosecure различные аспекты кластера и его применения.

Service Fabric использует сертификаты X.509 toosecure кластера и обеспечивает функции безопасности приложения. Использовать хранилище ключей слишком[Управление сертификатами](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-update-certs-azure) для кластеров Service Fabric в Azure. При развертывании в Azure, hello поставщика ресурсов Azure, который отвечает за создание кластеров Service Fabric извлекает сертификаты из хранилища ключей и устанавливает их на кластере hello виртуальных машин.

Здравствуйте, связь между [хранилище ключей Azure](https://docs.microsoft.com/azure/key-vault/key-vault-secure-your-key-vault), кластера service fabric и hello поставщика ресурсов Azure, которая использует сертификаты, хранящиеся в хранилище ключей при создании кластера.

**Создание группы ресурсов** hello первым шагом является toocreate группы ресурсов, в частности для хранилища ключей. Рекомендуется поместить hello хранилища ключей в отдельной группе ресурсов. Это действие позволяет удалить hello вычислений и хранения групп ресурсов, включая hello группы ресурсов, содержащем кластер Service Fabric, без потери ключи и секретные коды. Группа ресурсов Hello, содержащий ваше хранилище ключа должна находиться в hello же регионе, что кластер hello, он используется.

**Создание хранилища ключей в новую группу ресурсов hello** hello хранилища ключей необходимо включить для развертывания tooallow hello сертификаты tooget поставщика вычислительных ресурсов от него и установить его на экземплярах виртуальной машины.
более tooset копии хранилища ключей Azure. в статье, toolearn [приступить к работе с хранилищем ключей Azure](https://docs.microsoft.com/azure/key-vault/key-vault-get-started).

## <a name="assign-users-roles"></a>Назначение ролей пользователей
После создания toorepresent приложения hello кластера, ролям пользователей toohello поддерживаемые Service Fabric: только для чтения и администрирования. С помощью hello классический портал Azure можно назначить роли hello.

>[!Note]
> Дополнительные сведения о ролях в Service Fabric см. в статье [Контроль доступа на основе ролей для клиентов Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-security-roles).

Azure Service Fabric поддерживает два типа элемента управления различный уровень доступа для клиентов, подключенных tooa [кластера Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-cluster-creation-via-arm): администратора и пользователя. Контроль доступа позволяет hello кластера администратора toolimit доступа toocertain кластера операции для разных групп пользователей, повышение безопасности кластера hello.

## <a name="next-steps"></a>Дальнейшие действия
- Настройка [среды разработки](https://docs.microsoft.com/azure/service-fabric/service-fabric-get-started).
- Узнайте о [вариантах поддержки Service Fabric](https://docs.microsoft.com/azure/service-fabric/service-fabric-support).

