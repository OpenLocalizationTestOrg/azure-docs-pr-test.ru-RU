---
title: "Рекомендации по защите и шифрованию данных | Документация Майкрософт"
description: "В этой статье представлены рекомендации по обеспечению защиты и шифрования данных с помощью встроенных средств Azure."
services: security
documentationcenter: na
author: YuriDio
manager: swadhwa
editor: TomSh
ms.assetid: 17ba67ad-e5cd-4a8f-b435-5218df753ca4
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 01/09/2017
ms.author: yurid
ms.openlocfilehash: 81136e53756adfdba2f07c103b042499fe2967db
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="azure-data-security-and-encryption-best-practices"></a>Рекомендации по защите и шифрованию данных в Azure
Один из основных способов защиты данных в облаке — учет всех возможных состояний, в которых могут находиться данные, а также всех методов управления для каждого из этих состояний. Рекомендации по защите и шифрованию данных в Azure предусматривают учет следующих состояний данных.

* Хранимые: сюда относятся все объекты, контейнеры и типы хранения информации, которые существуют на физическом носителе в конкретном месте, например на магнитном или оптическом диске.
* В пути: данные, передаваемые между компонентами, расположениями или программами, например по сети, по служебной шине (из локальной сети в облако или наоборот, в том числе с использованием гибридных подключений, например ExpressRoute), а также в процессе ввода-вывода, то есть при любом перемещении.

В этой статье мы рассмотрим набор рекомендаций по защите и шифрованию данных в Azure. В основе рекомендаций лежит наш опыт в области защиты и шифрования данных в Azure, а также отзывы клиентов.

Для каждой рекомендации будет предоставлено объяснение следующих аспектов:

* суть рекомендации;
* почему необходимо применять эту рекомендацию;
* что может случиться, если не применить эту рекомендацию;
* возможные альтернативы рекомендации;
* как научиться применять эту рекомендацию.

В этой статье приведены общепринятые практики защиты и шифрования данных в Azure, а также описаны возможности и компоненты платформы Azure, по состоянию на момент написания статьи. Со временем мнения и технологии меняются. Поэтому эта статья будет постоянно обновляться, чтобы отражать эти изменения.

Будут рассмотрены следующие рекомендации по защите и шифрованию данных в Azure:

* применение Multi-Factor Authentication;
* контроль доступа на основе ролей (RBAC);
* шифрование виртуальных машин Azure;
* использование аппаратных моделей безопасности;
* безопасное управление рабочими станциями;
* шифрование данных SQL;
* защита данных при передаче;
* применение шифрования данных на уровне файлов.

## <a name="enforce-multi-factor-authentication"></a>Применение Multi-Factor Authentication
Проверка подлинности пользователя — это первый шаг при предоставлении доступа к данным и управлении ими в Microsoft Azure. [Многофакторная идентификация Azure (MFA)](../multi-factor-authentication/multi-factor-authentication.md) — это метод идентификации пользователя с использованием дополнительных средств, помимо имени пользователя и пароля. Этот метод помогает защитить доступ к данным и приложениям, не усложняя процесс входа пользователя в систему.

Включив для своих пользователей Azure MFA, вы добавите второй уровень защиты для входа в систему и транзакций. Например, транзакция может обращаться к документу, размещенному на файловом сервере или в SharePoint Online. Azure MFA также минимизирует риск того, что посторонние лица смогут получить доступ к данным с использованием скомпрометированных учетных данных.

Например, если вы примените Azure MFA и настроите проверку по телефонному звонку или текстовому сообщению, злоумышленник не сможет получить доступ к ресурсам с использованием скомпрометированных учетных данных, так как у него нет доступа к телефону пользователя. Организации, не использующие этот дополнительный уровень защиты, более уязвимы для атак путем кражи учетных данных, что может привести к компрометации данных.

Для тех организаций, которые предпочитают управлять аутентификацией только локально, мы можем предложить [сервер Многофакторной идентификации Azure](../multi-factor-authentication/multi-factor-authentication-get-started-server.md), известный также как локальное средство MFA. Этот метод позволит вам применить MFA, используя при этом локальный сервер MFA.

Дополнительные сведения об Azure MFA см. в статье [Приступая к работе с Azure Multi-Factor Authentication в облаке](../multi-factor-authentication/multi-factor-authentication-get-started-cloud.md).

## <a name="use-role-based-access-control-rbac"></a>Контроль доступа на основе ролей (RBAC)
Доступ следует ограничивать с учетом возможности использования [необходимой информации](https://en.wikipedia.org/wiki/Need_to_know) и [минимальных полномочий](https://en.wikipedia.org/wiki/Principle_of_least_privilege). Это крайне важно для организаций, которые планируют применять политики безопасности для доступа к данным. Контроль доступа на основе ролей Azure (RBAC) может использоваться для назначения пользователям, группам и приложениям разрешений, действующих в рамках определенной области. Областью назначения роли может быть подписка, группа ресурсов или отдельный ресурс.

Вы можете назначать пользователям привилегии с помощью [встроенных ролей RBAC](../active-directory/role-based-access-built-in-roles.md) в Azure. Для облачных операторов, которым нужно управлять учетными записями хранения, мы рекомендуем роль *Участник учетной записи хранения*, а для управления классическими учетными записями хранения — *Участник классической учетной записи хранения*. Облачным операторам, которым нужно управлять виртуальными машинами и учетной записью хранения, мы предлагаем назначать роль *Участник виртуальной машины*.

Если организация не применяет для управления доступом к данным такие возможности, как RBAC, пользователям будет предоставлено больше полномочий, чем необходимо для выполнения назначенных им задач. Это может привести к компрометации данных, так как пользователи смогут получить доступ к таким данным, которые не должны быть им доступны.

Дополнительные сведения об RBAC в Azure см. в статье [Управление доступом на основе ролей в Azure](../active-directory/role-based-access-control-configure.md).

## <a name="encrypt-azure-virtual-machines"></a>Шифрование виртуальных машин Azure
Для многих организаций [шифрование неактивных данных](https://blogs.microsoft.com/cybertrust/2015/09/10/cloud-security-controls-series-encrypting-data-at-rest/) является обязательным шагом для защиты данных, соблюдения стандартов и обеспечения конфиденциальности данных. Шифрование дисков Azure позволяет ИТ-администраторам шифровать диски виртуальных машин IaaS под управлением Windows и Linux. Для этого в Azure используются стандартные для отрасли функции (BitLocker для Windows и DM-Crypt для Linux), которые обеспечивают шифрование томов системных дисков и дисков данных.

Шифрование диска Azure можно использовать для защиты данных в соответствии с применяемыми требованиями к безопасности и стандартами. Также с помощью шифрования организации могут снизить риски, связанные с неавторизованным доступом к данным. Мы рекомендуем зашифровывать диски, прежде чем записывать на них конфиденциальные данные.

Обязательно зашифруйте свои тома с данными виртуальных машин и загрузочные тома, чтобы защитить хранимые данные в учетной записи хранения Azure. Защита ключей шифрования и секретов с помощью [хранилища ключей Azure](../key-vault/key-vault-whatis.md).

Для локальных серверов Windows есть следующие рекомендации по шифрованию.

* Использование [BitLocker](https://technet.microsoft.com/library/dn306081.aspx) для шифрования данных
* Храните сведения о восстановлении в службе AD DS.
* Если вы подозреваете, что ключи BitLocker скомпрометированы, следует полностью отформатировать диск, чтобы удалить с него все экземпляры метаданных BitLocker, либо дешифровать и затем снова зашифровать весь диск.

Если организация не применяет шифрование данных, повышается уязвимость к утрате целостности данных, например к краже информации злоумышленниками или недобросовестными пользователями, а также к получению доступа к незашифрованным данным неуполномоченными лицами с использованием скомпрометированных учетных данных. Помимо снижения этих рисков, шифрование позволяет компаниям соблюдать отраслевые стандарты, используя надлежащие средства защиты данных.

Дополнительные сведения о шифровании дисков Azure см. в статье [Дисковое шифрование Azure для виртуальных машин IaaS под управлением Windows и Linux](azure-security-disk-encryption.md).

## <a name="use-hardware-security-modules"></a>Использование аппаратных моделей безопасности
В стандартных решениях для шифрования данных используются секретные ключи. Следовательно, важно, чтобы такие ключи надежно хранились. Управление ключами — неотъемлемая часть стратегии защиты данных, так как оно применяется для хранения секретных ключей, используемых для шифрования данных.

При шифровании дисков Azure используется [хранилище ключей Azure](https://azure.microsoft.com/services/key-vault/). Благодаря этому вы можете управлять ключами и секретами шифрования дисков в рамках подписки на хранилище ключей. Шифрование выполняется для всех неактивных данных на дисках виртуальных машин в службе хранилища Azure. Хранилище ключей Azure следует использовать для аудита ключей и использования политик.

С отсутствием подходящих средств защиты секретных ключей, которые используются для шифрования данных, связано много рисков. Если злоумышленники получат доступ к секретным ключам, они смогут расшифровать данные и получить доступ к конфиденциальной информации.

Общие рекомендации по управлению сертификатами в Azure см. в публикации блога [Certificate Management in Azure: Do’s and Don’ts](https://blogs.msdn.microsoft.com/azuresecurity/2015/07/13/certificate-management-in-azure-dos-and-donts/) (Управление сертификатами в Azure: рекомендуемые и нерекомендуемые действия).

Дополнительные сведения о хранилище ключей Azure см. в статье [Приступая к работе с хранилищем ключей Azure](../key-vault/key-vault-get-started.md).

## <a name="manage-with-secure-workstations"></a>Безопасное управление рабочими станциями
Так как большая часть атак направлена на пользователя, одной из основных целей атакующих становится конечная точка. Если злоумышленник скомпрометирует конечную точку, он сможет использовать учетные данные пользователя для доступа к данным организации. Большинство атак на конечные точки происходит с учетом того, что пользователи являются администраторами на своих локальных рабочих станциях.

Эти риски можно уменьшить с помощью безопасного управления рабочей станцией. Мы рекомендуем использовать [рабочие станции с привилегированным доступом](https://technet.microsoft.com/library/mt634654.aspx) для снижения уязвимости рабочих станций к атакам. Этот метод безопасного управления рабочими станциями поможет избежать некоторых типов атак, тем самым повышая безопасность данных. Обязательно используйте рабочие станции с привилегированным доступом для усиления защиты и блокировки рабочей станции. Это важно для обеспечения безопасности критически важных учетных записей, задач и данных.

Отсутствие защиты конечной точки может поставить данные под угрозу. Обязательно применяйте политики безопасности на всех устройствах, которые используются для получения данных, независимо от расположения этих данных (локально или в облаке).

Чтобы узнать больше о рабочих станциях с привилегированным доступом, прочитайте статью [Защита привилегированного доступа](https://technet.microsoft.com/library/mt631194.aspx).

## <a name="enable-sql-data-encryption"></a>Шифрование данных SQL
[Прозрачное шифрование данных в Базе данных SQL Azure](https://msdn.microsoft.com/library/dn948096.aspx) помогает защититься от вредоносных действий. В реальном времени выполняется шифрование и расшифровка хранимых баз данных, связанных резервных копий и файлов журналов транзакций; при этом само приложение изменять не нужно.  При использовании TDE хранилище всей базы данных шифруется с помощью симметричного ключа, который называется ключом шифрования базы данных.

Даже если хранилище данных зашифровано, нужно зашифровать и базу данных. Такой подход обеспечивает эшелонированную защиту ваших данных. Если вы используете [Базу данных SQL Azure](https://msdn.microsoft.com/library/0bf7e8ff-1416-4923-9c4c-49341e208c62.aspx) и хотите защитить конфиденциальные данные, например номера кредитных карт или социального страхования, то вы можете использовать для шифрования базы данных 256-разрядное шифрование AES, прошедшее проверку по стандарту FIPS 140-2 и соответствующее требованиям различных отраслевых стандартов (например, HIPAA и PCI).

Важно понимать, что файлы, относящиеся к [расширению буферного пула](https://msdn.microsoft.com/library/dn133176.aspx), не шифруются при использовании прозрачного шифрования базы данных. Для защиты этих файлов следует применить средства шифрования на уровне файловой системы, например BitLocker или [шифрованную файловую систему](https://technet.microsoft.com/library/cc700811.aspx) (EFS).

Поскольку авторизованные пользователи, например администратор службы безопасности или администратор базы данных, имеют доступ к данным даже при использовании прозрачного шифрования, следует соблюдать ряд дополнительных рекомендаций:

* выполнять проверку подлинности SQL на уровне базы данных;
* выполнять проверку подлинности Azure AD с использованием ролей RBAC;
* использовать раздельные учетные записи для проверки подлинности пользователей и приложений (это позволит ограничить разрешения, предоставляемые пользователям и приложениям, и снизить риски вредоносных действий);
* реализовать защиту на уровне базы данных с помощью фиксированных ролей базы данных (например, db_datareader и db_datawriter) или собственных пользовательских ролей для приложения, которые явным образом предоставляют разрешения для определенных объектов базы данных.

Организации, не использующие шифрование на уровне базы данных, могут быть более уязвимы для атак, нацеленных на компрометацию данных в базах данных SQL.

Дополнительные сведения о прозрачном шифровании SQL см. в статье [Прозрачное шифрование данных в Базе данных SQL Azure](https://msdn.microsoft.com/library/0bf7e8ff-1416-4923-9c4c-49341e208c62.aspx).

## <a name="protect-data-in-transit"></a>Защита данных при передаче
Защита данных при передаче обязательно должна быть учтена в стратегии защиты данных. Так как данные будут перемещаться между разными расположениями, мы рекомендуем всегда использовать для обмена данными протоколы SSL/TLS. В некоторых случаях вам потребуется изолировать весь коммуникационный канал между локальной сетью и облачной инфраструктурой, создав виртуальную частную сеть (VPN).

Для перемещения данных между локальной инфраструктурой и Azure следует применять соответствующие меры безопасности, например использовать HTTPS или VPN.

Если организации нужен безопасный доступ к Azure с нескольких рабочих станций в локальной сети, то используйте [VPN-подключение типа "сеть — сеть"](../vpn-gateway/vpn-gateway-site-to-site-create.md).

Если организации нужен безопасный доступ к Azure с одной рабочей станции в локальной сети, то используйте [VPN-подключение типа "точка — сеть"](../vpn-gateway/vpn-gateway-point-to-site-create.md).

Большие наборы данных можно перемещать по выделенному высокоскоростному каналу глобальной сети, например [ExpressRoute](https://azure.microsoft.com/services/expressroute/). Если вы решите использовать ExpressRoute, то для дополнительной защиты можно зашифровать данные на уровне приложения с помощью [SSL/TLS](https://support.microsoft.com/kb/257591) или других протоколов.

Если вы обращаетесь к службе хранилища Azure через портал Azure, все транзакции проходят по протоколу HTTPS. Также для взаимодействия со [службой хранилища Azure](https://azure.microsoft.com/services/storage/) и [Базой данных SQL Azure](https://azure.microsoft.com/services/sql-database/) можно использовать [REST API хранилища](https://msdn.microsoft.com/library/azure/dd179355.aspx) через HTTPS.

Организации, не защищающие передаваемые данные, более уязвимы для [атак типа "злоумышленник в середине"](https://technet.microsoft.com/library/gg195821.aspx), [перехвата данных](https://technet.microsoft.com/library/gg195641.aspx) и перехвата сеанса. Такие атаки могут стать первым шагом в ходе получения доступа к конфиденциальным данным.

Дополнительные сведения о возможностях VPN в Azure см. в статье [Планирование и проектирование VPN-шлюза](../vpn-gateway/vpn-gateway-plan-design.md).

## <a name="enforce-file-level-data-encryption"></a>применение шифрования данных на уровне файлов.
Дополнительную защиту, которая повысит уровень безопасности данных, обеспечит шифрование самого файла, независимо от его расположения.

[Azure RMS](https://technet.microsoft.com/library/jj585026.aspx) использует для защиты файлов и электронной почты шифрование, удостоверения и политики авторизации. Azure RMS работает на различных устройствах — телефонах, планшетных и стационарных ПК, защищая данные как внутри организации, так и за ее пределами. Такие возможности Azure RMS обеспечивает благодаря дополнительному уровню защиты, которая распространяется даже на данные, выходящие за пределы вашей организации.

При использовании Azure RMS для защиты файлов применяется отраслевой стандарт шифрования с полной поддержкой [FIPS 140-2](http://csrc.nist.gov/groups/STM/cmvp/standards.html). Используя Azure RMS для защиты данных, вы обеспечиваете защиту файла даже при его переносе в хранилище, не подконтрольное вашему ИТ-отделу, например в облачную службу хранения. Это же применимо и в отношении файлов, передаваемых по электронной почте. Такой файл защищается как вложение, а к самому письму прилагаются инструкции по его открытию.

Если вы планируете внедрять Azure RMS, мы рекомендуем учитывать следующее:

* Установить [приложение RMS](https://technet.microsoft.com/library/dn339006.aspx). Это приложение интегрируется с приложениями Office, устанавливая надстройку Office, что позволяет пользователям самим защищать файлы.
* Настроить поддержку Azure RMS в приложениях и службах.
* Создать [пользовательские шаблоны](https://technet.microsoft.com/library/dn642472.aspx), соответствующие бизнес-требованиям. Например, это может быть шаблон для данных строгой секретности, который будет применяться ко всем сообщениям электронной почты с соответствующим статусом.

Организации, которые не уделяют достаточно внимания [классификации данных](http://download.microsoft.com/download/0/A/3/0A3BE969-85C5-4DD2-83B6-366AA71D1FE3/Data-Classification-for-Cloud-Readiness.pdf) и защите файлов, могут быть более уязвимыми к утечкам данных. Без правильной защиты файлов организация не сможет получать данные бизнес-аналитики, а также отслеживать нарушения и предотвращать неправомочный доступ к файлам.

Дополнительные сведения об Azure RMS см. в статье [Начало работы со службой Azure Rights Management](https://technet.microsoft.com/library/jj585016.aspx).
