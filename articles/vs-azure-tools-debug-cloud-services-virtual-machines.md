---
title: "aaaDebugging Azure облачной службы или виртуальной машины в Visual Studio | Документы Microsoft"
description: "Отладка облачной службы или виртуальной машины в Visual Studio"
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 945e06e0-2100-41af-b218-72347367ddab
ms.service: visual-studio-online
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: multiple
ms.workload: na
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 32a326430021ba2ea9317a6a71fa005d4b87c273
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="debugging-an-azure-cloud-service-or-virtual-machine-in-visual-studio"></a><span data-ttu-id="4a647-103">Отладка облачной службы или виртуальной машины Azure в Visual Studio</span><span class="sxs-lookup"><span data-stu-id="4a647-103">Debugging an Azure cloud service or virtual machine in Visual Studio</span></span>
<span data-ttu-id="4a647-104">Visual Studio предоставляет разнообразные варианты отладки облачных служб и виртуальных машин Azure.</span><span class="sxs-lookup"><span data-stu-id="4a647-104">Visual Studio gives you different options for debugging Azure cloud services and virtual machines.</span></span>

## <a name="debug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="4a647-105">Отладка облачной службы на локальном компьютере</span><span class="sxs-lookup"><span data-stu-id="4a647-105">Debug your cloud service on your local computer</span></span>
<span data-ttu-id="4a647-106">Можно сохранить время и деньги с помощью toodebug эмулятор вычислений Azure hello облачной службы на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="4a647-106">You can save time and money by using hello Azure compute emulator toodebug your cloud service on a local machine.</span></span> <span data-ttu-id="4a647-107">Посредством локальной отладки службы перед ее развертыванием можно повысить надежность и производительность службы, не платя за время использования вычислительных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="4a647-107">By debugging a service locally before you deploy it, you can improve reliability and performance without paying for compute time.</span></span> <span data-ttu-id="4a647-108">Однако некоторые ошибки могут возникнуть только при запуске облачной службы непосредственно в среде Azure.</span><span class="sxs-lookup"><span data-stu-id="4a647-108">However, some errors might occur only when you run a cloud service in Azure itself.</span></span> <span data-ttu-id="4a647-109">Эти ошибки можно устранить, если включить удаленную отладку при публикации службы, а затем подключите экземпляр роли tooa hello отладчика.</span><span class="sxs-lookup"><span data-stu-id="4a647-109">You can debug these errors if you enable remote debugging when you publish your service and then attach hello debugger tooa role instance.</span></span>

<span data-ttu-id="4a647-110">Hello эмулятор имитирует службу вычислений Azure hello и выполняется в локальной среде, можно протестировать и отладка облачной службы перед ее развертыванием.</span><span class="sxs-lookup"><span data-stu-id="4a647-110">hello emulator simulates hello Azure Compute service and runs in your local environment so that you can test and debug your cloud service before you deploy it.</span></span> <span data-ttu-id="4a647-111">дескрипторы эмулятор Hello hello жизненный цикл экземпляров ролей и предоставляет доступ toosimulated ресурсы, такие как локальное хранилище.</span><span class="sxs-lookup"><span data-stu-id="4a647-111">hello emulator handles hello lifecycle of your role instances and provides access toosimulated resources, such as local storage.</span></span> <span data-ttu-id="4a647-112">При отладке или запуске службы из Visual Studio, он автоматически запускает эмулятор hello в качестве фонового приложения и развертывает симулятора toohello службы.</span><span class="sxs-lookup"><span data-stu-id="4a647-112">When you debug or run your service from Visual Studio, it automatically starts hello emulator as a background application and then deploys your service toohello emulator.</span></span> <span data-ttu-id="4a647-113">Можно использовать эмулятор tooview hello службы при запуске в локальной среде hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-113">You can use hello emulator tooview your service when it runs in hello local environment.</span></span> <span data-ttu-id="4a647-114">Можно запустить полную версию hello или hello экспресс-версию эмулятора hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-114">You can run hello full version or hello express version of hello emulator.</span></span> <span data-ttu-id="4a647-115">(Начиная с Azure 2.3 hello экспресс-версию эмулятора hello — по умолчанию hello) В разделе [tooRun использование Emulator Express и отладка облачной службы локально](https://msdn.microsoft.com/library/dn339018.aspx).</span><span class="sxs-lookup"><span data-stu-id="4a647-115">(Starting with Azure 2.3, hello express version of hello emulator is hello default.) See [Using Emulator Express tooRun and Debug a Cloud Service Locally](https://msdn.microsoft.com/library/dn339018.aspx).</span></span>

### <a name="toodebug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="4a647-116">toodebug вашей облачной службы на локальном компьютере</span><span class="sxs-lookup"><span data-stu-id="4a647-116">toodebug your cloud service on your local computer</span></span>
1. <span data-ttu-id="4a647-117">В строке меню hello, выберите **отладки**, **начать отладку** toorun проекта Azure облачной службы.</span><span class="sxs-lookup"><span data-stu-id="4a647-117">On hello menu bar, choose **Debug**, **Start Debugging** toorun your Azure cloud service project.</span></span> <span data-ttu-id="4a647-118">Также можно просто нажать клавишу F5.</span><span class="sxs-lookup"><span data-stu-id="4a647-118">As an alternative, you can press F5.</span></span> <span data-ttu-id="4a647-119">Вы увидите, что начинается сообщение, которое hello в эмуляторе вычислений.</span><span class="sxs-lookup"><span data-stu-id="4a647-119">You’ll see a message that hello Compute Emulator is starting.</span></span> <span data-ttu-id="4a647-120">При запуске эмулятора hello hello иконку подтверждает это.</span><span class="sxs-lookup"><span data-stu-id="4a647-120">When hello emulator starts, hello system tray icon confirms it.</span></span>

    ![Эмулятор Azure в системной панели задач hello](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC783828.png)
2. <span data-ttu-id="4a647-122">Отображать hello пользовательский интерфейс эмулятора вычислений hello, открыв контекстное меню значка Azure hello hello в области уведомлений hello, а затем выберите **Показать пользовательский Интерфейс эмулятора вычислений**.</span><span class="sxs-lookup"><span data-stu-id="4a647-122">Display hello user interface for hello compute emulator by opening hello shortcut menu for hello Azure icon in hello notification area, and then select **Show Compute Emulator UI**.</span></span>

    <span data-ttu-id="4a647-123">Левая панель Hello hello пользовательский Интерфейс отображает hello служб, которые в данный момент развертывания toohello вычислительного эмулятора и hello экземпляров ролей, которые каждая служба запущена.</span><span class="sxs-lookup"><span data-stu-id="4a647-123">hello left pane of hello UI shows hello services that are currently deployed toohello compute emulator and hello role instances that each service is running.</span></span> <span data-ttu-id="4a647-124">Вы можете hello службу или роль toodisplay жизненного цикла, ведение журнала и диагностической информации в правой области hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-124">You can choose hello service or roles toodisplay lifecycle, logging, and diagnostic information in hello right pane.</span></span> <span data-ttu-id="4a647-125">Если поместить фокус hello в верхнее поле hello вложенного окна, он расширяет toofill hello правой панели.</span><span class="sxs-lookup"><span data-stu-id="4a647-125">If you put hello focus in hello top margin of an included window, it expands toofill hello right pane.</span></span>
3. <span data-ttu-id="4a647-126">Шаг через приложение hello с помощью команд на hello **отладки** меню и задание точек останова в коде.</span><span class="sxs-lookup"><span data-stu-id="4a647-126">Step through hello application by selecting commands on hello **Debug** menu and setting breakpoints in your code.</span></span> <span data-ttu-id="4a647-127">При пошаговом выполнении приложения hello в отладчике hello hello состояние приложения hello в обновляются hello области.</span><span class="sxs-lookup"><span data-stu-id="4a647-127">As you step through hello application in hello debugger, hello panes are updated with hello current status of hello application.</span></span> <span data-ttu-id="4a647-128">При остановке отладки развертывание приложения hello удаляется.</span><span class="sxs-lookup"><span data-stu-id="4a647-128">When you stop debugging, hello application deployment is deleted.</span></span> <span data-ttu-id="4a647-129">Если приложение включает веб-роли и установили hello запуска действия свойство toostart hello веб-браузера, Visual Studio запускает веб-приложения в браузере hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-129">If your application includes a web role and you've set hello Startup action property toostart hello web browser, Visual Studio starts your web application in hello browser.</span></span> <span data-ttu-id="4a647-130">При изменении hello число экземпляров роли в конфигурации службы hello, необходимо остановить облачную службу и затем перезапустить отладку, чтобы можно было отлаживать эти новые экземпляры роли hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-130">If you change hello number of instances of a role in hello service configuration, you must stop your cloud service and then restart debugging so that you can debug these new instances of hello role.</span></span>

    <span data-ttu-id="4a647-131">**Примечание:** при остановить выполнение или отладку службы, hello локальный эмулятор вычислений и эмулятор хранилища не останавливаются.</span><span class="sxs-lookup"><span data-stu-id="4a647-131">**Note:** When you stop running or debugging your service, hello local compute emulator and storage emulator aren't stopped.</span></span> <span data-ttu-id="4a647-132">Необходимо остановить их явно из области уведомлений hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-132">You must stop them explicitly from hello notification area.</span></span>

## <a name="debug-a-cloud-service-in-azure"></a><span data-ttu-id="4a647-133">Отладка облачной службы в Azure</span><span class="sxs-lookup"><span data-stu-id="4a647-133">Debug a cloud service in Azure</span></span>
<span data-ttu-id="4a647-134">toodebug облачной службы с удаленного компьютера, необходимо включить эти функциональные возможности явным образом при развертывании облачной службы, чтобы необходимые службы (например, msvsmon.exe), установленные на hello виртуальных машин, работающих экземпляров ролей.</span><span class="sxs-lookup"><span data-stu-id="4a647-134">toodebug a cloud service from a remote machine, you must enable that functionality explicitly when you deploy your cloud service so that required services (msvsmon.exe, for example) are installed on hello virtual machines that run your role instances.</span></span> <span data-ttu-id="4a647-135">Если вы не включили удаленную отладку при публикации службы hello, у вас toorepublish hello службу с включенной удаленной отладкой.</span><span class="sxs-lookup"><span data-stu-id="4a647-135">If you didn't enable remote debugging when you published hello service, you have toorepublish hello service with remote debugging enabled.</span></span>

<span data-ttu-id="4a647-136">Если вы включили удаленную отладку для облачной службы, это не приводит к снижению производительности и не требует дополнительных затрат.</span><span class="sxs-lookup"><span data-stu-id="4a647-136">If you enable remote debugging for a cloud service, it doesn't exhibit degraded performance or incur additional charges.</span></span> <span data-ttu-id="4a647-137">Не следует использовать удаленную отладку для рабочей службы, так как клиенты, использующие hello службы может быть нарушена.</span><span class="sxs-lookup"><span data-stu-id="4a647-137">You shouldn't use remote debugging on a production service, because clients who use hello service might be adversely affected.</span></span>

> [!NOTE]
> <span data-ttu-id="4a647-138">При публикации облачной службы из Visual Studio, можно включить **IntelliTrace** для любой роли в том, что служба hello, целевой платформы .NET Framework 4 или hello .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="4a647-138">When you publish a cloud service from Visual Studio, you can enable **IntelliTrace** for any roles in that service that target hello .NET Framework 4 or hello .NET Framework 4.5.</span></span> <span data-ttu-id="4a647-139">С помощью **IntelliTrace**, можно изучить события, возникшие в экземпляре роли в прошлом hello и воспроизвести контекст hello, начиная с этого момента.</span><span class="sxs-lookup"><span data-stu-id="4a647-139">By using **IntelliTrace**, you can examine events that occurred in a role instance in hello past and reproduce hello context from that time.</span></span> <span data-ttu-id="4a647-140">Ознакомьтесь со статьями [Отладка опубликованной облачной службы с помощью IntelliTrace и Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) и [Использование IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span><span class="sxs-lookup"><span data-stu-id="4a647-140">See [Debugging a published cloud service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) and [Using IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span></span>
>
>

### <a name="tooenable-remote-debugging-for-a-cloud-service"></a><span data-ttu-id="4a647-141">tooenable удаленной отладки для облачной службы</span><span class="sxs-lookup"><span data-stu-id="4a647-141">tooenable remote debugging for a cloud service</span></span>
1. <span data-ttu-id="4a647-142">Откройте контекстное меню проекта Azure hello hello, а затем выберите **публикации**.</span><span class="sxs-lookup"><span data-stu-id="4a647-142">Open hello shortcut menu for hello Azure project, and then select **Publish**.</span></span>
2. <span data-ttu-id="4a647-143">Выберите hello **промежуточной** среды и hello **отладки** конфигурации.</span><span class="sxs-lookup"><span data-stu-id="4a647-143">Select hello **Staging** environment and hello **Debug** configuration.</span></span>

    <span data-ttu-id="4a647-144">Это всего лишь рекомендация.</span><span class="sxs-lookup"><span data-stu-id="4a647-144">This is only a guideline.</span></span> <span data-ttu-id="4a647-145">Вы можете toorun сред тестирования в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="4a647-145">You can opt toorun your test environments in a Production environment.</span></span> <span data-ttu-id="4a647-146">Тем не менее это может оказать на пользователей, если необходимо включить удаленную отладку в производственной среде hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-146">However, you may adversely affect users if you enable remote debugging on hello Production environment.</span></span> <span data-ttu-id="4a647-147">Можно выбрать конфигурацию выпуска hello, но hello конфигурация отладки облегчает процесс отладки.</span><span class="sxs-lookup"><span data-stu-id="4a647-147">You can choose hello Release configuration, but hello Debug configuration makes debugging easier.</span></span>

    ![Выберите конфигурацию отладки hello](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746717.gif)
3. <span data-ttu-id="4a647-149">Выполните обычные действия hello, но выберите hello **включить удаленный отладчик для всех ролей** флажок на hello **Дополнительные параметры** вкладки.</span><span class="sxs-lookup"><span data-stu-id="4a647-149">Follow hello usual steps, but select hello **Enable Remote Debugger for all roles** check box on hello **Advanced Settings** tab.</span></span>

    ![Конфигурация отладки](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746718.gif)

### <a name="tooattach-hello-debugger-tooa-cloud-service-in-azure"></a><span data-ttu-id="4a647-151">tooattach hello отладчик tooa облачной службы в Azure</span><span class="sxs-lookup"><span data-stu-id="4a647-151">tooattach hello debugger tooa cloud service in Azure</span></span>
1. <span data-ttu-id="4a647-152">В обозревателе серверов разверните узел hello для облачной службы.</span><span class="sxs-lookup"><span data-stu-id="4a647-152">In Server Explorer, expand hello node for your cloud service.</span></span>
2. <span data-ttu-id="4a647-153">Привет открыть контекстное меню для роли hello или toowhich экземпляр роли будет tooattach, а затем выберите **подключить отладчик**.</span><span class="sxs-lookup"><span data-stu-id="4a647-153">Open hello shortcut menu for hello role or role instance toowhich you want tooattach, and then select **Attach Debugger**.</span></span>

    <span data-ttu-id="4a647-154">При отладке роли отладчик Visual Studio hello присоединяет tooeach экземпляра этой роли.</span><span class="sxs-lookup"><span data-stu-id="4a647-154">If you debug a role, hello Visual Studio debugger attaches tooeach instance of that role.</span></span> <span data-ttu-id="4a647-155">Hello отладчика произойдет останов на точку останова для экземпляра роли первого hello, который запускает эту строку кода и выполняет условия точки останова.</span><span class="sxs-lookup"><span data-stu-id="4a647-155">hello debugger will break on a breakpoint for hello first role instance that runs that line of code and meets any conditions of that breakpoint.</span></span> <span data-ttu-id="4a647-156">Если вы производите отладку экземпляра, hello отладчик подключается tooonly hello, экземпляру и останавливает работу в точках останова только в том случае, если этот конкретный экземпляр запускает эту строку кода и выполняет условия точки останова.</span><span class="sxs-lookup"><span data-stu-id="4a647-156">If you debug an instance, hello debugger attaches tooonly that instance and breaks on a breakpoint only when that specific instance runs that line of code and meets hello breakpoint's conditions.</span></span>

    ![Присоединить отладчик](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746719.gif)
3. <span data-ttu-id="4a647-158">После hello отладчик подключается tooan экземпляра, отладку обычным образом.</span><span class="sxs-lookup"><span data-stu-id="4a647-158">After hello debugger attaches tooan instance, debug as usual.</span></span> <span data-ttu-id="4a647-159">Hello отладчик автоматически выполняет присоединение toohello соответствующему хост-процессу для вашей роли.</span><span class="sxs-lookup"><span data-stu-id="4a647-159">hello debugger automatically attaches toohello appropriate host process for your role.</span></span> <span data-ttu-id="4a647-160">В зависимости от того, какие hello — роли, toow3wp.exe Присоединяет отладчик hello, WaWorkerHost.exe или WaIISHost.exe.</span><span class="sxs-lookup"><span data-stu-id="4a647-160">Depending on what hello role is, hello debugger attaches toow3wp.exe, WaWorkerHost.exe, or WaIISHost.exe.</span></span> <span data-ttu-id="4a647-161">tooverify hello процесса toowhich hello отладчик присоединен, разверните узел экземпляра hello в обозревателе серверов.</span><span class="sxs-lookup"><span data-stu-id="4a647-161">tooverify hello process toowhich hello debugger is attached, expand hello instance node in Server Explorer.</span></span> <span data-ttu-id="4a647-162">Дополнительные сведения о процессах Azure см. в статье [Архитектура ролей Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).</span><span class="sxs-lookup"><span data-stu-id="4a647-162">See [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information about Azure processes.</span></span>

    ![Диалоговое окно "Выбор типа кода"](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
4. <span data-ttu-id="4a647-164">процессы hello tooidentify toowhich hello отладчик подключен, открытия hello процессы диалогового, на hello меню отладки, Windows, процессы.</span><span class="sxs-lookup"><span data-stu-id="4a647-164">tooidentify hello processes toowhich hello debugger is attached, open hello Processes dialog box by, on hello menu bar, choosing Debug, Windows, Processes.</span></span> <span data-ttu-id="4a647-165">(Клавиатура: Ctrl + Alt + Z) toodetach конкретного процесса, откройте ее контекстное меню и выберите **отсоединить процесс**.</span><span class="sxs-lookup"><span data-stu-id="4a647-165">(Keyboard: Ctrl+Alt+Z)toodetach a specific process, open its shortcut menu, and then select **Detach Process**.</span></span> <span data-ttu-id="4a647-166">Или, найдите узел экземпляра hello в обозревателе серверов, найдите процесс hello, откройте ее контекстное меню и выберите **отсоединить процесс**.</span><span class="sxs-lookup"><span data-stu-id="4a647-166">Or, locate hello instance node in Server Explorer, find hello process, open its shortcut menu, and then select **Detach Process**.</span></span>

    ![Отладить процессы](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC690787.gif)

> [!WARNING]
> <span data-ttu-id="4a647-168">Во время удаленной отладки избегайте длинных остановок на точках останова.</span><span class="sxs-lookup"><span data-stu-id="4a647-168">Avoid long stops at breakpoints when remote debugging.</span></span> <span data-ttu-id="4a647-169">Azure обрабатывает процесс, который остановленным дольше нескольких минут, как отвечать на запросы и перестает отправлять трафик toothat экземпляра.</span><span class="sxs-lookup"><span data-stu-id="4a647-169">Azure treats a process that's stopped for longer than a few minutes as unresponsive and stops sending traffic toothat instance.</span></span> <span data-ttu-id="4a647-170">Если вы остановите слишком долго, msvsmon.exe отсоединяется от процесса hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-170">If you stop for too long, msvsmon.exe detaches from hello process.</span></span>
>
>

<span data-ttu-id="4a647-171">отладчик hello toodetach от всех процессов в вашем экземпляра или роли, Привет открыть контекстное меню для роли hello или экземпляр, отладки, а затем выберите **отсоединить отладчик**.</span><span class="sxs-lookup"><span data-stu-id="4a647-171">toodetach hello debugger from all processes in your instance or role, open hello shortcut menu for hello role or instance that you're debugging, and then select **Detach Debugger**.</span></span>

## <a name="limitations-of-remote-debugging-in-azure"></a><span data-ttu-id="4a647-172">Ограничения удаленной отладки в Azure</span><span class="sxs-lookup"><span data-stu-id="4a647-172">Limitations of remote debugging in Azure</span></span>
<span data-ttu-id="4a647-173">Из пакета Azure SDK 2.3 удаленная отладка обладает hello следующие ограничения.</span><span class="sxs-lookup"><span data-stu-id="4a647-173">From Azure SDK 2.3, remote debugging has hello following limitations.</span></span>

* <span data-ttu-id="4a647-174">При включенной удаленной отладке нельзя опубликовать облачную службу, в которой любая роль содержит более 25 экземпляров.</span><span class="sxs-lookup"><span data-stu-id="4a647-174">With remote debugging enabled, you can't publish a cloud service in which any role has more than 25 instances.</span></span>
* <span data-ttu-id="4a647-175">Hello отладчик использует порты 30400 too30424, 31400 too31424 и 32400 too32424.</span><span class="sxs-lookup"><span data-stu-id="4a647-175">hello debugger uses ports 30400 too30424, 31400 too31424 and 32400 too32424.</span></span> <span data-ttu-id="4a647-176">При попытке toouse любой из этих портов, не будет возможности toopublish отображения службы и из hello следующие сообщения об ошибках в журнал действий hello для Azure:</span><span class="sxs-lookup"><span data-stu-id="4a647-176">If you try toouse any of these ports, you won't be able toopublish your service, and one of hello following error messages will appear in hello activity log for Azure:</span></span>

  * <span data-ttu-id="4a647-177">Ошибка при проверке файла cscfg hello по файл csdef hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-177">Error validating hello .cscfg file against hello .csdef file.</span></span>
    <span data-ttu-id="4a647-178">Hello диапазон портов «диапазон» зарезервировано для конечной точки Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector роли «роль» накладывается на уже заданный порт или диапазон.</span><span class="sxs-lookup"><span data-stu-id="4a647-178">hello reserved port range 'range' for endpoint Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector of role 'role' overlaps with an already defined port or range.</span></span>
  * <span data-ttu-id="4a647-179">Ошибка выделения.</span><span class="sxs-lookup"><span data-stu-id="4a647-179">Allocation failed.</span></span> <span data-ttu-id="4a647-180">Повторите попытку позже, попробуйте уменьшить размер виртуальной Машины hello или число экземпляров роли или попробуйте выполнить развертывание tooa другой регион.</span><span class="sxs-lookup"><span data-stu-id="4a647-180">Please retry later, try reducing hello VM size or number of role instances, or try deploying tooa different region.</span></span>

## <a name="debugging-azure-virtual-machines"></a><span data-ttu-id="4a647-181">Отладка виртуальных машин Azure</span><span class="sxs-lookup"><span data-stu-id="4a647-181">Debugging Azure virtual machines</span></span>
<span data-ttu-id="4a647-182">Вы можете выполнять отладку программ, выполняемых на виртуальных машинах Azure, с помощью обозревателя серверов в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4a647-182">You can debug programs that run on Azure virtual machines by using Server Explorer in Visual Studio.</span></span> <span data-ttu-id="4a647-183">Если включить удаленную отладку на виртуальной машине Azure, Azure устанавливает hello расширение удаленной отладки на виртуальной машине hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-183">When you enable remote debugging on an Azure virtual machine, Azure installs hello remote debugging extension on hello virtual machine.</span></span> <span data-ttu-id="4a647-184">Затем можно присоединить tooprocesses на виртуальной машине hello и отладку обычным образом.</span><span class="sxs-lookup"><span data-stu-id="4a647-184">Then, you can attach tooprocesses on hello virtual machine and debug as you normally would.</span></span>

> [!NOTE]
> <span data-ttu-id="4a647-185">Виртуальные машины, созданные через стек диспетчера ресурсов Azure hello можно удаленно отлаживать с помощью Cloud Explorer в Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="4a647-185">Virtual machines created through hello Azure resource manager stack can be remotely debugged by using Cloud Explorer in Visual Studio 2015.</span></span> <span data-ttu-id="4a647-186">Дополнительные сведения см. в статье [Управление ресурсами Azure с помощью Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span><span class="sxs-lookup"><span data-stu-id="4a647-186">For more information, see [Managing Azure Resources with Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span></span>
>
>

### <a name="toodebug-an-azure-virtual-machine"></a><span data-ttu-id="4a647-187">toodebug виртуальной машине Azure</span><span class="sxs-lookup"><span data-stu-id="4a647-187">toodebug an Azure virtual machine</span></span>
1. <span data-ttu-id="4a647-188">В обозревателе серверов разверните узел виртуальных машин hello и выберите hello узел hello виртуальной машины, которые должны toodebug.</span><span class="sxs-lookup"><span data-stu-id="4a647-188">In Server Explorer, expand hello Virtual Machines node and select hello node of hello virtual machine that you want toodebug.</span></span>
2. <span data-ttu-id="4a647-189">Откройте контекстное меню hello и выберите **включить отладку**.</span><span class="sxs-lookup"><span data-stu-id="4a647-189">Open hello context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="4a647-190">При появлении запроса, если вы уверены в том случае, если требуется отладка tooenable hello виртуальной машине, выберите **Да**.</span><span class="sxs-lookup"><span data-stu-id="4a647-190">When asked if you're sure if you want tooenable debugging on hello virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="4a647-191">Azure устанавливает hello расширение удаленной отладки на отладку tooenable hello виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="4a647-191">Azure installs hello remote debugging extension on hello virtual machine tooenable debugging.</span></span>

    ![Команда включения отладки в виртуальной машине](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Журнал действий Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
3. <span data-ttu-id="4a647-194">По окончании установки hello расширение удаленной отладки, откройте контекстное меню hello виртуальной машины и выберите **подключить отладчик...**</span><span class="sxs-lookup"><span data-stu-id="4a647-194">After hello remote debugging extension finishes installing, open hello virtual machine's context menu and select **Attach Debugger...**</span></span>

    <span data-ttu-id="4a647-195">Возвращает список процессов hello на виртуальной машине hello Azure и отображает их в диалоговое окно tooProcess присоединение hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-195">Azure gets a list of hello processes on hello virtual machine and shows them in hello Attach tooProcess dialog box.</span></span>

    ![Команда подключения отладчика](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
4. <span data-ttu-id="4a647-197">В hello **присоединения tooProcess** выберите **выберите** toolimit hello в результаты включаются только типы hello tooshow кода требуется toodebug.</span><span class="sxs-lookup"><span data-stu-id="4a647-197">In hello **Attach tooProcess** dialog box, select **Select** toolimit hello results list tooshow only hello types of code you want toodebug.</span></span> <span data-ttu-id="4a647-198">Вы можете осуществлять отладку 32- или 64-разрядного управляемого и/или машинного кода.</span><span class="sxs-lookup"><span data-stu-id="4a647-198">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Диалоговое окно "Выбор типа кода"](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
5. <span data-ttu-id="4a647-200">Выберите процессы hello toodebug на виртуальной машине hello и затем выберите **присоединение**.</span><span class="sxs-lookup"><span data-stu-id="4a647-200">Select hello processes you want toodebug on hello virtual machine and then select **Attach**.</span></span> <span data-ttu-id="4a647-201">Например можно выбрать процесс w3wp.exe hello, если требуется, чтобы toodebug веб-приложения на виртуальной машине hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-201">For example, you might choose hello w3wp.exe process if you wanted toodebug a web app on hello virtual machine.</span></span> <span data-ttu-id="4a647-202">Дополнительные сведения см. в статьях [Отладка одного или нескольких процессов в Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) и [Архитектура ролей Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).</span><span class="sxs-lookup"><span data-stu-id="4a647-202">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) and [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information.</span></span>

## <a name="create-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="4a647-203">Создание веб-проекта и виртуальной машины для отладки</span><span class="sxs-lookup"><span data-stu-id="4a647-203">Create a web project and a virtual machine for debugging</span></span>
<span data-ttu-id="4a647-204">Перед публикацией проекта Azure, может оказаться полезным tootest его в автономной среде, который поддерживает сценарии отладки и тестирования и где можно установить для тестирования и мониторинга программы.</span><span class="sxs-lookup"><span data-stu-id="4a647-204">Before publishing your Azure project, you might find it useful tootest it in a contained environment that supports debugging and testing scenarios, and where you can install testing and monitoring programs.</span></span> <span data-ttu-id="4a647-205">Это один из способов toodo tooremotely отладки приложения на виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="4a647-205">One way toodo this is tooremotely debug your app on a virtual machine.</span></span>

<span data-ttu-id="4a647-206">Проекты Visual Studio ASP.NET предоставляют параметр toocreate удобную виртуальную машину, можно использовать для тестирования приложения.</span><span class="sxs-lookup"><span data-stu-id="4a647-206">Visual Studio ASP.NET projects offer an option toocreate a handy virtual machine that you can use for app testing.</span></span> <span data-ttu-id="4a647-207">Hello виртуальная машина содержит нужные обычно конечные точки, такие как PowerShell, удаленный рабочий стол и WebDeploy.</span><span class="sxs-lookup"><span data-stu-id="4a647-207">hello virtual machine includes commonly-needed endpoints such as PowerShell, remote desktop, and WebDeploy.</span></span>

### <a name="toocreate-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="4a647-208">toocreate веб-проекта и виртуальной машины для отладки</span><span class="sxs-lookup"><span data-stu-id="4a647-208">toocreate a web project and a virtual machine for debugging</span></span>
1. <span data-ttu-id="4a647-209">Создайте в Visual Studio новое веб-приложение ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4a647-209">In Visual Studio, create a new ASP.NET Web Application.</span></span>
2. <span data-ttu-id="4a647-210">В диалоговом окне Новый проект ASP.NET hello в hello Azure раздела выберите **виртуальной машины** в hello раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="4a647-210">In hello New ASP.NET Project dialog, in hello Azure section, choose **Virtual Machine** in hello dropdown list box.</span></span> <span data-ttu-id="4a647-211">Оставьте hello **создать удаленные ресурсы** флажком.</span><span class="sxs-lookup"><span data-stu-id="4a647-211">Leave hello **Create remote resources** check box selected.</span></span> <span data-ttu-id="4a647-212">Выберите **ОК** tooproceed.</span><span class="sxs-lookup"><span data-stu-id="4a647-212">Select **OK** tooproceed.</span></span>

    <span data-ttu-id="4a647-213">Hello **создать виртуальную машину в Azure** откроется диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="4a647-213">hello **Create virtual machine on Azure** dialog box appears.</span></span>

    ![Диалоговое окно "Создать веб-проект ASP.NET"](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746723.png)

    <span data-ttu-id="4a647-215">**Примечание:** будут запрошены toosign в tooyour учетная запись Azure, если вы еще не вошли.</span><span class="sxs-lookup"><span data-stu-id="4a647-215">**Note:** You'll be asked toosign in tooyour Azure account if you're not already signed in.</span></span>

1. <span data-ttu-id="4a647-216">Выберите различные параметры для виртуальной машины hello hello, а затем выберите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="4a647-216">Select hello various settings for hello virtual machine and then select **OK**.</span></span> <span data-ttu-id="4a647-217">Дополнительные сведения см. в статье [Виртуальные машины](http://go.microsoft.com/fwlink/?LinkId=623033).</span><span class="sxs-lookup"><span data-stu-id="4a647-217">See [Virtual Machines](http://go.microsoft.com/fwlink/?LinkId=623033) for more information.</span></span>

    <span data-ttu-id="4a647-218">Привет, указываемые для DNS-имени будет называться hello имя hello виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="4a647-218">hello name you enter for DNS name will be hello name of hello virtual machine.</span></span>

    ![Диалоговое окно "Создать виртуальную машину"](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746724.png)

    <span data-ttu-id="4a647-220">Azure создает hello виртуальной машины, а также подготавливает и настраивает конечные точки hello, такие как удаленный рабочий стол и веб-развертывания</span><span class="sxs-lookup"><span data-stu-id="4a647-220">Azure creates hello virtual machine and then provisions and configures hello endpoints, such as Remote Desktop and Web Deploy</span></span>
2. <span data-ttu-id="4a647-221">После полной настройки hello виртуальной машины, выберите узел hello виртуальной машины в обозревателе серверов.</span><span class="sxs-lookup"><span data-stu-id="4a647-221">After hello virtual machine is fully configured, select hello virtual machine’s node in Server Explorer.</span></span>
3. <span data-ttu-id="4a647-222">Откройте контекстное меню hello и выберите **включить отладку**.</span><span class="sxs-lookup"><span data-stu-id="4a647-222">Open hello context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="4a647-223">При появлении запроса, если вы уверены в том случае, если требуется отладка tooenable hello виртуальной машине, выберите **Да**.</span><span class="sxs-lookup"><span data-stu-id="4a647-223">When asked if you're sure if you want tooenable debugging on hello virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="4a647-224">Azure устанавливает hello удаленной отладки расширения toohello виртуальной машины tooenable отладки.</span><span class="sxs-lookup"><span data-stu-id="4a647-224">Azure installs hello remote debugging extension toohello virtual machine tooenable debugging.</span></span>

    ![Команда включения отладки в виртуальной машине](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Журнал действий Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
4. <span data-ttu-id="4a647-227">Опубликуйте проект в соответствии с инструкциями из статьи [Развертывание веб-проекта с помощью публикации одним щелчком в Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span><span class="sxs-lookup"><span data-stu-id="4a647-227">Publish your project as outlined in [How to: Deploy a Web Project Using One-Click Publish in Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span></span> <span data-ttu-id="4a647-228">Так как вы хотите toodebug для hello виртуальной машины на hello **параметры** страница hello **веб-публикация** мастера выберите **отладки** как конфигурация hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-228">Because you want toodebug on hello virtual machine, on hello **Settings** page of hello **Publish Web** wizard, select **Debug** as hello configuration.</span></span> <span data-ttu-id="4a647-229">Это позволяет просматривать символы кода во время отладки.</span><span class="sxs-lookup"><span data-stu-id="4a647-229">This makes sure that code symbols are available while debugging.</span></span>

    ![Параметры публикации](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718349.png)
5. <span data-ttu-id="4a647-231">В hello **параметры публикации файлов**выберите **удалить дополнительные файлы в месте назначения** Если hello проект уже был развернут ранее.</span><span class="sxs-lookup"><span data-stu-id="4a647-231">In hello **File Publish Options**, select **Remove additional files at destination** if hello project was already deployed at an earlier time.</span></span>
6. <span data-ttu-id="4a647-232">После публикует hello проекта, в контекстном меню виртуальной машины hello в обозревателе серверов, выберите **подключить отладчик...**</span><span class="sxs-lookup"><span data-stu-id="4a647-232">After hello project publishes, on hello virtual machine's context menu in Server Explorer, select **Attach Debugger...**</span></span>

    <span data-ttu-id="4a647-233">Возвращает список процессов hello на виртуальной машине hello Azure и отображает их в диалоговое окно tooProcess присоединение hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-233">Azure gets a list of hello processes on hello virtual machine and shows them in hello Attach tooProcess dialog box.</span></span>

    ![Команда подключения отладчика](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
7. <span data-ttu-id="4a647-235">В hello **присоединения tooProcess** выберите **выберите** toolimit hello в результаты включаются только типы hello tooshow кода требуется toodebug.</span><span class="sxs-lookup"><span data-stu-id="4a647-235">In hello **Attach tooProcess** dialog box, select **Select** toolimit hello results list tooshow only hello types of code you want toodebug.</span></span> <span data-ttu-id="4a647-236">Вы можете осуществлять отладку 32- или 64-разрядного управляемого и/или машинного кода.</span><span class="sxs-lookup"><span data-stu-id="4a647-236">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Диалоговое окно "Выбор типа кода"](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
8. <span data-ttu-id="4a647-238">Выберите процессы hello toodebug на виртуальной машине hello и затем выберите **присоединение**.</span><span class="sxs-lookup"><span data-stu-id="4a647-238">Select hello processes you want toodebug on hello virtual machine and then select **Attach**.</span></span> <span data-ttu-id="4a647-239">Например можно выбрать процесс w3wp.exe hello, если требуется, чтобы toodebug веб-приложения на виртуальной машине hello.</span><span class="sxs-lookup"><span data-stu-id="4a647-239">For example, you might choose hello w3wp.exe process if you wanted toodebug a web app on hello virtual machine.</span></span> <span data-ttu-id="4a647-240">Дополнительные сведения см. в статье [Отладка одного или нескольких процессов в Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx).</span><span class="sxs-lookup"><span data-stu-id="4a647-240">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4a647-241">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="4a647-241">Next steps</span></span>
* <span data-ttu-id="4a647-242">Используйте **Intellitrace** toocollect журнала вызовов и событий с сервера выпуска.</span><span class="sxs-lookup"><span data-stu-id="4a647-242">Use **Intellitrace** toocollect a log of calls and events from a release server.</span></span> <span data-ttu-id="4a647-243">Ознакомьтесь со статьей [Отладка опубликованной облачной службы с помощью IntelliTrace и Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span><span class="sxs-lookup"><span data-stu-id="4a647-243">See [Debugging a Published Cloud Service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span></span>
* <span data-ttu-id="4a647-244">Используйте **диагностики Azure** toolog подробные сведения из кода, выполняемых внутри ролей, ли hello ролей, выполняются в среде разработки hello, или в Azure.</span><span class="sxs-lookup"><span data-stu-id="4a647-244">Use **Azure Diagnostics** toolog detailed information from code running within roles, whether hello roles are running in hello development environment or in Azure.</span></span> <span data-ttu-id="4a647-245">Ознакомьтесь со статьей [Включение системы диагностики Azure в облачных службах Azure](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span><span class="sxs-lookup"><span data-stu-id="4a647-245">See [Collecting logging data by using Azure Diagnostics](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span></span>
