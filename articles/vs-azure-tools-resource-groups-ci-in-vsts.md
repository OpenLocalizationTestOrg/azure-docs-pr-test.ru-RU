---
title: "Интеграция aaaContinuous в VS Team Services с помощью проектов группы ресурсов Azure | Документы Microsoft"
description: "Описывает, каким образом tooset непрерывной интеграции в Visual Studio Team Services с помощью развертывания группы ресурсов Azure для проектов в Visual Studio."
services: visual-studio-online
documentationcenter: na
author: mlearned
manager: erickson-doug
editor: 
ms.assetid: b81c172a-be87-4adc-861e-d20b94be9e38
ms.service: azure-resource-manager
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/01/2016
ms.author: mlearned
ms.openlocfilehash: 0fe4a4b8989ee323e8ef2206fa4ebed503025670
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="continuous-integration-in-visual-studio-team-services-using-azure-resource-group-deployment-projects"></a><span data-ttu-id="ab902-103">Непрерывная интеграция в Visual Studio Team Services с использованием проектов развертывания группы ресурсов Azure</span><span class="sxs-lookup"><span data-stu-id="ab902-103">Continuous integration in Visual Studio Team Services using Azure Resource Group deployment projects</span></span>
<span data-ttu-id="ab902-104">toodeploy шаблон Azure, выполнении задач на разных этапах: сборки, тестирования, tooAzure копии (также называется «Промежуточный») и развертывания шаблона.</span><span class="sxs-lookup"><span data-stu-id="ab902-104">toodeploy an Azure template, you perform tasks in various stages: Build, Test, Copy tooAzure (also called "Staging"), and Deploy Template.</span></span> <span data-ttu-id="ab902-105">Существует два способа toodeploy шаблоны tooVisual Studio Team Services (VS Team Services).</span><span class="sxs-lookup"><span data-stu-id="ab902-105">There are two different ways toodeploy templates tooVisual Studio Team Services (VS Team Services).</span></span> <span data-ttu-id="ab902-106">Оба метода предоставляют одинаковые результаты hello, поэтому нажмите hello, который наилучшим образом соответствует рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="ab902-106">Both methods provide hello same results, so choose hello one that best fits your workflow.</span></span>

1. <span data-ttu-id="ab902-107">Добавьте определение сборки tooyour одного шага, которое запускает сценарий PowerShell hello, включенный в проект развертывания группы ресурсов Azure hello (Deploy-AzureResourceGroup.ps1).</span><span class="sxs-lookup"><span data-stu-id="ab902-107">Add a single step tooyour build definition that runs hello PowerShell script that’s included in hello Azure Resource Group deployment project (Deploy-AzureResourceGroup.ps1).</span></span> <span data-ttu-id="ab902-108">Hello скрипт копирует артефакты, а затем развертывает hello шаблона.</span><span class="sxs-lookup"><span data-stu-id="ab902-108">hello script copies artifacts and then deploys hello template.</span></span>
2. <span data-ttu-id="ab902-109">Добавьте несколько этапов сборки VSTS, на каждом из которых выполняется одна задача этапа.</span><span class="sxs-lookup"><span data-stu-id="ab902-109">Add multiple VS Team Services build steps, each one performing a stage task.</span></span>

<span data-ttu-id="ab902-110">В этой статье показаны оба варианта.</span><span class="sxs-lookup"><span data-stu-id="ab902-110">This article demonstrates both options.</span></span> <span data-ttu-id="ab902-111">Первый вариант Hello имеет преимущество hello помощью hello же скрипт используется разработчиками в Visual Studio и позволяет обеспечить согласованность на протяжении жизненного цикла hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-111">hello first option has hello advantage of using hello same script used by developers in Visual Studio and providing consistency throughout hello lifecycle.</span></span> <span data-ttu-id="ab902-112">Второй параметр Hello предлагает удобный альтернативный toohello Встроенные скрипта.</span><span class="sxs-lookup"><span data-stu-id="ab902-112">hello second option offers a convenient alternative toohello built-in script.</span></span> <span data-ttu-id="ab902-113">Обе процедуры предполагают, что проект развертывания Visual Studio записан после изменения в VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="ab902-113">Both procedures assume you already have a Visual Studio deployment project checked into VS Team Services.</span></span>

## <a name="copy-artifacts-tooazure"></a><span data-ttu-id="ab902-114">Копирование артефактов tooAzure</span><span class="sxs-lookup"><span data-stu-id="ab902-114">Copy artifacts tooAzure</span></span>
<span data-ttu-id="ab902-115">Независимо от того, сценарий hello Если у вас есть все артефакты, необходимые для развертывания шаблона необходимо предоставить toothem доступ диспетчера ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="ab902-115">Regardless of hello scenario, if you have any artifacts that are needed for template deployment, you must give Azure Resource Manager access toothem.</span></span> <span data-ttu-id="ab902-116">Эти артефакты могут включить такие файлы:</span><span class="sxs-lookup"><span data-stu-id="ab902-116">These artifacts can include files such as:</span></span>

* <span data-ttu-id="ab902-117">вложенные шаблоны;</span><span class="sxs-lookup"><span data-stu-id="ab902-117">Nested templates</span></span>
* <span data-ttu-id="ab902-118">сценарии конфигурации и DSC;</span><span class="sxs-lookup"><span data-stu-id="ab902-118">Configuration scripts and DSC scripts</span></span>
* <span data-ttu-id="ab902-119">двоичные файлы приложения.</span><span class="sxs-lookup"><span data-stu-id="ab902-119">Application binaries</span></span>

### <a name="nested-templates-and-configuration-scripts"></a><span data-ttu-id="ab902-120">Вложенные шаблоны и сценарии конфигурации</span><span class="sxs-lookup"><span data-stu-id="ab902-120">Nested Templates and Configuration Scripts</span></span>
<span data-ttu-id="ab902-121">При использовании шаблонов hello, предоставляемые Visual Studio (или, созданного с помощью Visual Studio фрагменты) hello сценарий PowerShell не только готовит hello артефакты, он также выполняет параметризацию hello URI для hello ресурсов для различных развертываний.</span><span class="sxs-lookup"><span data-stu-id="ab902-121">When you use hello templates provided by Visual Studio (or built with Visual Studio snippets), hello PowerShell script not only stages hello artifacts, it also parameterizes hello URI for hello resources for different deployments.</span></span> <span data-ttu-id="ab902-122">сценарий Hello затем копирует hello артефакты tooa безопасный контейнер в Azure, создает маркер SaS для контейнера и затем передает данные на toohello шаблона-развертывания.</span><span class="sxs-lookup"><span data-stu-id="ab902-122">hello script then copies hello artifacts tooa secure container in Azure, creates a SaS token for that container, and then passes that information on toohello template deployment.</span></span> <span data-ttu-id="ab902-123">В разделе [Создание шаблона-развертывания](https://msdn.microsoft.com/library/azure/dn790564.aspx) toolearn Дополнительные сведения о вложенных шаблонов.</span><span class="sxs-lookup"><span data-stu-id="ab902-123">See [Create a template deployment](https://msdn.microsoft.com/library/azure/dn790564.aspx) toolearn more about nested templates.</span></span>  <span data-ttu-id="ab902-124">При использовании задачи в VS Team Services, необходимо выбрать соответствующие задачи hello для развертывания шаблона и при необходимости передавать значения параметров из промежуточного шага развертывания шаблона toohello hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-124">When using tasks in VS Team Services, you must select hello appropriate tasks for your template deployment and if necessary, pass parameter values from hello staging step toohello template deployment.</span></span>

## <a name="set-up-continuous-deployment-in-vs-team-services"></a><span data-ttu-id="ab902-125">Настройка непрерывного развертывания в VSTS</span><span class="sxs-lookup"><span data-stu-id="ab902-125">Set up continuous deployment in VS Team Services</span></span>
<span data-ttu-id="ab902-126">Сценарий PowerShell toocall hello в VS Team Services, необходимо tooupdate определение сборки.</span><span class="sxs-lookup"><span data-stu-id="ab902-126">toocall hello PowerShell script in VS Team Services, you need tooupdate your build definition.</span></span> <span data-ttu-id="ab902-127">Вкратце hello показаны следующие действия.</span><span class="sxs-lookup"><span data-stu-id="ab902-127">In brief, hello steps are:</span></span> 

1. <span data-ttu-id="ab902-128">Измените определение сборки hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-128">Edit hello build definition.</span></span>
2. <span data-ttu-id="ab902-129">Настроить авторизацию Azure в VSTS.</span><span class="sxs-lookup"><span data-stu-id="ab902-129">Set up Azure authorization in VS Team Services.</span></span>
3. <span data-ttu-id="ab902-130">Добавьте шаг построения Azure PowerShell, который ссылается на сценарий PowerShell hello в проект развертывания группы ресурсов Azure hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-130">Add an Azure PowerShell build step that references hello PowerShell script in hello Azure Resource Group deployment project.</span></span>
4. <span data-ttu-id="ab902-131">Задайте значение hello hello *- ArtifactsStagingDirectory* toowork параметр с проекта, созданного в VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="ab902-131">Set hello value of hello *-ArtifactsStagingDirectory* parameter toowork with a project built in VS Team Services.</span></span>

### <a name="detailed-walkthrough-for-option-1"></a><span data-ttu-id="ab902-132">Подробное пошаговое руководство для варианта 1</span><span class="sxs-lookup"><span data-stu-id="ab902-132">Detailed walkthrough for Option 1</span></span>
<span data-ttu-id="ab902-133">Hello следующие процедуры описывают hello действия необходимые tooconfigure непрерывного развертывания в VS Team Services с помощью одна задача, которая запускает сценарий PowerShell hello в своем проекте.</span><span class="sxs-lookup"><span data-stu-id="ab902-133">hello following procedures walk you through hello steps necessary tooconfigure continuous deployment in VS Team Services using a single task that runs hello PowerShell script in your project.</span></span> 

1. <span data-ttu-id="ab902-134">Измените определение сборки VSTS и добавьте этап сборки Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ab902-134">Edit your VS Team Services build definition and add an Azure PowerShell build step.</span></span> <span data-ttu-id="ab902-135">Выберите определение сборки hello под hello **определений сборки** категорию и выберите hello **изменить** ссылку.</span><span class="sxs-lookup"><span data-stu-id="ab902-135">Choose hello build definition under hello **Build definitions** category and then choose hello **Edit** link.</span></span>
   
   ![Изменение определения сборки][0]
2. <span data-ttu-id="ab902-137">Добавьте новый **Azure PowerShell** определение построения toohello шаг построения, а затем выберите hello **добавить шаг сборки...**</span><span class="sxs-lookup"><span data-stu-id="ab902-137">Add a new **Azure PowerShell** build step toohello build definition and then choose hello **Add build step…**</span></span> <span data-ttu-id="ab902-138">.</span><span class="sxs-lookup"><span data-stu-id="ab902-138">button.</span></span>
   
   ![Добавление шага сборки][1]
3. <span data-ttu-id="ab902-140">Выберите hello **задачи развертывания** категории, выберите hello **Azure PowerShell** задач, а затем выберите его **добавить** кнопки.</span><span class="sxs-lookup"><span data-stu-id="ab902-140">Choose hello **Deploy task** category, select hello **Azure PowerShell** task, and then choose its **Add** button.</span></span>
   
   ![Добавление задач][2]
4. <span data-ttu-id="ab902-142">Выберите hello **Azure PowerShell** шаг сборки и заполните его значения.</span><span class="sxs-lookup"><span data-stu-id="ab902-142">Choose hello **Azure PowerShell** build step and then fill in its values.</span></span>
   
   1. <span data-ttu-id="ab902-143">Если у вас уже есть конечной точки службы Azure добавлен tooVS Team Services, выберите подписку hello в hello **подписки Azure** раскрывающегося списка и нажмите кнопку Пропустить toohello следующего раздела.</span><span class="sxs-lookup"><span data-stu-id="ab902-143">If you already have an Azure service endpoint added tooVS Team Services, choose hello subscription in hello **Azure Subscription** drop-down list box and then skip toohello next section.</span></span> 
      
      <span data-ttu-id="ab902-144">Если нет конечной точки службы Azure в VS Team Services, необходимо tooadd один.</span><span class="sxs-lookup"><span data-stu-id="ab902-144">If you don’t have an Azure service endpoint in VS Team Services, you need tooadd one.</span></span> <span data-ttu-id="ab902-145">В этом подразделе описывается процесс hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-145">This subsection takes you through hello process.</span></span> <span data-ttu-id="ab902-146">Если учетная запись Azure использует учетную запись Майкрософт (например, Hotmail), необходимо выполнить следующие шаги tooget hello проверку подлинности субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="ab902-146">If your Azure account uses a Microsoft account (such as Hotmail), you must take hello following steps tooget a Service Principal authentication.</span></span>
   2. <span data-ttu-id="ab902-147">Выберите hello **управление** ссылку Далее toohello **подписки Azure** раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="ab902-147">Choose hello **Manage** link next toohello **Azure Subscription** drop-down list box.</span></span>
      
      ![Управление подписками Azure][3]
   3. <span data-ttu-id="ab902-149">Выберите **Azure** в hello **новую конечную точку службы** раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="ab902-149">Choose **Azure** in hello **New Service Endpoint** drop-down list box.</span></span>
      
      ![Новая конечная точка службы][4]
   4. <span data-ttu-id="ab902-151">В hello **добавления подписки Azure** диалоговое окно, выберите hello **участника-службы** параметр.</span><span class="sxs-lookup"><span data-stu-id="ab902-151">In hello **Add Azure Subscription** dialog box, select hello **Service Principal** option.</span></span>
      
      ![Параметр субъекта-службы][5]
   5. <span data-ttu-id="ab902-153">Добавить сведения о вашей подписке Azure toohello **добавления подписки Azure** диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="ab902-153">Add your Azure subscription information toohello **Add Azure Subscription** dialog box.</span></span> <span data-ttu-id="ab902-154">Требуется tooprovide hello следующих элементов:</span><span class="sxs-lookup"><span data-stu-id="ab902-154">You need tooprovide hello following items:</span></span>
      
      * <span data-ttu-id="ab902-155">идентификатор подписки;</span><span class="sxs-lookup"><span data-stu-id="ab902-155">Subscription Id</span></span>
      * <span data-ttu-id="ab902-156">Название подписки</span><span class="sxs-lookup"><span data-stu-id="ab902-156">Subscription Name</span></span>
      * <span data-ttu-id="ab902-157">идентификатор субъекта-службы;</span><span class="sxs-lookup"><span data-stu-id="ab902-157">Service Principal Id</span></span>
      * <span data-ttu-id="ab902-158">ключ субъекта-службы;</span><span class="sxs-lookup"><span data-stu-id="ab902-158">Service Principal Key</span></span>
      * <span data-ttu-id="ab902-159">Идентификатор клиента</span><span class="sxs-lookup"><span data-stu-id="ab902-159">Tenant Id</span></span>
   6. <span data-ttu-id="ab902-160">Добавьте имя вашего выбора toohello **подписки** поле «имя».</span><span class="sxs-lookup"><span data-stu-id="ab902-160">Add a name of your choice toohello **Subscription** name box.</span></span> <span data-ttu-id="ab902-161">Это значение отображается в hello **подписки Azure** раскрывающегося списка в VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="ab902-161">This value appears later in hello **Azure Subscription** drop-down list in VS Team Services.</span></span> 
   7. <span data-ttu-id="ab902-162">Если вы не знаете идентификатор подписки Azure, можно использовать один из следующих команд tooretrieve hello его.</span><span class="sxs-lookup"><span data-stu-id="ab902-162">If you don’t know your Azure subscription ID, you can use one of hello following commands tooretrieve it.</span></span>
      
      <span data-ttu-id="ab902-163">Для сценариев Azure PowerShell:</span><span class="sxs-lookup"><span data-stu-id="ab902-163">For PowerShell scripts, use:</span></span>
      
      `Get-AzureRmSubscription`
      
      <span data-ttu-id="ab902-164">Для интерфейса командной строки Azure:</span><span class="sxs-lookup"><span data-stu-id="ab902-164">For Azure CLI, use:</span></span>
      
      `azure account show`
   8. <span data-ttu-id="ab902-165">tooget идентификатор субъекта-службы ключ субъекта-службы и идентификатор клиента, выполните процедуру hello в [Active Directory, создать приложение и участника службы с помощью портала](resource-group-create-service-principal-portal.md) или [участника службы с проверкой подлинности Диспетчер ресурсов Azure](resource-group-authenticate-service-principal.md).</span><span class="sxs-lookup"><span data-stu-id="ab902-165">tooget a Service Principal ID, Service Principal Key, and Tenant ID, follow hello procedure in [Create Active Directory application and service principal using portal](resource-group-create-service-principal-portal.md) or [Authenticating a service principal with Azure Resource Manager](resource-group-authenticate-service-principal.md).</span></span>
   9. <span data-ttu-id="ab902-166">Добавить hello идентификатор участника службы, ключ субъекта-службы и идентификатор клиента toohello значения **добавления подписки Azure** диалоговое окно и выбрать hello **ОК** кнопки.</span><span class="sxs-lookup"><span data-stu-id="ab902-166">Add hello Service Principal ID, Service Principal Key, and Tenant ID values toohello **Add Azure Subscription** dialog box and then choose hello **OK** button.</span></span>
      
      <span data-ttu-id="ab902-167">Теперь у вас есть hello toorun допустимый toouse участника-службы скрипт Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ab902-167">You now have a valid Service Principal toouse toorun hello Azure PowerShell script.</span></span>
5. <span data-ttu-id="ab902-168">Изменить определение сборки hello и выберите hello **Azure PowerShell** шаг сборки.</span><span class="sxs-lookup"><span data-stu-id="ab902-168">Edit hello build definition and choose hello **Azure PowerShell** build step.</span></span> <span data-ttu-id="ab902-169">Выберите подписку hello в hello **подписки Azure** раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="ab902-169">Select hello subscription in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="ab902-170">(Если hello подписки не отображается, выберите hello **обновление** кнопку Далее hello **управление** ссылку.)</span><span class="sxs-lookup"><span data-stu-id="ab902-170">(If hello subscription doesn't appear, choose hello **Refresh** button next hello **Manage** link.)</span></span> 
   
   ![Настройка задачи сборки Azure PowerShell][8]
6. <span data-ttu-id="ab902-172">Укажите путь toohello сценарий Deploy-AzureResourceGroup.ps1 PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ab902-172">Provide a path toohello Deploy-AzureResourceGroup.ps1 PowerShell script.</span></span> <span data-ttu-id="ab902-173">toodo это, выберите toohello далее кнопку с многоточием (...) hello **путь к скрипту** перейдите toohello сценария PowerShell Deploy-AzureResourceGroup.ps1 в hello **сценариев** папки проекта, выберите его, а затем выберите hello **ОК** кнопки.</span><span class="sxs-lookup"><span data-stu-id="ab902-173">toodo this, choose hello ellipsis (…) button next toohello **Script Path** box, navigate toohello Deploy-AzureResourceGroup.ps1 PowerShell script in hello **Scripts** folder of your project, select it, and then choose hello **OK** button.</span></span>    
   
   ![Выберите путь tooscript][9]
7. <span data-ttu-id="ab902-175">После выбора сценария hello hello путь toohello скрипт обновления, чтобы ее запуск выполняется из hello Build.StagingDirectory (hello же каталоге, *ArtifactsLocation* имеет значение).</span><span class="sxs-lookup"><span data-stu-id="ab902-175">After you select hello script, update hello path toohello script so that it’s run from hello Build.StagingDirectory (hello same directory that *ArtifactsLocation* is set to).</span></span> <span data-ttu-id="ab902-176">Это можно сделать, добавив «$(Build.StagingDirectory)/ «toohello начало путь к скрипту hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-176">You can do this by adding “$(Build.StagingDirectory)/” toohello beginning of hello script path.</span></span>
   
    ![Измените путь tooscript][10]
8. <span data-ttu-id="ab902-178">В hello **аргументы сценария** введите hello следующие параметры (в одной строке).</span><span class="sxs-lookup"><span data-stu-id="ab902-178">In hello **Script Arguments** box, enter hello following parameters (in a single line).</span></span> <span data-ttu-id="ab902-179">При запуске скрипта hello в Visual Studio, можно увидеть, как используется VS hello параметров в hello **вывода** окна.</span><span class="sxs-lookup"><span data-stu-id="ab902-179">When you run hello script in Visual Studio, you can see how VS uses hello parameters in hello **Output** window.</span></span> <span data-ttu-id="ab902-180">Это можно использовать в качестве отправной точки для задания значений параметров hello в этапа построения.</span><span class="sxs-lookup"><span data-stu-id="ab902-180">You can use this as a starting point for setting hello parameter values in your build step.</span></span>
   
   | <span data-ttu-id="ab902-181">Параметр</span><span class="sxs-lookup"><span data-stu-id="ab902-181">Parameter</span></span> | <span data-ttu-id="ab902-182">Описание</span><span class="sxs-lookup"><span data-stu-id="ab902-182">Description</span></span> |
   | --- | --- |
   | <span data-ttu-id="ab902-183">-ResourceGroupLocation</span><span class="sxs-lookup"><span data-stu-id="ab902-183">-ResourceGroupLocation</span></span> |<span data-ttu-id="ab902-184">Здравствуйте, значение географического расположения, где hello находится группа ресурсов, таких как **eastus** или **«Восток США»**.</span><span class="sxs-lookup"><span data-stu-id="ab902-184">hello geo-location value where hello resource group is located, such as **eastus** or **'East US'**.</span></span> <span data-ttu-id="ab902-185">(Добавить одинарные кавычки, если имеется пробел в имени hello.) Дополнительные сведения см. в статье о [регионах Azure](https://azure.microsoft.com/en-us/regions/).</span><span class="sxs-lookup"><span data-stu-id="ab902-185">(Add single quotes if there's a space in hello name.) See [Azure Regions](https://azure.microsoft.com/en-us/regions/) for more information.</span></span> |
   | <span data-ttu-id="ab902-186">-ResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="ab902-186">-ResourceGroupName</span></span> |<span data-ttu-id="ab902-187">Имя группы ресурсов hello, используемой для этого развертывания Hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-187">hello name of hello resource group used for this deployment.</span></span> |
   | <span data-ttu-id="ab902-188">-UploadArtifacts</span><span class="sxs-lookup"><span data-stu-id="ab902-188">-UploadArtifacts</span></span> |<span data-ttu-id="ab902-189">Этот параметр, если присутствует, указывает, артефакты, которые должны toobe загружен tooAzure из локальной системы hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-189">This parameter, when present, specifies that artifacts that need toobe uploaded tooAzure from hello local system.</span></span> <span data-ttu-id="ab902-190">Только tooset данный параметр необходим, если развертывание шаблона требует дополнительных артефактов, которые должны toostage, с помощью сценария PowerShell hello (например, сценарии настройки или вложенные шаблоны).</span><span class="sxs-lookup"><span data-stu-id="ab902-190">You only need tooset this switch if your template deployment requires extra artifacts that you want toostage using hello PowerShell script (such as configuration scripts or nested templates).</span></span> |
   | <span data-ttu-id="ab902-191">-StorageAccountName</span><span class="sxs-lookup"><span data-stu-id="ab902-191">-StorageAccountName</span></span> |<span data-ttu-id="ab902-192">Имя учетной записи хранилища hello Hello используется toostage артефакты для этого развертывания.</span><span class="sxs-lookup"><span data-stu-id="ab902-192">hello name of hello storage account used toostage artifacts for this deployment.</span></span> <span data-ttu-id="ab902-193">Этот параметр используется только в том случае, если применяется промежуточное хранение артефактов для развертывания.</span><span class="sxs-lookup"><span data-stu-id="ab902-193">This parameter is only used if you are staging artifacts for deployment.</span></span> <span data-ttu-id="ab902-194">Если этот параметр задан, новую учетную запись хранения создается в том случае, если скрипт hello не создан во время предыдущего развертывания.</span><span class="sxs-lookup"><span data-stu-id="ab902-194">If this parameter is supplied, a new storage account is created if hello script has not created one during a previous deployment.</span></span> <span data-ttu-id="ab902-195">Если указан параметр hello, hello учетной записи хранения уже должна существовать.</span><span class="sxs-lookup"><span data-stu-id="ab902-195">If hello parameter is specified, hello storage account must already exist.</span></span> |
   | <span data-ttu-id="ab902-196">-StorageAccountResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="ab902-196">-StorageAccountResourceGroupName</span></span> |<span data-ttu-id="ab902-197">Имя группы ресурсов hello, связанный с учетной записью хранения hello Hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-197">hello name of hello resource group associated with hello storage account.</span></span> <span data-ttu-id="ab902-198">Этот параметр является обязательным только в том случае, если указать значение для параметра StorageAccountName hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-198">This parameter is required only if you provide a value for hello StorageAccountName parameter.</span></span> |
   | <span data-ttu-id="ab902-199">-TemplateFile</span><span class="sxs-lookup"><span data-stu-id="ab902-199">-TemplateFile</span></span> |<span data-ttu-id="ab902-200">Hello путь к файлу шаблона toohello в проект развертывания группы ресурсов Azure hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-200">hello path toohello template file in hello Azure Resource Group deployment project.</span></span> <span data-ttu-id="ab902-201">гибкость tooenhance, используйте путь для этого параметра, toohello относительное расположение hello сценарий PowerShell, а не является абсолютным.</span><span class="sxs-lookup"><span data-stu-id="ab902-201">tooenhance flexibility, use a path for this parameter that is relative toohello location of hello PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="ab902-202">-TemplateParametersFile</span><span class="sxs-lookup"><span data-stu-id="ab902-202">-TemplateParametersFile</span></span> |<span data-ttu-id="ab902-203">Hello путь к файлу параметров toohello в проект развертывания группы ресурсов Azure hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-203">hello path toohello parameters file in hello Azure Resource Group deployment project.</span></span> <span data-ttu-id="ab902-204">гибкость tooenhance, используйте путь для этого параметра, toohello относительное расположение hello сценарий PowerShell, а не является абсолютным.</span><span class="sxs-lookup"><span data-stu-id="ab902-204">tooenhance flexibility, use a path for this parameter that is relative toohello location of hello PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="ab902-205">-ArtifactStagingDirectory</span><span class="sxs-lookup"><span data-stu-id="ab902-205">-ArtifactStagingDirectory</span></span> |<span data-ttu-id="ab902-206">Этот параметр позволяет сценарий PowerShell hello знать hello папки, из которой следует копировать двоичные файлы проекта hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-206">This parameter lets hello PowerShell script know hello folder from where hello project’s binary files should be copied.</span></span> <span data-ttu-id="ab902-207">Это значение переопределяет значение по умолчанию hello, используемые hello сценарий PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ab902-207">This value overrides hello default value used by hello PowerShell script.</span></span> <span data-ttu-id="ab902-208">Для использования VS Team Services, установите значение hello: $(Build.StagingDirectory) - ArtifactStagingDirectory</span><span class="sxs-lookup"><span data-stu-id="ab902-208">For VS Team Services use, set hello value to: -ArtifactStagingDirectory $(Build.StagingDirectory)</span></span> |
   
   <span data-ttu-id="ab902-209">Ниже приведен пример аргументов сценария (разрывы строк — для удобства чтения):</span><span class="sxs-lookup"><span data-stu-id="ab902-209">Here’s a script arguments example (line broken for readability):</span></span>
   
   ```    
   -ResourceGroupName 'MyGroup' -ResourceGroupLocation 'eastus' -TemplateFile '..\templates\azuredeploy.json' 
   -TemplateParametersFile '..\templates\azuredeploy.parameters.json' -UploadArtifacts -StorageAccountName 'mystorageacct' 
   –StorageAccountResourceGroupName 'Default-Storage-EastUS' -ArtifactStagingDirectory '$(Build.StagingDirectory)'    
   ```
   
   <span data-ttu-id="ab902-210">После завершения hello **аргументы сценария** поле должен быть похож на следующий список hello:</span><span class="sxs-lookup"><span data-stu-id="ab902-210">When you’re finished, hello **Script Arguments** box should resemble hello following list:</span></span>
   
   ![Аргументы сценария][11]
9. <span data-ttu-id="ab902-212">После добавления всех hello Azure PowerShell шага построения toohello необходимые элементы, выберите hello **очереди** построения проекта hello toobuild кнопки.</span><span class="sxs-lookup"><span data-stu-id="ab902-212">After you’ve added all hello required items toohello Azure PowerShell build step, choose hello **Queue** build button toobuild hello project.</span></span> <span data-ttu-id="ab902-213">Hello **построения** экрана показаны выходные данные hello hello сценарий PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ab902-213">hello **Build** screen shows hello output from hello PowerShell script.</span></span>

### <a name="detailed-walkthrough-for-option-2"></a><span data-ttu-id="ab902-214">Подробное пошаговое руководство для варианта 2</span><span class="sxs-lookup"><span data-stu-id="ab902-214">Detailed walkthrough for Option 2</span></span>
<span data-ttu-id="ab902-215">Hello следующие процедуры описывают hello действия необходимые tooconfigure непрерывного развертывания в VS Team Services с помощью встроенных задач hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-215">hello following procedures walk you through hello steps necessary tooconfigure continuous deployment in VS Team Services using hello built-in tasks.</span></span>

1. <span data-ttu-id="ab902-216">Изменение вашей VS Team Services определения tooadd две новые сборки этапы построения.</span><span class="sxs-lookup"><span data-stu-id="ab902-216">Edit your VS Team Services build definition tooadd two new build steps.</span></span> <span data-ttu-id="ab902-217">Выберите определение сборки hello под hello **определений сборки** категорию и выберите hello **изменить** ссылку.</span><span class="sxs-lookup"><span data-stu-id="ab902-217">Choose hello build definition under hello **Build definitions** category and then choose hello **Edit** link.</span></span>
   
   ![Изменение определения сборки][12]
2. <span data-ttu-id="ab902-219">Hello добавить новые шаги построения toohello определение сборки, с помощью hello **добавить шаг сборки...**</span><span class="sxs-lookup"><span data-stu-id="ab902-219">Add hello new build steps toohello build definition using hello **Add build step…**</span></span> <span data-ttu-id="ab902-220">.</span><span class="sxs-lookup"><span data-stu-id="ab902-220">button.</span></span>
   
   ![Добавление шага сборки][13]
3. <span data-ttu-id="ab902-222">Выберите hello **развернуть** категории задач, выберите hello **копирование файлов Azure** задач, а затем выберите его **добавить** кнопки.</span><span class="sxs-lookup"><span data-stu-id="ab902-222">Choose hello **Deploy** task category, select hello **Azure File Copy** task, and then choose its **Add** button.</span></span>
   
   ![Добавление задачи копирования файлов Azure][14]
4. <span data-ttu-id="ab902-224">Выберите hello **развертывания группы ресурсов Azure** задач, а затем выберите его **добавить** кнопки и затем **закрыть** hello **задачи каталога**.</span><span class="sxs-lookup"><span data-stu-id="ab902-224">Choose hello **Azure Resource Group Deployment** task, then choose its **Add** button and then **Close** hello **Task Catalog**.</span></span>
   
   ![Добавление задачи развертывания группы ресурсов Azure][15]
5. <span data-ttu-id="ab902-226">Выберите hello **копирование файлов Azure** задач и заполните его значения.</span><span class="sxs-lookup"><span data-stu-id="ab902-226">Choose hello **Azure File Copy** task and fill in its values.</span></span>
   
   <span data-ttu-id="ab902-227">Если у вас уже есть конечной точки службы Azure добавлен tooVS Team Services, выберите подписку hello в hello **подписки Azure** раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="ab902-227">If you already have an Azure service endpoint added tooVS Team Services, choose hello subscription in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="ab902-228">Если у вас нет подписки, ознакомьтесь с [вариантом 1](#detailed-walkthrough-for-option-1), чтобы получить инструкции по ее настройке в VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="ab902-228">If you do not have a subscription, see [Option 1](#detailed-walkthrough-for-option-1) for instructions on setting one up in VS Team Services.</span></span>
   
   * <span data-ttu-id="ab902-229">"Источник": введите **$(Build.StagingDirectory)**.</span><span class="sxs-lookup"><span data-stu-id="ab902-229">Source - enter **$(Build.StagingDirectory)**</span></span>
   * <span data-ttu-id="ab902-230">"Тип подключения Azure": выберите **Azure Resource Manager**.</span><span class="sxs-lookup"><span data-stu-id="ab902-230">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="ab902-231">Подписка Azure RM - выберите hello подписки для учетной записи хранения hello требуется toouse в hello **подписки Azure** раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="ab902-231">Azure RM Subscription - select hello subscription for hello storage account you want toouse in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="ab902-232">Если подписка hello не отображается, выберите hello **обновление** кнопку Далее hello **управление** ссылку.</span><span class="sxs-lookup"><span data-stu-id="ab902-232">If hello subscription doesn't appear, choose hello **Refresh** button next hello **Manage** link.</span></span>
   * <span data-ttu-id="ab902-233">"Тип назначения": выберите **BLOB-объект Azure**.</span><span class="sxs-lookup"><span data-stu-id="ab902-233">Destination Type - select **Azure Blob**</span></span>
   * <span data-ttu-id="ab902-234">RM учетной записи хранения - выберите учетную запись хранилища hello, вы хотите toouse для промежуточных артефактов</span><span class="sxs-lookup"><span data-stu-id="ab902-234">RM Storage Account - select hello storage account you would like toouse for staging artifacts</span></span>
   * <span data-ttu-id="ab902-235">Имя контейнера — введите имя hello контейнера hello хотелось бы toouse для промежуточного хранения; она может быть любое допустимое имя контейнера, но использовать одно определение построения выделенный toothis</span><span class="sxs-lookup"><span data-stu-id="ab902-235">Container Name - enter hello name of hello container you would like toouse for staging; it can be any valid container name, but use one dedicated toothis build definition</span></span>
   
   <span data-ttu-id="ab902-236">Для вывода значений hello:</span><span class="sxs-lookup"><span data-stu-id="ab902-236">For hello output values:</span></span>
   
   * <span data-ttu-id="ab902-237">"Код URI контейнера хранилища": введите **artifactsLocation**.</span><span class="sxs-lookup"><span data-stu-id="ab902-237">Storage Container URI - enter **artifactsLocation**</span></span>
   * <span data-ttu-id="ab902-238">"Токен SAS контейнера хранилища": введите **artifactsLocationSasToken**.</span><span class="sxs-lookup"><span data-stu-id="ab902-238">Storage Container SAS Token - enter **artifactsLocationSasToken**</span></span>
   
   ![Настройка задачи копирования файлов Azure][16]
6. <span data-ttu-id="ab902-240">Выберите hello **развертывания группы ресурсов Azure** шаг сборки и заполните его значения.</span><span class="sxs-lookup"><span data-stu-id="ab902-240">Choose hello **Azure Resource Group Deployment** build step and then fill in its values.</span></span>
   
   * <span data-ttu-id="ab902-241">"Тип подключения Azure": выберите **Azure Resource Manager**.</span><span class="sxs-lookup"><span data-stu-id="ab902-241">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="ab902-242">Подписка Azure RM - hello выберите подписку для развертывания в hello **подписки Azure** раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="ab902-242">Azure RM Subscription - select hello subscription for deployment in hello **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="ab902-243">В предыдущем шаге hello обычно это будет использовать ту же подписку hello</span><span class="sxs-lookup"><span data-stu-id="ab902-243">This will usually be hello same subscription used in hello previous step</span></span>
   * <span data-ttu-id="ab902-244">"Действие": выберите **Create or Update Resource Group** (Создание или изменение группы ресурсов).</span><span class="sxs-lookup"><span data-stu-id="ab902-244">Action - select **Create or Update Resource Group**</span></span>
   * <span data-ttu-id="ab902-245">Группа ресурсов — выберите группу ресурсов или введите hello имя группы ресурсов для развертывания hello</span><span class="sxs-lookup"><span data-stu-id="ab902-245">Resource Group - select a resource group or enter hello name of a new resource group for hello deployment</span></span>
   * <span data-ttu-id="ab902-246">Расположение — hello выберите расположение для группы ресурсов hello</span><span class="sxs-lookup"><span data-stu-id="ab902-246">Location - select hello location for hello resource group</span></span>
   * <span data-ttu-id="ab902-247">Шаблон - введите hello путь и имя для добавляя toobe развертывания шаблона hello **$(Build.StagingDirectory)**, например: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span><span class="sxs-lookup"><span data-stu-id="ab902-247">Template - enter hello path and name of hello template toobe deployed prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span></span>
   * <span data-ttu-id="ab902-248">Введите параметры шаблона - hello путь и имя toobe параметры hello используется, добавляя **$(Build.StagingDirectory)**, например: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span><span class="sxs-lookup"><span data-stu-id="ab902-248">Template Parameters - enter hello path and name of hello parameters toobe used, prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span></span>
   * <span data-ttu-id="ab902-249">Переопределение параметров шаблона — введите или скопируйте и вставьте следующий код hello:</span><span class="sxs-lookup"><span data-stu-id="ab902-249">Override Template Parameters - enter or copy and paste hello following code:</span></span>
     
     ```    
     -_artifactsLocation $(artifactsLocation) -_artifactsLocationSasToken (ConvertTo-SecureString -String "$(artifactsLocationSasToken)" -AsPlainText -Force)
     ```
     ![Настройка задачи развертывания группы ресурсов Azure][17]
7. <span data-ttu-id="ab902-251">После добавления всех элементов hello требуется сохранить определение сборки hello и выберите **в очередь новую сборку** вверху hello.</span><span class="sxs-lookup"><span data-stu-id="ab902-251">After you’ve added all hello required items, save hello build definition and choose **Queue new build** at hello top.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ab902-252">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="ab902-252">Next steps</span></span>
<span data-ttu-id="ab902-253">Чтение [Обзор диспетчера ресурсов Azure](azure-resource-manager/resource-group-overview.md) toolearn Дополнительные сведения о диспетчере ресурсов Azure и группы ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="ab902-253">Read [Azure Resource Manager overview](azure-resource-manager/resource-group-overview.md) toolearn more about Azure Resource Manager and Azure resource groups.</span></span>

[0]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough1.png
[1]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough2.png
[2]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough3.png
[3]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough4.png
[4]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough5.png
[5]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough6.png
[8]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough9.png
[9]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough10.png
[10]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough11b.png
[11]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough12.png
[12]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough13.png
[13]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough14.png
[14]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough15.png
[15]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough16.png
[16]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough17.png
[17]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough18.png
