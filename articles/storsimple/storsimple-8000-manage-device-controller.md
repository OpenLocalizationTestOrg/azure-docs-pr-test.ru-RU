---
title: "Управление контроллерами устройства StorSimple серии 8000 | Документация Майкрософт"
description: "Узнайте, как остановить, перезапустить и выключить контроллеры устройства StorSimple или восстановить их заводские настройки."
services: storsimple
documentationcenter: 
author: alkohli
manager: timlt
editor: 
ms.assetid: 
ms.service: storsimple
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/19/2017
ms.author: alkohli
ms.openlocfilehash: 75c1bdb570967b6d1902697597f0b5bf3f4ffb7c
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="manage-your-storsimple-device-controllers"></a>Управление контроллерами устройства StorSimple

## <a name="overview"></a>Обзор

В этом учебнике описываются различные операции, которые могут быть выполнены на контроллерах устройства StorSimple. Контроллеры устройства StorSimple являются избыточными (узловыми) контроллерами в конфигурации активный/пассивный. В один момент времени только один контроллер активен и обрабатывает все операции с диском и сетевые операции. Другой контроллер находится в пассивном режиме. При сбое активного контроллера пассивный контроллер автоматически становится активным.

Этот учебник содержит пошаговые инструкции для управления контроллерами устройства с помощью:

* Колонка **Контроллеры** вашего устройства в службе диспетчера устройств StorSimple.
* Windows PowerShell для StorSimple.

Рекомендуется управлять контроллерами устройств через службу диспетчера устройств StorSimple. Если действие можно выполнить только с помощью Windows PowerShell для StorSimple, в учебном курсе будет соответствующая пометка.

После изучения этого учебника вы сможете сделать следующее.

* Перезагрузить или завершить работу контроллера устройства StorSimple.
* Завершить работу устройства StorSimple.
* Восстановить параметры по умолчанию устройства StorSimple.

## <a name="restart-or-shut-down-a-single-controller"></a>Перезагрузка или завершение работы отдельного контроллера
Перезагрузка или завершение работы контроллера не являются обязательными в ходе нормальной работы системы. Операции завершения работы для отдельного контроллера устройства являются стандартными только в случаях, когда необходимо заменить отказавший аппаратный компонент устройства. Необходимость в перезагрузке контроллера может также возникнуть в ситуации, когда на производительность влияет избыточное использование памяти или неработающий контроллер. Перезагрузка контроллера может потребоваться после успешной замены контроллера, если вы хотите включить и протестировать замененный контроллер.

Перезагрузка устройства не нарушает работу подключенных инициаторов при условии, что доступен пассивный контроллер. Если пассивный контроллер недоступен или выключен, то перезагрузка активного контроллера может привести к нарушению работы службы и простою.

> [!IMPORTANT]
> * **Работающий контроллер никогда нельзя удалять физически, так как это приведет к потере избыточности и повысит риск простоя.**
> * Следующая процедура относится только к физическому устройству StorSimple. Сведения о том, как запускать, останавливать и перезапускать облачное устройство StorSimple, см. в статье [Развертывание и администрирование облачного устройства StorSimple в Azure (обновление 3 и более поздние версии)](storsimple-8000-cloud-appliance-u2.md##work-with-the-storsimple-cloud-appliance).

Перезапустить или выключить отдельный контроллер устройства можно через портал Azure службы диспетчера устройств StorSimple или Windows PowerShell для StorSimple.

Чтобы управлять контроллерами устройства на портале Azure, выполните следующие действия.

#### <a name="to-restart-or-shut-down-a-controller-in-azure-portal"></a>Перезагрузка или выключение контроллера на портале Azure
1. В службе диспетчера устройств StorSimple перейдите к **Устройства**. Выберите устройство из списка устройств. 

    ![Выбор устройства](./media/storsimple-8000-manage-device-controller/manage-controller1.png)

2. Последовательно выберите **Параметры > Контроллеры**.
   
    ![Проверка работоспособности контроллеров устройства StorSimple](./media/storsimple-8000-manage-device-controller/manage-controller2.png)
3. В колонке **Контроллеры** убедитесь, что состояние контроллеров на вашем устройстве — **Исправно**. Выберите контроллер, щелкните его правой кнопкой мыши и выберите **Перезагрузить** или **Завершение работы**.

    ![Выбор перезагрузки или завершения работы контроллера устройства StorSimple](./media/storsimple-8000-manage-device-controller/manage-controller3.png)

4. Создается задание для перезагрузки или завершения работы контроллера. Вы можете получить соответствующие предупреждения. Для мониторинга перезагрузки или завершения работы перейдите к **Служба > Журналы действий** и отфильтруйте по параметрам, относящимся к службе. Если контроллер завершил работу, нужно нажать кнопку включения питания, чтобы снова включить его.

#### <a name="to-restart-or-shut-down-a-controller-in-windows-powershell-for-storsimple"></a>Перезагрузка или завершение работы контроллера в Windows PowerShell для StorSimple
Выполните следующие действия, чтобы выключить или перезагрузить отдельный контроллер устройства StorSimple с Windows PowerShell для StorSimple.

1. Получите доступ к устройству через последовательную консоль или сеанс telnet с удаленного компьютера. Чтобы подключиться к контроллеру 0 или 1, выполните действия, описанные в разделе [Подключение к последовательной консоли устройства с помощью PuTTY](storsimple-8000-deployment-walkthrough-u2.md#use-putty-to-connect-to-the-device-serial-console).
2. В меню последовательной консоли выберите вариант 1 **Войти с полным доступом**.
3. В сообщении заголовка проверьте, к какому контроллеру вы подключены (контроллер 0 или контроллер 1), а также является ли этот контроллер активным или пассивным (резервным).
   
   * Чтобы завершить работу отдельного контроллера, в командной строке введите следующую команду:
     
       `Stop-HcsController`
     
       Это завершит работу контроллера, к которому вы подключены. Если остановить активный контроллер, то устройство выполнит отработку отказа на пассивный контроллер.

   * Чтобы перезагрузить контроллер, в командной строке введите следующую команду:
     
       `Restart-HcsController`
     
       Это перезагрузит контроллер, к которому вы подключены. Если перезагрузить активный контроллер, он выполнит отработку отказа на пассивный контроллер перед перезагрузкой.

## <a name="shut-down-a-storsimple-device"></a>Завершить работу устройства StorSimple.

В этом разделе объясняется, как завершить работу работающего или отказавшего устройства StorSimple с удаленного компьютера. Устройство выключается после завершения работы обоих контроллеров. Завершение работы устройства выполняется, когда оно физически перемещается или извлекается из службы.

> [!IMPORTANT]
> Перед завершением работы устройства проверьте работоспособность компонентов устройства. Перейдите к устройству и щелкните **Параметры > Работоспособность оборудования**. В колонке **Работоспособность оборудования** убедитесь, что индикаторы состояния для всех компонентов зеленого цвета. Только работоспособные устройства имеют зеленый индикатор. Если работа устройства завершается, чтобы заменить неработающий компонент, появится состояние сбоя (красный) или ухудшения (желтый) для соответствующих компонентов.


#### <a name="to-shut-down-a-storsimple-device"></a>Завершение работы устройства StorSimple

1. Используйте процедуру [перезагрузки или завершения работы контроллера](#restart-or-shut-down-a-single-controller) для идентификации и завершения работы пассивного контроллера на устройстве. Эту операцию можно выполнить на портале Azure или в Windows PowerShell для StorSimple.
2. Повторите предыдущее действие для выключения активного контроллера.
3. Теперь взгляните на заднюю панель устройства. После полного выключения двух контроллеров индикаторы состояния на обоих контроллерах должны мигать красным. Если в данный момент необходимо отключить устройство полностью, переместите переключатели модуля питания и охлаждения (PCM) в положение ВЫКЛ. При этом устройство будет отключено.

## <a name="reset-the-device-to-factory-default-settings"></a>Восстановление на устройстве заводских настроек

> [!IMPORTANT]
> Если требуется восстановить заводские настройки устройства по умолчанию, обратитесь в службу технической поддержки Майкрософт. Описанная ниже процедура должна применяться только при согласовании со службой технической поддержки Майкрософт.

Эта процедура описывает, как восстановить заводские настройки по умолчанию на устройстве Microsoft Azure StorSimple с помощью Windows PowerShell для StorSimple.
При сбросе настроек устройства будут удалены все данные и параметры из всего кластера по умолчанию.

Выполните следующие действия, чтобы восстановить заводские настройки устройства Microsoft Azure StorSimple.

### <a name="to-reset-the-device-to-default-settings-in-windows-powershell-for-storsimple"></a>Восстановление параметров устройства по умолчанию в Windows PowerShell для StorSimple
1. Получите доступ к устройству через его последовательную консоль. Проверьте сообщение заголовка, чтобы убедиться, что вы подключены к **активному** контроллеру.
2. В меню последовательной консоли выберите вариант 1 **Войти с полным доступом**.
3. В командной строке введите следующую команду, чтобы сбросить настройки всего кластера с удалением всех данных, метаданных и параметров контроллера:
   
    `Reset-HcsFactoryDefault`
   
    Для сброса одного контроллера выполните командлет [Reset-HcsFactoryDefault](http://technet.microsoft.com/library/dn688132.aspx) с параметром `-scope`.
   
    Система перезагрузится несколько раз. После успешного восстановления заводских настроек вы получите уведомление. В зависимости от модели системы завершение этого процесса может занять 45–60 минут для устройства 8100 и 60–90 минут для устройства 8600.
   
## <a name="questions-and-answers-about-managing-device-controllers"></a>Часто задаваемые вопросы об управлении контроллерами устройства
В этом разделе мы собрали некоторые часто задаваемые вопросы об управлении контроллерами устройства StorSimple.

**Вопрос.** Что произойдет, если оба контроллера на устройстве включены и работоспособны, а я перезагружу или выключу активный контроллер?

**Ответ.** Если контроллеры на устройстве работоспособны и включены, отобразится запрос подтверждения. Можно выбрать следующие варианты.

* **Перезагрузить активный контроллер**. Вы получите уведомление о том, что перезагрузка активного контроллера приведет к отработке устройством отказа на пассивный контроллер. Контроллер будет перезапущен.
* **Завершить работу активного контроллера**. Вы получите уведомление о том, что завершение работы активного контроллера приведет к простою. Также необходимо нажать кнопку питания на устройстве, чтобы включить контроллер.

**Вопрос.** Что произойдет, если пассивный контроллер на устройстве недоступен или выключен, а я перезагружу или завершу работу активного контроллера?

**Ответ.** Если пассивный контроллер на устройстве недоступен или выключен, и вы выбираете:

* **Перезагрузить активный контроллер**. Вы получите уведомление о том, что продолжение операции приведет к временному нарушению работы службы, отобразится запрос подтверждения.
* **Завершить работу активного контроллера**.Вы получите уведомление о том, что продолжение операции приведет к простою. Также необходимо будет нажать кнопку включения питания на одном или обоих контроллерах, чтобы включить устройство. Появляется сообщение с предложением подтвердить операцию.

**Вопрос.** В каком случае возникнет сбой перезагрузки или завершения работы контроллера?

**Ответ.** Сбой перезагрузки или завершения работы контроллера может произойти, если:

* идет обновление устройства;
* перезагрузка контроллера уже выполняется;
* завершение работы контроллера уже выполняется.

**Вопрос.** Как можно выяснить факт перезагрузки или завершения работы контроллера?

**Ответ.** Состояние контроллера можно проверить в колонке контроллера. Состояние контроллера покажет, находится ли контроллер в процессе перезагрузки или завершения работы. Кроме того, в колонке **Оповещения** появится информационное оповещение о перезагрузке или завершении работы контроллера. Операции перезагрузки и завершения работы контроллера также записываются в журналы действий. Сведения о журналах действий см. в разделе [Просмотр журналов действий](storsimple-8000-service-dashboard.md#view-the-activity-logs).

**Вопрос.** Оказывает ли отработка отказа контроллера влияние на операции ввода-вывода?

**Ответ.** TCP-подключения между инициаторами и активным контроллером будут сброшены в результате отработки отказа контроллера, однако они будут восстановлены, когда пассивный контроллер примет операции. В ходе этой операции может быть временная (менее 30 секунд) приостановка операций ввода-вывода между инициаторами и устройством.

**Вопрос.** Как вернуть контроллер в службу после завершения работы и удаления?

**Ответ.** Чтобы вернуть контроллер в службу, нужно вставить его в корпус согласно инструкциям в разделе [Замена модуля контроллера в устройстве StorSimple](storsimple-8000-controller-replacement.md).

## <a name="next-steps"></a>Дальнейшие действия
* Если возникли затруднения с контроллерами устройства StorSimple, которые не удается разрешить с помощью процедур, описанных в этом учебнике, [обратитесь в службу поддержки Майкрософт](storsimple-8000-contact-microsoft-support.md).
* Дополнительные сведения об использовании службы диспетчера устройств StorSimple см. в статье [Использование службы диспетчера устройств StorSimple для администрирования устройства StorSimple](storsimple-8000-manager-service-administration.md).

