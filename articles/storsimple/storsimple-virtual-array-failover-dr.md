---
title: "aaaStorSimple Virtual Array аварийное восстановление и отработка отказа устройства | Документы Microsoft"
description: "Дополнительные сведения о toofailover виртуального массива StorSimple."
services: storsimple
documentationcenter: NA
author: alkohli
manager: timlt
editor: 
ms.assetid: 3c1f9c62-af57-4634-a0d8-435522d969aa
ms.service: storsimple
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 02/27/2017
ms.author: alkohli
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 5f125efd1ffb94489cdfa7cfaafae7d57cc10131
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="disaster-recovery-and-device-failover-for-your-storsimple-virtual-array-via-azure-portal"></a>Аварийное восстановление и отработка отказа устройства для виртуального массива StorSimple на портале Azure

## <a name="overview"></a>Обзор
Данная статья содержит hello аварийного восстановления для Microsoft Azure StorSimple Virtual массива, включая hello Подробное пошаговое toofail tooanother виртуального массива. Отработки отказа позволяет toomove данные из *источника* устройство в hello datacenter tooa *целевой* устройства. Hello целевое устройство может быть расположен в hello того же или другом географическом расположении. отработка отказа устройства Hello — для всей устройства hello. Во время отработки отказа hello облачных данных для исходного устройства hello изменяет toothat владения hello целевого устройства.

Эта статья является tooStorSimple применимо только виртуальных массивов. toofail устройствами серии 8000 go слишком[устройства отработки отказа и аварийного восстановления устройства StorSimple](storsimple-device-failover-disaster-recovery.md).

## <a name="what-is-disaster-recovery-and-device-failover"></a>Что такое аварийное восстановление и отработка отказа устройства?

В сценарии аварийного восстановления (DR) основное устройство hello перестает работать. В этом сценарии можно переместить hello облачные данные, связанные с устройством tooanother hello отказавшего устройства. Hello основное устройство можно использовать в качестве hello *источника* и укажите другое устройство в качестве hello *целевой*. Этот процесс — hello ссылка tooas *перехода на другой ресурс*. Во время перехода на другой ресурс все hello тома или hello общих ресурсов с исходного устройства hello меняют владельца и передаются toohello целевого устройства. Фильтрация данных hello не допускается.

Аварийное Восстановление моделируется как восстановления полной устройства с помощью hello тепловой карты на основе уровней и отслеживания. Карта температур определяется путем назначения toohello значение температур данные, основанные на чтение и запись шаблонов. Это тепловая сопоставления, то уровней hello наименьшее toohello облако блоки температур данных сначала сохраняя блоков данных hello высоких температур (наиболее используемых) на локальном уровне hello. Во время аварийного восстановления StorSimple использует hello тепловой карты toorestore и повторно заполнить hello данных из облака hello. устройство Hello извлекает все hello томов и общих папок в hello последнего последней резервной копии (по определению внутренне) и выполняется восстановление из резервной копии. виртуальный массив Hello управляет hello всего процесса аварийного восстановления.

> [!IMPORTANT]
> Hello исходное устройство удаляется в конце hello отработки отказа устройства и поэтому не поддерживается восстановление размещения.
> 
> 

Аварийное восстановление, управляемые через функцию отработки отказа устройства hello и инициированный hello **устройств** колонку. Включение всех hello StorSimple устройств подключенных tooyour устройства в службе StorSimple Manager в эту колонку. Для каждого устройства можно просмотреть hello понятное имя, состояние, подготовлена и максимальная емкость, тип и модели.

## <a name="prerequisites-for-device-failover"></a>Предварительные требования для отработки отказа устройства

### <a name="prerequisites"></a>Предварительные требования

Отработки отказа устройства убедитесь, что hello следующие необходимые условия выполнены.

* Hello исходного устройства необходимо toobe в **деактивирован** состояния.
* Hello целевого устройства должна tooshow копии как **готов tooset копирование** в hello портал Azure. Подготовка виртуального целевой массив hello емкости одной или более поздней версии. Используйте tooconfigure пользовательского интерфейса локального web hello и успешной регистрации hello целевого виртуального массива.
  
  > [!IMPORTANT]
  > Не пытайтесь tooconfigure hello зарегистрированных виртуального устройства через службу hello. Настройка устройства не должно выполняться через службу hello.
  > 
  > 
* Hello целевого устройства не могут иметь одинаковые имена, как исходное устройство hello hello.
* Hello исходных и целевых устройств имеют toobe hello того же типа. Кроме того, могут только отработку отказа виртуальных массивов, настроенных как файл tooanother файлового сервера. Hello то же верно для iSCSI-сервера.
* Для файлового сервера аварийного восстановления, рекомендуется присоединения hello целевого устройства toohello же домене, что источник hello. Эта конфигурация гарантирует, что разрешения для общего ресурса hello разрешаются автоматически. Только hello отработки отказа tooa целевое устройство в hello того же домена.
* Hello доступные целевые устройства для ав — hello устройствах с таким же или больший размер по сравнению toohello исходного устройства. Hello устройства, подключенного tooyour службы, но не отвечающие hello условию достаточного пространства не доступны как целевые устройства.

### <a name="other-considerations"></a>Дополнительные рекомендации

* Для плановой отработки отказа 
  
  * Рекомендуется, чтобы занять все hello папки или тома на устройстве источника hello вне сети.
  * Рекомендуется создать резервную копию устройства hello и затем продолжить с потерей данных toominimize hello отработки отказа. 
* Для незапланированной отработки отказа hello устройство использует hello самые последние данные резервного копирования toorestore hello.

### <a name="device-failover-prechecks"></a>Проверки перед отработкой отказа устройства

Прежде чем hello начинается аварийного восстановления hello устройство выполняет prechecks. Это позволяет избежать некоторых ошибок, которые могут возникнуть в процессе аварийного восстановления. следующие Hello prechecks.

* Проверка учетной записи хранилища hello.
* Проверка подключения tooAzure hello облака.
* Идет проверка доступного места на целевом устройстве hello.
* проверка в томе устройства исходного сервера iSCSI:
  
  * допустимых имен ACR;
  * допустимых значений IQN (не более 220 символов);
  * правильных паролей CHAP (12–16 символов).

В случае сбоя любой из предыдущих prechecks hello невозможно продолжить hello аварийного восстановления. Устраните обнаруженные проблемы и повторно запустите аварийное восстановление.

После успешного завершения hello DR hello владения hello облачные данные на устройстве hello источника — переносятся toohello целевое устройство. Hello исходное устройство будет больше не доступна на портале hello. Доступ tooall hello томов и общих папок на hello исходное устройство блокируется и hello целевое устройство становится активным.

> [!IMPORTANT]
> Хотя hello устройство больше не доступно, hello виртуальной машины, которое предоставляется в компьютерной системе hello по-прежнему использует ресурсы. После успешного завершения hello аварийного восстановления этой виртуальной машины можно удалить с компьютера узла.
> 
> 

## <a name="fail-over-tooa-virtual-array"></a>При сбое tooa виртуального массива

Прежде чем выполнять эту процедуру, рекомендуем подготовить, настроить и зарегистрировать в службе диспетчера StorSimple еще один виртуальный массив StorSimple.

> [!IMPORTANT]
> 
> * Не удается перенести нагрузку с устройства серии StorSimple 8000 устройства tooa 1200 виртуальной.
> * Можно перенести нагрузку с федеральным сведения обработки Standard (FIPS) включена виртуального устройства tooanother FIPS включена устройство или устройство не FIPS tooa развертывания в портале государственных hello.


Выполните следующие шаги toorestore hello устройства tooa целевой виртуальное устройство StorSimple hello.

1. Подготовка и настройка целевое устройство, отвечающий hello [необходимые условия для отработки отказа устройства](#prerequisites). Завершите настройку устройства hello через hello локального пользовательского веб-интерфейса и зарегистрировать его в службе диспетчера StorSimple устройство tooyour. Если создание на файловый сервер, перейдите toostep 1 из [настроить как файловый сервер](storsimple-virtual-array-deploy3-fs-setup.md#step-1-complete-the-local-web-ui-setup-and-register-your-device). При создании сервера iSCSI, go toostep 1 из [настроить как сервер iSCSI](storsimple-virtual-array-deploy3-iscsi-setup.md#step-1-complete-the-local-web-ui-setup-and-register-your-device).

2. Отключите томов/общих ресурсов вне сети на узле hello. hello узла tootake hello томов/общих ресурсов в автономном режиме, см. инструкции toohello связанные с операционной системой. Если уже автономного необходимо tootake все hello томов/общих ресурсов автономный режим на устройстве hello, выполнив следующие hello.
   
    1. Go слишком**устройств** колонки и выберите устройство.
   
    2. Go слишком**параметры > Управление > Общие папки** (или **параметры > Управление > тома**). 
   
    3. Выберите общую папку или том, щелкните правой кнопкой мыши и выберите пункт **Отключить**. 
   
    4. При появлении запроса на подтверждение проверьте **я понимаю hello влияние отключения этой общей папке.** 
   
    5. Щелкните **Отключить**.

3. В службе диспетчера StorSimple устройство, перейдите слишком**управления > устройства**. В hello **устройств** колонке выберите и щелкните исходное устройство.

4. В колонке **Device dashboard** (Панель мониторинга устройства) щелкните **Отключить**.

5. В hello **деактивировать** колонки, запрашивается подтверждение. Деактивация (отключение) устройства является *необратимой* операцией. Вы также — это напоминание tootake вашей общие папки или тома в автономный режим на узле hello. Введите имя tooconfirm hello устройства и нажмите кнопку **деактивировать**.
   
    ![](./media/storsimple-virtual-array-failover-dr/failover1.png)
6. запускает деактивации Hello. После деактивации hello успешно завершена, вы получите уведомление.
   
    ![](./media/storsimple-virtual-array-failover-dr/failover2.png)
7. На странице приветствия устройства, состояние устройства hello теперь изменится слишком**деактивирован**.
    ![](./media/storsimple-virtual-array-failover-dr/failover3.png)
8. В hello **устройств** колонке выберите и щелкните hello деактивированный исходное устройство для отработки отказа. 
9. В hello **панели мониторинга устройства** колонка, щелкните **при сбое**. 
10. В hello **отработки отказа устройства** колонке hello следующие:
    
    1. Hello исходного устройства будет заполнено автоматически. Обратите внимание, hello общий размер данных для hello исходного устройства. размер данных Hello должен быть меньше, чем доступная емкость hello на целевом устройстве hello. Просмотрите сведения о hello, связанные с hello исходного устройства, такие как имя устройства, общая емкость и имена hello hello общих папок, которые отработку отказа.

    2. Из раскрывающегося списка доступных устройств hello, выберите **целевое устройство**. В раскрывающемся списке hello отображаются только устройства hello недостаточно места.

    3. Убедитесь, что **я понимаю, что эта операция завершится сбоем на целевом устройстве toohello данных**. 

    4. Нажмите кнопку **Отработка отказа**.
    
        ![](./media/storsimple-virtual-array-failover-dr/failover4.png)
11. Будет запущено задание отработки отказа, и вы получите соответствующее уведомление. Go слишком**устройства > задания** hello toomonitor перехода на другой ресурс.
    
     ![](./media/storsimple-virtual-array-failover-dr/failover5.png)
12. В hello **заданий** колонку, вы видите задание отработки отказа, созданных для hello исходного устройства. Это задание выполняет prechecks hello аварийного восстановления.
    
    ![](./media/storsimple-virtual-array-failover-dr/failover6.png)
    
     После успешного prechecks hello аварийного восстановления, задание отработки отказа hello создаст задания восстановления для каждой общей папки или тома, существующего на исходное устройство.
    
    ![](./media/storsimple-virtual-array-failover-dr/failover7.png)
13. После отработки отказа hello завершения, выберите toohello **устройств** колонку.
    
    1. Выберите и щелкните hello устройства StorSimple, используемый в качестве hello целевое устройство для hello процесс отработки отказа.
    2. Go слишком**параметры > управления > Общие папки** (или **тома** Если сервер iSCSI). В hello **долей** колонки, можно просмотреть все общие папки hello (тома) из старого устройства hello.
        ![](./media/storsimple-virtual-array-failover-dr/failover9.png)
14. Необходимо будет слишком[создайте псевдоним DNS](https://support.microsoft.com/kb/168322) , чтобы все hello приложений, которые пытаются tooconnect можно получить перенаправленный toohello новое устройство.

## <a name="errors-during-dr"></a>Ошибки во время аварийного восстановления

**Сбой подключения к облаку во время аварийного восстановления**

Если после разрыва подключения к облачной hello аварийного восстановления начала и до завершения восстановления устройства hello, hello аварийного восстановления завершится ошибкой. Вы получите уведомление об ошибке. Hello целевое устройство для аварийного восстановления помечается как *непригодным для использования.* Нельзя использовать hello того же целевого устройства для будущих DRs.

**Нет совместимых целевых устройств**

Если hello доступные целевые устройства имеют достаточно места, можно увидеть эффект toohello ошибки, что нет устройств, совместимое целевое.

**Сбои предварительных проверок**

Если один из hello prechecks не выполняется, можно увидеть precheck сбоев.

## <a name="business-continuity-disaster-recovery-bcdr"></a>Аварийное восстановление непрерывности бизнеса (BCDR)

Сценарии аварийного восстановления (BCDR) непрерывности бизнеса в случае hello всего центра обработки данных Azure перестает работать. Это может повлиять на службы диспетчера StorSimple устройство и hello связанные устройства StorSimple.

Если имеются устройства StorSimple, которые были зарегистрированы непосредственно перед аварией, эти устройства StorSimple может потребоваться удалить toobe. После аварии hello можно повторно создать и настроить эти устройства.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о том, как слишком[администрирования с помощью hello локального пользовательского веб-интерфейса виртуального массива StorSimple](storsimple-ova-web-ui-admin.md).

