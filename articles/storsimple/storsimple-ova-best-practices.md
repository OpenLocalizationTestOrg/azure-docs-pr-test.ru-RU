---
title: "Рекомендации по использованию виртуального массива StorSimple | Документация Майкрософт"
description: "В этой статье описываются рекомендации по развертыванию виртуального массива StorSimple и управлению им."
services: storsimple
documentationcenter: NA
author: alkohli
manager: timlt
editor: 
ms.assetid: 57ac6eeb-c47c-442d-a5f4-b360d81a76a6
ms.service: storsimple
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/08/2017
ms.author: alkohli
ms.openlocfilehash: 264764c5e9c32574d97beb2cc3c1bb1cfb555568
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="storsimple-virtual-array-best-practices"></a><span data-ttu-id="2e8fb-103">Рекомендации по использованию виртуального массива StorSimple</span><span class="sxs-lookup"><span data-stu-id="2e8fb-103">StorSimple Virtual Array best practices</span></span>
## <a name="overview"></a><span data-ttu-id="2e8fb-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="2e8fb-104">Overview</span></span>
<span data-ttu-id="2e8fb-105">Виртуальный массив Microsoft Azure StorSimple — это интегрированное решение хранилища, которое управляет задачами хранилища на локальном виртуальном устройстве, выполняющемся в низкоуровневой оболочке, и в облачном хранилище Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-105">Microsoft Azure StorSimple Virtual Array is an integrated storage solution that manages storage tasks between an on-premises virtual device running in a hypervisor and Microsoft Azure cloud storage.</span></span> <span data-ttu-id="2e8fb-106">Виртуальный массив StorSimple представляет собой эффективную и экономичную альтернативу физическому массиву серии 8000.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-106">StorSimple Virtual Array is an efficient, cost-effective alternative to the 8000 series physical array.</span></span> <span data-ttu-id="2e8fb-107">Его можно запускать в имеющейся инфраструктуре низкоуровневой оболочки. Кроме того, он поддерживает протоколы iSCSI и SMB и хорошо подходит для сценариев, применяемых в удаленных офисах и филиалах.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-107">The virtual array can run on your existing hypervisor infrastructure, supports both the iSCSI and the SMB protocols, and is well-suited for remote office/branch office scenarios.</span></span> <span data-ttu-id="2e8fb-108">Дополнительные сведения о решениях StorSimple см. в [обзоре решения Microsoft Azure StorSimple](https://www.microsoft.com/en-us/server-cloud/products/storsimple/overview.aspx).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-108">For more information on the StorSimple solutions, go to [Microsoft Azure StorSimple Overview](https://www.microsoft.com/en-us/server-cloud/products/storsimple/overview.aspx).</span></span>

<span data-ttu-id="2e8fb-109">В этой статье приведены рекомендации по виртуальному массиву StorSimple, касающиеся начальной настройки, развертывания и управления.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-109">This article covers the best practices implemented during the initial setup, deployment, and management of the StorSimple Virtual Array.</span></span> <span data-ttu-id="2e8fb-110">Это проверенные инструкции по настройке виртуального массива и управлению им.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-110">These best practices provide validated guidelines for the setup and management of your virtual array.</span></span> <span data-ttu-id="2e8fb-111">Эта статья предназначена для ИТ-администраторов, ответственных за развертывание и контроль виртуальных массивов в центрах данных.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-111">This article is targeted towards the IT administrators who deploy and manage the virtual arrays in their datacenters.</span></span>

<span data-ttu-id="2e8fb-112">Мы советуем периодически пересматривать эти рекомендации. Так вы сможете обеспечивать соответствие устройства текущим требованиям в случае изменения процедуры настройки или обслуживания.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-112">We recommend a periodic review of the best practices to help ensure your device is still in compliance when changes are made to the setup or operation flow.</span></span> <span data-ttu-id="2e8fb-113">Если у вас возникнут проблемы при реализации этих рекомендаций для виртуального массива, [обратитесь за помощью в службу технической поддержки Майкрософт](storsimple-virtual-array-log-support-ticket.md).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-113">Should you encounter any issues while implementing these best practices on your virtual array, [contact Microsoft Support](storsimple-virtual-array-log-support-ticket.md) for assistance.</span></span>

## <a name="configuration-best-practices"></a><span data-ttu-id="2e8fb-114">Рекомендации по настройке</span><span class="sxs-lookup"><span data-stu-id="2e8fb-114">Configuration best practices</span></span>
<span data-ttu-id="2e8fb-115">Здесь приведены рекомендации, которым необходимо следовать во время начальной настройки и развертывания виртуальных массивов.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-115">These best practices cover the guidelines that need to be followed during the initial setup and deployment of the virtual arrays.</span></span> <span data-ttu-id="2e8fb-116">Сюда входят советы относительно подготовки виртуальной машины, настройки параметров групповой политики, сети и учетных записей хранения, а также изменения размера и создания общих папок и томов для виртуального массива.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-116">These best practices include those related to the provisioning of the virtual machine, group policy settings, sizing, setting up the networking, configuring storage accounts, and creating shares and volumes for the virtual array.</span></span> 

### <a name="provisioning"></a><span data-ttu-id="2e8fb-117">Подготовка</span><span class="sxs-lookup"><span data-stu-id="2e8fb-117">Provisioning</span></span>
<span data-ttu-id="2e8fb-118">Виртуальный массив StorSimple — это виртуальная машина, подготовленная на низкоуровневой оболочке (Hyper-V или VMware) сервера узла.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-118">StorSimple Virtual Array is a virtual machine (VM) provisioned on the hypervisor (Hyper-V or VMware) of your host server.</span></span> <span data-ttu-id="2e8fb-119">При подготовке виртуальной машины следует удостовериться, что узел может выделить достаточно ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-119">When provisioning the virtual machine, ensure that your host is able to dedicate sufficient resources.</span></span> <span data-ttu-id="2e8fb-120">Дополнительные сведения см. в разделе с [минимальными требованиями к ресурсам](storsimple-virtual-array-deploy2-provision-hyperv.md#step-1-ensure-that-the-host-system-meets-minimum-virtual-array-requirements) для подготовки массива.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-120">For more information, go to [minimum resource requirements](storsimple-virtual-array-deploy2-provision-hyperv.md#step-1-ensure-that-the-host-system-meets-minimum-virtual-array-requirements) to provision an array.</span></span>

<span data-ttu-id="2e8fb-121">При подготовке виртуального массива следуйте приведенным ниже рекомендациям.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-121">Implement the following best practices when provisioning the virtual array:</span></span>

|  | <span data-ttu-id="2e8fb-122">Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-122">Hyper-V</span></span> | <span data-ttu-id="2e8fb-123">VMware</span><span class="sxs-lookup"><span data-stu-id="2e8fb-123">VMware</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2e8fb-124">**Тип виртуальной машины**</span><span class="sxs-lookup"><span data-stu-id="2e8fb-124">**Virtual machine type**</span></span> |<span data-ttu-id="2e8fb-125">**поколения 2** для Windows Server 2012 или более поздней версии и *VHDX* -файла образа.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-125">**Generation 2** VM for use with Windows Server 2012 or later and a *.vhdx* image.</span></span> <br></br> <span data-ttu-id="2e8fb-126">**поколения 1** для Windows Server 2008 или более поздней версии и *VHD* -файла образа.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-126">**Generation 1** VM for use with a Windows Server 2008 or later and a *.vhd* image.</span></span> |<span data-ttu-id="2e8fb-127">Используйте виртуальную машину версии 8–11 для *VMDK* -файла образа</span><span class="sxs-lookup"><span data-stu-id="2e8fb-127">Use virtual machine version 8 - 11 when using *.vmdk* image.</span></span> |
| <span data-ttu-id="2e8fb-128">**Тип памяти**</span><span class="sxs-lookup"><span data-stu-id="2e8fb-128">**Memory type**</span></span> |<span data-ttu-id="2e8fb-129">Задайте тип памяти **Статическая**.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-129">Configure as **static memory**.</span></span> <br></br> <span data-ttu-id="2e8fb-130">Не используйте параметр **Динамическая память**</span><span class="sxs-lookup"><span data-stu-id="2e8fb-130">Do not use the **dynamic memory** option.</span></span> | |
| <span data-ttu-id="2e8fb-131">**Тип диска данных**</span><span class="sxs-lookup"><span data-stu-id="2e8fb-131">**Data disk type**</span></span> |<span data-ttu-id="2e8fb-132">При подготовке настройте диск как **динамически расширяемый**.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-132">Provision as **dynamically expanding**.</span></span><br></br> <span data-ttu-id="2e8fb-133">**фиксированного размера** занимает много времени.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-133">**Fixed size** takes a long time.</span></span> <br></br> <span data-ttu-id="2e8fb-134">Не используйте параметр **Разностный** .</span><span class="sxs-lookup"><span data-stu-id="2e8fb-134">Do not use the **differencing** option.</span></span> |<span data-ttu-id="2e8fb-135">Используйте параметр **Тонкая подготовка** .</span><span class="sxs-lookup"><span data-stu-id="2e8fb-135">Use the **thin provision** option.</span></span> |
| <span data-ttu-id="2e8fb-136">**Изменение диска данных**</span><span class="sxs-lookup"><span data-stu-id="2e8fb-136">**Data disk modification**</span></span> |<span data-ttu-id="2e8fb-137">Расширение и сжатие не допускаются.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-137">Expansion or shrinking is not allowed.</span></span> <span data-ttu-id="2e8fb-138">Попытка сделать это приведет к потере всех локальных данных на устройстве.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-138">An attempt to do so results in the loss of all the local data on device.</span></span> |<span data-ttu-id="2e8fb-139">Расширение и сжатие не допускаются.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-139">Expansion or shrinking is not allowed.</span></span> <span data-ttu-id="2e8fb-140">Попытка сделать это приведет к потере всех локальных данных на устройстве.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-140">An attempt to do so results in the loss of all the local data on device.</span></span> |

### <a name="sizing"></a><span data-ttu-id="2e8fb-141">Определение размера</span><span class="sxs-lookup"><span data-stu-id="2e8fb-141">Sizing</span></span>
<span data-ttu-id="2e8fb-142">При планировании размера виртуального массива StorSimple учтите такие факторы:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-142">When sizing your StorSimple Virtual Array, consider the following factors:</span></span>

* <span data-ttu-id="2e8fb-143">Зарезервированное пространство для общих папок или томов на локальном уровне.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-143">Local reservation for volumes or shares.</span></span> <span data-ttu-id="2e8fb-144">Примерно 12 % места резервируется на локальном уровне для каждого подготовленного многоуровневого тома или общей папки.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-144">Approximately 12% of the space is reserved on the local tier for each provisioned tiered volume or share.</span></span> <span data-ttu-id="2e8fb-145">Примерно 10 % места резервируется также для локально закрепленного тома для файловой системы.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-145">Roughly 10% of the space is also reserved for a locally pinned volume for file system.</span></span>
* <span data-ttu-id="2e8fb-146">Пространство для моментальных снимков.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-146">Snapshot overhead.</span></span> <span data-ttu-id="2e8fb-147">Примерно 15 % пространства на локальном уровне резервируется для моментальных снимков.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-147">Roughly 15% space on the local tier is reserved for snapshots.</span></span>
* <span data-ttu-id="2e8fb-148">Необходимость в восстановлении.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-148">Need for restores.</span></span> <span data-ttu-id="2e8fb-149">При определении размера следует учитывать пространство, необходимое для восстановления, выполняемого в качестве новой операции.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-149">If doing restore as a new operation, sizing should account for the space needed for restore.</span></span> <span data-ttu-id="2e8fb-150">Восстановление выполняется в общий ресурс или на том такого же размера.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-150">Restore is done to a share or volume of the same size.</span></span>
* <span data-ttu-id="2e8fb-151">Необходимо выделить некоторый объем пространства на случай непредвиденного роста.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-151">Some buffer should be allocated for any unexpected growth.</span></span>

<span data-ttu-id="2e8fb-152">На основе приведенных выше факторов требования к размеру можно представить с помощью следующей формулы:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-152">Based on the preceding factors, the sizing requirements can be represented by the following equation:</span></span>

`Total usable local disk size = (Total provisioned locally pinned volume/share size including space for file system) + (Max (local reservation for a volume/share) for all tiered volumes/share) + (Local reservation for all tiered volumes/shares)`

`Data disk size = Total usable local disk size + Snapshot overhead + buffer for unexpected growth or new share or volume`

<span data-ttu-id="2e8fb-153">Приведенные ниже примеры иллюстрируют, как определить размер для виртуального массива в зависимости от требований.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-153">The following examples illustrate how you can size a virtual array based on your requirements.</span></span>

#### <a name="example-1"></a><span data-ttu-id="2e8fb-154">Пример 1</span><span class="sxs-lookup"><span data-stu-id="2e8fb-154">Example 1:</span></span>
<span data-ttu-id="2e8fb-155">На виртуальном массиве необходимо:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-155">On your virtual array, you want to be able to</span></span>

* <span data-ttu-id="2e8fb-156">подготовить многоуровневый том или общую папку объемом 2 ТБ;</span><span class="sxs-lookup"><span data-stu-id="2e8fb-156">provision a 2 TB tiered volume or share.</span></span>
* <span data-ttu-id="2e8fb-157">подготовить многоуровневый том или общую папку объемом 1 ТБ;</span><span class="sxs-lookup"><span data-stu-id="2e8fb-157">provision a 1 TB tiered volume or share.</span></span>
* <span data-ttu-id="2e8fb-158">подготовить локально закрепленный том или общую папку объемом 300 ГБ.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-158">provision a 300 GB of locally pinned volume or share.</span></span>

<span data-ttu-id="2e8fb-159">Давайте определим требования к пространству на локальном уровне для приведенных выше томов или общих папок.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-159">For the preceding volumes or shares, let us calculate the space requirements on the local tier.</span></span>

<span data-ttu-id="2e8fb-160">Во-первых, локально зарезервированное пространство для каждого многоуровневого тома или общей папки будет составлять 12 % от их размера.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-160">First, for each tiered volume/share, local reservation would be equal to 12% of the volume/share size.</span></span> <span data-ttu-id="2e8fb-161">Для локально закрепленного тома или общей папки локально зарезервированное пространство составляет 10 % от их размера (помимо подготовленного размера).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-161">For the locally pinned volume/share, local reservation is 10 % of the locally pinned volume/share size (in addition to the provisioned size).</span></span> <span data-ttu-id="2e8fb-162">В этом примере требуется:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-162">In this example, you need</span></span>

* <span data-ttu-id="2e8fb-163">240 ГБ локально зарезервированного пространства (для многоуровневого тома и общей папки объемом 2 ТБ);</span><span class="sxs-lookup"><span data-stu-id="2e8fb-163">240 GB local reservation (for a 2 TB tiered volume/share)</span></span>
* <span data-ttu-id="2e8fb-164">120 ГБ локально зарезервированного пространства (для многоуровневого тома и общей папки объемом 1 ТБ);</span><span class="sxs-lookup"><span data-stu-id="2e8fb-164">120 GB local reservation (for a 1 TB tiered volume/share)</span></span>
* <span data-ttu-id="2e8fb-165">330 ГБ для локально закрепленного тома или общей папки (добавляя 10 % локально зарезервированного пространства к подготовленному размеру в 300 ГБ);</span><span class="sxs-lookup"><span data-stu-id="2e8fb-165">330 GB for locally pinned volume or share (adding 10 % of local reservation to the 300 GB provisioned size)</span></span>

<span data-ttu-id="2e8fb-166">На данный момент общее пространство, требуемое на локальном уровне, составляет 690 ГБ (240 + 120 + 330 ГБ).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-166">The total space required on the local tier so far is: 240 GB + 120 GB + 330 GB = 690 GB.</span></span>

<span data-ttu-id="2e8fb-167">Во-вторых, на локальном уровне понадобится дополнительное пространство, соответствующее наибольшему зарезервированному пространству или превышающее его.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-167">Second, we need at least as much space on the local tier as the largest single reservation.</span></span> <span data-ttu-id="2e8fb-168">Этот дополнительный объем резервируется на случай, если потребуется выполнить восстановление из облачного моментального снимка.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-168">This extra amount is used in case you need to restore from a cloud snapshot.</span></span> <span data-ttu-id="2e8fb-169">В этом примере наибольшее локально зарезервированное пространство составляет 330 ГБ (включая пространство для файловой системы). Этот объем и нужно добавить к 690 ГБ. Таким образом, мы получаем 1020 ГБ (690 + 330 ГБ).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-169">In this example, the largest local reservation is 330 GB (including reservation for file system), so you would add that to the 690 GB: 690 GB + 330 GB = 1020 GB.</span></span>
<span data-ttu-id="2e8fb-170">После выполнения дополнительных операций восстановления можно освободить пространство, удалив данные предыдущей операции восстановления.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-170">If we performed subsequent additional restores, we can always free up the space from the previous restore operation.</span></span>

<span data-ttu-id="2e8fb-171">В-третьих, на данном этапе нам нужно 15 % от общего локального пространства для хранения локальных моментальных снимков, так что доступными остаются только 85 %.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-171">Third, we need 15 % of your total local space so far to store local snapshots, so that only 85% of it is available.</span></span> <span data-ttu-id="2e8fb-172">В этом примере это составит около 1020 ГБ — 0,85&ast; ТБ на подготовленном диске данных.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-172">In this example, that would be around 1020 GB = 0.85&ast;provisioned data disk TB.</span></span> <span data-ttu-id="2e8fb-173">Таким образом, объем подготовленного диска данных будет равен 1200 ГБ (1020 &ast; (1/0,85)), т. е. примерно 1,20–1,25 ТБ (округление к наиболее близкому значению квартиля).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-173">So, the provisioned data disk would be (1020&ast;(1/0.85))= 1200 GB = 1.20 TB ~ 1.25 TB (rounding off to nearest quartile)</span></span>

<span data-ttu-id="2e8fb-174">Учитывая возможность непредвиденного роста и дополнительные операции восстановления, следует подготовить локальный диск емкостью примерно 1,25–1,5 ТБ.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-174">Factoring in unexpected growth and new restores, you should provision a local disk of around 1.25 - 1.5 TB.</span></span>

> [!NOTE]
> <span data-ttu-id="2e8fb-175">Кроме того, рекомендуется применять к локальному диску метод тонкой подготовки.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-175">We also recommend that the local disk is thinly provisioned.</span></span> <span data-ttu-id="2e8fb-176">Это связано с тем, что место для восстановления требуется только в случае, если необходимо восстановить данные, хранящиеся дольше пяти дней.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-176">This recommendation is because the restore space is only needed when you want to restore data that is older than five days.</span></span> <span data-ttu-id="2e8fb-177">Восстановление на уровне элементов позволяет восстановить данные за последние пять дней, при этом не нужно дополнительное место.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-177">Item-level recovery allows you to restore data for the last five days without requiring the extra space for restore.</span></span>


#### <a name="example-2"></a><span data-ttu-id="2e8fb-178">Пример 2</span><span class="sxs-lookup"><span data-stu-id="2e8fb-178">Example 2:</span></span>
<span data-ttu-id="2e8fb-179">На виртуальном массиве необходимо:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-179">On your virtual array, you want to be able to</span></span>

* <span data-ttu-id="2e8fb-180">подготовить многоуровневый том объемом 2 ТБ;</span><span class="sxs-lookup"><span data-stu-id="2e8fb-180">provision a 2 TB tiered volume</span></span>
* <span data-ttu-id="2e8fb-181">подготовить локально закрепленный том объемом 300 ГБ.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-181">provision a 300 GB locally pinned volume</span></span>

<span data-ttu-id="2e8fb-182">Так как 12 % локального пространства зарезервировано для многоуровневых томов и общих папок, а 10 % — для локально закрепленных томов и общих папок, нам понадобится:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-182">Based on 12 % of local space reservation for tiered volumes/shares and 10 % for locally pinned volumes/shares, we need</span></span>

* <span data-ttu-id="2e8fb-183">240 ГБ локально зарезервированного пространства (для многоуровневого тома и общей папки объемом 2 ТБ);</span><span class="sxs-lookup"><span data-stu-id="2e8fb-183">240 GB local reservation (for 2 TB tiered volume/share)</span></span>
* <span data-ttu-id="2e8fb-184">330 ГБ для локально закрепленного тома или общей папки (добавляя 10 % локально резервированного пространства к подготовленному пространству в 300 ГБ);</span><span class="sxs-lookup"><span data-stu-id="2e8fb-184">330 GB for locally pinned volume or share (adding 10% of local reservation to the 300 GB provisioned space)</span></span>

<span data-ttu-id="2e8fb-185">Общее пространство, требуемое на локальном уровне, составляет 570 ГБ (240 + 330 ГБ).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-185">Total space required on the local tier is: 240 GB + 330 GB = 570 GB</span></span>

<span data-ttu-id="2e8fb-186">Минимальное локальное пространство, необходимое для восстановления, составляет 330 ГБ.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-186">The minimum local space needed for restore is 330 GB.</span></span>

<span data-ttu-id="2e8fb-187">15 % от общего места на диске используется для хранения моментальных снимков, поэтому доступно только 0,85 объема.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-187">15 % of your total disk is used to store snapshots so that only 0.85 is available.</span></span> <span data-ttu-id="2e8fb-188">Таким образом, размер диска составляет примерно 1,06–1,25 ТБ (900 &ast; (1/0,85)) (с округлением к ближайшему квартилю).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-188">So, the disk size is (900&ast;(1/0.85)) = 1.06 TB ~ 1.25 TB (rounding off to nearest quartile)</span></span>

<span data-ttu-id="2e8fb-189">Учитывая непредвиденный рост, можно подготовить локальный диск объемом 1,25–1,5 ТБ.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-189">Factoring in any unexpected growth, you can provision a 1.25 - 1.5 TB local disk.</span></span>

### <a name="group-policy"></a><span data-ttu-id="2e8fb-190">Групповая политика</span><span class="sxs-lookup"><span data-stu-id="2e8fb-190">Group policy</span></span>
<span data-ttu-id="2e8fb-191">Групповая политика — это инфраструктура, которая позволяет реализовать определенные настройки для пользователей и компьютеров.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-191">Group Policy is an infrastructure that allows you to implement specific configurations for users and computers.</span></span> <span data-ttu-id="2e8fb-192">Параметры групповой политики содержатся в объектах групповой политики, которые связаны с такими контейнерами доменных служб Active Directory (AD DS): сайты, домены и подразделения.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-192">Group Policy settings are contained in Group Policy objects (GPOs), which are linked to the following Active Directory Domain Services (AD DS) containers: sites, domains, or organizational units (OUs).</span></span> 

<span data-ttu-id="2e8fb-193">Если виртуальный массив присоединен к домену, к нему можно применить объекты групповой политики.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-193">If your virtual array is domain-joined, GPOs can be applied to it.</span></span> <span data-ttu-id="2e8fb-194">Эти объекты могут устанавливать приложения, например антивирусные программы, что может отрицательно сказаться на работе виртуального массива StorSimple.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-194">These GPOs can install applications such as an antivirus software that can adversely impact the operation of the StorSimple Virtual Array.</span></span>

<span data-ttu-id="2e8fb-195">Поэтому следует учитывать следующие рекомендации:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-195">Therefore, we recommend that you:</span></span>

* <span data-ttu-id="2e8fb-196">Убедитесь, что виртуальный массив находится в собственном подразделении Active Directory.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-196">Ensure that your virtual array is in its own organizational unit (OU) for Active Directory.</span></span>
* <span data-ttu-id="2e8fb-197">Убедитесь, что к виртуальному массиву не применяются какие-либо объекты групповой политики.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-197">Make sure that no group policy objects (GPOs) are applied to your virtual array.</span></span> <span data-ttu-id="2e8fb-198">Для виртуального массива (дочерний узел) можно заблокировать наследование, чтобы предотвратить автоматическое наследование объектов групповой политики от родительского узла.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-198">You can block inheritance to ensure that the virtual array (child node) does not automatically inherit any GPOs from the parent.</span></span> <span data-ttu-id="2e8fb-199">Дополнительные сведения см. в статье [Блокирование наследования](https://technet.microsoft.com/library/cc731076.aspx).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-199">For more information, go to [block inheritance](https://technet.microsoft.com/library/cc731076.aspx).</span></span>

### <a name="networking"></a><span data-ttu-id="2e8fb-200">Сеть</span><span class="sxs-lookup"><span data-stu-id="2e8fb-200">Networking</span></span>
<span data-ttu-id="2e8fb-201">Настройка сети виртуального массива осуществляется с помощью локального веб-интерфейса.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-201">The network configuration for your virtual array is done through the local web UI.</span></span> <span data-ttu-id="2e8fb-202">Виртуальный сетевой интерфейс предоставляется в низкоуровневой оболочке, где подготовлен виртуальный массив.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-202">A virtual network interface is enabled through the hypervisor in which the virtual array is provisioned.</span></span> <span data-ttu-id="2e8fb-203">На странице [Параметры сети](storsimple-virtual-array-deploy3-fs-setup.md) можно настроить IP-адрес, подсеть и шлюз для этого сетевого интерфейса.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-203">Use the [Network Settings](storsimple-virtual-array-deploy3-fs-setup.md) page to configure the virtual network interface IP address, subnet, and gateway.</span></span>  <span data-ttu-id="2e8fb-204">Можно также настроить основной и дополнительный DNS-серверы, параметры времени и необязательные параметры прокси-сервера для вашего устройства.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-204">You can also configure the primary and secondary DNS server, time settings, and optional proxy settings for your device.</span></span> <span data-ttu-id="2e8fb-205">Большую часть параметров сети можно настроить только один раз.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-205">Most of the network configuration is a one-time setup.</span></span> <span data-ttu-id="2e8fb-206">Прежде чем развернуть виртуальный массив, ознакомьтесь с [требованиями к сети для StorSimple](storsimple-ova-system-requirements.md#networking-requirements) .</span><span class="sxs-lookup"><span data-stu-id="2e8fb-206">Review the [StorSimple networking requirements](storsimple-ova-system-requirements.md#networking-requirements) prior to deploying the virtual array.</span></span>

<span data-ttu-id="2e8fb-207">При развертывании виртуального массива нужно следовать таким рекомендациям:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-207">When deploying your virtual array, we recommend that you follow these best practices:</span></span>

* <span data-ttu-id="2e8fb-208">Сеть, в которой развертывается виртуальный массив, должна постоянно обеспечивать интернет-канал с пропускной способностью не менее 5 Мбит/с.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-208">Ensure that the network in which the virtual array is deployed always has the capacity to dedicate 5 Mbps Internet bandwidth (or more).</span></span>
  
  * <span data-ttu-id="2e8fb-209">Требования к пропускной способности зависят от особенностей рабочей нагрузки и скорости изменения данных.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-209">Internet bandwidth need varies depending on your workload characteristics and the rate of data change.</span></span>
  * <span data-ttu-id="2e8fb-210">Изменение данных, которое можно обработать, прямо пропорционально пропускной способности интернет-канала.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-210">The data change that can be handled is directly proportional to your Internet bandwidth.</span></span> <span data-ttu-id="2e8fb-211">Например, при создании резервной копии интернет-канал с пропускной способностью 5 Мбит/с позволяет выполнить операцию изменения данных объемом 18 ГБ за 8 часов.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-211">As an example when taking a backup, a 5 Mbps bandwidth can accommodate a data change of around 18 GB in 8 hours.</span></span> <span data-ttu-id="2e8fb-212">Если пропускная способность будет выше в четыре раза (20 Мбит/с), можно будет обработать изменение данных с четырехкратным объемом (72 ГБ).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-212">With four times more bandwidth (20 Mbps), you can handle four times more data change (72 GB).</span></span>
* <span data-ttu-id="2e8fb-213">Обязательно наличие постоянного подключения к Интернету.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-213">Ensure connectivity to the Internet is always available.</span></span> <span data-ttu-id="2e8fb-214">Прерывающееся или ненадежное подключение к Интернету на устройствах может привести к потере доступа к данным в облаке и к неподдерживаемой конфигурации.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-214">Sporadic or unreliable Internet connections to the devices may result in a loss of access to data in the cloud and could result in an unsupported configuration.</span></span>
* <span data-ttu-id="2e8fb-215">Если планируется развернуть устройство в качестве сервера iSCSI:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-215">If you plan to deploy your device as an iSCSI server:</span></span>
  
  * <span data-ttu-id="2e8fb-216">Рекомендуется отключить параметр **Получить IP-адрес автоматически** (DHCP).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-216">We recommend that you disable the **Get IP address automatically** option (DHCP).</span></span>
  * <span data-ttu-id="2e8fb-217">Настройте статические IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-217">Configure static IP addresses.</span></span> <span data-ttu-id="2e8fb-218">Необходимо настроить основной и дополнительный DNS-серверы.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-218">You must configure a primary and a secondary DNS server.</span></span>
  * <span data-ttu-id="2e8fb-219">При определении нескольких сетевых интерфейсов в виртуальном массиве учтите, что только первый сетевой интерфейс (по умолчанию — **Ethernet**) имеет доступ к облаку.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-219">If defining multiple network interfaces on your virtual array, only the first network interface (by default, this interface is **Ethernet**) can reach the cloud.</span></span> <span data-ttu-id="2e8fb-220">Чтобы управлять типом трафика, в виртуальном массиве (настроенном в качестве сервера iSCSI) необходимо создать несколько виртуальных сетевых интерфейсов и подключить их к различным подсетям.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-220">To control the type of traffic, you can create multiple virtual network interfaces on your virtual array (configured as an iSCSI server) and connect those interfaces to different subnets.</span></span>
* <span data-ttu-id="2e8fb-221">Для регулировки пропускной способности облака (используемой виртуальным массивом) соответствующие настройки необходимо задать в параметрах маршрутизатора или брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-221">To throttle the cloud bandwidth only (used by the virtual array), configure throttling on the router or the firewall.</span></span> <span data-ttu-id="2e8fb-222">Если настроить регулирование в параметрах низкоуровневой оболочки, будет регулироваться не только пропускная способность облака, но и все протоколы, включая iSCSI и SMB.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-222">If you define throttling in your hypervisor, it will throttle all the protocols including iSCSI and SMB instead of just the cloud bandwidth.</span></span>
* <span data-ttu-id="2e8fb-223">Включите синхронизацию времени для низкоуровневых оболочек.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-223">Ensure that time synchronization for hypervisors is enabled.</span></span> <span data-ttu-id="2e8fb-224">При использовании Hyper-V необходимо выбрать виртуальный массив в диспетчере Hyper-V, щелкнуть **Параметры &gt; Службы интеграции** и установить флажок **Синхронизация времени**.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-224">If using Hyper-V, select your virtual array in the Hyper-V Manager, go to **Settings &gt; Integration Services**, and ensure that the **Time synchronization** is checked.</span></span>

### <a name="storage-accounts"></a><span data-ttu-id="2e8fb-225">учетные записи хранения;</span><span class="sxs-lookup"><span data-stu-id="2e8fb-225">Storage accounts</span></span>
<span data-ttu-id="2e8fb-226">Виртуальный массив StorSimple можно связать с одной учетной записью хранения.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-226">StorSimple Virtual Array can be associated with a single storage account.</span></span> <span data-ttu-id="2e8fb-227">Это может быть автоматически созданная учетная запись хранения, учетная запись в той же подписке, что и служба, и учетная запись хранения, связанная с другой подпиской.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-227">This storage account could be an automatically generated storage account, an account in the same subscription as the service, or a storage account related to another subscription.</span></span> <span data-ttu-id="2e8fb-228">Дополнительные сведения см. в статье [Управление учетными записями хранения для виртуального массива StorSimple с помощью службы диспетчера StorSimple](storsimple-virtual-array-manage-storage-accounts.md).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-228">For more information, see how to [manage storage accounts for your virtual array](storsimple-virtual-array-manage-storage-accounts.md).</span></span>

<span data-ttu-id="2e8fb-229">Следуйте рекомендациям ниже для учетных записей хранения, связанных с виртуальным массивом.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-229">Use the following recommendations for storage accounts associated with your virtual array.</span></span>

* <span data-ttu-id="2e8fb-230">При связывании нескольких виртуальных массивов с одной учетной записью следует учитывать максимальную емкость виртуальных массивов (64 ТБ) и максимальный размер учетной записи хранения (500 ТБ).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-230">When linking multiple virtual arrays with a single storage account, factor in the maximum capacity (64 TB) for a virtual array and the maximum size (500 TB) for a storage account.</span></span> <span data-ttu-id="2e8fb-231">Таким образом, число полноразмерных виртуальных массивов, которые можно связать с этой учетной записью хранения, равно 7.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-231">This limits the number of full-sized virtual arrays that can be associated with that storage account to about 7.</span></span>
* <span data-ttu-id="2e8fb-232">При создании учетной записи хранения учитывайте следующее:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-232">When creating a new storage account</span></span>
  
  * <span data-ttu-id="2e8fb-233">Для минимизации задержек рекомендуется создать учетную запись в регионе, который ближе всего к удаленному офису или филиалу, где развернут виртуальный массив StorSimple.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-233">We recommend that you create it in the region closest to the remote office/branch office where your StorSimple Virtual Array is deployed to minimize latencies.</span></span>
  * <span data-ttu-id="2e8fb-234">Обратите внимание, что учетные записи хранения нельзя переносить из одного региона в другой.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-234">Bear in mind that you cannot move a storage account across different regions.</span></span> <span data-ttu-id="2e8fb-235">То же самое касается переноса службы в другую подписку.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-235">Also you cannot move a service across subscriptions.</span></span>
  * <span data-ttu-id="2e8fb-236">Используйте учетную запись хранения, которая обеспечивает избыточность между центрами обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-236">Use a storage account that implements redundancy between the datacenters.</span></span> <span data-ttu-id="2e8fb-237">Для виртуального массива можно использовать геоизбыточное хранилище (GRS), хранилище, избыточное в пределах зоны, (ZRS) и локально избыточное хранилище (LRS).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-237">Geo-Redundant Storage (GRS), Zone Redundant Storage (ZRS), and Locally Redundant Storage (LRS) are all supported for use with your virtual array.</span></span> <span data-ttu-id="2e8fb-238">Дополнительные сведения о различных типах учетных записей хранения см. в статье [Репликация службы хранилища Azure](../storage/common/storage-redundancy.md).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-238">For more information on the different types of storage accounts, go to [Azure storage replication](../storage/common/storage-redundancy.md).</span></span>

### <a name="shares-and-volumes"></a><span data-ttu-id="2e8fb-239">Общие папки и тома</span><span class="sxs-lookup"><span data-stu-id="2e8fb-239">Shares and volumes</span></span>
<span data-ttu-id="2e8fb-240">Общие папки для виртуального массива StorSimple можно подготовить, если он настроен как файловый сервер, а тома — если он настроен как сервер iSCSI.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-240">For your StorSimple Virtual Array, you can provision shares when it is configured as a file server and volumes when configured as an iSCSI server.</span></span> <span data-ttu-id="2e8fb-241">Рекомендации, которые следует учитывать при создании общих папок и томов, касаются размера и типа.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-241">The best practices for creating shares and volumes are related to the size and the type configured.</span></span>

#### <a name="volumeshare-size"></a><span data-ttu-id="2e8fb-242">Размер томов и общих папок</span><span class="sxs-lookup"><span data-stu-id="2e8fb-242">Volume/Share size</span></span>
<span data-ttu-id="2e8fb-243">Общие папки для виртуального массива можно подготовить, если он настроен как файловый сервер, а для тома — если он настроен как сервер iSCSI.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-243">On your virtual array, you can provision shares when it is configured as a file server and volumes when configured as an iSCSI server.</span></span> <span data-ttu-id="2e8fb-244">Рекомендации, которые следует учитывать при создании общих папок и томов, касаются размера и типа.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-244">The best practices for creating shares and volumes relate to the size and the type configured.</span></span> 

<span data-ttu-id="2e8fb-245">При подготовке общих папок или томов на виртуальном устройстве примите во внимание следующее:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-245">Keep in mind the following best practices when provisioning shares or volumes on your virtual device.</span></span>

* <span data-ttu-id="2e8fb-246">Размер файлов относительно размера подготовленной многоуровневой общей папки может влиять на производительность распределения по уровням.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-246">The file sizes relative to the provisioned size of a tiered share can impact the tiering performance.</span></span> <span data-ttu-id="2e8fb-247">Иногда при работе с большими файлами распределение по уровням выполняется очень медленно. При работе с файлами большого размера рекомендуется, чтобы размер самого большого файла составлял не более 3 % от размера общей папки.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-247">Working with large files could result in a slow tier out. When working with large files, we recommend that the largest file is smaller than 3% of the share size.</span></span>
* <span data-ttu-id="2e8fb-248">На виртуальном массиве можно создать не более 16 томов или общих папок.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-248">A maximum of 16 volumes/shares can be created on the virtual array.</span></span> <span data-ttu-id="2e8fb-249">Сведения об ограничении размера локально закрепленных многоуровневых томов и общих ресурсов см. в статье об [ограничениях виртуальных массивов StorSimple](storsimple-ova-limits.md).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-249">For the size limits of the locally pinned and tiered volumes/shares, always refer to the [StorSimple Virtual Array limits](storsimple-ova-limits.md).</span></span>
* <span data-ttu-id="2e8fb-250">При создании тома следует учитывать уровень ожидаемого использования данных, а также будущий рост.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-250">When creating a volume, factor in the expected data consumption as well as future growth.</span></span> <span data-ttu-id="2e8fb-251">Расширить том будет невозможно.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-251">The volume cannot be expanded later.</span></span>
* <span data-ttu-id="2e8fb-252">После создания тома на устройстве StorSimple его размер нельзя уменьшить.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-252">Once the volume has been created, you cannot shrink the size of the volume on StorSimple.</span></span>
* <span data-ttu-id="2e8fb-253">Когда многоуровневый том на устройстве StorSimple, на который выполняется запись, достигает определенного порогового значения объема (по отношению к локальному пространству, зарезервированному для тома), начинается регулирование операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-253">When writing to a tiered volume on StorSimple, when the volume data reaches a certain threshold (relative to the local space reserved for the volume), the IO is throttled.</span></span> <span data-ttu-id="2e8fb-254">Если продолжить запись на этот том, скорость ввода-вывода значительно снизится.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-254">Continuing to write to this volume slows down the IO significantly.</span></span> <span data-ttu-id="2e8fb-255">Хотя вы можете продолжить запись на многоуровневый том после превышения подготовленной емкости (мы не блокируем запись в таком случае), появится оповещение о том, что лимит по подписке превышен.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-255">Though you can write to a tiered volume beyond its provisioned capacity (we do not actively stop the user from writing beyond the provisioned capacity), you see an alert notification to the effect that you have oversubscribed.</span></span> <span data-ttu-id="2e8fb-256">Как только вы увидите это оповещение, необходимо принять меры по исправлению, например удалить данные на томе (в настоящее время расширение тома не поддерживается).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-256">Once you see the alert, it is imperative that you take remedial measures such as delete the volume data (volume expansion is currently not supported).</span></span>
* <span data-ttu-id="2e8fb-257">Что касается случаев аварийного восстановления, то их количество не влияет на целевую точку и целевое время восстановления, так как допустимое число общих папок или томов равно 16 и максимальное число общих папок или томов, которые могут обрабатываться параллельно, тоже 16.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-257">For disaster recovery use cases, as the number of allowable shares/volumes is 16 and the maximum number of shares/volumes that can be processed in parallel is also 16, the number of shares/volumes does not have a bearing on your RPO and RTOs.</span></span>

#### <a name="volumeshare-type"></a><span data-ttu-id="2e8fb-258">Тип томов и общих папок</span><span class="sxs-lookup"><span data-stu-id="2e8fb-258">Volume/Share type</span></span>
<span data-ttu-id="2e8fb-259">StorSimple поддерживает два типа томов и общих папок в зависимости от использования: локально закрепленные и многоуровневые.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-259">StorSimple supports two volume/share types based on the usage: locally pinned and tiered.</span></span> <span data-ttu-id="2e8fb-260">Для локально закрепленных томов и общих папок выполняется фиксированная подготовка, а для многоуровневых томов и общих папок — тонкая подготовка.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-260">Locally pinned volumes/shares are thickly provisioned whereas the tiered volumes/shares are thinly provisioned.</span></span> <span data-ttu-id="2e8fb-261">После создания локально закрепленного тома или общей папки их уже невозможно преобразовать в многоуровневые или *наоборот*.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-261">You cannot convert a locally pinned volume/share to tiered or *vice versa* once created.</span></span>

<span data-ttu-id="2e8fb-262">При настройке томов или общих папок StorSimple следует учитывать приведенные ниже рекомендации.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-262">We recommend that you implement the following best practices when configuring StorSimple volumes/shares:</span></span>

* <span data-ttu-id="2e8fb-263">Перед созданием определите тип тома в зависимости от рабочих нагрузок, которые планируется развернуть.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-263">Identify the volume type based on the workloads that you intend to deploy before you create a volume.</span></span> <span data-ttu-id="2e8fb-264">Локально закрепленные тома подходят для рабочих нагрузок, данные для которых должны все время быть доступными локально (даже при сбое в облаке) и которые требуют низкой задержки в облаке.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-264">Use locally pinned volumes for workloads that require local guarantees of data (even during a cloud outage) and that require low cloud latencies.</span></span> <span data-ttu-id="2e8fb-265">После создания тома в виртуальном массиве его тип нельзя изменить с локально закрепленного на многоуровневый и *наоборот*.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-265">Once you create a volume on your virtual array, you cannot change the volume type from locally pinned to tiered or *vice-versa*.</span></span> <span data-ttu-id="2e8fb-266">Например, локально закрепленные тома следует использовать при развертывании рабочих нагрузок SQL или размещении виртуальных машин, а многоуровневые тома — для рабочих нагрузок файловых ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-266">As an example, create locally pinned volumes when deploying SQL workloads or workloads hosting virtual machines (VMs); use tiered volumes for file share workloads.</span></span>
* <span data-ttu-id="2e8fb-267">При работе с файлами большого размера следует выбрать параметр для не слишком часто используемых архивных данных.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-267">Check the option for less frequently used archival data when dealing with large file sizes.</span></span> <span data-ttu-id="2e8fb-268">Если выбран этот параметр, для ускорения передачи данных в облако используется блок дедупликации размером 512 КБ.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-268">A larger deduplication chunk size of 512 K is used when this option is enabled to expedite the data transfer to the cloud.</span></span>

#### <a name="volume-format"></a><span data-ttu-id="2e8fb-269">Формат тома</span><span class="sxs-lookup"><span data-stu-id="2e8fb-269">Volume format</span></span>
<span data-ttu-id="2e8fb-270">После создания томов StorSimple на сервере iSCSI их необходимо инициализировать, подключить и отформатировать.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-270">After you create StorSimple volumes on your iSCSI server, you need to initialize, mount, and format the volumes.</span></span> <span data-ttu-id="2e8fb-271">Эта операция выполняется на узле, подключенном к устройству StorSimple.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-271">This operation is performed on the host connected to your StorSimple device.</span></span> <span data-ttu-id="2e8fb-272">При подключении и форматировании томов на узле StorSimple следует учитывать приведенные ниже советы и рекомендации.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-272">Following best practices are recommended when mounting and formatting volumes on the StorSimple host.</span></span>

* <span data-ttu-id="2e8fb-273">Выполняйте для всех томов StorSimple быстрое форматирование.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-273">Perform a quick format on all StorSimple volumes.</span></span>
* <span data-ttu-id="2e8fb-274">При форматировании тома StorSimple рекомендуемый размер единицы выделения — 64 КБ (размер по умолчанию — 4 КБ).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-274">When formatting a StorSimple volume, use an allocation unit size (AUS) of 64 KB (default is 4 KB).</span></span> <span data-ttu-id="2e8fb-275">Этот размер выбран в результате тестирования, выполненного с использованием распространенных рабочих нагрузок StorSimple, а также других рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-275">The 64 KB AUS is based on testing done in-house for common StorSimple workloads and other workloads.</span></span>
* <span data-ttu-id="2e8fb-276">В виртуальном массиве StorSimple, настроенном в качестве сервера iSCSI, не следует использовать составные тома или динамические диски, так как они не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-276">When using the StorSimple Virtual Array configured as an iSCSI server, do not use spanned volumes or dynamic disks as these volumes or disks are not supported by StorSimple.</span></span>

#### <a name="share-access"></a><span data-ttu-id="2e8fb-277">Общий доступ</span><span class="sxs-lookup"><span data-stu-id="2e8fb-277">Share access</span></span>
<span data-ttu-id="2e8fb-278">При создании общих папок на виртуальном массиве, настроенном в качестве файлового сервера, следует придерживаться приведенных ниже рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-278">When creating shares on your virtual array file server, follow these guidelines:</span></span>

* <span data-ttu-id="2e8fb-279">При создании общей папки настройте администраторские права не для одного пользователя, а для группы пользователей.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-279">When creating a share, assign a user group as a share administrator instead of a single user.</span></span>
* <span data-ttu-id="2e8fb-280">После создания общей папки можно управлять разрешениями NTFS с помощью проводника Windows.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-280">You can manage the NTFS permissions after the share is created by editing the shares through Windows Explorer.</span></span>

#### <a name="volume-access"></a><span data-ttu-id="2e8fb-281">Доступ к тому</span><span class="sxs-lookup"><span data-stu-id="2e8fb-281">Volume access</span></span>
<span data-ttu-id="2e8fb-282">При настройке томов iSCSI на виртуальном массиве StorSimple необходимо позаботиться об управлении доступом.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-282">When configuring the iSCSI volumes on your StorSimple Virtual Array, it is important to control access wherever necessary.</span></span> <span data-ttu-id="2e8fb-283">Чтобы определить, какие серверы узлов могут получать доступ к томам, создайте и свяжите записи контроля доступа (ACR) с томами StorSimple.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-283">To determine which host servers can access volumes, create, and associate access control records (ACRs) with StorSimple volumes.</span></span>

<span data-ttu-id="2e8fb-284">При настройке записей контроля доступа для томов StorSimple учитывайте следующие рекомендации:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-284">Use the following best practices when configuring ACRs for StorSimple volumes:</span></span>

* <span data-ttu-id="2e8fb-285">Всегда связывайте с томом по крайней мере одну запись контроля доступа.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-285">Always associate at least one ACR with a volume.</span></span>

* <span data-ttu-id="2e8fb-286">При назначении тому нескольких записей контроля доступа убедитесь, что доступ к тому не могут получить одновременно несколько некластеризованных узлов.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-286">When assigning more than one ACR to a volume, ensure that the volume is not exposed in a way where it can be concurrently accessed by more than one non-clustered host.</span></span> <span data-ttu-id="2e8fb-287">Если тому назначено несколько записей контроля доступа, отобразится сообщение с предупреждением о проверке конфигурации.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-287">If you have assigned multiple ACRs to a volume, a warning message pops up for you to review your configuration.</span></span>

### <a name="data-security-and-encryption"></a><span data-ttu-id="2e8fb-288">Шифрование и обеспечение защиты данных</span><span class="sxs-lookup"><span data-stu-id="2e8fb-288">Data security and encryption</span></span>
<span data-ttu-id="2e8fb-289">Виртуальный массив StorSimple содержит функции шифрования и обеспечения защиты данных, которые гарантируют конфиденциальность и целостность данных.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-289">Your StorSimple Virtual Array has data security and encryption features that ensure the confidentiality and integrity of your data.</span></span> <span data-ttu-id="2e8fb-290">При использовании этих функций следует учитывать приведенные ниже рекомендации.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-290">When using these features, it is recommended that you follow these best practices:</span></span> 

* <span data-ttu-id="2e8fb-291">Определите ключ шифрования облачного хранилища для использования алгоритма шифрования AES-256 перед отправкой данных из вашего виртуального массива в облако.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-291">Define a cloud storage encryption key to generate AES-256 encryption before the data is sent from your virtual array to the cloud.</span></span> <span data-ttu-id="2e8fb-292">Этот ключ не требуется, если данные изначально зашифрованы.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-292">This key is not required if your data is encrypted to begin with.</span></span> <span data-ttu-id="2e8fb-293">Для формирования и хранения ключа в безопасном месте можно использовать систему управления ключами, например [хранилище ключей Azure](../key-vault/key-vault-whatis.md).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-293">The key can be generated and kept safe using a key management system such as [Azure key vault](../key-vault/key-vault-whatis.md).</span></span>
* <span data-ttu-id="2e8fb-294">При настройке учетной записи хранения с помощью службы диспетчера StorSimple необходимо включить режим SSL, чтобы создать безопасный канал для обмена данными между устройством StorSimple и облаком по сети.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-294">When configuring the storage account via the StorSimple Manager service, make sure that you enable the SSL mode to create a secure channel for network communication between your StorSimple device and the cloud.</span></span>
* <span data-ttu-id="2e8fb-295">Периодически следует повторно создавать ключи для учетных записей хранения (с помощью службы хранилища Azure), чтобы обеспечить отражение любых изменений доступа в связи с изменением списка администраторов.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-295">Regenerate the keys for your storage accounts (by accessing the Azure Storage service) periodically to account for any changes to access based on the changed list of administrators.</span></span>
* <span data-ttu-id="2e8fb-296">Перед отправкой в Azure данные на виртуальном массиве подвергаются сжатию и дедупликации.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-296">Data on your virtual array is compressed and deduplicated before it is sent to Azure.</span></span> <span data-ttu-id="2e8fb-297">Мы не рекомендуем использовать службу роли дедупликации данных на узле Windows Server.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-297">We don't recommend using the Data Deduplication role service on your Windows Server host.</span></span>

## <a name="operational-best-practices"></a><span data-ttu-id="2e8fb-298">Рекомендации по использованию</span><span class="sxs-lookup"><span data-stu-id="2e8fb-298">Operational best practices</span></span>
<span data-ttu-id="2e8fb-299">Рекомендаций, приведенных в этом разделе, следует придерживаться при управлении виртуальным массивом и его повседневном использовании.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-299">The operational best practices are guidelines that should be followed during the day-to-day management or operation of the virtual array.</span></span> <span data-ttu-id="2e8fb-300">Сюда относятся определенные задачи управления, например создание резервных копий, восстановление из набора архивации, выполнение отработки отказа, отключение и удаление массива, мониторинг использования и состояния работоспособности системы, а также проверка виртуального массива на вирусы.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-300">These practices cover specific management tasks such as taking backups, restoring from a backup set, performing a failover, deactivating and deleting the array, monitoring system usage and health, and running virus scans on your virtual array.</span></span>

### <a name="backups"></a><span data-ttu-id="2e8fb-301">Резервные копии</span><span class="sxs-lookup"><span data-stu-id="2e8fb-301">Backups</span></span>
<span data-ttu-id="2e8fb-302">Для данных на виртуальном массиве можно осуществлять резервное копирование в облако двумя способами: с помощью автоматической ежедневной архивации данных всего устройства по умолчанию, которая начинается в 22:30, или архивации вручную по требованию.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-302">The data on your virtual array is backed up to the cloud in two ways, a default automated daily backup of the entire device starting at 22:30 or via a manual on-demand backup.</span></span> <span data-ttu-id="2e8fb-303">По умолчанию устройство ежедневно автоматически создает облачные моментальные снимки всех хранящихся на нем данных.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-303">By default, the device automatically creates daily cloud snapshots of all the data residing on it.</span></span> <span data-ttu-id="2e8fb-304">Дополнительные сведения см. в статье [Резервное копирование виртуального массива StorSimple (предварительная версия)](storsimple-virtual-array-backup.md).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-304">For more information, go to [back up your StorSimple Virtual Array](storsimple-virtual-array-backup.md).</span></span>

<span data-ttu-id="2e8fb-305">Частоту создания и срок хранения резервных копий по умолчанию изменить нельзя, однако можно настроить время начала ежедневной архивации.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-305">The frequency and retention associated with the default backups cannot be changed but you can configure the time at which the daily backups are initiated every day.</span></span> <span data-ttu-id="2e8fb-306">При настройке времени начала автоматической архивации нужно следовать приведенным ниже рекомендациям.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-306">When configuring the start time for the automated backups, we recommend that:</span></span>

* <span data-ttu-id="2e8fb-307">Планируйте архивацию на часы наименьшей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-307">Schedule your backups for off-peak hours.</span></span> <span data-ttu-id="2e8fb-308">Время начала резервного копирования не должно совпадать с периодом интенсивных рабочих нагрузок ввода-вывода на узле.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-308">Backup start time should not coincide with numerous host IO.</span></span>
* <span data-ttu-id="2e8fb-309">Чтобы защитить данные на виртуальном массиве, при планировании отработки отказа устройства или перед периодом обслуживания следует инициировать ручную архивацию по требованию.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-309">Initiate a manual on-demand backup when planning to perform a device failover or prior to the maintenance window, to protect the data on your virtual array.</span></span>

### <a name="restore"></a><span data-ttu-id="2e8fb-310">Восстановление</span><span class="sxs-lookup"><span data-stu-id="2e8fb-310">Restore</span></span>
<span data-ttu-id="2e8fb-311">Выполнить восстановление из набора архивации можно двумя способами: восстановить в другой том или общую папку или выполнить восстановление на уровне элементов (если виртуальный массив настроен в качестве файлового сервера).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-311">You can restore from a backup set in two ways: restore to another volume or share or perform an item-level recovery (available only on a virtual array configured as a file server).</span></span> <span data-ttu-id="2e8fb-312">Восстановление на уровне элементов позволяет выполнять фрагментарное восстановление файлов и папок из облачной резервной копии всех общих папок на устройстве StorSimple.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-312">Item-level recovery allows you to do a granular recovery of files and folders from a cloud backup of all the shares on the StorSimple device.</span></span> <span data-ttu-id="2e8fb-313">Дополнительные сведения см. в статье [Восстановление из резервной копии виртуального массива StorSimple (предварительная версия)](storsimple-virtual-array-clone.md).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-313">For more information, go to [restore from a backup](storsimple-virtual-array-clone.md).</span></span>

<span data-ttu-id="2e8fb-314">При выполнении восстановления учитывайте следующие рекомендации:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-314">When performing a restore, keep the following guidelines in mind:</span></span>

* <span data-ttu-id="2e8fb-315">Виртуальный массив StorSimple не поддерживает восстановление на месте.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-315">Your StorSimple Virtual Array does not support in-place restore.</span></span> <span data-ttu-id="2e8fb-316">Однако такое восстановление можно выполнить в два этапа: освободите место на виртуальном массиве и выполните восстановление на другой том или в другую общую папку.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-316">This can however be readily achieved by a two-step process: make space on the virtual array and then restore to another volume/share.</span></span>
* <span data-ttu-id="2e8fb-317">Восстановление из локального тома — длительная операция.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-317">When restoring from a local volume, keep in mind the restore will be a long running operation.</span></span> <span data-ttu-id="2e8fb-318">Хотя том может быстро перейти в оперативный режим, расконсервация данных еще будет выполняться в фоновом режиме.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-318">Though the volume may quickly come online, the data continues to be hydrated in the background.</span></span>
* <span data-ttu-id="2e8fb-319">Тип тома не изменяется в процессе восстановления.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-319">The volume type remains the same during the restore process.</span></span> <span data-ttu-id="2e8fb-320">Многоуровневый том будет восстановлен в многоуровневый том, а локально закрепленный том — в локально закрепленный.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-320">A tiered volume is restored to another tiered volume and a locally pinned volume to another locally pinned volume.</span></span>
* <span data-ttu-id="2e8fb-321">Если при попытке восстановить том или общую папку из набора архивации происходит сбой задания восстановления, на портале все равно может быть создан целевой том или общая папка.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-321">When trying to restore a volume or a share from a backup set, if the restore job fails, a target volume or share may still be created in the portal.</span></span> <span data-ttu-id="2e8fb-322">Важно удалить этот неиспользуемый целевой том или общую папку на портале, чтобы свести к минимуму проблемы, которые могут возникнуть из-за этого элемента.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-322">It is important that you delete this unused target volume or share in the portal to minimize any future issues arising from this element.</span></span>

### <a name="failover-and-disaster-recovery"></a><span data-ttu-id="2e8fb-323">Отработка отказа и аварийное восстановление</span><span class="sxs-lookup"><span data-stu-id="2e8fb-323">Failover and disaster recovery</span></span>
<span data-ttu-id="2e8fb-324">Отработка отказа для устройства позволяет перенести данные c *исходного* устройства в центре обработки данных на *целевое* устройство, которое находится в том же или другом географическом расположении.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-324">A device failover allows you to migrate your data from a *source* device in the datacenter to another *target* device located in the same or a different geographical location.</span></span> <span data-ttu-id="2e8fb-325">Отработка отказа выполняется для всего устройства.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-325">The device failover is for the entire device.</span></span> <span data-ttu-id="2e8fb-326">При отработке отказа изменяется владелец облачных данных. После переноса они будут принадлежать владельцу целевого устройства.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-326">During failover, the cloud data for the source device changes ownership to that of the target device.</span></span>

<span data-ttu-id="2e8fb-327">Для виртуального массива StorSimple можно выполнить отработку отказа на другой виртуальный массив, управляемый той же службой диспетчера StorSimple.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-327">For your StorSimple Virtual Array, you can only fail over to another virtual array managed by the same StorSimple Manager service.</span></span> <span data-ttu-id="2e8fb-328">Отработка отказа на устройство серии 8000 или массив, управляемый другой службой диспетчера StorSimple (в сравнении с исходным устройством), не разрешена.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-328">A failover to an 8000 series device or an array managed by a different StorSimple Manager service (than the one for the source device) is not allowed.</span></span> <span data-ttu-id="2e8fb-329">Дополнительные рекомендации по отработке отказа см. в статье [Аварийное восстановление и отработка отказа устройства для виртуального массива StorSimple](storsimple-virtual-array-failover-dr.md).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-329">To learn more about the failover considerations, go to [prerequisites for the device failover](storsimple-virtual-array-failover-dr.md).</span></span>

<span data-ttu-id="2e8fb-330">При выполнении отработки отказа для виртуального массива нужно учитывать следующее:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-330">When performing a fail over for your virtual array, keep the following in mind:</span></span>

* <span data-ttu-id="2e8fb-331">Перед плановой отработкой отказа рекомендуется перевести все тома и общие папки в автономный режим.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-331">For a planned failover, it is a recommended best practice to take all the volumes/shares offline prior to initiating the failover.</span></span> <span data-ttu-id="2e8fb-332">Следуйте инструкциям для конкретной операционной системы и переведите в автономный режим тома и общие папки сначала на узле, а затем на виртуальном устройстве.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-332">Follow the operating system-specific instructions to take the volumes/shares offline on the host first and then take those offline on your virtual device.</span></span>
* <span data-ttu-id="2e8fb-333">При аварийном восстановлении файлового сервера рекомендуется присоединить целевое устройство к тому же домену, на котором находится исходное устройство. Это предотвратит конфликт разрешений общих папок.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-333">For a file server disaster recovery (DR), we recommend that you join the target device to the same domain as the source so that the share permissions are automatically resolved.</span></span> <span data-ttu-id="2e8fb-334">В этом выпуске поддерживается отработка отказа с переносом только в целевое устройство в том же домене.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-334">Only the failover to a target device in the same domain is supported in this release.</span></span>
* <span data-ttu-id="2e8fb-335">После успешного завершения аварийного восстановления исходное устройство будет автоматически удалено.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-335">Once the DR is successfully completed, the source device is automatically deleted.</span></span> <span data-ttu-id="2e8fb-336">Хотя устройство больше недоступно, виртуальная машина, подготовленная в главной системе, по-прежнему потребляет ресурсы.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-336">Though the device is no longer available, the virtual machine that you provisioned on the host system is still consuming resources.</span></span> <span data-ttu-id="2e8fb-337">Рекомендуется удалить эту виртуальную машину из главной системы, чтобы избежать начисления платы.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-337">We recommend that you delete this virtual machine from your host system to prevent any charges from accruing.</span></span>
* <span data-ttu-id="2e8fb-338">Обратите внимание, что даже если отработка отказа завершилась неудачно, **данные остаются сохраненными в облаке**.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-338">Do note that even if the failover is unsuccessful, **the data is always safe in the cloud**.</span></span> <span data-ttu-id="2e8fb-339">Рассмотрим следующие три сценария, в которых отработка отказа завершилась неудачно:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-339">Consider the following three scenarios in which the failover did not complete successfully:</span></span>
  
  * <span data-ttu-id="2e8fb-340">Сбой произошел на начальной стадии отработки отказа, например при выполнении предварительных проверок для аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-340">A failure occurred in the initial stages of the failover such as when the DR pre-checks are being performed.</span></span> <span data-ttu-id="2e8fb-341">В этом случае целевое устройство все еще можно использовать.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-341">In this situation, your target device is still usable.</span></span> <span data-ttu-id="2e8fb-342">Можно повторить попытку выполнить отработку отказа на том же целевом устройстве.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-342">You can retry the failover on the same target device.</span></span>
  * <span data-ttu-id="2e8fb-343">Сбой произошел во время фактического перехода на другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-343">A failure occurred during the actual failover process.</span></span> <span data-ttu-id="2e8fb-344">В этом случае целевое устройство помечается как непригодное для использования.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-344">In this case, the target device is marked unusable.</span></span> <span data-ttu-id="2e8fb-345">Необходимо подготовить и настроить для отработки отказа другой целевой виртуальный массив.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-345">You must provision and configure another target virtual array and use that for failover.</span></span>
  * <span data-ttu-id="2e8fb-346">Отработка отказа завершена, в результате чего исходное устройство было удалено, но с целевым устройством возникли проблемы и вы не можете получить доступ к данным.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-346">The failover was complete following which the source device was deleted but the target device has issues and you cannot access any data.</span></span> <span data-ttu-id="2e8fb-347">Данные по-прежнему безопасно сохранены в облаке, и их можно с легкостью получить, создав другой виртуальный массив и использовав его в качестве целевого устройства для аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-347">The data is still safe in the cloud and can be easily retrieved by creating another virtual array and then using it as a target device for the DR.</span></span>

### <a name="deactivate"></a><span data-ttu-id="2e8fb-348">Отключение</span><span class="sxs-lookup"><span data-stu-id="2e8fb-348">Deactivate</span></span>
<span data-ttu-id="2e8fb-349">При отключении виртуального массива StorSimple вы разрываете подключение между устройством и соответствующей службой диспетчера StorSimple.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-349">When you deactivate a StorSimple Virtual Array, you sever the connection between the device and the corresponding StorSimple Manager service.</span></span> <span data-ttu-id="2e8fb-350">Отключение является **необратимой** операцией.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-350">Deactivation is a **permanent** operation and cannot be undone.</span></span> <span data-ttu-id="2e8fb-351">Отключенное устройство нельзя зарегистрировать в службе диспетчера StorSimple повторно.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-351">A deactivated device cannot be registered with the StorSimple Manager service again.</span></span> <span data-ttu-id="2e8fb-352">Дополнительные сведения см. в статье [Отключение и удаление устройства StorSimple](storsimple-virtual-array-deactivate-and-delete-device.md).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-352">For more information, go to [deactivate and delete your StorSimple Virtual Array](storsimple-virtual-array-deactivate-and-delete-device.md).</span></span>

<span data-ttu-id="2e8fb-353">При отключении виртуального массива необходимо учитывать следующие рекомендации:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-353">Keep the following best practices in mind when deactivating your virtual array:</span></span>

* <span data-ttu-id="2e8fb-354">Прежде чем отключать виртуальное устройство, сделайте облачный моментальный снимок всех данных.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-354">Take a cloud snapshot of all the data prior to deactivating a virtual device.</span></span> <span data-ttu-id="2e8fb-355">При отключении виртуального массива все локальные данные устройства теряются.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-355">When you deactivate a virtual array, all the local device data is lost.</span></span> <span data-ttu-id="2e8fb-356">С помощью моментального снимка облака вы сможете восстановить все данные в дальнейшем.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-356">Taking a cloud snapshot will allow you to recover data at a later stage.</span></span>
* <span data-ttu-id="2e8fb-357">Перед отключением виртуального массива StorSimple обязательно удалите зависящие от него клиенты и узлы или остановите их работу.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-357">Before you deactivate a StorSimple Virtual Array, make sure to stop or delete clients and hosts that depend on that device.</span></span>
* <span data-ttu-id="2e8fb-358">Если отключенное устройство больше не используется, удалите его, чтобы с вас не взималась плата.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-358">Delete a deactivated device if you are no longer using so that it doesn't accrue charges.</span></span>

### <a name="monitoring"></a><span data-ttu-id="2e8fb-359">Мониторинг</span><span class="sxs-lookup"><span data-stu-id="2e8fb-359">Monitoring</span></span>
<span data-ttu-id="2e8fb-360">Чтобы гарантировать постоянное работоспособное состояние виртуального массива StorSimple, необходимо выполнять его мониторинг и следить за получением сведений из системы, в том числе оповещений.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-360">To ensure that your StorSimple Virtual Array is in a continuous healthy state, you need to monitor the array and ensure that you receive information from the system including alerts.</span></span> <span data-ttu-id="2e8fb-361">Для мониторинга общей работоспособности виртуального массива необходимо следовать приведенным ниже рекомендациям.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-361">To monitor the overall health of the virtual array, implement the following best practices:</span></span>

* <span data-ttu-id="2e8fb-362">Настройте мониторинг для отслеживания использования диска операционной системы и диска данных виртуального массива.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-362">Configure monitoring to track the disk usage of your virtual array data disk as well as the OS disk.</span></span> <span data-ttu-id="2e8fb-363">При использовании Hyper-V для мониторинга узлов виртуализации можно совместно использовать System Center Virtual Machine Manager и System Center Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-363">If running Hyper-V, you can use a combination of System Center Virtual Machine Manager (SCVMM) and System Center Operations Manager (SCOM) to monitor your virtualization hosts.</span></span>
* <span data-ttu-id="2e8fb-364">Настройте отправку уведомлений по электронной почте при достижении определенных уровней использования виртуального массива.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-364">Configure email notifications on your virtual array to send alerts at certain usage levels.</span></span>                                                                                                                                                                                                

### <a name="index-search-and-virus-scan-applications"></a><span data-ttu-id="2e8fb-365">Приложения поиска по индексу и проверки на вирусы</span><span class="sxs-lookup"><span data-stu-id="2e8fb-365">Index search and virus scan applications</span></span>
<span data-ttu-id="2e8fb-366">Виртуальный массив StorSimple может автоматически перемещать данные из локального уровня на уровень облака Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-366">A StorSimple Virtual Array can automatically tier data from the local tier to the Microsoft Azure cloud.</span></span> <span data-ttu-id="2e8fb-367">При использовании приложения поиска по индексу или проверки на вирусы для данных, хранящихся на устройстве StorSimple, необходимо позаботиться о том, чтобы к данным в облаке не было доступа и они не могли быть перемещены обратно на локальный уровень.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-367">When an application such as an index search or a virus scan is used to scan the data stored on StorSimple, you need to take care that the cloud data does not get accessed and pulled back to the local tier.</span></span>

<span data-ttu-id="2e8fb-368">При настройке поиска по индексу и проверки на вирусы на виртуальном массиве нужно следовать приведенным ниже рекомендациям.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-368">We recommend that you implement the following best practices when configuring the index search or virus scan on your virtual array:</span></span>

* <span data-ttu-id="2e8fb-369">Отключите все автоматически настроенные операции полной проверки.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-369">Disable any automatically configured full scan operations.</span></span>
* <span data-ttu-id="2e8fb-370">На многоуровневых томах настройте в приложениях поиска по индексу и проверки на вирусы выполнение добавочного сканирования.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-370">For tiered volumes, configure the index search or virus scan application to perform an incremental scan.</span></span> <span data-ttu-id="2e8fb-371">Таким образом, будут проверяться только новые данные, которые, скорее всего, расположены на локальном уровне.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-371">This would scan only the new data likely residing on the local tier.</span></span> <span data-ttu-id="2e8fb-372">Во время операции добавочного сканирования данные, перемещенные в облако, недоступны.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-372">The data that is tiered to the cloud is not accessed during an incremental operation.</span></span>
* <span data-ttu-id="2e8fb-373">Настройте подходящие фильтры и параметры поиска, чтобы проверялись только нужные типы файлов.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-373">Ensure the correct search filters and settings are configured so that only the intended types of files get scanned.</span></span> <span data-ttu-id="2e8fb-374">Например, изображения (JPEG, GIF и TIFF) и чертежи не следует проверять во время добавочного или полного перестроения индекса.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-374">For example, image files (JPEG, GIF, and TIFF) and engineering drawings should not be scanned during the incremental or full index rebuild.</span></span>

<span data-ttu-id="2e8fb-375">Если используется индексирование Windows, придерживайтесь следующих рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-375">If using Windows indexing process, follow these guidelines:</span></span>

* <span data-ttu-id="2e8fb-376">Не используйте индексатор Windows для многоуровневых томов. Если индекс нужно часто перестраивать, из облака перемещаются большие объемы данных (измеряемые в ТБ).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-376">Do not use the Windows Indexer for tiered volumes as it recalls large amounts of data (TBs) from the cloud if the index needs to be rebuilt frequently.</span></span> <span data-ttu-id="2e8fb-377">При перестроении индекса файлы всех типов извлекаются для индексирования их содержимого.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-377">Rebuilding the index would retrieve all file types to index their content.</span></span>
* <span data-ttu-id="2e8fb-378">Индексирование Windows можно использовать для локально закрепленных томов, так как при этом для создания индекса используются данные только на локальных уровнях (облачные данные не затрагиваются).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-378">Use the Windows indexing process for locally pinned volumes as this would only access data on the local tiers to build the index (the cloud data will not be accessed).</span></span>

### <a name="byte-range-locking"></a><span data-ttu-id="2e8fb-379">Блокировка диапазона байтов</span><span class="sxs-lookup"><span data-stu-id="2e8fb-379">Byte range locking</span></span>
<span data-ttu-id="2e8fb-380">Приложения могут блокировать заданный диапазон байтов в файлах.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-380">Applications can lock a specified range of bytes within the files.</span></span> <span data-ttu-id="2e8fb-381">Если блокировка диапазона байтов включена в приложениях, которые осуществляют запись в StorSimple, распределение по уровням в виртуальном массиве не работает.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-381">If byte range locking is enabled on the applications that are writing to your StorSimple, then tiering does not work on your virtual array.</span></span> <span data-ttu-id="2e8fb-382">Для распределения по уровням все области файлов, к которым осуществляется доступ, должны быть разблокированы.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-382">For the tiering to work, all areas of the files accessed should be unlocked.</span></span> <span data-ttu-id="2e8fb-383">Блокировка диапазона байтов не поддерживается для многоуровневых томов на виртуальном массиве.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-383">Byte range locking is not supported with tiered volumes on your virtual array.</span></span>

<span data-ttu-id="2e8fb-384">Ниже приведены рекомендации, позволяющие обойти блокировку диапазона байтов.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-384">Recommended measures to alleviate byte range locking include:</span></span>

* <span data-ttu-id="2e8fb-385">Отключите блокировку диапазона байтов в логике приложения.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-385">Turn off byte range locking in your application logic.</span></span>
* <span data-ttu-id="2e8fb-386">Используйте локально закрепленные тома (вместо многоуровневых) для данных, связанных с этим приложением.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-386">Use locally pinned volumes (instead of tiered) for the data associated with this application.</span></span> <span data-ttu-id="2e8fb-387">Данные локально закрепленных томов не перемещаются в облако.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-387">Locally pinned volumes do not tier into the cloud.</span></span>
* <span data-ttu-id="2e8fb-388">Если при использовании локально закрепленных томов включена блокировка диапазона байтов, том может перейти в оперативный режим до завершения восстановления.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-388">When using locally pinned volumes with byte range locking enabled, the volume can come online before the restore is complete.</span></span> <span data-ttu-id="2e8fb-389">В таком случае необходимо дождаться завершения восстановления.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-389">In these instances, you must wait for the restore to be complete.</span></span>

## <a name="multiple-arrays"></a><span data-ttu-id="2e8fb-390">Несколько массивов</span><span class="sxs-lookup"><span data-stu-id="2e8fb-390">Multiple arrays</span></span>
<span data-ttu-id="2e8fb-391">Чтобы предупредить рост рабочего набора данных, которые могут быть перенесены в облако, что приведет к ухудшению производительности устройства, может потребоваться развернуть несколько виртуальных массивов.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-391">Multiple virtual arrays may need to be deployed to account for a growing working set of data that could spill onto the cloud thus affecting the performance of the device.</span></span> <span data-ttu-id="2e8fb-392">В таких случаях лучше всего масштабировать устройства по мере роста рабочего набора.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-392">In these instances, it is best to scale devices as the working set grows.</span></span> <span data-ttu-id="2e8fb-393">Для этого требуется добавить одно или несколько устройств в локальный центр обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-393">This requires one or more devices to be added in the on-premises data center.</span></span> <span data-ttu-id="2e8fb-394">При добавлении этих устройств можно выполнить следующее:</span><span class="sxs-lookup"><span data-stu-id="2e8fb-394">When adding the devices, you could:</span></span>

* <span data-ttu-id="2e8fb-395">Разделить текущий набор данных.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-395">Split the current set of data.</span></span>
* <span data-ttu-id="2e8fb-396">Развернуть новые рабочие нагрузки для новых устройств.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-396">Deploy new workloads to new device(s).</span></span>
* <span data-ttu-id="2e8fb-397">При развертывании нескольких виртуальных массивов с точки зрения балансировки нагрузки рекомендуется распределить массив между разными узлами низкоуровневой оболочки.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-397">If deploying multiple virtual arrays, we recommend that from load-balancing perspective, distribute the array across different hypervisor hosts.</span></span>
* <span data-ttu-id="2e8fb-398">В пространстве имен распределенной файловой системы можно развернуть несколько виртуальных массивов (настроенных в качестве файлового сервера или сервера iSCSI).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-398">Multiple virtual arrays (when configured as a file server or an iSCSI server) can be deployed in a Distributed File System Namespace.</span></span> <span data-ttu-id="2e8fb-399">Подробные указания см. в [руководстве по развертыванию пространства имен распределенной файловой системы с помощью гибридного облачного хранилища](https://www.microsoft.com/download/details.aspx?id=45507).</span><span class="sxs-lookup"><span data-stu-id="2e8fb-399">For detailed steps, go to [Distributed File System Namespace Solution with Hybrid Cloud Storage Deployment Guide](https://www.microsoft.com/download/details.aspx?id=45507).</span></span> <span data-ttu-id="2e8fb-400">В настоящее время для виртуального массива не рекомендуется применять репликацию распределенной файловой системы.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-400">Distributed File System Replication is currently not recommended for use with the virtual array.</span></span> 

## <a name="see-also"></a><span data-ttu-id="2e8fb-401">Дополнительные материалы</span><span class="sxs-lookup"><span data-stu-id="2e8fb-401">See also</span></span>
<span data-ttu-id="2e8fb-402">Узнайте, как [администрировать виртуальный массив StorSimple](storsimple-virtual-array-manager-service-administration.md) с помощью службы диспетчера StorSimple.</span><span class="sxs-lookup"><span data-stu-id="2e8fb-402">Learn how to [administer your StorSimple Virtual Array](storsimple-virtual-array-manager-service-administration.md) via the StorSimple Manager service.</span></span>

