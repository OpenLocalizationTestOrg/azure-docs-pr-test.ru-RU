---
title: "Отработка отказа и аварийное восстановление для устройства StorSimple | Документация Майкрософт"
description: "Информация о том, как выполнить отработку отказа устройства StorSimple на то же устройство либо другое физическое или виртуальное устройство."
services: storsimple
documentationcenter: 
author: alkohli
manager: carmonm
editor: 
ms.assetid: 5751598e-49c8-42b3-8121-fea5857a7d83
ms.service: storsimple
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 09/16/2016
ms.author: alkohli
ms.openlocfilehash: bf92ffdb16b86c4033cc96ae2abb060d90f9505e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="failover-and-disaster-recovery-for-your-storsimple-device"></a><span data-ttu-id="59e19-103">Отработка отказа и аварийное восстановление для устройства StorSimple</span><span class="sxs-lookup"><span data-stu-id="59e19-103">Failover and disaster recovery for your StorSimple device</span></span>
## <a name="overview"></a><span data-ttu-id="59e19-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="59e19-104">Overview</span></span>
<span data-ttu-id="59e19-105">В этом учебнике описываются шаги, необходимые для отработки отказа устройства StorSimple в случае аварии.</span><span class="sxs-lookup"><span data-stu-id="59e19-105">This tutorial describes the steps required to fail over a StorSimple device in the event of a disaster.</span></span> <span data-ttu-id="59e19-106">Отработка отказа позволит перенести данные c исходного устройства в центре обработки данных на другое физическое или даже виртуальное устройство, которое находится в том же или другом географическом расположении.</span><span class="sxs-lookup"><span data-stu-id="59e19-106">A failover will allow you to migrate your data from a source device in the datacenter to another physical or even a virtual device located in the same or a different geographical location.</span></span> 

<span data-ttu-id="59e19-107">Управление аварийным восстановлением осуществляется с помощью функции отработки отказа устройства и инициируется на странице **Устройства** .</span><span class="sxs-lookup"><span data-stu-id="59e19-107">Disaster recovery (DR) is orchestrated via the device failover feature and is initiated from the **Devices** page.</span></span> <span data-ttu-id="59e19-108">На этой странице показаны все устройства StorSimple, подключенные к службе диспетчера StorSimple.</span><span class="sxs-lookup"><span data-stu-id="59e19-108">This page tabulates all the StorSimple devices connected to your StorSimple Manager service.</span></span> <span data-ttu-id="59e19-109">Для каждого устройства отображается понятное имя, состояние устройства, выделенная и максимальная емкость, тип и модель устройства.</span><span class="sxs-lookup"><span data-stu-id="59e19-109">For each device, the friendly name, status, provisioned and maximum capacity, type and model are displayed.</span></span>

![Страница "Устройства"](./media/storsimple-device-failover-disaster-recovery/IC740972.png)

<span data-ttu-id="59e19-111">Рекомендации в этом учебнике относятся к физическим и виртуальным устройствам StorSimple для всех версий программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="59e19-111">The guidance in this tutorial applies to StorSimple physical and virtual devices across all software versions.</span></span>

## <a name="disaster-recovery-dr-and-device-failover"></a><span data-ttu-id="59e19-112">Отработка отказа и аварийное восстановление</span><span class="sxs-lookup"><span data-stu-id="59e19-112">Disaster recovery (DR) and device failover</span></span>
<span data-ttu-id="59e19-113">В сценарии аварийного восстановления основное устройство прекращает функционировать.</span><span class="sxs-lookup"><span data-stu-id="59e19-113">In a disaster recovery (DR) scenario, the primary device stops functioning.</span></span> <span data-ttu-id="59e19-114">В этой ситуации можно переместить облачные данные, связанные с вышедшим из строя устройством, на другое устройство, используя основное устройство в качестве *источника* и указав другое устройство в качестве *целевого объекта*.</span><span class="sxs-lookup"><span data-stu-id="59e19-114">In this situation, you can move the cloud data associated with the failed device to another device by using the primary device as the *source* and specifying another device as the *target*.</span></span> <span data-ttu-id="59e19-115">Для миграции на целевое устройство можно выбрать один или несколько контейнеров томов.</span><span class="sxs-lookup"><span data-stu-id="59e19-115">You can select one or more volume containers to migrate to the target device.</span></span> <span data-ttu-id="59e19-116">Этот процесс называется *отработка отказа*.</span><span class="sxs-lookup"><span data-stu-id="59e19-116">This process is referred to as the *failover*.</span></span> 

<span data-ttu-id="59e19-117">Во время отработки отказа меняется владелец контейнеров томов с исходного устройства, а сами они перемещаются на целевое устройство.</span><span class="sxs-lookup"><span data-stu-id="59e19-117">During the failover, the volume containers from the source device change ownership and are transferred to the target device.</span></span> <span data-ttu-id="59e19-118">Когда у контейнеров томов меняется владелец, они удаляются с исходного устройства.</span><span class="sxs-lookup"><span data-stu-id="59e19-118">Once the volume containers change ownership, these are deleted from the source device.</span></span> <span data-ttu-id="59e19-119">По завершении удаления можно выполнить восстановление размещения конечного устройства.</span><span class="sxs-lookup"><span data-stu-id="59e19-119">After the deletion is complete, the target device can then be failed back.</span></span>

<span data-ttu-id="59e19-120">Обычно после аварийного восстановления для восстановления данных на целевом устройстве используется последняя резервная копия.</span><span class="sxs-lookup"><span data-stu-id="59e19-120">Typically following a DR, the most recent backup is used to restore the data to the target device.</span></span> <span data-ttu-id="59e19-121">Однако если есть несколько политик резервного копирования для одного тома, выбирается политика с наибольшим числом томов и для восстановления данных на целевом устройстве используется последняя резервная копия из этой политики.</span><span class="sxs-lookup"><span data-stu-id="59e19-121">However, if there are multiple backup policies for the same volume, then the backup policy with the largest number of volumes gets picked and the most recent backup from that policy is used to restore the data on the target device.</span></span>

<span data-ttu-id="59e19-122">Например, рассмотрим наличие двух политик архивации (стандартной и настраиваемой) *defaultPol* и *customPol* со следующими параметрами:</span><span class="sxs-lookup"><span data-stu-id="59e19-122">As an example, if there are two backup policies (one default and one custom) *defaultPol*, *customPol* with the following details:</span></span>

* <span data-ttu-id="59e19-123">*defaultPol*: один том (*vol1*), выполняется ежедневно, начиная с 22:30.</span><span class="sxs-lookup"><span data-stu-id="59e19-123">*defaultPol* : One volume, *vol1*, runs daily starting at 10:30 PM.</span></span>
* <span data-ttu-id="59e19-124">*customPol*: четыре тома (*vol1*, *vol2*, *vol3* и *vol4*), выполняется ежедневно, начиная с 22:00.</span><span class="sxs-lookup"><span data-stu-id="59e19-124">*customPol* : Four volumes, *vol1*, *vol2*, *vol3*, *vol4*, runs daily starting at 10:00 PM.</span></span>

<span data-ttu-id="59e19-125">В этом случае будет использоваться политика *customPol* так как у нее больше томов, и, соответственно, выше отказоустойчивость.</span><span class="sxs-lookup"><span data-stu-id="59e19-125">In this case, *customPol* will be used as it has more volumes and we prioritize for crash-consistency.</span></span> <span data-ttu-id="59e19-126">Для восстановления данных используется последняя резервная копия из этой политики.</span><span class="sxs-lookup"><span data-stu-id="59e19-126">The most recent backup from this policy is used to restore data.</span></span>

## <a name="considerations-for-device-failover"></a><span data-ttu-id="59e19-127">Рекомендации по отработке отказа устройства</span><span class="sxs-lookup"><span data-stu-id="59e19-127">Considerations for device failover</span></span>
<span data-ttu-id="59e19-128">В случае аварии можно выбрать отработку отказа устройства StorSimple:</span><span class="sxs-lookup"><span data-stu-id="59e19-128">In the event of a disaster, you may choose to fail over your StorSimple device:</span></span>

* <span data-ttu-id="59e19-129">на физическое устройство;</span><span class="sxs-lookup"><span data-stu-id="59e19-129">To a physical device</span></span> 
* <span data-ttu-id="59e19-130">на само устройство;</span><span class="sxs-lookup"><span data-stu-id="59e19-130">To itself</span></span>
* <span data-ttu-id="59e19-131">на виртуальное устройство.</span><span class="sxs-lookup"><span data-stu-id="59e19-131">To a virtual device</span></span>

<span data-ttu-id="59e19-132">Для отработки отказа на любое устройство необходимо помнить следующее:</span><span class="sxs-lookup"><span data-stu-id="59e19-132">For any device failover, keep in mind the following:</span></span>

* <span data-ttu-id="59e19-133">для аварийного восстановления необходимо, чтобы все тома в контейнерах томов находились в автономном режиме и с этими контейнерами томов был связан облачный моментальный снимок;</span><span class="sxs-lookup"><span data-stu-id="59e19-133">The prerequisites for DR are that all the volumes within the volume containers are offline and the volume containers have an associated cloud snapshot.</span></span> 
* <span data-ttu-id="59e19-134">в качестве целевых устройств для аварийного восстановления можно использовать устройства, на которых достаточно пространства для размещения выбранных контейнеров томов;</span><span class="sxs-lookup"><span data-stu-id="59e19-134">The available target devices for DR are devices that have sufficient space to accommodate the selected volume containers.</span></span> 
* <span data-ttu-id="59e19-135">подключенные к службе устройства, на которых недостаточно пространства, не будут доступны в качестве целевых устройств.</span><span class="sxs-lookup"><span data-stu-id="59e19-135">The devices that are connected to your service but do not meet the criteria of sufficient space will not be available as target devices.</span></span>
* <span data-ttu-id="59e19-136">После аварийного восстановления в течение ограниченного времени скорость доступа к данным может быть существенно снижена, так как устройству потребуется получить доступ к данным в облаке и сохранить их локально.</span><span class="sxs-lookup"><span data-stu-id="59e19-136">Following a DR, for a limited duration, the data access performance can be affected significantly, as the device will need to access the data from the cloud and store it locally.</span></span>

#### <a name="device-failover-across-software-versions"></a><span data-ttu-id="59e19-137">Отработка отказа устройством в разных версиях программного обеспечения</span><span class="sxs-lookup"><span data-stu-id="59e19-137">Device failover across software versions</span></span>
<span data-ttu-id="59e19-138">Служба StorSimple Manager в развертывании может обслуживать несколько устройств, физических и виртуальных, на которых могут выполняться разные версии программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="59e19-138">A StorSimple Manager service in a deployment may have multiple devices, both physical and virtual, all running different software versions.</span></span> <span data-ttu-id="59e19-139">В зависимости от используемой версии программного обеспечения типы томов на устройствах также могут отличаться.</span><span class="sxs-lookup"><span data-stu-id="59e19-139">Depending upon the software version, the volume types on the devices may also be different.</span></span> <span data-ttu-id="59e19-140">Например, устройство под управлением ПО с обновлением 2 или более поздней версии использует локально закрепленные и многоуровневые тома (при этом архивные тома являются подмножеством многоуровневых).</span><span class="sxs-lookup"><span data-stu-id="59e19-140">For instance, a device running Update 2 or higher would have locally pinned and tiered volumes (with archival being a subset of tiered).</span></span> <span data-ttu-id="59e19-141">С другой стороны, устройство под управлением ПО версии, предшествующей обновлению 2, может содержать многоуровневые и архивные тома.</span><span class="sxs-lookup"><span data-stu-id="59e19-141">A pre-Update 2 device on the other hand may have tiered and archival volumes.</span></span> 

<span data-ttu-id="59e19-142">Используйте следующую таблицу, чтобы определить, можно ли отработать отказ с переключением на другое устройство, которое отличается версией ПО и поведением типов томов, во время аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="59e19-142">Use the following table to determine if you can fail over to another device running a different software version and the behavior of volume types during DR.</span></span>

| <span data-ttu-id="59e19-143">Отработка отказа с</span><span class="sxs-lookup"><span data-stu-id="59e19-143">Fail over from</span></span> | <span data-ttu-id="59e19-144">Разрешено для физического устройства</span><span class="sxs-lookup"><span data-stu-id="59e19-144">Allowed for physical device</span></span> | <span data-ttu-id="59e19-145">Разрешено для виртуального устройства</span><span class="sxs-lookup"><span data-stu-id="59e19-145">Allowed for virtual device</span></span> |
| --- | --- | --- |
| <span data-ttu-id="59e19-146">С устройства с ПО с обновлением 2 на устройство с ПО до обновления 1 (версия 0.1, 0.2, 0.3).</span><span class="sxs-lookup"><span data-stu-id="59e19-146">Update 2 to pre-Update 1 (Release, 0.1, 0.2, 0.3)</span></span> |<span data-ttu-id="59e19-147">Нет</span><span class="sxs-lookup"><span data-stu-id="59e19-147">No</span></span> |<span data-ttu-id="59e19-148">Нет</span><span class="sxs-lookup"><span data-stu-id="59e19-148">No</span></span> |
| <span data-ttu-id="59e19-149">С устройства с ПО с обновлением 2 на устройство с ПО с обновлением 1 (1, 1.1, 1.2).</span><span class="sxs-lookup"><span data-stu-id="59e19-149">Update 2 to Update 1 (1, 1.1, 1.2)</span></span> |<span data-ttu-id="59e19-150">Да.</span><span class="sxs-lookup"><span data-stu-id="59e19-150">Yes</span></span> <br></br><span data-ttu-id="59e19-151">Если используются локально закрепленные или многоуровневые тома, либо их сочетания, для них отработка отказа всегда выполняется как для многоуровневых томов.</span><span class="sxs-lookup"><span data-stu-id="59e19-151">If using locally pinned or tiered volumes or a mix of two, the volumes are always failed over as tiered.</span></span> |<span data-ttu-id="59e19-152">Да.</span><span class="sxs-lookup"><span data-stu-id="59e19-152">Yes</span></span><br></br><span data-ttu-id="59e19-153">Если используются локально закрепленные тома, для них отработка отказа выполняется как для многоуровневых томов.</span><span class="sxs-lookup"><span data-stu-id="59e19-153">If using locally pinned volumes, these are failed over as tiered.</span></span> |
| <span data-ttu-id="59e19-154">С устройства с ПО с обновлением 2 на устройство с ПО с обновлением 2 (более поздней версии).</span><span class="sxs-lookup"><span data-stu-id="59e19-154">Update 2 to Update 2 (later version)</span></span> |<span data-ttu-id="59e19-155">Да.</span><span class="sxs-lookup"><span data-stu-id="59e19-155">Yes</span></span><br></br><span data-ttu-id="59e19-156">Если используются локально закрепленные или многоуровневые тома, либо их сочетания, для них отработка отказа выполняется в соответствии с исходным типом тома: для многоуровневых томов — как для многоуровневых, а для локально закрепленных томов — как для локально закрепленных.</span><span class="sxs-lookup"><span data-stu-id="59e19-156">If using locally pinned or tiered volumes or a mix of two, the volumes are always failed over as the starting volume type; tiered as tiered and locally pinned as locally pinned.</span></span> |<span data-ttu-id="59e19-157">Да.</span><span class="sxs-lookup"><span data-stu-id="59e19-157">Yes</span></span><br></br><span data-ttu-id="59e19-158">Если используются локально закрепленные тома, для них отработка отказа выполняется как для многоуровневых томов.</span><span class="sxs-lookup"><span data-stu-id="59e19-158">If using locally pinned volumes, these are failed over as tiered.</span></span> |

#### <a name="partial-failover-across-software-versions"></a><span data-ttu-id="59e19-159">Частичная отработка отказа в разных версиях программного обеспечения</span><span class="sxs-lookup"><span data-stu-id="59e19-159">Partial failover across software versions</span></span>
<span data-ttu-id="59e19-160">Следуйте указаниям, если собираетесь выполнить частичную отработку отказа с исходного устройства StorSimple с ПО, выпущенным до обновления 1, на целевое устройство с обновлением 1 или более поздней версией ПО.</span><span class="sxs-lookup"><span data-stu-id="59e19-160">Follow this guidance if you intend to perform a partial failover using a StorSimple source device running pre-Update 1 to a target running Update 1 or later.</span></span> 

| <span data-ttu-id="59e19-161">Источник при частичной отработке отказа</span><span class="sxs-lookup"><span data-stu-id="59e19-161">Partial failover from</span></span> | <span data-ttu-id="59e19-162">Разрешено для физического устройства</span><span class="sxs-lookup"><span data-stu-id="59e19-162">Allowed for physical device</span></span> | <span data-ttu-id="59e19-163">Разрешено для виртуального устройства</span><span class="sxs-lookup"><span data-stu-id="59e19-163">Allowed for virtual device</span></span> |
| --- | --- | --- |
| <span data-ttu-id="59e19-164">Из ПО до обновления 1 (версии 0.1, 0.2, 0.3) в ПО с обновлением 1 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="59e19-164">Pre-Update 1 (Release, 0.1, 0.2, 0.3) to Update 1 or later</span></span> |<span data-ttu-id="59e19-165">Да, см. рекомендацию ниже.</span><span class="sxs-lookup"><span data-stu-id="59e19-165">Yes, see below for the best practice tip.</span></span> |<span data-ttu-id="59e19-166">Да, см. рекомендацию ниже.</span><span class="sxs-lookup"><span data-stu-id="59e19-166">Yes, see below for the best practice tip.</span></span> |

> [!TIP]
> <span data-ttu-id="59e19-167">В обновление 1 и более поздние версии внесено изменение облачных метаданных и формата данных.</span><span class="sxs-lookup"><span data-stu-id="59e19-167">There was a cloud metadata and data format change in Update 1 and later versions.</span></span> <span data-ttu-id="59e19-168">Поэтому не рекомендуется частичная отработка отказа из ПО до обновления 1 в ПО с обновлением 1 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="59e19-168">Hence, we do not recommend a partial failover from pre-Update 1 to Update 1 or later versions.</span></span> <span data-ttu-id="59e19-169">Если необходимо выполнить частичную отработку отказа, рекомендуется сначала установить обновление 1 или более позднюю версию на оба устройства (исходное и целевое), а затем выполнить отработку отказа.</span><span class="sxs-lookup"><span data-stu-id="59e19-169">If you need to perform a partial failover, we recommend that you first apply Update 1 or later on both the devices (source and target) and then proceed with the failover.</span></span> 
> 
> 

## <a name="fail-over-to-another-physical-device"></a><span data-ttu-id="59e19-170">Отработка отказа на другое физическое устройство</span><span class="sxs-lookup"><span data-stu-id="59e19-170">Fail over to another physical device</span></span>
<span data-ttu-id="59e19-171">Для восстановления своего устройства на целевое физическое устройство выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="59e19-171">Perform the following steps to restore your device to a target physical device.</span></span>

1. <span data-ttu-id="59e19-172">Убедитесь, что контейнер томов, для которого необходимо выполнить отработку отказа, имеет связанные с собой облачные моментальные снимки.</span><span class="sxs-lookup"><span data-stu-id="59e19-172">Verify that the volume container you want to fail over has associated cloud snapshots.</span></span>
2. <span data-ttu-id="59e19-173">На странице **Устройства** выберите вкладку **Контейнеры томов**.</span><span class="sxs-lookup"><span data-stu-id="59e19-173">On the **Devices** page, click the **Volume Containers** tab.</span></span>
3. <span data-ttu-id="59e19-174">Выберите контейнер томов, для которого следует выполнить отработку отказа на другое устройство.</span><span class="sxs-lookup"><span data-stu-id="59e19-174">Select a volume container that you would like to fail over to another device.</span></span> <span data-ttu-id="59e19-175">Щелкните контейнер томов, чтобы открыть список томов в контейнере.</span><span class="sxs-lookup"><span data-stu-id="59e19-175">Click the volume container to display the list of volumes within this container.</span></span> <span data-ttu-id="59e19-176">Выберите том и щелкните **Отключить** , чтобы отключить том.</span><span class="sxs-lookup"><span data-stu-id="59e19-176">Select a volume and click **Take Offline** to take the volume offline.</span></span> <span data-ttu-id="59e19-177">Повторите эту процедуру для всех томов в контейнере томов.</span><span class="sxs-lookup"><span data-stu-id="59e19-177">Repeat this process for all the volumes in the volume container.</span></span>
4. <span data-ttu-id="59e19-178">Повторите предыдущий шаг для всех контейнеров томов, для которых необходимо выполнить отработку отказа на другое устройство.</span><span class="sxs-lookup"><span data-stu-id="59e19-178">Repeat the previous step for all the volume containers you would like to fail over to another device.</span></span>
5. <span data-ttu-id="59e19-179">На странице **Устройства** выберите **Отработка отказа**.</span><span class="sxs-lookup"><span data-stu-id="59e19-179">On the **Devices** page, click **Failover**.</span></span>
6. <span data-ttu-id="59e19-180">В открывшемся окне мастера в разделе **Выберите контейнер томов для отработки отказа**.</span><span class="sxs-lookup"><span data-stu-id="59e19-180">In the wizard that opens up, under **Choose volume container to fail over**:</span></span>
   
   1. <span data-ttu-id="59e19-181">В списке контейнеров томов выберите контейнеры томов, для которых следует выполнить отработку отказа.</span><span class="sxs-lookup"><span data-stu-id="59e19-181">In the list of volume containers, select the volume containers you would like to fail over.</span></span>
      <span data-ttu-id="59e19-182">**Отображаться будут только контейнеры тома со связанными облачными моментальными снимками и тома в автономном режиме.**</span><span class="sxs-lookup"><span data-stu-id="59e19-182">**Only the volume containers with associated cloud snapshots and offline volumes are displayed.**</span></span>
   2. <span data-ttu-id="59e19-183">В поле **Выберите целевое устройство** для томов в выбранных контейнерах в раскрывающемся списке доступных устройств выберите целевое устройство.</span><span class="sxs-lookup"><span data-stu-id="59e19-183">Under **Choose a target device** for the volumes in the selected containers, select a target device from the drop-down list of available devices.</span></span> <span data-ttu-id="59e19-184">В раскрывающемся списке отображаются только те устройства, на которых есть доступная емкость.</span><span class="sxs-lookup"><span data-stu-id="59e19-184">Only the devices that have the available capacity are displayed in the drop-down list.</span></span>
   3. <span data-ttu-id="59e19-185">Наконец, просмотрите все настройки отработки отказа в разделе **Подтвердить отработку отказа**.</span><span class="sxs-lookup"><span data-stu-id="59e19-185">Finally, review all the failover settings under **Confirm failover**.</span></span> <span data-ttu-id="59e19-186">Щелкните значок с изображением флажка ![значок с изображением флажка](./media/storsimple-device-failover-disaster-recovery/IC740895.png).</span><span class="sxs-lookup"><span data-stu-id="59e19-186">Click the check icon ![Check icon](./media/storsimple-device-failover-disaster-recovery/IC740895.png).</span></span>
7. <span data-ttu-id="59e19-187">Будет создано задание отработки отказа, которое можно отслеживать на странице **Задания** .</span><span class="sxs-lookup"><span data-stu-id="59e19-187">A failover job is created that can be monitored via the **Jobs** page.</span></span> <span data-ttu-id="59e19-188">Если контейнер томов, для которого выполнена отработка отказа, содержит локальные тома, то в нем для каждого локального тома отобразятся задания восстановления (а для многоуровневых томов не отобразятся).</span><span class="sxs-lookup"><span data-stu-id="59e19-188">If the volume container that you failed over has local volumes, then you will see individual restore jobs for each local volume (not for tiered volumes) in the container.</span></span> <span data-ttu-id="59e19-189">На выполнение этих заданий может уйти довольно много времени.</span><span class="sxs-lookup"><span data-stu-id="59e19-189">These restore jobs may take quite some time to complete.</span></span> <span data-ttu-id="59e19-190">Вполне вероятно, что задание отработки отказа может завершиться раньше.</span><span class="sxs-lookup"><span data-stu-id="59e19-190">It is likely that the failover job may complete earlier.</span></span> <span data-ttu-id="59e19-191">Обратите внимание, что эти тома будут доступны локально только тогда, когда будут выполнены задания восстановления.</span><span class="sxs-lookup"><span data-stu-id="59e19-191">Note that these volumes will have local guarantees only after the restore jobs are complete.</span></span> <span data-ttu-id="59e19-192">После завершения отработки отказа, перейдите на страницу **Устройства** .</span><span class="sxs-lookup"><span data-stu-id="59e19-192">After the failover is completed, go to the **Devices** page.</span></span>                                            
   
   1. <span data-ttu-id="59e19-193">Выберите устройство, которое было использовано в качестве целевого при отработке отказа.</span><span class="sxs-lookup"><span data-stu-id="59e19-193">Select the device that was used as the target device for the failover process.</span></span>
   2. <span data-ttu-id="59e19-194">Перейдите на страницу **Контейнеры томов** .</span><span class="sxs-lookup"><span data-stu-id="59e19-194">Go to the **Volume Containers** page.</span></span> <span data-ttu-id="59e19-195">В списке должны отобразиться все контейнеры томов, а также тома со старого устройства.</span><span class="sxs-lookup"><span data-stu-id="59e19-195">All the volume containers, along with the volumes from the old device, should be listed.</span></span>

## <a name="failover-using-a-single-device"></a><span data-ttu-id="59e19-196">Отработка отказа с помощью одного устройства</span><span class="sxs-lookup"><span data-stu-id="59e19-196">Failover using a single device</span></span>
<span data-ttu-id="59e19-197">При наличии только одного устройства для отработки отказа можно сделать вот что.</span><span class="sxs-lookup"><span data-stu-id="59e19-197">Perform the following steps if you only have a single device and need to perform a failover.</span></span>

1. <span data-ttu-id="59e19-198">Создайте облачные моментальные снимки всех томов на устройстве.</span><span class="sxs-lookup"><span data-stu-id="59e19-198">Take cloud snapshots of all the volumes in your device.</span></span>
2. <span data-ttu-id="59e19-199">Восстановите параметры устройства по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="59e19-199">Reset your device to factory defaults.</span></span> <span data-ttu-id="59e19-200">Выполните подробные инструкции по [восстановлению параметров по умолчанию для устройства StorSimple](storsimple-manage-device-controller.md#reset-the-device-to-factory-default-settings).</span><span class="sxs-lookup"><span data-stu-id="59e19-200">Follow the detailed instructions in [how to reset a StorSimple device to factory default settings](storsimple-manage-device-controller.md#reset-the-device-to-factory-default-settings).</span></span>
3. <span data-ttu-id="59e19-201">Настройте устройство и снова зарегистрируйте его в службе диспетчера StorSimple.</span><span class="sxs-lookup"><span data-stu-id="59e19-201">Configure your device and register it again with your StorSimple Manager service.</span></span>
4. <span data-ttu-id="59e19-202">На странице **Устройства** для старого устройства должно отображаться состояние **Отключено**.</span><span class="sxs-lookup"><span data-stu-id="59e19-202">On the **Devices** page, the old device should show as **Offline**.</span></span> <span data-ttu-id="59e19-203">У только что зарегистрированного устройства отображается состояние **Включено**.</span><span class="sxs-lookup"><span data-stu-id="59e19-203">The newly registered device should show as **Online**.</span></span>
5. <span data-ttu-id="59e19-204">Для нового устройства сначала нужно выполнить минимальную настройку.</span><span class="sxs-lookup"><span data-stu-id="59e19-204">For the new device, complete the minimum configuration of the device first.</span></span> 
   
   > [!IMPORTANT]
   > <span data-ttu-id="59e19-205">**Если не провести сначала минимальную настройку, в текущей реализации аварийное восстановление завершится сбоем из-за ошибки. Такое поведение будет исправлено в одном из последующих выпусков.**</span><span class="sxs-lookup"><span data-stu-id="59e19-205">**If the minimum configuration is not completed first, your DR will fail as a result of a bug in the current implementation. This behavior will be fixed in a later release.**</span></span>
   > 
   > 
6. <span data-ttu-id="59e19-206">Выберите старое устройство (отключенное) и щелкните **Отработка отказа**.</span><span class="sxs-lookup"><span data-stu-id="59e19-206">Select the old device (status offline) and click **Failover**.</span></span> <span data-ttu-id="59e19-207">В открывшемся мастере выполните отработку отказа устройства и укажите целевое устройство в качестве нового зарегистрированного устройства.</span><span class="sxs-lookup"><span data-stu-id="59e19-207">In the wizard that is presented, fail over this device and specify the target device as the newly registered device.</span></span> <span data-ttu-id="59e19-208">Подробные инструкции см. в разделе [Отработка отказа на другое физическое устройство](#fail-over-to-another-physical-device).</span><span class="sxs-lookup"><span data-stu-id="59e19-208">For detailed instructions, refer to [Fail over to another physical device](#fail-over-to-another-physical-device).</span></span>
7. <span data-ttu-id="59e19-209">Будет создано задание восстановления на устройство, за которым можно наблюдать на странице **Задания** .</span><span class="sxs-lookup"><span data-stu-id="59e19-209">A device restore job will be created that you can monitor from the **Jobs** page.</span></span>
8. <span data-ttu-id="59e19-210">После успешного выполнения задания перейдите на новое устройство и откройте страницу **Контейнеры томов** .</span><span class="sxs-lookup"><span data-stu-id="59e19-210">After the job has successfully completed, access the new device and navigate to the **Volume Containers** page.</span></span> <span data-ttu-id="59e19-211">Теперь все контейнеры томов из старого устройства следует перенести на новое устройство.</span><span class="sxs-lookup"><span data-stu-id="59e19-211">All the volume containers from the old device should now be migrated to the new device.</span></span>

## <a name="fail-over-to-a-storsimple-virtual-device"></a><span data-ttu-id="59e19-212">Отработка отказа на виртуальное устройство StorSimple</span><span class="sxs-lookup"><span data-stu-id="59e19-212">Fail over to a StorSimple virtual device</span></span>
<span data-ttu-id="59e19-213">Перед началом этой процедуры нужно создать и настроить виртуальное устройство StorSimple.</span><span class="sxs-lookup"><span data-stu-id="59e19-213">You must have a StorSimple virtual device created and configured prior to running this procedure.</span></span> <span data-ttu-id="59e19-214">Если выполняется ПО с обновлением 2, рассмотрите возможность использования для аварийного восстановления виртуального устройства 8020, которое обладает 64 ТБ памяти и использует хранилище класса Premium.</span><span class="sxs-lookup"><span data-stu-id="59e19-214">If running Update 2, consider using an 8020 virtual device for the DR that has 64 TB and uses Premium Storage.</span></span> 

<span data-ttu-id="59e19-215">Вот как можно восстановить устройство на целевом виртуальном устройстве StorSimple.</span><span class="sxs-lookup"><span data-stu-id="59e19-215">Perform the following steps to restore the device to a target StorSimple virtual device.</span></span>

1. <span data-ttu-id="59e19-216">Убедитесь, что контейнер томов, для которого необходимо выполнить отработку отказа, имеет связанные с собой облачные моментальные снимки.</span><span class="sxs-lookup"><span data-stu-id="59e19-216">Verify that the volume container you want to fail over has associated cloud snapshots.</span></span>
2. <span data-ttu-id="59e19-217">На странице **Устройства** выберите вкладку **Контейнеры томов**.</span><span class="sxs-lookup"><span data-stu-id="59e19-217">On the **Devices** page, click the **Volume Containers** tab.</span></span>
3. <span data-ttu-id="59e19-218">Выберите контейнер томов, для которого следует выполнить отработку отказа на другое устройство.</span><span class="sxs-lookup"><span data-stu-id="59e19-218">Select a volume container that you would like to fail over to another device.</span></span> <span data-ttu-id="59e19-219">Щелкните контейнер томов, чтобы открыть список томов в контейнере.</span><span class="sxs-lookup"><span data-stu-id="59e19-219">Click the volume container to display the list of volumes within this container.</span></span> <span data-ttu-id="59e19-220">Выберите том и щелкните **Отключить** , чтобы отключить том.</span><span class="sxs-lookup"><span data-stu-id="59e19-220">Select a volume and click **Take Offline** to take the volume offline.</span></span> <span data-ttu-id="59e19-221">Повторите эту процедуру для всех томов в контейнере томов.</span><span class="sxs-lookup"><span data-stu-id="59e19-221">Repeat this process for all the volumes in the volume container.</span></span>
4. <span data-ttu-id="59e19-222">Повторите предыдущий шаг для всех контейнеров томов, для которых необходимо выполнить отработку отказа на другое устройство.</span><span class="sxs-lookup"><span data-stu-id="59e19-222">Repeat the previous step for all the volume containers you would like to fail over to another device.</span></span>
5. <span data-ttu-id="59e19-223">На странице **Устройства** выберите **Отработка отказа**.</span><span class="sxs-lookup"><span data-stu-id="59e19-223">On the **Devices** page, click **Failover**.</span></span>
6. <span data-ttu-id="59e19-224">В окне мастера в разделе **Выбор контейнера томов для отработки отказа**выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="59e19-224">In the wizard that opens up, under **Choose volume container to failover**, complete the following:</span></span>
   
    <span data-ttu-id="59e19-225">а.</span><span class="sxs-lookup"><span data-stu-id="59e19-225">a.</span></span> <span data-ttu-id="59e19-226">В списке контейнеров томов выберите контейнеры томов, для которых следует выполнить отработку отказа.</span><span class="sxs-lookup"><span data-stu-id="59e19-226">In the list of volume containers, select the volume containers you would like to fail over.</span></span>
   
    <span data-ttu-id="59e19-227">**Отображаться будут только контейнеры тома со связанными облачными моментальными снимками и тома в автономном режиме.**</span><span class="sxs-lookup"><span data-stu-id="59e19-227">**Only the volume containers with associated cloud snapshots and offline volumes are displayed.**</span></span>
   
    <span data-ttu-id="59e19-228">b.</span><span class="sxs-lookup"><span data-stu-id="59e19-228">b.</span></span> <span data-ttu-id="59e19-229">На следующей странице в поле **Выберите целевое устройство для томов в выбранных контейнерах**в раскрывающемся списке доступных устройств выберите виртуальное устройство StorSimple.</span><span class="sxs-lookup"><span data-stu-id="59e19-229">Under **Choose a target device for the volumes in the selected containers**, select the StorSimple virtual device from the drop-down list of available devices.</span></span> <span data-ttu-id="59e19-230">**В раскрывающемся списке отображаются только устройства с достаточной емкостью.**</span><span class="sxs-lookup"><span data-stu-id="59e19-230">**Only the devices that have sufficient capacity are displayed in the drop-down list.**</span></span>  
7. <span data-ttu-id="59e19-231">Наконец, просмотрите все настройки отработки отказа в разделе **Подтвердить отработку отказа**.</span><span class="sxs-lookup"><span data-stu-id="59e19-231">Finally, review all the failover settings under **Confirm failover**.</span></span> <span data-ttu-id="59e19-232">Щелкните значок с изображением флажка ![значок с изображением флажка](./media/storsimple-device-failover-disaster-recovery/IC740895.png).</span><span class="sxs-lookup"><span data-stu-id="59e19-232">Click the check icon ![Check icon](./media/storsimple-device-failover-disaster-recovery/IC740895.png).</span></span>
8. <span data-ttu-id="59e19-233">После завершения отработки отказа, перейдите на страницу **Устройства** .</span><span class="sxs-lookup"><span data-stu-id="59e19-233">After the failover is completed, go to the **Devices** page.</span></span>
   
    <span data-ttu-id="59e19-234">а.</span><span class="sxs-lookup"><span data-stu-id="59e19-234">a.</span></span> <span data-ttu-id="59e19-235">Выберите виртуальное устройство StorSimple, используемое в качестве целевого устройства для отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="59e19-235">Select the StorSimple virtual device that was used as the target device for the failover process.</span></span>
   
    <span data-ttu-id="59e19-236">b.</span><span class="sxs-lookup"><span data-stu-id="59e19-236">b.</span></span> <span data-ttu-id="59e19-237">Перейдите на страницу **Контейнеры томов** .</span><span class="sxs-lookup"><span data-stu-id="59e19-237">Go to the **Volume Containers** page.</span></span> <span data-ttu-id="59e19-238">Теперь должны отобразиться все контейнеры томов, а также тома со старого устройства.</span><span class="sxs-lookup"><span data-stu-id="59e19-238">All the volume containers, along with the volumes from the old device should now be listed.</span></span>

<span data-ttu-id="59e19-239">![Доступно видео](./media/storsimple-device-failover-disaster-recovery/Video_icon.png) **Доступно видео**</span><span class="sxs-lookup"><span data-stu-id="59e19-239">![Video available](./media/storsimple-device-failover-disaster-recovery/Video_icon.png) **Video available**</span></span>

<span data-ttu-id="59e19-240">Чтобы посмотреть видео, показывающее процесс перемещения данных с физического устройства после сбоя на виртуальное устройство в облаке, щелкните [здесь](https://azure.microsoft.com/documentation/videos/storsimple-and-disaster-recovery/).</span><span class="sxs-lookup"><span data-stu-id="59e19-240">To watch a video that demonstrates how you can restore a failed over physical device to a virtual device in the cloud, click [here](https://azure.microsoft.com/documentation/videos/storsimple-and-disaster-recovery/).</span></span>

## <a name="failback"></a><span data-ttu-id="59e19-241">Восстановление размещения</span><span class="sxs-lookup"><span data-stu-id="59e19-241">Failback</span></span>
<span data-ttu-id="59e19-242">Для ПО с обновлением 3 и более поздних версий StorSimple также поддерживает восстановление размещения.</span><span class="sxs-lookup"><span data-stu-id="59e19-242">For Update 3 and later versions, StorSimple also supports failback.</span></span> <span data-ttu-id="59e19-243">После завершения тестовой отработки отказа выполняются следующие действия:</span><span class="sxs-lookup"><span data-stu-id="59e19-243">After the failover is complete, the following actions occur:</span></span>

* <span data-ttu-id="59e19-244">Контейнеры томов, для которых выполнена отработка отказа, удаляются с исходного устройства.</span><span class="sxs-lookup"><span data-stu-id="59e19-244">The volume containers that are failed over are cleaned from the source device.</span></span>
* <span data-ttu-id="59e19-245">Фоновое задание для контейнера томов (для которого выполнена отработка отказа) запускается на исходном устройстве.</span><span class="sxs-lookup"><span data-stu-id="59e19-245">A background job per volume container (failed over) is initiated on the source device.</span></span> <span data-ttu-id="59e19-246">При попытке восстановить размещение во время выполнения задания отобразится оповещение об этом.</span><span class="sxs-lookup"><span data-stu-id="59e19-246">If you attempt to failback while the job is in progress, you will recieve a notification to that effect.</span></span> <span data-ttu-id="59e19-247">Потребуется дождаться завершения задачи, чтобы начать восстановление размещения.</span><span class="sxs-lookup"><span data-stu-id="59e19-247">You will need to wait until the job is complete to start the failback.</span></span> 
  
    <span data-ttu-id="59e19-248">Длительность удаления контейнеров томов зависит от различных факторов, таких как объем данных, возраст данных, количество резервных копий и доступная пропускная способность сети для операции.</span><span class="sxs-lookup"><span data-stu-id="59e19-248">The time to complete the deletion of volume containers is dependent on various factors such as amount of data, age of the data, number of backups, and the network bandwidth available for the operation.</span></span> <span data-ttu-id="59e19-249">Если вы планируете выполнить тестовую отработку отказа или тестовое восстановление размещения, то рекомендуем использовать для тестирования контейнеры томов с меньшим объемом данных (ГБ).</span><span class="sxs-lookup"><span data-stu-id="59e19-249">If you are planning test failovers/failbacks, we recommend that you test volume containers with less data (Gbs).</span></span> <span data-ttu-id="59e19-250">В большинстве случаев восстановление размещения можно начать через 24 часа после отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="59e19-250">In most cases, you can start the failback 24 hours after the failover is complete.</span></span> 

## <a name="frequently-asked-questions"></a><span data-ttu-id="59e19-251">Часто задаваемые вопросы</span><span class="sxs-lookup"><span data-stu-id="59e19-251">Frequently asked questions</span></span>
<span data-ttu-id="59e19-252">В.</span><span class="sxs-lookup"><span data-stu-id="59e19-252">Q.</span></span> <span data-ttu-id="59e19-253">**Что происходит в случае сбоя аварийного восстановления или его частичного выполнения?**</span><span class="sxs-lookup"><span data-stu-id="59e19-253">**What happens if the DR fails or has partial success?**</span></span>

<span data-ttu-id="59e19-254">а.</span><span class="sxs-lookup"><span data-stu-id="59e19-254">A.</span></span> <span data-ttu-id="59e19-255">В случае сбоя аварийного восстановления рекомендуется повторить попытку восстановления.</span><span class="sxs-lookup"><span data-stu-id="59e19-255">If the DR fails, we recommend that you try agian.</span></span> <span data-ttu-id="59e19-256">При повторном запуске аварийное восстановления будет знать, что уже было выполнено и когда был приостановлен процесс.</span><span class="sxs-lookup"><span data-stu-id="59e19-256">The second time around, DR knows what all was done and when the process stalled the first time.</span></span> <span data-ttu-id="59e19-257">Процесс будет возобновлен с момента остановки.</span><span class="sxs-lookup"><span data-stu-id="59e19-257">The DR process starts from that point onwards.</span></span> 

<span data-ttu-id="59e19-258">В.</span><span class="sxs-lookup"><span data-stu-id="59e19-258">Q.</span></span> <span data-ttu-id="59e19-259">**Можно ли удалить устройство во время отработки отказа устройства?**</span><span class="sxs-lookup"><span data-stu-id="59e19-259">**Can I delete a device while the device failover is in progress?**</span></span>

<span data-ttu-id="59e19-260">а.</span><span class="sxs-lookup"><span data-stu-id="59e19-260">A.</span></span> <span data-ttu-id="59e19-261">Во время выполнения аварийного восстановления невозможно удалить устройство.</span><span class="sxs-lookup"><span data-stu-id="59e19-261">You cannot delete a device while a DR is in progress.</span></span> <span data-ttu-id="59e19-262">Устройство можно удалить только после завершения аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="59e19-262">You can only delete your device after the DR is complete.</span></span>

<span data-ttu-id="59e19-263">В.</span><span class="sxs-lookup"><span data-stu-id="59e19-263">Q.</span></span>    <span data-ttu-id="59e19-264">**Когда на исходном устройстве начинается сборка мусора, чтобы удалить с него локальные данные?**</span><span class="sxs-lookup"><span data-stu-id="59e19-264">**When does the garbage collection start on the source device so that the local data on source device is deleted?**</span></span>

<span data-ttu-id="59e19-265">а.</span><span class="sxs-lookup"><span data-stu-id="59e19-265">A.</span></span> <span data-ttu-id="59e19-266">Сборка мусора на исходном устройстве запускается только после его полной очистки.</span><span class="sxs-lookup"><span data-stu-id="59e19-266">Garbage collection will be enabled on the source device only after the device is completely cleaned up.</span></span> <span data-ttu-id="59e19-267">Очистка исходного устройства включает в себя удаление объектов, для которых была выполнена отработка отказа, таких как тома, объекты резервного копирования (не данные), контейнеры томов и политики.</span><span class="sxs-lookup"><span data-stu-id="59e19-267">The cleanup includes cleaning up objects that have failed over from the source device such as volumes, backup objects (not data), volume containers, and policies.</span></span>

<span data-ttu-id="59e19-268">В.</span><span class="sxs-lookup"><span data-stu-id="59e19-268">Q.</span></span> <span data-ttu-id="59e19-269">**Что произойдет в случае сбоя задания удаления, связанного с контейнерами томов на исходном устройстве?**</span><span class="sxs-lookup"><span data-stu-id="59e19-269">**What happens if the delete job associated with the volume containers in the source device fails?**</span></span>

<span data-ttu-id="59e19-270">а.</span><span class="sxs-lookup"><span data-stu-id="59e19-270">A.</span></span>  <span data-ttu-id="59e19-271">В случае сбоя задания удаления необходимо запустить удаление контейнеров томов вручную.</span><span class="sxs-lookup"><span data-stu-id="59e19-271">If the delete job fails, then you will need to manually trigger the deletion of the volume containers.</span></span> <span data-ttu-id="59e19-272">На странице **Устройства** выберите исходное устройство и щелкните **Контейнеры томов**.</span><span class="sxs-lookup"><span data-stu-id="59e19-272">In the **Devices** page, select your source device and click **Volume containers**.</span></span> <span data-ttu-id="59e19-273">Выберите контейнеры томов, для которых была выполнена отработка отказа, и внизу страницы нажмите кнопку **Удалить**.</span><span class="sxs-lookup"><span data-stu-id="59e19-273">Select the volume containers that you failed over and in the bottom of the page, click **Delete**.</span></span> <span data-ttu-id="59e19-274">После удаления с исходного устройства всех контейнеров томов, для которых выполнена отработка отказа, можно начать восстановление размещения.</span><span class="sxs-lookup"><span data-stu-id="59e19-274">Once you have deleted all the failed over volume containers on the source device, you can start the failback.</span></span>

## <a name="business-continuity-disaster-recovery-bcdr"></a><span data-ttu-id="59e19-275">Аварийное восстановление непрерывности бизнеса (BCDR)</span><span class="sxs-lookup"><span data-stu-id="59e19-275">Business continuity disaster recovery (BCDR)</span></span>
<span data-ttu-id="59e19-276">Сценарий аварийного восстановления непрерывности бизнеса (BCDR) реализуется, когда весь центр обработки данных Azure прекращает работу.</span><span class="sxs-lookup"><span data-stu-id="59e19-276">A business continuity disaster recovery (BCDR) scenario occurs when the entire Azure datacenter stops functioning.</span></span> <span data-ttu-id="59e19-277">Это может повлиять на службу диспетчера StorSimple и связанные устройства StorSimple.</span><span class="sxs-lookup"><span data-stu-id="59e19-277">This can affect your StorSimple Manager service and the associated StorSimple devices.</span></span>

<span data-ttu-id="59e19-278">Если есть устройства StorSimple, зарегистрированные непосредственно перед сбоем, этим устройствам StorSimple может потребоваться восстановление заводских настроек.</span><span class="sxs-lookup"><span data-stu-id="59e19-278">If there are StorSimple devices that were registered just before a disaster occurred, then these StorSimple devices may need to undergo a factory reset.</span></span> <span data-ttu-id="59e19-279">После аварии устройство StorSimple будет отображаться как автономное.</span><span class="sxs-lookup"><span data-stu-id="59e19-279">After the disaster, the StorSimple device will be shown as offline.</span></span> <span data-ttu-id="59e19-280">Устройство StorSimple необходимо удалить из портала и восстановить его заводские настройки, после чего повторить регистрацию.</span><span class="sxs-lookup"><span data-stu-id="59e19-280">The StorSimple device must be deleted from the portal, and a factory reset should be done, followed by a fresh registration.</span></span>

## <a name="next-steps"></a><span data-ttu-id="59e19-281">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="59e19-281">Next steps</span></span>
* <span data-ttu-id="59e19-282">После отработки отказа, возможно, нужно будет [отключить или удалить устройство StorSimple](storsimple-deactivate-and-delete-device.md).</span><span class="sxs-lookup"><span data-stu-id="59e19-282">After you have performed a failover, you may need to [deactivate or delete your StorSimple device](storsimple-deactivate-and-delete-device.md).</span></span>
* <span data-ttu-id="59e19-283">Сведения об управлении устройством с помощью службы диспетчера StorSimple см. в статье [Использование службы диспетчера StorSimple для администрирования устройства StorSimple](storsimple-manager-service-administration.md).</span><span class="sxs-lookup"><span data-stu-id="59e19-283">For information about how to use the StorSimple Manager service, go to [Use the StorSimple Manager service to administer your StorSimple device](storsimple-manager-service-administration.md).</span></span>

