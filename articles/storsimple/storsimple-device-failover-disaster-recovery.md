---
title: "отработка отказа и аварийного восстановления aaaStorSimple | Документы Microsoft"
description: "Узнайте, как toofail по вашей tooitself устройства StorSimple, другое физическое устройство или виртуального устройства."
services: storsimple
documentationcenter: 
author: alkohli
manager: carmonm
editor: 
ms.assetid: 5751598e-49c8-42b3-8121-fea5857a7d83
ms.service: storsimple
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 09/16/2016
ms.author: alkohli
ms.openlocfilehash: 00ce365f8a9095d1f0292e665d7f9eaa844b44ae
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="failover-and-disaster-recovery-for-your-storsimple-device"></a>Отработка отказа и аварийное восстановление для устройства StorSimple
## <a name="overview"></a>Обзор
Этот учебник описывает toofail необходимые шаги hello на устройство StorSimple в событии hello аварии. Отработки отказа позволит вам toomigrate данные из исходного устройства в физической tooanother datacenter hello или даже виртуальное устройство находится в hello того же или другом географическом расположении. 

Аварийного восстановления (DR), управляемые через функцию отработки отказа устройства hello и инициированный hello **устройств** страницы. Эта страница выполняется Включение всех hello устройств подключенных tooyour StorSimple службы диспетчера StorSimple. Для каждого устройства, hello понятное имя, состояние, подготовлена и максимальная емкость отображаются тип и модель.

![Страница "Устройства"](./media/storsimple-device-failover-disaster-recovery/IC740972.png)

руководство Hello в этом учебнике применяется tooStorSimple физических и виртуальных устройств во всех версиях программного обеспечения.

## <a name="disaster-recovery-dr-and-device-failover"></a>Отработка отказа и аварийное восстановление
В сценарии аварийного восстановления (DR) основное устройство hello перестает работать. В этой ситуации можно переместить hello облачные данные, связанные с устройства tooanother hello отказавшего устройства с помощью hello основное устройство как hello *источника* и указания другого устройства в качестве hello *целевой*. Можно выбрать один или несколько томов контейнеры toomigrate toohello целевое устройство. Этот процесс — hello ссылка tooas *перехода на другой ресурс*. 

Во время перехода на другой ресурс hello hello контейнеры томов из устройства-источника hello меняют владельца и передаются toohello целевого устройства. После контейнеры томов hello сменить владельца, они удаляются с исходного устройства hello. После завершения удаления hello hello целевое устройство затем возможен обратно.

Обычно за аварийного восстановления, hello самой последней резервной копии следует использовать toorestore hello данных toohello целевое устройство. Однако при наличии нескольких политик резервного копирования для hello в одном томе, затем возвращает выбрать hello политику резервного копирования с большим количеством hello томов и hello самой последней резервной копии из этой политики используется toorestore hello данных на целевом устройстве hello.

Например, при наличии двух политик резервного копирования (одно значение по умолчанию и один произвольный) *defaultPol*, *customPol* с hello, приведенные ниже сведения:

* *defaultPol*: один том (*vol1*), выполняется ежедневно, начиная с 22:30.
* *customPol*: четыре тома (*vol1*, *vol2*, *vol3* и *vol4*), выполняется ежедневно, начиная с 22:00.

В этом случае будет использоваться политика *customPol* так как у нее больше томов, и, соответственно, выше отказоустойчивость. используется toorestore данные Hello самой последней резервной копии из этой политики.

## <a name="considerations-for-device-failover"></a>Рекомендации по отработке отказа устройства
В случае аварии hello можно выбрать toofail отказа устройства StorSimple.

* tooa физического устройства 
* tooitself
* tooa виртуального устройства

Для отработки отказа все устройства Имейте в виду следующие hello.

* Hello предварительные требования для аварийного восстановления, что все тома hello в контейнеры томов hello находятся в автономном режиме, и иметь связанный с ним контейнеры томов hello облачного моментального снимка. 
* Hello доступные целевые устройства для ав — устройств, которые имеют достаточно tooaccommodate пространства hello выбранные контейнеры томов. 
* Hello устройства, подключенного tooyour службы, но не отвечающие критериям hello достаточно места, не будут доступны как целевые устройства.
* После аварийного восстановления, в течение ограниченного периода времени hello скорость доступа к данным может значительно повлиять, как устройство hello может потребоваться tooaccess hello данных из облака hello и сохранить его локально.

#### <a name="device-failover-across-software-versions"></a>Отработка отказа устройством в разных версиях программного обеспечения
Служба StorSimple Manager в развертывании может обслуживать несколько устройств, физических и виртуальных, на которых могут выполняться разные версии программного обеспечения. В зависимости от версии программного обеспечения hello типов томов hello на устройствах hello может также отличаться. Например, устройство под управлением ПО с обновлением 2 или более поздней версии использует локально закрепленные и многоуровневые тома (при этом архивные тома являются подмножеством многоуровневых). Перед обновлением 2 устройства на hello многоуровневого другой стороны и архивация тома. 

Используйте следующие таблицы toodetermine при переключении tooanother устройства под управлением различных программных версии hello поведения и типов томов во время аварийного восстановления hello.

| Отработка отказа с | Разрешено для физического устройства | Разрешено для виртуального устройства |
| --- | --- | --- |
| 2 toopre обновления 1 (выпуск, 0.1, 0.2, 0.3) |Нет |Нет |
| Обновление 2 tooUpdate 1 (1, 1.1, 1.2) |Да <br></br>Если с помощью локально закрепленные или многоуровневого тома или сочетание двух, приветствия тома всегда отработку отказа в многоуровневый тип. |Да<br></br>Если используются локально закрепленные тома, для них отработка отказа выполняется как для многоуровневых томов. |
| Обновление 2 tooUpdate 2 (более поздней версии) |Да<br></br>Если используется локально закрепленные или многоуровневых томов или сочетание двух, hello тома всегда выполнена отработка отказа как hello начальный тип тома; как многоуровневого и локально закрепленные многоуровневого локально закрепленные. |Да<br></br>Если используются локально закрепленные тома, для них отработка отказа выполняется как для многоуровневых томов. |

#### <a name="partial-failover-across-software-versions"></a>Частичная отработка отказа в разных версиях программного обеспечения
Если предполагается tooperform частичного отработки отказа, с помощью исходного устройства StorSimple запускать выполнение обновления 1 или более поздней версии более 1 tooa перед обновлением, выполните в этом руководстве. 

| Источник при частичной отработке отказа | Разрешено для физического устройства | Разрешено для виртуального устройства |
| --- | --- | --- |
| Перед обновлением 1 (выпуск, 0.1, 0.2, 0.3) tooUpdate 1 или более поздней версии |Да, см. ниже лучший подход совет hello. |Да, см. ниже лучший подход совет hello. |

> [!TIP]
> В обновление 1 и более поздние версии внесено изменение облачных метаданных и формата данных. Таким образом не рекомендуется частичного отработки отказа с 1 tooUpdate перед обновлением 1 или более поздней версии. Если вам требуется tooperform частичного перехода на другой ресурс, рекомендуется установить обновление 1 или ниже на как hello на устройствах (исходный и конечный) и продолжите hello перехода на другой ресурс. 
> 
> 

## <a name="fail-over-tooanother-physical-device"></a>При сбое tooanother физического устройства
Выполните следующие шаги toorestore hello целевого устройства tooa физического устройства.

1. Убедитесь, что нужные toofail через контейнера томов hello связаны облачные моментальные снимки.
2. На hello **устройств** щелкните hello **контейнеры томов** вкладки.
3. Выберите контейнер томов, желательно toofail над tooanother устройством. Выберите hello тома контейнера toodisplay hello список томов в контейнере. Выберите том и нажмите кнопку **перевести в автономный режим** tootake том hello в автономный режим. Повторите эту процедуру для всех томов hello в контейнер тома hello.
4. Hello повторите предыдущий шаг для всех hello контейнеры томов хотелось бы toofail над tooanother устройством.
5. На hello **устройств** щелкните **перехода на другой ресурс**.
6. В мастере приветствия, открывающемся в разделе **выберите toofail контейнер тома по**:
   
   1. В списке hello контейнеров томов выберите контейнеры томов hello, которой вы хотите toofail по.
      **Здравствуйте, только контейнеры томов со связанных облачных моментальных снимков и отображаются томами в автономном режиме.**
   2. В разделе **выберите целевое устройство** для hello томов в контейнере hello выбран, выберите целевое устройство из hello раскрывающегося списка доступных устройств. В раскрывающемся списке hello отображаются только устройства hello hello доступной емкостью.
   3. Наконец, просмотрите все параметры отработки отказа hello под **Подтвердите отработку отказа**. Щелкните значок галочки hello ![значок проверки](./media/storsimple-device-failover-disaster-recovery/IC740895.png).
7. Создается задание отработки отказа, можно отслеживать с помощью hello **заданий** страницы. Если контейнер томов hello отработку отказа локального тома, вы увидите отдельных заданий восстановления для каждого локального тома (не для многоуровневых томов), в контейнере hello. Эти задания восстановления может занять некоторое время toocomplete. Вполне вероятно, hello задание отработки отказа может завершиться ранее. Следует отметить, что эти тома локального гарантии только после завершения задания восстановления hello. После завершения перехода на другой ресурс hello go toohello **устройств** страницы.                                            
   
   1. Выберите устройство hello, используемой в качестве hello целевое устройство для hello процесс отработки отказа.
   2. Go toohello **контейнеры томов** страницы. Должны появиться все контейнеры томов hello и hello томами из старого устройства hello.

## <a name="failover-using-a-single-device"></a>Отработка отказа с помощью одного устройства
Выполните hello, выполнив действия, если имеется только один tooperform устройство и необходимости отработки отказа.

1. Выполните моментальные облачные снимки всех томов hello в вашем устройстве.
2. Сбросьте настройки устройства toofactory по умолчанию. Выполните hello подробные инструкции в [как параметры по умолчанию tooreset toofactory устройство StorSimple](storsimple-manage-device-controller.md#reset-the-device-to-factory-default-settings).
3. Настройте устройство и снова зарегистрируйте его в службе диспетчера StorSimple.
4. На hello **устройств** странице hello старое устройство должно отображаться как **Offline**. Hello вновь зарегистрированного устройства должно отображаться как **Online**.
5. Для hello новое устройство сначала выполните hello минимальная конфигурация устройства hello. 
   
   > [!IMPORTANT]
   > **Если минимальная конфигурация hello сначала не выполнить, в результате ошибки в текущей реализации hello произойдет сбой процесса аварийного восстановления. Такое поведение будет исправлено в одном из последующих выпусков.**
   > 
   > 
6. Выберите старое устройство hello (состояние вне сети) и нажмите кнопку **перехода на другой ресурс**. В мастере приветствия, представленные отработки отказа это устройство и укажите целевое устройство hello как новое зарегистрированное устройство hello. Подробные инструкции см. в разделе слишком[отработки отказа физического устройства tooanother](#fail-over-to-another-physical-device).
7. Задание восстановления устройства будет создан, можно вести наблюдение из hello **заданий** страницы.
8. После успешного завершения задания hello, для доступа к hello новое устройство, так и для перехода toohello **контейнеры томов** страницы. Все контейнеры томов hello из старого устройства hello, теперь будет перенесенных toohello новое устройство.

## <a name="fail-over-tooa-storsimple-virtual-device"></a>При сбое tooa виртуального устройства StorSimple
Необходимо иметь StorSimple виртуального устройства создается и настраивается предыдущих toorunning этой процедуры. Если выполняется обновление 2, рассмотрите возможность использования 8020 виртуального устройства для hello аварийного восстановления, который имеет 64 ТБ и использует хранилище Premium. 

Выполните следующие шаги toorestore hello устройства tooa целевой виртуальное устройство StorSimple hello.

1. Убедитесь, что нужные toofail через контейнера томов hello связаны облачные моментальные снимки.
2. На hello **устройств** щелкните hello **контейнеры томов** вкладки.
3. Выберите контейнер томов, желательно toofail над tooanother устройством. Выберите hello тома контейнера toodisplay hello список томов в контейнере. Выберите том и нажмите кнопку **перевести в автономный режим** tootake том hello в автономный режим. Повторите эту процедуру для всех томов hello в контейнер тома hello.
4. Hello повторите предыдущий шаг для всех hello контейнеры томов хотелось бы toofail над tooanother устройством.
5. На hello **устройств** щелкните **перехода на другой ресурс**.
6. В мастере приветствия, открывающемся в разделе **выберите toofailover контейнер тома**, воспользуйтесь hello следующих:
   
    а. В списке hello контейнеров томов выберите контейнеры томов hello, которой вы хотите toofail по.
   
    **Здравствуйте, только контейнеры томов со связанных облачных моментальных снимков и отображаются томами в автономном режиме.**
   
    b. В разделе **выберите целевое устройство для томов hello в контейнерах hello выбран**, выберите hello виртуальное устройство StorSimple из hello раскрывающегося списка доступных устройств. **В раскрывающемся списке hello отображаются только устройства hello недостаточно места.**  
7. Наконец, просмотрите все параметры отработки отказа hello под **Подтвердите отработку отказа**. Щелкните значок галочки hello ![значок проверки](./media/storsimple-device-failover-disaster-recovery/IC740895.png).
8. После завершения перехода на другой ресурс hello go toohello **устройств** страницы.
   
    а. Выберите виртуального устройства StorSimple hello, который использовался в качестве hello целевое устройство для hello процесс отработки отказа.
   
    b. Go toohello **контейнеры томов** страницы. Должны появиться все контейнеры томов hello и hello томами из старого устройства hello.

![Доступно видео](./media/storsimple-device-failover-disaster-recovery/Video_icon.png) **Доступно видео**

Нажмите кнопку toowatch видео, в котором показано, как можно восстановить сбоя на физическое устройство tooa виртуального устройства в облаке hello [здесь](https://azure.microsoft.com/documentation/videos/storsimple-and-disaster-recovery/).

## <a name="failback"></a>Восстановление размещения
Для ПО с обновлением 3 и более поздних версий StorSimple также поддерживает восстановление размещения. После завершения перехода на другой ресурс hello hello выполняются следующие действия.

* контейнеры томов Hello, отработку отказа, удаляются с исходного устройства hello.
* Фоновое задание, для каждого контейнера томов (отработку отказа) инициируется hello исходного устройства. При попытке toofailback hello задания во время выполнения, вы получите эффекта toothat уведомления. Необходимо будет toowait до hello задания восстановления размещения завершения toostart hello. 
  
    Hello toocomplete время hello удаление контейнеров томов зависит от различных факторов, таких как объем данных, срок действия данных hello, число резервных копий и пропускную способность сети hello hello операции. Если вы планируете выполнить тестовую отработку отказа или тестовое восстановление размещения, то рекомендуем использовать для тестирования контейнеры томов с меньшим объемом данных (ГБ). В большинстве случаев можно запустить восстановление размещения hello 24 часа после завершения отработки отказа hello. 

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы
В. **Что произойдет, если hello аварийного восстановления завершится ошибкой или частичного успеха?**

О. При сбое hello аварийного восстановления, рекомендуется производить повторите попытку. Hello во второй раз, аварийного восстановления знает, что все выполнялось и когда hello процесса зависло hello первый раз. Hello процесса аварийного восстановления начинается с этого момента. 

В. **Можно ли удалить устройства во время отработки отказа устройства hello?**

О. Во время выполнения аварийного восстановления невозможно удалить устройство. Устройства можно удалить только после завершения hello аварийного восстановления.

В.    **Hello мусора начала по hello исходное устройство, чтобы удалить hello локальные данные на исходное устройство?**

О. Сборка мусора будет включено на hello исходное устройство только после того, что устройство hello полностью очищены. Очистка Hello включает Очистка объектов, которые было произведено переключение с исходного устройства hello, такими как тома, резервного копирования объекты (а не данные), контейнеры томов и политики.

В. **Что произойдет, если hello удалить задание, связанное с контейнерами томов hello в исходное устройство hello завершается ошибкой?**

О.  Hello удаления задания происходит сбой, потребуется toomanually триггер hello удаление контейнеров тома hello. В hello **устройств** выберите исходное устройство и нажмите кнопку **контейнеры томов**. Выберите контейнеры томов выберите hello, прошедших через и в hello нижней части страницы приветствия, **удалить**. После удаления всех hello отработку отказа контейнеры томов на устройстве hello источника, можно запустить восстановление размещения hello.

## <a name="business-continuity-disaster-recovery-bcdr"></a>Аварийное восстановление непрерывности бизнеса (BCDR)
Сценарии аварийного восстановления (BCDR) непрерывности бизнеса в случае hello всего центра обработки данных Azure перестает работать. Это может повлиять на службы диспетчера StorSimple и hello связанные устройства StorSimple.

Если имеются устройства StorSimple, которые были зарегистрированы непосредственно перед аварией, эти устройства StorSimple может потребоваться tooundergo сброса. После аварийного hello устройства StorSimple hello будут показаны как отключенный. устройство StorSimple Hello должны быть удалены с портала hello и должно выполняться восстановления заводских настроек, а затем провести новую регистрацию.

## <a name="next-steps"></a>Дальнейшие действия
* После выполнения отработки отказа, может потребоваться слишком[отключение или удаление устройства StorSimple](storsimple-deactivate-and-delete-device.md).
* Сведения о toouse Здравствуйте диспетчера StorSimple, как службы, перейдите в слишком[используйте hello tooadminister службы диспетчера StorSimple устройство StorSimple](storsimple-manager-service-administration.md).

