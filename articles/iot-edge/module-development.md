---
title: "Разработка модулей для Azure IoT Edge | Документация Майкрософт"
description: "Сведения о создании пользовательских модулей для Azure IoT Edge."
services: iot-edge
keywords: 
author: kgremban
manager: timlt
ms.author: kgremban
ms.date: 10/05/2017
ms.topic: article
ms.service: iot-edge
ms.openlocfilehash: 95b1d5d4e5e11f96b6abb17f0aeba935cc65512d
ms.sourcegitcommit: 9a61faf3463003375a53279e3adce241b5700879
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/15/2017
---
# <a name="understand-the-requirements-and-tools-for-developing-iot-edge-modules---preview"></a>Сведения о требованиях и средствах разработки модулей IoT Edge (предварительная версия)

В этой статье объясняется, какие функции доступны, если создать приложения, работающие в качестве модуля IoT Edge, и как их использовать.

## <a name="iot-edge-runtime-environment"></a>Среда выполнения IoT Edge
Среда выполнения IoT Edge предоставляет инфраструктуру для интеграции функциональных возможностей нескольких модулей IoT Edge и их развертывания на пограничных устройствах Интернета вещей. На высоком уровне любую программу можно упаковать в виде модуля IoT Edge. Однако, чтобы воспользоваться всеми преимуществами взаимодействия и управления IoT Edge, программу, работающую в модуле, нужно подключить к локальному концентратору IoT Edge, интегрированному в среде выполнения IoT Edge.

## <a name="using-the-iot-edge-hub"></a>Использование концентратора IoT Edge
Концентратор IoT Edge предоставляет две основные функции: прокси-сервер для Центра Интернета вещей и локальные подключения.

### <a name="iot-hub-primitives"></a>Основные сведения о Центре Интернета вещей
Центр Интернета вещей рассматривает экземпляр модуля как устройство, в том смысле, что он:

* имеет двойник модуля, который является уникальным и изолирован от [двойника устройства][lnk-devicetwin] и других двойников модуля этого устройства;
* может отправлять [сообщения с устройства в облако][lnk-iothub-messaging];
* может получать [прямые методы][lnk-methods], специально предназначенные для него.

Сейчас модуль не может получать сообщения из облака на устройство или использовать функцию передачи файлов.

При записи модуля можно просто воспользоваться [пакетом SDK для устройств Azure IoT][lnk-devicesdk], чтобы подключиться к концентратору IoT Edge и получить доступ к описанным выше возможностям, как и при использовании Центра Интернета вещей с приложением устройства (единственная разница заключается в том, что из серверной части вашего приложения необходимо ссылаться на идентификатор модуля, а не устройства).

Пример приложения модуля, которое отправляет сообщения с устройства в облако и использует двойник модуля, см. в статье [Разработка модуля IoT Edge с кодом C# и его развертывание на имитированном устройстве (предварительная версия)][lnk-tutorial2].

### <a name="device-to-cloud-messages"></a>Отправка сообщений с устройства в облако
Чтобы разрешить сложную обработку сообщений с устройства в облако, концентратор IoT Edge предоставляет декларативную маршрутизацию сообщений между самими модулями и модулями и Центром Интернета вещей.
Это позволяет модулям перехватывать и обрабатывать сообщения, отправленные другими модулями, и распространять их в сложные конвейеры.
В статье [Сведения об использовании, настройке и повторном использовании модулей Azure IoT Edge (предварительная версия)][lnk-module-comp] объясняется, как составлять модули в сложные конвейеры с помощью маршрутов.

Модуль IoT Edge, отличающийся от обычного приложения устройства Центра Интернета вещей, может получать сообщения с устройства в облако, которые передаются его локальному концентратору IoT Edge, для обработки.

Концентратор IoT Edge передает сообщения в ваш модуль на основе декларативных маршрутов, описанных в статье [Сведения об использовании, настройке и повторном использовании модулей Azure IoT Edge (предварительная версия)][lnk-module-comp]. При разработке модуля IoT Edge можно получать эти сообщения, задав обработчики сообщений, как показано в руководстве [Разработка модуля IoT Edge с кодом C# и его развертывание на имитированном устройстве (предварительная версия)][lnk-tutorial2].

Для упрощения создания маршрутов IoT Edge добавляет понятие *входных* и *выходных* конечных точек модуля. Модуль может получать и отправлять все сообщения с устройства в облако, предназначенные для него, не указывая входные и выходные данные (соответственно).
Использование явных входов и выходов упрощает правила маршрутизации. Дополнительные сведения о правилах маршрутизации и конечных точках ввода и вывода для модулей см. в статье [Сведения об использовании, настройке и повторном использовании модулей Azure IoT Edge (предварительная версия)][lnk-module-comp].

Сообщения с устройства в облако, обрабатываемые концентратором Edge, имеют следующие свойства системы:

| Свойство | Описание |
| -------- | ----------- |
| $connectionDeviceId | Идентификатор устройства клиента, отправившего сообщение. |
| $connectionModuleId | Идентификатор модуля, отправившего сообщение. |
| $inputName | Входная конечная точка, получившая это сообщение. Это свойство может быть пустым. |
| $outputName | Выходная конечная точка, используемая для отправки сообщения. Это свойство может быть пустым. |

### <a name="connecting-to-iot-edge-hub-from-a-module"></a>Подключение к концентратору IoT Edge из модуля
Подключение к локальному концентратору IoT Edge из модуля состоит из двух шагов. Сначала нужно использовать строку подключения, предоставленную средой выполнения IoT Edge, при запуске модуля, а затем убедиться, что приложение принимает сертификат, предоставленный концентратором IoT Edge на этом устройстве.

Используемая строка подключения, выданная средой выполнения IoT Edge, содержится в переменной среды `EdgeHubConnectionString`. Это делает ее доступной для любой программы, которой необходимо ее использовать.

Аналогично сертификат, используемый для проверки подключения концентратора IoT Edge, указан средой выполнения IoT Edge в файле, путь которого доступен в переменной среды `EdgeModuleCACertificateFile`.

В руководстве [Разработка модуля IoT Edge с кодом C# и его развертывание на имитированном устройстве (предварительная версия)][lnk-tutorial2] показано, как убедиться, что сертификат находится в хранилище компьютера в приложении модуля. Очевидно, что любой другой метод для доверенного соединения, использующий этот сертификат, также будет работать.

## <a name="packaging-as-an-image"></a>Упаковка в качестве образа
Модули IoT Edge упаковываются в виде образов Docker.
Можно использовать непосредственно цепочку инструментов Docker или Visual Studio Code, как показано в руководстве [Разработка модуля IoT Edge с кодом C# и его развертывание на имитированном устройстве (предварительная версия)][lnk-tutorial2].

## <a name="next-steps"></a>Дальнейшие действия

После разработки модуля узнайте, как [развертывать и отслеживать модули IoT Edge в нужном масштабе][lnk-howto-deploy].

[lnk-devicesdk]: ../iot-hub/iot-hub-devguide-sdks.md
[lnk-devicetwin]: ../iot-hub/iot-hub-devguide-device-twins.md
[lnk-iothub-messaging]: ../iot-hub/iot-hub-devguide-messaging.md
[lnk-methods]: ../iot-hub/iot-hub-devguide-direct-methods.md
[lnk-tutorial2]: tutorial-csharp-module.md
[lnk-module-comp]: module-composition.md
[lnk-howto-deploy]: how-to-deploy-monitor.md
