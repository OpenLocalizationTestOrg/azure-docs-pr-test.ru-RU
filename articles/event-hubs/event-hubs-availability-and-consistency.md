---
title: "aaaAvailability и согласованность концентраторов событий Azure | Документы Microsoft"
description: "Каким образом разделяет tooprovide hello максимальный объем доступности и согласованности с помощью концентраторов событий Azure."
services: event-hubs
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 8f3637a1-bbd7-481e-be49-b3adf9510ba1
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/15/2017
ms.author: sethm
ms.openlocfilehash: a8ededaae1589830da21cb8910ca694d2d628bd2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="availability-and-consistency-in-event-hubs"></a>Доступность и согласованность в концентраторах событий

## <a name="overview"></a>Обзор
Концентраторы событий Azure использует [секционирование модели](event-hubs-features.md#partitions) tooimprove доступности и параллелизации в концентраторе одно событие. Например если концентратор событий состоит из четырех секций, а для одного из этих разделов перемещается с одного сервера tooanother в операции с балансировкой нагрузки, можно по-прежнему отправлять и получать из трех разделов. Кроме того, наличие нескольких секций позволяет toohave более параллельных чтений, обработки данных, повышения вашей суммарную пропускную способность. Основные сведения о последствиях hello секционирование и упорядочение в распределенной системе является ключевой аспект архитектуры решения.

toohelp объяснить hello компромисса между упорядочения и доступности см. в разделе hello [Крепления Теорема](https://en.wikipedia.org/wiki/CAP_theorem), также называемой Теорема Brewer элемента. Это Теорема рассматриваются hello Выбор между согласованности, доступность и отказоустойчивость секции.

В теореме Брюера согласованность и доступность определяются следующим образом.
* Секции отклонение: hello возможность toocontinue системы обработки данных, обработки данных, даже если происходит сбой секции.
* Доступность — защищенный от сбоев узел возвращает обоснованный ответ в течение приемлемого времени (без ошибок и простоев).
* : Чтение гарантируется согласованность tooreturn hello самой последней записи для данного клиента.

## <a name="partition-tolerance"></a>Устойчивость к разделению
В основе концентраторов событий лежит модель секционированных данных. Можно настроить hello количество разделов в концентраторе событий во время установки, но не может изменить это значение позднее. Поскольку секции необходимо использовать с концентраторами событий, у вас toomake принятия решений о доступности и согласованности для вашего приложения.

## <a name="availability"></a>Доступность
Hello tooget простейший способ работы с концентраторами событий является поведением по умолчанию hello toouse. Если вы создаете новый `EventHubClient` и используйте hello `Send` метода события автоматически распространяются среди разделов в концентраторе событий. Это поведение позволяет hello значительная часть времени.

Для случаев, требующих hello минимальное время эта модель является предпочтительной.

## <a name="consistency"></a>Целостность
В некоторых сценариях может быть важно hello упорядоченных событий. Например может потребоваться вашей внутренней системы tooprocess команды update перед выполнением команды delete. В данном экземпляре, задайте ключ раздела hello события или использовать `PartitionSender` tooonly объекта отправки событий tooa определенную секцию. Это гарантирует, что если эти события считываются из секции hello, они считываются в порядке.

В этой конфигурации следует помнить, что в случае недоступности toowhich hello заданной секции, отправляемого вы получите ответ с ошибкой. Как точка сравнения Если нет соответствия tooa с одним разделом hello службы концентраторов событий отправляет на событие toohello следующий доступный раздел.

Один из возможных решений tooensure, упорядочение, повышая также системы, будет tooaggregate события как часть вашего приложения обработки событий. Это Hello tooaccomplish простым способом является toostamp события со свойством пользовательские последовательности чисел. Привет, следующий код представляет собой пример:

```csharp
// Get hello latest sequence number from your application
var sequenceNumber = GetNextSequenceNumber();
// Create a new EventData object by encoding a string as a byte array
var data = new EventData(Encoding.UTF8.GetBytes("This is my message..."));
// Set a custom sequence number property
data.Properties.Add("SequenceNumber", sequenceNumber);
// Send single message async
await eventHubClient.SendAsync(data);
```

В этом примере отправляет вашей tooone событий hello доступных разделов в концентраторе событий и задает соответствующий номер последовательности hello из приложения. Это решение требует toobe состояние приложения обработки, поддерживаемые, но предоставляет конечную точку, скорее всего, toobe доступных вашей отправителей.

## <a name="next-steps"></a>Дальнейшие действия
На сайте ссылкам hello, изучите более подробную концентраторов событий:

* [Обзор службы концентраторов событий](event-hubs-what-is-event-hubs.md)
* [Создание концентратора событий](event-hubs-create.md)
