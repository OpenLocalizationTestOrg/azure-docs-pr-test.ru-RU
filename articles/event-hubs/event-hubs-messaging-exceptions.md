---
title: "Исключения обмена сообщениями концентраторов событий Azure | Документация Майкрософт"
description: "Список исключений обмена сообщениями концентраторов событий и предлагаемые действия."
services: event-hubs
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 2c6273de-0106-47e5-b45d-59040e51f2c5
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/15/2017
ms.author: sethm
ms.openlocfilehash: 77f66a4d18e0882cf84afc9fcf2926ab764d17c1
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="event-hubs-messaging-exceptions"></a><span data-ttu-id="221f9-103">Исключения обмена сообщениями концентраторов событий</span><span class="sxs-lookup"><span data-stu-id="221f9-103">Event Hubs messaging exceptions</span></span>
<span data-ttu-id="221f9-104">В этой статье перечислены некоторые исключения, создаваемые API обмена сообщениями служебной шины Azure, в том числе API концентраторов событий.</span><span class="sxs-lookup"><span data-stu-id="221f9-104">This article lists some of the exceptions generated by the Azure Service Bus messaging APIs, which include Event Hubs.</span></span> <span data-ttu-id="221f9-105">Этот справочник может измениться, поэтому следите за обновлениями.</span><span class="sxs-lookup"><span data-stu-id="221f9-105">This reference is subject to change, so check back for updates.</span></span>

## <a name="exception-categories"></a><span data-ttu-id="221f9-106">Категории исключений</span><span class="sxs-lookup"><span data-stu-id="221f9-106">Exception categories</span></span>
<span data-ttu-id="221f9-107">API концентраторов событий создают исключения, которые можно разделить на следующие категории с указанием связанного действия, предпринимаемого для их устранения.</span><span class="sxs-lookup"><span data-stu-id="221f9-107">The Event Hubs APIs generate exceptions that can fall into the following categories, along with the associated action you can take to try to fix them.</span></span>

1. <span data-ttu-id="221f9-108">Ошибка в коде пользователя: [System.ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx), [System.InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx), [System.OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx), [System.Runtime.Serialization.SerializationException](https://msdn.microsoft.com/library/system.runtime.serialization.serializationexception.aspx).</span><span class="sxs-lookup"><span data-stu-id="221f9-108">User coding error: [System.ArgumentException](https://msdn.microsoft.com/library/system.argumentexception.aspx), [System.InvalidOperationException](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx), [System.OperationCanceledException](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx), [System.Runtime.Serialization.SerializationException](https://msdn.microsoft.com/library/system.runtime.serialization.serializationexception.aspx).</span></span> <span data-ttu-id="221f9-109">Общее действие: прежде чем продолжить, попытайтесь исправить код.</span><span class="sxs-lookup"><span data-stu-id="221f9-109">General action: try to fix the code before proceeding.</span></span>
2. <span data-ttu-id="221f9-110">Ошибка настройки или конфигурации: [Microsoft.ServiceBus.Messaging.MessagingEntityNotFoundException](/dotnet/api/microsoft.servicebus.messaging.messagingentitynotfoundexception), [Microsoft.Azure.EventHubs.MessagingEntityNotFoundException](/dotnet/api/microsoft.azure.eventhubs.messagingentitynotfoundexception), [System.UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx).</span><span class="sxs-lookup"><span data-stu-id="221f9-110">Setup/configuration error: [Microsoft.ServiceBus.Messaging.MessagingEntityNotFoundException](/dotnet/api/microsoft.servicebus.messaging.messagingentitynotfoundexception), [Microsoft.Azure.EventHubs.MessagingEntityNotFoundException](/dotnet/api/microsoft.azure.eventhubs.messagingentitynotfoundexception), [System.UnauthorizedAccessException](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx).</span></span> <span data-ttu-id="221f9-111">Общее действие: проверьте конфигурацию и измените ее при необходимости.</span><span class="sxs-lookup"><span data-stu-id="221f9-111">General action: review your configuration and change if necessary.</span></span>
3. <span data-ttu-id="221f9-112">Временные исключения: [Microsoft.ServiceBus.Messaging.MessagingException](/dotnet/api/microsoft.servicebus.messaging.messagingexception), [Microsoft.ServiceBus.Messaging.ServerBusyException](#serverbusyexception), [Microsoft.Azure.EventHubs.ServerBusyException](#serverbusyexception), [Microsoft.ServiceBus.Messaging.MessagingCommunicationException](/dotnet/api/microsoft.servicebus.messaging.messagingcommunicationexception).</span><span class="sxs-lookup"><span data-stu-id="221f9-112">Transient exceptions: [Microsoft.ServiceBus.Messaging.MessagingException](/dotnet/api/microsoft.servicebus.messaging.messagingexception), [Microsoft.ServiceBus.Messaging.ServerBusyException](#serverbusyexception), [Microsoft.Azure.EventHubs.ServerBusyException](#serverbusyexception), [Microsoft.ServiceBus.Messaging.MessagingCommunicationException](/dotnet/api/microsoft.servicebus.messaging.messagingcommunicationexception).</span></span> <span data-ttu-id="221f9-113">Общее действие: повторите операцию или уведомите пользователей.</span><span class="sxs-lookup"><span data-stu-id="221f9-113">General action: retry the operation or notify users.</span></span>
4. <span data-ttu-id="221f9-114">Другие исключения: [System.Transactions.TransactionException](https://msdn.microsoft.com/library/system.transactions.transactionexception.aspx), [System.TimeoutException](#timeoutexception), [Microsoft.ServiceBus.Messaging.MessageLockLostException](/dotnet/api/microsoft.servicebus.messaging.messagelocklostexception), [Microsoft.ServiceBus.Messaging.SessionLockLostException](/dotnet/api/microsoft.servicebus.messaging.sessionlocklostexception).</span><span class="sxs-lookup"><span data-stu-id="221f9-114">Other exceptions: [System.Transactions.TransactionException](https://msdn.microsoft.com/library/system.transactions.transactionexception.aspx), [System.TimeoutException](#timeoutexception), [Microsoft.ServiceBus.Messaging.MessageLockLostException](/dotnet/api/microsoft.servicebus.messaging.messagelocklostexception), [Microsoft.ServiceBus.Messaging.SessionLockLostException](/dotnet/api/microsoft.servicebus.messaging.sessionlocklostexception).</span></span> <span data-ttu-id="221f9-115">Общее действие: связано с типом исключения; см. таблицу в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="221f9-115">General action: specific to the exception type; please refer to the table in the following section.</span></span> 

## <a name="exception-types"></a><span data-ttu-id="221f9-116">Типы исключений</span><span class="sxs-lookup"><span data-stu-id="221f9-116">Exception types</span></span>
<span data-ttu-id="221f9-117">В следующей таблице перечислены типы исключений обмена сообщениями и их причины, а также рекомендуемые действия, которые можно выполнять.</span><span class="sxs-lookup"><span data-stu-id="221f9-117">The following table lists messaging exception types, and their causes, and notes suggested action you can take.</span></span>

| <span data-ttu-id="221f9-118">**Тип исключения**</span><span class="sxs-lookup"><span data-stu-id="221f9-118">**Exception Type**</span></span> | <span data-ttu-id="221f9-119">**Описание, причина, примеры**</span><span class="sxs-lookup"><span data-stu-id="221f9-119">**Description/Cause/Examples**</span></span> | <span data-ttu-id="221f9-120">**Рекомендуемое действие**</span><span class="sxs-lookup"><span data-stu-id="221f9-120">**Suggested Action**</span></span> | <span data-ttu-id="221f9-121">**Примечание к автоматическому или немедленному повтору**</span><span class="sxs-lookup"><span data-stu-id="221f9-121">**Note on automatic/immediate retry**</span></span> |
| --- | --- | --- | --- |
| [<span data-ttu-id="221f9-122">TimeoutException</span><span class="sxs-lookup"><span data-stu-id="221f9-122">TimeoutException</span></span>](https://msdn.microsoft.com/library/system.timeoutexception.aspx) |<span data-ttu-id="221f9-123">Сервер не ответил на запрошенную операцию в течение указанного времени, которое задается параметром [OperationTimeout](/dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout).</span><span class="sxs-lookup"><span data-stu-id="221f9-123">The server did not respond to the requested operation within the specified time, which is controlled by [OperationTimeout](/dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout).</span></span> <span data-ttu-id="221f9-124">Возможно, сервер выполнил запрошенную операцию.</span><span class="sxs-lookup"><span data-stu-id="221f9-124">The server may have completed the requested operation.</span></span> <span data-ttu-id="221f9-125">Это может произойти из-за сетевых или других задержек в инфраструктуре.</span><span class="sxs-lookup"><span data-stu-id="221f9-125">This can happen due to network or other infrastructure delays.</span></span> |<span data-ttu-id="221f9-126">Проверьте состояние системы для обеспечения согласованности и при необходимости повторите попытку.</span><span class="sxs-lookup"><span data-stu-id="221f9-126">Check the system state for consistency and retry if necessary.</span></span><br /> <span data-ttu-id="221f9-127">Ознакомьтесь с разделом [TimeoutException](#timeoutexception).</span><span class="sxs-lookup"><span data-stu-id="221f9-127">See [TimeoutException](#timeoutexception).</span></span> |<span data-ttu-id="221f9-128">Повторная попытка может помочь в некоторых случаях. Добавьте в код логику повторных попыток.</span><span class="sxs-lookup"><span data-stu-id="221f9-128">Retry might help in some cases; add retry logic to code.</span></span> |
| [<span data-ttu-id="221f9-129">InvalidOperationException</span><span class="sxs-lookup"><span data-stu-id="221f9-129">InvalidOperationException</span></span>](https://msdn.microsoft.com/library/system.invalidoperationexception.aspx) |<span data-ttu-id="221f9-130">Запрошенная пользователем операция не допускается в пределах сервера или службы.</span><span class="sxs-lookup"><span data-stu-id="221f9-130">The requested user operation is not allowed within the server or service.</span></span> <span data-ttu-id="221f9-131">Подробные сведения см. в сообщении об исключении.</span><span class="sxs-lookup"><span data-stu-id="221f9-131">See the exception message for details.</span></span> <span data-ttu-id="221f9-132">Например, операция [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) создаст это исключение, если сообщение было получено в режиме [ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode).</span><span class="sxs-lookup"><span data-stu-id="221f9-132">For example, [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) generates this exception if the message was received in [ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode) mode.</span></span> |<span data-ttu-id="221f9-133">Проверьте код и обратитесь к документации.</span><span class="sxs-lookup"><span data-stu-id="221f9-133">Check the code and the documentation.</span></span> <span data-ttu-id="221f9-134">Убедитесь, что запрошенная операция допустима.</span><span class="sxs-lookup"><span data-stu-id="221f9-134">Make sure the requested operation is valid.</span></span> |<span data-ttu-id="221f9-135">Повторная попытка не поможет.</span><span class="sxs-lookup"><span data-stu-id="221f9-135">Retry will not help.</span></span> |
| [<span data-ttu-id="221f9-136">OperationCanceledException</span><span class="sxs-lookup"><span data-stu-id="221f9-136">OperationCanceledException</span></span>](https://msdn.microsoft.com/library/system.operationcanceledexception.aspx) |<span data-ttu-id="221f9-137">Предпринята попытка вызвать операцию с объектом, который уже закрыт, прерван или удален.</span><span class="sxs-lookup"><span data-stu-id="221f9-137">An attempt is made to invoke an operation on an object that has already been closed, aborted or disposed.</span></span> <span data-ttu-id="221f9-138">Иногда это означает, что внешняя транзакция уже удалена.</span><span class="sxs-lookup"><span data-stu-id="221f9-138">In rare cases, the ambient transaction is already disposed.</span></span> |<span data-ttu-id="221f9-139">Проверьте код и убедитесь, что он не вызывает операции с удаленным объектом.</span><span class="sxs-lookup"><span data-stu-id="221f9-139">Check the code and make sure it does not invoke operations on a disposed object.</span></span> |<span data-ttu-id="221f9-140">Повторная попытка не поможет.</span><span class="sxs-lookup"><span data-stu-id="221f9-140">Retry will not help.</span></span> |
| [<span data-ttu-id="221f9-141">UnauthorizedAccessException</span><span class="sxs-lookup"><span data-stu-id="221f9-141">UnauthorizedAccessException</span></span>](https://msdn.microsoft.com/library/system.unauthorizedaccessexception.aspx) |<span data-ttu-id="221f9-142">Объекту [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider) не удалось получить маркер. Маркер является недопустимым или не содержит утверждений, необходимых для выполнения операции.</span><span class="sxs-lookup"><span data-stu-id="221f9-142">The [TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider) object could not acquire a token, the token is invalid, or the token does not contain the claims required to perform the operation.</span></span> |<span data-ttu-id="221f9-143">Убедитесь, что поставщик маркеров создан с использованием правильных значений.</span><span class="sxs-lookup"><span data-stu-id="221f9-143">Make sure the token provider is created with the correct values.</span></span> <span data-ttu-id="221f9-144">Проверьте конфигурацию службы контроля доступа.</span><span class="sxs-lookup"><span data-stu-id="221f9-144">Check the configuration of the Access Control service.</span></span> |<span data-ttu-id="221f9-145">Повторная попытка может помочь в некоторых случаях. Добавьте в код логику повторных попыток.</span><span class="sxs-lookup"><span data-stu-id="221f9-145">Retry might help in some cases; add retry logic to code.</span></span> |
| [<span data-ttu-id="221f9-146">ArgumentException</span><span class="sxs-lookup"><span data-stu-id="221f9-146">ArgumentException</span></span>](https://msdn.microsoft.com/library/system.argumentexception.aspx)<br /> [<span data-ttu-id="221f9-147">ArgumentNullException</span><span class="sxs-lookup"><span data-stu-id="221f9-147">ArgumentNullException</span></span>](https://msdn.microsoft.com/library/system.argumentnullexception.aspx)<br />[<span data-ttu-id="221f9-148">ArgumentOutOfRangeException</span><span class="sxs-lookup"><span data-stu-id="221f9-148">ArgumentOutOfRangeException</span></span>](https://msdn.microsoft.com/library/system.argumentoutofrangeexception.aspx) |<span data-ttu-id="221f9-149">Для этого метода предоставлен один или несколько недопустимых аргументов.</span><span class="sxs-lookup"><span data-stu-id="221f9-149">One or more arguments supplied to the method are invalid.</span></span> <span data-ttu-id="221f9-150">Универсальный код ресурса (URI), переданный в [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) или [Create](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_Create_System_Collections_Generic_IEnumerable_System_Uri__), содержит сегменты пути.</span><span class="sxs-lookup"><span data-stu-id="221f9-150">The URI supplied to [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) or [Create](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_Create_System_Collections_Generic_IEnumerable_System_Uri__) contains path segment(s).</span></span> <span data-ttu-id="221f9-151">В [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) или [Create](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_Create_System_Collections_Generic_IEnumerable_System_Uri__) передана недопустимая схема универсального кода ресурса (URI).</span><span class="sxs-lookup"><span data-stu-id="221f9-151">The URI scheme supplied to [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) or [Create](/dotnet/api/microsoft.servicebus.messaging.messagingfactory#Microsoft_ServiceBus_Messaging_MessagingFactory_Create_System_Collections_Generic_IEnumerable_System_Uri__) is invalid.</span></span> <span data-ttu-id="221f9-152">Значение свойства превышает 32 КБ.</span><span class="sxs-lookup"><span data-stu-id="221f9-152">The property value is larger than 32KB.</span></span> |<span data-ttu-id="221f9-153">Проверьте вызывающий код и убедитесь, что аргументы заданы правильно.</span><span class="sxs-lookup"><span data-stu-id="221f9-153">Check the calling code and make sure the arguments are correct.</span></span> |<span data-ttu-id="221f9-154">Повторная попытка не поможет.</span><span class="sxs-lookup"><span data-stu-id="221f9-154">Retry will not help.</span></span> |
| [<span data-ttu-id="221f9-155">Microsoft.ServiceBus.Messaging.MessagingEntityNotFoundException</span><span class="sxs-lookup"><span data-stu-id="221f9-155">Microsoft.ServiceBus.Messaging.MessagingEntityNotFoundException</span></span>](/dotnet/api/microsoft.servicebus.messaging.messagingentitynotfoundexception) <br /> [<span data-ttu-id="221f9-156">Microsoft.Azure.EventHubs.MessagingEntityNotFoundException</span><span class="sxs-lookup"><span data-stu-id="221f9-156">Microsoft.Azure.EventHubs.MessagingEntityNotFoundException</span></span>](/dotnet/api/microsoft.azure.eventhubs.messagingentitynotfoundexception) |<span data-ttu-id="221f9-157">Сущность, связанная с операцией, не существует или была удалена.</span><span class="sxs-lookup"><span data-stu-id="221f9-157">Entity associated with the operation does not exist or it has been deleted.</span></span> |<span data-ttu-id="221f9-158">Убедитесь, что сущность существует.</span><span class="sxs-lookup"><span data-stu-id="221f9-158">Make sure the entity exists.</span></span> |<span data-ttu-id="221f9-159">Повторная попытка не поможет.</span><span class="sxs-lookup"><span data-stu-id="221f9-159">Retry will not help.</span></span> |
| [<span data-ttu-id="221f9-160">MessageNotFoundException</span><span class="sxs-lookup"><span data-stu-id="221f9-160">MessageNotFoundException</span></span>](/dotnet/api/microsoft.servicebus.messaging.messagenotfoundexception) |<span data-ttu-id="221f9-161">Предпринята попытка получить сообщение с определенным порядковым номером.</span><span class="sxs-lookup"><span data-stu-id="221f9-161">Attempt to receive a message with a particular sequence number.</span></span> <span data-ttu-id="221f9-162">Это сообщение не найдено.</span><span class="sxs-lookup"><span data-stu-id="221f9-162">This message is not found.</span></span> |<span data-ttu-id="221f9-163">Убедитесь, что сообщение уже не было получено.</span><span class="sxs-lookup"><span data-stu-id="221f9-163">Make sure the message has not been received already.</span></span> <span data-ttu-id="221f9-164">Проверьте очередь недоставленных сообщений, чтобы увидеть, не находится ли в ней сообщение.</span><span class="sxs-lookup"><span data-stu-id="221f9-164">Check the deadletter queue to see if the message has been deadlettered.</span></span> |<span data-ttu-id="221f9-165">Повторная попытка не поможет.</span><span class="sxs-lookup"><span data-stu-id="221f9-165">Retry will not help.</span></span> |
| [<span data-ttu-id="221f9-166">MessagingCommunicationException</span><span class="sxs-lookup"><span data-stu-id="221f9-166">MessagingCommunicationException</span></span>](/dotnet/api/microsoft.servicebus.messaging.messagingcommunicationexception) |<span data-ttu-id="221f9-167">Клиент не может установить соединение с концентратором событий.</span><span class="sxs-lookup"><span data-stu-id="221f9-167">Client is not able to establish a connection to Event Hub.</span></span> |<span data-ttu-id="221f9-168">Убедитесь, что имя узла указано правильно и узел доступен.</span><span class="sxs-lookup"><span data-stu-id="221f9-168">Make sure the supplied host name is correct and the host is reachable.</span></span> |<span data-ttu-id="221f9-169">Повторная попытка может помочь при наличии периодических сбоев подключения.</span><span class="sxs-lookup"><span data-stu-id="221f9-169">Retry might help if there are intermittent connectivity issues.</span></span> |
| [<span data-ttu-id="221f9-170">Microsoft.ServiceBus.Messaging.ServerBusyException</span><span class="sxs-lookup"><span data-stu-id="221f9-170">Microsoft.ServiceBus.Messaging.ServerBusyException</span></span>](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) <br /> [<span data-ttu-id="221f9-171">Microsoft.Azure.EventHubs.ServerBusyException</span><span class="sxs-lookup"><span data-stu-id="221f9-171">Microsoft.Azure.EventHubs.ServerBusyException</span></span>](/dotnet/api/microsoft.azure.eventhubs.serverbusyexception) |<span data-ttu-id="221f9-172">В настоящее время служба не может обработать запрос.</span><span class="sxs-lookup"><span data-stu-id="221f9-172">Service is not able to process the request at this time.</span></span> |<span data-ttu-id="221f9-173">Клиент может некоторое время подождать, после чего следует повторить операцию.</span><span class="sxs-lookup"><span data-stu-id="221f9-173">Client can wait for a period of time, then retry the operation.</span></span> <br /> <span data-ttu-id="221f9-174">Ознакомьтесь с разделом [ServerBusyException](#serverbusyexception).</span><span class="sxs-lookup"><span data-stu-id="221f9-174">See [ServerBusyException](#serverbusyexception).</span></span> |<span data-ttu-id="221f9-175">Клиент может повторить операцию через определенный промежуток времени.</span><span class="sxs-lookup"><span data-stu-id="221f9-175">Client may retry after certain interval.</span></span> <span data-ttu-id="221f9-176">Если в результате повтора возникает другое исключение, проверьте поведение повтора этого исключения.</span><span class="sxs-lookup"><span data-stu-id="221f9-176">If a retry results in a different exception, check retry behavior of that exception.</span></span> |
| [<span data-ttu-id="221f9-177">MessageLockLostException</span><span class="sxs-lookup"><span data-stu-id="221f9-177">MessageLockLostException</span></span>](/dotnet/api/microsoft.servicebus.messaging.messagelocklostexception) |<span data-ttu-id="221f9-178">Истек срок действия маркера блокировки, связанного с данным сообщением, или маркер блокировки не найден.</span><span class="sxs-lookup"><span data-stu-id="221f9-178">Lock token associated with the message has expired, or the lock token is not found.</span></span> |<span data-ttu-id="221f9-179">Удалите сообщение.</span><span class="sxs-lookup"><span data-stu-id="221f9-179">Dispose the message.</span></span> |<span data-ttu-id="221f9-180">Повторная попытка не поможет.</span><span class="sxs-lookup"><span data-stu-id="221f9-180">Retry will not help.</span></span> |
| [<span data-ttu-id="221f9-181">SessionLockLostException</span><span class="sxs-lookup"><span data-stu-id="221f9-181">SessionLockLostException</span></span>](/dotnet/api/microsoft.servicebus.messaging.sessionlocklostexception) |<span data-ttu-id="221f9-182">Потеряна блокировка, связанная с данным сеансом.</span><span class="sxs-lookup"><span data-stu-id="221f9-182">Lock associated with this session is lost.</span></span> | <span data-ttu-id="221f9-183">Прервите объект [MessageSession](/dotnet/api/microsoft.servicebus.messaging.messagesession) .</span><span class="sxs-lookup"><span data-stu-id="221f9-183">Abort the [MessageSession](/dotnet/api/microsoft.servicebus.messaging.messagesession) object.</span></span> |<span data-ttu-id="221f9-184">Повторная попытка не поможет.</span><span class="sxs-lookup"><span data-stu-id="221f9-184">Retry will not help.</span></span> |
| [<span data-ttu-id="221f9-185">MessagingException</span><span class="sxs-lookup"><span data-stu-id="221f9-185">MessagingException</span></span>](/dotnet/api/microsoft.servicebus.messaging.messagingexception) |<span data-ttu-id="221f9-186">Универсальное исключение обмена сообщениями, которое может быть вызвано в следующих случаях: предпринята попытка создать [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) с использованием имени или пути, которые относятся к другому типу сущности (например, разделу).</span><span class="sxs-lookup"><span data-stu-id="221f9-186">Generic messaging exception that may be thrown in the following cases: An attempt is made to create a [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) using a name or path that belongs to a different entity type (for example, a topic).</span></span> <span data-ttu-id="221f9-187">Предпринята попытка отправить сообщение размером свыше 256 КБ.</span><span class="sxs-lookup"><span data-stu-id="221f9-187">An attempt is made to send a message larger than 256KB.</span></span> <span data-ttu-id="221f9-188">Во время обработки запроса возникла ошибка сервера или службы.</span><span class="sxs-lookup"><span data-stu-id="221f9-188">The server or service encountered an error during processing of the request.</span></span> <span data-ttu-id="221f9-189">Подробные сведения см. в сообщении об исключении.</span><span class="sxs-lookup"><span data-stu-id="221f9-189">Please see the exception message for details.</span></span> <span data-ttu-id="221f9-190">Как правило, это временное исключение.</span><span class="sxs-lookup"><span data-stu-id="221f9-190">This is usually a transient exception.</span></span> |<span data-ttu-id="221f9-191">Проверьте код и убедитесь, что для текста сообщения применяются только сериализуемые объекты (или используйте настраиваемый сериализатор).</span><span class="sxs-lookup"><span data-stu-id="221f9-191">Check the code and ensure that only serializable objects are used for the message body (or use a custom serializer).</span></span> <span data-ttu-id="221f9-192">Обратитесь к документации для получения сведений о поддерживаемых типах значений свойств и используйте только поддерживаемые типы.</span><span class="sxs-lookup"><span data-stu-id="221f9-192">Check the documentation for the supported value types of the properties and only use supported types.</span></span> <span data-ttu-id="221f9-193">Проверьте свойство [IsTransient](/dotnet/api/microsoft.servicebus.messaging.messagingexception#Microsoft_ServiceBus_Messaging_MessagingException_IsTransient) .</span><span class="sxs-lookup"><span data-stu-id="221f9-193">Check the [IsTransient](/dotnet/api/microsoft.servicebus.messaging.messagingexception#Microsoft_ServiceBus_Messaging_MessagingException_IsTransient) property.</span></span> <span data-ttu-id="221f9-194">Если оно имеет значение **true**, можно повторить операцию.</span><span class="sxs-lookup"><span data-stu-id="221f9-194">If it is **true**, you can retry the operation.</span></span> |<span data-ttu-id="221f9-195">Алгоритм поведения не определен и может не помочь.</span><span class="sxs-lookup"><span data-stu-id="221f9-195">Retry behavior is undefined and might not help.</span></span> |
| [<span data-ttu-id="221f9-196">MessagingEntityAlreadyExistsException</span><span class="sxs-lookup"><span data-stu-id="221f9-196">MessagingEntityAlreadyExistsException</span></span>](/dotnet/api/microsoft.servicebus.messaging.messagingentityalreadyexistsexception) |<span data-ttu-id="221f9-197">Предпринята попытка создать сущность с именем, которое уже используется другой сущностью в этом пространстве имен службы.</span><span class="sxs-lookup"><span data-stu-id="221f9-197">Attempt to create an entity with a name that is already used by another entity in that service namespace.</span></span> |<span data-ttu-id="221f9-198">Удалите существующую сущность или выберите другое имя для сущности, которую нужно создать.</span><span class="sxs-lookup"><span data-stu-id="221f9-198">Delete the existing entity or choose a different name for the entity to be created.</span></span> |<span data-ttu-id="221f9-199">Повторная попытка не поможет.</span><span class="sxs-lookup"><span data-stu-id="221f9-199">Retry will not help.</span></span> |
| [<span data-ttu-id="221f9-200">QuotaExceededException</span><span class="sxs-lookup"><span data-stu-id="221f9-200">QuotaExceededException</span></span>](/dotnet/api/microsoft.servicebus.messaging.quotaexceededexception) |<span data-ttu-id="221f9-201">Сущность обмена сообщениями достигла максимально допустимого размера.</span><span class="sxs-lookup"><span data-stu-id="221f9-201">The messaging entity has reached its maximum allowable size.</span></span> <span data-ttu-id="221f9-202">Это может произойти, если уже было открыто максимальное число получателей (равное 5) на группу потребителей.</span><span class="sxs-lookup"><span data-stu-id="221f9-202">This can happen if the maximum number of receivers (which is 5) has already been opened on a per-consumer group level.</span></span> |<span data-ttu-id="221f9-203">Создайте в сущности пространство, получая сообщения из сущности или ее подочередей.</span><span class="sxs-lookup"><span data-stu-id="221f9-203">Create space in the entity by receiving messages from the entity or its sub-queues.</span></span> <br /> <span data-ttu-id="221f9-204">Ознакомьтесь с разделом [QuotaExceededException](#quotaexceededexception).</span><span class="sxs-lookup"><span data-stu-id="221f9-204">See [QuotaExceededException](#quotaexceededexception)</span></span> |<span data-ttu-id="221f9-205">Повторная попытка может помочь, если сообщения были удалены.</span><span class="sxs-lookup"><span data-stu-id="221f9-205">Retry might help if messages have been removed in the meantime.</span></span> |
|  | | | |
| [<span data-ttu-id="221f9-206">SessionCannotBeLockedException</span><span class="sxs-lookup"><span data-stu-id="221f9-206">SessionCannotBeLockedException</span></span>](/dotnet/api/microsoft.servicebus.messaging.sessioncannotbelockedexception) |<span data-ttu-id="221f9-207">Предпринята попытка принять сеанс с конкретным идентификатором сеанса, но сеанс в данный момент заблокирован другим клиентом.</span><span class="sxs-lookup"><span data-stu-id="221f9-207">Attempt to accept a session with a specific session ID, but the session is currently locked by another client.</span></span> |<span data-ttu-id="221f9-208">Убедитесь, что сеанс разблокирован другими клиентами.</span><span class="sxs-lookup"><span data-stu-id="221f9-208">Make sure the session is unlocked by other clients.</span></span> |<span data-ttu-id="221f9-209">Повторная попытка может помочь, если сеанс был освобожден до этого времени.</span><span class="sxs-lookup"><span data-stu-id="221f9-209">Retry might help if the session has been released in the interim.</span></span> |
| [<span data-ttu-id="221f9-210">TransactionSizeExceededException</span><span class="sxs-lookup"><span data-stu-id="221f9-210">TransactionSizeExceededException</span></span>](/dotnet/api/microsoft.servicebus.messaging.transactionsizeexceededexception) |<span data-ttu-id="221f9-211">В состав транзакции входит слишком много операций.</span><span class="sxs-lookup"><span data-stu-id="221f9-211">Too many operations are part of the transaction.</span></span> |<span data-ttu-id="221f9-212">Сократите количество операций, входящих в состав этой транзакции.</span><span class="sxs-lookup"><span data-stu-id="221f9-212">Reduce the number of operations that are part of this transaction.</span></span> |<span data-ttu-id="221f9-213">Повторная попытка не поможет.</span><span class="sxs-lookup"><span data-stu-id="221f9-213">Retry will not help.</span></span> |
| [<span data-ttu-id="221f9-214">MessagingEntityDisabledException</span><span class="sxs-lookup"><span data-stu-id="221f9-214">MessagingEntityDisabledException</span></span>](/dotnet/api/microsoft.servicebus.messaging.messagingentitydisabledexception) |<span data-ttu-id="221f9-215">Выполнен запрос на операцию среды выполнения с отключенной сущностью.</span><span class="sxs-lookup"><span data-stu-id="221f9-215">Request for a runtime operation on a disabled entity.</span></span> |<span data-ttu-id="221f9-216">Активируйте сущность.</span><span class="sxs-lookup"><span data-stu-id="221f9-216">Activate the entity.</span></span> |<span data-ttu-id="221f9-217">Повторная попытка может помочь, если сущность была активирована.</span><span class="sxs-lookup"><span data-stu-id="221f9-217">Retry might help if the entity has been activated in the interim.</span></span> |
| [<span data-ttu-id="221f9-218">Microsoft.ServiceBus.Messaging.MessageSizeExceededException</span><span class="sxs-lookup"><span data-stu-id="221f9-218">Microsoft.ServiceBus.Messaging.MessageSizeExceededException</span></span>](/dotnet/api/microsoft.servicebus.messaging.messagesizeexceededexception) <br /> [<span data-ttu-id="221f9-219">Microsoft.Azure.EventHubs.MessageSizeExceededException</span><span class="sxs-lookup"><span data-stu-id="221f9-219">Microsoft.Azure.EventHubs.MessageSizeExceededException</span></span>](/dotnet/api/microsoft.azure.eventhubs.messagesizeexceededexception) | <span data-ttu-id="221f9-220">Полезные данные сообщения превышают предел в 256 КБ.</span><span class="sxs-lookup"><span data-stu-id="221f9-220">A message payload exceeds the 256K limit.</span></span> <span data-ttu-id="221f9-221">Обратите внимание, что предел в 256 КБ является общим размером сообщения, в который могут входить системные свойства и нагрузка .NET.</span><span class="sxs-lookup"><span data-stu-id="221f9-221">Note that the 256k limit is the total message size, which can include system properties and any .NET overhead.</span></span> |<span data-ttu-id="221f9-222">Сократите размер полезных данных сообщения, а затем повторите операцию.</span><span class="sxs-lookup"><span data-stu-id="221f9-222">Reduce the size of the message payload, then retry the operation.</span></span> |<span data-ttu-id="221f9-223">Повторная попытка не поможет.</span><span class="sxs-lookup"><span data-stu-id="221f9-223">Retry will not help.</span></span> |
| [<span data-ttu-id="221f9-224">TransactionException</span><span class="sxs-lookup"><span data-stu-id="221f9-224">TransactionException</span></span>](https://msdn.microsoft.com/library/system.transactions.transactionexception.aspx) |<span data-ttu-id="221f9-225">Внешняя транзакция (*Transaction.Current*) является недопустимой.</span><span class="sxs-lookup"><span data-stu-id="221f9-225">The ambient transaction (*Transaction.Current*) is invalid.</span></span> <span data-ttu-id="221f9-226">Возможно, она завершена или прервана.</span><span class="sxs-lookup"><span data-stu-id="221f9-226">It may have been completed or aborted.</span></span> <span data-ttu-id="221f9-227">Дополнительные сведения можно найти во внутреннем исключении.</span><span class="sxs-lookup"><span data-stu-id="221f9-227">Inner exception may provide additional information.</span></span> | |<span data-ttu-id="221f9-228">Повторная попытка не поможет.</span><span class="sxs-lookup"><span data-stu-id="221f9-228">Retry will not help.</span></span> |
| [<span data-ttu-id="221f9-229">TransactionInDoubtException</span><span class="sxs-lookup"><span data-stu-id="221f9-229">TransactionInDoubtException</span></span>](https://msdn.microsoft.com/library/system.transactions.transactionindoubtexception.aspx) |<span data-ttu-id="221f9-230">Предпринята попытка выполнить операцию с сомнительной транзакцией либо попытка зафиксировать транзакцию, и транзакция становится сомнительной.</span><span class="sxs-lookup"><span data-stu-id="221f9-230">An operation is attempted on a transaction that is in doubt, or an attempt is made to commit the transaction and the transaction becomes in doubt.</span></span> |<span data-ttu-id="221f9-231">Ваше приложение должно обрабатывать это исключение (как особый случай), так как транзакция уже может быть зафиксирована.</span><span class="sxs-lookup"><span data-stu-id="221f9-231">Your application must handle this exception (as a special case), as the transaction may have already been committed.</span></span> |- |

## <a name="quotaexceededexception"></a><span data-ttu-id="221f9-232">QuotaExceededException</span><span class="sxs-lookup"><span data-stu-id="221f9-232">QuotaExceededException</span></span>
<span data-ttu-id="221f9-233">[QuotaExceededException](/dotnet/api/microsoft.servicebus.messaging.quotaexceededexception) указывает на превышение квоты для конкретного объекта.</span><span class="sxs-lookup"><span data-stu-id="221f9-233">[QuotaExceededException](/dotnet/api/microsoft.servicebus.messaging.quotaexceededexception) indicates that a quota for a specific entity has been exceeded.</span></span>

<span data-ttu-id="221f9-234">Это может произойти, если уже было открыто максимальное число получателей (5) на группу потребителей.</span><span class="sxs-lookup"><span data-stu-id="221f9-234">This can happen if the maximum number of receivers (5) has already been opened on a per-consumer group level.</span></span>

### <a name="event-hubs"></a><span data-ttu-id="221f9-235">Концентраторы событий</span><span class="sxs-lookup"><span data-stu-id="221f9-235">Event Hubs</span></span>
<span data-ttu-id="221f9-236">Концентраторы событий имеют ограничение в 20 групп потребителей на один концентратор событий.</span><span class="sxs-lookup"><span data-stu-id="221f9-236">Event Hubs has a limit of 20 consumer groups per Event Hub.</span></span> <span data-ttu-id="221f9-237">При попытке создать больше групп появляется исключение [QuotaExceededException](/dotnet/api/microsoft.servicebus.messaging.quotaexceededexception).</span><span class="sxs-lookup"><span data-stu-id="221f9-237">When you attempt to create more, you receive a [QuotaExceededException](/dotnet/api/microsoft.servicebus.messaging.quotaexceededexception).</span></span> 

## <a name="timeoutexception"></a><span data-ttu-id="221f9-238">TimeoutException</span><span class="sxs-lookup"><span data-stu-id="221f9-238">TimeoutException</span></span>
<span data-ttu-id="221f9-239">[TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx) указывает, что запущенная пользователем операция занимает больше времени, чем время ожидания операции.</span><span class="sxs-lookup"><span data-stu-id="221f9-239">A [TimeoutException](https://msdn.microsoft.com/library/system.timeoutexception.aspx) indicates that a user-initiated operation is taking longer than the operation timeout.</span></span> 

<span data-ttu-id="221f9-240">Для концентраторов событий время ожидания указывается как часть строки подключения или с помощью [ServiceBusConnectionStringBuilder](/dotnet/api/microsoft.servicebus.servicebusconnectionstringbuilder).</span><span class="sxs-lookup"><span data-stu-id="221f9-240">For Event Hubs, the timeout is specified either as part of the connection string, or through [ServiceBusConnectionStringBuilder](/dotnet/api/microsoft.servicebus.servicebusconnectionstringbuilder).</span></span> <span data-ttu-id="221f9-241">Само сообщение об ошибке может отличаться, но оно всегда содержит значение времени ожидания, указанное для текущей операции.</span><span class="sxs-lookup"><span data-stu-id="221f9-241">The error message itself might vary, but it always contains the timeout value specified for the current operation.</span></span> 

### <a name="common-causes"></a><span data-ttu-id="221f9-242">Основные причины</span><span class="sxs-lookup"><span data-stu-id="221f9-242">Common causes</span></span>
<span data-ttu-id="221f9-243">Существует две основные причины этой ошибки: неправильная конфигурация или временная ошибка службы.</span><span class="sxs-lookup"><span data-stu-id="221f9-243">There are two common causes for this error: incorrect configuration, or a transient service error.</span></span>

1. <span data-ttu-id="221f9-244">**Неправильная конфигурация.** Время ожидания операции может быть слишком коротким для состояния операции.</span><span class="sxs-lookup"><span data-stu-id="221f9-244">**Incorrect configuration** The operation timeout might be too small for the operational condition.</span></span> <span data-ttu-id="221f9-245">Время ожидания операции в пакете SDK клиента по умолчанию составляет 60 секунд.</span><span class="sxs-lookup"><span data-stu-id="221f9-245">The default value for the operation timeout in the client SDK is 60 seconds.</span></span> <span data-ttu-id="221f9-246">Проверьте, не задано ли в вашем коде слишком маленькое значение.</span><span class="sxs-lookup"><span data-stu-id="221f9-246">Check to see if your code has the value set to something too small.</span></span> <span data-ttu-id="221f9-247">Учтите, что состояние сети и загрузка ЦП могут повлиять на время, необходимое для выполнения конкретной операции, поэтому не следует задавать слишком маленькое значение времени ожидания операции.</span><span class="sxs-lookup"><span data-stu-id="221f9-247">Note that the condition of the network and CPU usage can affect the time it takes for a particular operation to complete, so the operation timeout should not be set to a very small value.</span></span>
2. <span data-ttu-id="221f9-248">**Временная ошибка службы.** Иногда обработка запросов в службе концентраторов событий выполняется с задержками, например в периоды интенсивной загрузки сети.</span><span class="sxs-lookup"><span data-stu-id="221f9-248">**Transient service error** Sometimes the Event Hubs service can experience delays in processing requests; for example, during periods of high traffic.</span></span> <span data-ttu-id="221f9-249">В таких случаях можно настроить повторную попытку выполнения операции через некоторое время до ее успешного завершения.</span><span class="sxs-lookup"><span data-stu-id="221f9-249">In such cases, you can retry your operation after a delay, until the operation is successful.</span></span> <span data-ttu-id="221f9-250">Если же операцию по-прежнему не удается выполнить после нескольких попыток, посетите [сайт состояния служб Azure](https://azure.microsoft.com/status/), чтобы получить сведения об известных простоях служб.</span><span class="sxs-lookup"><span data-stu-id="221f9-250">If the same operation still fails after multiple attempts, please visit the [Azure service status site](https://azure.microsoft.com/status/) to see if there are any known service outages.</span></span>

## <a name="serverbusyexception"></a><span data-ttu-id="221f9-251">ServerBusyException</span><span class="sxs-lookup"><span data-stu-id="221f9-251">ServerBusyException</span></span>

<span data-ttu-id="221f9-252">[Microsoft.ServiceBus.Messaging.ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) или [Microsoft.Azure.EventHubs.ServerBusyException](/dotnet/api/microsoft.azure.eventhubs.serverbusyexception) указывают на то, что сервер перегружен.</span><span class="sxs-lookup"><span data-stu-id="221f9-252">A [Microsoft.ServiceBus.Messaging.ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) or [Microsoft.Azure.EventHubs.ServerBusyException](/dotnet/api/microsoft.azure.eventhubs.serverbusyexception) indicates that a server is overloaded.</span></span> <span data-ttu-id="221f9-253">Для этого исключения есть два соответствующих кода ошибки.</span><span class="sxs-lookup"><span data-stu-id="221f9-253">There are two relevant error codes for this exception.</span></span>

### <a name="error-code-50002"></a><span data-ttu-id="221f9-254">Код ошибки 50002</span><span class="sxs-lookup"><span data-stu-id="221f9-254">Error code 50002</span></span>

<span data-ttu-id="221f9-255">Эта ошибка может возникать по одной из двух причин:</span><span class="sxs-lookup"><span data-stu-id="221f9-255">This error can occur for one of two reasons:</span></span>

1. <span data-ttu-id="221f9-256">Нагрузка неравномерно распределяется между всеми секциями в концентраторе событий, и в одной секции превышается локальное ограничение пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="221f9-256">The load is not evenly distributed across all partitions on the Event Hub, and one partition hits the local throughput unit limitation.</span></span>
    
    <span data-ttu-id="221f9-257">Способ устранения: пересмотреть стратегию распределения нагрузки по секциям или попробовать воспользоваться [EventHubClient.Send(eventDataWithOutPartitionKey)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_).</span><span class="sxs-lookup"><span data-stu-id="221f9-257">Resolution: Revising the partition distribution strategy or trying [EventHubClient.Send(eventDataWithOutPartitionKey)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) might help.</span></span>

2. <span data-ttu-id="221f9-258">Пространство имен концентраторов событий не имеет достаточного числа единиц пропускной способности (это можно проверить на [портале Azure](https://portal.azure.com) в колонке **Метрики** колонки пространства имен концентраторов событий).</span><span class="sxs-lookup"><span data-stu-id="221f9-258">The Event Hubs namespace does not have sufficient throughput units (you can check the **Metrics** blade on Event Hubs namespace blade in the [Azure portal](https://portal.azure.com) to confirm).</span></span> <span data-ttu-id="221f9-259">Обратите внимание, что на портале отображаются обобщенные (за 1 минуту) сведения, но мы измеряем пропускную способность в режиме реального времени, то есть это только оценка.</span><span class="sxs-lookup"><span data-stu-id="221f9-259">Note that the portal shows aggregated (1 minute) information, but we measure the throughput in real time – so it is only an estimate.</span></span>

    <span data-ttu-id="221f9-260">Способ устранения: увеличить число единиц пропускной способности для пространства имен.</span><span class="sxs-lookup"><span data-stu-id="221f9-260">Resolution: Increasing the throughput units on the namespace can help.</span></span> <span data-ttu-id="221f9-261">Это можно сделать на портале в колонке **Масштаб** колонки пространства имен концентраторов событий.</span><span class="sxs-lookup"><span data-stu-id="221f9-261">You can do this on the portal, in the **Scale** blade of the Event Hubs namespace blade.</span></span>

### <a name="error-code-50001"></a><span data-ttu-id="221f9-262">Код ошибки 50001</span><span class="sxs-lookup"><span data-stu-id="221f9-262">Error code 50001</span></span>

<span data-ttu-id="221f9-263">Эта ошибка не должна возникать часто.</span><span class="sxs-lookup"><span data-stu-id="221f9-263">This error should rarely occur.</span></span> <span data-ttu-id="221f9-264">Она происходит, когда контейнеру, выполняющему код для пространства имен, не хватает ресурсов ЦП — всего за пару секунд до запуска подсистемы балансировки нагрузки концентраторов событий.</span><span class="sxs-lookup"><span data-stu-id="221f9-264">It happens when the container running code for your namespace is low on CPU – not more than a few seconds before the Event Hubs load balancer begins.</span></span>


## <a name="next-steps"></a><span data-ttu-id="221f9-265">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="221f9-265">Next steps</span></span>
<span data-ttu-id="221f9-266">Дополнительные сведения о концентраторах событий см. в следующих источниках:</span><span class="sxs-lookup"><span data-stu-id="221f9-266">You can learn more about Event Hubs by visiting the following links:</span></span>

* [<span data-ttu-id="221f9-267">Обзор концентраторов событий</span><span class="sxs-lookup"><span data-stu-id="221f9-267">Event Hubs overview</span></span>](event-hubs-what-is-event-hubs.md)
* [<span data-ttu-id="221f9-268">Создание концентратора событий</span><span class="sxs-lookup"><span data-stu-id="221f9-268">Create an Event Hub</span></span>](event-hubs-create.md)
* [<span data-ttu-id="221f9-269">Часто задаваемые вопросы о концентраторах событий</span><span class="sxs-lookup"><span data-stu-id="221f9-269">Event Hubs FAQ</span></span>](event-hubs-faq.md)
