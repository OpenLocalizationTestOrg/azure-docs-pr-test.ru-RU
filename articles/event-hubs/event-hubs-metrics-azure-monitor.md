---
title: "Метрики концентраторов событий Azure в Azure Monitor (предварительная версия) | Документация Майкрософт"
description: "Мониторинг концентраторов событий с помощью Azure Monitor."
services: event-hubs
documentationcenter: .NET
author: ShubhaVijayasarathy
manager: timlt
editor: 
ms.assetid: 
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 10/19/2017
ms.author: sethm
ms.openlocfilehash: c3ee6a87592145801167b35ff281c04062e525da
ms.sourcegitcommit: 4ed3fe11c138eeed19aef0315a4f470f447eac0c
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2017
---
# <a name="azure-event-hubs-metrics-in-azure-monitor-preview"></a>Метрики концентраторов событий Azure в Azure Monitor (предварительная версия)

Метрики концентраторов событий предоставляют состояние ресурсов концентраторов событий в подписке Azure. Используя обширный набор данных метрик, можно оценить общую работоспособность концентраторов событий не только на уровне пространства имен, но также и на уровне сущности. Эти статистические данные могут быть важны, так как они позволяют отслеживать состояние концентраторов событий. Кроме того, метрики могут помочь в устранении первопричин проблем без необходимости обращения в службу поддержки Azure.

Azure Monitor предоставляет унифицированный пользовательский интерфейс для мониторинга различных служб Azure. Дополнительные сведения см. в разделе [Обзор мониторинга в Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview.md). Ознакомьтесь также с примером [получения данных метрик Azure Monitor с помощью .NET](https://github.com/Azure-Samples/monitor-dotnet-metrics-api) на сайте GitHub.

## <a name="access-metrics"></a>Доступ к метрикам

Azure Monitor предоставляет несколько способов доступа к метрикам. Вы можете использовать [портал Azure](https://portal.azure.com), интерфейсы API Azure Monitor (REST и .NET), а также решения для анализа, например Operation Management Suite и концентраторы событий. Дополнительные сведения см. в статье [Обзор метрик в Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview-metrics.md#access-metrics-via-the-rest-api).

Метрики включены по умолчанию, и вы можете получить доступ к данным за последние 30 дней. Если необходимо хранить данные метрик в течение длительного периода времени, вы можете архивировать их в учетную запись хранения Azure. Для настройки используйте [параметры диагностики](../monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) в Azure Monitor.

## <a name="access-metrics-in-the-portal"></a>Доступ к метрикам на портале

На [портале Azure](https://portal.azure.com) можно отслеживать метрики в течение продолжительного периода времени. В приведенном ниже примере показано, как просмотреть успешные запросы и входящие запросы на уровне учетной записи.

![][1]

Можно также открыть метрики непосредственно с помощью пространства имен. Для этого выберите нужное пространство имен и щелкните **Metrics (Peview)** (Метрики (предварительная версия)). Чтобы отобразить метрики, отфильтрованные по концентратору событий, выберите концентратор событий и щелкните **Metrics (Peview)** (Метрики (предварительная версия)).

Для метрик с поддержкой измерений необходимо выполнить фильтрацию по нужному значению измерения, как показано в примере ниже.

![][2]

## <a name="billing"></a>Выставление счетов

Использование метрик в Azure Monitor пока что осуществляется бесплатно и находится на этапе предварительной версии. Тем не менее, если вы используете дополнительные решения для приема данных метрик, за использование этих решений может взиматься плата. Например, при архивации данных метрик в учетную запись хранения Azure плата будет взиматься службой хранилища Azure, а при потоковой передаче данных метрик в OMS для расширенного анализа плата будет взиматься Operation Management Suite (OMS).

Приведенные ниже метрики позволяют получить общие сведения о работоспособности службы. 

> [!NOTE]
> Несколько метрик стали неподдерживаемыми, так как теперь они доступны под другим именем. Это может потребовать обновления ссылок. Метрики, помеченные ключевым словом "нерекомендуемая", больше не будут поддерживаться.

Все значения метрик ежеминутно отправляются в Azure Monitor. Степень детализации определяет интервал времени, за который представлены значения метрик. Поддерживаемый интервал времени для всех метрик концентраторов событий составляет 1 минуту.

## <a name="request-metrics"></a>Метрики запросов

Подсчитывают объем данных и количество запросов операций управления.

| Имя метрики | Описание |
| ------------------- | ----------------- |
| Incoming Requests (preview) | Число запросов к службе концентраторов событий Azure за указанный период. <br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName. |
| Successful Requests (preview)   | Число успешных запросов к службе концентраторов событий Azure за указанный период. <br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName. |
| Server Errors (preview) | Число запросов, которые не были обработаны из-за ошибки в службе концентраторов событий Azure, за указанный период. <br/><br/>Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName. |
|User Errors (preview)|Количество запросов, не обработанных из-за ошибки пользователя, за указанный период.<br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|
|Throttled Requests (preview)|Число запросов, которые были отрегулированы из-за превышения квоты единиц пропускной способности.<br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|
|Quota Exceeded Errors (preview)|Количество запросов, превысивших доступную квоту. Дополнительные сведения о квотах концентраторов событий см. в [этой статье](event-hubs-quotas.md).<br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|

## <a name="throughput-metrics"></a>Метрики пропускной способности

| Имя метрики | Описание |
| ------------------- | ----------------- |
|Throttled Requests (preview)|Число запросов, которые были отрегулированы из-за превышения квоты единиц пропускной способности.<br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|

## <a name="message-metrics"></a>Метрики использования

| Имя метрики | Описание |
| ------------------- | ----------------- |
|Incoming Messages (preview)|Количество событий или сообщений, отправленных в концентраторы событий, за указанный период.<br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|
|Outgoing Messages (preview)|Количество событий или сообщений, полученных из концентраторов событий, за указанный период.<br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|
|Incoming Bytes (preview)|Число байтов, переданных в службу концентраторов событий Azure, за указанный период.<br/><br/> Единица измерения: байт <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|
|Outgoing Bytes (preview)|Число байтов, полученных от службы концентраторов событий Azure, за указанный период.<br/><br/> Единица измерения: байт <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|

## <a name="connection-metrics"></a>Метрики подключения

| Имя метрики | Описание |
| ------------------- | ----------------- |
|ActiveConnections (preview)|Число активных подключений для пространства имен, а также для сущности.<br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|
|Connections Opened (preview)|Число открытых подключений.<br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|
|Connections Closed (preview)|Число закрытых подключений.<br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|

## <a name="event-hubs-capture-metrics"></a>Метрики записи концентраторов событий

Можно отслеживать метрики записи концентраторов событий, если для ваших концентраторов событий включена функция записи. Приведенные ниже метрики описывают возможности отслеживания с помощью функции записи.

| Имя метрики | Описание |
| ------------------- | ----------------- |
|Capture Backlog (Preview)|Число байтов, которые будут записаны в выбранное назначение.<br/><br/> Единица измерения: байт <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|
|Captured Messages (Preview)|Число сообщений или событий, записанных в выбранное назначение, за указанный период.<br/><br/> Единица измерения: число <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|
|Captured Bytes (Preview)|Число байтов, записанных в выбранное назначение, за указанный период.<br/><br/> Единица измерения: байт <br/> Тип агрегирования: итог <br/> Измерение: EntityName.|

## <a name="metrics-dimensions"></a>Измерения метрик

Концентраторы событий Azure поддерживают следующие измерения метрик в Azure Monitor. Добавление измерений для метрик является необязательным. Если не добавить измерения, то метрики указываются на уровне пространства имен. 

| Имя метрики | Описание |
| ------------------- | ----------------- |
|EntityName| Концентраторы событий поддерживают сущности концентраторов событий в пространстве имен.|

## <a name="next-steps"></a>Дальнейшие действия

* Ознакомьтесь с разделом [Обзор мониторинга в Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview.md).
* Изучите пример [получения данных метрик Azure Monitor с помощью .NET](https://github.com/Azure-Samples/monitor-dotnet-metrics-api) на сайте GitHub. 

Дополнительные сведения о концентраторах событий см. по следующим ссылкам:

* Начните работу с [руководства по концентраторам событий](event-hubs-dotnet-standard-getstarted-send.md)
* [Часто задаваемые вопросы о концентраторах событий](event-hubs-faq.md)
* [Примеры приложений, использующих концентраторы событий](https://github.com/Azure/azure-event-hubs/tree/master/samples)

[1]: ./media/event-hubs-metrics-azure-monitor/event-hubs-monitor1.png
[2]: ./media/event-hubs-metrics-azure-monitor/event-hubs-monitor2.png



