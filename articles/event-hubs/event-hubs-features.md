---
title: "Общие сведения о функции aaaAzure концентраторов событий | Документы Microsoft"
description: "Обзор и сведения о концентраторах событий Azure"
services: event-hubs
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: 8094e48abc8455ed725d4d5d3f9895f431441e2b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="event-hubs-features-overview"></a>Обзор функций концентраторов событий

Концентраторы событий Azure — это масштабируемая служба обработки событий, которая принимает и обрабатывает большие объемы событий и данных с низкой задержкой и высокой надежностью. В разделе [возможности концентраторов событий?](event-hubs-what-is-event-hubs.md) общее описание службы hello.

Эта статья основана на информации hello в hello [Обзор](event-hubs-what-is-event-hubs.md)и предоставляются технические и реализации сведения о концентраторах событий компонентов и функций.

## <a name="event-publishers"></a>Издатели событий

Любая сущность, отправляет концентратора событий tooan данных является источника событий, или *издатель событий*. Издатели событий могут публиковать события с помощью HTTPS или AMQP 1.0. Издатели событий использовать tooidentify токена подписи общего доступа (SAS) сами tooan концентратор событий и можно иметь уникальный идентификатор или использовать маркер.

### <a name="publishing-an-event"></a>Публикация события

Вы можете опубликовать событие через протокол AMQP 1.0 или HTTPS. Концентраторы событий [клиентские библиотеки и классы](event-hubs-dotnet-framework-api-overview.md) для публикации событий концентратора событий tooan от клиентов .NET. Для других сред выполнения и платформ можно использовать любой клиент AMQP 1.0, например [Apache Qpid](http://qpid.apache.org/). Можно публиковать события по отдельности или в пакетном режиме. Для одной публикации (экземпляра данных события) установлено ограничение в 256 КБ, независимо от того, одиночное это событие или пакет. Публикация событий, размер которых превышает это пороговое значение, приводит к ошибке. Рекомендуется для издателей toobe знает разделов в концентраторе событий hello и укажите tooonly *ключ раздела* (представленный в следующем разделе hello), или удостоверение через маркер SAS.

Hello Выбор toouse AMQP или HTTPS — сценарии использования определенных toohello. AMQP требует установления hello постоянного двунаправленного сокета в дополнение tootransport уровня протокола TLS или SSL/TLS. AMQP имеет более высокими затратами сети при инициализации сеанса hello, однако HTTPS требует дополнительных затрат на SSL для каждого запроса. AMQP отличается более высокой производительностью при частых публикациях.

![Концентраторы событий](./media/event-hubs-features/partition_keys.png)

Концентраторы событий гарантируют, что все события с общим значением ключа секции будут доставлены в порядке и toohello же секции. Если ключи разделов используются с политиками издателей, затем hello удостоверение издателя hello и hello значение ключа секции hello должны совпадать. В противном случае возникает ошибка.

### <a name="publisher-policy"></a>Политика издателя

Концентраторы событий обеспечивают точный контроль над издателями событий через *политики издателя*. Политики издателей представляют во время выполнения функций, toofacilitate большим числом издателей независимых событий. С помощью политики издателя каждый издатель использует свой собственный уникальный идентификатор при публикации концентратора событий tooan события, с помощью следующих механизм hello:

```
//[my namespace].servicebus.windows.net/[event hub name]/publishers/[my publisher name]
```

Нет имен издателей toocreate заранее, но они должны соответствовать маркер SAS hello, используемый при публикации события в порядке tooensure независимых удостоверений издателей. При использовании политик издателей, hello **PartitionKey** значение toohello имя издателя. toowork надлежащим образом, эти значения должны совпадать.

## <a name="capture"></a>Регистрация

[Записать концентраторов событий](event-hubs-capture-overview.md) позволяет hello отслеживания tooautomatically потоковой передачи данных в концентраторы событий и сохраните его tooyour Выбор учетной записи хранилища BLOB-объектов или учетную запись службы Озера данных Azure. Включение захвата из hello портал Azure и указать минимальный размер и время окна tooperform hello отслеживания. Используя захвата концентраторов событий, указать собственную учетную запись хранилища больших двоичных объектов и контейнера, или учетной записью службе Озера данных Azure, она используется toostore hello собранные данные. Собранные данные записывается в формате Apache Avro hello.

## <a name="partitions"></a>Разделы

Концентраторы событий обеспечивают потоковую передачу через разделенный получатель шаблон, в котором каждый потребитель считывает только в тех случаях, определенное подмножество или раздел потока сообщений hello сообщений. Этот шаблон обеспечивает горизонтальное масштабирование для обработки событий и предоставляет другие функции, ориентированные на поток, которые недоступны для очередей и разделов.

Секция — это упорядоченная последовательность событий, хранящаяся в концентраторе событий. Вновь поступившие события добавляются в конец toohello этой последовательности. Секцию можно рассматривать как «журнал фиксации».

![Концентраторы событий](./media/event-hubs-features/partition.png)

Концентраторы событий сохраняет данные в течение заданного времени, применяется ко всем разделам в концентраторе событий hello. События удаляются по истечении срока действия; невозможно явно удалить их. Так как секции независимы и содержат собственные последовательности данных, они часто расширяются с разной скоростью.

![Концентраторы событий](./media/event-hubs-features/multiple_partitions.png)

Hello количество разделов указывается при создании и должно быть в диапазоне от 2 до 32. число секций Hello не изменяемым, поэтому при задании число секций, следует учитывать долгосрочной шкалы. Секции представляют собой механизм организации данных, который связывает toohello внутреннего параллелизма, необходимого в приложениях. Hello количество разделов в концентраторе событий напрямую относится toohello число из параллельных чтений предполагается, что toohave. Можно увеличить hello число секций, помимо 32, обратившись в службу team hello концентраторов событий.

Хотя секций идентифицировать и могут быть отправлены toodirectly, отправка напрямую tooa секции не рекомендуется. Вместо этого можно использовать конструкции более высокого уровня, представленные в hello [издатель событий](#event-publishers) и [емкость](#capacity) разделы. 

Разделы заполняются последовательностью данных события, которые содержат текст hello hello события, определяемого пользователем свойства контейнера и метаданные, такие как его смещение раздела hello и номером в последовательности потока hello.

Дополнительные сведения о секциях и hello компромисса между доступности и надежности см. в разделе hello [руководство по программированию концентраторов событий](event-hubs-programming-guide.md#partition-key) и hello [доступности и согласованности в концентраторы событий](event-hubs-availability-and-consistency.md) статьи .

### <a name="partition-key"></a>Ключ секции

Можно использовать [ключ раздела](event-hubs-programming-guide.md#partition-key) toomap данных входящего события в конкретные разделы для hello цели организации данных. ключ раздела Hello является указанное отправителем значение, переданное в концентратор событий. Обработка данных выполняется через статической функции хеширования, создающий hello секции назначения. Если при публикации события не указать ключ секции, назначение создается с помощью циклического перебора.

Издатель событий Hello известен только ключ его раздела не hello секции toowhich hello события будут опубликованы. В этом раздел и раздел случае отправитель hello от необходимости tooknow много о hello последующей обработки. Идентификатор устройства или пользователя уникальных удостоверений делает хорошим ключом раздела, но другие атрибуты, такие как География также могут использоваться toogroup события, связанные с одной секцией.

## <a name="sas-tokens"></a>Маркеры SAS

Концентраторы событий используют *подписей общего доступа*, они доступны на уровне концентратора hello пространства имен и событий. Маркер SAS создается на основе ключа SAS и хэша SHA URL-адреса, закодированного в определенном формате. С помощью hello имени ключа hello (политика) и маркер hello, концентраторов событий можно повторно создать хэш hello и таким образом проверить подлинность отправителя hello. Как правило, маркеры SAS для издателей событий создаются только с правом **отправки** конкретному концентратору событий. Этот URL-адрес механизм маркера SAS является основой hello для идентификации издателя, представленной в политике издателя hello. Дополнительные сведения о работе с SAS см. в статье [Проверка подлинности подписи при общем доступе с помощью служебной шины](../service-bus-messaging/service-bus-sas.md).

## <a name="event-consumers"></a>Получатели событий

Любая сущность, считывающая данные из концентратора событий, является *потребителем событий*. Все потребители концентраторов событий подключение через сеанс AMQP 1.0 hello и как они станут доступны через сеанс hello доставляются события. Hello клиенту не требуется toopoll для обеспечения доступности данных.

### <a name="consumer-groups"></a>Группы получателей

механизм публикации и подписки Hello концентраторов событий осуществляется за счет *групп потребителей*. Группа потребителей — это представление всего концентратора событий (состояние, позиция или смещение). Группы потребителей позволяют нескольких приложений tooeach иметь отдельное представление потока событий hello и tooread hello поток независимо друг от друга в своем темпе и с их собственных смещения.

В архитектуре потоковой обработки каждое внутреннее приложение соответствует группе потребителей tooa. Если вы хотите toowrite хранения toolong термин данных событий, то группы потребителей, приложение записи в хранилище. Сложную обработку событий затем может выполнить еще одна (отдельная) группа потребителей. К секции можно обращаться только через группу потребителей. В секции для каждой группы потребителей может существовать не более пяти одновременных считывателей. Однако **рекомендуется, чтобы в секции для каждой группы потребителей поддерживался только один активный получатель**. В концентраторе событий всегда имеется группа потребителей по умолчанию, и можно создать копию too20 групп потребителей концентратора событий уровня Standard.

Hello ниже приведены примеры применения URI группы потребителей hello.

```http
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #1]
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #2]
```

Hello следующем рисунке показана архитектура обработки hello концентраторов событий потока.

![Концентраторы событий](./media/event-hubs-features/event_hubs_architecture.png)

### <a name="stream-offsets"></a>Смещение потока

*Смещение* — hello положение события в секции. Смещение можно представить как клиентский курсор. Hello смещение является байт нумерации hello события. Это смещение позволяет toospecify потребителя (чтения) событие точки в потоке событий hello, из которого они должны toobegin чтение событий. Можно указать смещение hello как отметки времени или значения смещения. Потребители несут ответственность за хранение своих собственных значений смещения вне службы концентраторов событий hello. В секции каждое событие включает смещение.

![Концентраторы событий](./media/event-hubs-features/partition_offset.png)

### <a name="checkpointing"></a>Контрольные точки

*Создание контрольных точек* — это процесс, с помощью которого модули чтения помечают или фиксируют свое положение в последовательности событий секции. Контрольные точки hello ответственность потребителя hello и выполняется на основе каждого раздела в группе потребителей. Эту ответственность на себя означает, что для каждой группы потребителей каждый считыватель раздела должен отслеживать ее текущей позиции в потоке событий hello и могло бы сообщить службе hello завершении передачи потока данных hello завершения.

Если считыватель отключается от раздела, при повторном подключении он приступает к чтению с hello контрольной точки, которая ранее была отправлена hello последнего чтения этого раздела в данной группе потребителей. При подключении считыватель hello, он передает это расположение смещения toohello события концентратора toospecify hello в какие toostart чтения. Таким образом можно использовать назначение контрольных точек tooboth отмечать события как «завершить» принимающими приложениями и происходит tooprovide устойчивости, если отработки отказа между считывателями, запущенными на разных компьютерах. Это возможно tooreturn tooolder данные путем указания нижнее смещение из этого процесса назначения контрольных точек. В рамках такого подхода при создании контрольных точек вы обеспечиваете отказоустойчивость и воспроизведение потока событий.

### <a name="common-consumer-tasks"></a>Стандартные задачи потребителя

Все потребители концентраторов событий подключаются через двунаправленный канал связи с поддержкой состояния и сеанса AMQP 1.0. Каждая секция имеет сеанс AMQP 1.0, который облегчает транспорта hello событий изолированная секцией.

#### <a name="connect-tooa-partition"></a>Подключение tooa секции

При подключении toopartitions, это общие toouse рекомендаций Аренда механизм toocoordinate чтения соединения toospecific секций. Таким образом, можно для каждой секции, в потребителя группы toohave только один активный считыватель. Контрольные точки, аренда и управление читатели упрощается с помощью hello [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) класс для клиентов .NET. Hello узел обработчика событий является это интеллектуальный агент потребителя.

#### <a name="read-events"></a>Чтение событий

После открытия сеанса AMQP 1.0 и ссылка для определенной секции события доставляются клиента toohello AMQP 1.0 с hello службы концентраторов событий. Этот механизм доставки обеспечивает более высокую пропускную способность и меньшую задержку, чем механизмы извлечения по запросу, такие как HTTP GET. Как события отправляются toohello клиента, каждому экземпляру данных события содержатся важные метаданные, например hello смещение и порядковый номер, назначение контрольных точек используется toofacilitate на hello последовательность событий.

Данные событий
* Offset
* Порядковый номер
* Текст
* Свойства пользователя
* Свойства системы

Это смещение hello toomanage вашей ответственности.

## <a name="capacity"></a>Capacity

Концентраторы событий располагают высокомасштабируемую параллельную архитектуру и имеется несколько ключевых факторов tooconsider при изменении размера и масштабирование.

### <a name="throughput-units"></a>Единицы пропускной способности

Hello пропускной способности концентраторов событий контролируется *единиц производительности*. Единицы пропускной способности — это предварительно приобретенные единицы емкости. Единица производительности включает следующие емкости hello.

* Входящие: копирование too1 МБ в секунду или 1 000 событий в секунду (что произойдет первым)
* Исходящий трафик: копирование too2 МБ в секунду

Превышена максимальная емкость hello объекта hello, приобретенных единиц производительности, входящие показатели регулируются и [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) возвращается. Исходящие данные не создают исключений регулирования, но по-прежнему ограничено toohello емкость hello, приобретенных единиц производительности. При возникновении исключений скорости публикации или ожидаются высокие исходящие показатели toosee Будьте toocheck убедиться, что количество единиц производительности, приобретенных для пространства имен hello. Вы можете управлять единиц на hello **шкалы** колонке hello пространств имен в hello [портал Azure](https://portal.azure.com). Также можно управлять программно с помощью hello единиц производительности [API-интерфейсов концентраторы событий](event-hubs-api-overview.md).

Единицы пропускной способности тарифицируются почасово и приобретаются заранее. После приобретения единицы пропускной способности тарифицируются минимум за один час. Копирование too20 единицы пропускной способности концентраторов событий пространства имен можно приобрести и являются общими для всех концентраторов событий в пространстве имен hello.

Дополнительные единицы производительности может быть приобретен с блоками по 20 too100 единицы пропускной способности, обратившись в службу поддержки Azure. Кроме того, вы можете приобрести блоки на 100 единиц пропускной способности.

Корпорация Майкрософт рекомендует регулировать пропускную способность единиц измерения и секции tooachieve оптимального масштабирования. Одна секция имеет максимальный масштаб в размере одной единицы пропускной способности. Hello количество единиц производительности должно быть меньше или равно toohello количество разделов в концентраторе событий.

Подробные сведения о ценах см. на странице [цен на концентраторы событий](https://azure.microsoft.com/pricing/details/event-hubs/).

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о концентраторах событий посетите hello ссылкам:

* Начните работу с [руководства по концентраторам событий][Event Hubs tutorial]
* [Руководство по программированию концентраторов событий](event-hubs-programming-guide.md)
* [Доступность и согласованность в концентраторах событий](event-hubs-availability-and-consistency.md)
* [Часто задаваемые вопросы о концентраторах событий](event-hubs-faq.md)
* [Примеры концентраторов событий][]

[Event Hubs tutorial]: event-hubs-dotnet-standard-getstarted-send.md
[Примеры концентраторов событий]: https://github.com/Azure/azure-event-hubs/tree/master/samples
