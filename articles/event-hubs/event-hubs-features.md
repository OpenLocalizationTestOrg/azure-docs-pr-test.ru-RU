---
title: "Общие сведения о функции aaaAzure концентраторов событий | Документы Microsoft"
description: "Обзор и сведения о концентраторах событий Azure"
services: event-hubs
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: 8094e48abc8455ed725d4d5d3f9895f431441e2b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="event-hubs-features-overview"></a><span data-ttu-id="bf9a6-103">Обзор функций концентраторов событий</span><span class="sxs-lookup"><span data-stu-id="bf9a6-103">Event Hubs features overview</span></span>

<span data-ttu-id="bf9a6-104">Концентраторы событий Azure — это масштабируемая служба обработки событий, которая принимает и обрабатывает большие объемы событий и данных с низкой задержкой и высокой надежностью.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-104">Azure Event Hubs is a scalable event processing service that ingests and processes large volumes of events and data, with low latency and high reliability.</span></span> <span data-ttu-id="bf9a6-105">В разделе [возможности концентраторов событий?](event-hubs-what-is-event-hubs.md) общее описание службы hello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-105">See [What is Event Hubs?](event-hubs-what-is-event-hubs.md) for a high-level overview of hello service.</span></span>

<span data-ttu-id="bf9a6-106">Эта статья основана на информации hello в hello [Обзор](event-hubs-what-is-event-hubs.md)и предоставляются технические и реализации сведения о концентраторах событий компонентов и функций.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-106">This article builds on hello information in hello [overview](event-hubs-what-is-event-hubs.md), and provides technical and implementation details about Event Hubs components and features.</span></span>

## <a name="event-publishers"></a><span data-ttu-id="bf9a6-107">Издатели событий</span><span class="sxs-lookup"><span data-stu-id="bf9a6-107">Event publishers</span></span>

<span data-ttu-id="bf9a6-108">Любая сущность, отправляет концентратора событий tooan данных является источника событий, или *издатель событий*.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-108">Any entity that sends data tooan event hub is an event producer, or *event publisher*.</span></span> <span data-ttu-id="bf9a6-109">Издатели событий могут публиковать события с помощью HTTPS или AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-109">Event publishers can publish events using HTTPS or AMQP 1.0.</span></span> <span data-ttu-id="bf9a6-110">Издатели событий использовать tooidentify токена подписи общего доступа (SAS) сами tooan концентратор событий и можно иметь уникальный идентификатор или использовать маркер.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-110">Event publishers use a Shared Access Signature (SAS) token tooidentify themselves tooan event hub, and can have a unique identity, or use a common SAS token.</span></span>

### <a name="publishing-an-event"></a><span data-ttu-id="bf9a6-111">Публикация события</span><span class="sxs-lookup"><span data-stu-id="bf9a6-111">Publishing an event</span></span>

<span data-ttu-id="bf9a6-112">Вы можете опубликовать событие через протокол AMQP 1.0 или HTTPS.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-112">You can publish an event via AMQP 1.0 or HTTPS.</span></span> <span data-ttu-id="bf9a6-113">Концентраторы событий [клиентские библиотеки и классы](event-hubs-dotnet-framework-api-overview.md) для публикации событий концентратора событий tooan от клиентов .NET.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-113">Event Hubs provides [client libraries and classes](event-hubs-dotnet-framework-api-overview.md) for publishing events tooan event hub from .NET clients.</span></span> <span data-ttu-id="bf9a6-114">Для других сред выполнения и платформ можно использовать любой клиент AMQP 1.0, например [Apache Qpid](http://qpid.apache.org/).</span><span class="sxs-lookup"><span data-stu-id="bf9a6-114">For other runtimes and platforms, you can use any AMQP 1.0 client, such as [Apache Qpid](http://qpid.apache.org/).</span></span> <span data-ttu-id="bf9a6-115">Можно публиковать события по отдельности или в пакетном режиме.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-115">You can publish events individually, or batched.</span></span> <span data-ttu-id="bf9a6-116">Для одной публикации (экземпляра данных события) установлено ограничение в 256 КБ, независимо от того, одиночное это событие или пакет.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-116">A single publication (event data instance) has a limit of 256 KB, regardless of whether it is a single event or a batch.</span></span> <span data-ttu-id="bf9a6-117">Публикация событий, размер которых превышает это пороговое значение, приводит к ошибке.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-117">Publishing events larger than this threshold results in an error.</span></span> <span data-ttu-id="bf9a6-118">Рекомендуется для издателей toobe знает разделов в концентраторе событий hello и укажите tooonly *ключ раздела* (представленный в следующем разделе hello), или удостоверение через маркер SAS.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-118">It is a best practice for publishers toobe unaware of partitions within hello event hub and tooonly specify a *partition key* (introduced in hello next section), or their identity via their SAS token.</span></span>

<span data-ttu-id="bf9a6-119">Hello Выбор toouse AMQP или HTTPS — сценарии использования определенных toohello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-119">hello choice toouse AMQP or HTTPS is specific toohello usage scenario.</span></span> <span data-ttu-id="bf9a6-120">AMQP требует установления hello постоянного двунаправленного сокета в дополнение tootransport уровня протокола TLS или SSL/TLS.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-120">AMQP requires hello establishment of a persistent bidirectional socket in addition tootransport level security (TLS) or SSL/TLS.</span></span> <span data-ttu-id="bf9a6-121">AMQP имеет более высокими затратами сети при инициализации сеанса hello, однако HTTPS требует дополнительных затрат на SSL для каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-121">AMQP has higher network costs when initializing hello session, however HTTPS requires additional SSL overhead for every request.</span></span> <span data-ttu-id="bf9a6-122">AMQP отличается более высокой производительностью при частых публикациях.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-122">AMQP has higher performance for frequent publishers.</span></span>

![Концентраторы событий](./media/event-hubs-features/partition_keys.png)

<span data-ttu-id="bf9a6-124">Концентраторы событий гарантируют, что все события с общим значением ключа секции будут доставлены в порядке и toohello же секции.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-124">Event Hubs ensures that all events sharing a partition key value are delivered in order, and toohello same partition.</span></span> <span data-ttu-id="bf9a6-125">Если ключи разделов используются с политиками издателей, затем hello удостоверение издателя hello и hello значение ключа секции hello должны совпадать.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-125">If partition keys are used with publisher policies, then hello identity of hello publisher and hello value of hello partition key must match.</span></span> <span data-ttu-id="bf9a6-126">В противном случае возникает ошибка.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-126">Otherwise, an error occurs.</span></span>

### <a name="publisher-policy"></a><span data-ttu-id="bf9a6-127">Политика издателя</span><span class="sxs-lookup"><span data-stu-id="bf9a6-127">Publisher policy</span></span>

<span data-ttu-id="bf9a6-128">Концентраторы событий обеспечивают точный контроль над издателями событий через *политики издателя*.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-128">Event Hubs enables granular control over event publishers through *publisher policies*.</span></span> <span data-ttu-id="bf9a6-129">Политики издателей представляют во время выполнения функций, toofacilitate большим числом издателей независимых событий.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-129">Publisher policies are run-time features designed toofacilitate large numbers of independent event publishers.</span></span> <span data-ttu-id="bf9a6-130">С помощью политики издателя каждый издатель использует свой собственный уникальный идентификатор при публикации концентратора событий tooan события, с помощью следующих механизм hello:</span><span class="sxs-lookup"><span data-stu-id="bf9a6-130">With publisher policies, each publisher uses its own unique identifier when publishing events tooan event hub, using hello following mechanism:</span></span>

```
//[my namespace].servicebus.windows.net/[event hub name]/publishers/[my publisher name]
```

<span data-ttu-id="bf9a6-131">Нет имен издателей toocreate заранее, но они должны соответствовать маркер SAS hello, используемый при публикации события в порядке tooensure независимых удостоверений издателей.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-131">You don't have toocreate publisher names ahead of time, but they must match hello SAS token used when publishing an event, in order tooensure independent publisher identities.</span></span> <span data-ttu-id="bf9a6-132">При использовании политик издателей, hello **PartitionKey** значение toohello имя издателя.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-132">When using publisher policies, hello **PartitionKey** value is set toohello publisher name.</span></span> <span data-ttu-id="bf9a6-133">toowork надлежащим образом, эти значения должны совпадать.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-133">toowork properly, these values must match.</span></span>

## <a name="capture"></a><span data-ttu-id="bf9a6-134">Регистрация</span><span class="sxs-lookup"><span data-stu-id="bf9a6-134">Capture</span></span>

<span data-ttu-id="bf9a6-135">[Записать концентраторов событий](event-hubs-capture-overview.md) позволяет hello отслеживания tooautomatically потоковой передачи данных в концентраторы событий и сохраните его tooyour Выбор учетной записи хранилища BLOB-объектов или учетную запись службы Озера данных Azure.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-135">[Event Hubs Capture](event-hubs-capture-overview.md) enables you tooautomatically capture hello streaming data in Event Hubs and save it tooyour choice of either a Blob storage account, or an Azure Data Lake Service account.</span></span> <span data-ttu-id="bf9a6-136">Включение захвата из hello портал Azure и указать минимальный размер и время окна tooperform hello отслеживания.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-136">You can enable Capture from hello Azure portal, and specify a minimum size and time window tooperform hello capture.</span></span> <span data-ttu-id="bf9a6-137">Используя захвата концентраторов событий, указать собственную учетную запись хранилища больших двоичных объектов и контейнера, или учетной записью службе Озера данных Azure, она используется toostore hello собранные данные.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-137">Using Event Hubs Capture, you specify your own Azure Blob Storage account and container, or Azure Data Lake Service account, which is used toostore hello captured data.</span></span> <span data-ttu-id="bf9a6-138">Собранные данные записывается в формате Apache Avro hello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-138">Captured data is written in hello Apache Avro format.</span></span>

## <a name="partitions"></a><span data-ttu-id="bf9a6-139">Разделы</span><span class="sxs-lookup"><span data-stu-id="bf9a6-139">Partitions</span></span>

<span data-ttu-id="bf9a6-140">Концентраторы событий обеспечивают потоковую передачу через разделенный получатель шаблон, в котором каждый потребитель считывает только в тех случаях, определенное подмножество или раздел потока сообщений hello сообщений.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-140">Event Hubs provides message streaming through a partitioned consumer pattern in which each consumer only reads a specific subset, or partition, of hello message stream.</span></span> <span data-ttu-id="bf9a6-141">Этот шаблон обеспечивает горизонтальное масштабирование для обработки событий и предоставляет другие функции, ориентированные на поток, которые недоступны для очередей и разделов.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-141">This pattern enables horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span>

<span data-ttu-id="bf9a6-142">Секция — это упорядоченная последовательность событий, хранящаяся в концентраторе событий.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-142">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="bf9a6-143">Вновь поступившие события добавляются в конец toohello этой последовательности.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-143">As newer events arrive, they are added toohello end of this sequence.</span></span> <span data-ttu-id="bf9a6-144">Секцию можно рассматривать как «журнал фиксации».</span><span class="sxs-lookup"><span data-stu-id="bf9a6-144">A partition can be thought of as a "commit log."</span></span>

![Концентраторы событий](./media/event-hubs-features/partition.png)

<span data-ttu-id="bf9a6-146">Концентраторы событий сохраняет данные в течение заданного времени, применяется ко всем разделам в концентраторе событий hello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-146">Event Hubs retains data for a configured retention time that applies across all partitions in hello event hub.</span></span> <span data-ttu-id="bf9a6-147">События удаляются по истечении срока действия; невозможно явно удалить их.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-147">Events expire on a time basis; you cannot explicitly delete them.</span></span> <span data-ttu-id="bf9a6-148">Так как секции независимы и содержат собственные последовательности данных, они часто расширяются с разной скоростью.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-148">Because partitions are independent and contain their own sequence of data, they often grow at different rates.</span></span>

![Концентраторы событий](./media/event-hubs-features/multiple_partitions.png)

<span data-ttu-id="bf9a6-150">Hello количество разделов указывается при создании и должно быть в диапазоне от 2 до 32.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-150">hello number of partitions is specified at creation and must be between 2 and 32.</span></span> <span data-ttu-id="bf9a6-151">число секций Hello не изменяемым, поэтому при задании число секций, следует учитывать долгосрочной шкалы.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-151">hello partition count is not changeable, so you should consider long-term scale when setting partition count.</span></span> <span data-ttu-id="bf9a6-152">Секции представляют собой механизм организации данных, который связывает toohello внутреннего параллелизма, необходимого в приложениях.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-152">Partitions are a data organization mechanism that relates toohello downstream parallelism required in consuming applications.</span></span> <span data-ttu-id="bf9a6-153">Hello количество разделов в концентраторе событий напрямую относится toohello число из параллельных чтений предполагается, что toohave.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-153">hello number of partitions in an event hub directly relates toohello number of concurrent readers you expect toohave.</span></span> <span data-ttu-id="bf9a6-154">Можно увеличить hello число секций, помимо 32, обратившись в службу team hello концентраторов событий.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-154">You can increase hello number of partitions beyond 32 by contacting hello Event Hubs team.</span></span>

<span data-ttu-id="bf9a6-155">Хотя секций идентифицировать и могут быть отправлены toodirectly, отправка напрямую tooa секции не рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-155">While partitions are identifiable and can be sent toodirectly, sending directly tooa partition is not recommended.</span></span> <span data-ttu-id="bf9a6-156">Вместо этого можно использовать конструкции более высокого уровня, представленные в hello [издатель событий](#event-publishers) и [емкость](#capacity) разделы.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-156">Instead, you can use higher level constructs introduced in hello [Event publisher](#event-publishers) and [Capacity](#capacity) sections.</span></span> 

<span data-ttu-id="bf9a6-157">Разделы заполняются последовательностью данных события, которые содержат текст hello hello события, определяемого пользователем свойства контейнера и метаданные, такие как его смещение раздела hello и номером в последовательности потока hello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-157">Partitions are filled with a sequence of event data which contains hello body of hello event, a user-defined property bag, and metadata such as its offset in hello partition and its number in hello stream sequence.</span></span>

<span data-ttu-id="bf9a6-158">Дополнительные сведения о секциях и hello компромисса между доступности и надежности см. в разделе hello [руководство по программированию концентраторов событий](event-hubs-programming-guide.md#partition-key) и hello [доступности и согласованности в концентраторы событий](event-hubs-availability-and-consistency.md) статьи .</span><span class="sxs-lookup"><span data-stu-id="bf9a6-158">For more information about partitions and hello trade-off between availability and reliability, see hello [Event Hubs programming guide](event-hubs-programming-guide.md#partition-key) and hello [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md) article.</span></span>

### <a name="partition-key"></a><span data-ttu-id="bf9a6-159">Ключ секции</span><span class="sxs-lookup"><span data-stu-id="bf9a6-159">Partition key</span></span>

<span data-ttu-id="bf9a6-160">Можно использовать [ключ раздела](event-hubs-programming-guide.md#partition-key) toomap данных входящего события в конкретные разделы для hello цели организации данных.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-160">You can use a [partition key](event-hubs-programming-guide.md#partition-key) toomap incoming event data into specific partitions for hello purpose of data organization.</span></span> <span data-ttu-id="bf9a6-161">ключ раздела Hello является указанное отправителем значение, переданное в концентратор событий.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-161">hello partition key is a sender-supplied value passed into an event hub.</span></span> <span data-ttu-id="bf9a6-162">Обработка данных выполняется через статической функции хеширования, создающий hello секции назначения.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-162">It is processed through a static hashing function, which creates hello partition assignment.</span></span> <span data-ttu-id="bf9a6-163">Если при публикации события не указать ключ секции, назначение создается с помощью циклического перебора.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-163">If you don't specify a partition key when publishing an event, a round-robin assignment is used.</span></span>

<span data-ttu-id="bf9a6-164">Издатель событий Hello известен только ключ его раздела не hello секции toowhich hello события будут опубликованы.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-164">hello event publisher is only aware of its partition key, not hello partition toowhich hello events are published.</span></span> <span data-ttu-id="bf9a6-165">В этом раздел и раздел случае отправитель hello от необходимости tooknow много о hello последующей обработки.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-165">This decoupling of key and partition insulates hello sender from needing tooknow too much about hello downstream processing.</span></span> <span data-ttu-id="bf9a6-166">Идентификатор устройства или пользователя уникальных удостоверений делает хорошим ключом раздела, но другие атрибуты, такие как География также могут использоваться toogroup события, связанные с одной секцией.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-166">A per-device or user unique identity makes a good partition key, but other attributes such as geography can also be used toogroup related events into a single partition.</span></span>

## <a name="sas-tokens"></a><span data-ttu-id="bf9a6-167">Маркеры SAS</span><span class="sxs-lookup"><span data-stu-id="bf9a6-167">SAS tokens</span></span>

<span data-ttu-id="bf9a6-168">Концентраторы событий используют *подписей общего доступа*, они доступны на уровне концентратора hello пространства имен и событий.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-168">Event Hubs uses *Shared Access Signatures*, which are available at hello namespace and event hub level.</span></span> <span data-ttu-id="bf9a6-169">Маркер SAS создается на основе ключа SAS и хэша SHA URL-адреса, закодированного в определенном формате.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-169">A SAS token is generated from a SAS key and is an SHA hash of a URL, encoded in a specific format.</span></span> <span data-ttu-id="bf9a6-170">С помощью hello имени ключа hello (политика) и маркер hello, концентраторов событий можно повторно создать хэш hello и таким образом проверить подлинность отправителя hello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-170">Using hello name of hello key (policy) and hello token, Event Hubs can regenerate hello hash and thus authenticate hello sender.</span></span> <span data-ttu-id="bf9a6-171">Как правило, маркеры SAS для издателей событий создаются только с правом **отправки** конкретному концентратору событий.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-171">Normally, SAS tokens for event publishers are created with only **send** privileges on a specific event hub.</span></span> <span data-ttu-id="bf9a6-172">Этот URL-адрес механизм маркера SAS является основой hello для идентификации издателя, представленной в политике издателя hello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-172">This SAS token URL mechanism is hello basis for publisher identification introduced in hello publisher policy.</span></span> <span data-ttu-id="bf9a6-173">Дополнительные сведения о работе с SAS см. в статье [Проверка подлинности подписи при общем доступе с помощью служебной шины](../service-bus-messaging/service-bus-sas.md).</span><span class="sxs-lookup"><span data-stu-id="bf9a6-173">For more information about working with SAS, see [Shared Access Signature Authentication with Service Bus](../service-bus-messaging/service-bus-sas.md).</span></span>

## <a name="event-consumers"></a><span data-ttu-id="bf9a6-174">Получатели событий</span><span class="sxs-lookup"><span data-stu-id="bf9a6-174">Event consumers</span></span>

<span data-ttu-id="bf9a6-175">Любая сущность, считывающая данные из концентратора событий, является *потребителем событий*.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-175">Any entity that reads event data from an event hub is an *event consumer*.</span></span> <span data-ttu-id="bf9a6-176">Все потребители концентраторов событий подключение через сеанс AMQP 1.0 hello и как они станут доступны через сеанс hello доставляются события.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-176">All Event Hubs consumers connect via hello AMQP 1.0 session and events are delivered through hello session as they become available.</span></span> <span data-ttu-id="bf9a6-177">Hello клиенту не требуется toopoll для обеспечения доступности данных.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-177">hello client does not need toopoll for data availability.</span></span>

### <a name="consumer-groups"></a><span data-ttu-id="bf9a6-178">Группы получателей</span><span class="sxs-lookup"><span data-stu-id="bf9a6-178">Consumer groups</span></span>

<span data-ttu-id="bf9a6-179">механизм публикации и подписки Hello концентраторов событий осуществляется за счет *групп потребителей*.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-179">hello publish/subscribe mechanism of Event Hubs is enabled through *consumer groups*.</span></span> <span data-ttu-id="bf9a6-180">Группа потребителей — это представление всего концентратора событий (состояние, позиция или смещение).</span><span class="sxs-lookup"><span data-stu-id="bf9a6-180">A consumer group is a view (state, position, or offset) of an entire event hub.</span></span> <span data-ttu-id="bf9a6-181">Группы потребителей позволяют нескольких приложений tooeach иметь отдельное представление потока событий hello и tooread hello поток независимо друг от друга в своем темпе и с их собственных смещения.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-181">Consumer groups enable multiple consuming applications tooeach have a separate view of hello event stream, and tooread hello stream independently at their own pace and with their own offsets.</span></span>

<span data-ttu-id="bf9a6-182">В архитектуре потоковой обработки каждое внутреннее приложение соответствует группе потребителей tooa.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-182">In a stream processing architecture, each downstream application equates tooa consumer group.</span></span> <span data-ttu-id="bf9a6-183">Если вы хотите toowrite хранения toolong термин данных событий, то группы потребителей, приложение записи в хранилище.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-183">If you want toowrite event data toolong-term storage, then that storage writer application is a consumer group.</span></span> <span data-ttu-id="bf9a6-184">Сложную обработку событий затем может выполнить еще одна (отдельная) группа потребителей.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-184">Complex event processing can then be performed by another, separate consumer group.</span></span> <span data-ttu-id="bf9a6-185">К секции можно обращаться только через группу потребителей.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-185">You can only access partitions through a consumer group.</span></span> <span data-ttu-id="bf9a6-186">В секции для каждой группы потребителей может существовать не более пяти одновременных считывателей. Однако **рекомендуется, чтобы в секции для каждой группы потребителей поддерживался только один активный получатель**.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-186">There can be at most 5 concurrent readers on a partition per consumer group; however **it is recommended that there is only one active receiver on a partition per consumer group**.</span></span> <span data-ttu-id="bf9a6-187">В концентраторе событий всегда имеется группа потребителей по умолчанию, и можно создать копию too20 групп потребителей концентратора событий уровня Standard.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-187">There is always a default consumer group in an event hub, and you can create up too20 consumer groups for a Standard tier event hub.</span></span>

<span data-ttu-id="bf9a6-188">Hello ниже приведены примеры применения URI группы потребителей hello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-188">hello following are examples of hello consumer group URI convention:</span></span>

```http
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #1]
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #2]
```

<span data-ttu-id="bf9a6-189">Hello следующем рисунке показана архитектура обработки hello концентраторов событий потока.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-189">hello following figure shows hello Event Hubs stream processing architecture:</span></span>

![Концентраторы событий](./media/event-hubs-features/event_hubs_architecture.png)

### <a name="stream-offsets"></a><span data-ttu-id="bf9a6-191">Смещение потока</span><span class="sxs-lookup"><span data-stu-id="bf9a6-191">Stream offsets</span></span>

<span data-ttu-id="bf9a6-192">*Смещение* — hello положение события в секции.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-192">An *offset* is hello position of an event within a partition.</span></span> <span data-ttu-id="bf9a6-193">Смещение можно представить как клиентский курсор.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-193">You can think of an offset as a client-side cursor.</span></span> <span data-ttu-id="bf9a6-194">Hello смещение является байт нумерации hello события.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-194">hello offset is a byte numbering of hello event.</span></span> <span data-ttu-id="bf9a6-195">Это смещение позволяет toospecify потребителя (чтения) событие точки в потоке событий hello, из которого они должны toobegin чтение событий.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-195">This offset enables an event consumer (reader) toospecify a point in hello event stream from which they want toobegin reading events.</span></span> <span data-ttu-id="bf9a6-196">Можно указать смещение hello как отметки времени или значения смещения.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-196">You can specify hello offset as a timestamp or as an offset value.</span></span> <span data-ttu-id="bf9a6-197">Потребители несут ответственность за хранение своих собственных значений смещения вне службы концентраторов событий hello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-197">Consumers are responsible for storing their own offset values outside of hello Event Hubs service.</span></span> <span data-ttu-id="bf9a6-198">В секции каждое событие включает смещение.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-198">Within a partition, each event includes an offset.</span></span>

![Концентраторы событий](./media/event-hubs-features/partition_offset.png)

### <a name="checkpointing"></a><span data-ttu-id="bf9a6-200">Контрольные точки</span><span class="sxs-lookup"><span data-stu-id="bf9a6-200">Checkpointing</span></span>

<span data-ttu-id="bf9a6-201">*Создание контрольных точек* — это процесс, с помощью которого модули чтения помечают или фиксируют свое положение в последовательности событий секции.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-201">*Checkpointing* is a process by which readers mark or commit their position within a partition event sequence.</span></span> <span data-ttu-id="bf9a6-202">Контрольные точки hello ответственность потребителя hello и выполняется на основе каждого раздела в группе потребителей.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-202">Checkpointing is hello responsibility of hello consumer and occurs on a per-partition basis within a consumer group.</span></span> <span data-ttu-id="bf9a6-203">Эту ответственность на себя означает, что для каждой группы потребителей каждый считыватель раздела должен отслеживать ее текущей позиции в потоке событий hello и могло бы сообщить службе hello завершении передачи потока данных hello завершения.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-203">This responsibility means that for each consumer group, each partition reader must keep track of its current position in hello event stream, and can inform hello service when it considers hello data stream complete.</span></span>

<span data-ttu-id="bf9a6-204">Если считыватель отключается от раздела, при повторном подключении он приступает к чтению с hello контрольной точки, которая ранее была отправлена hello последнего чтения этого раздела в данной группе потребителей.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-204">If a reader disconnects from a partition, when it reconnects it begins reading at hello checkpoint that was previously submitted by hello last reader of that partition in that consumer group.</span></span> <span data-ttu-id="bf9a6-205">При подключении считыватель hello, он передает это расположение смещения toohello события концентратора toospecify hello в какие toostart чтения.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-205">When hello reader connects, it passes this offset toohello event hub toospecify hello location at which toostart reading.</span></span> <span data-ttu-id="bf9a6-206">Таким образом можно использовать назначение контрольных точек tooboth отмечать события как «завершить» принимающими приложениями и происходит tooprovide устойчивости, если отработки отказа между считывателями, запущенными на разных компьютерах.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-206">In this way, you can use checkpointing tooboth mark events as "complete" by downstream applications, and tooprovide resiliency if a failover between readers running on different machines occurs.</span></span> <span data-ttu-id="bf9a6-207">Это возможно tooreturn tooolder данные путем указания нижнее смещение из этого процесса назначения контрольных точек.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-207">It is possible tooreturn tooolder data by specifying a lower offset from this checkpointing process.</span></span> <span data-ttu-id="bf9a6-208">В рамках такого подхода при создании контрольных точек вы обеспечиваете отказоустойчивость и воспроизведение потока событий.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-208">Through this mechanism, checkpointing enables both failover resiliency and event stream replay.</span></span>

### <a name="common-consumer-tasks"></a><span data-ttu-id="bf9a6-209">Стандартные задачи потребителя</span><span class="sxs-lookup"><span data-stu-id="bf9a6-209">Common consumer tasks</span></span>

<span data-ttu-id="bf9a6-210">Все потребители концентраторов событий подключаются через двунаправленный канал связи с поддержкой состояния и сеанса AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-210">All Event Hubs consumers connect via an AMQP 1.0 session, a state-aware bidirectional communication channel.</span></span> <span data-ttu-id="bf9a6-211">Каждая секция имеет сеанс AMQP 1.0, который облегчает транспорта hello событий изолированная секцией.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-211">Each partition has an AMQP 1.0 session that facilitates hello transport of events segregated by partition.</span></span>

#### <a name="connect-tooa-partition"></a><span data-ttu-id="bf9a6-212">Подключение tooa секции</span><span class="sxs-lookup"><span data-stu-id="bf9a6-212">Connect tooa partition</span></span>

<span data-ttu-id="bf9a6-213">При подключении toopartitions, это общие toouse рекомендаций Аренда механизм toocoordinate чтения соединения toospecific секций.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-213">When connecting toopartitions, it is common practice toouse a leasing mechanism toocoordinate reader connections toospecific partitions.</span></span> <span data-ttu-id="bf9a6-214">Таким образом, можно для каждой секции, в потребителя группы toohave только один активный считыватель.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-214">This way, it is possible for every partition in a consumer group toohave only one active reader.</span></span> <span data-ttu-id="bf9a6-215">Контрольные точки, аренда и управление читатели упрощается с помощью hello [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) класс для клиентов .NET.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-215">Checkpointing, leasing, and managing readers are simplified by using hello [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) class for .NET clients.</span></span> <span data-ttu-id="bf9a6-216">Hello узел обработчика событий является это интеллектуальный агент потребителя.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-216">hello Event Processor Host is an intelligent consumer agent.</span></span>

#### <a name="read-events"></a><span data-ttu-id="bf9a6-217">Чтение событий</span><span class="sxs-lookup"><span data-stu-id="bf9a6-217">Read events</span></span>

<span data-ttu-id="bf9a6-218">После открытия сеанса AMQP 1.0 и ссылка для определенной секции события доставляются клиента toohello AMQP 1.0 с hello службы концентраторов событий.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-218">After an AMQP 1.0 session and link is opened for a specific partition, events are delivered toohello AMQP 1.0 client by hello Event Hubs service.</span></span> <span data-ttu-id="bf9a6-219">Этот механизм доставки обеспечивает более высокую пропускную способность и меньшую задержку, чем механизмы извлечения по запросу, такие как HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-219">This delivery mechanism enables higher throughput and lower latency than pull-based mechanisms such as HTTP GET.</span></span> <span data-ttu-id="bf9a6-220">Как события отправляются toohello клиента, каждому экземпляру данных события содержатся важные метаданные, например hello смещение и порядковый номер, назначение контрольных точек используется toofacilitate на hello последовательность событий.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-220">As events are sent toohello client, each event data instance contains important metadata such as hello offset and sequence number that are used toofacilitate checkpointing on hello event sequence.</span></span>

<span data-ttu-id="bf9a6-221">Данные событий</span><span class="sxs-lookup"><span data-stu-id="bf9a6-221">Event data:</span></span>
* <span data-ttu-id="bf9a6-222">Offset</span><span class="sxs-lookup"><span data-stu-id="bf9a6-222">Offset</span></span>
* <span data-ttu-id="bf9a6-223">Порядковый номер</span><span class="sxs-lookup"><span data-stu-id="bf9a6-223">Sequence number</span></span>
* <span data-ttu-id="bf9a6-224">Текст</span><span class="sxs-lookup"><span data-stu-id="bf9a6-224">Body</span></span>
* <span data-ttu-id="bf9a6-225">Свойства пользователя</span><span class="sxs-lookup"><span data-stu-id="bf9a6-225">User properties</span></span>
* <span data-ttu-id="bf9a6-226">Свойства системы</span><span class="sxs-lookup"><span data-stu-id="bf9a6-226">System properties</span></span>

<span data-ttu-id="bf9a6-227">Это смещение hello toomanage вашей ответственности.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-227">It is your responsibility toomanage hello offset.</span></span>

## <a name="capacity"></a><span data-ttu-id="bf9a6-228">Capacity</span><span class="sxs-lookup"><span data-stu-id="bf9a6-228">Capacity</span></span>

<span data-ttu-id="bf9a6-229">Концентраторы событий располагают высокомасштабируемую параллельную архитектуру и имеется несколько ключевых факторов tooconsider при изменении размера и масштабирование.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-229">Event Hubs has a highly scalable parallel architecture and there are several key factors tooconsider when sizing and scaling.</span></span>

### <a name="throughput-units"></a><span data-ttu-id="bf9a6-230">Единицы пропускной способности</span><span class="sxs-lookup"><span data-stu-id="bf9a6-230">Throughput units</span></span>

<span data-ttu-id="bf9a6-231">Hello пропускной способности концентраторов событий контролируется *единиц производительности*.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-231">hello throughput capacity of Event Hubs is controlled by *throughput units*.</span></span> <span data-ttu-id="bf9a6-232">Единицы пропускной способности — это предварительно приобретенные единицы емкости.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-232">Throughput units are pre-purchased units of capacity.</span></span> <span data-ttu-id="bf9a6-233">Единица производительности включает следующие емкости hello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-233">A single throughput unit includes hello following capacity:</span></span>

* <span data-ttu-id="bf9a6-234">Входящие: копирование too1 МБ в секунду или 1 000 событий в секунду (что произойдет первым)</span><span class="sxs-lookup"><span data-stu-id="bf9a6-234">Ingress: Up too1 MB per second or 1000 events per second (whichever comes first)</span></span>
* <span data-ttu-id="bf9a6-235">Исходящий трафик: копирование too2 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="bf9a6-235">Egress: Up too2 MB per second</span></span>

<span data-ttu-id="bf9a6-236">Превышена максимальная емкость hello объекта hello, приобретенных единиц производительности, входящие показатели регулируются и [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) возвращается.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-236">Beyond hello capacity of hello purchased throughput units, ingress is throttled and a [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) is returned.</span></span> <span data-ttu-id="bf9a6-237">Исходящие данные не создают исключений регулирования, но по-прежнему ограничено toohello емкость hello, приобретенных единиц производительности.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-237">Egress does not produce throttling exceptions, but is still limited toohello capacity of hello purchased throughput units.</span></span> <span data-ttu-id="bf9a6-238">При возникновении исключений скорости публикации или ожидаются высокие исходящие показатели toosee Будьте toocheck убедиться, что количество единиц производительности, приобретенных для пространства имен hello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-238">If you receive publishing rate exceptions or are expecting toosee higher egress, be sure toocheck how many throughput units you have purchased for hello namespace.</span></span> <span data-ttu-id="bf9a6-239">Вы можете управлять единиц на hello **шкалы** колонке hello пространств имен в hello [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="bf9a6-239">You can manage throughput units on hello **Scale** blade of hello namespaces in hello [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="bf9a6-240">Также можно управлять программно с помощью hello единиц производительности [API-интерфейсов концентраторы событий](event-hubs-api-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bf9a6-240">You can also manage throughput units programmatically using hello [Event Hubs APIs](event-hubs-api-overview.md).</span></span>

<span data-ttu-id="bf9a6-241">Единицы пропускной способности тарифицируются почасово и приобретаются заранее.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-241">Throughput units are billed per hour and are pre-purchased.</span></span> <span data-ttu-id="bf9a6-242">После приобретения единицы пропускной способности тарифицируются минимум за один час.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-242">Once purchased, throughput units are billed for a minimum of one hour.</span></span> <span data-ttu-id="bf9a6-243">Копирование too20 единицы пропускной способности концентраторов событий пространства имен можно приобрести и являются общими для всех концентраторов событий в пространстве имен hello.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-243">Up too20 throughput units can be purchased for an Event Hubs namespace and are shared across all Event Hubs in hello namespace.</span></span>

<span data-ttu-id="bf9a6-244">Дополнительные единицы производительности может быть приобретен с блоками по 20 too100 единицы пропускной способности, обратившись в службу поддержки Azure.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-244">More throughput units can be purchased in blocks of 20, up too100 throughput units, by contacting Azure support.</span></span> <span data-ttu-id="bf9a6-245">Кроме того, вы можете приобрести блоки на 100 единиц пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-245">Beyond that, you can also purchase blocks of 100 throughput units.</span></span>

<span data-ttu-id="bf9a6-246">Корпорация Майкрософт рекомендует регулировать пропускную способность единиц измерения и секции tooachieve оптимального масштабирования.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-246">We recommend that you balance throughput units and partitions tooachieve optimal scale.</span></span> <span data-ttu-id="bf9a6-247">Одна секция имеет максимальный масштаб в размере одной единицы пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-247">A single partition has a maximum scale of one throughput unit.</span></span> <span data-ttu-id="bf9a6-248">Hello количество единиц производительности должно быть меньше или равно toohello количество разделов в концентраторе событий.</span><span class="sxs-lookup"><span data-stu-id="bf9a6-248">hello number of throughput units should be less than or equal toohello number of partitions in an event hub.</span></span>

<span data-ttu-id="bf9a6-249">Подробные сведения о ценах см. на странице [цен на концентраторы событий](https://azure.microsoft.com/pricing/details/event-hubs/).</span><span class="sxs-lookup"><span data-stu-id="bf9a6-249">For detailed Event Hubs pricing information, see [Event Hubs pricing](https://azure.microsoft.com/pricing/details/event-hubs/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="bf9a6-250">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="bf9a6-250">Next steps</span></span>

<span data-ttu-id="bf9a6-251">Дополнительные сведения о концентраторах событий посетите hello ссылкам:</span><span class="sxs-lookup"><span data-stu-id="bf9a6-251">For more information about Event Hubs, visit hello following links:</span></span>

* <span data-ttu-id="bf9a6-252">Начните работу с [руководства по концентраторам событий][Event Hubs tutorial]</span><span class="sxs-lookup"><span data-stu-id="bf9a6-252">Get started with an [Event Hubs tutorial][Event Hubs tutorial]</span></span>
* [<span data-ttu-id="bf9a6-253">Руководство по программированию концентраторов событий</span><span class="sxs-lookup"><span data-stu-id="bf9a6-253">Event Hubs programming guide</span></span>](event-hubs-programming-guide.md)
* [<span data-ttu-id="bf9a6-254">Доступность и согласованность в концентраторах событий</span><span class="sxs-lookup"><span data-stu-id="bf9a6-254">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="bf9a6-255">Часто задаваемые вопросы о концентраторах событий</span><span class="sxs-lookup"><span data-stu-id="bf9a6-255">Event Hubs FAQ</span></span>](event-hubs-faq.md)
* <span data-ttu-id="bf9a6-256">[Примеры концентраторов событий][]</span><span class="sxs-lookup"><span data-stu-id="bf9a6-256">[Event Hubs samples][]</span></span>

[Event Hubs tutorial]: event-hubs-dotnet-standard-getstarted-send.md
[Примеры концентраторов событий]: https://github.com/Azure/azure-event-hubs/tree/master/samples
