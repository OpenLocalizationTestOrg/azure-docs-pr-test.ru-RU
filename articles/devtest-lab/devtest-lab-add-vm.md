---
title: "Добавление виртуальной машины в лабораторию в Azure DevTest Labs | Документация Майкрософт"
description: "Узнайте, как добавить виртуальную машину в лабораторию в Azure DevTest Labs"
services: devtest-lab,virtual-machines
documentationcenter: na
author: tomarcher
manager: douge
editor: 
ms.assetid: 
ms.service: devtest-lab
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/24/2017
ms.author: tarcher
ms.openlocfilehash: 449bffb040dafc8edd0b8b0afd80dbea35cd28ac
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="add-a-vm-to-a-lab-in-azure-devtest-labs"></a><span data-ttu-id="740c5-103">Добавление виртуальной машины в лабораторию в Azure DevTest Labs</span><span class="sxs-lookup"><span data-stu-id="740c5-103">Add a VM to a lab in Azure DevTest Labs</span></span>
<span data-ttu-id="740c5-104">Если вы уже [создали свою первую виртуальную машину](devtest-lab-create-first-vm.md), скорее всего, вы использовали предварительно загруженный [образ Мarketplace](devtest-lab-configure-marketplace-images.md).</span><span class="sxs-lookup"><span data-stu-id="740c5-104">If you have already [created your first VM](devtest-lab-create-first-vm.md), you likely did so from a pre-loaded [marketplace image](devtest-lab-configure-marketplace-images.md).</span></span> <span data-ttu-id="740c5-105">Теперь, если вы хотите добавить в лабораторию больше виртуальных машин, вы также можно использовать *базовый образ* — [пользовательский образа](devtest-lab-create-template.md) или [формулу](devtest-lab-manage-formulas.md).</span><span class="sxs-lookup"><span data-stu-id="740c5-105">Now, if you want to add subsequent VMs to your lab, you can also choose a *base* that is either a [custom image](devtest-lab-create-template.md) or a [formula](devtest-lab-manage-formulas.md).</span></span> <span data-ttu-id="740c5-106">В данном руководстве описывается добавление виртуальной машины в лабораторию в DevTest Labs с помощью портала Azure.</span><span class="sxs-lookup"><span data-stu-id="740c5-106">This tutorial walks you through using the Azure portal to add a VM to a lab in DevTest Labs.</span></span>

<span data-ttu-id="740c5-107">В этой статье также описывается управление артефактами для виртуальной машины в лаборатории.</span><span class="sxs-lookup"><span data-stu-id="740c5-107">This article also shows you how to manage the artifacts for a VM in your lab.</span></span>

## <a name="steps-to-add-a-vm-to-a-lab-in-azure-devtest-labs"></a><span data-ttu-id="740c5-108">Добавление виртуальной машины в лабораторию в Azure DevTest Labs</span><span class="sxs-lookup"><span data-stu-id="740c5-108">Steps to add a VM to a lab in Azure DevTest Labs</span></span>
1. <span data-ttu-id="740c5-109">Войдите на [портал Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040).</span><span class="sxs-lookup"><span data-stu-id="740c5-109">Sign in to the [Azure portal](http://go.microsoft.com/fwlink/p/?LinkID=525040).</span></span>
1. <span data-ttu-id="740c5-110">Щелкните **Больше служб**, а затем выберите в списке **DevTest Labs**.</span><span class="sxs-lookup"><span data-stu-id="740c5-110">Select **More Services**, and then select **DevTest Labs** from the list.</span></span>
1. <span data-ttu-id="740c5-111">Из списка лабораторий выберите ту, в которой необходимо создать виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="740c5-111">From the list of labs, select the lab in which you want to create the VM.</span></span>  
1. <span data-ttu-id="740c5-112">В колонке лаборатории **Обзор** выберите **+ Добавить**.</span><span class="sxs-lookup"><span data-stu-id="740c5-112">On the lab's **Overview** blade, select **+ Add**.</span></span>  

    ![Кнопка добавления виртуальной машины](./media/devtest-lab-add-vm/devtestlab-home-blade-add-vm.png)

1. <span data-ttu-id="740c5-114">В колонке **Выбор основы** выберите основу для виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="740c5-114">On the **Choose a base** blade, select a base for the VM.</span></span>
1. <span data-ttu-id="740c5-115">В колонке **Виртуальная машина** введите имя для новой виртуальной машины в текстовое поле **Имя виртуальной машины**.</span><span class="sxs-lookup"><span data-stu-id="740c5-115">On the **Virtual machine** blade, enter a name for the new virtual machine in the **Virtual machine name** text box.</span></span>

    ![Колонка виртуальной машины лаборатории](./media/devtest-lab-add-vm/devtestlab-lab-vm-blade.png)

1. <span data-ttu-id="740c5-117">Введите **имя пользователя**, которому будут предоставлены права администратора на виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="740c5-117">Enter a **User Name** that is granted administrator privileges on the virtual machine.</span></span>  
1. <span data-ttu-id="740c5-118">Если вы хотите использовать пароль, хранящийся в [хранилище секретов](https://azure.microsoft.com/updates/azure-devtest-labs-keep-your-secrets-safe-and-easy-to-use-with-the-new-personal-secret-store), тогда выберите **Use a saved secret** (Использовать сохраненный секрет) и укажите значение ключа, которое соответствует секрету (пароль).</span><span class="sxs-lookup"><span data-stu-id="740c5-118">If you want to use a password stored in your [secret store](https://azure.microsoft.com/updates/azure-devtest-labs-keep-your-secrets-safe-and-easy-to-use-with-the-new-personal-secret-store), select **Use a saved secret**, and specify a key value that corresponds to your secret (password).</span></span> <span data-ttu-id="740c5-119">В противном случае — просто введите пароль в текстовое поле, в котором указано **Введите значение**.</span><span class="sxs-lookup"><span data-stu-id="740c5-119">Otherwise, enter a password in the text field labeled **Type a value**.</span></span>
1. <span data-ttu-id="740c5-120">**Virtual machine disk type** (Тип диска виртуальной машины) определяет, какой тип диска хранилища поддерживается для виртуальных машин в лаборатории.</span><span class="sxs-lookup"><span data-stu-id="740c5-120">The **Virtual machine disk type** determines which storage disk type is allowed for the virtual machines in the lab.</span></span>
1. <span data-ttu-id="740c5-121">Щелкните **Размер виртуальной машины** и выберите один из стандартных пунктов, указывающих количество ядер процессора, объем ОЗУ и размер жесткого диска для создаваемой виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="740c5-121">Select **Virtual machine size** and select one of the predefined items that specify the processor cores, RAM size, and the hard drive size of the VM to create.</span></span>
1. <span data-ttu-id="740c5-122">Щелкните **Артефакты**, а затем выберите из списка и настройте артефакты, которые нужно добавить в базовый образ.</span><span class="sxs-lookup"><span data-stu-id="740c5-122">Select **Artifacts** and - from the list of artifacts - select and configure the artifacts that you want to add to the base image.</span></span>
    <span data-ttu-id="740c5-123">**Примечание.** Если вы незнакомы с DevTest Labs или настройкой артефактов, перейдите к разделу [Добавление существующего артефакта к виртуальной машине](#add-an-existing-artifact-to-a-vm), а затем вернитесь в этот раздел.</span><span class="sxs-lookup"><span data-stu-id="740c5-123">**Note:** If you're new to DevTest Labs or configuring artifacts, refer to the [Add an existing artifact to a VM](#add-an-existing-artifact-to-a-vm) section, and then return here when finished.</span></span>
1. <span data-ttu-id="740c5-124">Чтобы настроить сетевые параметры виртуальной машины и срок ее действия, выберите **Дополнительные параметры**.</span><span class="sxs-lookup"><span data-stu-id="740c5-124">Select **Advanced settings** to configure the VM's network options and expiration options.</span></span> 

   <span data-ttu-id="740c5-125">Чтобы задать срок действия, щелкните значок календаря и укажите дату, в которую виртуальная машина будет автоматически удалена.</span><span class="sxs-lookup"><span data-stu-id="740c5-125">To set an expiration option, choose the calendar icon to specify a date on which the VM will be automatically deleted.</span></span>  <span data-ttu-id="740c5-126">По умолчанию виртуальная машина является бессрочной.</span><span class="sxs-lookup"><span data-stu-id="740c5-126">By default, the VM will never expire.</span></span> 
1. <span data-ttu-id="740c5-127">Если вы хотите просмотреть или скопировать шаблон Azure Resource Manager, перейдите к разделу [Сохранение шаблона Azure Resource Manager](#save-azure-resource-manager-template), а по завершении вернитесь сюда.</span><span class="sxs-lookup"><span data-stu-id="740c5-127">If you want to view or copy the Azure Resource Manager template, refer to the [Save Azure Resource Manager template](#save-azure-resource-manager-template) section, and return here when finished.</span></span>
1. <span data-ttu-id="740c5-128">Щелкните **Создать** , чтобы добавить в лабораторию указанную виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="740c5-128">Select **Create** to add the specified VM to the lab.</span></span>
1. <span data-ttu-id="740c5-129">В колонке лаборатории отображается состояние создания виртуальной машины. Сначала это состояние **Создается**, а после запуска виртуальной машины — **Выполняется**.</span><span class="sxs-lookup"><span data-stu-id="740c5-129">The lab blade displays the status of the VM's creation - first as **Creating**, then as **Running** after the VM has been started.</span></span>

> [!NOTE]
> <span data-ttu-id="740c5-130">Описание процесса [добавления запрашиваемой виртуальной машины](devtest-lab-add-claimable-vm.md) поможет создать запрашиваемую виртуальную машину, которую смогут использовать вcе пользователи в лаборатории.</span><span class="sxs-lookup"><span data-stu-id="740c5-130">[Add a claimable VM](devtest-lab-add-claimable-vm.md) shows you how to make the VM claimable so that it is available for use by any user in the lab.</span></span>
>
>

## <a name="add-an-existing-artifact-to-a-vm"></a><span data-ttu-id="740c5-131">Добавление существующего артефакта к виртуальной машине</span><span class="sxs-lookup"><span data-stu-id="740c5-131">Add an existing artifact to a VM</span></span>
<span data-ttu-id="740c5-132">Существующие артефакты можно добавить при создании виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="740c5-132">While creating a VM, you can add existing artifacts.</span></span> <span data-ttu-id="740c5-133">Каждая лаборатория включает в себя артефакты из общедоступного репозитория артефактов DevTest Labs, а также артефакты, созданные и добавленные в ваш собственный репозиторий артефактов.</span><span class="sxs-lookup"><span data-stu-id="740c5-133">Each lab includes artifacts from the Public DevTest Labs Artifact Repository as well as artifacts that you've created and added to your own Artifact Repository.</span></span>

* <span data-ttu-id="740c5-134">*Артефакты* Azure DevTest Labs позволяют указывать *действия*, которые выполняются при подготовке виртуальной машины, включая запуск скриптов Windows PowerShell, выполнение команд Bash и установку программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="740c5-134">Azure DevTest Labs *artifacts* let you specify *actions* that are performed when the VM is provisioned, such as running Windows PowerShell scripts, running Bash commands, and installing software.</span></span>
* <span data-ttu-id="740c5-135">*Параметры* артефакта позволяют настроить артефакт для определенной ситуации.</span><span class="sxs-lookup"><span data-stu-id="740c5-135">Artifact *parameters* let you customize the artifact for your particular scenario</span></span>

<span data-ttu-id="740c5-136">Дополнительные сведения о создании артефактов см. в статье [Создание пользовательских артефактов для виртуальной машины DevTest Lab](devtest-lab-artifact-author.md).</span><span class="sxs-lookup"><span data-stu-id="740c5-136">To discover how to create artifacts, see the article, [Learn how to author your own artifacts for use with DevTest Labs](devtest-lab-artifact-author.md).</span></span>

1. <span data-ttu-id="740c5-137">Войдите на [портал Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040).</span><span class="sxs-lookup"><span data-stu-id="740c5-137">Sign in to the [Azure portal](http://go.microsoft.com/fwlink/p/?LinkID=525040).</span></span>
1. <span data-ttu-id="740c5-138">Щелкните **Больше служб**, а затем выберите в списке **DevTest Labs**.</span><span class="sxs-lookup"><span data-stu-id="740c5-138">Select **More Services**, and then select **DevTest Labs** from the list.</span></span>
1. <span data-ttu-id="740c5-139">Из списка лабораторий выберите ту, где содержится виртуальная машина, с которой вы будете работать.</span><span class="sxs-lookup"><span data-stu-id="740c5-139">From the list of labs, select the lab containing the VM with which you want to work.</span></span>  
1. <span data-ttu-id="740c5-140">Выберите **My virtual machines** (Мои виртуальные машины).</span><span class="sxs-lookup"><span data-stu-id="740c5-140">Select **My virtual machines**.</span></span>
1. <span data-ttu-id="740c5-141">Выберите нужную виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="740c5-141">Select the desired VM.</span></span>
1. <span data-ttu-id="740c5-142">Выберите **Артефакты**.</span><span class="sxs-lookup"><span data-stu-id="740c5-142">Select **Artifacts**.</span></span> 
1. <span data-ttu-id="740c5-143">Выберите **Apply artifacts** (Применить артефакты).</span><span class="sxs-lookup"><span data-stu-id="740c5-143">Select **Apply artifacts**.</span></span>
1. <span data-ttu-id="740c5-144">В колонке **Apply artifacts** (Применить артефакты) выберите артефакт для добавления к виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="740c5-144">On the **Apply artifacts** blade, select the artifact you wish to add to the VM.</span></span>
1. <span data-ttu-id="740c5-145">В колонке **Добавить артефакт** введите значения обязательных параметров и другие параметры по желанию.</span><span class="sxs-lookup"><span data-stu-id="740c5-145">On the **Add artifact** blade, enter the required parameter values and any optional parameters that you need.</span></span>  
1. <span data-ttu-id="740c5-146">Выберите **Добавить**, чтобы добавить артефакт и вернуться в колонку **Apply artifacts** (Применить артефакты).</span><span class="sxs-lookup"><span data-stu-id="740c5-146">Select **Add** to add the artifact and return to the **Apply artifacts** blade.</span></span>
1. <span data-ttu-id="740c5-147">Продолжайте добавлять артефакты, необходимые для виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="740c5-147">Continue adding artifacts as needed for your VM.</span></span>
1. <span data-ttu-id="740c5-148">После добавления артефактов можно [изменить порядок, в котором они выполняются](#change-the-order-in-which-artifacts-are-run).</span><span class="sxs-lookup"><span data-stu-id="740c5-148">Once you've added your artifacts, you can [change the order in which the artifacts are run](#change-the-order-in-which-artifacts-are-run).</span></span> <span data-ttu-id="740c5-149">Также можно вернуться к [просмотру или изменению артефакта](#view-or-modify-an-artifact).</span><span class="sxs-lookup"><span data-stu-id="740c5-149">You can also go back to [view or modify an artifact](#view-or-modify-an-artifact).</span></span>
1. <span data-ttu-id="740c5-150">После добавления артефактов выберите **Применить**.</span><span class="sxs-lookup"><span data-stu-id="740c5-150">When you're done adding artifacts, select **Apply**</span></span>

## <a name="change-the-order-in-which-artifacts-are-run"></a><span data-ttu-id="740c5-151">Изменение порядка выполнения артефактов</span><span class="sxs-lookup"><span data-stu-id="740c5-151">Change the order in which artifacts are run</span></span>
<span data-ttu-id="740c5-152">По умолчанию действия артефактов выполняются в порядке их добавления на виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="740c5-152">By default, the actions of the artifacts are executed in the order in which they are added to the VM.</span></span> <span data-ttu-id="740c5-153">Ниже показано, как изменить порядок, в котором выполняются артефакты.</span><span class="sxs-lookup"><span data-stu-id="740c5-153">The following steps illustrate how to change the order in which the artifacts are run.</span></span>

1. <span data-ttu-id="740c5-154">В верхней области колонки **Apply artifacts** (Применить артефакты) щелкните ссылку, указывающую количество добавленных к виртуальной машине артефактов.</span><span class="sxs-lookup"><span data-stu-id="740c5-154">At the top of the **Apply artifacts** blade, select the link indicating the number of artifacts that have been added to the VM.</span></span>
   
    ![Количество артефактов, добавленных к виртуальной машине](./media/devtest-lab-add-vm-with-artifacts/devtestlab-add-artifacts-blade-selected-artifacts.png)
1. <span data-ttu-id="740c5-156">В колонке **Selected artifacts** (Выбранные артефакты) перетащите артефакты в нужном порядке.</span><span class="sxs-lookup"><span data-stu-id="740c5-156">On the **Selected artifacts** blade, drag and drop the artifacts into the desired order.</span></span> <span data-ttu-id="740c5-157">**Примечание.** Если у вас возникли проблемы при перетаскивании артефактов, убедитесь, что вы перетаскиваете их за левую сторону.</span><span class="sxs-lookup"><span data-stu-id="740c5-157">**Note:** If you have trouble dragging the artifact, make sure that you are dragging from the left side of the artifact.</span></span> 
1. <span data-ttu-id="740c5-158">По окончании нажмите кнопку **ОК** .</span><span class="sxs-lookup"><span data-stu-id="740c5-158">Select **OK** when done.</span></span>  

## <a name="view-or-modify-an-artifact"></a><span data-ttu-id="740c5-159">просмотру или изменению артефакта</span><span class="sxs-lookup"><span data-stu-id="740c5-159">View or modify an artifact</span></span>
<span data-ttu-id="740c5-160">Для просмотра или изменения параметров артефакта выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="740c5-160">The following steps illustrate how to view or modify the parameters of an artifact:</span></span>

1. <span data-ttu-id="740c5-161">В верхней области колонки **Apply artifacts** (Применить артефакты) щелкните ссылку, указывающую количество добавленных к виртуальной машине артефактов.</span><span class="sxs-lookup"><span data-stu-id="740c5-161">At the top of the **Apply artifacts** blade, select the link indicating the number of artifacts that have been added to the VM.</span></span>
   
    ![Количество артефактов, добавленных к виртуальной машине](./media/devtest-lab-add-vm-with-artifacts/devtestlab-add-artifacts-blade-selected-artifacts.png)
1. <span data-ttu-id="740c5-163">В колонке **Selected artifacts** (Выбранные артефакты) выберите артефакт, который нужно просмотреть или изменить.</span><span class="sxs-lookup"><span data-stu-id="740c5-163">On the **Selected artifacts** blade, select the artifact that you want to view or edit.</span></span>  
1. <span data-ttu-id="740c5-164">В колонке **Добавить артефакт** внесите необходимые изменения, а затем нажмите кнопку **ОК**, чтобы закрыть колонку **Добавить артефакт**.</span><span class="sxs-lookup"><span data-stu-id="740c5-164">On the **Add artifact** blade, make any needed changes, and select **OK** to close the **Add artifact** blade.</span></span>
1. <span data-ttu-id="740c5-165">Нажмите кнопку **ОК**, чтобы закрыть колонку **Selected artifacts** (Выбранные артефакты).</span><span class="sxs-lookup"><span data-stu-id="740c5-165">Select **OK** to close the **Selected artifacts** blade.</span></span>

## <a name="save-azure-resource-manager-template"></a><span data-ttu-id="740c5-166">Сохранение шаблона Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="740c5-166">Save Azure Resource Manager template</span></span>
<span data-ttu-id="740c5-167">С помощью шаблона Azure Resource Manager можно декларативно определить повторяемое развертывание.</span><span class="sxs-lookup"><span data-stu-id="740c5-167">An Azure Resource Manager template provides a declarative way to define a repeatable deployment.</span></span> <span data-ttu-id="740c5-168">Далее описывается процесс сохранения шаблона Azure Resource Manager для создаваемой виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="740c5-168">The following steps explain how to save the Azure Resource Manager template for the VM being created.</span></span>
<span data-ttu-id="740c5-169">После сохранения шаблон Azure Resource Manager можно использовать для [развертывания новых виртуальных машин с помощью Azure PowerShell](../azure-resource-manager/resource-group-overview.md#template-deployment).</span><span class="sxs-lookup"><span data-stu-id="740c5-169">Once saved, you can use the Azure Resource Manager template to [deploy new VMs with Azure PowerShell](../azure-resource-manager/resource-group-overview.md#template-deployment).</span></span>

1. <span data-ttu-id="740c5-170">В колонке **Виртуальная машина** выберите **View ARM Template** (Просмотреть шаблон ARM).</span><span class="sxs-lookup"><span data-stu-id="740c5-170">On the **Virtual machine** blade, select **View ARM Template**.</span></span>
2. <span data-ttu-id="740c5-171">В колонке **View Azure Resource Manager template** (Просмотр шаблона Azure Resource Manager) выберите текст шаблона.</span><span class="sxs-lookup"><span data-stu-id="740c5-171">On the **View Azure Resource Manager template** blade, select the template text.</span></span>
3. <span data-ttu-id="740c5-172">Скопируйте выделенный текст в буфер обмена.</span><span class="sxs-lookup"><span data-stu-id="740c5-172">Copy the selected text to the clipboard.</span></span>
4. <span data-ttu-id="740c5-173">Нажмите кнопку **ОК**, чтобы закрыть колонку **View Azure Resource Manager Template** (Просмотр шаблона Azure Resource Manager).</span><span class="sxs-lookup"><span data-stu-id="740c5-173">Select **OK** to close the **View Azure Resource Manager Template blade**.</span></span>
5. <span data-ttu-id="740c5-174">Откройте текстовый редактор.</span><span class="sxs-lookup"><span data-stu-id="740c5-174">Open a text editor.</span></span>
6. <span data-ttu-id="740c5-175">Вставьте текст шаблона из буфера обмена.</span><span class="sxs-lookup"><span data-stu-id="740c5-175">Paste in the template text from the clipboard.</span></span>
7. <span data-ttu-id="740c5-176">Сохраните файл для последующего использования.</span><span class="sxs-lookup"><span data-stu-id="740c5-176">Save the file for later use.</span></span>

[!INCLUDE [devtest-lab-try-it-out](../../includes/devtest-lab-try-it-out.md)]

### <a name="next-steps"></a><span data-ttu-id="740c5-177">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="740c5-177">Next steps</span></span>
* <span data-ttu-id="740c5-178">После создания виртуальной машины к ней можно подключиться, щелкнув **Подключиться** в колонке виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="740c5-178">Once the VM has been created, you can connect to the VM by selecting **Connect** on the VM's blade.</span></span>
* <span data-ttu-id="740c5-179">Узнайте, как [создавать пользовательские артефакты для виртуальной машины DevTest Labs](devtest-lab-artifact-author.md).</span><span class="sxs-lookup"><span data-stu-id="740c5-179">Learn how to [create custom artifacts for your DevTest Labs VM](devtest-lab-artifact-author.md).</span></span>
* <span data-ttu-id="740c5-180">Изучите [коллекцию шаблонов быстрого запуска Azure Resource Manager для DevTest Labs](https://github.com/Azure/azure-devtestlab/tree/master/Samples).</span><span class="sxs-lookup"><span data-stu-id="740c5-180">Explore the [DevTest Labs Azure Resource Manager QuickStart template gallery](https://github.com/Azure/azure-devtestlab/tree/master/Samples).</span></span>
