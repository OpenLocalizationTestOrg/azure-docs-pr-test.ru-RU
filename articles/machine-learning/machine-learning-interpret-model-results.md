---
title: "Интерпретация результатов модели в машинном обучении | Документация Майкрософт"
description: "Выбор оптимального набора параметров для использования алгоритмов и визуализации выходных данных модели оценки."
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 6230e5ab-a5c0-4c21-a061-47675ba3342c
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/24/2017
ms.author: bradsev
ms.openlocfilehash: 939dd7b359b4f5c248ade47b794102f4930994b1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="interpret-model-results-in-azure-machine-learning"></a><span data-ttu-id="41bd0-103">Интерпретация результатов модели в машинном обучении Azure</span><span class="sxs-lookup"><span data-stu-id="41bd0-103">Interpret model results in Azure Machine Learning</span></span>
<span data-ttu-id="41bd0-104">В этой статье объясняется, как визуализировать и интерпретировать результаты прогнозирования в студии машинного обучения Azure.</span><span class="sxs-lookup"><span data-stu-id="41bd0-104">This topic explains how to visualize and interpret prediction results in Azure Machine Learning Studio.</span></span> <span data-ttu-id="41bd0-105">Когда вы обучите модель и получите с ее помощью прогнозы (оценки модели), этот результат нужно интерпретировать.</span><span class="sxs-lookup"><span data-stu-id="41bd0-105">After you have trained a model and done predictions on top of it ("scored the model"), you need to understand and interpret the prediction result.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

<span data-ttu-id="41bd0-106">Существует четыре основных типа машинного обучения моделей в Студии машинного обучения Azure:</span><span class="sxs-lookup"><span data-stu-id="41bd0-106">There are four major kinds of machine learning models in Azure Machine Learning:</span></span>

* <span data-ttu-id="41bd0-107">классификация;</span><span class="sxs-lookup"><span data-stu-id="41bd0-107">Classification</span></span>
* <span data-ttu-id="41bd0-108">кластеризация;</span><span class="sxs-lookup"><span data-stu-id="41bd0-108">Clustering</span></span>
* <span data-ttu-id="41bd0-109">регрессия;</span><span class="sxs-lookup"><span data-stu-id="41bd0-109">Regression</span></span>
* <span data-ttu-id="41bd0-110">системы рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="41bd0-110">Recommender systems</span></span>

<span data-ttu-id="41bd0-111">Модули, используемые для прогнозирования на основе этих моделей:</span><span class="sxs-lookup"><span data-stu-id="41bd0-111">The modules used for prediction on top of these models are:</span></span>

* <span data-ttu-id="41bd0-112">модуль [Score Model][score-model] (Оценка модели) для классификации и регрессии;</span><span class="sxs-lookup"><span data-stu-id="41bd0-112">[Score Model][score-model] module for classification and regression</span></span>
* <span data-ttu-id="41bd0-113">модуль [Assign to Clusters][assign-to-clusters] (Назначить в кластеры) для кластеризации;</span><span class="sxs-lookup"><span data-stu-id="41bd0-113">[Assign to Clusters][assign-to-clusters] module for clustering</span></span>
* <span data-ttu-id="41bd0-114">модуль [Score Matchbox Recommender][score-matchbox-recommender] (Оценка модели рекомендаций Matchbox) для систем рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="41bd0-114">[Score Matchbox Recommender][score-matchbox-recommender] for recommendation systems</span></span>

<span data-ttu-id="41bd0-115">В этом документе объясняется интерпретация результатов прогнозирования для каждого из этих модулей.</span><span class="sxs-lookup"><span data-stu-id="41bd0-115">This document explains how to interpret prediction results for each of these modules.</span></span> <span data-ttu-id="41bd0-116">Обзор этих модулей см. в статье [Как выбрать параметры для оптимизации алгоритмов в машинном обучении Azure](machine-learning-algorithm-parameters-optimize.md).</span><span class="sxs-lookup"><span data-stu-id="41bd0-116">For an overview of these modules, see [How to choose parameters to optimize your algorithms in Azure Machine Learning](machine-learning-algorithm-parameters-optimize.md).</span></span>

<span data-ttu-id="41bd0-117">В этом разделе рассматривается интерпретация прогноза, а не оценка модели.</span><span class="sxs-lookup"><span data-stu-id="41bd0-117">This topic addresses prediction interpretation but not model evaluation.</span></span> <span data-ttu-id="41bd0-118">Дополнительные сведения об оценке модели см. в статье [Оценка эффективности модели в машинном обучении Microsoft Azure](machine-learning-evaluate-model-performance.md).</span><span class="sxs-lookup"><span data-stu-id="41bd0-118">For more information about how to evaluate your model, see [How to evaluate model performance in Azure Machine Learning](machine-learning-evaluate-model-performance.md).</span></span>

<span data-ttu-id="41bd0-119">Если вы не работали с машинным обучением Azure и хотите узнать, как создавать эксперименты, см. статью [Руководство по машинному обучению. Создание первого эксперимента по обработке и анализу данных в студии машинного обучения Azure](machine-learning-create-experiment.md).</span><span class="sxs-lookup"><span data-stu-id="41bd0-119">If you are new to Azure Machine Learning and need help creating a simple experiment to get started, see [Create a simple experiment in Azure Machine Learning Studio](machine-learning-create-experiment.md) in Azure Machine Learning Studio.</span></span>

## <a name="classification"></a><span data-ttu-id="41bd0-120">классификация;</span><span class="sxs-lookup"><span data-stu-id="41bd0-120">Classification</span></span>
<span data-ttu-id="41bd0-121">Существует две подкатегории задач классификации:</span><span class="sxs-lookup"><span data-stu-id="41bd0-121">There are two subcategories of classification problems:</span></span>

* <span data-ttu-id="41bd0-122">задачи только с двумя классами (двухклассовая или двоичная классификация);</span><span class="sxs-lookup"><span data-stu-id="41bd0-122">Problems with only two classes (two-class or binary classification)</span></span>
* <span data-ttu-id="41bd0-123">задачи более чем с двумя классами (многоклассовая классификация).</span><span class="sxs-lookup"><span data-stu-id="41bd0-123">Problems with more than two classes (multi-class classification)</span></span>

<span data-ttu-id="41bd0-124">Хотя машинное обучение Azure содержит различные модули для работы с этими типами классификации, методы интерпретации прогнозных результатов для всех модулей похожи.</span><span class="sxs-lookup"><span data-stu-id="41bd0-124">Azure Machine Learning has different modules to deal with each of these types of classification, but the methods for interpreting their prediction results are similar.</span></span>

### <a name="two-class-classification"></a><span data-ttu-id="41bd0-125">Двуклассовая классификация</span><span class="sxs-lookup"><span data-stu-id="41bd0-125">Two-class classification</span></span>
<span data-ttu-id="41bd0-126">**Пример эксперимента**</span><span class="sxs-lookup"><span data-stu-id="41bd0-126">**Example experiment**</span></span>

<span data-ttu-id="41bd0-127">Пример проблемы с двухклассовой классификацией — классификация цветов ириса.</span><span class="sxs-lookup"><span data-stu-id="41bd0-127">An example of a two-class classification problem is the classification of iris flowers.</span></span> <span data-ttu-id="41bd0-128">Задача — классификация цветов ириса по их признакам.</span><span class="sxs-lookup"><span data-stu-id="41bd0-128">The task is to classify iris flowers based on their features.</span></span> <span data-ttu-id="41bd0-129">Набор данных Iris в машинном обучении Azure — это часть популярного набора [Ирисы Фишера](http://en.wikipedia.org/wiki/Iris_flower_data_set), которая содержит экземпляры только двух видов цветов (классы 0 и 1).</span><span class="sxs-lookup"><span data-stu-id="41bd0-129">The Iris data set provided in Azure Machine Learning is a subset of the popular [Iris data set](http://en.wikipedia.org/wiki/Iris_flower_data_set) containing instances of only two flower species (classes 0 and 1).</span></span> <span data-ttu-id="41bd0-130">Для каждого цветка можно выделить четыре признака: длина наружной доли околоцветника, ширина наружной доли околоцветника, длина внутренней доли околоцветника и ширина внутренней доли околоцветника.</span><span class="sxs-lookup"><span data-stu-id="41bd0-130">There are four features for each flower (sepal length, sepal width, petal length, and petal width).</span></span>

![Снимок экрана для эксперимента Iris](./media/machine-learning-interpret-model-results/1.png)

<span data-ttu-id="41bd0-132">Рисунок 1.</span><span class="sxs-lookup"><span data-stu-id="41bd0-132">Figure 1.</span></span> <span data-ttu-id="41bd0-133">Рис. 1. Эксперимент с задачей двухклассовой классификации цветков ириса</span><span class="sxs-lookup"><span data-stu-id="41bd0-133">Iris two-class classification problem experiment</span></span>

<span data-ttu-id="41bd0-134">Эксперимент для решения этой задачи проведен, как показано на рис. 1.</span><span class="sxs-lookup"><span data-stu-id="41bd0-134">An experiment has been performed to solve this problem, as shown in Figure 1.</span></span> <span data-ttu-id="41bd0-135">Модель повышенного дерева принятия решений двухклассовой классификации обучена и оценена.</span><span class="sxs-lookup"><span data-stu-id="41bd0-135">A two-class boosted decision tree model has been trained and scored.</span></span> <span data-ttu-id="41bd0-136">Теперь результаты прогноза модуля [Score Model][score-model] (Оценка модели) можно визуализировать. Для этого щелкните порт вывода модуля [Score Model][score-model] (Оценка модели) и в раскрывшемся меню выберите команду **Визуализировать**.</span><span class="sxs-lookup"><span data-stu-id="41bd0-136">Now you can visualize the prediction results from the [Score Model][score-model] module by clicking the output port of the [Score Model][score-model] module and then clicking **Visualize**.</span></span>

![Модуль оценки модели](./media/machine-learning-interpret-model-results/1_1.png)

<span data-ttu-id="41bd0-138">Это действие приводит к отображению результатов оценки, как показано на рис. 2.</span><span class="sxs-lookup"><span data-stu-id="41bd0-138">This brings up the scoring results as shown in Figure 2.</span></span>

![Результаты эксперимента с двухклассовой классификацией цветков ириса](./media/machine-learning-interpret-model-results/2.png)

<span data-ttu-id="41bd0-140">Рис. 2.</span><span class="sxs-lookup"><span data-stu-id="41bd0-140">Figure 2.</span></span> <span data-ttu-id="41bd0-141">Визуализация результата оценки модели для задачи двухклассовой классификации</span><span class="sxs-lookup"><span data-stu-id="41bd0-141">Visualize a score model result in two-class classification</span></span>

<span data-ttu-id="41bd0-142">**Интерпретация результатов**</span><span class="sxs-lookup"><span data-stu-id="41bd0-142">**Result interpretation**</span></span>

<span data-ttu-id="41bd0-143">В таблице результатов представлены шесть столбцов.</span><span class="sxs-lookup"><span data-stu-id="41bd0-143">There are six columns in the results table.</span></span> <span data-ttu-id="41bd0-144">Четыре столбца слева соответствуют четырем признакам.</span><span class="sxs-lookup"><span data-stu-id="41bd0-144">The left four columns are the four features.</span></span> <span data-ttu-id="41bd0-145">Два правых столбца — "Scored Labels" (Оцененные метки) и "Scored Probabilities" (Оцененные вероятности) — представляют результаты прогнозирования.</span><span class="sxs-lookup"><span data-stu-id="41bd0-145">The right two columns, Scored Labels and Scored Probabilities, are the prediction results.</span></span> <span data-ttu-id="41bd0-146">Столбец "Scored Probabilities" (Оцененные вероятности) отражает вероятность того, что цветок принадлежит к положительному классу (класс 1).</span><span class="sxs-lookup"><span data-stu-id="41bd0-146">The Scored Probabilities column shows the probability that a flower belongs to the positive class (Class 1).</span></span> <span data-ttu-id="41bd0-147">Например, первое число в этом столбце (0,028571) означает, что первый цветок принадлежит классу 1 с вероятностью 0,028571.</span><span class="sxs-lookup"><span data-stu-id="41bd0-147">For example, the first number in the column (0.028571) means there is 0.028571 probability that the first flower belongs to Class 1.</span></span> <span data-ttu-id="41bd0-148">Столбец «Метки оценки» содержит прогнозируемый класс для каждого из цветков.</span><span class="sxs-lookup"><span data-stu-id="41bd0-148">The Scored Labels column shows the predicted class for each flower.</span></span> <span data-ttu-id="41bd0-149">Этот прогноз основывается на столбце оценки вероятности.</span><span class="sxs-lookup"><span data-stu-id="41bd0-149">This is based on the Scored Probabilities column.</span></span> <span data-ttu-id="41bd0-150">Если оцененная вероятность составляет больше 0,5, прогнозируется принадлежность к классу 1.</span><span class="sxs-lookup"><span data-stu-id="41bd0-150">If the scored probability of a flower is larger than 0.5, it is predicted as Class 1.</span></span> <span data-ttu-id="41bd0-151">В противном случае прогнозируется принадлежность к классу 0.</span><span class="sxs-lookup"><span data-stu-id="41bd0-151">Otherwise, it is predicted as Class 0.</span></span>

<span data-ttu-id="41bd0-152">**Публикация в веб-службе**</span><span class="sxs-lookup"><span data-stu-id="41bd0-152">**Web service publication**</span></span>

<span data-ttu-id="41bd0-153">Если результаты прогнозирования выглядят понятными и убедительными, эксперимент можно опубликовать как веб-службу. Так вы сможете развертывать его в разных приложениях и прогнозировать принадлежность к классам новых цветков ириса.</span><span class="sxs-lookup"><span data-stu-id="41bd0-153">After the prediction results have been understood and judged sound, the experiment can be published as a web service so that you can deploy it in various applications and call it to obtain class predictions on any new iris flower.</span></span> <span data-ttu-id="41bd0-154">Сведения о том, как превратить обучающий эксперимент в оценивающий эксперимент и опубликовать его в виде веб-службы, см. здесь: [Шаг 5. Развертывание веб-службы машинного обучения Azure](machine-learning-walkthrough-5-publish-web-service.md).</span><span class="sxs-lookup"><span data-stu-id="41bd0-154">To learn how to change a training experiment into a scoring experiment and publish it as a web service, see [Publish the Azure Machine Learning web service](machine-learning-walkthrough-5-publish-web-service.md).</span></span> <span data-ttu-id="41bd0-155">Выполнив эту процедуру, вы получите оценивающий эксперимент, как показано на рис. 3.</span><span class="sxs-lookup"><span data-stu-id="41bd0-155">This procedure provides you with a scoring experiment as shown in Figure 3.</span></span>

![Снимок экрана с оценивающим экспериментом](./media/machine-learning-interpret-model-results/3.png)

<span data-ttu-id="41bd0-157">Рис. 3.</span><span class="sxs-lookup"><span data-stu-id="41bd0-157">Figure 3.</span></span> <span data-ttu-id="41bd0-158">Оценка эксперимента с задачей двухклассовой классификации цветков ириса</span><span class="sxs-lookup"><span data-stu-id="41bd0-158">Scoring the iris two-class classification problem experiment</span></span>

<span data-ttu-id="41bd0-159">Теперь вам нужно определить вход и выход для веб-службы.</span><span class="sxs-lookup"><span data-stu-id="41bd0-159">Now you need to set the input and output for the web service.</span></span> <span data-ttu-id="41bd0-160">Очевидно, что входные данные — правый входной порт модуля [Score Model][score-model] (Оценка модели), представляющий входные данные о признаках цветков ириса.</span><span class="sxs-lookup"><span data-stu-id="41bd0-160">The input is the right input port of [Score Model][score-model], which is the Iris flower features input.</span></span> <span data-ttu-id="41bd0-161">Выбор выхода зависит от того, что мы хотим получить: оцененную метку (прогнозируемый класс), оцененную вероятность или оба значения сразу.</span><span class="sxs-lookup"><span data-stu-id="41bd0-161">The choice of the output depends on whether you are interested in the predicted class (scored label), the scored probability, or both.</span></span> <span data-ttu-id="41bd0-162">В этом примере нас интересуют оба значения.</span><span class="sxs-lookup"><span data-stu-id="41bd0-162">In this example, it is assumed that you are interested in both.</span></span> <span data-ttu-id="41bd0-163">Чтобы выбрать нужные выходные столбцы, используйте модуль [Select Columns in Data set][select-columns] (Выбор столбцов в наборе данных).</span><span class="sxs-lookup"><span data-stu-id="41bd0-163">To select the desired output columns, use a [Select Columns in Data set][select-columns] module.</span></span> <span data-ttu-id="41bd0-164">Щелкните модуль [Select Columns in Data set][select-columns] (Выбор столбцов в наборе данных), затем — **Launch column selector** (Запустить средство выбора столбцов) и выберите столбцы **Scored Labels** (Оцененные метки) и **Scored Probabilities** (Оцененные вероятности).</span><span class="sxs-lookup"><span data-stu-id="41bd0-164">Click [Select Columns in Data set][select-columns], click **Launch column selector**, and select **Scored Labels** and **Scored Probabilities**.</span></span> <span data-ttu-id="41bd0-165">Настроив порт вывода модуля [Select Columns in Data set][select-columns] (Выбор столбцов в наборе данных) и запустив эксперимент еще раз, можно приступать к публикации оценивающего эксперимента в виде веб-службы. Для этого нажмите кнопку **Опубликовать веб-службу**.</span><span class="sxs-lookup"><span data-stu-id="41bd0-165">After setting the output port of [Select Columns in Data set][select-columns] and running it again, you should be ready to publish the scoring experiment as a web service by clicking **PUBLISH WEB SERVICE**.</span></span> <span data-ttu-id="41bd0-166">Окончательный эксперимента выглядит как показано на рис. 4.</span><span class="sxs-lookup"><span data-stu-id="41bd0-166">The final experiment looks like Figure 4.</span></span>

![Эксперимент с двухклассовой классификацией цветков ириса](./media/machine-learning-interpret-model-results/4.png)

<span data-ttu-id="41bd0-168">Рис.</span><span class="sxs-lookup"><span data-stu-id="41bd0-168">Figure 4.</span></span> <span data-ttu-id="41bd0-169">Окончательный оценивающий эксперимент в задаче двухклассовой классификации цветков ириса</span><span class="sxs-lookup"><span data-stu-id="41bd0-169">Final scoring experiment of an iris two-class classification problem</span></span>

<span data-ttu-id="41bd0-170">Запустив веб-службу, вы можете ввести некоторые значения признаков для тестового экземпляра и получить ответ в виде двух чисел.</span><span class="sxs-lookup"><span data-stu-id="41bd0-170">After you run the web service and enter some feature values of a test instance, the result returns two numbers.</span></span> <span data-ttu-id="41bd0-171">Первое число — это оцененная метка, а второе — оцененная вероятность.</span><span class="sxs-lookup"><span data-stu-id="41bd0-171">The first number is the scored label, and the second is the scored probability.</span></span> <span data-ttu-id="41bd0-172">Прогноз относит этот цветок к классу 1 с вероятностью 0,9655.</span><span class="sxs-lookup"><span data-stu-id="41bd0-172">This flower is predicted as Class 1 with 0.9655 probability.</span></span>

![Тестирование интерпретирующего модуля оценки](./media/machine-learning-interpret-model-results/4_1.png)

![Результаты тестовой оценки](./media/machine-learning-interpret-model-results/5.png)

<span data-ttu-id="41bd0-175">Рис. 5.</span><span class="sxs-lookup"><span data-stu-id="41bd0-175">Figure 5.</span></span> <span data-ttu-id="41bd0-176">Результат, возвращаемый веб-службой для двухклассовой классификации цветков ириса</span><span class="sxs-lookup"><span data-stu-id="41bd0-176">Web service result of iris two-class classification</span></span>

### <a name="multi-class-classification"></a><span data-ttu-id="41bd0-177">Многоклассовая классификация</span><span class="sxs-lookup"><span data-stu-id="41bd0-177">Multi-class classification</span></span>
<span data-ttu-id="41bd0-178">**Пример эксперимента**</span><span class="sxs-lookup"><span data-stu-id="41bd0-178">**Example experiment**</span></span>

<span data-ttu-id="41bd0-179">В этом эксперименте в качестве примера многоклассовой классификации выполняется задача по распознаванию букв.</span><span class="sxs-lookup"><span data-stu-id="41bd0-179">In this experiment, you perform a letter-recognition task as an example of multiclass classification.</span></span> <span data-ttu-id="41bd0-180">Классификатор пытается предсказать определенную букву (класс) по некоторым значениям атрибутов, извлеченным из изображений рукописных символов.</span><span class="sxs-lookup"><span data-stu-id="41bd0-180">The classifier attempts to predict a certain letter (class) based on some hand-written attribute values extracted from the hand-written images.</span></span>

![Пример распознавания букв](./media/machine-learning-interpret-model-results/5_1.png)

<span data-ttu-id="41bd0-182">В обучающих данных предусмотрено 16 признаков, извлеченных из изображений рукописных букв.</span><span class="sxs-lookup"><span data-stu-id="41bd0-182">In the training data, there are 16 features extracted from hand-written letter images.</span></span> <span data-ttu-id="41bd0-183">У нас есть 26 букв, которые образуют 26 классов.</span><span class="sxs-lookup"><span data-stu-id="41bd0-183">The 26 letters form our 26 classes.</span></span> <span data-ttu-id="41bd0-184">На рис. 6 представлен эксперимент, который обучает модель многоклассовой классификации распознавать буквы. Кроме того, он прогнозирует результаты по тому же набору признаков для тестового набора данных.</span><span class="sxs-lookup"><span data-stu-id="41bd0-184">Figure 6 shows an experiment that will train a multiclass classification model for letter recognition and predict on the same feature set on a test data set.</span></span>

![Эксперимент с многоклассовой классификацией — распознавание букв](./media/machine-learning-interpret-model-results/6.png)

<span data-ttu-id="41bd0-186">Рис. 6.</span><span class="sxs-lookup"><span data-stu-id="41bd0-186">Figure 6.</span></span> <span data-ttu-id="41bd0-187">Эксперимент с задачей многоклассовой классификации — распознавание букв</span><span class="sxs-lookup"><span data-stu-id="41bd0-187">Letter recognition multiclass classification problem experiment</span></span>

<span data-ttu-id="41bd0-188">Отобразите результаты модуля [Score Model][score-model] (Оценка модели), щелкнув порт вывода модуля [Score Model][score-model] (Оценка модели) и выбрав команду **Визуализировать**. Вы увидите данные, представленные на рис. 7.</span><span class="sxs-lookup"><span data-stu-id="41bd0-188">Visualizing the results from the [Score Model][score-model] module by clicking the output port of [Score Model][score-model] module and then clicking **Visualize**, you should see content as shown in Figure 7.</span></span>

![Результаты оценки модели](./media/machine-learning-interpret-model-results/7.png)

<span data-ttu-id="41bd0-190">Рис. 7.</span><span class="sxs-lookup"><span data-stu-id="41bd0-190">Figure 7.</span></span> <span data-ttu-id="41bd0-191">Визуализация результата оценки модели для задачи многоклассовой классификации</span><span class="sxs-lookup"><span data-stu-id="41bd0-191">Visualize score model results in a multi-class classification</span></span>

<span data-ttu-id="41bd0-192">**Интерпретация результатов**</span><span class="sxs-lookup"><span data-stu-id="41bd0-192">**Result interpretation**</span></span>

<span data-ttu-id="41bd0-193">16 столбцов слева представляют значения признаков тестового набора.</span><span class="sxs-lookup"><span data-stu-id="41bd0-193">The left 16 columns represent the feature values of the test set.</span></span> <span data-ttu-id="41bd0-194">Столбцы с такими именами, как "Scored Probabilities for Class «XX»" (Оцененные вероятности для класса "XX") аналогичны столбцу со значениями оцененной вероятности в двухклассовом эксперименте.</span><span class="sxs-lookup"><span data-stu-id="41bd0-194">The columns with names like Scored Probabilities for Class "XX" are just like the Scored Probabilities column in the two-class case.</span></span> <span data-ttu-id="41bd0-195">Они показывают вероятность того, что соответствующая запись будет принадлежать определенному классу.</span><span class="sxs-lookup"><span data-stu-id="41bd0-195">They show the probability that the corresponding entry falls into a certain class.</span></span> <span data-ttu-id="41bd0-196">Например, для первой записи число 0,003571 представляет вероятность принадлежности к классу А, число 0,000451 — к классу В и т. д.</span><span class="sxs-lookup"><span data-stu-id="41bd0-196">For example, for the first entry, there is 0.003571 probability that it is an “A,” 0.000451 probability that it is a “B,” and so forth.</span></span> <span data-ttu-id="41bd0-197">Последний столбец (с оцененными метками) полностью соответствует одноименному столбцу в двухклассовом эксперименте.</span><span class="sxs-lookup"><span data-stu-id="41bd0-197">The last column (Scored Labels) is the same as Scored Labels in the two-class case.</span></span> <span data-ttu-id="41bd0-198">Класс с наибольшим показателем вероятности выбирается в качестве прогнозируемого класса соответствующей записи.</span><span class="sxs-lookup"><span data-stu-id="41bd0-198">It selects the class with the largest scored probability as the predicted class of the corresponding entry.</span></span> <span data-ttu-id="41bd0-199">Например, для первой записи меткой оценки является «F», так у нее наибольшая вероятность быть «F» (0,916995).</span><span class="sxs-lookup"><span data-stu-id="41bd0-199">For example, for the first entry, the scored label is “F” since it has the largest probability to be an “F” (0.916995).</span></span>

<span data-ttu-id="41bd0-200">**Публикация в веб-службе**</span><span class="sxs-lookup"><span data-stu-id="41bd0-200">**Web service publication**</span></span>

<span data-ttu-id="41bd0-201">Здесь вы также можете получить для каждой записи значение оцененной метки и оцененной вероятности.</span><span class="sxs-lookup"><span data-stu-id="41bd0-201">You can also get the scored label for each entry and the probability of the scored label.</span></span> <span data-ttu-id="41bd0-202">Задача состоит в нахождении наибольшей вероятности среди всех оценок вероятностей.</span><span class="sxs-lookup"><span data-stu-id="41bd0-202">The basic logic is to find the largest probability among all the scored probabilities.</span></span> <span data-ttu-id="41bd0-203">Для этого вам потребуется модуль [Выполнить сценарий R][execute-r-script].</span><span class="sxs-lookup"><span data-stu-id="41bd0-203">To do this, you need to use the [Execute R Script][execute-r-script] module.</span></span> <span data-ttu-id="41bd0-204">Код для скрипта R представлен на рис. 8, а на рис. 9 показан результат эксперимента.</span><span class="sxs-lookup"><span data-stu-id="41bd0-204">The R code is shown in Figure 8, and the result of the experiment is shown in Figure 9.</span></span>

![Пример кода R](./media/machine-learning-interpret-model-results/8.png)

<span data-ttu-id="41bd0-206">Рис. 8.</span><span class="sxs-lookup"><span data-stu-id="41bd0-206">Figure 8.</span></span> <span data-ttu-id="41bd0-207">Код R для извлечения оцененных меток и оцененных вероятностей</span><span class="sxs-lookup"><span data-stu-id="41bd0-207">R code for extracting Scored Labels and the associated probabilities of the labels</span></span>

![Результат эксперимента](./media/machine-learning-interpret-model-results/9.png)

<span data-ttu-id="41bd0-209">Рис. 9.</span><span class="sxs-lookup"><span data-stu-id="41bd0-209">Figure 9.</span></span> <span data-ttu-id="41bd0-210">Окончательный оценивающий эксперимент с задачей многоклассовой классификации — распознавание букв</span><span class="sxs-lookup"><span data-stu-id="41bd0-210">Final scoring experiment of the letter-recognition multiclass classification problem</span></span>

<span data-ttu-id="41bd0-211">Когда вы опубликуете эту веб-службу и введете некоторые входные значения признаков, вы получите результат, который выглядит как на рис. 10.</span><span class="sxs-lookup"><span data-stu-id="41bd0-211">After you publish and run the web service and enter some input feature values, the returned result looks like Figure 10.</span></span> <span data-ttu-id="41bd0-212">Эта рукописная буква согласно 16 извлеченным признакам будет буквой "T" с вероятностью 0,9715.</span><span class="sxs-lookup"><span data-stu-id="41bd0-212">This hand-written letter, with its extracted 16 features, is predicted to be a “T” with 0.9715 probability.</span></span>

![Тестирование интерпретирующего модуля оценки](./media/machine-learning-interpret-model-results/9_1.png)

![Результат проверки](./media/machine-learning-interpret-model-results/10.png)

<span data-ttu-id="41bd0-215">Рис.</span><span class="sxs-lookup"><span data-stu-id="41bd0-215">Figure 10.</span></span> <span data-ttu-id="41bd0-216">Возвращаемый веб-службой результат задачи многоклассовой классификации</span><span class="sxs-lookup"><span data-stu-id="41bd0-216">Web service result of multiclass classification</span></span>

## <a name="regression"></a><span data-ttu-id="41bd0-217">регрессия;</span><span class="sxs-lookup"><span data-stu-id="41bd0-217">Regression</span></span>
<span data-ttu-id="41bd0-218">Регрессионная задача отличается от задачи классификации.</span><span class="sxs-lookup"><span data-stu-id="41bd0-218">Regression problems are different from classification problems.</span></span> <span data-ttu-id="41bd0-219">В задаче классификации мы пытаемся прогнозировать дискретные классы, определяя, например, к какому классу принадлежит цветок ириса.</span><span class="sxs-lookup"><span data-stu-id="41bd0-219">In a classification problem, you're trying to predict discrete classes, such as which class an iris flower belongs to.</span></span> <span data-ttu-id="41bd0-220">А в следующем примере представлена регрессионная задача, в которой мы пробуем спрогнозировать значение непрерывной переменной, например стоимости автомобиля.</span><span class="sxs-lookup"><span data-stu-id="41bd0-220">But as you can see in the following example of a regression problem, you're trying to predict a continuous variable, such as the price of a car.</span></span>

<span data-ttu-id="41bd0-221">**Пример эксперимента**</span><span class="sxs-lookup"><span data-stu-id="41bd0-221">**Example experiment**</span></span>

<span data-ttu-id="41bd0-222">В нашем примере регрессивной задачи прогнозируется стоимость автомобиля.</span><span class="sxs-lookup"><span data-stu-id="41bd0-222">Use automobile price prediction as your example for regression.</span></span> <span data-ttu-id="41bd0-223">Вы будете прогнозировать цену автомобиля на основе таких его признаков, как производитель, тип топлива, тип кузова, типа привода и т. д.</span><span class="sxs-lookup"><span data-stu-id="41bd0-223">You are trying to predict the price of a car based on its features, including make, fuel type, body type, and drive wheel.</span></span> <span data-ttu-id="41bd0-224">Этот эксперимент показан на рис. 11.</span><span class="sxs-lookup"><span data-stu-id="41bd0-224">The experiment is shown in Figure 11.</span></span>

![Регрессионный эксперимент по оценке стоимости автомобиля](./media/machine-learning-interpret-model-results/11.png)

<span data-ttu-id="41bd0-226">Рис. 11.</span><span class="sxs-lookup"><span data-stu-id="41bd0-226">Figure 11.</span></span> <span data-ttu-id="41bd0-227">Регрессионный эксперимент с задачей оценки стоимости автомобиля</span><span class="sxs-lookup"><span data-stu-id="41bd0-227">Automobile price regression problem experiment</span></span>

<span data-ttu-id="41bd0-228">Результаты работы модуля [Score Model][score-model] (Оценка модели) показаны на рис. 12.</span><span class="sxs-lookup"><span data-stu-id="41bd0-228">Visualizing the [Score Model][score-model] module, the result looks like Figure 12.</span></span>

![Оценка результатов для задачи прогноза стоимости автомобилей](./media/machine-learning-interpret-model-results/12.png)

<span data-ttu-id="41bd0-230">Рис. 12.</span><span class="sxs-lookup"><span data-stu-id="41bd0-230">Figure 12.</span></span> <span data-ttu-id="41bd0-231">Оценка результата для задачи прогноза стоимости автомобилей</span><span class="sxs-lookup"><span data-stu-id="41bd0-231">Scoring result for the automobile price prediction problem</span></span>

<span data-ttu-id="41bd0-232">**Интерпретация результатов**</span><span class="sxs-lookup"><span data-stu-id="41bd0-232">**Result interpretation**</span></span>

<span data-ttu-id="41bd0-233">В этом эксперименте результаты оценки представлены в столбце оцененных меток.</span><span class="sxs-lookup"><span data-stu-id="41bd0-233">Scored Labels is the result column in this scoring result.</span></span> <span data-ttu-id="41bd0-234">Числа являются прогнозируемой стоимостью для каждого автомобиля.</span><span class="sxs-lookup"><span data-stu-id="41bd0-234">The numbers are the predicted price for each car.</span></span>

<span data-ttu-id="41bd0-235">**Публикация в веб-службе**</span><span class="sxs-lookup"><span data-stu-id="41bd0-235">**Web service publication**</span></span>

<span data-ttu-id="41bd0-236">Вы можете опубликовать эксперимент регрессии в веб-службе и вызывать его для прогнозирования стоимости автомобиля, как в двухклассовом эксперименте.</span><span class="sxs-lookup"><span data-stu-id="41bd0-236">You can publish the regression experiment into a web service and call it for automobile price prediction in the same way as in the two-class classification use case.</span></span>

![Оценивающий эксперимент для регрессионной задачи оценки стоимости автомобилей](./media/machine-learning-interpret-model-results/13.png)

<span data-ttu-id="41bd0-238">Рис. 13.</span><span class="sxs-lookup"><span data-stu-id="41bd0-238">Figure 13.</span></span> <span data-ttu-id="41bd0-239">Оценивающий эксперимент для регрессионной задачи оценки стоимости автомобилей</span><span class="sxs-lookup"><span data-stu-id="41bd0-239">Scoring experiment of an automobile price regression problem</span></span>

<span data-ttu-id="41bd0-240">Выполняющаяся веб-служба возвращает результат, как показано на рис. 14.</span><span class="sxs-lookup"><span data-stu-id="41bd0-240">Running the web service, the returned result looks like Figure 14.</span></span> <span data-ttu-id="41bd0-241">Прогнозируемая стоимость этого автомобиля — 15 085,52 долларов США.</span><span class="sxs-lookup"><span data-stu-id="41bd0-241">The predicted price for this car is $15,085.52.</span></span>

![Тестирование интерпретирующего модуля оценки](./media/machine-learning-interpret-model-results/13_1.png)

![Результаты модуля оценки](./media/machine-learning-interpret-model-results/14.png)

<span data-ttu-id="41bd0-244">Рис. 14.</span><span class="sxs-lookup"><span data-stu-id="41bd0-244">Figure 14.</span></span> <span data-ttu-id="41bd0-245">Результат веб-службы для регрессионной задачи оценки стоимости автомобиля</span><span class="sxs-lookup"><span data-stu-id="41bd0-245">Web service result of an automobile price regression problem</span></span>

## <a name="clustering"></a><span data-ttu-id="41bd0-246">кластеризация;</span><span class="sxs-lookup"><span data-stu-id="41bd0-246">Clustering</span></span>
<span data-ttu-id="41bd0-247">**Пример эксперимента**</span><span class="sxs-lookup"><span data-stu-id="41bd0-247">**Example experiment**</span></span>

<span data-ttu-id="41bd0-248">Воспользуемся набором данных Iris еще раз, чтобы создать эксперимент кластеризации.</span><span class="sxs-lookup"><span data-stu-id="41bd0-248">Let’s use the Iris data set again to build a clustering experiment.</span></span> <span data-ttu-id="41bd0-249">Здесь вы можете отфильтровать метки классов в наборе данных, чтобы они включали только признаки и их можно было использовать для кластеризации.</span><span class="sxs-lookup"><span data-stu-id="41bd0-249">Here you can filter out the class labels in the data set so that it only has features and can be used for clustering.</span></span> <span data-ttu-id="41bd0-250">В этом примере обучения с использованием набора данных Iris мы укажем два кластера. Это означает, что цветки будут разделены на два класса.</span><span class="sxs-lookup"><span data-stu-id="41bd0-250">In this iris use case, specify the number of clusters to be two during the training process, which means you would cluster the flowers into two classes.</span></span> <span data-ttu-id="41bd0-251">Этот эксперимент показан на рис. 15.</span><span class="sxs-lookup"><span data-stu-id="41bd0-251">The experiment is shown in Figure 15.</span></span>

![Эксперимент с задачей кластеризации цветков ириса](./media/machine-learning-interpret-model-results/15.png)

<span data-ttu-id="41bd0-253">Рис. 15.</span><span class="sxs-lookup"><span data-stu-id="41bd0-253">Figure 15.</span></span> <span data-ttu-id="41bd0-254">Эксперимент с задачей кластеризации цветков ириса</span><span class="sxs-lookup"><span data-stu-id="41bd0-254">Iris clustering problem experiment</span></span>

<span data-ttu-id="41bd0-255">Кластеризация отличается от классификации тем, что обучающий набор данных не имеет собственных меток.</span><span class="sxs-lookup"><span data-stu-id="41bd0-255">Clustering differs from classification in that the training data set doesn’t have ground-truth labels by itself.</span></span> <span data-ttu-id="41bd0-256">При кластеризации экземпляры обучающего набора данных группируются в несколько кластеров.</span><span class="sxs-lookup"><span data-stu-id="41bd0-256">Clustering groups the training data set instances into distinct clusters.</span></span> <span data-ttu-id="41bd0-257">В процессе обучения модель помечает записи по мере изучения различий между их признаками.</span><span class="sxs-lookup"><span data-stu-id="41bd0-257">During the training process, the model labels the entries by learning the differences between their features.</span></span> <span data-ttu-id="41bd0-258">После этого обученная модель может классифицировать новые записи.</span><span class="sxs-lookup"><span data-stu-id="41bd0-258">After that, the trained model can be used to further classify future entries.</span></span> <span data-ttu-id="41bd0-259">В задаче кластеризации нас интересуют результаты по двум направлениям.</span><span class="sxs-lookup"><span data-stu-id="41bd0-259">There are two parts of the result we are interested in within a clustering problem.</span></span> <span data-ttu-id="41bd0-260">Сначала мы создадим метки для обучающего набора данных, а затем классифицируем новый набор данных с помощью обученной модели.</span><span class="sxs-lookup"><span data-stu-id="41bd0-260">The first part is labeling the training data set, and the second is classifying a new data set with the trained model.</span></span>

<span data-ttu-id="41bd0-261">Первую часть результатов можно визуализировать, щелкнув левый порт вывода модуля [Train Clustering Model][train-clustering-model] (Обучение модели кластеризации) и выбрав команду **Визуализировать**.</span><span class="sxs-lookup"><span data-stu-id="41bd0-261">The first part of the result can be visualized by clicking the left output port of [Train Clustering Model][train-clustering-model] and then clicking **Visualize**.</span></span> <span data-ttu-id="41bd0-262">Визуализация представлена на рис. 16.</span><span class="sxs-lookup"><span data-stu-id="41bd0-262">The visualization is shown in Figure 16.</span></span>

![Результат кластеризации](./media/machine-learning-interpret-model-results/16.png)

<span data-ttu-id="41bd0-264">Рис. 16.</span><span class="sxs-lookup"><span data-stu-id="41bd0-264">Figure 16.</span></span> <span data-ttu-id="41bd0-265">Визуализация результата кластеризации для обучающего набора данных</span><span class="sxs-lookup"><span data-stu-id="41bd0-265">Visualize clustering result for the training data set</span></span>

<span data-ttu-id="41bd0-266">Вторая часть результатов, кластеризация новых записей с помощью обученной модели кластеризации, показана на рис. 17.</span><span class="sxs-lookup"><span data-stu-id="41bd0-266">The result of the second part, clustering new entries with the trained clustering model, is shown in Figure 17.</span></span>

![Визуализация результата кластеризации](./media/machine-learning-interpret-model-results/17.png)

<span data-ttu-id="41bd0-268">Рис. 17.</span><span class="sxs-lookup"><span data-stu-id="41bd0-268">Figure 17.</span></span> <span data-ttu-id="41bd0-269">Визуализация результата кластеризации для нового набора данных</span><span class="sxs-lookup"><span data-stu-id="41bd0-269">Visualize clustering result on a new data set</span></span>

<span data-ttu-id="41bd0-270">**Интерпретация результатов**</span><span class="sxs-lookup"><span data-stu-id="41bd0-270">**Result interpretation**</span></span>

<span data-ttu-id="41bd0-271">Хотя результаты двух подмножеств получены на разных этапах эксперимента, они выглядят похожими и интерпретируются одинаково.</span><span class="sxs-lookup"><span data-stu-id="41bd0-271">Although the results of the two parts stem from different experiment stages, they look the same and are interpreted in the same way.</span></span> <span data-ttu-id="41bd0-272">Первые четыре столбца — это признаки.</span><span class="sxs-lookup"><span data-stu-id="41bd0-272">The first four columns are features.</span></span> <span data-ttu-id="41bd0-273">Последний столбец "Assignments" (Назначения) представляет результат прогнозирования.</span><span class="sxs-lookup"><span data-stu-id="41bd0-273">The last column, Assignments, is the prediction result.</span></span> <span data-ttu-id="41bd0-274">Записи, которым назначены одинаковые числа, по прогнозу отнесены в один кластер. Это означает, что у них есть определенные сходства (в этом эксперименте использовалась стандартная формула Евклидовой метрики для оценки расстояния).</span><span class="sxs-lookup"><span data-stu-id="41bd0-274">The entries assigned the same number are predicted to be in the same cluster, that is, they share similarities in some way (this experiment uses the default Euclidean distance metric).</span></span> <span data-ttu-id="41bd0-275">Так как вы указали, что кластеров должно быть 2, в этом столбце встречаются только значения 0 и 1.</span><span class="sxs-lookup"><span data-stu-id="41bd0-275">Because you specified the number of clusters to be 2, the entries in Assignments are labeled either 0 or 1.</span></span>

<span data-ttu-id="41bd0-276">**Публикация в веб-службе**</span><span class="sxs-lookup"><span data-stu-id="41bd0-276">**Web service publication**</span></span>

<span data-ttu-id="41bd0-277">Вы можете опубликовать эксперимент кластеризации в веб-службе и вызывать его для прогнозирования кластеризации так же, как и эксперимент двухклассовой классификации.</span><span class="sxs-lookup"><span data-stu-id="41bd0-277">You can publish the clustering experiment into a web service and call it for clustering predictions the same way as in the two-class classification use case.</span></span>

![Оценивающий эксперимент с задачей кластеризации набора данных Iris](./media/machine-learning-interpret-model-results/18.png)

<span data-ttu-id="41bd0-279">Рис. 18.</span><span class="sxs-lookup"><span data-stu-id="41bd0-279">Figure 18.</span></span> <span data-ttu-id="41bd0-280">Оценивающий эксперимент с задачей кластеризации набора данных Iris</span><span class="sxs-lookup"><span data-stu-id="41bd0-280">Scoring experiment of an iris clustering problem</span></span>

<span data-ttu-id="41bd0-281">Запустив веб-службу, вы получите результат, представленный на рис. 19.</span><span class="sxs-lookup"><span data-stu-id="41bd0-281">After you run the web service, the returned result looks like Figure 19.</span></span> <span data-ttu-id="41bd0-282">Согласно прогнозу этот цветок относится к кластеру 0.</span><span class="sxs-lookup"><span data-stu-id="41bd0-282">This flower is predicted to be in cluster 0.</span></span>

![Тестирование интерпретирующего модуля оценки](./media/machine-learning-interpret-model-results/18_1.png)

![Результаты модуля оценки](./media/machine-learning-interpret-model-results/19.png)

<span data-ttu-id="41bd0-285">Рис. 19.</span><span class="sxs-lookup"><span data-stu-id="41bd0-285">Figure 19.</span></span> <span data-ttu-id="41bd0-286">Результат, возвращаемый веб-службой для двухклассовой классификации цветков ириса</span><span class="sxs-lookup"><span data-stu-id="41bd0-286">Web service result of iris two-class classification</span></span>

## <a name="recommender-system"></a><span data-ttu-id="41bd0-287">Система рекомендаций</span><span class="sxs-lookup"><span data-stu-id="41bd0-287">Recommender system</span></span>
<span data-ttu-id="41bd0-288">**Пример эксперимента**</span><span class="sxs-lookup"><span data-stu-id="41bd0-288">**Example experiment**</span></span>

<span data-ttu-id="41bd0-289">Чтобы ознакомиться с системой рекомендаций, в качестве примера рассмотрим задачу рекомендации ресторана: вы будете рекомендовать клиентам рестораны на основе их оценок.</span><span class="sxs-lookup"><span data-stu-id="41bd0-289">For recommender systems, you can use the restaurant recommendation problem as an example: you can recommend restaurants for customers based on their rating history.</span></span> <span data-ttu-id="41bd0-290">Входные данные делятся на три части:</span><span class="sxs-lookup"><span data-stu-id="41bd0-290">The input data consists of three parts:</span></span>

* <span data-ttu-id="41bd0-291">клиентские оценки ресторанов;</span><span class="sxs-lookup"><span data-stu-id="41bd0-291">Restaurant ratings from customers</span></span>
* <span data-ttu-id="41bd0-292">данные о характеристиках клиентов;</span><span class="sxs-lookup"><span data-stu-id="41bd0-292">Customer feature data</span></span>
* <span data-ttu-id="41bd0-293">Данные об услугах ресторанов</span><span class="sxs-lookup"><span data-stu-id="41bd0-293">Restaurant feature data</span></span>

<span data-ttu-id="41bd0-294">С помощью встроенного модуля машинного обучения Azure [Train Matchbox Recommender][train-matchbox-recommender] (Обучение системы Matchbox Recommender) можно выполнять несколько задач.</span><span class="sxs-lookup"><span data-stu-id="41bd0-294">There are several things we can do with the [Train Matchbox Recommender][train-matchbox-recommender] module in Azure Machine Learning:</span></span>

* <span data-ttu-id="41bd0-295">прогнозировать оценки для данного пользователя и объекта;</span><span class="sxs-lookup"><span data-stu-id="41bd0-295">Predict ratings for a given user and item</span></span>
* <span data-ttu-id="41bd0-296">рекомендовать объект данному пользователю;</span><span class="sxs-lookup"><span data-stu-id="41bd0-296">Recommend items to a given user</span></span>
* <span data-ttu-id="41bd0-297">искать пользователей, связанных с данным пользователем;</span><span class="sxs-lookup"><span data-stu-id="41bd0-297">Find users related to a given user</span></span>
* <span data-ttu-id="41bd0-298">искать объекты, связанные с данным объектом.</span><span class="sxs-lookup"><span data-stu-id="41bd0-298">Find items related to a given item</span></span>

<span data-ttu-id="41bd0-299">Вы можете выбрать нужную задачу в меню **Recommender prediction kind** (Тип прогноза системы рекомендаций), где есть четыре варианта.</span><span class="sxs-lookup"><span data-stu-id="41bd0-299">You can choose what you want to do by selecting from the four options in the **Recommender prediction kind** menu.</span></span> <span data-ttu-id="41bd0-300">Здесь мы рассмотрим все четыре сценария.</span><span class="sxs-lookup"><span data-stu-id="41bd0-300">Here you can walk through all four scenarios.</span></span>

![Рекомендации Matchbox](./media/machine-learning-interpret-model-results/19_1.png)

<span data-ttu-id="41bd0-302">Типичный эксперимент машинного обучения Azure для системы рекомендаций представлен на рис. 20.</span><span class="sxs-lookup"><span data-stu-id="41bd0-302">A typical Azure Machine Learning experiment for a recommender system looks like Figure 20.</span></span> <span data-ttu-id="41bd0-303">Дополнительные сведения об использовании этих модулей системы рекомендаций см. на странице справки в статьях [Train matchbox recommender][train-matchbox-recommender] (Обучение модели рекомендаций Matchbox) и [Score matchbox recommender][score-matchbox-recommender] (Оценка модели рекомендаций Matchbox).</span><span class="sxs-lookup"><span data-stu-id="41bd0-303">For information about how to use those recommender system modules, see [Train matchbox recommender][train-matchbox-recommender] and [Score matchbox recommender][score-matchbox-recommender].</span></span>

![Эксперимент с системой рекомендаций](./media/machine-learning-interpret-model-results/20.png)

<span data-ttu-id="41bd0-305">Рис. 20.</span><span class="sxs-lookup"><span data-stu-id="41bd0-305">Figure 20.</span></span> <span data-ttu-id="41bd0-306">Эксперимент с системой рекомендаций</span><span class="sxs-lookup"><span data-stu-id="41bd0-306">Recommender system experiment</span></span>

<span data-ttu-id="41bd0-307">**Интерпретация результатов**</span><span class="sxs-lookup"><span data-stu-id="41bd0-307">**Result interpretation**</span></span>

<span data-ttu-id="41bd0-308">**Прогноз оценки для указанных пользователя и объекта**</span><span class="sxs-lookup"><span data-stu-id="41bd0-308">**Predict ratings for a given user and item**</span></span>

<span data-ttu-id="41bd0-309">Выбрав пункт **Rating Prediction** (Прогноз оценки) в меню **Recommender prediction kind** (Тип прогноза системы рекомендаций), мы запросим у системы рекомендаций создать прогнозную оценку для указанных пользователя и объекта.</span><span class="sxs-lookup"><span data-stu-id="41bd0-309">By selecting **Rating Prediction** under **Recommender prediction kind**, you are asking the recommender system to predict the rating for a given user and item.</span></span> <span data-ttu-id="41bd0-310">Визуализация результатов модуля [Score Matchbox Recommender][score-matchbox-recommender] (Оценка модели рекомендаций Matchbox) показана на рис. 21.</span><span class="sxs-lookup"><span data-stu-id="41bd0-310">The visualization of the [Score Matchbox Recommender][score-matchbox-recommender] output looks like Figure 21.</span></span>

![Результат оценки системы рекомендаций — прогнозная оценка](./media/machine-learning-interpret-model-results/21.png)

<span data-ttu-id="41bd0-312">Рис. 21.</span><span class="sxs-lookup"><span data-stu-id="41bd0-312">Figure 21.</span></span> <span data-ttu-id="41bd0-313">Визуализация результата оценки системы рекомендаций — прогнозная оценка</span><span class="sxs-lookup"><span data-stu-id="41bd0-313">Visualize the score result of the recommender system--rating prediction</span></span>

<span data-ttu-id="41bd0-314">Первые два столбца — это пары пользователь-объект, представленные во входных данных.</span><span class="sxs-lookup"><span data-stu-id="41bd0-314">The first two columns are the user-item pairs provided by the input data.</span></span> <span data-ttu-id="41bd0-315">Третий столбец является прогнозируемой оценкой пользователя для определенного объекта.</span><span class="sxs-lookup"><span data-stu-id="41bd0-315">The third column is the predicted rating of a user for a certain item.</span></span> <span data-ttu-id="41bd0-316">Например в первой строке клиент U1048 вероятно даст ресторану 135026 оценку 2.</span><span class="sxs-lookup"><span data-stu-id="41bd0-316">For example, in the first row, customer U1048 is predicted to rate restaurant 135026 as 2.</span></span>

<span data-ttu-id="41bd0-317">**Рекомендация объекта указанному пользователю**</span><span class="sxs-lookup"><span data-stu-id="41bd0-317">**Recommend items to a given user**</span></span>

<span data-ttu-id="41bd0-318">Выбрав пункт **Item Recommendation** (Рекомендация объекта) в меню **Recommender prediction kind** (Тип прогноза системы рекомендаций), мы запросим систему рекомендаций найти рекомендуемые объекты для указанного пользователя.</span><span class="sxs-lookup"><span data-stu-id="41bd0-318">By selecting **Item Recommendation** under **Recommender prediction kind**, you're asking the recommender system to recommend items to a given user.</span></span> <span data-ttu-id="41bd0-319">В этом сценарии нужно указать значение еще одного параметра: *Recommended item selection* (Выбор рекомендуемого объекта).</span><span class="sxs-lookup"><span data-stu-id="41bd0-319">The last parameter to choose in this scenario is *Recommended item selection*.</span></span> <span data-ttu-id="41bd0-320">Параметр **From Rated Items (for model evaluation)** (Из оцененных объектов — для оценки модели) используется преимущественно для оценки модели при обучении.</span><span class="sxs-lookup"><span data-stu-id="41bd0-320">The option **From Rated Items (for model evaluation)** is primarily for model evaluation during the training process.</span></span> <span data-ttu-id="41bd0-321">На этом этапе прогнозирования мы выбираем **From All Items** (Из всех объектов).</span><span class="sxs-lookup"><span data-stu-id="41bd0-321">For this prediction stage, we choose **From All Items**.</span></span> <span data-ttu-id="41bd0-322">Визуализация результатов модуля [Score Matchbox Recommender][score-matchbox-recommender] (Оценка модели рекомендаций Matchbox) показана на рис. 22.</span><span class="sxs-lookup"><span data-stu-id="41bd0-322">The visualization of the [Score Matchbox Recommender][score-matchbox-recommender] output looks like Figure 22.</span></span>

![Результат оценки системы рекомендаций — рекомендуемый объект](./media/machine-learning-interpret-model-results/22.png)

<span data-ttu-id="41bd0-324">Рис. 22.</span><span class="sxs-lookup"><span data-stu-id="41bd0-324">Figure 22.</span></span> <span data-ttu-id="41bd0-325">Визуализация результата оценки системы рекомендаций — рекомендуемый объект</span><span class="sxs-lookup"><span data-stu-id="41bd0-325">Visualize score result of the recommender system--item recommendation</span></span>

<span data-ttu-id="41bd0-326">Первый из шести столбцов содержит идентификаторы пользователей, которым будут рекомендованы объекты. Они получены из входных данных.</span><span class="sxs-lookup"><span data-stu-id="41bd0-326">The first of the six columns represents the given user IDs to recommend items for, as provided by the input data.</span></span> <span data-ttu-id="41bd0-327">Остальные пять столбцов содержат объекты, рекомендуемые каждому пользователю. Они перечислены в порядке убывания релевантности.</span><span class="sxs-lookup"><span data-stu-id="41bd0-327">The other five columns represent the items recommended to the user in descending order of relevance.</span></span> <span data-ttu-id="41bd0-328">Например, в первой строке для клиента U1048 первый рекомендуемый ресторан представлен значением 134986; за ним следуют 135018, 134975, 135021 и 132862.</span><span class="sxs-lookup"><span data-stu-id="41bd0-328">For example, in the first row, the most recommended restaurant for customer U1048 is 134986, followed by 135018, 134975, 135021, and 132862.</span></span>

<span data-ttu-id="41bd0-329">**Поиск пользователей, связанных с указанным пользователем**</span><span class="sxs-lookup"><span data-stu-id="41bd0-329">**Find users related to a given user**</span></span>

<span data-ttu-id="41bd0-330">Выбрав пункт **Related Users** (Связанные пользователи) в меню **Recommender prediction kind** (Тип прогноза системы рекомендаций), мы запросим систему рекомендаций найти пользователей, связанных с указанным пользователем.</span><span class="sxs-lookup"><span data-stu-id="41bd0-330">By selecting **Related Users** under **Recommender prediction kind**, you're asking the recommender system to find related users to a given user.</span></span> <span data-ttu-id="41bd0-331">Связанными пользователями являются пользователи с аналогичными параметрами.</span><span class="sxs-lookup"><span data-stu-id="41bd0-331">Related users are the users who have similar preferences.</span></span> <span data-ttu-id="41bd0-332">В этом сценарии нужно выбрать значение еще одного параметра: *Related user selection* (Выбор связанных пользователей).</span><span class="sxs-lookup"><span data-stu-id="41bd0-332">The last parameter to choose in this scenario is *Related user selection*.</span></span> <span data-ttu-id="41bd0-333">Параметр **From Users That Rated Items (for model evaluation)**(Из пользователей, которые оценили объекты — для оценки модели) используется преимущественно для оценки модели при обучении.</span><span class="sxs-lookup"><span data-stu-id="41bd0-333">The option **From Users That Rated Items (for model evaluation)** is primarily for model evaluation during the training process.</span></span> <span data-ttu-id="41bd0-334">На этом этапе прогнозирования мы выбираем **From All Users** (Из всех пользователей).</span><span class="sxs-lookup"><span data-stu-id="41bd0-334">Choose **From All Users** for this prediction stage.</span></span> <span data-ttu-id="41bd0-335">Визуализация результатов модуля [Score Matchbox Recommender][score-matchbox-recommender] (Оценка модели рекомендаций Matchbox) показана на рис. 23.</span><span class="sxs-lookup"><span data-stu-id="41bd0-335">The visualization of the [Score Matchbox Recommender][score-matchbox-recommender] output looks like Figure 23.</span></span>

![Результат оценки системы рекомендаций — связанные пользователи](./media/machine-learning-interpret-model-results/23.png)

<span data-ttu-id="41bd0-337">Рис. 23.</span><span class="sxs-lookup"><span data-stu-id="41bd0-337">Figure 23.</span></span> <span data-ttu-id="41bd0-338">Визуализация результатов оценки системы рекомендаций — связанные пользователи</span><span class="sxs-lookup"><span data-stu-id="41bd0-338">Visualize score results of the recommender system--related users</span></span>

<span data-ttu-id="41bd0-339">Первый из шести столбцов содержит идентификаторы пользователей, для которых ищутся связанные пользователи. Они получены из входных данных.</span><span class="sxs-lookup"><span data-stu-id="41bd0-339">The first of the six columns shows the given user IDs needed to find related users, as provided by input data.</span></span> <span data-ttu-id="41bd0-340">Остальные пять столбцов содержат прогнозы по связанным пользователям. Они перечислены в порядке убывания релевантности.</span><span class="sxs-lookup"><span data-stu-id="41bd0-340">The other five columns store the predicted related users of the user in descending order of relevance.</span></span> <span data-ttu-id="41bd0-341">Например, в первой строке для клиента U1048 наиболее соответствующий клиент представлен значением U1051; за ним следуют U1066, U1044, U1017 и U1072.</span><span class="sxs-lookup"><span data-stu-id="41bd0-341">For example, in the first row, the most relevant customer for customer U1048 is U1051, followed by U1066, U1044, U1017, and U1072.</span></span>

<span data-ttu-id="41bd0-342">**Поиск объектов, связанных с данным объектом**</span><span class="sxs-lookup"><span data-stu-id="41bd0-342">**Find items related to a given item**</span></span>

<span data-ttu-id="41bd0-343">Выбрав пункт **Related Items** (Связанные объекты) в меню **Recommender prediction kind** (Тип прогноза системы рекомендаций), мы запросим систему рекомендаций найти объекты, связанные с указанным объектом.</span><span class="sxs-lookup"><span data-stu-id="41bd0-343">By selecting **Related Items** under **Recommender prediction kind**, you are asking the recommender system to find related items to a given item.</span></span> <span data-ttu-id="41bd0-344">Связанные объекты — это те объекты, которые скорее всего понравятся тем же пользователям.</span><span class="sxs-lookup"><span data-stu-id="41bd0-344">Related items are the items most likely to be liked by the same user.</span></span> <span data-ttu-id="41bd0-345">В этом сценарии нужно выбрать значение еще одного параметра: *Related item selection* (Выбор связанных объектов).</span><span class="sxs-lookup"><span data-stu-id="41bd0-345">The last parameter to choose in this scenario is *Related item selection*.</span></span> <span data-ttu-id="41bd0-346">Параметр **From Rated Items (for model evaluation)** (Из оцененных объектов — для оценки модели) используется преимущественно для оценки модели при обучении.</span><span class="sxs-lookup"><span data-stu-id="41bd0-346">The option **From Rated Items (for model evaluation)** is primarily for model evaluation during the training process.</span></span> <span data-ttu-id="41bd0-347">На этом этапе прогнозирования мы выбираем **From All Items** (Из всех объектов).</span><span class="sxs-lookup"><span data-stu-id="41bd0-347">We choose **From All Items** for this prediction stage.</span></span> <span data-ttu-id="41bd0-348">Визуализация результатов модуля [Score Matchbox Recommender][score-matchbox-recommender] (Оценка модели рекомендаций Matchbox) показана на рис. 24.</span><span class="sxs-lookup"><span data-stu-id="41bd0-348">The visualization of the [Score Matchbox Recommender][score-matchbox-recommender] output looks like Figure 24.</span></span>

![Результат оценки системы рекомендаций — связанные объекты](./media/machine-learning-interpret-model-results/24.png)

<span data-ttu-id="41bd0-350">Рис. 24.</span><span class="sxs-lookup"><span data-stu-id="41bd0-350">Figure 24.</span></span> <span data-ttu-id="41bd0-351">Визуализация результатов оценки системы рекомендаций — связанные объекты</span><span class="sxs-lookup"><span data-stu-id="41bd0-351">Visualize score results of the recommender system--related items</span></span>

<span data-ttu-id="41bd0-352">Первый из шести столбцов содержит идентификаторы объектов, для которых ищутся связанные объекты. Они получены из входных данных.</span><span class="sxs-lookup"><span data-stu-id="41bd0-352">The first of the six columns represents the given item IDs needed to find related items, as provided by the input data.</span></span> <span data-ttu-id="41bd0-353">Остальные пять столбцов содержат прогнозы по связанным объектам. Они перечислены в порядке убывания релевантности.</span><span class="sxs-lookup"><span data-stu-id="41bd0-353">The other five columns store the predicted related items of the item in descending order in terms of relevance.</span></span> <span data-ttu-id="41bd0-354">Например, в первой строке для объекта 135026 наиболее соответствующий объект представлен значением 135074; за ним следуют 135035, 132875, 135055 и 134992.</span><span class="sxs-lookup"><span data-stu-id="41bd0-354">For example, in the first row, the most relevant item for item 135026 is 135074, followed by 135035, 132875, 135055, and 134992.</span></span>

<span data-ttu-id="41bd0-355">**Публикация в веб-службе**</span><span class="sxs-lookup"><span data-stu-id="41bd0-355">**Web service publication**</span></span>

<span data-ttu-id="41bd0-356">Процесс публикации этих экспериментов как веб-служб для получения прогнозов аналогичен для каждого из четырех сценариев.</span><span class="sxs-lookup"><span data-stu-id="41bd0-356">The process of publishing these experiments as web services to get predictions is similar for each of the four scenarios.</span></span> <span data-ttu-id="41bd0-357">В качестве примера мы возьмем второй сценарий, в котором объекты рекомендуются указанному пользователю.</span><span class="sxs-lookup"><span data-stu-id="41bd0-357">Here we take the second scenario (recommend items to a given user) as an example.</span></span> <span data-ttu-id="41bd0-358">Ту же процедуру необходимо повторить и для трех остальных сценариев.</span><span class="sxs-lookup"><span data-stu-id="41bd0-358">You can follow the same procedure with the other three.</span></span>

<span data-ttu-id="41bd0-359">Сохранив обученную систему рекомендаций в качестве обученной модели и преобразовав входные данные в один столбец идентификаторов пользователей, мы можем подключить эксперимент, как показано на рис. 25, и опубликовать его как веб-службу.</span><span class="sxs-lookup"><span data-stu-id="41bd0-359">Saving the trained recommender system as a trained model and filtering the input data to a single user ID column as requested, you can hook up the experiment as in Figure 25 and publish it as a web service.</span></span>

![Оценивающий эксперимент с задачей рекомендации ресторана](./media/machine-learning-interpret-model-results/25.png)

<span data-ttu-id="41bd0-361">Рис. 25.</span><span class="sxs-lookup"><span data-stu-id="41bd0-361">Figure 25.</span></span> <span data-ttu-id="41bd0-362">Оценивающий эксперимент с задачей рекомендации ресторана</span><span class="sxs-lookup"><span data-stu-id="41bd0-362">Scoring experiment of the restaurant recommendation problem</span></span>

<span data-ttu-id="41bd0-363">Запустив эту веб-службу, мы получим результат, представленный на рис. 26.</span><span class="sxs-lookup"><span data-stu-id="41bd0-363">Running the web service, the returned result looks like Figure 26.</span></span> <span data-ttu-id="41bd0-364">Пользователю U1048 рекомендуются пять ресторанов: 134986, 135018, 134975, 135021 и 132862.</span><span class="sxs-lookup"><span data-stu-id="41bd0-364">The five recommended restaurants for user U1048 are 134986, 135018, 134975, 135021, and 132862.</span></span>

![Пример службы системы рекомендаций](./media/machine-learning-interpret-model-results/25_1.png)

![Пример результатов эксперимента](./media/machine-learning-interpret-model-results/26.png)

<span data-ttu-id="41bd0-367">Рис. 26.</span><span class="sxs-lookup"><span data-stu-id="41bd0-367">Figure 26.</span></span> <span data-ttu-id="41bd0-368">Результаты веб-службы для задачи рекомендации ресторана</span><span class="sxs-lookup"><span data-stu-id="41bd0-368">Web service result of restaurant recommendation problem</span></span>

<!-- Module References -->
[assign-to-clusters]: https://msdn.microsoft.com/library/azure/eed3ee76-e8aa-46e6-907c-9ca767f5c114/
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/
[select-columns]: https://msdn.microsoft.com/library/azure/1ec722fa-b623-4e26-a44e-a50c6d726223/
[score-matchbox-recommender]: https://msdn.microsoft.com/library/azure/55544522-9a10-44bd-884f-9a91a9cec2cd/
[score-model]: https://msdn.microsoft.com/library/azure/401b4f92-e724-4d5a-be81-d5b0ff9bdb33/
[train-clustering-model]: https://msdn.microsoft.com/library/azure/bb43c744-f7fa-41d0-ae67-74ae75da3ffd/
[train-matchbox-recommender]: https://msdn.microsoft.com/library/azure/fa4aa69d-2f1c-4ba4-ad5f-90ea3a515b4c/
