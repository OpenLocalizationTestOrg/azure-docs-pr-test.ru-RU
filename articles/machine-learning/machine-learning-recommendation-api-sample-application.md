---
title: "Стандартные операции в API рекомендаций для машинного обучения | Документация Майкрософт"
description: "Пример приложения для рекомендаций по Машинному обучению Azure"
services: machine-learning
documentationcenter: 
author: LuisCabrer
manager: jhubbard
editor: cgronlun
ms.assetid: 0220bc17-3315-47d7-84a3-ef490263a343
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/31/2017
ms.author: luisca
ROBOTS: NOINDEX
redirect_url: machine-learning-datamarket-deprecation
redirect_document_id: TRUE
ms.openlocfilehash: 8d8efa93e820f4a745ed93c0f4d13b2438dfa1eb
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="recommendations-api-sample-application-walkthrough"></a><span data-ttu-id="8c5e7-103">Пошаговое руководство по примеру приложения API рекомендаций</span><span class="sxs-lookup"><span data-stu-id="8c5e7-103">Recommendations API Sample Application Walkthrough</span></span>
> [!NOTE]
> <span data-ttu-id="8c5e7-104">Начните использовать когнитивную службу API рекомендаций вместо этой версии.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-104">You should start using the Recommendations API Cognitive Service instead of this version.</span></span> <span data-ttu-id="8c5e7-105">Когнитивная служба рекомендаций заменит эту службу, и все новые функции будут разрабатываться в ней.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-105">The Recommendations Cognitive Service will be replacing this service, and all the new features will be developed there.</span></span> <span data-ttu-id="8c5e7-106">Она включает в себя новые возможности, такие как поддержка пакетной обработки, улучшенный обозреватель API, более четкое представление API, более согласованные процедуры регистрации и выставления счетов, и т. д.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-106">It has new capabilities like batching support, a better API Explorer, a cleaner API surface, more consistent signup/billing experience, etc.</span></span>
> <span data-ttu-id="8c5e7-107">Узнайте больше о [переходе на новую когнитивную службу](http://aka.ms/recomigrate).</span><span class="sxs-lookup"><span data-stu-id="8c5e7-107">Learn more about [Migrating to the new Cognitive Service](http://aka.ms/recomigrate)</span></span>
> 
> 

## <a name="purpose"></a><span data-ttu-id="8c5e7-108">Назначение</span><span class="sxs-lookup"><span data-stu-id="8c5e7-108">Purpose</span></span>
<span data-ttu-id="8c5e7-109">В этом документе показано использование API рекомендаций Машинного обучения Azure с помощью [примера приложения](https://code.msdn.microsoft.com/Recommendations-144df403).</span><span class="sxs-lookup"><span data-stu-id="8c5e7-109">This document shows the usage of the Azure Machine Learning Recommendations API via a [sample application](https://code.msdn.microsoft.com/Recommendations-144df403).</span></span>

<span data-ttu-id="8c5e7-110">Это приложение не предназначено для обеспечения полного набора функциональных возможностей и использования всех интерфейсов API.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-110">This application is not intended to include full functionality, nor does it use all the APIs.</span></span> <span data-ttu-id="8c5e7-111">Оно позволяет продемонстрировать некоторые распространенные операции, выполняемые при первом использовании службы рекомендаций машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-111">It demonstrates some common operations to perform when you first want to play with the Machine Learning recommendation service.</span></span> 

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

## <a name="introduction-to-machine-learning-recommendation-service"></a><span data-ttu-id="8c5e7-112">Введение в службу рекомендаций машинного обучения</span><span class="sxs-lookup"><span data-stu-id="8c5e7-112">Introduction to Machine Learning recommendation service</span></span>
<span data-ttu-id="8c5e7-113">Рекомендации предоставляются через службу рекомендаций машинного обучения при выполнении сборки модели рекомендаций на основе следующих данных.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-113">Recommendations via the Machine Learning recommendation service are enabled when you build a recommendation model based on the following data:</span></span>

* <span data-ttu-id="8c5e7-114">Репозиторий элементов, которые необходимо рекомендовать, также называемый каталогом.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-114">A repository of the items you want to recommend, also known as a catalog</span></span>
* <span data-ttu-id="8c5e7-115">Данные, представляющие использование элементов каждым пользователем или сеансом (их можно получить со временем с помощью функции сбора данных, а не как часть примера приложения).</span><span class="sxs-lookup"><span data-stu-id="8c5e7-115">Data representing the usage of items per user or session (this can be acquired over time via data acquisition, not as part of the sample app)</span></span>

<span data-ttu-id="8c5e7-116">После создания модели рекомендаций ее можно использовать для прогнозирования элементов, в которых может быть заинтересован пользователь, в соответствии с выбранным им набором элементов (или элементом).</span><span class="sxs-lookup"><span data-stu-id="8c5e7-116">After a recommendation model is built, you can use it to predict items that a user might be interested in, according to a set of items (or a single item) the user selects.</span></span>

<span data-ttu-id="8c5e7-117">Чтобы выполнить предыдущий сценарий, выполните следующие действия в службе рекомендаций машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-117">To enable the previous scenario, do the following in the Machine Learning recommendation service:</span></span>

* <span data-ttu-id="8c5e7-118">Создание модели. Модель — это логический контейнер, содержащий данные (данные каталога и данные об использовании) и модели прогнозирования.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-118">Create a model: This is a logical container that holds the data (catalog and usage) and the prediction model(s).</span></span> <span data-ttu-id="8c5e7-119">Каждый контейнер модели определяется уникальным идентификатором, который выдается при его создании.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-119">Each model container is identified via a unique ID, which is allocated when it is created.</span></span> <span data-ttu-id="8c5e7-120">Этот идентификатор называется идентификатором модели и используется большинством API.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-120">This ID is called the model ID, and it is used by most of the APIs.</span></span> 
* <span data-ttu-id="8c5e7-121">Загрузка модели в каталог. После создания контейнера модели можно связать с ним каталог.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-121">Upload to catalog: When a model container is created, you can associate to it a catalog.</span></span>

<span data-ttu-id="8c5e7-122">**Примечание.** Создание и отправка модели в каталог обычно выполняются один раз в течение жизненного цикла модели.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-122">**Note**: Creating a model and uploading to a catalog are usually performed once for the model lifecycle.</span></span>

* <span data-ttu-id="8c5e7-123">Загрузка данных об использовании. Это действие позволяет добавить данные об использовании в контейнер модели.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-123">Upload usage: This adds usage data to the model container.</span></span>
* <span data-ttu-id="8c5e7-124">Выполнение сборки модели рекомендаций. Когда будет получено достаточное количество данных, вы можете создать модель рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-124">Build a recommendation model: After you have enough data, you can build the recommendation model.</span></span> <span data-ttu-id="8c5e7-125">В этой операции используются продвинутые алгоритмы машинного обучения для создания модели рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-125">This operation uses the top Machine Learning algorithms to create a recommendation model.</span></span> <span data-ttu-id="8c5e7-126">Каждая сборка связана с уникальным идентификатором.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-126">Each build is associated with a unique ID.</span></span> <span data-ttu-id="8c5e7-127">Нужно сохранить этот идентификатор, так как он необходим для работы некоторых API.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-127">You need to keep a record of this ID because it is necessary for the functionality of some APIs.</span></span>
* <span data-ttu-id="8c5e7-128">Мониторинг процесса выполнения сборки. Сборка модели рекомендаций представляет собой асинхронную операцию и может занять от нескольких минут до нескольких часов в зависимости от объема данных (данных каталога и данных об использовании) и параметров сборки.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-128">Monitor the building process: A recommendation model build is an asynchronous operation, and it can take from several minutes to several hours, depending on the amount of data (catalog and usage) and the build parameters.</span></span> <span data-ttu-id="8c5e7-129">Поэтому необходимо следить за этим процессом.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-129">Therefore, you need to monitor the build.</span></span> <span data-ttu-id="8c5e7-130">Модель рекомендаций будет создана, только если связанный процесс сборки завершится успешно.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-130">A recommendation model is created only if its associated build completes successfully.</span></span>
* <span data-ttu-id="8c5e7-131">(Необязательно) Выбор активной сборки модели рекомендаций. Этот шаг необходим только при наличии нескольких созданных моделей рекомендаций в контейнере моделей.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-131">(Optional) Choose an active recommendation model build: This step is only necessary if you have more than one recommendation model built in your model container.</span></span> <span data-ttu-id="8c5e7-132">Все запросы на получение рекомендаций без указания активной модели рекомендаций будут автоматически перенаправляться системой на активную сборку, используемую по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-132">Any request to get recommendations without indicating the active recommendation model is redirected automatically by the system to the default active build.</span></span> 

<span data-ttu-id="8c5e7-133">**Примечание**.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-133">**Note**: An active recommendation model is production ready and it is built for production workload.</span></span> <span data-ttu-id="8c5e7-134">Активная модель рекомендаций готова к использованию в рабочей среде и рассчитана на рабочую нагрузку, в отличие от неактивной модели рекомендаций, которая размещается в среде, подобной среде тестирования (иногда называемой промежуточной).</span><span class="sxs-lookup"><span data-stu-id="8c5e7-134">This differs from a non-active recommendation model, which stays in a test-like environment (sometimes called staging).</span></span>

* <span data-ttu-id="8c5e7-135">Получение рекомендаций. После создания модели рекомендаций можно активировать рекомендации для одного выбранного элемента или выбранного списка элементов.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-135">Get recommendations: After you have a recommendation model, you can trigger recommendations for a single item or a list of items that you select.</span></span> 

<span data-ttu-id="8c5e7-136">Обычно функция получения рекомендаций вызывается на определенный период времени.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-136">You will usually invoke Get Recommendation for a certain period of time.</span></span> <span data-ttu-id="8c5e7-137">В этот период времени можно перенаправить данные об использовании обратно в систему рекомендаций машинного обучения, которая добавит эти данные в контейнер указанной модели.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-137">During that period of time, you can redirect usage data to the Machine Learning recommendation system, which adds this data to the specified model container.</span></span> <span data-ttu-id="8c5e7-138">При наличии достаточного количества данных об использовании можно создать новую модель рекомендаций, которая будет использовать дополнительные данные об использовании.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-138">When you have enough usage data, you can build a new recommendation model that incorporates the additional usage data.</span></span> 

## <a name="prerequisites"></a><span data-ttu-id="8c5e7-139">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="8c5e7-139">Prerequisites</span></span>
* <span data-ttu-id="8c5e7-140">Visual Studio 2013 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="8c5e7-140">Visual Studio 2013 or later</span></span>
* <span data-ttu-id="8c5e7-141">Доступ к Интернету</span><span class="sxs-lookup"><span data-stu-id="8c5e7-141">Internet access</span></span> 
* <span data-ttu-id="8c5e7-142">Подписка на API рекомендаций (https://datamarket.azure.com/dataset/amla/recommendations).</span><span class="sxs-lookup"><span data-stu-id="8c5e7-142">Subscription to the Recommendations API (https://datamarket.azure.com/dataset/amla/recommendations).</span></span>

## <a name="azure-machine-learning-sample-app-solution"></a><span data-ttu-id="8c5e7-143">Пример приложения Машинного обучения Azure</span><span class="sxs-lookup"><span data-stu-id="8c5e7-143">Azure Machine Learning sample app solution</span></span>
<span data-ttu-id="8c5e7-144">Этот пример содержит исходный код, пример файла с данными об использовании и данными каталога, а также указания по скачиванию пакетов, необходимых для компиляции.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-144">This solution contains the source code, sample usage, catalog file, and directives to download the packages that are required for compilation.</span></span>

## <a name="the-apis-used"></a><span data-ttu-id="8c5e7-145">Используемые API</span><span class="sxs-lookup"><span data-stu-id="8c5e7-145">The APIs used</span></span>
<span data-ttu-id="8c5e7-146">Это приложение использует функции рекомендаций машинного обучения через подмножество доступных API.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-146">The application uses Machine Learning recommendation functionality via a subset of available APIs.</span></span> <span data-ttu-id="8c5e7-147">В приложении демонстрируются следующие API:</span><span class="sxs-lookup"><span data-stu-id="8c5e7-147">The following APIs are demonstrated in the application:</span></span>

* <span data-ttu-id="8c5e7-148">Создание модели — создание логического контейнера, содержащего данные и модели рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-148">Create model: Create a logical container to hold data and recommendation models.</span></span> <span data-ttu-id="8c5e7-149">Модель определяется по имени, поэтому нельзя создать две модели с одним и тем же именем.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-149">A model is identified by a name, and you  cannot create more than one model with the same name.</span></span>
* <span data-ttu-id="8c5e7-150">Загрузка файла каталога — загрузка данных каталога.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-150">Upload catalog file: Use to upload catalog data.</span></span>
* <span data-ttu-id="8c5e7-151">Загрузка файла с данными об использовании — загрузка данных об использовании.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-151">Upload usage file: Use to upload usage data.</span></span>
* <span data-ttu-id="8c5e7-152">Активация сборки — создание модели рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-152">Trigger build: Use to create a recommendation model.</span></span>
* <span data-ttu-id="8c5e7-153">Мониторинг выполнения сборки — отслеживание состояния сборки модели рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-153">Monitor build execution: Use to monitor the status of a recommendation model build.</span></span>
* <span data-ttu-id="8c5e7-154">Выбор созданной модели для рекомендаций — указание того, какая модель рекомендаций будет использоваться по умолчанию для определенного контейнера моделей.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-154">Choose a built model for recommendation: Use to indicate which recommendation model to use by default for a certain model container.</span></span> <span data-ttu-id="8c5e7-155">Этот шаг необходим, только если у вас есть несколько моделей рекомендаций и вы хотите использовать неактивную модель рекомендаций в качестве активной.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-155">This step is necessary only if you have more than one recommendation model and you want to activate a non-active build as the active recommendation model.</span></span>
* <span data-ttu-id="8c5e7-156">Получение рекомендаций — получение рекомендуемых элементов для одного выбранного элемента или набора элементов.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-156">Get recommendation: Use to retrieve recommended items according to a given single item or a set of items.</span></span> 

<span data-ttu-id="8c5e7-157">Полное описание API см. в документации к Microsoft Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-157">For a complete description of the APIs, please see the Microsoft Azure Marketplace documentation.</span></span> 

<span data-ttu-id="8c5e7-158">**Примечание.** Для модели со временем может быть создано несколько сборок (не одновременно).</span><span class="sxs-lookup"><span data-stu-id="8c5e7-158">**Note**: A model can have several builds over time (not simultaneously).</span></span> <span data-ttu-id="8c5e7-159">Каждая сборка может быть создана с одним и тем же или обновленным каталогом и дополнительными данными об использовании.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-159">Each build is created with the same or an updated catalog and additional usage data.</span></span>

## <a name="common-pitfalls"></a><span data-ttu-id="8c5e7-160">Типичные проблемы</span><span class="sxs-lookup"><span data-stu-id="8c5e7-160">Common pitfalls</span></span>
* <span data-ttu-id="8c5e7-161">Для запуска примера необходимо указать имя пользователя и ключ основной учетной записи Microsoft Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-161">You need to provide your user name and your Microsoft Azure Marketplace primary account key to run the sample app.</span></span>
* <span data-ttu-id="8c5e7-162">Повторно запустить один и тот же пример приложения невозможно.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-162">Running the sample app consecutively will fail.</span></span> <span data-ttu-id="8c5e7-163">Приложение выполняет создание, загрузку, мониторинг процесса сборки и получение рекомендаций для определенного имени модели. Если не изменить имя модели при следующем последовательном запуске, запуск завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-163">The application flow includes creating, uploading, building the monitor, and getting recommendations from a predefined model; therefore, it will fail on consecutive execution if you do not change the model name between invocations.</span></span>
* <span data-ttu-id="8c5e7-164">Рекомендации могут вернуться без данных.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-164">Recommendations might return without data.</span></span> <span data-ttu-id="8c5e7-165">В примере приложения используются каталог и файл с данными об использовании очень маленького размера.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-165">The sample app uses a very small catalog and usage file.</span></span> <span data-ttu-id="8c5e7-166">Поэтому для некоторых элементов каталога не будет рекомендуемых элементов.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-166">Therefore, some items from the catalog will have no recommended items.</span></span>

## <a name="disclaimer"></a><span data-ttu-id="8c5e7-167">Отказ от ответственности</span><span class="sxs-lookup"><span data-stu-id="8c5e7-167">Disclaimer</span></span>
<span data-ttu-id="8c5e7-168">Пример приложения не предназначен для использования в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-168">The sample app is not intended to be run in a production environment.</span></span> <span data-ttu-id="8c5e7-169">В каталоге содержится очень маленький объем данных, на основе чего нельзя создать информативную модель рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-169">The data provided in the catalog is very small, and it will not provide a meaningful recommendation model.</span></span> <span data-ttu-id="8c5e7-170">Эти данные предоставлены для демонстрации.</span><span class="sxs-lookup"><span data-stu-id="8c5e7-170">The data is provided as a demonstration.</span></span> 

