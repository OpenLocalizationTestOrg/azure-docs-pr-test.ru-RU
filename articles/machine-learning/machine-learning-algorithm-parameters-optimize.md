---
title: "aaaOptimize алгоритмов в машинном обучении Azure | Документы Microsoft"
description: "Объясняет, как задать toochoose hello оптимальный параметр для алгоритма в машинном обучении Azure."
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 6717e30e-b8d8-4cc1-ad0b-1d4727928d32
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/29/2017
ms.author: bradsev
ms.openlocfilehash: fbf2f71abdbce19483fb048d67a39cbb368a928e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="choose-parameters-toooptimize-your-algorithms-in-azure-machine-learning"></a><span data-ttu-id="f0293-103">Выберите параметры toooptimize алгоритмов в машинном обучении Azure</span><span class="sxs-lookup"><span data-stu-id="f0293-103">Choose parameters toooptimize your algorithms in Azure Machine Learning</span></span>
<span data-ttu-id="f0293-104">Описывается, как задать toochoose hello правой hyperparameter для алгоритма в машинном обучении Azure.</span><span class="sxs-lookup"><span data-stu-id="f0293-104">This topic describes how toochoose hello right hyperparameter set for an algorithm in Azure Machine Learning.</span></span> <span data-ttu-id="f0293-105">Большинство алгоритмов машинного обучения имеют tooset параметров.</span><span class="sxs-lookup"><span data-stu-id="f0293-105">Most machine learning algorithms have parameters tooset.</span></span> <span data-ttu-id="f0293-106">Во время обучения модели, необходимо tooprovide значения для этих параметров.</span><span class="sxs-lookup"><span data-stu-id="f0293-106">When you train a model, you need tooprovide values for those parameters.</span></span> <span data-ttu-id="f0293-107">эффективность Hello hello обученной модели зависит от параметров модели hello, для выбора.</span><span class="sxs-lookup"><span data-stu-id="f0293-107">hello efficacy of hello trained model depends on hello model parameters that you choose.</span></span> <span data-ttu-id="f0293-108">Hello процесс нахождения hello оптимальный набор параметров называется *модели выбора*.</span><span class="sxs-lookup"><span data-stu-id="f0293-108">hello process of finding hello optimal set of parameters is known as *model selection*.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

<span data-ttu-id="f0293-109">Существуют различные способы toodo модели выбора.</span><span class="sxs-lookup"><span data-stu-id="f0293-109">There are various ways toodo model selection.</span></span> <span data-ttu-id="f0293-110">В машинном обучении перекрестной проверки является одним из методов hello чаще всего используются для выбора модели и является механизм выбора модели по умолчанию hello в машинном обучении Azure.</span><span class="sxs-lookup"><span data-stu-id="f0293-110">In machine learning, cross-validation is one of hello most widely used methods for model selection, and it is hello default model selection mechanism in Azure Machine Learning.</span></span> <span data-ttu-id="f0293-111">Так как в машинном обучении Azure поддерживаются языки R и Python, вы всегда можете реализовать свой механизм выбора модели, используя привычные вам средства.</span><span class="sxs-lookup"><span data-stu-id="f0293-111">Because Azure Machine Learning supports both R and Python, you can always implement their own model selection mechanisms by using either R or Python.</span></span>

<span data-ttu-id="f0293-112">Hello процесс поиска hello оптимальный параметр набор состоит из четырех этапов:</span><span class="sxs-lookup"><span data-stu-id="f0293-112">There are four steps in hello process of finding hello best parameter set:</span></span>

1. <span data-ttu-id="f0293-113">**Укажите параметр пространство hello**: hello алгоритм, сначала следует решить, требуется tooconsider значения параметров hello.</span><span class="sxs-lookup"><span data-stu-id="f0293-113">**Define hello parameter space**: For hello algorithm, first decide hello exact parameter values you want tooconsider.</span></span>
2. <span data-ttu-id="f0293-114">**Задать параметры перекрестной проверки hello**: решить, каким образом свертывает toochoose перекрестной проверки для набора данных hello.</span><span class="sxs-lookup"><span data-stu-id="f0293-114">**Define hello cross-validation settings**: Decide how toochoose cross-validation folds for hello dataset.</span></span>
3. <span data-ttu-id="f0293-115">**Определение метрики hello**: решить, какие метрики toouse определить лучший набор параметров, таких как точность hello, среднеквадратичная ошибки, точность, отзыв или f оценка.</span><span class="sxs-lookup"><span data-stu-id="f0293-115">**Define hello metric**: Decide what metric toouse for determining hello best set of parameters, such as accuracy, root mean squared error, precision, recall, or f-score.</span></span>
4. <span data-ttu-id="f0293-116">**Обучение, оценки и сравнить**: для каждого уникального сочетания значений параметров hello жизнедеятельности и основанное на определении метрика ошибки hello перекрестной проверки.</span><span class="sxs-lookup"><span data-stu-id="f0293-116">**Train, evaluate, and compare**: For each unique combination of hello parameter values, cross-validation is carried out by and based on hello error metric you define.</span></span> <span data-ttu-id="f0293-117">После оценки и сравнения можно выбрать модель антивирусными hello.</span><span class="sxs-lookup"><span data-stu-id="f0293-117">After evaluation and comparison, you can choose hello best-performing model.</span></span>

<span data-ttu-id="f0293-118">Следующие изображения Hello иллюстрирует показано, как это можно сделать в машинном обучении Azure.</span><span class="sxs-lookup"><span data-stu-id="f0293-118">hello following image illustrates shows how this can be achieved in Azure Machine Learning.</span></span>

![Найти оптимальный набор параметров hello](./media/machine-learning-algorithm-parameters-optimize/fig1.png)

## <a name="define-hello-parameter-space"></a><span data-ttu-id="f0293-120">Укажите параметр пространство hello</span><span class="sxs-lookup"><span data-stu-id="f0293-120">Define hello parameter space</span></span>
<span data-ttu-id="f0293-121">Можно определить параметр hello на этапе инициализации hello модели.</span><span class="sxs-lookup"><span data-stu-id="f0293-121">You can define hello parameter set at hello model initialization step.</span></span> <span data-ttu-id="f0293-122">Hello параметра область всех алгоритмов машинного обучения имеет два режима учителя: *один параметр* и *диапазон параметров*.</span><span class="sxs-lookup"><span data-stu-id="f0293-122">hello parameter pane of all machine learning algorithms has two trainer modes: *Single Parameter* and *Parameter Range*.</span></span> <span data-ttu-id="f0293-123">Выберите режим с диапазоном параметров.</span><span class="sxs-lookup"><span data-stu-id="f0293-123">Choose Parameter Range mode.</span></span> <span data-ttu-id="f0293-124">В этом режиме каждому параметру можно присвоить несколько значений.</span><span class="sxs-lookup"><span data-stu-id="f0293-124">In Parameter Range mode, you can enter multiple values for each parameter.</span></span> <span data-ttu-id="f0293-125">Можно ввести значения с разделителями запятыми в текстовом поле hello.</span><span class="sxs-lookup"><span data-stu-id="f0293-125">You can enter comma-separated values in hello text box.</span></span>

![Двухклассовое увеличивающееся дерево принятия решений](./media/machine-learning-algorithm-parameters-optimize/fig2.png)

 <span data-ttu-id="f0293-127">Кроме того, можно определить hello максимальное и минимальное точки сетки hello и hello общее число точек toobe с **использовать диапазон построитель**.</span><span class="sxs-lookup"><span data-stu-id="f0293-127">Alternately, you can define hello maximum and minimum points of hello grid and hello total number of points toobe generated with **Use Range Builder**.</span></span> <span data-ttu-id="f0293-128">По умолчанию значения параметров hello создаются на линейной шкале.</span><span class="sxs-lookup"><span data-stu-id="f0293-128">By default, hello parameter values are generated on a linear scale.</span></span> <span data-ttu-id="f0293-129">Но если **логарифмической шкалы** проверяется, hello значения создаются в hello логарифмической шкалы (отношение hello hello соседних точек является константой, а не их различие).</span><span class="sxs-lookup"><span data-stu-id="f0293-129">But if **Log Scale** is checked, hello values are generated in hello log scale (that is, hello ratio of hello adjacent points is constant instead of their difference).</span></span> <span data-ttu-id="f0293-130">Диапазон для целочисленных параметров можно определить с помощью дефиса.</span><span class="sxs-lookup"><span data-stu-id="f0293-130">For integer parameters, you can define a range by using a hyphen.</span></span> <span data-ttu-id="f0293-131">Например, «1-10» означает, что все целые числа от 1 до 10 (включительно для обоих) формируют набор параметров hello.</span><span class="sxs-lookup"><span data-stu-id="f0293-131">For example, “1-10” means that all integers between 1 and 10 (both inclusive) form hello parameter set.</span></span> <span data-ttu-id="f0293-132">Также поддерживается смешанный режим.</span><span class="sxs-lookup"><span data-stu-id="f0293-132">A mixed mode is also supported.</span></span> <span data-ttu-id="f0293-133">Здравствуйте набор параметров, например, «1-10, 20, 50» будет включать целые числа, 1-10, 20 до 50.</span><span class="sxs-lookup"><span data-stu-id="f0293-133">For example, hello parameter set “1-10, 20, 50” would include integers 1-10, 20, and 50.</span></span>

![Двухклассовое увеличивающееся дерево принятия решений, диапазон параметров](./media/machine-learning-algorithm-parameters-optimize/fig3.png)

## <a name="define-cross-validation-folds"></a><span data-ttu-id="f0293-135">Определение сверток перекрестной проверки</span><span class="sxs-lookup"><span data-stu-id="f0293-135">Define cross-validation folds</span></span>
<span data-ttu-id="f0293-136">Hello [секционирование и выборка] [ partition-and-sample] модуль может быть используется toorandomly назначения сверток toohello данных.</span><span class="sxs-lookup"><span data-stu-id="f0293-136">hello [Partition and Sample][partition-and-sample] module can be used toorandomly assign folds toohello data.</span></span> <span data-ttu-id="f0293-137">Следующий пример конфигурации для модуля "hello" hello мы определение пяти сверткам и случайным образом назначить Свертка числа экземпляров toohello образца.</span><span class="sxs-lookup"><span data-stu-id="f0293-137">In hello following sample configuration for hello module, we define five folds and randomly assign a fold number toohello sample instances.</span></span>

![Секционирование и выборка](./media/machine-learning-algorithm-parameters-optimize/fig4.png)

## <a name="define-hello-metric"></a><span data-ttu-id="f0293-139">Определение метрики hello</span><span class="sxs-lookup"><span data-stu-id="f0293-139">Define hello metric</span></span>
<span data-ttu-id="f0293-140">Hello [настройки модели Гиперпараметров] [ tune-model-hyperparameters] модуль обеспечивает поддержку эмпирически Выбор hello оптимальный набор параметров для конкретного алгоритма и набора данных.</span><span class="sxs-lookup"><span data-stu-id="f0293-140">hello [Tune Model Hyperparameters][tune-model-hyperparameters] module provides support for empirically choosing hello best set of parameters for a given algorithm and dataset.</span></span> <span data-ttu-id="f0293-141">В дополнение к этому tooother сведения, касающиеся hello обучения модели, hello **свойства** области этот модуль включает hello метрики для определения hello оптимальный набор параметров.</span><span class="sxs-lookup"><span data-stu-id="f0293-141">In addition tooother information regarding training hello model, hello **Properties** pane of this module includes hello metric for determining hello best parameter set.</span></span> <span data-ttu-id="f0293-142">На этой панели также есть два раскрывающихся списка для выбора алгоритмов классификации и регрессии.</span><span class="sxs-lookup"><span data-stu-id="f0293-142">It has two different drop-down list boxes for classification and regression algorithms, respectively.</span></span> <span data-ttu-id="f0293-143">Если алгоритм hello рассматриваемых — это алгоритм классификации, метрика регрессии hello игнорируется и наоборот.</span><span class="sxs-lookup"><span data-stu-id="f0293-143">If hello algorithm under consideration is a classification algorithm, hello regression metric is ignored and vice versa.</span></span> <span data-ttu-id="f0293-144">В данном конкретном примере hello метрика — **точности**.</span><span class="sxs-lookup"><span data-stu-id="f0293-144">In this specific example, hello metric is **Accuracy**.</span></span>   

![Параметры анализа](./media/machine-learning-algorithm-parameters-optimize/fig5.png)

## <a name="train-evaluate-and-compare"></a><span data-ttu-id="f0293-146">Обучение, оценка и сравнение</span><span class="sxs-lookup"><span data-stu-id="f0293-146">Train, evaluate, and compare</span></span>
<span data-ttu-id="f0293-147">Здравствуйте же [настройки модели Гиперпараметров] [ tune-model-hyperparameters] модуль обучает всех hello моделей, которые соответствуют toohello набор параметров, оценивает различные метрики и затем создает hello наилучшего обученной модели, основанной на hello Метрика выбрать.</span><span class="sxs-lookup"><span data-stu-id="f0293-147">hello same [Tune Model Hyperparameters][tune-model-hyperparameters] module trains all hello models that correspond toohello parameter set, evaluates various metrics, and then creates hello best-trained model based on hello metric you choose.</span></span> <span data-ttu-id="f0293-148">Для этого модуля необходимо обязательно предоставить следующие входные данные:</span><span class="sxs-lookup"><span data-stu-id="f0293-148">This module has two mandatory inputs:</span></span>

* <span data-ttu-id="f0293-149">необученный ученик Hello</span><span class="sxs-lookup"><span data-stu-id="f0293-149">hello untrained learner</span></span>
* <span data-ttu-id="f0293-150">набор данных Hello</span><span class="sxs-lookup"><span data-stu-id="f0293-150">hello dataset</span></span>

<span data-ttu-id="f0293-151">модуль Hello также имеет необязательный набор входных данных.</span><span class="sxs-lookup"><span data-stu-id="f0293-151">hello module also has an optional dataset input.</span></span> <span data-ttu-id="f0293-152">Подключите набор данных hello с входными данными для набора данных обязательным toohello сведения свертки.</span><span class="sxs-lookup"><span data-stu-id="f0293-152">Connect hello dataset with fold information toohello mandatory dataset input.</span></span> <span data-ttu-id="f0293-153">Если hello набора данных не назначено никакой информации свертки, 10-кратное перекрестной проверки по умолчанию выполняется автоматически.</span><span class="sxs-lookup"><span data-stu-id="f0293-153">If hello dataset is not assigned any fold information, then a 10-fold cross-validation is automatically executed by default.</span></span> <span data-ttu-id="f0293-154">Если назначение свертки hello не выполняется и проверочного набора данных обеспечивается на порт hello необязательный набор данных, выбран режим обучения и тестирования, и hello первый набор данных является моделью hello используется tootrain для каждой комбинации параметров.</span><span class="sxs-lookup"><span data-stu-id="f0293-154">If hello fold assignment is not done and a validation dataset is provided at hello optional dataset port, then a train-test mode is chosen and hello first dataset is used tootrain hello model for each parameter combination.</span></span>

![Классификатор увеличивающегося дерева решений](./media/machine-learning-algorithm-parameters-optimize/fig6a.png)

<span data-ttu-id="f0293-156">Затем определяется модель Hello hello проверочного набора данных.</span><span class="sxs-lookup"><span data-stu-id="f0293-156">hello model is then evaluated on hello validation dataset.</span></span> <span data-ttu-id="f0293-157">Hello осталось порт вывода модуля отображается hello различных показателей в качестве значений параметров.</span><span class="sxs-lookup"><span data-stu-id="f0293-157">hello left output port of hello module shows different metrics as functions of parameter values.</span></span> <span data-ttu-id="f0293-158">Hello правой выходной порт дает hello обученной модели, соответствующий toohello антивирусными модели в соответствии с выбранной метрики toohello (**точности** в данном случае).</span><span class="sxs-lookup"><span data-stu-id="f0293-158">hello right output port gives hello trained model that corresponds toohello best-performing model according toohello chosen metric (**Accuracy** in this case).</span></span>  

![Проверочный набор данных](./media/machine-learning-algorithm-parameters-optimize/fig6b.png)

<span data-ttu-id="f0293-160">Вы увидите hello точные параметры, выбранные визуализация hello правой выходной порт.</span><span class="sxs-lookup"><span data-stu-id="f0293-160">You can see hello exact parameters chosen by visualizing hello right output port.</span></span> <span data-ttu-id="f0293-161">Эту модель можно использовать для оценки проверочного набора или в развернутой веб-службе после сохранения обученной модели.</span><span class="sxs-lookup"><span data-stu-id="f0293-161">This model can be used in scoring a test set or in an operationalized web service after saving as a trained model.</span></span>

<!-- Module References -->
[partition-and-sample]: https://msdn.microsoft.com/library/azure/a8726e34-1b3e-4515-b59a-3e4a475654b8/
[tune-model-hyperparameters]: https://msdn.microsoft.com/library/azure/038d91b6-c2f2-42a1-9215-1f2c20ed1b40/
