---
title: "Перемещение данных в базу данных SQL Azure для Машинного обучения Azure | Документация Майкрософт"
description: "Создание таблицы SQL и загрузка данных в таблицу SQL"
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 50f8b862-4d32-44b2-a1e2-4fbc8024acaa
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/29/2017
ms.author: bradsev
ms.openlocfilehash: dfd1649b666c3793339f8624bdf77aa92cca4e88
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="move-data-to-an-azure-sql-database-for-azure-machine-learning"></a><span data-ttu-id="cf384-103">Перемещение данных в базу данных SQL Azure для машинного обучения Azure</span><span class="sxs-lookup"><span data-stu-id="cf384-103">Move data to an Azure SQL Database for Azure Machine Learning</span></span>
<span data-ttu-id="cf384-104">В этой статье описаны варианты перемещения данных из неструктурированных файлов (в формате CSV или TSV) или с локального сервера SQL Server в базу данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="cf384-104">This topic outlines the options for moving data either from flat files (CSV or TSV formats) or from data stored in an on-premises SQL Server to an Azure SQL database.</span></span> <span data-ttu-id="cf384-105">Эти задачи перемещения данных в облако являются этапом процесса обработки и анализа данных группы.</span><span class="sxs-lookup"><span data-stu-id="cf384-105">These tasks for moving data to the cloud are part of the Team Data Science Process.</span></span>

<span data-ttu-id="cf384-106">Описание вариантов перемещения данных на локальный сервер SQL Server для машинного обучения см. в статье [Перемещение данных в SQL Server на виртуальной машине Azure](machine-learning-data-science-move-sql-server-virtual-machine.md).</span><span class="sxs-lookup"><span data-stu-id="cf384-106">For a topic that outlines the options for moving data to an on-premises SQL Server for Machine Learning, see [Move data to SQL Server on an Azure virtual machine](machine-learning-data-science-move-sql-server-virtual-machine.md).</span></span>

<span data-ttu-id="cf384-107">В следующем **меню** содержатся ссылки на разделы, описывающие прием данных в целевых средах, где они могут храниться и обрабатываться процессом обработки и анализа данных группы (TDSP).</span><span class="sxs-lookup"><span data-stu-id="cf384-107">The following **menu** links to topics that describe how to ingest data into target environments where the data can be stored and processed during the Team Data Science Process (TDSP).</span></span>

[!INCLUDE [cap-ingest-data-selector](../../includes/cap-ingest-data-selector.md)]

<span data-ttu-id="cf384-108">В следующей таблице перечислены варианты перемещения данных в базу данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="cf384-108">The following table summarizes the options for moving data to an Azure SQL Database.</span></span>

| <span data-ttu-id="cf384-109"><b>Источник</b></span><span class="sxs-lookup"><span data-stu-id="cf384-109"><b>SOURCE</b></span></span> | <span data-ttu-id="cf384-110"><b>Назначение: база данных SQL Azure</b></span><span class="sxs-lookup"><span data-stu-id="cf384-110"><b>DESTINATION: Azure SQL Database</b></span></span> |
| --- | --- |
| <span data-ttu-id="cf384-111"><b>Неструктурированный файл (в формате CSV или TSV)</b></span><span class="sxs-lookup"><span data-stu-id="cf384-111"><b>Flat file (CSV or TSV formatted)</b></span></span> |<span data-ttu-id="cf384-112"><a href="#bulk-insert-sql-query">SQL-запрос на массовую вставку</span><span class="sxs-lookup"><span data-stu-id="cf384-112"><a href="#bulk-insert-sql-query">Bulk Insert SQL Query</span></span> |
| <span data-ttu-id="cf384-113"><b>Локальный сервер SQL Server</b></span><span class="sxs-lookup"><span data-stu-id="cf384-113"><b>On-premises SQL Server</b></span></span> |<span data-ttu-id="cf384-114">1. <a href="#export-flat-file">Экспорт в неструктурированный файл</span><span class="sxs-lookup"><span data-stu-id="cf384-114">1. <a href="#export-flat-file">Export to Flat File</span></span><br> <span data-ttu-id="cf384-115">2. <a href="#insert-tables-bcp">Мастер миграции баз данных SQL</span><span class="sxs-lookup"><span data-stu-id="cf384-115">2. <a href="#insert-tables-bcp">SQL Database Migration Wizard</span></span><br> <span data-ttu-id="cf384-116">3. <a href="#db-migration">Архивация и восстановление базы данных</span><span class="sxs-lookup"><span data-stu-id="cf384-116">3. <a href="#db-migration">Database back up and restore</span></span><br> <span data-ttu-id="cf384-117">4. <a href="#adf"> Фабрика данных Azure</span><span class="sxs-lookup"><span data-stu-id="cf384-117">4. <a href="#adf">Azure Data Factory</span></span> |

## <span data-ttu-id="cf384-118"><a name="prereqs"></a>Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="cf384-118"><a name="prereqs"></a>Prerequisites</span></span>
<span data-ttu-id="cf384-119">Для выполнения описанных процедур вам необходимы следующие компоненты:</span><span class="sxs-lookup"><span data-stu-id="cf384-119">The procedures outlined here require that you have:</span></span>

* <span data-ttu-id="cf384-120"><seg>
  **Подписка Azure**.</seg></span><span class="sxs-lookup"><span data-stu-id="cf384-120">An **Azure subscription**.</span></span> <span data-ttu-id="cf384-121">Если у вас нет подписки, вы можете зарегистрироваться для получения [бесплатной пробной версии](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="cf384-121">If you do not have a subscription, you can sign up for a [free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="cf384-122">**Azure storage account**.</span><span class="sxs-lookup"><span data-stu-id="cf384-122">An **Azure storage account**.</span></span> <span data-ttu-id="cf384-123">Учетная запись хранения Azure используется в этом учебнике для хранения данных.</span><span class="sxs-lookup"><span data-stu-id="cf384-123">You use an Azure storage account for storing the data in this tutorial.</span></span> <span data-ttu-id="cf384-124">Если у вас ее нет, см. раздел [Создание учетной записи хранения](../storage/common/storage-create-storage-account.md#create-a-storage-account).</span><span class="sxs-lookup"><span data-stu-id="cf384-124">If you don't have an Azure storage account, see the [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) article.</span></span> <span data-ttu-id="cf384-125">После создания учетной записи хранения необходимо получить ключ, используемый для доступа к хранилищу.</span><span class="sxs-lookup"><span data-stu-id="cf384-125">After you have created the storage account, you need to obtain the account key used to access the storage.</span></span> <span data-ttu-id="cf384-126">Ознакомьтесь с разделом [Управление ключами доступа к хранилищу](../storage/common/storage-create-storage-account.md#manage-your-storage-access-keys).</span><span class="sxs-lookup"><span data-stu-id="cf384-126">See [Manage your storage access keys](../storage/common/storage-create-storage-account.md#manage-your-storage-access-keys).</span></span>
* <span data-ttu-id="cf384-127">Доступ к **базе данных SQL Azure**.</span><span class="sxs-lookup"><span data-stu-id="cf384-127">Access to an **Azure SQL Database**.</span></span> <span data-ttu-id="cf384-128">Если требуется настроить базу данных SQL Azure, то обратитесь к статье [Руководство по базам данных SQL: создание базы данных SQL за несколько минут с помощью портала Azure](../sql-database/sql-database-get-started.md) , которая содержит сведения о том, как подготовить новый экземпляр базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="cf384-128">If you must set up an Azure SQL Database, [Getting Started with Microsoft Azure SQL Database](../sql-database/sql-database-get-started.md) provides information on how to provision a new instance of an Azure SQL Database.</span></span>
* <span data-ttu-id="cf384-129">Установленная и настроенная локальная среда **Azure PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="cf384-129">Installed and configured **Azure PowerShell** locally.</span></span> <span data-ttu-id="cf384-130">Инструкции см. в статье [Приступая к работе с командлетами Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="cf384-130">For instructions, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="cf384-131">**Данные**: процессы миграции демонстрируются с помощью [набора данных о такси Нью-Йорка](http://chriswhong.com/open-data/foil_nyc_taxi/).</span><span class="sxs-lookup"><span data-stu-id="cf384-131">**Data**: The migration processes are demonstrated using the [NYC Taxi dataset](http://chriswhong.com/open-data/foil_nyc_taxi/).</span></span> <span data-ttu-id="cf384-132">Набор данных о такси Нью-Йорка содержит сведения о поездках и тарифах и доступен в хранилище BLOB-объектов Azure [здесь](http://www.andresmh.com/nyctaxitrips/).</span><span class="sxs-lookup"><span data-stu-id="cf384-132">The NYC Taxi dataset contains information on trip data and fairs and is available on Azure blob storage: [NYC Taxi Data](http://www.andresmh.com/nyctaxitrips/).</span></span> <span data-ttu-id="cf384-133">Пример и описание этих файлов приведены в [описании набора данных «Поездки такси Нью-Йорка»](machine-learning-data-science-process-sql-walkthrough.md#dataset).</span><span class="sxs-lookup"><span data-stu-id="cf384-133">A sample and description of these files are provided in [NYC Taxi Trips Dataset Description](machine-learning-data-science-process-sql-walkthrough.md#dataset).</span></span>

<span data-ttu-id="cf384-134">Вы можете либо адаптировать описанные здесь процедуры к собственному набору данных, либо выполнить описанные действия с набором данных о такси Нью-Йорка.</span><span class="sxs-lookup"><span data-stu-id="cf384-134">You can either adapt the procedures described here to a set of your own data or follow the steps as described by using the NYC Taxi dataset.</span></span> <span data-ttu-id="cf384-135">Для передачи набора данных о такси Нью-Йорка в локальную базу данных SQL Server выполните процедуру, описанную в разделе [Массовый импорт данных в базу данных SQL Server](machine-learning-data-science-process-sql-walkthrough.md#dbload).</span><span class="sxs-lookup"><span data-stu-id="cf384-135">To upload the NYC Taxi dataset into your on-premises SQL Server database, follow the procedure outlined in [Bulk Import Data into SQL Server Database](machine-learning-data-science-process-sql-walkthrough.md#dbload).</span></span> <span data-ttu-id="cf384-136">Эти инструкции предназначены для SQL Server на виртуальной машине Azure. Процедура передачи для локального SQL Server идентична.</span><span class="sxs-lookup"><span data-stu-id="cf384-136">These instructions are for a SQL Server on an Azure Virtual Machine, but the procedure for uploading to the on-premises SQL Server is the same.</span></span>

## <span data-ttu-id="cf384-137"><a name="file-to-azure-sql-database"></a> Перемещение данных из неструктурированного файла в базу данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="cf384-137"><a name="file-to-azure-sql-database"></a> Moving data from a flat file source to an Azure SQL database</span></span>
<span data-ttu-id="cf384-138">Данные в неструктурированных файлах (форматов CSV или TSV) можно переместить в базу данных SQL Azure с помощью SQL-запроса на массовую вставку данных.</span><span class="sxs-lookup"><span data-stu-id="cf384-138">Data in flat files (CSV or TSV formatted) can be moved to an Azure SQL database using a Bulk Insert SQL Query.</span></span>

### <span data-ttu-id="cf384-139"><a name="bulk-insert-sql-query"></a>SQL-запрос на массовую вставку</span><span class="sxs-lookup"><span data-stu-id="cf384-139"><a name="bulk-insert-sql-query"></a> Bulk Insert SQL Query</span></span>
<span data-ttu-id="cf384-140">Этапы выполнения процедуры с использованием SQL-запроса на массовую вставку аналогичны этапам процедуры перемещения данных из неструктурированного файла в SQL Server на виртуальной машине Azure.</span><span class="sxs-lookup"><span data-stu-id="cf384-140">The steps for the procedure using the Bulk Insert SQL Query are similar to those covered in the sections for moving data from a flat file source to SQL Server on an Azure VM.</span></span> <span data-ttu-id="cf384-141">Дополнительные сведения см. в разделе [SQL-запрос на массовую вставку](machine-learning-data-science-move-sql-server-virtual-machine.md#insert-tables-bulkquery).</span><span class="sxs-lookup"><span data-stu-id="cf384-141">For details, see [Bulk Insert SQL Query](machine-learning-data-science-move-sql-server-virtual-machine.md#insert-tables-bulkquery).</span></span>

## <span data-ttu-id="cf384-142"><a name="sql-on-prem-to-sazure-sql-database"></a>Перемещение данных с локального сервера SQL Server в базу данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="cf384-142"><a name="sql-on-prem-to-sazure-sql-database"></a> Moving Data from on-premises SQL Server to an Azure SQL database</span></span>
<span data-ttu-id="cf384-143">Если источник данных расположен на локальном сервере SQL Server, существуют различные варианты перемещения данных в базу данных Azure SQL:</span><span class="sxs-lookup"><span data-stu-id="cf384-143">If the source data is stored in an on-premises SQL Server, there are various possibilities for moving the data to an Azure SQL database:</span></span>

1. [<span data-ttu-id="cf384-144">Экспорт в неструктурированный файл</span><span class="sxs-lookup"><span data-stu-id="cf384-144">Export to Flat File</span></span>](#export-flat-file)
2. [<span data-ttu-id="cf384-145">Мастер миграции баз данных SQL</span><span class="sxs-lookup"><span data-stu-id="cf384-145">SQL Database Migration Wizard</span></span>](#insert-tables-bcp)
3. [<span data-ttu-id="cf384-146">Архивация и восстановление базы данных</span><span class="sxs-lookup"><span data-stu-id="cf384-146">Database back up and restore</span></span>](#db-migration)
4. [<span data-ttu-id="cf384-147">Фабрика данных Azure</span><span class="sxs-lookup"><span data-stu-id="cf384-147">Azure Data Factory</span></span>](#adf)

<span data-ttu-id="cf384-148">Первые три этапа процедуры очень похожи на соответствующие этапы процедуры, описанной в статье [Перемещение данных в SQL Server на виртуальной машине Azure](machine-learning-data-science-move-sql-server-virtual-machine.md) .</span><span class="sxs-lookup"><span data-stu-id="cf384-148">The steps for the first three are very similar to those sections in [Move data to SQL Server on an Azure virtual machine](machine-learning-data-science-move-sql-server-virtual-machine.md) that cover these same procedures.</span></span> <span data-ttu-id="cf384-149">В следующих инструкциях приводятся ссылки на соответствующие разделы этой статьи.</span><span class="sxs-lookup"><span data-stu-id="cf384-149">Links to the appropriate sections in that topic are provided in the following instructions.</span></span>

### <span data-ttu-id="cf384-150"><a name="export-flat-file"></a>Экспорт в неструктурированный файл</span><span class="sxs-lookup"><span data-stu-id="cf384-150"><a name="export-flat-file"></a>Export to Flat File</span></span>
<span data-ttu-id="cf384-151">Этапы экспорта в неструктурированный файл похожи на этапы экспорта, описанные в разделе [Экспорт в неструктурированный файл](machine-learning-data-science-move-sql-server-virtual-machine.md#export-flat-file).</span><span class="sxs-lookup"><span data-stu-id="cf384-151">The steps for this exporting to a flat file are similar to those covered in [Export to Flat File](machine-learning-data-science-move-sql-server-virtual-machine.md#export-flat-file).</span></span>

### <span data-ttu-id="cf384-152"><a name="insert-tables-bcp"></a>Мастер миграции баз данных SQL</span><span class="sxs-lookup"><span data-stu-id="cf384-152"><a name="insert-tables-bcp"></a>SQL Database Migration Wizard</span></span>
<span data-ttu-id="cf384-153">Этапы использования мастера миграции Базы данных SQL похожи на аналогичные этапы, описанные в разделе [Мастер миграции баз данных SQL](machine-learning-data-science-move-sql-server-virtual-machine.md#sql-migration).</span><span class="sxs-lookup"><span data-stu-id="cf384-153">The steps for using the SQL Database Migration Wizard are similar to those covered in [SQL Database Migration Wizard](machine-learning-data-science-move-sql-server-virtual-machine.md#sql-migration).</span></span>

### <span data-ttu-id="cf384-154"><a name="db-migration"></a>Архивация и восстановление базы данных</span><span class="sxs-lookup"><span data-stu-id="cf384-154"><a name="db-migration"></a>Database back up and restore</span></span>
<span data-ttu-id="cf384-155">Этапы архивации и восстановления базы данных похожи на аналогичные этапы, описанные в разделе [Восстановление и резервное копирование базы данных](machine-learning-data-science-move-sql-server-virtual-machine.md#sql-backup).</span><span class="sxs-lookup"><span data-stu-id="cf384-155">The steps for using database back up and restore are similar to those covered in [Database back up and restore](machine-learning-data-science-move-sql-server-virtual-machine.md#sql-backup).</span></span>

### <span data-ttu-id="cf384-156"><a name="adf"></a>Фабрика данных Azure</span><span class="sxs-lookup"><span data-stu-id="cf384-156"><a name="adf"></a>Azure Data Factory</span></span>
<span data-ttu-id="cf384-157">Процедура перемещения данных в базу данных Azure SQL с помощью фабрики данных Azure приведена в разделе [Перенос данных из локального SQL Server в SQL Azure с фабрикой данных Azure](machine-learning-data-science-move-sql-azure-adf.md).</span><span class="sxs-lookup"><span data-stu-id="cf384-157">The procedure for moving data to an Azure SQL database with Azure Data Factory (ADF) is provided in the topic [Move data from an on-premises SQL server to SQL Azure with Azure Data Factory](machine-learning-data-science-move-sql-azure-adf.md).</span></span> <span data-ttu-id="cf384-158">В этой статье показано, как перемещать данные из локальной базы данных SQL Server в базу данных SQL Azure через хранилище BLOB-объектов Azure с помощью фабрики данных Azure.</span><span class="sxs-lookup"><span data-stu-id="cf384-158">This topic shows how to move data from an on-premises SQL Server database to an Azure SQL database via Azure Blob Storage using ADF.</span></span>

<span data-ttu-id="cf384-159">Фабрику данных Azure стоит использовать в том случае, когда данные нужно постоянно переносить в гибридном сценарии, при котором осуществляется доступ как к локальным, так и к облачным ресурсам, и когда при переносе данные необходимо обработать, изменить или добавить к ним операции бизнес-логики.</span><span class="sxs-lookup"><span data-stu-id="cf384-159">Consider using ADF when data needs to be continually migrated in a hybrid scenario that accesses both on-premises and cloud resources, and when the data is transacted or needs to be modified or have business logic added to it when being migrated.</span></span> <span data-ttu-id="cf384-160">ADF позволяет выполнять планирование и отслеживание заданий с помощью простых сценариев JSON, управляющих перемещением данных на периодической основе.</span><span class="sxs-lookup"><span data-stu-id="cf384-160">ADF allows for the scheduling and monitoring of jobs using simple JSON scripts that manage the movement of data on a periodic basis.</span></span> <span data-ttu-id="cf384-161">ADF также обладает другими возможностями, такими как поддержка сложных операций.</span><span class="sxs-lookup"><span data-stu-id="cf384-161">ADF also has other capabilities such as support for complex operations.</span></span>
