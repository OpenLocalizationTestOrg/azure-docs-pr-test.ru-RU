---
title: "aaaFeature engineering и выделение в машинном обучении Azure | Документы Microsoft"
description: "Описание целей hello выбора компонентов и конструируются и примеры их роли в процессе hello расширения данных машинного обучения."
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 9ceb524d-842e-4f77-9eae-a18e599442d6
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/18/2017
ms.author: zhangya;bradsev
ROBOTS: NOINDEX
redirect_url: machine-learning-data-science-create-features
redirect_document_id: True
ms.openlocfilehash: e3e59329bf46f334396f5975b4e656137362d7ce
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="feature-engineering-and-selection-in-azure-machine-learning"></a>Реконструирование и выбор признаков в машинном обучении Azure
В этом разделе объясняется назначение hello конструируются и Выбор компонентов в процессе hello расширения данных машинного обучения. На примерах, предоставляемых студией машинного обучения Azure, показаны составляющие этих процессов.

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

часто Hello обучающих данных, используемых в машинном обучении можно улучшить путем выбора hello или извлечение функции из hello необработанными данными, собранными. Пример социотехники функции в контексте hello обучения как образы hello tooclassify рукописные символов — плотность битов карты образована hello необработанные бит распределения данных. На этой карте поможет найти hello края символов hello более эффективно, чем необработанные распространения hello.

Социотехники и выбранные компоненты повысить эффективность hello процесса обучения hello, который пытается tooextract hello ключевые сведения, содержащиеся в данных hello. Они также повышают степень hello эти tooclassify моделей hello входных данных точно и результаты toopredict интересуют более надежно. Конструируются и выбора можно также объединять обучения hello toomake работы большего количества вычислений со. Это делается путем улучшение и то уменьшение hello количество компонентов требуется toocalibrate или обучения модели. Математически говоря, модели hello выбранного tootrain функции hello являются минимальный набор независимых переменных, которые объясняют шаблоны hello в данных hello и затем успешно прогнозирования результатов.

Проектирование Hello и Выбор функций является частью более масштабного процесса, который обычно состоит из четырех шагов:

* Сбор данных
* совершенствование данных;
* построение модели;
* постобработка.

Техническим специалистам и выбора составляют hello этап расширения данных машинного обучения. Для наших целей можно выделить три следующих аспекта этого процесса.

* **Предварительная обработка данных**: этот процесс tooensure попыток, hello собранные данные чистого и согласованность. Он предусматривает объединение наборов данных, обработку отсутствующих данных, обработку несогласованных данных и преобразование типов данных.
* **Функция engineering**: этот процесс пытается toocreate дополнительные соответствующие функции из существующих необработанные компонентов hello hello данных и tooincrease прогнозируемой мощностью toohello алгоритма обучения.
* **Выбор компонентов**: hello ключа подмножество исходную размерность данных функции tooreduce hello проблемы обучения hello выбирает этот процесс.

В этом разделе описывается только hello функция техническим специалистам и возможность выбора аспекты процесса hello данных расширения. Дополнительные сведения на этапе предварительной обработки данных hello. в разделе [предварительная обработка данных в Azure Machine Learning Studio](https://azure.microsoft.com/documentation/videos/preprocessing-data-in-azure-ml-studio/).

## <a name="creating-features-from-your-data--feature-engineering"></a>Создание признаков из данных. Конструирование признаков
Hello обучающих данных состоит из матрицы, состоящие из примеров (записей или наблюдений, хранимых в строках), каждый из которых имеет ряд возможностей (переменных или полей, хранящихся в столбцах). компоненты Hello, указанный в опытная конструкция hello, ожидаемый toocharacterize hello закономерности в данных hello. Несмотря на то, что многие из необработанных данных hello поля могут быть включены непосредственно в hello tootrain набор, используемый выбранный компонент модели, дополнительные компоненты на основе социотехники часто требуется toobe, построенным на основе функции hello в toogenerate необработанные данные hello улучшенные обучающий набор данных.

Какие функции следует ли создать набор данных hello tooenhance при обучении модели Социотехники возможностей усовершенствования hello обучения предоставляют сведения, лучше распознает hello закономерности в данных hello. Предполагается, что hello новые возможности tooprovide дополнительную информацию, которая не является четко записанных или очевидным в исходной hello или задать существующий компонент, но этот процесс — это то того. Обоснованные и эффективные решения часто требуют определенного знания предметной области.

Начиная с машинного обучения Azure, это простой toograsp этот процесс конкретно, используя образцы, предоставленные в студии машинного обучения. Здесь представлены два примера.

* Пример регрессии ([прогноза hello количество запросов на прокат велосипедов](http://gallery.cortanaintelligence.com/Experiment/Regression-Demand-estimation-4)) в защищенный эксперимент, где известны hello целевых значений
* Пример классификации интеллектуального анализа текста с использованием [хэширования признаков][feature-hashing].

### <a name="example-1-adding-temporal-features-for-a-regression-model"></a>Пример 1. Добавление временных признаков для регрессионной модели
toodemonstrate как tooengineer функций для задачи регрессии, воспользуемся hello эксперимента «прогноза спроса на велосипеды» в студии машинного обучения Azure. Цель этого эксперимента Hello — toopredict hello спроса на велосипеды hello, т. е hello количество запросов на прокат велосипедов в определенный месяц, день или час. набор данных Hello **набора данных UCI прокат велосипедов** используется как необработанные данные ввода hello.

Этот набор данных основан на реальные данные с hello прописная спрос на аренду велосипедов компания, которая содержит сеть прокат велосипедов в Вашингтон Округ Колумбия в hello США. набор данных Hello представляет hello количество запросов на прокат велосипедов в определенное время дня, из too2012 2011 г. и содержит 17379 строки и столбцы, 17. набор необработанные функций Hello содержит погодных условий (температура, влажность, скорость ветра) и тип hello hello дня (праздников или дня недели). — поле toopredict Hello **cnt**, число, представляющее внаем велосипеда hello в конкретный час и, в диапазоне от 1 too977.

tooconstruct действующие возможности hello обучающих данных, четыре модели регрессии создаются с использованием hello задает того же алгоритма, но с четыре разных обучающих данных. наборы данных представляют Привет четырех hello же необработанные входные данные, но при увеличении числа компонентов назначен. Эти признаки сгруппированы в четыре категории:

1. A = погоды + праздников + weekday + выходные функции hello прогнозируемое день
2. B = количество велосипедов, которые были аренды в каждом hello предыдущих 12 часов
3. C = количество велосипедов, которые были аренды в каждом hello предыдущие 12 дней в hello же час
4. D = количество велосипедов, которые были аренды в каждом hello предыдущих 12 недель в hello же час и hello один день

Помимо функции набора A уже существует в исходной необработанных данных hello, hello других трех наборов функций создаются с помощью функции hello процесса. Задать компонент B получает hello последних спроса на велосипеды hello. Набор функций C получает hello спроса на велосипеды в час. D захваты спроса на велосипеды набор функций в определенный день недели hello и час. Каждая из четырех hello наборы данных обучения включает наборы функций A, A + B, A + B + C и A + B + C + D, соответственно.

В hello эксперимента машинного обучения Azure эти четыре набора обучающих данных формируются через четыре ветви из hello предварительно обработанные входного набора данных. За исключением hello крайняя слева ветвь, каждый из этих ветвей содержит [выполнение скрипта R] [ execute-r-script] соответственно создается и добавляется модуль, в котором набор производный функций (компонент задает B, C и D) toohello импортировать набор данных. Hello следующий рисунок демонстрирует сценарий hello R используемых набор функций toocreate B во второй ветви левой hello.

![Создание набора признаков](./media/machine-learning-feature-selection-and-engineering/addFeature-Rscripts.png)

Hello следующей таблице приведена сводка hello сравнение результатов производительности hello hello четыре модели. наилучших результатов Hello показаны компоненты A + B + C. Обратите внимание, что частота возникновения ошибок hello снижается, если наборы дополнительных функций, включенных в hello обучающих данных. Тем самым производится проверка нашей предположения, hello наборы функций, B и C предоставляют дополнительные данные для задачи hello регрессии. Добавление набора функций hello D не tooprovide любое дополнительное сокращение в частота ошибок hello.

![Сравнение результатов производительности](./media/machine-learning-feature-selection-and-engineering/result1.png)

### <a name="example2"></a> Пример 2. Создание признаков в интеллектуальном анализе текста
Конструируются широко применяется в связанных tootext задач интеллектуального анализа данных, таких как анализ документа классификации и мнений. Например при требуется tooclassify документы в несколько категорий, обычно подразумевается, скорее всего, toooccur в другой документ категории hello слов или фраз, включенных в категорию одного документа. Другими словами частота hello hello слова или фразы распределения — может toocharacterize другого документа категорий. В приложениях интеллектуального анализа данных текст hello компонент процесса является функции hello необходимые toocreate с участием частот слова или фразы, так как отдельные части текстового содержимого обычно служат hello входных данных.

tooachieve это задача, обеспечиваемое *хэширование признаков* будет применен tooefficiently Включение компонентов произвольный текст в индексы. Вместо сопоставления каждого текст функции (слова или фразы) tooa определенного индекса, этот метод работает, применяя функции toohello функции хэширования и напрямую с помощью их хэш-значения как индексы.

В Машинном обучении Azure есть модуль [Feature Hashing][feature-hashing] (Хэширование признаков), с помощью которого можно создавать признаки этих слов или фраз. Hello на этом рисунке показан пример использования этого модуля. Hello входной набор данных содержит два столбца: hello книги оценок от 1 too5 и hello просмотра содержимого. Цель Hello это [хэширование признаков] [ feature-hashing] модуль является tooretrieve новые функции, содержащие частоту вхождения hello hello соответствующего слов или фраз в конкретную книгу проверки hello. toouse этот модуль необходимо hello toocomplete следующие шаги:

1. Привет, выберите столбец, содержащий входной текст hello (**Col2** в этом примере).
2. Задать *разрядность хэширования* too8, что означает 2 ^ 8 = 256 функции создаются. Hello слова или фразы в тексте hello будет хэширован too256 индексов. Здравствуйте, параметр *разрядность хэширования* лежит в диапазоне от 1 too31. Если hello параметра — tooa большего количества, hello слов или фраз реже toobe хэшируются в hello же индекс.
3. Задайте для параметра hello *N-грамм* too2. Это возвращает частоту вхождения hello (функция для каждого отдельного слова) извлекаются униграммы и биграммы (функция для каждой пары соседних слова) из входного текста hello. Здравствуйте, параметр *N-грамм* лежит в диапазоне от 0 too10, которое указывает максимальное количество hello toobe последовательных слова, которые включены в компонент.  

![Модуль хэширования признаков](./media/machine-learning-feature-selection-and-engineering/feature-Hashing1.png)

Hello на этом рисунке показано, как выглядеть этих новых функций.

![Пример хэширования признаков](./media/machine-learning-feature-selection-and-engineering/feature-Hashing2.png)

## <a name="filtering-features-from-your-data--feature-selection"></a>Фильтрация признаков в данных. Выбор признаков
*Выбор компонентов* — процесс, который обычно применяется toohello создания наборов обучающих данных для прогнозирующего моделирования задач, таких как задачи классификации или регрессии. Задача Hello — tooselect подмножество функций hello из hello исходный набор данных, его размеры с помощью минимального набора функций toorepresent hello максимальное отклонение в данных hello. Это подмножество функций содержит hello только компоненты включены toobe tootrain hello модель. Выбор признаков служит двум основным целям.

* Выбор признаков часто повышает точность классификации, исключая несоответствующие, избыточные или сильно коррелирующие признаки.
* Возможность выбора уменьшается hello несколько функций, что делает более эффективным hello процесс обучения модели. Это особенно важно для учеников, ресурсоемкие tootrain, например опорных векторов.

Несмотря на то, что выбор компонентов операции поиска tooreduce hello количеством признаков в tootrain hello hello набора данных используется модель, он не является термин термин hello tooby *сокращение размерности.* Методы выбора компонентов Извлеките подмножество исходного признаков в данных hello без изменений.  Методы сокращения размерности применяю социотехники функции, которые могут преобразовывать исходной функции hello и таким образом изменять их. Примеры методов сокращения размерности: анализ главных компонентов, анализ канонических корреляций и сингулярная декомпозиция.

Одна из распространенных категорий методов выбора признаков в контролируемом контексте называется "Выбор признаков на основе фильтра". Путем вычисления hello корреляции между каждого компонента и hello целевого атрибута, эти методы применяются статистические меры tooassign функция tooeach оценка. Hello затем компоненты ранжируются по оценке hello, который можно использовать tooset hello порог для сохранения или удаления определенных компонентов. Hello статистические показатели, используемые в этих методах примеры корреляции Пирсона взаимной информации и hello тестом.

В студии машинного обучения Azure предусмотрены модули для выбора признаков. Как показано на следующий рисунок hello, эти модули включают [Выбор компонентов на основе фильтра] [ filter-based-feature-selection] и [линейного Дискриминантного анализа Фишера] [ fisher-linear-discriminant-analysis].

![Пример выбора признаков](./media/machine-learning-feature-selection-and-engineering/feature-Selection.png)

Например, использовать hello [Выбор компонентов на основе фильтра] [ filter-based-feature-selection] модуль с пример интеллектуального анализа текста hello, описанные ранее. Предположим, что модель регрессии toobuild после создания набора функций 256 через hello [хэширование признаков] [ feature-hashing] модуля и переменную ответа, hello **Col1**и представляет книгу просмотрите оценки и принимает значения от 1 too5. Задать **метод оценки компонентов** слишком**корреляции Пирсона**, **целевого столбца** слишком**Col1**, и **требуемого числа компоненты** слишком**50**. модуль Hello [Выбор компонентов на основе фильтра] [ filter-based-feature-selection] затем создает набор данных, содержащий 50 возможности вместе с целевой атрибут hello **Col1**. Hello ниже рисунке показан поток hello этого эксперимента и hello входных параметров.

![Пример выбора признаков](./media/machine-learning-feature-selection-and-engineering/feature-Selection1.png)

Hello на этом рисунке показано hello результирующие наборы данных. Каждый компонент результат функции на основе на hello корреляции Пирсона между собой и hello целевого атрибута **Col1**. функции Hello с верхних оценок сохраняются.

![Наборы данных для выбора признаков на основе фильтра](./media/machine-learning-feature-selection-and-engineering/feature-Selection2.png)

Следующий рисунок показывает Hello hello соответствующие оценки hello выбранных компонентов.

![Оценки выбранных признаков](./media/machine-learning-feature-selection-and-engineering/feature-Selection3.png)

Применяя это [Выбор компонентов на основе фильтра] [ filter-based-feature-selection] модуль 50 из 256 компоненты выбраны, так как они имеют hello, большинство функций, связанные с целевой переменной hello **Col1** основании hello метод оценки **корреляции Пирсона**.

## <a name="conclusion"></a>Заключение
Конструируются и Выбор компонентов — это два шаги часто выполнять tooprepare hello обучающих данных при построении модели машинного обучения. Как правило конструируются будет применен первый toogenerate дополнительные функции, а затем шаге выбора функции hello выполнено tooeliminate имеют значения, избыточные или высокой степенью корреляции признаков.

Это не всегда обязательно tooperform Выбор компонентов engineering или компонента. Необходим ли он зависит от данных hello он или собирать hello алгоритма, который вы выберете и hello цель hello эксперимента.

<!-- Module References -->
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/
[feature-hashing]: https://msdn.microsoft.com/library/azure/c9a82660-2d9c-411d-8122-4d9e0b3ce92a/
[filter-based-feature-selection]: https://msdn.microsoft.com/library/azure/918b356b-045c-412b-aa12-94a1d2dad90f/
[fisher-linear-discriminant-analysis]: https://msdn.microsoft.com/library/azure/dcaab0b2-59ca-4bec-bb66-79fd23540080/
