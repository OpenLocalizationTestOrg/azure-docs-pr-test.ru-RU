---
title: "aaaExecute Python машинного самообучения, скрипты | Документы Microsoft"
description: "Описываются принципы проектирования, лежащие в основе поддержки сценариев Python в Машинном обучении Azure, а также основные сценарии использования, возможности и ограничения."
keywords: "машинное обучение Python, pandas, python pandas, сценарии python, выполнение сценариев python"
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: ee9eb764-0d3e-4104-a797-19fc29345d39
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: bradsev
ms.openlocfilehash: 8d23aaa972a46cb1a07ea0f18cc1e24933fe3e6f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="execute-python-machine-learning-scripts-in-azure-machine-learning-studio"></a><span data-ttu-id="7f054-104">Выполнение сценариев Python в Студии машинного обучения Azure</span><span class="sxs-lookup"><span data-stu-id="7f054-104">Execute Python machine learning scripts in Azure Machine Learning Studio</span></span>

<span data-ttu-id="7f054-105">В этом разделе описывает принципы разработки hello базовый hello текущая поддержка сценариев Python в машинном обучении Azure.</span><span class="sxs-lookup"><span data-stu-id="7f054-105">This topic describes hello design principles underlying hello current support for Python scripts in Azure Machine Learning.</span></span> <span data-ttu-id="7f054-106">также описаны Hello основных возможностей, включая:</span><span class="sxs-lookup"><span data-stu-id="7f054-106">hello main capabilities provided are also outlined, including:</span></span>

- <span data-ttu-id="7f054-107">выполнение базовых сценариев использования;</span><span class="sxs-lookup"><span data-stu-id="7f054-107">execute basic usage scenarios</span></span>
- <span data-ttu-id="7f054-108">оценка эксперимента в веб-службе;</span><span class="sxs-lookup"><span data-stu-id="7f054-108">score an experiment in a web service</span></span>
- <span data-ttu-id="7f054-109">поддержка импорта имеющегося кода;</span><span class="sxs-lookup"><span data-stu-id="7f054-109">support for importing existing code</span></span>
- <span data-ttu-id="7f054-110">экспорт визуализаций;</span><span class="sxs-lookup"><span data-stu-id="7f054-110">export visualizations</span></span>
- <span data-ttu-id="7f054-111">выполнение контролируемого выбора компонентов;</span><span class="sxs-lookup"><span data-stu-id="7f054-111">perform supervised feature selection</span></span>
- <span data-ttu-id="7f054-112">ознакомление с некоторыми ограничениями.</span><span class="sxs-lookup"><span data-stu-id="7f054-112">understand some limitations</span></span>

<span data-ttu-id="7f054-113">[Python](https://www.python.org/) незаменимый инструмент в набор инструментов hello объекта многие специалисты по анализу данных.</span><span class="sxs-lookup"><span data-stu-id="7f054-113">[Python](https://www.python.org/) is an indispensable tool in hello tool chest of many data scientists.</span></span> <span data-ttu-id="7f054-114">Он имеет:</span><span class="sxs-lookup"><span data-stu-id="7f054-114">It has:</span></span>

* <span data-ttu-id="7f054-115">изящный и краткий синтаксис;</span><span class="sxs-lookup"><span data-stu-id="7f054-115">an elegant and concise syntax,</span></span> 
* <span data-ttu-id="7f054-116">кроссплатформенную поддержку;</span><span class="sxs-lookup"><span data-stu-id="7f054-116">cross-platform support,</span></span> 
* <span data-ttu-id="7f054-117">обширную коллекцию мощных библиотек;</span><span class="sxs-lookup"><span data-stu-id="7f054-117">a vast collection of powerful libraries, and</span></span> 
* <span data-ttu-id="7f054-118">современные средства разработки.</span><span class="sxs-lookup"><span data-stu-id="7f054-118">mature development tools.</span></span> 

<span data-ttu-id="7f054-119">Python используется на всех этапах рабочего процесса, обычно применяемых в моделировании машинного обучения:</span><span class="sxs-lookup"><span data-stu-id="7f054-119">Python is being used in all phases of a workflow typically used in machine learning modeling:</span></span>

- <span data-ttu-id="7f054-120">прием и обработка данных;</span><span class="sxs-lookup"><span data-stu-id="7f054-120">data ingest and processing</span></span> 
- <span data-ttu-id="7f054-121">создание компонентов;</span><span class="sxs-lookup"><span data-stu-id="7f054-121">feature construction</span></span>
- <span data-ttu-id="7f054-122">обучение моделей;</span><span class="sxs-lookup"><span data-stu-id="7f054-122">model training</span></span> 
- <span data-ttu-id="7f054-123">проверка моделей;</span><span class="sxs-lookup"><span data-stu-id="7f054-123">model validation</span></span>
- <span data-ttu-id="7f054-124">Развертывание моделей hello</span><span class="sxs-lookup"><span data-stu-id="7f054-124">deployment of hello models</span></span>

<span data-ttu-id="7f054-125">Студия машинного обучения Azure позволяет внедрять сценарии Python в различных частях эксперимента машинного обучения, а также легко опубликовывать их в качестве веб-служб в Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="7f054-125">Azure Machine Learning Studio supports embedding Python scripts into various parts of a machine learning experiment and also seamlessly publishing them as web services on Microsoft Azure.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]


## <a name="design-principles-of-python-scripts-in-machine-learning"></a><span data-ttu-id="7f054-126">Принципы проектирования сценариев Python в машинном обучении</span><span class="sxs-lookup"><span data-stu-id="7f054-126">Design principles of Python scripts in Machine Learning</span></span>

<span data-ttu-id="7f054-127">tooPython основной интерфейс Hello в студии машинного обучения Azure можно с помощью hello [выполнение сценария Phyton] [ execute-python-script] модуль показано на рисунке 1.</span><span class="sxs-lookup"><span data-stu-id="7f054-127">hello primary interface tooPython in Azure Machine Learning Studio is via hello [Execute Python Script][execute-python-script] module shown in Figure 1.</span></span>

![рисунок 1](./media/machine-learning-execute-python-scripts/execute-machine-learning-python-scripts-module.png)

![рисунок 2](./media/machine-learning-execute-python-scripts/embedded-machine-learning-python-script.png)

<span data-ttu-id="7f054-130">Рисунок 1.</span><span class="sxs-lookup"><span data-stu-id="7f054-130">Figure 1.</span></span> <span data-ttu-id="7f054-131">Hello **выполнение сценария Phyton** модуля.</span><span class="sxs-lookup"><span data-stu-id="7f054-131">hello **Execute Python Script** module.</span></span>

<span data-ttu-id="7f054-132">Hello [выполнение сценария Phyton] [ execute-python-script] модуль в Azure ML Studio принимает оказаться toothree входные данные и создает копии tootwo выходные данные (как описано в следующем разделе hello), как его аналог R hello [ Выполнение скрипта R] [ execute-r-script] модуля.</span><span class="sxs-lookup"><span data-stu-id="7f054-132">hello [Execute Python Script][execute-python-script] module in Azure ML Studio accepts up toothree inputs and produces up tootwo outputs (discussed in hello following section), like its R analogue, hello [Execute R Script][execute-r-script] module.</span></span> <span data-ttu-id="7f054-133">Hello выполнения toobe кода Python, вводится в поле параметра hello как специально именованную точки входа функции, вызываемой `azureml_main`.</span><span class="sxs-lookup"><span data-stu-id="7f054-133">hello Python code toobe executed is entered into hello parameter box as a specially named entry-point function called `azureml_main`.</span></span> <span data-ttu-id="7f054-134">Ниже приведены ключевые особенности hello принципов, используемых tooimplement этот модуль.</span><span class="sxs-lookup"><span data-stu-id="7f054-134">Here are hello key design principles used tooimplement this module:</span></span>

1. <span data-ttu-id="7f054-135">*Привычность для пользователей Python.*</span><span class="sxs-lookup"><span data-stu-id="7f054-135">*Must be idiomatic for Python users.*</span></span> <span data-ttu-id="7f054-136">Большинство пользователей Python видят свой код как функции внутри модулей,</span><span class="sxs-lookup"><span data-stu-id="7f054-136">Most Python users factor their code as functions inside modules.</span></span> <span data-ttu-id="7f054-137">поэтому они достаточно редко помещают множество исполняемых операторов в модуль верхнего уровня.</span><span class="sxs-lookup"><span data-stu-id="7f054-137">So putting a lot of executable statements in a top-level module is relatively rare.</span></span> <span data-ttu-id="7f054-138">В результате поле скрипта hello также принимает специально именованная функция Python как противоположность toojust последовательность инструкций.</span><span class="sxs-lookup"><span data-stu-id="7f054-138">As a result, hello script box also takes a specially named Python function as opposed toojust a sequence of statements.</span></span> <span data-ttu-id="7f054-139">Hello объекты, предоставленные в функции hello являются стандартных типов библиотек Python например [Pandas](http://pandas.pydata.org/) кадров данных и [NumPy](http://www.numpy.org/) массивов.</span><span class="sxs-lookup"><span data-stu-id="7f054-139">hello objects exposed in hello function are standard Python library types such as [Pandas](http://pandas.pydata.org/) data frames and [NumPy](http://www.numpy.org/) arrays.</span></span>
2. <span data-ttu-id="7f054-140">*Высокая точность при выполнении в локальной и облачной среде.*</span><span class="sxs-lookup"><span data-stu-id="7f054-140">*Must have high-fidelity between local and cloud executions.*</span></span> <span data-ttu-id="7f054-141">Hello hello tooexecute используется внутренний код Python основан на [Anaconda](https://store.continuum.io/cshop/anaconda/), широко используемый кросс платформенных научных распространения Python.</span><span class="sxs-lookup"><span data-stu-id="7f054-141">hello backend used tooexecute hello Python code is based on [Anaconda](https://store.continuum.io/cshop/anaconda/), a widely used cross-platform scientific Python distribution.</span></span> <span data-ttu-id="7f054-142">Он поставляется с закрыть too200 hello наиболее распространенные пакеты Python.</span><span class="sxs-lookup"><span data-stu-id="7f054-142">It comes with close too200 of hello most common Python packages.</span></span> <span data-ttu-id="7f054-143">Таким образом, специалисты по обработке и анализу данных могут отладить код и обеспечить его работу в своей локальной среде Anaconda, совместимой с Машинным обучением Azure.</span><span class="sxs-lookup"><span data-stu-id="7f054-143">Therefore, data scientists can debug and qualify their code on their local Azure Machine Learning-compatible Anaconda environment.</span></span> <span data-ttu-id="7f054-144">Использовать существующую среду разработки, например [IPython](http://ipython.org/) записной книжке или [средства Python для Visual Studio](http://aka.ms/ptvs), toorun его как часть эксперимента машинного Обучения Azure.</span><span class="sxs-lookup"><span data-stu-id="7f054-144">Then use an existing development environment, such as [IPython](http://ipython.org/) notebook or [Python Tools for Visual Studio](http://aka.ms/ptvs), toorun it as part of an Azure ML experiment.</span></span> <span data-ttu-id="7f054-145">Hello `azureml_main` точкой входа является соответствующего ванили функции Python и поэтому *** могут быть созданы без Azure ML код или hello установленный пакет SDK.</span><span class="sxs-lookup"><span data-stu-id="7f054-145">hello `azureml_main` entry point is a vanilla Python function and so ****can be authored without Azure ML-specific code or hello SDK installed.</span></span>
3. <span data-ttu-id="7f054-146">*Простота при совместном использовании с другими модулями Машинного обучения Azure.*</span><span class="sxs-lookup"><span data-stu-id="7f054-146">*Must be seamlessly composable with other Azure Machine Learning modules.*</span></span> <span data-ttu-id="7f054-147">Hello [выполнение сценария Phyton] [ execute-python-script] модуль принимает в качестве входных и выходных данных, наборы данных стандартные машинного обучения Azure.</span><span class="sxs-lookup"><span data-stu-id="7f054-147">hello [Execute Python Script][execute-python-script] module accepts, as inputs and outputs, standard Azure Machine Learning datasets.</span></span> <span data-ttu-id="7f054-148">Базовая архитектура Hello прозрачно и эффективно ликвидирует hello сред выполнения машинного Обучения Azure и Python.</span><span class="sxs-lookup"><span data-stu-id="7f054-148">hello underlying framework transparently and efficiently bridges hello Azure ML and Python runtimes.</span></span> <span data-ttu-id="7f054-149">Поэтому Python можно использовать в сочетании с существующими рабочими процессами Машинного обучения Azure, включая те, которые вызывают R и SQLite.</span><span class="sxs-lookup"><span data-stu-id="7f054-149">So Python can be used in conjunction with existing Azure ML workflows, including those that call into R and SQLite.</span></span> <span data-ttu-id="7f054-150">В результате специалист по анализу и обработке данных может составить рабочие процессы:</span><span class="sxs-lookup"><span data-stu-id="7f054-150">A  result, data scientist could compose workflows that:</span></span>
   * <span data-ttu-id="7f054-151">использующие Python и Pandas для предварительной обработки и очистки данных;</span><span class="sxs-lookup"><span data-stu-id="7f054-151">use Python and Pandas for data pre-processing and cleaning</span></span>
   * <span data-ttu-id="7f054-152">веб-канал hello tooa SQL преобразования данных, присоединение несколько компонентов tooform наборов данных</span><span class="sxs-lookup"><span data-stu-id="7f054-152">feed hello data tooa SQL transformation, joining multiple datasets tooform features</span></span>
   * <span data-ttu-id="7f054-153">Обучение моделей с помощью алгоритмов hello в машинном обучении Azure</span><span class="sxs-lookup"><span data-stu-id="7f054-153">train models using hello algorithms in Azure Machine Learning</span></span> 
   * <span data-ttu-id="7f054-154">Оценка и последующей обработки результатов hello, с помощью языка R.</span><span class="sxs-lookup"><span data-stu-id="7f054-154">evaluate and post-process hello results using R.</span></span>


## <a name="basic-usage-scenarios-in-ml-for-python-scripts"></a><span data-ttu-id="7f054-155">Базовые сценарии использование для сценариев Python в машинном обучении</span><span class="sxs-lookup"><span data-stu-id="7f054-155">Basic usage scenarios in ML for Python scripts</span></span>

<span data-ttu-id="7f054-156">В этом разделе мы опрос некоторые hello основные варианты использования hello [выполнение сценария Phyton] [ execute-python-script] модуля.</span><span class="sxs-lookup"><span data-stu-id="7f054-156">In this section, we survey some of hello basic uses of hello [Execute Python Script][execute-python-script] module.</span></span> <span data-ttu-id="7f054-157">Модуль Python toohello входные данные представлены как Pandas кадров данных.</span><span class="sxs-lookup"><span data-stu-id="7f054-157">Inputs toohello Python module are exposed as Pandas data frames.</span></span> <span data-ttu-id="7f054-158">Hello функция должна возвращать один кадр данных Pandas упакованные внутри Python [последовательности](https://docs.python.org/2/c-api/sequence.html) например кортежа, список или массив NumPy.</span><span class="sxs-lookup"><span data-stu-id="7f054-158">hello function must return a single Pandas data frame packaged inside of a Python [sequence](https://docs.python.org/2/c-api/sequence.html) such as a tuple, list, or NumPy array.</span></span> <span data-ttu-id="7f054-159">затем возвращается hello первый выходной порт модуля hello Hello первый элемент этой последовательности.</span><span class="sxs-lookup"><span data-stu-id="7f054-159">hello first element of this sequence is then returned in hello first output port of hello module.</span></span> <span data-ttu-id="7f054-160">Схема этого процесса показана на рис. 2.</span><span class="sxs-lookup"><span data-stu-id="7f054-160">This scheme is shown in Figure 2.</span></span>

![image3](./media/machine-learning-execute-python-scripts/map-of-python-script-inputs-outputs.png)

<span data-ttu-id="7f054-162">Рис. 2.</span><span class="sxs-lookup"><span data-stu-id="7f054-162">Figure 2.</span></span> <span data-ttu-id="7f054-163">Сопоставление входных портов tooparameters и возвращаемое значение toooutput порта.</span><span class="sxs-lookup"><span data-stu-id="7f054-163">Mapping of input ports tooparameters and return value toooutput port.</span></span>

<span data-ttu-id="7f054-164">Более подробные семантика hello входных портов, как получить сопоставленных tooparameters hello `azureml_main` функции показаны в таблице 1:</span><span class="sxs-lookup"><span data-stu-id="7f054-164">More detailed semantics of how hello input ports get mapped tooparameters of hello `azureml_main` function are shown in Table 1:</span></span>

![image1T](./media/machine-learning-execute-python-scripts/python-script-inputs-mapped-to-parameters.png)

<span data-ttu-id="7f054-166">Таблица 1.</span><span class="sxs-lookup"><span data-stu-id="7f054-166">Table 1.</span></span> <span data-ttu-id="7f054-167">Сопоставление параметров toofunction входных портов.</span><span class="sxs-lookup"><span data-stu-id="7f054-167">Mapping of input ports toofunction parameters.</span></span>

<span data-ttu-id="7f054-168">Сопоставление входных портов и параметров функции Hello является позиционным:</span><span class="sxs-lookup"><span data-stu-id="7f054-168">hello mapping between input ports and function parameters is positional:</span></span>

- <span data-ttu-id="7f054-169">Первый Hello подключенных входного порта — сопоставленных toohello первый параметр функции hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-169">hello first connected input port is mapped toohello first parameter of hello function.</span></span> 
- <span data-ttu-id="7f054-170">Hello вторых входных данных (Если подключен) — сопоставленных toohello второй параметр функции hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-170">hello second input (if connected) is mapped toohello second parameter of hello function.</span></span>

<span data-ttu-id="7f054-171">В разделе *Python для анализа данных* (O'Reilly, 2012 г.), Западная McKinney подробнее на Python Pandas и как его можно использовать toomanipulate данных эффективно и рационально.</span><span class="sxs-lookup"><span data-stu-id="7f054-171">See *Python for Data Analysis* (O'Reilly, 2012) by W. McKinney for more information on Python Pandas and on how it can be used toomanipulate data effectively and efficiently.</span></span> 


## <a name="translation-of-input-and-output-types"></a><span data-ttu-id="7f054-172">Преобразование типов входных и выходных данных</span><span class="sxs-lookup"><span data-stu-id="7f054-172">Translation of input and output types</span></span> 
<span data-ttu-id="7f054-173">Входные наборы данных в Azure ML — это преобразованное toodata кадры в Pandas.</span><span class="sxs-lookup"><span data-stu-id="7f054-173">Input datasets in Azure ML are converted toodata frames in Pandas.</span></span> <span data-ttu-id="7f054-174">Кадры данных выходные данные преобразуются задней tooAzure ML наборов данных.</span><span class="sxs-lookup"><span data-stu-id="7f054-174">Output data frames are converted back tooAzure ML datasets.</span></span> <span data-ttu-id="7f054-175">выполняются следующие преобразования Hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-175">hello following conversions are performed:</span></span>

1. <span data-ttu-id="7f054-176">Строковые и числовые столбцы преобразуются как-— и отсутствующих значений в наборе данных, преобразованных too'NA "значения в Pandas.</span><span class="sxs-lookup"><span data-stu-id="7f054-176">String and numeric columns are converted as-is and missing values in a dataset are converted too‘NA’ values in Pandas.</span></span> <span data-ttu-id="7f054-177">Hello одного преобразования происходит на запомнен hello (NA значений в Pandas — toomissing преобразованные значения в Azure ML).</span><span class="sxs-lookup"><span data-stu-id="7f054-177">hello same conversion happens on hello way back (NA values in Pandas are converted toomissing values in Azure ML).</span></span>
2. <span data-ttu-id="7f054-178">Векторы индексов в Pandas не поддерживаются в Машинном обучении Azure.</span><span class="sxs-lookup"><span data-stu-id="7f054-178">Index vectors in Pandas are not supported in Azure ML.</span></span> <span data-ttu-id="7f054-179">Все кадры входных данных в функции hello Python всегда имеют 64-разрядных числовой индекс из 0 toohello количества строк минус 1.</span><span class="sxs-lookup"><span data-stu-id="7f054-179">All input data frames in hello Python function always have a 64-bit numerical index from 0 toohello number of rows minus 1.</span></span> 
3. <span data-ttu-id="7f054-180">Наборы данных Машинного обучения Azure не могут содержать повторяющиеся имена столбцов и имена столбцов, которые не являются строками.</span><span class="sxs-lookup"><span data-stu-id="7f054-180">Azure ML datasets cannot have duplicate column names and column names that are not strings.</span></span> <span data-ttu-id="7f054-181">Если выходных данных содержит нечисловых столбцов, hello вызывается `str` на приветствия имен столбцов.</span><span class="sxs-lookup"><span data-stu-id="7f054-181">If an output data frame contains non-numeric columns, hello framework calls `str` on hello column names.</span></span> <span data-ttu-id="7f054-182">Аналогичным образом, повторяющиеся имена столбцов являются автоматически искаженное tooinsure hello имена являются уникальными.</span><span class="sxs-lookup"><span data-stu-id="7f054-182">Likewise, any duplicate column names are automatically mangled tooinsure hello names are unique.</span></span> <span data-ttu-id="7f054-183">суффикс Hello (2) добавляется в первый дубликат toohello, второй дубликат toohello (3) и т. д.</span><span class="sxs-lookup"><span data-stu-id="7f054-183">hello suffix (2) is added toohello first duplicate, (3) toohello second duplicate, and so on.</span></span>


## <a name="operationalizing-python-scripts"></a><span data-ttu-id="7f054-184">Выполнение сценариев Python</span><span class="sxs-lookup"><span data-stu-id="7f054-184">Operationalizing Python scripts</span></span>

<span data-ttu-id="7f054-185">При публикации в качестве веб-службы вызываются любые модули [Execute Python Script][execute-python-script] (Выполнение сценария Python) в оценивающем эксперименте.</span><span class="sxs-lookup"><span data-stu-id="7f054-185">Any [Execute Python Script][execute-python-script] modules used in a scoring experiment are called when published as a web service.</span></span> <span data-ttu-id="7f054-186">На рисунке 3 показано эксперимент оценки, содержащий tooevaluate кода hello одно выражение Python.</span><span class="sxs-lookup"><span data-stu-id="7f054-186">For example, Figure 3 shows a scoring experiment that contains hello code tooevaluate a single Python expression.</span></span> 

![image4](./media/machine-learning-execute-python-scripts/figure3a.png)

![рисунок 5](./media/machine-learning-execute-python-scripts/python-script-with-python-pandas.png)

<span data-ttu-id="7f054-189">Рис. 3.</span><span class="sxs-lookup"><span data-stu-id="7f054-189">Figure 3.</span></span> <span data-ttu-id="7f054-190">Веб-служба для оценки выражения Python</span><span class="sxs-lookup"><span data-stu-id="7f054-190">Web service for evaluating a Python expression.</span></span>

<span data-ttu-id="7f054-191">Веб-служба, созданная в ходе этого эксперимента:</span><span class="sxs-lookup"><span data-stu-id="7f054-191">A web service created from this experiment:</span></span>

- <span data-ttu-id="7f054-192">принимает выражение Python (в виде строки) в качестве входных данных;</span><span class="sxs-lookup"><span data-stu-id="7f054-192">takes as input a Python expression (as a string)</span></span>
- <span data-ttu-id="7f054-193">отправляет его toohello интерпретатор Python</span><span class="sxs-lookup"><span data-stu-id="7f054-193">sends it toohello Python interpreter</span></span> 
- <span data-ttu-id="7f054-194">Возвращает таблицу, содержащую выражение hello и результат вычисляется hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-194">returns a table containing both hello expression and hello evaluated result.</span></span>


## <a name="importing-existing-python-script-modules"></a><span data-ttu-id="7f054-195">Импорт существующих модулей сценариев Python</span><span class="sxs-lookup"><span data-stu-id="7f054-195">Importing existing Python script modules</span></span>

<span data-ttu-id="7f054-196">Используйте обычно многие специалисты по анализу данных — tooincorporate существующих сценариев Python в эксперименты машинного Обучения Azure.</span><span class="sxs-lookup"><span data-stu-id="7f054-196">A common use-case for many data scientists is tooincorporate existing Python scripts into Azure ML experiments.</span></span> <span data-ttu-id="7f054-197">Не требует сцеплены и вставить в окно скрипта весь код, hello [выполнение сценария Phyton] [ execute-python-script] модуль принимает ZIP-файл, содержащий модулей Python на hello третьего входного порта.</span><span class="sxs-lookup"><span data-stu-id="7f054-197">Instead of requiring that all code be concatenated and pasted into a single script box, hello [Execute Python Script][execute-python-script] module accepts a zip file that contains Python modules at hello third input port.</span></span> <span data-ttu-id="7f054-198">файл Hello распаковал средой выполнения hello во время выполнения и hello содержимое добавляется путь к библиотеке toohello интерпретатора Python hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-198">hello file is unzipped by hello execution framework at runtime and hello contents are added toohello library path of hello Python interpreter.</span></span> <span data-ttu-id="7f054-199">Hello `azureml_main` точка входа функции можно непосредственно импортировать эти модули.</span><span class="sxs-lookup"><span data-stu-id="7f054-199">hello `azureml_main` entry point function can then import these modules directly.</span></span>

<span data-ttu-id="7f054-200">Например рассмотрим hello файл Hello.py с простой функцией «Hello, World».</span><span class="sxs-lookup"><span data-stu-id="7f054-200">As an example, consider hello file Hello.py containing a simple “Hello, World” function.</span></span>

![рисунок 6](./media/machine-learning-execute-python-scripts/figure4.png)

<span data-ttu-id="7f054-202">Рис.</span><span class="sxs-lookup"><span data-stu-id="7f054-202">Figure 4.</span></span> <span data-ttu-id="7f054-203">Определяемая пользователем функция в файле Hello.py</span><span class="sxs-lookup"><span data-stu-id="7f054-203">User-defined function in Hello.py file.</span></span>

<span data-ttu-id="7f054-204">Далее мы создаем файл Hello.zip, содержащий файл Hello.py:</span><span class="sxs-lookup"><span data-stu-id="7f054-204">Next, we create a file Hello.zip that contains Hello.py:</span></span>

![рисунок 7](./media/machine-learning-execute-python-scripts/figure5.png)

<span data-ttu-id="7f054-206">Рис. 5.</span><span class="sxs-lookup"><span data-stu-id="7f054-206">Figure 5.</span></span> <span data-ttu-id="7f054-207">ZIP-файл, содержащий определяемый пользователем код Python</span><span class="sxs-lookup"><span data-stu-id="7f054-207">Zip file containing user-defined Python code.</span></span>

<span data-ttu-id="7f054-208">Отправьте hello ZIP-файл в качестве набора данных в студии машинного обучения Azure.</span><span class="sxs-lookup"><span data-stu-id="7f054-208">Upload hello zip file as a dataset into Azure Machine Learning Studio.</span></span> <span data-ttu-id="7f054-209">Затем создайте и запустите эксперимент, использующую код Python hello в файле файл Hello.zip hello присоединив toohello третьего входного порта hello **выполнение сценария Phyton** модуля, как показано на рисунке.</span><span class="sxs-lookup"><span data-stu-id="7f054-209">Then create and run an experiment that uses hello Python code in hello Hello.zip file by attaching it toohello third input port of hello **Execute Python Script** module, as shown in this figure.</span></span>

![рисунок 8](./media/machine-learning-execute-python-scripts/figure6a.png)

![image9](./media/machine-learning-execute-python-scripts/figure6b.png)

<span data-ttu-id="7f054-212">Рис. 6.</span><span class="sxs-lookup"><span data-stu-id="7f054-212">Figure 6.</span></span> <span data-ttu-id="7f054-213">Пример эксперимента с определяемым пользователем кодом Python, загруженным в качестве ZIP-файла</span><span class="sxs-lookup"><span data-stu-id="7f054-213">Sample experiment with user-defined Python code uploaded as a zip file.</span></span>

<span data-ttu-id="7f054-214">выходные данные модуля Hello показывает, что hello ZIP-файл был нераспакованным и этой функции hello `print_hello` была выполнена.</span><span class="sxs-lookup"><span data-stu-id="7f054-214">hello module output shows that hello zip file has been unpackaged and that hello function `print_hello` has been run.</span></span>
<span data-ttu-id="7f054-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span><span class="sxs-lookup"><span data-stu-id="7f054-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span></span>

<span data-ttu-id="7f054-216">Рис. 7.</span><span class="sxs-lookup"><span data-stu-id="7f054-216">Figure 7.</span></span> <span data-ttu-id="7f054-217">Определяемая пользователем функция используется внутри hello [выполнение сценария Phyton] [ execute-python-script] модуля.</span><span class="sxs-lookup"><span data-stu-id="7f054-217">User-defined function in use inside hello [Execute Python Script][execute-python-script] module.</span></span>


## <a name="working-with-visualizations"></a><span data-ttu-id="7f054-218">Работа с визуализациями</span><span class="sxs-lookup"><span data-stu-id="7f054-218">Working with visualizations</span></span>

<span data-ttu-id="7f054-219">Диаграммы, созданные с помощью MatplotLib, можно представить в браузере hello может быть возвращен hello [выполнение сценария Phyton][execute-python-script].</span><span class="sxs-lookup"><span data-stu-id="7f054-219">Plots created using MatplotLib that can be visualized on hello browser can be returned by hello [Execute Python Script][execute-python-script].</span></span> <span data-ttu-id="7f054-220">Но графики hello не автоматически перенаправленный tooimages, чем при с помощью языка R. Поэтому hello пользователя необходимо явным образом сохранить все графики tooPNG файлы, если они являются toobe возвращается назад tooAzure машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="7f054-220">But hello plots are not automatically redirected tooimages as they are when using R. So hello user must explicitly save any plots tooPNG files if they are toobe returned back tooAzure Machine Learning.</span></span> 

<span data-ttu-id="7f054-221">toogenerate изображений из MatplotLib, необходимо выполнить процедуры hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-221">toogenerate images from MatplotLib, you must complete hello following procedure:</span></span>

* <span data-ttu-id="7f054-222">Переключение серверной hello слишком «AGG» из hello по умолчанию модуль подготовки отчетов на основе Qt</span><span class="sxs-lookup"><span data-stu-id="7f054-222">switch hello backend too“AGG” from hello default Qt-based renderer</span></span> 
* <span data-ttu-id="7f054-223">Создайте новый объект рисунка.</span><span class="sxs-lookup"><span data-stu-id="7f054-223">create a new figure object</span></span> 
* <span data-ttu-id="7f054-224">получить оси hello и создания всех графиков в него</span><span class="sxs-lookup"><span data-stu-id="7f054-224">get hello axis and generate all plots into it</span></span> 
* <span data-ttu-id="7f054-225">Сохраните файл PNG tooa рис hello</span><span class="sxs-lookup"><span data-stu-id="7f054-225">save hello figure tooa PNG file</span></span> 

<span data-ttu-id="7f054-226">Этот процесс показан следующий рис. 8, создающий точечной диаграмме матрицу на основе функции hello scatter_matrix в Pandas hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-226">This process is illustrated in hello following Figure 8 that creates a scatter plot matrix using hello scatter_matrix function in Pandas.</span></span>

![image1v](./media/machine-learning-execute-python-scripts/figure-v1-8.png)

<span data-ttu-id="7f054-228">Рис. 8.</span><span class="sxs-lookup"><span data-stu-id="7f054-228">Figure 8.</span></span> <span data-ttu-id="7f054-229">Код, MatplotLib схемы tooimages toosave.</span><span class="sxs-lookup"><span data-stu-id="7f054-229">Code toosave MatplotLib figures tooimages.</span></span>

<span data-ttu-id="7f054-230">Рис. 9 показан эксперимент, использующее hello сценарий, чтобы отобразить ранее tooreturn графиков через hello второй выходной порт.</span><span class="sxs-lookup"><span data-stu-id="7f054-230">Figure 9 shows an experiment that uses hello script shown previously tooreturn plots via hello second output port.</span></span>

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9a.png) 

![image2v](./media/machine-learning-execute-python-scripts/figure-v2-9b.png) 

<span data-ttu-id="7f054-233">Рис. 9.</span><span class="sxs-lookup"><span data-stu-id="7f054-233">Figure 9.</span></span> <span data-ttu-id="7f054-234">Визуализация графиков, созданных из кода Python</span><span class="sxs-lookup"><span data-stu-id="7f054-234">Visualizing plots generated from Python code.</span></span>

<span data-ttu-id="7f054-235">Это возможно tooreturn нескольких фигур путем их сохранения на различные изображения, hello воспринимает все образы среды выполнения машинного обучения Azure и объединяет их для визуализации.</span><span class="sxs-lookup"><span data-stu-id="7f054-235">It is possible tooreturn multiple figures by saving them into different images, hello Azure Machine Learning runtime picks up all images and concatenates them for visualization.</span></span>


## <a name="advanced-examples"></a><span data-ttu-id="7f054-236">Дополнительные примеры</span><span class="sxs-lookup"><span data-stu-id="7f054-236">Advanced examples</span></span>

<span data-ttu-id="7f054-237">Hello среду Anaconda, установленные в машинном обучении Azure содержит общие пакетов, таких как NumPy, SciPy и Scikits-Learn.</span><span class="sxs-lookup"><span data-stu-id="7f054-237">hello Anaconda environment installed in Azure Machine Learning contains common packages such as NumPy, SciPy, and Scikits-Learn.</span></span> <span data-ttu-id="7f054-238">которые можно эффективно использовать для выполнения различных задач обработки данных в конвейере машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="7f054-238">These packages can be effectively used for various data processing tasks in a machine learning pipeline.</span></span> <span data-ttu-id="7f054-239">В качестве примера hello следующие эксперимента и скрипт демонстрируют использование hello совокупности учеников в Scikits-Learn оценки важности признака toocompute для набора данных.</span><span class="sxs-lookup"><span data-stu-id="7f054-239">As an example, hello following experiment and script illustrate hello use of ensemble learners in Scikits-Learn toocompute feature importance scores for a dataset.</span></span> <span data-ttu-id="7f054-240">Hello оценки может быть Выбор компонентов используется tooperform защищено перед вводом в другой модели машинного Обучения.</span><span class="sxs-lookup"><span data-stu-id="7f054-240">hello scores can be used tooperform supervised feature selection before being fed into another ML model.</span></span>

<span data-ttu-id="7f054-241">Ниже приведен оценки важности hello toocompute функция, используемая hello Python и функции hello заказа на основании оценки hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-241">Here is hello Python function used toocompute hello importance scores and order hello features based on hello scores:</span></span>

![image11](./media/machine-learning-execute-python-scripts/figure8.png)

<span data-ttu-id="7f054-243">Рис.</span><span class="sxs-lookup"><span data-stu-id="7f054-243">Figure 10.</span></span> <span data-ttu-id="7f054-244">Функция toorank функции путем оценки.</span><span class="sxs-lookup"><span data-stu-id="7f054-244">Function toorank features by scores.</span></span>
<span data-ttu-id="7f054-245"> Hello следующие эксперимента затем вычисляет и возвращает оценки важности hello функции в наборе данных «Контроля уровня сахара Территория в Индийском Pima» hello в машинном обучении Azure:</span><span class="sxs-lookup"><span data-stu-id="7f054-245">  hello following experiment then computes and returns hello importance scores of features in hello “Pima Indian Diabetes” dataset in Azure Machine Learning:</span></span>

<span data-ttu-id="7f054-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span><span class="sxs-lookup"><span data-stu-id="7f054-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span></span>    

<span data-ttu-id="7f054-247">Рис. 11.</span><span class="sxs-lookup"><span data-stu-id="7f054-247">Figure 11.</span></span> <span data-ttu-id="7f054-248">Функции toorank эксперимента в наборе данных контроля уровня сахара Территория в Индийском Pima hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-248">Experiment toorank features in hello Pima Indian Diabetes dataset.</span></span>

## <a name="limitations"></a><span data-ttu-id="7f054-249">Ограничения</span><span class="sxs-lookup"><span data-stu-id="7f054-249">Limitations</span></span>
<span data-ttu-id="7f054-250">Hello [выполнение сценария Phyton] [ execute-python-script] в настоящее время имеет hello следующие ограничения:</span><span class="sxs-lookup"><span data-stu-id="7f054-250">hello [Execute Python Script][execute-python-script] currently has hello following limitations:</span></span>

1. <span data-ttu-id="7f054-251">*Выполнение в изолированном режиме.*</span><span class="sxs-lookup"><span data-stu-id="7f054-251">*Sandboxed execution.*</span></span> <span data-ttu-id="7f054-252">Среда выполнения Python Hello в настоящее время изолированным и в результате не допускает доступа toohello сети toohello локальной файловой системы или постоянно.</span><span class="sxs-lookup"><span data-stu-id="7f054-252">hello Python runtime is currently sandboxed and, as a result, does not allow access toohello network or toohello local file system in a persistent manner.</span></span> <span data-ttu-id="7f054-253">Все файлы, сохраненные локально являются изолированных и удалены после завершения выполнения модуля hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-253">All files saved locally are isolated and deleted once hello module finishes.</span></span> <span data-ttu-id="7f054-254">Hello кода Python не может получить доступ к большинство каталогов на hello компьютером, на котором он выполняется, hello, исключение hello в текущем каталоге и его подкаталогах.</span><span class="sxs-lookup"><span data-stu-id="7f054-254">hello Python code cannot access most directories on hello machine it runs on, hello exception being hello current directory and its subdirectories.</span></span>
2. <span data-ttu-id="7f054-255">*Отсутствие расширенной поддержки разработки и отладки.*</span><span class="sxs-lookup"><span data-stu-id="7f054-255">*Lack of sophisticated development and debugging support.*</span></span> <span data-ttu-id="7f054-256">модуль Python Hello в настоящее время не поддерживает возможности интегрированной среды разработки, такие как intellisense и отладка.</span><span class="sxs-lookup"><span data-stu-id="7f054-256">hello Python module currently does not support IDE features such as intellisense and debugging.</span></span> <span data-ttu-id="7f054-257">Кроме того при сбое во время выполнения модуля hello hello полную трассировку стека Python доступна.</span><span class="sxs-lookup"><span data-stu-id="7f054-257">Also, if hello module fails at runtime, hello full Python stack trace is available.</span></span> <span data-ttu-id="7f054-258">Но его необходимо просматривать в журнале hello выходных данных для модуля "hello".</span><span class="sxs-lookup"><span data-stu-id="7f054-258">But it must be viewed in hello output log for hello module.</span></span> <span data-ttu-id="7f054-259">В настоящее время рекомендуется разрабатывать и отлаживать скрипты Python в среде, например IPython и затем импортировать hello кода в модуле hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-259">We currently recommend that you develop and debug Python scripts in an environment such as IPython and then import hello code into hello module.</span></span>
3. <span data-ttu-id="7f054-260">*Один кадр данных в качестве выходных данных.*</span><span class="sxs-lookup"><span data-stu-id="7f054-260">*Single data frame output.*</span></span> <span data-ttu-id="7f054-261">точка входа Hello Python — только разрешенные tooreturn кадр данных single в качестве выходных данных.</span><span class="sxs-lookup"><span data-stu-id="7f054-261">hello Python entry point is only permitted tooreturn a single data frame as output.</span></span> <span data-ttu-id="7f054-262">Это не поддерживается в настоящее время tooreturn произвольный Python объекты, такие как обученных моделей непосредственно резервное среды выполнения toohello машинного обучения Azure.</span><span class="sxs-lookup"><span data-stu-id="7f054-262">It is not currently possible tooreturn arbitrary Python objects such as trained models directly back toohello Azure Machine Learning runtime.</span></span> <span data-ttu-id="7f054-263">Как [выполнение скрипта R][execute-r-script], который имеет hello такое же ограничение возможна во многих случаях объекты toopickle в байтовый массив, а затем возвращать, внутри блока данных.</span><span class="sxs-lookup"><span data-stu-id="7f054-263">Like [Execute R Script][execute-r-script], which has hello same limitation, it is possible in many cases toopickle objects into a byte array and then return that inside of a data frame.</span></span>
4. <span data-ttu-id="7f054-264">*Toocustomize невозможности установки Python*.</span><span class="sxs-lookup"><span data-stu-id="7f054-264">*Inability toocustomize Python installation*.</span></span> <span data-ttu-id="7f054-265">В настоящее время hello только способом tooadd пользовательских модулей Python — через механизм файла zip hello, описанных ранее.</span><span class="sxs-lookup"><span data-stu-id="7f054-265">Currently, hello only way tooadd custom Python modules is via hello zip file mechanism described earlier.</span></span> <span data-ttu-id="7f054-266">Хотя этот механизм можно применять для небольших модулей, он не подходит для больших модулей (особенно с встроенными библиотеками DLL) или большого количества модулей.</span><span class="sxs-lookup"><span data-stu-id="7f054-266">While this is feasible for small modules, it is cumbersome for large modules (especially those with native DLLs) or a large number of modules.</span></span> 

## <a name="conclusions"></a><span data-ttu-id="7f054-267">Заключение</span><span class="sxs-lookup"><span data-stu-id="7f054-267">Conclusions</span></span>
<span data-ttu-id="7f054-268">Hello [выполнение сценария Phyton] [ execute-python-script] модуль позволяет tooincorporate существующего кода Python специалист по анализу данных в облаке обучения конечных автоматов в машинном обучении Azure и tooseamlessly ввода в эксплуатацию их как часть веб-службы.</span><span class="sxs-lookup"><span data-stu-id="7f054-268">hello [Execute Python Script][execute-python-script] module allows a data scientist tooincorporate existing Python code into cloud-hosted machine learning workflows in Azure Machine Learning and tooseamlessly operationalize them as part of a web service.</span></span> <span data-ttu-id="7f054-269">Модуль сценария Python Здравствуй естественным образом взаимодействует с других модулях машинного обучения Azure.</span><span class="sxs-lookup"><span data-stu-id="7f054-269">hello Python script module interoperates naturally with other modules in Azure Machine Learning.</span></span> <span data-ttu-id="7f054-270">Hello модуль можно использовать широкий набор задач из toopre обработки исследования данных и извлечения признаков и tooevaluation и последующей обработки результатов hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-270">hello module can be used for a range of tasks from data exploration toopre-processing and feature extraction, and then tooevaluation and post-processing of hello results.</span></span> <span data-ttu-id="7f054-271">Среда выполнения Hello серверной части, используемая для выполнения основан на Anaconda, хорошо проверенное и широко используемые распространения Python.</span><span class="sxs-lookup"><span data-stu-id="7f054-271">hello backend runtime used for execution is based on Anaconda, a well-tested and widely used Python distribution.</span></span> <span data-ttu-id="7f054-272">Это внутренний упрощает для вас платы tooon существующие ресурсы кода в облаке hello.</span><span class="sxs-lookup"><span data-stu-id="7f054-272">This backend makes it simple for you tooon-board existing code assets into hello cloud.</span></span>

<span data-ttu-id="7f054-273">Ожидается, что дополнительные функциональные возможности toohello tooprovide [выполнение сценария Phyton] [ execute-python-script] модуль, такие как hello tootrain возможности и эксплуатацию моделей в Python и tooadd Улучшенная поддержка hello Разработка и отладка кода в студии машинного обучения Azure.</span><span class="sxs-lookup"><span data-stu-id="7f054-273">We expect tooprovide additional functionality toohello [Execute Python Script][execute-python-script] module such as hello ability tootrain and operationalize models in Python and tooadd better support for hello development and debugging code in Azure Machine Learning Studio.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7f054-274">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="7f054-274">Next steps</span></span>
<span data-ttu-id="7f054-275">Дополнительные сведения см. в разделе hello [центре разработчиков Python](https://azure.microsoft.com/develop/python/).</span><span class="sxs-lookup"><span data-stu-id="7f054-275">For more information, see hello [Python Developer Center](https://azure.microsoft.com/develop/python/).</span></span>

<!-- Module References -->
[execute-python-script]: https://msdn.microsoft.com/library/azure/cdb56f95-7f4c-404d-bde7-5bb972e6f232/
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/
