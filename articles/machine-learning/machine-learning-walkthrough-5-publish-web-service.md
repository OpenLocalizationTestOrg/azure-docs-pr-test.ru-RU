---
title: "Шаг 5: Развертывание веб-службы машинного обучения hello | Документы Microsoft"
description: "Шаг 5 из hello разработка прогнозирующего решения Пошаговое руководство: развертывание прогнозной эксперимента в студии машинного обучения веб-службы."
services: machine-learning
documentationcenter: 
author: garyericson
manager: jhubbard
editor: cgronlun
ms.assetid: 3fca74a3-c44b-4583-a218-c14c46ee5338
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/23/2017
ms.author: garye
ms.openlocfilehash: 76391010972ed1450bbda8bfb2352c7b22b51ccc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="walkthrough-step-5-deploy-hello-azure-machine-learning-web-service"></a>Пошаговое руководство шаг 5: Развертывание веб-службы машинного обучения Azure hello
Это пятый шаг hello hello пошагового руководства, [разрабатывать решения для прогнозирующего анализа в машинном обучении Azure](machine-learning-walkthrough-develop-predictive-solution.md)

1. [Создание рабочей области машинного обучения](machine-learning-walkthrough-1-create-ml-workspace.md)
2. [Отправка существующих данных](machine-learning-walkthrough-2-upload-data.md)
3. [Создание нового эксперимента](machine-learning-walkthrough-3-create-new-experiment.md)
4. [Обучать и оценивать модели hello](machine-learning-walkthrough-4-train-and-evaluate-models.md)
5. **Развернуть веб-службу hello**
6. [Веб-службы доступа hello](machine-learning-walkthrough-6-access-web-service.md)

- - -
toogive другие toouse вероятность hello прогнозной модели, разработанный в этом пошаговом руководстве, мы можно развернуть его как веб-службы в Azure.

Точку toothis мы пробовал экспериментировать с нашей модели обучения. Но hello развернуты службы больше не будет обучающих toodo — он будет toogenerate новые прогнозы путем оценки hello введенных на основе нашей модели. Так мы будем toodo некоторые tooconvert подготовки это поэкспериментировать с ***обучения*** поэкспериментировать tooa ***прогнозной*** поэкспериментировать. 

Этот процесс состоит из трех этапов.  

1. Удалите одну из моделей hello
2. Преобразовать hello *эксперимента обучения* мы создали в *прогнозной эксперимента*
3. Развертывание hello прогнозной эксперимент как веб-службы

## <a name="remove-one-of-hello-models"></a>Удалите одну из моделей hello

Во-первых мы должны tootrim этом эксперименте работу немного. В настоящее время имеется две различные модели в эксперименте hello, но нам нужен только одна модель toouse когда мы развертывание веб-службы.  

Предположим, мы решили hello повышенного дерева модели выполняется быстрее, чем модель SVM hello. Поэтому первая самое toodo hello remove hello [Двухклассовая машина опорных векторов] [ two-class-support-vector-machine] модуль и hello модули, которые были использованы для ее обучения. Вы можете toomake копию эксперимента hello сначала, нажав кнопку **Сохранить как** внизу hello hello поэкспериментировать холста.

Нужны hello toodelete следующие модули:  

* [Two-Class Support Vector Machine][two-class-support-vector-machine] (Двухклассовый метод опорных векторов);
* [Обучение модели] [ train-model] и [модель оценки] [ score-model] модули, которые были подключенные tooit
* оба модуля [Normalize Data][normalize-data] (Нормализация данных);
* [Модель оценки] [ evaluate-model] (поскольку мы работаем завершения оценки hello моделей)

Выберите каждый модуль и нажмите клавишу Delete hello или модуля hello щелкните правой кнопкой мыши и выберите **удалить**. 

![Удалить модель SVM hello][3a]

Теперь ваша модель должна выглядеть примерно так:

![Удалить модель SVM hello][3]

Теперь мы готовы toodeploy это модели с помощью hello [Двухклассового повышенного дерева принятия решений][two-class-boosted-decision-tree].

## <a name="convert-hello-training-experiment-tooa-predictive-experiment"></a>Преобразовать прогнозной эксперимента эксперимента обучения tooa hello

tooget это модели готовый для развертывания, то необходимо tooconvert это прогнозной эксперимента tooa эксперимента обучения. Этот процесс состоит из трех этапов.

1. Сохранить модель hello мы обучена и замените наших обучающих модулей
2. Trim hello эксперимента tooremove модули, которые требовались только для обучения
3. Определите, где hello веб-служба будет принимать входные данные и где он создает выходные данные hello

Мы могли сделать это вручную, но к счастью, все три действия могут быть выполнены, щелкнув **настройки веб-службы** внизу hello холст эксперимента hello (и выбрав hello **прогнозной веб-служба** параметр).

> [!TIP]
> Если для получения дополнительных сведений на что происходит при преобразовании tooa эксперимента обучения прогнозной поэкспериментировать см. в разделе [как tooprepare модели для развертывания в Azure Machine Learning Studio](machine-learning-convert-training-experiment-to-scoring-experiment.md).

При щелчке **Set Up Web Service**(Настроить веб-службу) происходит следующее.

* Hello обученной модели — один преобразованный tooa **обученной модели** модуля и хранятся в toohello палитры модуля hello слева от hello поэкспериментировать холст (его можно найти в разделе **обученных моделей**)
* Удаляются следующие модули, которые мы использовали для обучения:
  * [Two-Class Boosted Decision Tree][two-class-boosted-decision-tree] (Двухклассовое увеличивающееся дерево принятия решений);
  * [Train Model][train-model] (Обучение модели);
  * [Split Data][split] (Разделение данных);
  * Во-вторых Hello [выполнение скрипта R] [ execute-r-script] модуля, который был использован для тестовых данных
* Сохранить Hello обученной модели добавляется обратно в эксперименте hello
* **Веб-службе входные данные** и **веб-службы вывода** модули будут добавлены (они определяют, где hello пользовательских данных перейдет в модели hello, и какие данные возвращаются при обращении к веб-службе hello)

> [!NOTE]
> Вы увидите, hello эксперимента сохраняется в двух частях вкладках, которые были добавлены вверху hello холст эксперимента hello. Hello исходного эксперимента обучения — вкладка "hello" **эксперимента обучения**, и только что созданный прогнозной эксперимента hello находится под **прогнозной эксперимента**. Hello прогнозной эксперимента — hello, который мы будем развертывание веб-службы.

Мы должны tootake один дополнительный шаг с этой конкретной эксперимента.
Мы добавили два [выполнение скрипта R] [ execute-r-script] tooprovide модули весовой коэффициент функции toohello данных. Это было просто прием, необходимые для обучения и проверки, чтобы мы могли out этих модулей в конечной модели hello.
Студия машинного обучения удалены один [выполнение скрипта R] [ execute-r-script] модуля при его удалении hello [разбиение] [ split] модуля. Теперь мы можем удалить другие hello и подключите [редактор метаданных] [ metadata-editor] непосредственно слишком[модель оценки][score-model].    

Теперь наш эксперимент должен выглядеть следующим образом:  

![Оценка обученной модели hello][4]  

> [!NOTE]
> Возможно, вас интересует почему мы оставили набора данных UCI данных кредитной карты немецкий hello в эксперименте прогнозной hello. Hello службы будет tooscore hello пользовательских данных, не hello исходного набора данных, поэтому почему оставьте hello исходный набор данных в модели hello?
> 
> Это правда, что hello службы не требуется hello исходные данные кредитной карты. Но он должен hello схемы для этих данных, которая содержит сведения, такие как число столбцов существует и какие столбцы являются числовыми. Эта информация схемы является необходимые toointerpret hello пользовательских данных. Оставить эти компоненты подключены таким образом, чтобы hello оценки модуль имеет hello схемы набора данных при запуске службы hello. Hello данные не используются, только что hello схемы.  
> 
> 

Запустите эксперимент hello последний раз (щелкните **запуска**.) Tooverify, hello модели по-прежнему работает, нажмите кнопку Выход hello hello [модель оценки] [ score-model] модуль и выберите **Просмотр результатов**. Вы увидите, что исходные данные hello отображается hello кредит риск значение («меток оцененных значений»), а также hello оценки значение вероятности («оцененных вероятностей».) 

## <a name="deploy-hello-web-service"></a>Развернуть веб-службу hello
Можно развернуть hello эксперимент как веб-служба классическом или как новую веб-службу, которая основана на Azure Resource Manager.

### <a name="deploy-as-a-classic-web-service"></a>Развертывание в виде классической веб-службы
toodeploy классические веб-службе, производной от наших эксперименты, нажмите кнопку **развертывание веб-службы** ниже hello холсте и выберите **развертывание веб-службы [классический]**. Студия машинного обучения развертывает hello эксперимент как веб-службы и осуществляется переход toohello панель мониторинга для этой веб-службы. На этой странице можно вернуть эксперимента toohello (**Просмотр снимка** или **просмотреть последние**) и выполнить простую проверку hello веб-службы (см. **проверить веб-службу hello** ниже). Также есть сведения для создания приложений, которые могут обращаться к веб-службе hello (Подробнее об этом в hello далее в этом пошаговом руководстве).

![Панель мониторинга веб-службы][6]

Можно настроить службу hello, щелкнув hello **конфигурации** вкладки. Здесь вы можете изменить имя службы hello (это имя эксперимента hello заданного по умолчанию) и предоставить его описание. Можно также предоставить более понятные метки для hello входных и выходных данных.  

![Настройка веб-службы hello][5]  

### <a name="deploy-as-a-new-web-service"></a>Развертывание в качестве новой веб-службы

> [!NOTE] 
> toodeploy новую веб-службу, необходимо иметь достаточные разрешения в toowhich hello подписки, на которых развертываются hello веб-службы. Дополнительные сведения см. в разделе [управление веб-службы с помощью портала веб-службы Azure Machine Learning hello](machine-learning-manage-new-webservice.md). 

toodeploy веб-службу, производным от наших экспериментов:

1. Нажмите кнопку **развертывание веб-службы** ниже hello холсте и выберите **развертывания [новое] веб-службы**. Студия машинного обучения передает веб-службы машинного обучения Azure toohello **развертывание эксперимента** страницы.

2. Введите имя для hello веб-службы. 

3. Для **цена плана**, можно выбрать существующий ценовой план, или выберите «создать» и предоставьте hello новый план имя и выберите hello ежемесячные параметр плана. Hello плана уровней по умолчанию toohello планы для своего региона по умолчанию и веб-службы — развернутой toothat область.

4. Щелкните **Развернуть**.

Через несколько минут hello **краткое руководство** открывается страница для веб-службы.

Можно настроить службу hello, щелкнув hello **Настройка** вкладки. Здесь вы можете изменить службу hello title и предоставить его описание. 

tootest hello веб-службы, нажмите кнопку hello **тест** вкладка (см. **проверить веб-службу hello** ниже). Дополнительные сведения о создании приложений, которые могут обращаться к веб-службе hello щелкните hello **использование** вкладка (hello далее в этом пошаговом руководстве будет более подробно).

> [!TIP]
> После развертывания его можно обновить hello веб-службы. Например, следует toochange модели затем можно изменить эксперимента обучения hello, настраивать параметры модели hello и нажмите кнопку **развертывание веб-службы**, выбрав **развертывание веб-службы [классический]** или  **Развертывание веб-службы [новое]**. При развертывании hello эксперимент, он заменяет hello веб-службы с помощью обновленной модели.  
> 
> 

## <a name="test-hello-web-service"></a>Проверить веб-службу hello

При обращении к веб-службе hello hello пользовательских данных поступает через hello **веб-службе входные данные** модуля, где он прошел toohello [модель оценки] [ score-model] модуля и оцененных. способ мы настроили прогнозной эксперимента hello Hello hello модель ожидает данных в том же формате, как набор данных исходной кредит риск hello hello.
Hello результатов toohello пользователя веб-службу hello hello **веб-службы вывода** модуля.

> [!TIP]
> у нас есть hello прогнозной эксперимента настройки hello всего способом Hello результатом hello [модель оценки] [ score-model] возвращаются модуля. Сюда входят все hello входных данных, а также значение риска кредитной hello и hello оценки вероятности. Иначе может обнаружить, если требуется, но — например, может вернуть только значение риска кредитной hello. toodo, вставьте [столбцы проекта] [ project-columns] модуль между [модель оценки] [ score-model] и hello **веб-службы вывода** tooeliminate столбцы, вы не хотите hello web service tooreturn. 
> 
> 

Можно проверить классического веб-узла службы в **студии машинного обучения** или в hello **веб-службы Azure Machine Learning** портала.
Вы можете протестировать новую веб-службу только в hello **веб-службы обучения машины** портала.

> [!TIP]
> При тестировании веб-службы Azure Machine Learning портале hello, возможно создать демонстрационные данные, можно использовать службу hello запрос-ответ tootest портала hello. На hello **Настройка** выберите «Да» для **включен образец данных?**. При открытии вкладки hello запрос-ответ на hello **тест** странице портала hello заполняет образец данных, полученных из набора данных исходной кредит риск hello.

### <a name="test-a-classic-web-service"></a>Тестирование классической веб-службы

Классический веб-службы можно проверить в студии машинного обучения или портале hello машины обучения веб-служб. 

#### <a name="test-in-machine-learning-studio"></a>Тестирование в студии машинного обучения

1. На hello **МОНИТОРИНГА** hello веб-службы и щелкните hello **тест** под заголовком **конечной точки по умолчанию**. Диалоговое окно появляется и выводится hello входных данных для службы hello. Они являются hello же столбцы, которые присутствовали в наборе данных исходного кредит риск hello.  

2. Введите набор данных и нажмите кнопку **ОК**. 

#### <a name="test-in-hello-machine-learning-web-services-portal"></a>Тестирование на портале веб-службы обучения машины hello

1. На hello **МОНИТОРИНГА** hello веб-службы и щелкните hello **предварительного просмотра теста** ссылку в списке **конечной точки по умолчанию**. тестовой страницы приветствия на портале веб-службы Azure Machine Learning hello для конечной веб-службы hello открывается и запросит hello входные данные для службы hello. Они являются hello же столбцы, которые присутствовали в наборе данных исходного кредит риск hello.

2. Щелкните **Test Request-Response** (Тестировать "запрос-ответ"). 

### <a name="test-a-new-web-service"></a>Тестирование новой веб-службы

Веб-службу можно проверить только на портале веб-службы обучения машины hello.

1. В hello [веб-службы Azure Machine Learning](https://services.azureml.net/quickstart) портала, нажмите кнопку **тест** вверху hello страницы приветствия. Hello **тест** открывается страница, и можно ввести данные для службы hello. поля Hello ввода соответствуют toohello столбцы, которые присутствовали в наборе данных исходного кредит риск hello. 

2. Введите набор данных и щелкните **Test Request-Response**(Тестировать "запрос-ответ").

Hello результаты теста hello отображаются с правой стороны страницы приветствия в выходном столбце hello hello. 


## <a name="manage-hello-web-service"></a>Управление hello веб-службы

### <a name="manage-a-classic-web-service-in-hello-azure-classic-portal"></a>Управление классического веб-службы в hello классический портал Azure

После развертывания классического веб-службы, вы можете управлять из hello [классический портал Azure](https://manage.windowsazure.com).

1. Войдите в toohello [классический портал Azure](https://manage.windowsazure.com)
2. На панели служб Microsoft Azure hello щелкните **МАШИННОГО ОБУЧЕНИЯ**
3. Щелкните рабочую область.
4. Нажмите кнопку hello **веб-службы** вкладка
5. Нажмите кнопку hello веб-службы, которую мы создали
6. Щелкните конечную точку «default» hello

Здесь можно, например, отслеживать, насколько hello веб-службы и выполнить модификации производительности, изменив количество одновременных вызовов hello служба может обрабатывать.

Дополнительные сведения см. в статье

* [Создание конечных точек](machine-learning-create-endpoint.md)
* [Масштабирование веб-службы](machine-learning-scaling-webservice.md)

### <a name="manage-a-classic-or-new-web-service-in-hello-azure-machine-learning-web-services-portal"></a>Управление классического или веб-службу на портале веб-службы Azure Machine Learning hello

После развертывания веб-службы, классических или новый, вы можете управлять из hello [веб-службы Microsoft Azure Machine Learning](https://services.azureml.net/quickstart) портала.

производительность hello toomonitor веб-службы:

1. Войдите в toohello [веб-службы Microsoft Azure Machine Learning](https://services.azureml.net/quickstart) портала
2. Щелкните **Веб-службы**.
3. Щелкните нужную веб-службу.
4. Нажмите кнопку hello **панели мониторинга**

- - -
**Далее: [доступ к веб-службе hello](machine-learning-walkthrough-6-access-web-service.md)**

[3]: ./media/machine-learning-walkthrough-5-publish-web-service/publish3.png
[3a]: ./media/machine-learning-walkthrough-5-publish-web-service/publish3a.png
[4]: ./media/machine-learning-walkthrough-5-publish-web-service/publish4.png
[5]: ./media/machine-learning-walkthrough-5-publish-web-service/publish5.png
[6]: ./media/machine-learning-walkthrough-5-publish-web-service/publish6.png


<!-- Module References -->
[evaluate-model]: https://msdn.microsoft.com/library/azure/927d65ac-3b50-4694-9903-20f6c1672089/
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/
[metadata-editor]: https://msdn.microsoft.com/library/azure/370b6676-c11c-486f-bf73-35349f842a66/
[normalize-data]: https://msdn.microsoft.com/library/azure/986df333-6748-4b85-923d-871df70d6aaf/
[score-model]: https://msdn.microsoft.com/library/azure/401b4f92-e724-4d5a-be81-d5b0ff9bdb33/
[split]: https://msdn.microsoft.com/library/azure/70530644-c97a-4ab6-85f7-88bf30a8be5f/
[train-model]: https://msdn.microsoft.com/library/azure/5cc7053e-aa30-450d-96c0-dae4be720977/
[two-class-boosted-decision-tree]: https://msdn.microsoft.com/library/azure/e3c522f8-53d9-4829-8ea4-5c6a6b75330c/
[two-class-support-vector-machine]: https://msdn.microsoft.com/library/azure/12d8479b-74b4-4e67-b8de-d32867380e20/
[project-columns]: https://msdn.microsoft.com/en-us/library/azure/1ec722fa-b623-4e26-a44e-a50c6d726223/
