---
title: "Модель производительности aaaEvaluate в машинном обучении | Документы Microsoft"
description: "Объясняет, как tooevaluate модели производительности в машинном обучении Azure."
services: machine-learning
documentationcenter: 
author: garyericson
manager: jhubbard
editor: cgronlun
ms.assetid: 5dc5348a-4488-4536-99eb-ff105be9b160
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/20/2017
ms.author: bradsev;garye
ms.openlocfilehash: 03477368758dbb13aa6f54c5d27fb215615d1f9d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooevaluate-model-performance-in-azure-machine-learning"></a>Как tooevaluate модели производительности в машинном обучении Azure
В этой статье демонстрируется tooevaluate hello эффективность модели в студии машинного обучения Azure и приводится краткое объяснение hello показателей для этой задачи. Доступны три стандартных сценария управляемого обучения: 

* регрессия;
* двоичная классификация; 
* классификация по нескольким классам.

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

Оценка производительности hello модели является одним из этапов core hello в процессе обработки и анализа данных hello. Он указывает успешность hello оценки (прогнозов) набора данных был обученной модели. 

Оценка модели в Машинном обучении Azure базируется на двух основных модулях машинного обучения: [Evaluate Model][evaluate-model] (Анализ модели) и [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели). Эти модули предоставляют toosee как модели выполняется с точки зрения число метрик, которые обычно используются в машинном обучении и статистике.

## <a name="evaluation-vs-cross-validation"></a>Сравнение оценки и перекрестной проверки
Вычисление и перекрестной проверки, стандартных способов toomeasure hello производительность вашей модели. Оба модуля генерируют показатели оценки, которые вы можете проверить или сравнить с показателями других моделей.

[Модель оценки] [ evaluate-model] ожидает Оцененный набор данных в качестве входных данных (или 2 в случае хотелось бы производительность hello toocompare 2 различных моделей). Это означает, что вы должны tootrain модели с помощью hello [Обучение модели] [ train-model] модуля, а также делать прогнозы на некоторых набора данных с помощью hello [модель оценки] [ score-model] модуль, прежде чем оценить результаты hello. Hello Оценка производится на основе оцененных метки и вероятностей с метками true hello, все из которых являются выходными hello hello [модель оценки] [ score-model] модуля.

Кроме того можно использовать tooperform перекрестной проверки ряд операций обучение показатель оценки (10 сверток) автоматически для различных подмножеств hello входных данных. входные данные Hello разделяется на 10 частей, которое зарезервировано для тестирования и hello других 9 для обучения. Этот процесс повторяется 10 раз и усреднения hello метрик оценки. Это помогает определить, насколько хорошо модель будет generalize toonew наборов данных. Hello [перекрестная проверка модели] [ cross-validate-model] модуль принимает необученную модель и некоторые меткой набора данных и выходы результаты оценки hello каждого hello 10 сверток, кроме toohello усредненный результаты.

В следующих разделах hello, будет строить простой модели регрессии и классификации и оценки их производительности с помощью обоих hello [модель оценки] [ evaluate-model] и hello [перекрестной проверки Модель] [ cross-validate-model] модулей.

## <a name="evaluating-a-regression-model"></a>Оценка модели регрессии
Предположим, что мы хотим toopredict цена автомобиля, использование некоторых функциональных возможностей, таких как измерения, мощность, спецификаций ядра и т. д. Это типичный Регрессия, где hello целевой переменной (*цены*) является непрерывным числовым значением. Можно ли добавить простую модель линейной регрессии, что данный компонент hello значения определенных автомобиля, можно прогнозировать hello цена этого автомобиля. Эта модель регрессии можно использовать tooscore hello мы обучена на одном наборе данных. Когда мы имеют hello прогнозируемые цены для всех автомобилей hello, мы можно оценить производительность hello модели hello, просмотрев насколько прогнозы hello отличаются от фактических цены hello в среднем. tooillustrate это, мы используем hello *автомобиль цены (Raw) данных dataset* в hello **сохраненные наборы данных** раздел в студии машинного обучения Azure.

### <a name="creating-hello-experiment"></a>Создание экспериментов hello
Добавьте следующие рабочей tooyour модули в студии машинного обучения Azure hello:

* данные о ценах на автомобили (необработанные);
* [Линейная регрессия;][linear-regression]
* [Обучение модели;][train-model]
* [Score Model][score-model] (Оценка модели);
* [Evaluate Model][evaluate-model] (Анализ модели);

Подключение hello порты, как показано на рис. 1 и столбец метки hello набор hello [Обучение модели] [ train-model] модуль слишком*цены*.

![Оценка модели регрессии](media/machine-learning-evaluate-model-performance/1.png)

Рисунок 1. Оценка модели регрессии.

### <a name="inspecting-hello-evaluation-results"></a>Просмотреть результаты оценки hello
После выполнения эксперимента hello, можно щелкнуть hello выходной порт hello [модель оценки] [ evaluate-model] модуль и выберите *визуализировать* результаты оценки toosee hello. Здравствуйте оценки метрики недоступны для моделей регрессии являются: *означает абсолютная погрешность*, *корневой означает абсолютная погрешность*, *относительная абсолютная погрешность*,  *Относительный квадрат ошибки*и hello *коэффициент определения*.

Hello термин «ошибка» здесь представляющий разность между значением hello hello прогнозируемое значение и значение true hello. абсолютное значение Hello или hello квадратный этого факта — обычно вычисляемый toocapture hello общее прогнозировать значимость ошибки для всех экземпляров как hello разница между hello и true значение может быть отрицательным числом, в некоторых случаях. Hello ошибки метрики измерения производительности прогнозной hello модели регрессии с точки зрения hello среднее отклонение его прогнозы на основании значения true hello. Более низкие значения ошибка означает, что модель hello является более точной при составлении прогнозов. Метрика — Общая ошибка 0 означает, что hello модели идеально подходит hello данных.

Hello коэффициент смешанной корреляции, которая также называется R квадрат, также является стандартным способом оценки того, насколько хорошо модель hello соответствует hello данных. Он может интерпретироваться как hello долю вариантов описано моделью hello. В этом случае чем выше пропорция, тем лучше. Значение 1 означает идеальное совпадение.

![Показатели оценки линейной регрессии](media/machine-learning-evaluate-model-performance/2.png)

Рис. 2. Показатели оценки линейной регрессии.

### <a name="using-cross-validation"></a>Использование перекрестной проверки
Как упоминалось ранее, можно выполнить повторное обучение, оценки и автоматически на основе оценок hello [перекрестная проверка модели] [ cross-validate-model] модуля. Для этого вам потребуются набор данных, необученная модель и модуль [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели) (см. рисунок ниже). Обратите внимание, что столбец метки hello tooset слишком*цены* в hello [перекрестная проверка модели] [ cross-validate-model] в свойствах модуля.

![Перекрестная проверка модели регрессии](media/machine-learning-evaluate-model-performance/3.png)

Рис. 3. Перекрестная проверка модели регрессии.

После выполнения эксперимента hello, можно просмотреть результаты оценки hello, щелкнув правой выходной порт hello hello [перекрестная проверка модели] [ cross-validate-model] модуля. Это обеспечит более подробного представления hello метрики для каждой итерации (свертки) и hello усредненный Результаты метрик hello (рис. 4).

![Результаты перекрестной проверки модели регрессии](media/machine-learning-evaluate-model-performance/4.png)

Рис. 4 Результаты перекрестной проверки модели регрессии.

## <a name="evaluating-a-binary-classification-model"></a>Оценка модели двоичной классификации
В сценарии с двоичной классификации, hello целевой переменной имеет только два возможных результатов, например: {0, 1} или {false, true}, {отрицательное, положительное}. Предположим, вам предоставляется набор данных для взрослых сотрудников с некоторыми демографические занятости переменных, и предлагают уровень дохода hello toopredict, двоичные переменную со значениями hello {"< = 50 тысяч», «> 50 тысяч»}. Другими словами, класс отрицательное hello представляет hello сотрудников, которые меньше или равно сделать too50K в год и hello положительное класс представляет все сотрудники. Как сценарии регрессии hello мы обучения модели, оценка некоторые данные и оценивать результаты hello. Hello здесь основное отличие состоит в любое hello показатели вычисляет машинного обучения Azure и выходные данные. сценария прогнозирования уровня доход hello tooillustrate, мы будем использовать hello [взрослых](http://archive.ics.uci.edu/ml/datasets/Adult) toocreate набора данных машинного обучения Microsoft Azure экспериментов и оценить производительность hello модели двухклассовой логистической регрессии, двоичные данные часто используемые Классификатор.

### <a name="creating-hello-experiment"></a>Создание экспериментов hello
Добавьте следующие рабочей tooyour модули в студии машинного обучения Azure hello:

* набор данных Adult Census Income Binary Classification;
* [двухклассная регрессионная логистическая модель;][two-class-logistic-regression]
* [Обучение модели;][train-model]
* [Score Model][score-model] (Оценка модели);
* [Evaluate Model][evaluate-model] (Анализ модели);

Подключение hello порты, как показано на рис. 5 и столбец метки hello набор hello [Обучение модели] [ train-model] модуль слишком*доход*.

![Оценка модели двоичной классификации](media/machine-learning-evaluate-model-performance/5.png)

Рис. 5. Оценка модели двоичной классификации.

### <a name="inspecting-hello-evaluation-results"></a>Просмотреть результаты оценки hello
После выполнения эксперимента hello, можно щелкнуть hello выходной порт hello [модель оценки] [ evaluate-model] модуль и выберите *визуализировать* результаты оценки toosee hello (рис. 7). Hello доступных метрик оценки для модели двоичной классификации: *точности*, *точности*, *отозвать*, *оценка F1*, и *AUC*. Кроме того, модуль hello выводит матрицей, показывающая hello количество истинных положительных, ложных отрицательных результатов, истинных отрицательных и ложных положительных результатов в том числе в *ROC*, *точности и отзыва*и *Точности прогнозов* кривых.

Точность — просто hello долю правильно классифицированные экземпляров. Это обычно hello первый показателем, который рассмотреть при оценке классификатора. Если тестовые данные hello представляет Несбалансированная (где большинство hello экземпляров относится tooone hello классов), или пользователи будут заинтересованы hello производительность на один из классов hello, точность не перехватывает действительно эффективность hello классификатора. В сценарии уровня классификации доход hello предполагается тестировании для некоторых данных, где 99% экземпляров hello представляют людей, которые меньше или равно заработать too50K в год. Это возможных tooachieve 0.99 точности при прогнозировании hello класс «< = 50 тысяч» для всех экземпляров. Классификатор Hello в этом случае отображается toobe хорошо работаете общей, но на самом деле, происходит сбой tooclassify любой hello высокими доходами лиц (hello 1%) неправильно.

По этой причине бывает полезным toocompute дополнительные метрики, записать более специфические аспекты hello оценки. Прежде чем перейти к подробным сведениям hello таких показателей, это важно toounderstand hello матрицей оценки двоичной классификации. Hello класса, который может принимать только двух возможных значений, который мы обычно метки в обучающем наборе hello ссылаться tooas положительным или отрицательным. Hello положительные и отрицательные экземпляров, которые классификатора прогнозирует правильно называются истинных положительных результатов (TP) и истинных отрицательных (TN), соответственно. Аналогичным образом экземпляры hello неверно классифицирована называются ложных положительных результатов (FP) и ложных отрицательных результатов (FN). Матрица противоречий Hello является просто таблица, показывающая hello количество экземпляров, которые попадают в каждом из этих категорий. Машинное обучение Azure автоматически определяет, какой из двух классов hello в наборе данных hello класс положительных hello. Если метки класса hello, Boolean или целые числа, а затем Здравствуйте, «true» или "1" с меткой экземплярам присваиваются класс положительных hello. Если метки hello являются строками, как случае hello hello доход dataset, метки hello сортируются в алфавитном порядке, а первый уровень hello выбирается отрицательное класс toobe hello пока hello второго уровня является положительным классом hello.

![Матрица неточностей двоичной классификации](media/machine-learning-evaluate-model-performance/6a.png)

Рис. 6. Матрица неточностей двоичной классификации.

Вернемся toohello доход классификации проблему, мы хотим tooask несколько оценки вопросы, которые помогают оценить показатели hello используется классификатора hello. Очень естественный вопрос: "за пределы hello частных лиц, которым hello модели получая прогнозируемое toobe > 50 тысяч (TP + FP), сколько было классификации (TP)?" Этот вопрос, просмотрев hello **точности** hello модели, который является hello долю положительных результатов, которые классифицируются правильно: TP/(TP+FP). Другой часто вопрос «за пределы hello высокой earning работников с доход > 50 тысяч (TP + FN), сколько hello классификатор правильно классифицировать (TP)». Это фактически hello **отозвать**, или значение true, положительное скорость hello: TP/(TP+FN) hello классификатора. Вы могли заметить, что существует очевидный компромисс между точностью и полнотой. Например заданного относительно сбалансированных набора данных, классификатор, который прогнозирует основном положительное экземпляров будет иметь высокий уровень отзывов, но вместо низкой точности столько экземпляров отрицательное hello бы неправильных приведет к большое количество ложных положительных результатов. toosee график как изменять эти две метрики, можно щелкнуть кривая «Точности и ОТЗЫВА» hello в странице вывода результатов оценки hello (вверху слева часть рис. 7).

![Результаты оценки двоичной классификации](media/machine-learning-evaluate-model-performance/7.png)

Рис. 7. Результаты оценки двоичной классификации.

Еще один связанный метрику, которая часто используется — hello **оценка F1**, принимающий точности и отзыва во внимание. Он hello среднее гармоническое этих 2 метрик и таким образом вычисляется: F1 = 2 (Напомним, что точность x) / (точность + отзывов). показатель F1 Hello является хорошим способом toosummarize hello вычисления в одно число, но всегда рекомендуется toolook точности и отзыва вместе toobetter понять, как ведет себя классификатора.

Кроме того, один Проверьте скорость положительное значение true, hello и скорость положительное значение false hello в hello **операционной характеристики приемника (ROC)** кривой и hello соответствующий **hello области под кривой (AUC)** значение. Hello ближе этой кривой toohello верхнем левом углу, hello лучше hello классификатора производительности (то есть повышение hello значение true, положительное скорость свести к минимуму false положительное скорость hello). Кривых, закрыть toohello диагонали Здравствуйте построения, классификаторы, toomake прогнозы, которые, как правило, в результате закрытия toorandom подбора.

### <a name="using-cross-validation"></a>Использование перекрестной проверки
Как примере hello регрессии мы можно выполнить обучение toorepeatedly перекрестной проверки, оценки и оценивать различные подмножества данных hello автоматически. Аналогичным образом можно использовать hello [перекрестная проверка модели] [ cross-validate-model] модуля, модель необученную логистической регрессии и набора данных. необходимо задать столбец метки Hello слишком*доход* в hello [перекрестная проверка модели] [ cross-validate-model] в свойствах модуля. После выполнения эксперимента hello и щелкнув правой hello выходной порт hello [перекрестная проверка модели] [ cross-validate-model] модуль, можно увидеть метрика двоичной классификации hello значения для каждой свертки, кроме toohello Среднее и стандартное отклонение для каждого. 

![Перекрестная проверка модели двоичной классификации](media/machine-learning-evaluate-model-performance/8.png)

Рис. 8. Перекрестная проверка модели двоичной классификации.

![Результаты перекрестной проверки модели двоичной классификации](media/machine-learning-evaluate-model-performance/9.png)

Рис. 9. Результаты перекрестной проверки модели двоичной классификации.

## <a name="evaluating-a-multiclass-classification-model"></a>Оценка модели классификации по нескольким классам
В этом эксперименте мы будем использовать hello популярных [Iris](http://archive.ics.uci.edu/ml/datasets/Iris "Iris") набор данных содержит экземпляры 3 различных типов (классы) растение iris hello. Для каждого экземпляра существует 4 значения признаков: длина и ширина чашелистика и длина и ширина лепестка. В предыдущих экспериментах hello обучение и протестированных hello моделей с помощью hello ранее опубликованных наборов данных. Здесь мы используем hello [разбиение данных] [ split] подмножества данных hello toocreate 2 модуля обучения на hello, во-первых и для создания рейтингов и оценку на hello второй. Hello набор данных Iris, доступных в hello [репозитория UCI машинного обучения](http://archive.ics.uci.edu/ml/index.html)и могут быть загружены с помощью [импорта данных] [ import-data] модуля.

### <a name="creating-hello-experiment"></a>Создание экспериментов hello
Добавьте следующие рабочей tooyour модули в студии машинного обучения Azure hello:

* [Импорт данных][import-data]
* [Multiclass Decision Forest][multiclass-decision-forest] (Лес решений с несколькими классами);
* [Split Data][split] (Разделение данных);
* [Обучение модели;][train-model]
* [Score Model][score-model] (Оценка модели);
* [Evaluate Model][evaluate-model] (Анализ модели);

Подключение портов hello, как показано на рис. 10.

Задайте индекс столбца метки hello hello [Обучение модели] [ train-model] too5 модуля. Hello набора данных не имеет заголовка строки, но мы знаем класса hello метки указываются в hello пятый столбец.

Щелкните hello [импорта данных] [ import-data] модуля и набор hello *источника данных* свойство слишком*URL-адрес по протоколу HTTP*и hello *URL-адрес*  toohttp://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data.

Набор hello долю toobe экземпляры, которые использовались для обучения в hello [разбиение данных] [ split] модуля (0,7 пример).

![Оценка классификатора с несколькими классами](media/machine-learning-evaluate-model-performance/10.png)

Рис. Оценка классификатора с несколькими классами

### <a name="inspecting-hello-evaluation-results"></a>Просмотреть результаты оценки hello
Запустите эксперимент hello и щелкните на выходной порт hello [модель оценки][evaluate-model]. Результаты оценки Hello представлены в виде hello матрицей, в этом случае. Матрица Hello показывает hello фактических и прогнозируемых экземпляров для всех классов 3.

![Результаты оценки классификации по нескольким классам](media/machine-learning-evaluate-model-performance/11.png)

Рис. 11. Результаты оценки классификации по нескольким классам.

### <a name="using-cross-validation"></a>Использование перекрестной проверки
Как упоминалось ранее, можно выполнить повторное обучение, оценки и автоматически на основе оценок hello [перекрестная проверка модели] [ cross-validate-model] модуля. Вам потребуется набор данных, необученная модель и модуль [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели) (см. рисунок ниже). Снова требуется tooset hello столбцом hello [перекрестная проверка модели] [ cross-validate-model] модуля (индекс столбца 5 в данном случае). После выполнения эксперимента hello и нажав кнопку справа hello выходной порт hello [перекрестная проверка модели][cross-validate-model], вы можете проверить hello значения метрики для каждой свертки, а также hello среднее и стандартное отклонение. показатели Hello, показанные здесь, аналогичные toohello hello описываемым в случае hello двоичной классификации. Однако обратите внимание, что в мультиклассовой классификации вычислительных истинных положительных результатов в hello отрицательных и ложных положительных и отрицательных результатов выполняется путем подсчета на основе каждого класса, как отсутствует класс в целом положительным или отрицательным. Например, при точности вычислений hello или отзыв класса «Iris setosa» hello, предполагается это положительное класс hello и все остальные как отрицательного.

![Перекрестная проверка модели классификации по нескольким классам](media/machine-learning-evaluate-model-performance/12.png)

Рис. 12. Перекрестная проверка модели классификации по нескольким классам.

![Результаты перекрестной проверки модели классификации по нескольким классам](media/machine-learning-evaluate-model-performance/13.png)

Рис. 13. Результаты перекрестной проверки модели классификации по нескольким классам.

<!-- Module References -->
[cross-validate-model]: https://msdn.microsoft.com/library/azure/75fb875d-6b86-4d46-8bcc-74261ade5826/
[evaluate-model]: https://msdn.microsoft.com/library/azure/927d65ac-3b50-4694-9903-20f6c1672089/
[linear-regression]: https://msdn.microsoft.com/library/azure/31960a6f-789b-4cf7-88d6-2e1152c0bd1a/
[multiclass-decision-forest]: https://msdn.microsoft.com/library/azure/5e70108d-2e44-45d9-86e8-94f37c68fe86/
[import-data]: https://msdn.microsoft.com/library/azure/4e1b0fe6-aded-4b3f-a36f-39b8862b9004/
[score-model]: https://msdn.microsoft.com/library/azure/401b4f92-e724-4d5a-be81-d5b0ff9bdb33/
[split]: https://msdn.microsoft.com/library/azure/70530644-c97a-4ab6-85f7-88bf30a8be5f/
[train-model]: https://msdn.microsoft.com/library/azure/5cc7053e-aa30-450d-96c0-dae4be720977/
[two-class-logistic-regression]: https://msdn.microsoft.com/library/azure/b0fd7660-eeed-43c5-9487-20d9cc79ed5d/

