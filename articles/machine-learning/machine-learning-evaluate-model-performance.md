---
title: "Оценка эффективности модели в машинном обучении | Документация Майкрософт"
description: "Описание способов оценки эффективности модели в Машинном обучении Microsoft Azure."
services: machine-learning
documentationcenter: 
author: garyericson
manager: jhubbard
editor: cgronlun
ms.assetid: 5dc5348a-4488-4536-99eb-ff105be9b160
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/20/2017
ms.author: bradsev;garye
ms.openlocfilehash: d9576e0059f2e77a684e518389182e713f0a4f09
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-evaluate-model-performance-in-azure-machine-learning"></a><span data-ttu-id="5fc35-103">Оценка эффективности модели в Машинном обучении Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="5fc35-103">How to evaluate model performance in Azure Machine Learning</span></span>
<span data-ttu-id="5fc35-104">В этой статье показано, как оценить эффективность модели в студии машинного обучения Azure. Вы также найдете здесь краткое описание метрик, доступных для выполнения этой задачи.</span><span class="sxs-lookup"><span data-stu-id="5fc35-104">This article demonstrates how to evaluate the performance of a model in Azure Machine Learning Studio and provides a brief explanation of the metrics available for this task.</span></span> <span data-ttu-id="5fc35-105">Доступны три стандартных сценария управляемого обучения:</span><span class="sxs-lookup"><span data-stu-id="5fc35-105">Three common supervised learning scenarios are presented:</span></span> 

* <span data-ttu-id="5fc35-106">регрессия;</span><span class="sxs-lookup"><span data-stu-id="5fc35-106">regression</span></span>
* <span data-ttu-id="5fc35-107">двоичная классификация;</span><span class="sxs-lookup"><span data-stu-id="5fc35-107">binary classification</span></span> 
* <span data-ttu-id="5fc35-108">классификация по нескольким классам.</span><span class="sxs-lookup"><span data-stu-id="5fc35-108">multiclass classification</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

<span data-ttu-id="5fc35-109">Оценка эффективности модели является одним из основных этапов процесса обработки и анализа данных.</span><span class="sxs-lookup"><span data-stu-id="5fc35-109">Evaluating the performance of a model is one of the core stages in the data science process.</span></span> <span data-ttu-id="5fc35-110">Она показывает, насколько успешно обученная модель обрабатывает (прогнозирует) набор данных.</span><span class="sxs-lookup"><span data-stu-id="5fc35-110">It indicates how successful the scoring (predictions) of a dataset has been by a trained model.</span></span> 

<span data-ttu-id="5fc35-111">Оценка модели в Машинном обучении Azure базируется на двух основных модулях машинного обучения: [Evaluate Model][evaluate-model] (Анализ модели) и [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели).</span><span class="sxs-lookup"><span data-stu-id="5fc35-111">Azure Machine Learning supports model evaluation through two of its main machine learning modules: [Evaluate Model][evaluate-model] and [Cross-Validate Model][cross-validate-model].</span></span> <span data-ttu-id="5fc35-112">Эти модули позволяют видеть эффективность модели в пересчете на различные показатели, обычно используемые в машинном обучении и статистике.</span><span class="sxs-lookup"><span data-stu-id="5fc35-112">These modules allow you to see how your model performs in terms of a number of metrics that are commonly used in machine learning and statistics.</span></span>

## <a name="evaluation-vs-cross-validation"></a><span data-ttu-id="5fc35-113">Сравнение оценки и перекрестной проверки</span><span class="sxs-lookup"><span data-stu-id="5fc35-113">Evaluation vs. Cross Validation</span></span>
<span data-ttu-id="5fc35-114">Оценка и перекрестная проверка — это стандартные способы для измерения эффективности модели.</span><span class="sxs-lookup"><span data-stu-id="5fc35-114">Evaluation and cross validation are standard ways to measure the performance of your model.</span></span> <span data-ttu-id="5fc35-115">Оба модуля генерируют показатели оценки, которые вы можете проверить или сравнить с показателями других моделей.</span><span class="sxs-lookup"><span data-stu-id="5fc35-115">They both generate evaluation metrics that you can inspect or compare against those of other models.</span></span>

<span data-ttu-id="5fc35-116">[Evaluate Model][evaluate-model] (Анализ модели) в качестве входных данных принимает подсчитанный набор данных (или два таких набора, если нужно сравнить эффективность двух различных моделей).</span><span class="sxs-lookup"><span data-stu-id="5fc35-116">[Evaluate Model][evaluate-model] expects a scored dataset as input (or 2 in case you would like to compare the performance of 2 different models).</span></span> <span data-ttu-id="5fc35-117">Это означает, что, прежде чем вы сможете оценить результаты, вам понадобится обучить свою модель с помощью модуля [Обучение модели][train-model] и сделать прогнозы насчет набора данных с помощью модуля [Score Model][score-model] (Оценка модели).</span><span class="sxs-lookup"><span data-stu-id="5fc35-117">This means that you need to train your model using the [Train Model][train-model] module and make predictions on some dataset using the [Score Model][score-model] module, before you can evaluate the results.</span></span> <span data-ttu-id="5fc35-118">Оценка основывается на подсчитанных метках или вероятностях и на истинных метках. Все эти значения предоставляет модуль [Score Model][score-model] (Оценка модели).</span><span class="sxs-lookup"><span data-stu-id="5fc35-118">The evaluation is based on the scored labels/probabilities along with the true labels, all of which are output by the [Score Model][score-model] module.</span></span>

<span data-ttu-id="5fc35-119">Кроме того, вы можете использовать перекрестную проверку, чтобы автоматически выполнить ряд операций «обучить-подсчитать-оценить» (10 сборок) для различных подмножеств входных данных.</span><span class="sxs-lookup"><span data-stu-id="5fc35-119">Alternatively, you can use cross validation to perform a number of train-score-evaluate operations (10 folds) automatically on different subsets of the input data.</span></span> <span data-ttu-id="5fc35-120">Входные данные делятся на 10 частей: одна резервируется для тестирования, а остальные 9 — для обучения.</span><span class="sxs-lookup"><span data-stu-id="5fc35-120">The input data is split into 10 parts, where one is reserved for testing, and the other 9 for training.</span></span> <span data-ttu-id="5fc35-121">Этот процесс повторяется 10 раз, затем из показателей оценки выводится средняя величина.</span><span class="sxs-lookup"><span data-stu-id="5fc35-121">This process is repeated 10 times and the evaluation metrics are averaged.</span></span> <span data-ttu-id="5fc35-122">Эта процедура позволяет определить, насколько хорошо модель будет обобщаться на новых наборах данных.</span><span class="sxs-lookup"><span data-stu-id="5fc35-122">This helps in determining how well a model would generalize to new datasets.</span></span> <span data-ttu-id="5fc35-123">Модуль [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели) берет необученную модель и несколько группированных наборов данных, а затем в дополнение к усредненным результатам выводит результаты оценки каждой из 10 сборок.</span><span class="sxs-lookup"><span data-stu-id="5fc35-123">The [Cross-Validate Model][cross-validate-model] module takes in an untrained model and some labeled dataset and outputs the evaluation results of each of the 10 folds, in addition to the averaged results.</span></span>

<span data-ttu-id="5fc35-124">В следующих разделах мы создадим простые модели регрессии и классификации и оценим их эффективность, используя модули [Evaluate Model][evaluate-model] (Анализ модели) и [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели).</span><span class="sxs-lookup"><span data-stu-id="5fc35-124">In the following sections, we will build simple regression and classification models and evaluate their performance, using both the [Evaluate Model][evaluate-model] and the [Cross-Validate Model][cross-validate-model] modules.</span></span>

## <a name="evaluating-a-regression-model"></a><span data-ttu-id="5fc35-125">Оценка модели регрессии</span><span class="sxs-lookup"><span data-stu-id="5fc35-125">Evaluating a Regression Model</span></span>
<span data-ttu-id="5fc35-126">Предположим, мы хотим предсказать цену автомобиля, используя такие параметры, как размеры, мощность, характеристики двигателя и т. д.</span><span class="sxs-lookup"><span data-stu-id="5fc35-126">Assume we want to predict a car’s price using some features such as dimensions, horsepower, engine specs, and so on.</span></span> <span data-ttu-id="5fc35-127">Это типичная задача регрессии, где целевой переменной *price* (Цена) присвоено непрерывное числовое значение.</span><span class="sxs-lookup"><span data-stu-id="5fc35-127">This is a typical regression problem, where the target variable (*price*) is a continuous numeric value.</span></span> <span data-ttu-id="5fc35-128">Мы можем подобрать простую модель линейной регрессии, которая сможет прогнозировать цену автомобиля, учитывая значения параметров этого автомобиля.</span><span class="sxs-lookup"><span data-stu-id="5fc35-128">We can fit a simple linear regression model that, given the feature values of a certain car, can predict the price of that car.</span></span> <span data-ttu-id="5fc35-129">Эту модель регрессии можно использовать для подсчета того же набора данных, который использовался для обучения.</span><span class="sxs-lookup"><span data-stu-id="5fc35-129">This regression model can be used to score the same dataset we trained on.</span></span> <span data-ttu-id="5fc35-130">После того как мы получим прогнозируемые цены на все автомобили, мы сможем оценить эффективность модели. Для этого мы сравним, насколько прогнозы отличаются от фактических цен в среднем.</span><span class="sxs-lookup"><span data-stu-id="5fc35-130">Once we have the predicted prices for all of the cars, we can evaluate the performance of the model by looking at how much the predictions deviate from the actual prices on average.</span></span> <span data-ttu-id="5fc35-131">Чтобы проиллюстрировать этот сценарий, мы воспользуемся *набором необработанных данных о ценах на автомобили*, доступным в разделе **сохраненных наборов данных** студии машинного обучения Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="5fc35-131">To illustrate this, we use the *Automobile price data (Raw) dataset* available in the **Saved Datasets** section in Azure Machine Learning Studio.</span></span>

### <a name="creating-the-experiment"></a><span data-ttu-id="5fc35-132">Создание эксперимента</span><span class="sxs-lookup"><span data-stu-id="5fc35-132">Creating the Experiment</span></span>
<span data-ttu-id="5fc35-133">Добавьте следующие модули в рабочую область Студии машинного обучения Microsoft Azure:</span><span class="sxs-lookup"><span data-stu-id="5fc35-133">Add the following modules to your workspace in Azure Machine Learning Studio:</span></span>

* <span data-ttu-id="5fc35-134">данные о ценах на автомобили (необработанные);</span><span class="sxs-lookup"><span data-stu-id="5fc35-134">Automobile price data (Raw)</span></span>
* <span data-ttu-id="5fc35-135">[Линейная регрессия;][linear-regression]</span><span class="sxs-lookup"><span data-stu-id="5fc35-135">[Linear Regression][linear-regression]</span></span>
* <span data-ttu-id="5fc35-136">[Обучение модели;][train-model]</span><span class="sxs-lookup"><span data-stu-id="5fc35-136">[Train Model][train-model]</span></span>
* <span data-ttu-id="5fc35-137">[Score Model][score-model] (Оценка модели);</span><span class="sxs-lookup"><span data-stu-id="5fc35-137">[Score Model][score-model]</span></span>
* <span data-ttu-id="5fc35-138">[Evaluate Model][evaluate-model] (Анализ модели);</span><span class="sxs-lookup"><span data-stu-id="5fc35-138">[Evaluate Model][evaluate-model]</span></span>

<span data-ttu-id="5fc35-139">Соедините порты, как показано на рисунке 1 ниже, и установите для столбца "Метка" модуля [Обучение модели][train-model] значение *цена*.</span><span class="sxs-lookup"><span data-stu-id="5fc35-139">Connect the ports as shown below in Figure 1 and set the Label column of the [Train Model][train-model] module to *price*.</span></span>

![Оценка модели регрессии](media/machine-learning-evaluate-model-performance/1.png)

<span data-ttu-id="5fc35-141">Рисунок 1.</span><span class="sxs-lookup"><span data-stu-id="5fc35-141">Figure 1.</span></span> <span data-ttu-id="5fc35-142">Оценка модели регрессии.</span><span class="sxs-lookup"><span data-stu-id="5fc35-142">Evaluating a Regression Model.</span></span>

### <a name="inspecting-the-evaluation-results"></a><span data-ttu-id="5fc35-143">Проверка результатов оценки</span><span class="sxs-lookup"><span data-stu-id="5fc35-143">Inspecting the Evaluation Results</span></span>
<span data-ttu-id="5fc35-144">После проведения эксперимента щелкните порт вывода модуля [Evaluate Model][evaluate-model] (Анализ модели) и выберите *Визуализировать*, чтобы отобразить результаты оценки.</span><span class="sxs-lookup"><span data-stu-id="5fc35-144">After running the experiment, you can click on the output port of the [Evaluate Model][evaluate-model] module and select *Visualize* to see the evaluation results.</span></span> <span data-ttu-id="5fc35-145">Для моделей регрессии доступны такие метрики оценки: *Mean Absolute Error* (Средняя абсолютная погрешность), *Root Mean Absolute Error* (Среднеквадратическая абсолютная погрешность), *Relative Absolute Error* (Относительная абсолютная погрешность), *Relative Squared Error* (Относительная среднеквадратическая погрешность) и *Coefficient of Determination* (Коэффициент детерминации).</span><span class="sxs-lookup"><span data-stu-id="5fc35-145">The evaluation metrics available for regression models are: *Mean Absolute Error*, *Root Mean Absolute Error*, *Relative Absolute Error*, *Relative Squared Error*, and the *Coefficient of Determination*.</span></span>

<span data-ttu-id="5fc35-146">Термин «ошибка» здесь означает разницу между прогнозируемым значением и истинным значением.</span><span class="sxs-lookup"><span data-stu-id="5fc35-146">The term "error" here represents the difference between the predicted value and the true value.</span></span> <span data-ttu-id="5fc35-147">Абсолютное значение или квадрат этой разницы обычно вычисляется, чтобы зафиксировать абсолютную величину ошибки во всех экземплярах, так как разница между прогнозируемым и истинным значением иногда может быть отрицательным числом.</span><span class="sxs-lookup"><span data-stu-id="5fc35-147">The absolute value or the square of this difference are usually computed to capture the total magnitude of error across all instances, as the difference between the predicted and true value could be negative in some cases.</span></span> <span data-ttu-id="5fc35-148">Показатели ошибки измеряют прогнозируемую эффективность модели регрессии с точки зрения среднего отклонения ее прогнозов от истинных значений.</span><span class="sxs-lookup"><span data-stu-id="5fc35-148">The error metrics measure the predictive performance of a regression model in terms of the mean deviation of its predictions from the true values.</span></span> <span data-ttu-id="5fc35-149">Чем ниже значения ошибок, тем более точно модель прогнозирует.</span><span class="sxs-lookup"><span data-stu-id="5fc35-149">Lower error values mean the model is more accurate in making predictions.</span></span> <span data-ttu-id="5fc35-150">Общий показатель ошибок 0 означает, что модель идеально подбирает данные.</span><span class="sxs-lookup"><span data-stu-id="5fc35-150">An overall error metric of 0 means that the model fits the data perfectly.</span></span>

<span data-ttu-id="5fc35-151">Для определения способности модели подбирать данные также часто используется коэффициент детерминации, который также известен как R-квадрат.</span><span class="sxs-lookup"><span data-stu-id="5fc35-151">The coefficient of determination, which is also known as R squared, is also a standard way of measuring how well the model fits the data.</span></span> <span data-ttu-id="5fc35-152">Его можно интерпретировать как пропорцию отклонений, которые объясняются моделью.</span><span class="sxs-lookup"><span data-stu-id="5fc35-152">It can be interpreted as the proportion of variation explained by the model.</span></span> <span data-ttu-id="5fc35-153">В этом случае чем выше пропорция, тем лучше. Значение 1 означает идеальное совпадение.</span><span class="sxs-lookup"><span data-stu-id="5fc35-153">A higher proportion is better in this case, where 1 indicates a perfect fit.</span></span>

![Показатели оценки линейной регрессии](media/machine-learning-evaluate-model-performance/2.png)

<span data-ttu-id="5fc35-155">Рис. 2.</span><span class="sxs-lookup"><span data-stu-id="5fc35-155">Figure 2.</span></span> <span data-ttu-id="5fc35-156">Показатели оценки линейной регрессии.</span><span class="sxs-lookup"><span data-stu-id="5fc35-156">Linear Regression Evaluation Metrics.</span></span>

### <a name="using-cross-validation"></a><span data-ttu-id="5fc35-157">Использование перекрестной проверки</span><span class="sxs-lookup"><span data-stu-id="5fc35-157">Using Cross Validation</span></span>
<span data-ttu-id="5fc35-158">Как уже упоминалось ранее, вы можете повторно выполнять обучение, подсчет и оценку автоматически с помощью модуля [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели).</span><span class="sxs-lookup"><span data-stu-id="5fc35-158">As mentioned earlier, you can perform repeated training, scoring and evaluations automatically using the [Cross-Validate Model][cross-validate-model] module.</span></span> <span data-ttu-id="5fc35-159">Для этого вам потребуются набор данных, необученная модель и модуль [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели) (см. рисунок ниже).</span><span class="sxs-lookup"><span data-stu-id="5fc35-159">All you need in this case is a dataset, an untrained model, and a [Cross-Validate Model][cross-validate-model] module (see figure below).</span></span> <span data-ttu-id="5fc35-160">Не забудьте установить значение *цена* для столбца "Метка" в свойствах модуля [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели).</span><span class="sxs-lookup"><span data-stu-id="5fc35-160">Note that you need to set the label column to *price* in the [Cross-Validate Model][cross-validate-model] module’s properties.</span></span>

![Перекрестная проверка модели регрессии](media/machine-learning-evaluate-model-performance/3.png)

<span data-ttu-id="5fc35-162">Рис. 3.</span><span class="sxs-lookup"><span data-stu-id="5fc35-162">Figure 3.</span></span> <span data-ttu-id="5fc35-163">Перекрестная проверка модели регрессии.</span><span class="sxs-lookup"><span data-stu-id="5fc35-163">Cross-Validating a Regression Model.</span></span>

<span data-ttu-id="5fc35-164">После проведения эксперимента вы можете проверить результаты оценки. Для этого щелкните правый порт вывода модуля [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели).</span><span class="sxs-lookup"><span data-stu-id="5fc35-164">After running the experiment, you can inspect the evaluation results by clicking on the right output port of the [Cross-Validate Model][cross-validate-model] module.</span></span> <span data-ttu-id="5fc35-165">Вы увидите подробное представление показателей для каждой итерации (сборки) и усредненные результаты каждого из показателей (рис. 4).</span><span class="sxs-lookup"><span data-stu-id="5fc35-165">This will provide a detailed view of the metrics for each iteration (fold), and the averaged results of each of the metrics (Figure 4).</span></span>

![Результаты перекрестной проверки модели регрессии](media/machine-learning-evaluate-model-performance/4.png)

<span data-ttu-id="5fc35-167">Рис.</span><span class="sxs-lookup"><span data-stu-id="5fc35-167">Figure 4.</span></span> <span data-ttu-id="5fc35-168">4 Результаты перекрестной проверки модели регрессии.</span><span class="sxs-lookup"><span data-stu-id="5fc35-168">Cross-Validation Results of a Regression Model.</span></span>

## <a name="evaluating-a-binary-classification-model"></a><span data-ttu-id="5fc35-169">Оценка модели двоичной классификации</span><span class="sxs-lookup"><span data-stu-id="5fc35-169">Evaluating a Binary Classification Model</span></span>
<span data-ttu-id="5fc35-170">При использовании двоичной классификации целевая переменная имеет только два возможных результата (например, {0, 1} или {ложь, истина}, {отрицательный, положительный}).</span><span class="sxs-lookup"><span data-stu-id="5fc35-170">In a binary classification scenario, the target variable has only two possible outcomes, for example: {0, 1} or {false, true}, {negative, positive}.</span></span> <span data-ttu-id="5fc35-171">Предположим, вы получили набор данных взрослых специалистов с некоторыми демографическими переменными и переменными их занятости. Вас просят предсказать уровень их доходов. Результат нужно выразить в виде бинарной переменной со значениями {“<=50 000”, “>50 000”}.</span><span class="sxs-lookup"><span data-stu-id="5fc35-171">Assume you are given a dataset of adult employees with some demographic and employment variables, and that you are asked to predict the income level, a binary variable with the values {“<=50K”, “>50K”}.</span></span> <span data-ttu-id="5fc35-172">Иными словами, отрицательный класс представляет специалистов, которые зарабатывают меньше 50 000 $ в год, а положительный класс представляет всех остальных специалистов.</span><span class="sxs-lookup"><span data-stu-id="5fc35-172">In other words, the negative class represents the employees who make less than or equal to 50K per year, and the positive class represents all other employees.</span></span> <span data-ttu-id="5fc35-173">Как и в сценарии с регрессией, мы должны обучить модель, посчитать некоторые данные и оценивать результаты.</span><span class="sxs-lookup"><span data-stu-id="5fc35-173">As in the regression scenario, we would train a model, score some data, and evaluate the results.</span></span> <span data-ttu-id="5fc35-174">Основным различием этого сценария будет показателей, которые вычисляет и выводит Машинное обучение Azure.</span><span class="sxs-lookup"><span data-stu-id="5fc35-174">The main difference here is the choice of metrics Azure Machine Learning computes and outputs.</span></span> <span data-ttu-id="5fc35-175">Чтобы проиллюстрировать сценарий прогнозирования уровня доходов мы воспользуемся [набором данных о взрослых](http://archive.ics.uci.edu/ml/datasets/Adult), чтобы создать эксперимент машинного обучения Azure и оценить эффективность двухклассовой регрессионной логистической модели (популярный двоичный классификатор).</span><span class="sxs-lookup"><span data-stu-id="5fc35-175">To illustrate the income level prediction scenario, we will use the [Adult](http://archive.ics.uci.edu/ml/datasets/Adult) dataset to create an Azure Machine Learning experiment and evaluate the performance of a two-class logistic regression model, a commonly used binary classifier.</span></span>

### <a name="creating-the-experiment"></a><span data-ttu-id="5fc35-176">Создание эксперимента</span><span class="sxs-lookup"><span data-stu-id="5fc35-176">Creating the Experiment</span></span>
<span data-ttu-id="5fc35-177">Добавьте следующие модули в рабочую область Студии машинного обучения Microsoft Azure:</span><span class="sxs-lookup"><span data-stu-id="5fc35-177">Add the following modules to your workspace in Azure Machine Learning Studio:</span></span>

* <span data-ttu-id="5fc35-178">набор данных Adult Census Income Binary Classification;</span><span class="sxs-lookup"><span data-stu-id="5fc35-178">Adult Census Income Binary Classification dataset</span></span>
* <span data-ttu-id="5fc35-179">[двухклассная регрессионная логистическая модель;][two-class-logistic-regression]</span><span class="sxs-lookup"><span data-stu-id="5fc35-179">[Two-Class Logistic Regression][two-class-logistic-regression]</span></span>
* <span data-ttu-id="5fc35-180">[Обучение модели;][train-model]</span><span class="sxs-lookup"><span data-stu-id="5fc35-180">[Train Model][train-model]</span></span>
* <span data-ttu-id="5fc35-181">[Score Model][score-model] (Оценка модели);</span><span class="sxs-lookup"><span data-stu-id="5fc35-181">[Score Model][score-model]</span></span>
* <span data-ttu-id="5fc35-182">[Evaluate Model][evaluate-model] (Анализ модели);</span><span class="sxs-lookup"><span data-stu-id="5fc35-182">[Evaluate Model][evaluate-model]</span></span>

<span data-ttu-id="5fc35-183">Соедините порты, как показано на рисунке 5 ниже, и установите для столбца "Метка" модуля [Обучение модели][train-model] значение *доход*.</span><span class="sxs-lookup"><span data-stu-id="5fc35-183">Connect the ports as shown below in Figure 5 and set the Label column of the [Train Model][train-model] module to *income*.</span></span>

![Оценка модели двоичной классификации](media/machine-learning-evaluate-model-performance/5.png)

<span data-ttu-id="5fc35-185">Рис. 5.</span><span class="sxs-lookup"><span data-stu-id="5fc35-185">Figure 5.</span></span> <span data-ttu-id="5fc35-186">Оценка модели двоичной классификации.</span><span class="sxs-lookup"><span data-stu-id="5fc35-186">Evaluating a Binary Classification Model.</span></span>

### <a name="inspecting-the-evaluation-results"></a><span data-ttu-id="5fc35-187">Проверка результатов оценки</span><span class="sxs-lookup"><span data-stu-id="5fc35-187">Inspecting the Evaluation Results</span></span>
<span data-ttu-id="5fc35-188">После проведения эксперимента щелкните порт вывода модуля [Evaluate Model][evaluate-model] (Анализ модели) и выберите *Визуализировать*, чтобы увидеть результаты оценки (рис. 7).</span><span class="sxs-lookup"><span data-stu-id="5fc35-188">After running the experiment, you can click on the output port of the [Evaluate Model][evaluate-model] module and select *Visualize* to see the evaluation results (Figure 7).</span></span> <span data-ttu-id="5fc35-189">Для моделей двоичной классификации доступны такие метрики оценки: *Accuracy* (Правильность), *Precision* (Точность), *Recall* (Полнота), *F1 Score* (Оценка F1) и *AUC*.</span><span class="sxs-lookup"><span data-stu-id="5fc35-189">The evaluation metrics available for binary classification models are: *Accuracy*, *Precision*, *Recall*, *F1 Score*, and *AUC*.</span></span> <span data-ttu-id="5fc35-190">Кроме того, модуль выводит матрицы неточностей, которые отображают число истинно положительных, ложноотрицательных, ложноположительных и истинно отрицательных результатов, а также кривые *ROC*, *Precision/Recall* (Точность и полнота) и *Lift* (Точность прогноза).</span><span class="sxs-lookup"><span data-stu-id="5fc35-190">In addition, the module outputs a confusion matrix showing the number of true positives, false negatives, false positives, and true negatives, as well as *ROC*, *Precision/Recall*, and *Lift* curves.</span></span>

<span data-ttu-id="5fc35-191">Правильность выражается пропорцией правильно классифицированных экземпляров.</span><span class="sxs-lookup"><span data-stu-id="5fc35-191">Accuracy is simply the proportion of correctly classified instances.</span></span> <span data-ttu-id="5fc35-192">Это, как правило, первый показатель, который вы видите во время оценки классификатора.</span><span class="sxs-lookup"><span data-stu-id="5fc35-192">It is usually the first metric you look at when evaluating a classifier.</span></span> <span data-ttu-id="5fc35-193">Но если тестовые данные не сбалансированы (большинство экземпляров относятся к одному из классов) или вас больше интересует эффективность на одном из классов, правильность не будет отражать фактическую эффективность классификатора.</span><span class="sxs-lookup"><span data-stu-id="5fc35-193">However, when the test data is unbalanced (where most of the instances belong to one of the classes), or you are more interested in the performance on either one of the classes, accuracy doesn’t really capture the effectiveness of a classifier.</span></span> <span data-ttu-id="5fc35-194">Предположим, вы тестируете в сценарии классификации уровня дохода, данные, в которых 99 % экземпляров представляют людей, которые зарабатывают меньше или ровно 50 000 $ в год.</span><span class="sxs-lookup"><span data-stu-id="5fc35-194">In the income level classification scenario, assume you are testing on some data where 99% of the instances represent people who earn less than or equal to 50K per year.</span></span> <span data-ttu-id="5fc35-195">Можно достичь уровня точности 0,99 путем прогнозирования класса «<=50K» для всех экземпляров.</span><span class="sxs-lookup"><span data-stu-id="5fc35-195">It is possible to achieve a 0.99 accuracy by predicting the class “<=50K” for all instances.</span></span> <span data-ttu-id="5fc35-196">Кажется, что классификатор в целом хорошо справляется с заданием, но в действительности он не смог правильно классифицировать ни одно из лиц с высоким уровнем дохода (1 %).</span><span class="sxs-lookup"><span data-stu-id="5fc35-196">The classifier in this case appears to be doing a good job overall, but in reality, it fails to classify any of the high-income individuals (the 1%) correctly.</span></span>

<span data-ttu-id="5fc35-197">Поэтому будет целесообразно вычислить дополнительные показатели, которые фиксируют более конкретные аспекты оценки.</span><span class="sxs-lookup"><span data-stu-id="5fc35-197">For that reason, it is helpful to compute additional metrics that capture more specific aspects of the evaluation.</span></span> <span data-ttu-id="5fc35-198">Прежде чем углубляться в подробности таких показателей, важно понять матрицу неточностей оценки двоичной классификации.</span><span class="sxs-lookup"><span data-stu-id="5fc35-198">Before going into the details of such metrics, it is important to understand the confusion matrix of a binary classification evaluation.</span></span> <span data-ttu-id="5fc35-199">Класс меток в обучающем множестве может принимать только 2 возможных значения, которые обычно называются положительным или отрицательным.</span><span class="sxs-lookup"><span data-stu-id="5fc35-199">The class labels in the training set can take on only 2 possible values, which we usually refer to as positive or negative.</span></span> <span data-ttu-id="5fc35-200">Положительные и отрицательные экземпляры, которые классификатор прогнозирует правильно, называются истинно положительными (ИП) и истинно отрицательными (ИО) результатами соответственно.</span><span class="sxs-lookup"><span data-stu-id="5fc35-200">The positive and negative instances that a classifier predicts correctly are called true positives (TP) and true negatives (TN), respectively.</span></span> <span data-ttu-id="5fc35-201">Точно так же неправильно классифицированные экземпляры называются ложно положительными (ЛП) и ложно отрицательными результатами (ЛО).</span><span class="sxs-lookup"><span data-stu-id="5fc35-201">Similarly, the incorrectly classified instances are called false positives (FP) and false negatives (FN).</span></span> <span data-ttu-id="5fc35-202">Матрица неточностей — это таблица, которая показывает количество случаев, которые подпадают под каждую из этих четырех категорий.</span><span class="sxs-lookup"><span data-stu-id="5fc35-202">The confusion matrix is simply a table showing the number of instances that fall under each of these 4 categories.</span></span> <span data-ttu-id="5fc35-203">Машинное обучение Azure автоматически определяет, какой из двух классов в наборе данных является положительным классом.</span><span class="sxs-lookup"><span data-stu-id="5fc35-203">Azure Machine Learning automatically decides which of the two classes in the dataset is the positive class.</span></span> <span data-ttu-id="5fc35-204">Если метки класса являются логическими операторами или целыми числами, то экземпляры с метками «истина» или «1» присваиваются положительному классу.</span><span class="sxs-lookup"><span data-stu-id="5fc35-204">If the class labels are Boolean or integers, then the ‘true’ or ‘1’ labeled instances are assigned the positive class.</span></span> <span data-ttu-id="5fc35-205">Если метки являются строками, как в случае с набором данных о доходах, метки сортируются в алфавитном порядке. Первый уровень присваивается отрицательному классу, а второй уровень — положительному классу.</span><span class="sxs-lookup"><span data-stu-id="5fc35-205">If the labels are strings, as in the case of the income dataset, the labels are sorted alphabetically and the first level is chosen to be the negative class while the second level is the positive class.</span></span>

![Матрица неточностей двоичной классификации](media/machine-learning-evaluate-model-performance/6a.png)

<span data-ttu-id="5fc35-207">Рис. 6.</span><span class="sxs-lookup"><span data-stu-id="5fc35-207">Figure 6.</span></span> <span data-ttu-id="5fc35-208">Матрица неточностей двоичной классификации.</span><span class="sxs-lookup"><span data-stu-id="5fc35-208">Binary Classification Confusion Matrix.</span></span>

<span data-ttu-id="5fc35-209">Возвращаясь к проблеме классификации доходов, нужно задать несколько оценочных вопросов, которые помогут определить эффективность используемого классификатора.</span><span class="sxs-lookup"><span data-stu-id="5fc35-209">Going back to the income classification problem, we would want to ask several evaluation questions that help us understand the performance of the classifier used.</span></span> <span data-ttu-id="5fc35-210">Вполне естественный вопрос: «Сколько лиц, которые по прогнозам модели зарабатывают > 50 000 (ИП + ЛП), классифицированы правильно (ИП)?»</span><span class="sxs-lookup"><span data-stu-id="5fc35-210">A very natural question is: ‘Out of the individuals whom the model predicted to be earning >50K (TP+FP), how many were classified correctly (TP)?’</span></span> <span data-ttu-id="5fc35-211">На этот вопрос можно ответить, взглянув на показатель **точности** модели, который представляет долю правильно классифицированных положительных результатов: ИП / (ИП + ЛП).</span><span class="sxs-lookup"><span data-stu-id="5fc35-211">This question can be answered by looking at the **Precision** of the model, which is the proportion of positives that are classified correctly: TP/(TP+FP).</span></span> <span data-ttu-id="5fc35-212">Другой распространенный вопрос: «Из всех высокооплачиваемых специалистов с доходом > 50 000 $ (ИП + ЛП) скольких классификатор классифицировал правильно (ИП)?»</span><span class="sxs-lookup"><span data-stu-id="5fc35-212">Another common question is “Out of all the high earning employees with income >50k (TP+FN), how many did the classifier classify correctly (TP)”.</span></span> <span data-ttu-id="5fc35-213">Это значение представлено показателем **полноты** или процента истинно положительных результатов классификатора: ИП / (ИП + ЛП).</span><span class="sxs-lookup"><span data-stu-id="5fc35-213">This is actually the **Recall**, or the true positive rate: TP/(TP+FN) of the classifier.</span></span> <span data-ttu-id="5fc35-214">Вы могли заметить, что существует очевидный компромисс между точностью и полнотой.</span><span class="sxs-lookup"><span data-stu-id="5fc35-214">You might notice that there is an obvious trade-off between precision and recall.</span></span> <span data-ttu-id="5fc35-215">Например, обрабатывая относительно сбалансированный набор данных, классификатор, который прогнозирует в основном положительные экземпляры, будет иметь высокий уровень полноты, но довольно низкий уровень точности, так как многие отрицательные экземпляры будут неправильно классифицированы из-за большого количества ложно позитивных результатов.</span><span class="sxs-lookup"><span data-stu-id="5fc35-215">For example, given a relatively balanced dataset, a classifier that predicts mostly positive instances, would have a high recall, but a rather low precision as many of the negative instances would be misclassified resulting in a large number of false positives.</span></span> <span data-ttu-id="5fc35-216">Чтобы увидеть график изменения этих двух показателей, щелкните кривую «ТОЧНОСТЬ/ПОЛНОТА» на странице вывода результатов оценки (верхняя левая часть рисунка 7).</span><span class="sxs-lookup"><span data-stu-id="5fc35-216">To see a plot of how these two metrics vary, you can click on the ‘PRECISION/RECALL’ curve in the evaluation result output page (top left part of Figure 7).</span></span>

![Результаты оценки двоичной классификации](media/machine-learning-evaluate-model-performance/7.png)

<span data-ttu-id="5fc35-218">Рис. 7.</span><span class="sxs-lookup"><span data-stu-id="5fc35-218">Figure 7.</span></span> <span data-ttu-id="5fc35-219">Результаты оценки двоичной классификации.</span><span class="sxs-lookup"><span data-stu-id="5fc35-219">Binary Classification Evaluation Results.</span></span>

<span data-ttu-id="5fc35-220">Не менее часто используется показатель **оценки F1**, который учитывает и точность, и полноту.</span><span class="sxs-lookup"><span data-stu-id="5fc35-220">Another related metric that is often used is the **F1 Score**, which takes both precision and recall into consideration.</span></span> <span data-ttu-id="5fc35-221">Это среднее гармоническое этих 2 показателей, которое вычисляется так: F1 = 2 (точность x полнота) / (точность + полнота).</span><span class="sxs-lookup"><span data-stu-id="5fc35-221">It is the harmonic mean of these 2 metrics and is computed as such: F1 = 2 (precision x recall) / (precision + recall).</span></span> <span data-ttu-id="5fc35-222">Показатель F1 — это удобный способ обобщения оценки в одно число. Но все-таки рекомендуется смотреть на точность и полноту вместе, чтобы лучше понять поведение классификатора.</span><span class="sxs-lookup"><span data-stu-id="5fc35-222">The F1 score is a good way to summarize the evaluation in a single number, but it’s always a good practice to look at both precision and recall together to better understand how a classifier behaves.</span></span>

<span data-ttu-id="5fc35-223">Кроме того, вы можете сравнить доли истинно положительных результатов и ложноположительных результатов, представленных кривой **рабочей характеристики приемника (ROC)** и соответствующим значением **площади под ROC-кривой (AUC)**.</span><span class="sxs-lookup"><span data-stu-id="5fc35-223">In addition, one can inspect the true positive rate vs. the false positive rate in the **Receiver Operating Characteristic (ROC)** curve and the corresponding **Area Under the Curve (AUC)** value.</span></span> <span data-ttu-id="5fc35-224">Чем ближе эта кривая к верхнему левому углу, тем выше эффективность классификатора. То есть речь идет о максимальном проценте истинно положительных результатов и минимальном проценте ложно положительных результатов.</span><span class="sxs-lookup"><span data-stu-id="5fc35-224">The closer this curve is to the upper left corner, the better the classifier’s performance is (that is maximizing the true positive rate while minimizing the false positive rate).</span></span> <span data-ttu-id="5fc35-225">Кривые, близкие к диагонали графика, получаются из классификаторов, которые, как правило, делают прогнозы, близкие к случайному угадыванию.</span><span class="sxs-lookup"><span data-stu-id="5fc35-225">Curves that are close to the diagonal of the plot, result from classifiers that tend to make predictions that are close to random guessing.</span></span>

### <a name="using-cross-validation"></a><span data-ttu-id="5fc35-226">Использование перекрестной проверки</span><span class="sxs-lookup"><span data-stu-id="5fc35-226">Using Cross Validation</span></span>
<span data-ttu-id="5fc35-227">Как и в примере регрессии, мы можем выполнить перекрестную проверку, чтобы многократно обучить, посчитать и оценить разные подмножества данных автоматически.</span><span class="sxs-lookup"><span data-stu-id="5fc35-227">As in the regression example, we can perform cross validation to repeatedly train, score and evaluate different subsets of the data automatically.</span></span> <span data-ttu-id="5fc35-228">Подобным образом мы можем использовать модуль [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели), необученную регрессионную логистическую модель и набор данных.</span><span class="sxs-lookup"><span data-stu-id="5fc35-228">Similarly, we can use the [Cross-Validate Model][cross-validate-model] module, an untrained logistic regression model, and a dataset.</span></span> <span data-ttu-id="5fc35-229">В свойствах модуля *Cross-Validate Model* (Перекрестная проверка модели) в столбце "Метка" должно быть установлено значение [доход][cross-validate-model].</span><span class="sxs-lookup"><span data-stu-id="5fc35-229">The label column must be set to *income* in the [Cross-Validate Model][cross-validate-model] module’s properties.</span></span> <span data-ttu-id="5fc35-230">Если по завершении эксперимента щелкнуть правый порт вывода в модуле [Cross-Validate Model][cross-validate-model] (Модель перекрестной проверки), отобразятся значения метрик двоичной классификации для каждой свертки, а также среднее значение и стандартное отклонение каждого из них.</span><span class="sxs-lookup"><span data-stu-id="5fc35-230">After running the experiment and clicking on the right output port of the [Cross-Validate Model][cross-validate-model] module, we can see the binary classification metric values for each fold, in addition to the mean and standard deviation of each.</span></span> 

![Перекрестная проверка модели двоичной классификации](media/machine-learning-evaluate-model-performance/8.png)

<span data-ttu-id="5fc35-232">Рис. 8.</span><span class="sxs-lookup"><span data-stu-id="5fc35-232">Figure 8.</span></span> <span data-ttu-id="5fc35-233">Перекрестная проверка модели двоичной классификации.</span><span class="sxs-lookup"><span data-stu-id="5fc35-233">Cross-Validating a Binary Classification Model.</span></span>

![Результаты перекрестной проверки модели двоичной классификации](media/machine-learning-evaluate-model-performance/9.png)

<span data-ttu-id="5fc35-235">Рис. 9.</span><span class="sxs-lookup"><span data-stu-id="5fc35-235">Figure 9.</span></span> <span data-ttu-id="5fc35-236">Результаты перекрестной проверки модели двоичной классификации.</span><span class="sxs-lookup"><span data-stu-id="5fc35-236">Cross-Validation Results of a Binary Classifier.</span></span>

## <a name="evaluating-a-multiclass-classification-model"></a><span data-ttu-id="5fc35-237">Оценка модели классификации по нескольким классам</span><span class="sxs-lookup"><span data-stu-id="5fc35-237">Evaluating a Multiclass Classification Model</span></span>
<span data-ttu-id="5fc35-238">В этом эксперименте мы воспользуемся популярным набором данных [Iris](http://archive.ics.uci.edu/ml/datasets/Iris "Iris"), который содержит экземпляры трех разных типов (классов) растения ирис.</span><span class="sxs-lookup"><span data-stu-id="5fc35-238">In this experiment we will use the popular [Iris](http://archive.ics.uci.edu/ml/datasets/Iris "Iris") dataset which contains instances of 3 different types (classes) of the iris plant.</span></span> <span data-ttu-id="5fc35-239">Для каждого экземпляра существует 4 значения признаков: длина и ширина чашелистика и длина и ширина лепестка.</span><span class="sxs-lookup"><span data-stu-id="5fc35-239">There are 4 feature values (sepal length/width and petal length/width) for each instance.</span></span> <span data-ttu-id="5fc35-240">В предыдущих экспериментах мы обучали и тестировали модели, используя те же наборы данных.</span><span class="sxs-lookup"><span data-stu-id="5fc35-240">In the previous experiments we trained and tested the models using the same datasets.</span></span> <span data-ttu-id="5fc35-241">Здесь мы будем использовать модуль [разделения данных][split], чтобы создать два подмножества данных: одно для обучения и второе для оценки и анализа.</span><span class="sxs-lookup"><span data-stu-id="5fc35-241">Here, we will use the [Split Data][split] module to create 2 subsets of the data, train on the first, and score and evaluate on the second.</span></span> <span data-ttu-id="5fc35-242">Набор данных Iris находится в открытом доступе в [репозитории машинного обучения UCI](http://archive.ics.uci.edu/ml/index.html). Его можно скачать с помощью модуля [импорта данных][import-data].</span><span class="sxs-lookup"><span data-stu-id="5fc35-242">The Iris dataset is publicly available on the [UCI Machine Learning Repository](http://archive.ics.uci.edu/ml/index.html), and can be downloaded using an [Import Data][import-data] module.</span></span>

### <a name="creating-the-experiment"></a><span data-ttu-id="5fc35-243">Создание эксперимента</span><span class="sxs-lookup"><span data-stu-id="5fc35-243">Creating the Experiment</span></span>
<span data-ttu-id="5fc35-244">Добавьте следующие модули в рабочую область Студии машинного обучения Microsoft Azure:</span><span class="sxs-lookup"><span data-stu-id="5fc35-244">Add the following modules to your workspace in Azure Machine Learning Studio:</span></span>

* <span data-ttu-id="5fc35-245">[Импорт данных][import-data]</span><span class="sxs-lookup"><span data-stu-id="5fc35-245">[Import Data][import-data]</span></span>
* <span data-ttu-id="5fc35-246">[Multiclass Decision Forest][multiclass-decision-forest] (Лес решений с несколькими классами);</span><span class="sxs-lookup"><span data-stu-id="5fc35-246">[Multiclass Decision Forest][multiclass-decision-forest]</span></span>
* <span data-ttu-id="5fc35-247">[Split Data][split] (Разделение данных);</span><span class="sxs-lookup"><span data-stu-id="5fc35-247">[Split Data][split]</span></span>
* <span data-ttu-id="5fc35-248">[Обучение модели;][train-model]</span><span class="sxs-lookup"><span data-stu-id="5fc35-248">[Train Model][train-model]</span></span>
* <span data-ttu-id="5fc35-249">[Score Model][score-model] (Оценка модели);</span><span class="sxs-lookup"><span data-stu-id="5fc35-249">[Score Model][score-model]</span></span>
* <span data-ttu-id="5fc35-250">[Evaluate Model][evaluate-model] (Анализ модели);</span><span class="sxs-lookup"><span data-stu-id="5fc35-250">[Evaluate Model][evaluate-model]</span></span>

<span data-ttu-id="5fc35-251">Соедините порты, как показано на рисунке 10.</span><span class="sxs-lookup"><span data-stu-id="5fc35-251">Connect the ports as shown below in Figure 10.</span></span>

<span data-ttu-id="5fc35-252">Установите значение 5 для индекса столбца "Метка" в модуле [Обучение модели][train-model].</span><span class="sxs-lookup"><span data-stu-id="5fc35-252">Set the Label column index of the [Train Model][train-model] module to 5.</span></span> <span data-ttu-id="5fc35-253">У этого набора данных нет строки заголовка, но мы знаем, что этикетки находятся в пятом столбце.</span><span class="sxs-lookup"><span data-stu-id="5fc35-253">The dataset has no header row but we know that the class labels are in the fifth column.</span></span>

<span data-ttu-id="5fc35-254">Щелкните модуль [импорта данных][import-data] и присвойте свойству *Источник данных* значение *Web URL via HTTP* (URL-адрес веб-узла через HTTP), а свойству *URL* (URL-адрес) — http://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data.</span><span class="sxs-lookup"><span data-stu-id="5fc35-254">Click on the [Import Data][import-data] module and set the *Data source* property to *Web URL via HTTP*, and the *URL* to http://archive.ics.uci.edu/ml/machine-learning-databases/iris/iris.data.</span></span>

<span data-ttu-id="5fc35-255">Укажите дробное число экземпляров, которые будут использоваться для обучения модуля [разделения данных][split] (например, 0,7).</span><span class="sxs-lookup"><span data-stu-id="5fc35-255">Set the fraction of instances to be used for training in the [Split Data][split] module (0.7 for example).</span></span>

![Оценка классификатора с несколькими классами](media/machine-learning-evaluate-model-performance/10.png)

<span data-ttu-id="5fc35-257">Рис.</span><span class="sxs-lookup"><span data-stu-id="5fc35-257">Figure 10.</span></span> <span data-ttu-id="5fc35-258">Оценка классификатора с несколькими классами</span><span class="sxs-lookup"><span data-stu-id="5fc35-258">Evaluating a Multiclass Classifier</span></span>

### <a name="inspecting-the-evaluation-results"></a><span data-ttu-id="5fc35-259">Проверка результатов оценки</span><span class="sxs-lookup"><span data-stu-id="5fc35-259">Inspecting the Evaluation Results</span></span>
<span data-ttu-id="5fc35-260">Запустите эксперимент и щелкните порт вывода в модуле [Evaluate Model][evaluate-model] (Анализ модели).</span><span class="sxs-lookup"><span data-stu-id="5fc35-260">Run the experiment and click on the output port of [Evaluate Model][evaluate-model].</span></span> <span data-ttu-id="5fc35-261">В этом случае результаты оценки представлены в виде матрицы неточностей.</span><span class="sxs-lookup"><span data-stu-id="5fc35-261">The evaluation results are presented in the form of a confusion matrix, in this case.</span></span> <span data-ttu-id="5fc35-262">Матрица показывает фактические экземпляры по сравнению с прогнозируемыми для всех 3 классов.</span><span class="sxs-lookup"><span data-stu-id="5fc35-262">The matrix shows the actual vs. predicted instances for all 3 classes.</span></span>

![Результаты оценки классификации по нескольким классам](media/machine-learning-evaluate-model-performance/11.png)

<span data-ttu-id="5fc35-264">Рис. 11.</span><span class="sxs-lookup"><span data-stu-id="5fc35-264">Figure 11.</span></span> <span data-ttu-id="5fc35-265">Результаты оценки классификации по нескольким классам.</span><span class="sxs-lookup"><span data-stu-id="5fc35-265">Multiclass Classification Evaluation Results.</span></span>

### <a name="using-cross-validation"></a><span data-ttu-id="5fc35-266">Использование перекрестной проверки</span><span class="sxs-lookup"><span data-stu-id="5fc35-266">Using Cross Validation</span></span>
<span data-ttu-id="5fc35-267">Как уже упоминалось ранее, вы можете повторно выполнять обучение, подсчет и оценку автоматически с помощью модуля [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели).</span><span class="sxs-lookup"><span data-stu-id="5fc35-267">As mentioned earlier, you can perform repeated training, scoring and evaluations automatically using the [Cross-Validate Model][cross-validate-model] module.</span></span> <span data-ttu-id="5fc35-268">Вам потребуется набор данных, необученная модель и модуль [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели) (см. рисунок ниже).</span><span class="sxs-lookup"><span data-stu-id="5fc35-268">You would need a dataset, an untrained model, and a [Cross-Validate Model][cross-validate-model] module (see figure below).</span></span> <span data-ttu-id="5fc35-269">Снова нужно установить значение для столбца "Метка" в модуле [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели) (в данном случае индекс столбца — 5).</span><span class="sxs-lookup"><span data-stu-id="5fc35-269">Again you need to set the label column of the [Cross-Validate Model][cross-validate-model] module (column index 5 in this case).</span></span> <span data-ttu-id="5fc35-270">Если по завершении эксперимента щелкнуть правый порт вывода в модуле [Cross-Validate Model][cross-validate-model] (Перекрестная проверка модели), вы увидите значения показателей для каждой свертки, а также среднее значение и стандартное отклонение.</span><span class="sxs-lookup"><span data-stu-id="5fc35-270">After running the experiment and clicking the right output port of the [Cross-Validate Model][cross-validate-model], you can inspect the metric values for each fold as well as the mean and standard deviation.</span></span> <span data-ttu-id="5fc35-271">Отображаемые здесь показатели похожи на показатели, о которых шла речь в разделе, посвященном двоичной классификации.</span><span class="sxs-lookup"><span data-stu-id="5fc35-271">The metrics displayed here are the similar to the ones discussed in the binary classification case.</span></span> <span data-ttu-id="5fc35-272">Но обратите внимание, что в классификации по нескольким классам истинно положительные/отрицательные результаты и ложно положительные/отрицательные результаты вычисляются путем подсчета на основе каждого класса, так как не существует общего положительного или отрицательного класса.</span><span class="sxs-lookup"><span data-stu-id="5fc35-272">However, note that in multiclass classification, computing the true positives/negatives and false positives/negatives is done by counting on a per-class basis, as there is no overall positive or negative class.</span></span> <span data-ttu-id="5fc35-273">Например, при расчете точности или полноты класса «Ирис щетинистый» предполагается, что это положительный класс, а все остальные являются отрицательными.</span><span class="sxs-lookup"><span data-stu-id="5fc35-273">For example, when computing the precision or recall of the ‘Iris-setosa’ class, it is assumed that this is the positive class and all others as negative.</span></span>

![Перекрестная проверка модели классификации по нескольким классам](media/machine-learning-evaluate-model-performance/12.png)

<span data-ttu-id="5fc35-275">Рис. 12.</span><span class="sxs-lookup"><span data-stu-id="5fc35-275">Figure 12.</span></span> <span data-ttu-id="5fc35-276">Перекрестная проверка модели классификации по нескольким классам.</span><span class="sxs-lookup"><span data-stu-id="5fc35-276">Cross-Validating a Multiclass Classification Model.</span></span>

![Результаты перекрестной проверки модели классификации по нескольким классам](media/machine-learning-evaluate-model-performance/13.png)

<span data-ttu-id="5fc35-278">Рис. 13.</span><span class="sxs-lookup"><span data-stu-id="5fc35-278">Figure 13.</span></span> <span data-ttu-id="5fc35-279">Результаты перекрестной проверки модели классификации по нескольким классам.</span><span class="sxs-lookup"><span data-stu-id="5fc35-279">Cross-Validation Results of a Multiclass Classification Model.</span></span>

<!-- Module References -->
[cross-validate-model]: https://msdn.microsoft.com/library/azure/75fb875d-6b86-4d46-8bcc-74261ade5826/
[evaluate-model]: https://msdn.microsoft.com/library/azure/927d65ac-3b50-4694-9903-20f6c1672089/
[linear-regression]: https://msdn.microsoft.com/library/azure/31960a6f-789b-4cf7-88d6-2e1152c0bd1a/
[multiclass-decision-forest]: https://msdn.microsoft.com/library/azure/5e70108d-2e44-45d9-86e8-94f37c68fe86/
[import-data]: https://msdn.microsoft.com/library/azure/4e1b0fe6-aded-4b3f-a36f-39b8862b9004/
[score-model]: https://msdn.microsoft.com/library/azure/401b4f92-e724-4d5a-be81-d5b0ff9bdb33/
[split]: https://msdn.microsoft.com/library/azure/70530644-c97a-4ab6-85f7-88bf30a8be5f/
[train-model]: https://msdn.microsoft.com/library/azure/5cc7053e-aa30-450d-96c0-dae4be720977/
[two-class-logistic-regression]: https://msdn.microsoft.com/library/azure/b0fd7660-eeed-43c5-9487-20d9cc79ed5d/

