---
title: "aaaUse в локальной среде SQL Server в машинном обучении Azure | Документы Microsoft"
description: "Используйте данные из анализа tooperform advanced локальной базы данных SQL Server с помощью машинного обучения Azure."
services: machine-learning
documentationcenter: 
author: garyericson
manager: jhubbard
editor: cgronlun
ms.assetid: 08e4610d-02b6-4071-aad7-a2340ad8e2ea
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/13/2017
ms.author: garye;krishnan
ms.openlocfilehash: c0e9908e296b97b31611ef0192744a59073acd80
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="perform-advanced-analytics-with-azure-machine-learning-using-data-from-an-on-premises-sql-server-database"></a>Выполнение расширенной аналитики с помощью Машинного обучения Azure на основе данных из локальной базы данных SQL Server

[!INCLUDE [import-data-into-aml-studio-selector](../../includes/machine-learning-import-data-into-aml-studio.md)]

Часто предприятий, которые работают с локальными данными хотел tootake преимуществами hello масштабирования и гибкости облачных hello для их машинного обучения рабочих нагрузок. Но не toodisrupt их текущего бизнес-процессов и рабочих процессов, перемещая их облако toohello локальных данных. Машинное обучение Azure теперь поддерживает чтение данных из локальной базы данных SQL Server с последующим обучением и оценкой модели по этим данным. Вы больше не toomanually копирования и синхронизации данных hello между облаком hello и локального сервера. Вместо этого hello **импорта данных** модуля в студии машинного обучения Azure теперь может считывать непосредственно из локальной базы данных SQL Server для вашей обучения и оценки заданий.

Это статье представлен обзор как tooingress локальных данных SQL server в машинном обучении Azure. Предполагается, что вы знакомы с такими основными понятиями Машинного обучения Azure, как рабочие области, модули, наборы данных, эксперименты *и т. д.*

> [!NOTE]
> Эта функция недоступна для бесплатных рабочих областей. Дополнительные сведения о ценах на машинное обучение и его уровнях см. [здесь](https://azure.microsoft.com/pricing/details/machine-learning/).
>
>

<!-- -->

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

## <a name="install-hello-microsoft-data-management-gateway"></a>Установить шлюз управления данными Майкрософт hello
tooaccess локальной базы данных SQL Server в машинном обучении Azure требуются toodownload и hello установить шлюз управления данными Майкрософт. При настройке подключения шлюза hello в студии машинного обучения, у вас есть возможность загрузить и установить шлюз hello, с помощью hello hello **загрузки и зарегистрировать шлюз данных** диалоговое окно, описанных ниже.

Hello шлюз управления данными заранее можно установить по загрузке и запуске hello пакет установки MSI с hello [центра загрузки Майкрософт](https://www.microsoft.com/download/details.aspx?id=39717).
Выберите последнюю версию hello, при выборе 32-разрядной или 64-разрядной, подходящими для вашего компьютера. Hello MSI-ФАЙЛ также может быть tooupgrade используется существующий шлюз управления данными toohello последнюю версию, обо всех параметрах, сохраняются.

Hello шлюза имеет hello следующие предварительные требования:

* Hello поддерживается версии операционной системы Windows, Windows 7, Windows 8 и 8.1, Windows 10, Windows Server 2008 R2, Windows Server 2012 и Windows Server 2012 R2.
* Hello рекомендуемые конфигурации для компьютера шлюза hello имеет по крайней мере 2 ГГц, 4 ядра, 8 ГБ ОЗУ и диск 80 ГБ.
* Шлюз hello hello компьютер перейдет в спящий режим, не будет отвечать toodata запросов. Таким образом настройте соответствующие управления питанием на компьютере hello перед установкой шлюза hello. Если машина hello настроенных toohibernate, установка шлюза hello выводится сообщение.
* Поскольку действие копирования происходит с определенной периодичностью, hello использование ресурсов (ЦП, памяти) на компьютере hello также учитывает hello же шаблон с максимальной нагрузки и временем простоя. Использование ресурсов также сильно зависит hello объем данных, перемещаемых. Когда выполняется несколько заданий копирования, в пиковые периоды уровень использования ресурсов системы повышается. Хотя технически достаточно hello минимальной конфигурации, перечисленных выше, может возникнуть toohave конфигурация с больше ресурсов, чем минимальная конфигурация hello в зависимости от конкретных нагрузки для перемещения данных.

Рассмотрим следующее hello при настройке и использовании шлюз управления данными.

* На компьютере может быть установлен только один экземпляр шлюза управления данными.
* Можно использовать один шлюз для нескольких локальных источников данных.
* Можно подключить несколько шлюзов на разных компьютерах toohello же локальному источнику данных.
* Шлюз можно настроить только для одной рабочей области одновременно. На данный момент шлюзы нельзя сделать общими для нескольких рабочих областей.
* Для одной рабочей области можно настроить несколько шлюзов. Например вы можете toouse шлюз, который является tooyour подключенных источников данных теста во время разработки и производственной шлюз, когда вы будете готовы toooperationalize.
* шлюз Hello не обязательно toobe на компьютер же, как источник данных hello hello. Но остается ближе toohello источника данных уменьшает время hello для источника данных toohello tooconnect шлюза hello. Рекомендуется устанавливать hello шлюз на компьютере, который отличается от одного источника данных локальных узлов hello hello, чтобы hello шлюз и источник данных не конкурируют за ресурсы.
* Если вы уже установили шлюз на компьютер, который используется для задач Power BI или фабрики данных Azure, установите отдельный шлюз для Машинного обучения Azure на другом компьютере.

  > [!NOTE]
  > Шлюз управления данными и шлюз Power BI нельзя запускать на hello того же компьютера.
  >
  >
* Hello toouse шлюз управления данными для машинного обучения Azure необходимо даже при использовании Azure ExpressRoute для других данных. Источник данных следует считать локальным (то есть защищенным брандмауэром), даже если используется ExpressRoute. Используйте hello шлюз управления данными tooestablish подключением машинного обучения и hello источника данных.

Подробные сведения о необходимые условия для установки, действия по установке и советы по устранению неполадок можно найти в статье hello [шлюз управления данными](../data-factory/data-factory-data-management-gateway.md).

## <a name="span-idusing-the-data-gateway-step-by-step-walk-classanchorspan-idtoc450838866-classanchorspanspaningress-data-from-your-on-premises-sql-server-database-into-azure-machine-learning"></a><span id="using-the-data-gateway-step-by-step-walk" class="anchor"><span id="_Toc450838866" class="anchor"></span></span>Ввод данных из локальной базы данных SQL Server в Машинное обучение Azure
В этом пошаговом руководстве описывается, как установить шлюз управления данными в рабочей области Машинного обучения Azure, настроить его, а затем считывать данные из локальной базы данных SQL Server.

> [!TIP]
> Прежде чем начать, отключите блокирование всплывающих окон в браузере для `studio.azureml.net`. Если вы используете hello браузера Google Chrome, загрузите и установите один из hello несколько подключаемых модулей на веб-хранилища Google Chrome [щелкните один раз расширения приложения](https://chrome.google.com/webstore/search/clickonce?_category=extensions).
>
>

### <a name="step-1-create-a-gateway"></a>Шаг 1. Создание шлюза
Первым шагом Hello — toocreate и настроить шлюз tooaccess hello локальной базы данных SQL.

1. Войдите в слишком[студии машинного обучения Azure](https://studio.azureml.net/Home/) и в рабочей области выберите hello, вы должны быть toowork.
2. Нажмите кнопку hello **параметры** колонка на hello и выберите команду hello **ШЛЮЗЫ данных** вкладку вверху hello.
3. Нажмите кнопку **ШЛЮЗ данных** hello нижней части экрана приветствия.

    ![Новый шлюз данных](media/machine-learning-use-data-from-an-on-premises-sql-server/new-data-gateway-button.png)
4. В hello **шлюз данных** диалоговое окно, введите hello **имя шлюза** и при необходимости добавьте **описание**. Щелкните стрелку hello hello нижнем правом углу toogo toohello следующий шаг конфигурации hello.

    ![Ввод имени и описания шлюза данных](media/machine-learning-use-data-from-an-on-premises-sql-server/new-data-gateway-dialog-enter-name.png)
5. В hello загрузить и зарегистрировать шлюз данных диалогового окна, скопировать ключ регистрации ШЛЮЗА hello toohello, буфер обмена.

    ![Download and register data gateway (Скачивание и регистрация шлюза данных)](media/machine-learning-use-data-from-an-on-premises-sql-server/download-and-register-data-gateway.png)
6. <span id="note-1" class="anchor"></span>Если вы еще не загрузили и установили hello шлюз управления данными Майкрософт, а затем нажмите кнопку **шлюз управления данными загрузки**. Это занимает toothe центра загрузки Майкрософт Center для выбора версии шлюза hello вы, загрузить и установить его. Подробные сведения о необходимые условия для установки, действия по установке и советы по устранению неполадок можно найти в разделах начало hello hello статьи [перемещения данных между локальным источникам и облако с помощью шлюза управления данными](../data-factory/data-factory-move-data-between-onprem-and-cloud.md).
7. После установки шлюза hello hello диспетчера конфигурации шлюза управления данными будет открыт и hello **регистрации шлюза** отображается диалоговое окно. Вставить hello **ключ регистрации шлюза** , которые вы скопировали toohello буфер обмена и нажмите кнопку **зарегистрировать**.
8. Если вы уже установили шлюз, запустите диспетчер конфигураций шлюза управления данными hello. Нажмите кнопку **изменение ключа**, вставьте **ключ регистрации шлюза** , которые вы скопировали toohello буфера обмена в предыдущем шаге hello и нажмите кнопку **ОК**.
9. По завершении установки hello hello **регистрации шлюза** отображается диалоговое окно для Microsoft диспетчера шлюза управления данными конфигурации. Вставьте hello РЕГИСТРАЦИОННЫЙ ключ ШЛЮЗА, скопированный в буфер обмена hello в предыдущем шаге и нажмите кнопку **зарегистрировать**.

    ![Зарегистрировать шлюз](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-register-gateway.png)
10. Hello шлюза будет завершена настройка при установке hello последующих значений на hello **Главная** вкладку в Microsoft диспетчера шлюза управления данными конфигурации:

    * **Имя шлюза** и **имя экземпляра** задаются имя toohello hello шлюза.
    * **Регистрация** задано слишком**зарегистрированные**.
    * **Состояние** задано слишком**Started**.
    * Hello строку состояния в нижней отображает hello **подключен tooData облачной службе шлюза управления** вместе с зеленой галочкой.

      ![Диспетчер шлюза управления данными](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-registered.png)

      Студия машинного обучения также обновляется при успешной регистрации hello.

    ![Успешная регистрация шлюза](media/machine-learning-use-data-from-an-on-premises-sql-server/gateway-registered.png)
11. В hello **загрузить и зарегистрировать шлюз данных** диалоговое окно, щелкните "Установка флажка toocomplete hello". Hello **параметры** страница отображает состояние шлюза, как «В сети». В правой области hello вы найдете состояние и другие полезные сведения.

    ![Параметры шлюза](media/machine-learning-use-data-from-an-on-premises-sql-server/gateway-status.png)
12. В Диспетчер конфигураций шлюза управления данными Майкрософт hello переключение toohello **сертификат** вкладку hello сертификат, заданный на этой вкладке, используемые tooencrypt и расшифровки учетных данных для хранилища данных в локальной среде hello, указываемое на портале hello. Этот сертификат является сертификатом по умолчанию hello. Майкрософт рекомендует изменять этот tooyour собственный сертификат, резервное копирование в системе управления сертификата. Нажмите кнопку **изменений** toouse собственный сертификат вместо него.

    ![Изменение сертификата шлюза](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-certificate.png)
13. (необязательно) При необходимости tooenable подробного ведения журналов для устранения неполадок со шлюзом hello в Диспетчер конфигураций шлюза управления данными Майкрософт hello переключитесь toothe **диагностики** вкладку и проверьте hello **включить расширенное ведение журнала для устранения неполадок** параметр. Hello сведения о ведении журнала можно найти в hello средства просмотра событий Windows в группе hello **журналы приложений и служб**  - &gt; **шлюз управления данными** узла. Можно также использовать hello **диагностики** вкладку tootest hello подключения tooan локального источника данных с помощью шлюза hello.

    ![Включение ведения подробного журнала](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-verbose-logging.png)

На этом завершается процесс установки шлюза hello в машинном обучении Azure.
Вы являетесь toouse теперь все готово к локальным данным.

В Студии машинного обучения можно создать и настроить несколько шлюзов для каждой рабочей области. Например имеется шлюз требуется источники данных теста tooyour tooconnect во время разработки и другой шлюз для производственного источников данных. Машинное обучение Azure предоставляет tooset гибкость копирование несколько шлюзов, в зависимости от корпоративной среде. В настоящее время шлюз нельзя совместно использовать между несколькими рабочими областями, и на одном компьютере можно установить только один шлюз. Дополнительные сведения см. в статье [Перемещение данных между локальными источниками и облаком с помощью шлюза управления данными](../data-factory/data-factory-move-data-between-onprem-and-cloud.md).

### <a name="step-2-use-hello-gateway-tooread-data-from-an-on-premises-data-source"></a>Шаг 2: Использование hello шлюза tooread данных из источника данных в локальной среде
После настройки шлюза hello можно добавить **импорта данных** модуля в эксперимент, который получает на входе hello данные из базы данных SQL Server в локальной среде hello.

1. В студии машинного обучения, выберите hello **ЭКСПЕРИМЕНТОВ** щелкните **+ создать** в hello в левом нижнем углу и выберите **пустой эксперимента** (или выберите один из нескольких образца Эксперименты доступны).
2. Поиск и перетащите hello **импорта данных** toohello модуль поэкспериментировать холста.
3. Нажмите кнопку **сохранение** ниже hello холста. Введите «Azure машины обучения в локальной среде SQL Server учебник» имя hello эксперимент, выберите рабочую область и нажмите кнопку hello **ОК** флажок.

   ![Сохранение эксперимента с новым именем](media/machine-learning-use-data-from-an-on-premises-sql-server/experiment-save-as.png)
4. Щелкните hello **импорта данных** tooselect модуля, затем в **свойства** toohello панели справа от холста hello, выберите «Локальная база данных SQL» в hello **источника данных** раскрывающийся список.
5. Выберите hello **шлюз данных** установлен и зарегистрирован. Вы можете установить еще один шлюз, выбрав "(Добавить шлюз данных…)".

   ![Выбор шлюза данных для модуля импорта данных](media/machine-learning-use-data-from-an-on-premises-sql-server/import-data-select-on-premises-data-source.png)
6. Введите hello SQL **имя сервера базы данных** и **имя базы данных**, вместе с hello SQL **запроса базы данных** требуется tooexecute.
7. Нажмите кнопку **Enter values** (Введите значения) в разделе **Имя пользователя и пароль** и введите учетные данные базы данных. Можно использовать встроенную аутентификацию Windows или аутентификацию SQL Server, в зависимости от настроек локального сервера SQL Server.

   ![Ввод учетных данных базы данных](media/machine-learning-use-data-from-an-on-premises-sql-server/database-credentials.png)

   приветственное сообщение «необходимые значения» изменения слишком» данные, установленные» с зеленой галочкой. Требуется только учетные данные hello tooenter один раз только сведения о базе данных hello или пароль. Машинное обучение Azure использует сертификат hello, предоставленные при установке шлюза tooencrypt hello hello-учетные данные в облаке hello. Azure никогда не хранит локальные учетные данные без шифрования.

   ![Свойства модуля "Импорт данных"](media/machine-learning-use-data-from-an-on-premises-sql-server/import-data-properties-entered.png)
8. Нажмите кнопку **ЗАПУСКА** toorun hello эксперимента.

После эксперимента hello закончит работу, вы можете визуализировать hello данные, импортированные из базы данных hello, щелкнув выходной порт hello hello **импорта данных** модуля и выбрав **визуализировать**.

После завершения разработки эксперимента можно развернуть и ввести в эксплуатацию свою модель. С помощью hello службы пакетного выполнения, данные из базы данных SQL Server в локальной среде hello в hello **импорта данных** модуля чтения и будут использоваться для оценки. Hello запроса ответа службы можно использовать для оценки локальных данных, но корпорация Майкрософт рекомендует использовать [надстройки Excel](machine-learning-excel-add-in-for-web-services.md) вместо него. В настоящее время записи tooan в локальной базе данных SQL Server с помощью **Экспорт данных** не поддерживается в эксперименты и опубликованных веб-служб.
