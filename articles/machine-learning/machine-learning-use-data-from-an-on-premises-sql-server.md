---
title: "Использование локального сервера SQL Server в Машинном обучении Azure | Документация Майкрософт"
description: "Использование данных из локальной базы данных SQL Server для выполнения расширенной аналитики с помощью Машинного обучения Azure."
services: machine-learning
documentationcenter: 
author: garyericson
manager: jhubbard
editor: cgronlun
ms.assetid: 08e4610d-02b6-4071-aad7-a2340ad8e2ea
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/13/2017
ms.author: garye;krishnan
ms.openlocfilehash: ec1620be2aaf4339ba9d22540ffb2239d0678b70
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="perform-advanced-analytics-with-azure-machine-learning-using-data-from-an-on-premises-sql-server-database"></a><span data-ttu-id="a3fbf-103">Выполнение расширенной аналитики с помощью Машинного обучения Azure на основе данных из локальной базы данных SQL Server</span><span class="sxs-lookup"><span data-stu-id="a3fbf-103">Perform advanced analytics with Azure Machine Learning using data from an on-premises SQL Server database</span></span>

[!INCLUDE [import-data-into-aml-studio-selector](../../includes/machine-learning-import-data-into-aml-studio.md)]

<span data-ttu-id="a3fbf-104">Зачастую на предприятиях, работающих с локальными данными, используются преимущества масштабируемости и гибкости облака для рабочих нагрузок машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-104">Often enterprises that work with on-premises data would like to take advantage of the scale and agility of the cloud for their machine learning workloads.</span></span> <span data-ttu-id="a3fbf-105">Но при этом на предприятиях не хотят нарушать свои текущие бизнес-процессы и рабочие процессы, перемещая их локальные данные в облако.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-105">But they don't want to disrupt their current business processes and workflows by moving their on-premises data to the cloud.</span></span> <span data-ttu-id="a3fbf-106">Машинное обучение Azure теперь поддерживает чтение данных из локальной базы данных SQL Server с последующим обучением и оценкой модели по этим данным.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-106">Azure Machine Learning now supports reading your data from an on-premises SQL Server database and then training and scoring a model with this data.</span></span> <span data-ttu-id="a3fbf-107">Больше не требуется вручную копировать и синхронизировать данные между облаком и локальным сервером.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-107">You no longer have to manually copy and sync the data between the cloud and your on-premises server.</span></span> <span data-ttu-id="a3fbf-108">Вместо этого модуль **Импорт данных** в Студии машинного обучения Azure теперь может считывать данные для заданий обучения и оценки непосредственно из локальной базы данных SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-108">Instead, the **Import Data** module in Azure Machine Learning Studio can now read directly from your on-premises SQL Server database for your training and scoring jobs.</span></span>

<span data-ttu-id="a3fbf-109">Эта статья содержит общие сведения о вводе локальных данных SQL Server в Машинное обучение Azure.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-109">This article provides an overview of how to ingress on-premises SQL server data into Azure Machine Learning.</span></span> <span data-ttu-id="a3fbf-110">Предполагается, что вы знакомы с такими основными понятиями Машинного обучения Azure, как рабочие области, модули, наборы данных, эксперименты *и т. д.*</span><span class="sxs-lookup"><span data-stu-id="a3fbf-110">It assumes that you're familiar with Azure Machine Learning concepts like workspaces, modules, datasets, experiments, *etc.*.</span></span>

> [!NOTE]
> <span data-ttu-id="a3fbf-111">Эта функция недоступна для бесплатных рабочих областей.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-111">This feature is not available for free workspaces.</span></span> <span data-ttu-id="a3fbf-112">Дополнительные сведения о ценах на машинное обучение и его уровнях см. [здесь](https://azure.microsoft.com/pricing/details/machine-learning/).</span><span class="sxs-lookup"><span data-stu-id="a3fbf-112">For more information about Machine Learning pricing and tiers, see [Azure Machine Learning Pricing](https://azure.microsoft.com/pricing/details/machine-learning/).</span></span>
>
>

<!-- -->

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

## <a name="install-the-microsoft-data-management-gateway"></a><span data-ttu-id="a3fbf-113">Установка шлюза управления данными Майкрософт</span><span class="sxs-lookup"><span data-stu-id="a3fbf-113">Install the Microsoft Data Management Gateway</span></span>
<span data-ttu-id="a3fbf-114">Для доступа к локальной базе данных SQL Server из Машинного обучения Azure вам необходимо скачать и установить шлюз управления данными Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-114">To access an on-premises SQL Server database in Azure Machine Learning, you need to download and install the Microsoft Data Management Gateway.</span></span> <span data-ttu-id="a3fbf-115">При настройке подключения шлюза в Студии машинного обучения будет возможность скачать и установить шлюз, используя диалоговое окно **Download and register data gateway** (Скачивание и регистрация шлюза данных), как описано ниже.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-115">When you configure the gateway connection in Machine Learning Studio, you have the opportunity to download and install the gateway using the **Download and register data gateway** dialog described below.</span></span>

<span data-ttu-id="a3fbf-116">Можно также установить шлюз управления данными заранее, скачав и запустив пакет установки MSI из [Центра загрузки Майкрософт](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="a3fbf-116">You also can install the Data Management Gateway ahead of time by downloading and running the MSI setup package from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span></span>
<span data-ttu-id="a3fbf-117">Выберите последнюю версию для 32-разрядных или 64-разрядных систем, в зависимости от своего компьютера.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-117">Choose the latest version, selecting either 32-bit or 64-bit as appropriate for your computer.</span></span> <span data-ttu-id="a3fbf-118">Пакет MSI также может использоваться для обновления имеющегося шлюза управления данными до последней версии с сохранением всех параметров.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-118">The MSI can also be used to upgrade an existing Data Management Gateway to the latest version, with all settings preserved.</span></span>

<span data-ttu-id="a3fbf-119">Предварительные требования для шлюза указаны ниже.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-119">The gateway has the following prerequisites:</span></span>

* <span data-ttu-id="a3fbf-120">Поддерживаемые операционные системы Windows: Windows 7, Windows 8, Windows 8.1, Windows 10, Windows Server 2008 R2, Windows Server 2012 и Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-120">The supported Windows operating system versions are Windows 7, Windows 8/8.1, Windows 10, Windows Server 2008 R2, Windows Server 2012, and Windows Server 2012 R2.</span></span>
* <span data-ttu-id="a3fbf-121">Рекомендуемая конфигурация для компьютера шлюза: четырехъядерный процессор с тактовой частотой не менее 2 ГГц, не менее 8 ГБ ОЗУ и 80 ГБ дискового пространства.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-121">The recommended configuration for the gateway machine is at least 2 GHz, 4 cores, 8GB RAM, and 80GB disk.</span></span>
* <span data-ttu-id="a3fbf-122">Когда хост-компьютер переходит в режим гибернации, шлюз не отвечает на запросы данных.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-122">If the host machine hibernates, the gateway won’t respond to data requests.</span></span> <span data-ttu-id="a3fbf-123">Поэтому перед установкой шлюза на компьютере следует настроить соответствующую схему управления питанием.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-123">Therefore, configure an appropriate power plan on the computer before installing the gateway.</span></span> <span data-ttu-id="a3fbf-124">Если компьютер настроен для использования режима гибернации, во время установки шлюза отобразится соответствующее сообщение.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-124">If the machine is configured to hibernate, the gateway installation displays a message.</span></span>
* <span data-ttu-id="a3fbf-125">Так как циклы копирования выполняются с определенной частотой, ресурсы компьютера (ЦП, память) используются нерегулярно: есть пиковые нагрузки, и есть время простоя.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-125">Because copy activity occurs at a specific frequency, the resource usage (CPU, memory) on the machine also follows the same pattern with peak and idle times.</span></span> <span data-ttu-id="a3fbf-126">Использование ресурсов также зависит от объема перемещаемых данных.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-126">Resource utilization also depends heavily on the amount of data being moved.</span></span> <span data-ttu-id="a3fbf-127">Когда выполняется несколько заданий копирования, в пиковые периоды уровень использования ресурсов системы повышается.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-127">When multiple copy jobs are in progress, you'll observe resource usage go up during peak times.</span></span> <span data-ttu-id="a3fbf-128">Выше приведены минимальные требования к конфигурации, технически являющейся достаточной. Мы рекомендуем всегда иметь больше ресурсов, чем указано для минимальной конфигурации, так как нагрузка зависит от объема перемещаемых данных.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-128">While the minimum configuration listed above is technically sufficient, you may want to have a configuration with more resources than the minimum configuration depending on your specific load for data movement.</span></span>

<span data-ttu-id="a3fbf-129">Учитывайте следующее при настройке и использовании шлюза управления данными.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-129">Consider the following when setting up and using a Data Management Gateway:</span></span>

* <span data-ttu-id="a3fbf-130">На компьютере может быть установлен только один экземпляр шлюза управления данными.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-130">You can install only one instance of Data Management Gateway on a single computer.</span></span>
* <span data-ttu-id="a3fbf-131">Можно использовать один шлюз для нескольких локальных источников данных.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-131">You can use a single gateway for multiple on-premises data sources.</span></span>
* <span data-ttu-id="a3fbf-132">Несколько шлюзов на разных компьютерах можно подключить к одному и тому же локальному источнику данных.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-132">You can connect multiple gateways on different computers to the same on-premises data source.</span></span>
* <span data-ttu-id="a3fbf-133">Шлюз можно настроить только для одной рабочей области одновременно.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-133">You configure a gateway for only one workspace at a time.</span></span> <span data-ttu-id="a3fbf-134">На данный момент шлюзы нельзя сделать общими для нескольких рабочих областей.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-134">Currently, gateways can’t be shared across workspaces.</span></span>
* <span data-ttu-id="a3fbf-135">Для одной рабочей области можно настроить несколько шлюзов.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-135">You can configure multiple gateways for a single workspace.</span></span> <span data-ttu-id="a3fbf-136">Например, можно использовать шлюз, который подключен к тестовым источникам данных, во время разработки, и рабочий шлюз, когда все будет готово к вводу в эксплуатацию.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-136">For example, you may want to use a gateway that's connected to your test data sources during development and a production gateway when you're ready to operationalize.</span></span>
* <span data-ttu-id="a3fbf-137">Шлюз не обязательно устанавливать на том же компьютере, что и источник данных.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-137">The gateway does not need to be on the same machine as the data source.</span></span> <span data-ttu-id="a3fbf-138">Но если он расположен вблизи источника данных, это ускоряет подключение шлюза к этому источнику.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-138">But staying closer to the data source reduces the time for the gateway to connect to the data source.</span></span> <span data-ttu-id="a3fbf-139">Мы рекомендуем установить шлюз на компьютере, отличном от того, на котором размещен локальный источник данных, чтобы шлюз не конкурировал с источником данных за использование ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-139">We recommend that you install the gateway on a machine that's different from the one that hosts the on-premises data source so that the gateway and data source don't compete for resources.</span></span>
* <span data-ttu-id="a3fbf-140">Если вы уже установили шлюз на компьютер, который используется для задач Power BI или фабрики данных Azure, установите отдельный шлюз для Машинного обучения Azure на другом компьютере.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-140">If you already have a gateway installed on your computer serving Power BI or Azure Data Factory scenarios, install a separate gateway for Azure Machine Learning on another computer.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a3fbf-141">Шлюз управления данными и шлюз Power BI не могут работать на одном компьютере.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-141">You can't run Data Management Gateway and Power BI Gateway on the same computer.</span></span>
  >
  >
* <span data-ttu-id="a3fbf-142">Необходимо использовать шлюз управления данными для Машинного обучения Azure, даже если вы используете Azure ExpressRoute для других данных.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-142">You need to use the Data Management Gateway for Azure Machine Learning even if you are using Azure ExpressRoute for other data.</span></span> <span data-ttu-id="a3fbf-143">Источник данных следует считать локальным (то есть защищенным брандмауэром), даже если используется ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-143">You should treat your data source as an on-premises data source (that's behind a firewall) even when you use ExpressRoute.</span></span> <span data-ttu-id="a3fbf-144">А для связи между Машинным обучением Azure и источником данных используется шлюз управления данными.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-144">Use the Data Management Gateway to establish connectivity between Machine Learning and the data source.</span></span>

<span data-ttu-id="a3fbf-145">Дополнительные сведения о необходимых условиях для установки, этапах установки и устранении неполадок см. в статье [Шлюз управления данными](../data-factory/data-factory-data-management-gateway.md).</span><span class="sxs-lookup"><span data-stu-id="a3fbf-145">You can find detailed information on installation prerequisites, installation steps, and troubleshooting tips in the article [Data Management Gateway](../data-factory/data-factory-data-management-gateway.md).</span></span>

## <a name="span-idusing-the-data-gateway-step-by-step-walk-classanchorspan-idtoc450838866-classanchorspanspaningress-data-from-your-on-premises-sql-server-database-into-azure-machine-learning"></a><span data-ttu-id="a3fbf-146"><span id="using-the-data-gateway-step-by-step-walk" class="anchor"><span id="_Toc450838866" class="anchor"></span></span>Ввод данных из локальной базы данных SQL Server в Машинное обучение Azure</span><span class="sxs-lookup"><span data-stu-id="a3fbf-146"><span id="using-the-data-gateway-step-by-step-walk" class="anchor"><span id="_Toc450838866" class="anchor"></span></span>Ingress data from your on-premises SQL Server database into Azure Machine Learning</span></span>
<span data-ttu-id="a3fbf-147">В этом пошаговом руководстве описывается, как установить шлюз управления данными в рабочей области Машинного обучения Azure, настроить его, а затем считывать данные из локальной базы данных SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-147">In this walkthrough, you will set up a Data Management Gateway in an Azure Machine Learning workspace, configure it, and then read data from an on-premises SQL Server database.</span></span>

> [!TIP]
> <span data-ttu-id="a3fbf-148">Прежде чем начать, отключите блокирование всплывающих окон в браузере для `studio.azureml.net`.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-148">Before you start, disable your browser’s pop-up blocker for `studio.azureml.net`.</span></span> <span data-ttu-id="a3fbf-149">Если вы используете браузер Google Chrome, скачайте и установите один из нескольких подключаемых модулей, доступных в интернет-магазине Google Chrome в разделе [расширений для приложений Click Once](https://chrome.google.com/webstore/search/clickonce?_category=extensions).</span><span class="sxs-lookup"><span data-stu-id="a3fbf-149">If you're using the Google Chrome browser, download and install one of the several plug-ins available at Google Chrome WebStore [Click Once App Extension](https://chrome.google.com/webstore/search/clickonce?_category=extensions).</span></span>
>
>

### <a name="step-1-create-a-gateway"></a><span data-ttu-id="a3fbf-150">Шаг 1. Создание шлюза</span><span class="sxs-lookup"><span data-stu-id="a3fbf-150">Step 1: Create a gateway</span></span>
<span data-ttu-id="a3fbf-151">Первым шагом является создание и настройка шлюза для доступа к локальной базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-151">The first step is to create and set up the gateway to access your on-premises SQL database.</span></span>

1. <span data-ttu-id="a3fbf-152">Войдите в [Студию машинного обучения Azure](https://studio.azureml.net/Home/) и выберите необходимую рабочую область.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-152">Log in to [Azure Machine Learning  Studio](https://studio.azureml.net/Home/) and select the workspace  that you want to work in.</span></span>
2. <span data-ttu-id="a3fbf-153">Щелкните колонку **Параметры** слева и выберите вкладку **Шлюзы данных** вверху.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-153">Click the **SETTINGS** blade on the left, and then click the **DATA  GATEWAYS** tab at the top.</span></span>
3. <span data-ttu-id="a3fbf-154">Щелкните **НОВЫЙ ШЛЮЗ ДАННЫХ** в нижней части экрана.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-154">Click **NEW DATA GATEWAY** at the bottom of the screen.</span></span>

    ![Новый шлюз данных](media/machine-learning-use-data-from-an-on-premises-sql-server/new-data-gateway-button.png)
4. <span data-ttu-id="a3fbf-156">В диалоговом окне **Новый шлюз данных** введите **имя шлюза** и при необходимости добавьте его **описание**.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-156">In the **New data gateway** dialog, enter the **Gateway Name** and optionally add a **Description**.</span></span> <span data-ttu-id="a3fbf-157">Щелкните стрелку в нижнем правом углу, чтобы перейти к следующему шагу настройки.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-157">Click the arrow on the bottom right-hand corner to go to the next step of the configuration.</span></span>

    ![Ввод имени и описания шлюза данных](media/machine-learning-use-data-from-an-on-premises-sql-server/new-data-gateway-dialog-enter-name.png)
5. <span data-ttu-id="a3fbf-159">В диалоговом окне Download and register data gateway (Скачивание и регистрация шлюза данных) скопируйте ключ регистрации шлюза в буфер обмена.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-159">In the Download and register data gateway dialog, copy the GATEWAY  REGISTRATION KEY to the clipboard.</span></span>

    ![Download and register data gateway (Скачивание и регистрация шлюза данных)](media/machine-learning-use-data-from-an-on-premises-sql-server/download-and-register-data-gateway.png)
6. <span data-ttu-id="a3fbf-161"><span id="note-1" class="anchor"></span>Если вы еще не скачали и не установили шлюз управления данными Майкрософт, щелкните **Download data management gateway**(Скачать шлюз управления данными).</span><span class="sxs-lookup"><span data-stu-id="a3fbf-161"><span id="note-1" class="anchor"></span>If you have not yet downloaded and installed the Microsoft Data Management Gateway, then click **Download data management gateway**.</span></span> <span data-ttu-id="a3fbf-162">Вы перейдете в Центр загрузки Майкрософт, где можно выбрать нужную версию шлюза, скачать ее и установить.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-162">This takes you to the Microsoft Download Center where you can select the gateway version you need, download it, and install it.</span></span> <span data-ttu-id="a3fbf-163">Дополнительные сведения о необходимых условиях для установки, этапах установки и устранении неполадок можно найти в подразделах в начале статьи [Перемещение данных между локальными источниками и облаком при помощи шлюза управления данными](../data-factory/data-factory-move-data-between-onprem-and-cloud.md).</span><span class="sxs-lookup"><span data-stu-id="a3fbf-163">You can find detailed information on installation prerequisites, installation steps, and troubleshooting tips in the beginning sections of the article [Move data between on-premises sources and cloud with Data Management Gateway](../data-factory/data-factory-move-data-between-onprem-and-cloud.md).</span></span>
7. <span data-ttu-id="a3fbf-164">После установки шлюза откроется диспетчер конфигурации шлюза управления данными и появится диалоговое окно **Регистрация шлюза** .</span><span class="sxs-lookup"><span data-stu-id="a3fbf-164">After the gateway is installed, the Data Management Gateway Configuration Manager will open and the **Register gateway** dialog is displayed.</span></span> <span data-ttu-id="a3fbf-165">Вставьте **ключ регистрации шлюза**, скопированный в буфер обмена, и нажмите кнопку **Зарегистрировать**.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-165">Paste the **Gateway Registration Key** that you copied to the clipboard and click **Register**.</span></span>
8. <span data-ttu-id="a3fbf-166">Если вы уже установили шлюз, запустите диспетчер конфигурации шлюза управления данными.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-166">If you already have a gateway installed, run the Data Management Gateway Configuration Manager.</span></span> <span data-ttu-id="a3fbf-167">Щелкните **Изменить ключ**, вставьте **ключ регистрации шлюза**, скопированный в буфер обмена на предыдущем шаге, и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-167">Click **Change key**, paste the **Gateway Registration Key** that you copied to the clipboard in the previous step, and click **OK**.</span></span>
9. <span data-ttu-id="a3fbf-168">Когда установка будет завершена, отобразится диалоговое окно **Регистрация шлюза** для диспетчера конфигурации шлюза управления данными Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-168">When the installation is complete, the **Register gateway** dialog for Microsoft Data Management Gateway Configuration Manager is displayed.</span></span> <span data-ttu-id="a3fbf-169">Вставьте ключ регистрации шлюза, скопированный в буфер обмена на предыдущем шаге, и щелкните **Зарегистрировать**.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-169">Paste the GATEWAY REGISTRATION KEY that you copied to the clipboard in a previous step and click **Register**.</span></span>

    ![Зарегистрировать шлюз](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-register-gateway.png)
10. <span data-ttu-id="a3fbf-171">Настройка шлюза будет завершена после задания следующих значений на вкладке **Главная** в диспетчере конфигурации шлюза управления данными Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-171">The gateway configuration is complete when the following values are set on the **Home** tab in Microsoft Data Management Gateway Configuration Manager:</span></span>

    * <span data-ttu-id="a3fbf-172">В полях **Имя шлюза** и **Имя экземпляра** указывается имя шлюза.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-172">**Gateway name** and **Instance name** are set to the name of   the gateway.</span></span>
    * <span data-ttu-id="a3fbf-173">Для параметра **Регистрация** установлено значение **Зарегистрировано**.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-173">**Registration** is set to **Registered**.</span></span>
    * <span data-ttu-id="a3fbf-174">В поле **Состояние** установлено значение **Запущено**.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-174">**Status** is set to **Started**.</span></span>
    * <span data-ttu-id="a3fbf-175">В строке состояния внизу отображается надпись **Подключение к облачной службе шлюза управления данными установлено** и зеленый флажок.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-175">The status bar at the bottom displays **Connected to Data   Management Gateway Cloud Service** along with a green   check mark.</span></span>

      ![Диспетчер шлюза управления данными](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-registered.png)

      <span data-ttu-id="a3fbf-177">При успешной регистрации также обновляется Студия машинного обучения Azure.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-177">Azure Machine Learning Studio also gets updated when the registration is successful.</span></span>

    ![Успешная регистрация шлюза](media/machine-learning-use-data-from-an-on-premises-sql-server/gateway-registered.png)
11. <span data-ttu-id="a3fbf-179">В диалоговом окне **Download and register data gateway** (Скачивание и регистрация шлюза данных) щелкните галочку, чтобы завершить настройку.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-179">In the **Download and register data gateway** dialog, click the check mark to complete the setup.</span></span> <span data-ttu-id="a3fbf-180">На странице **Параметры** отображается состояние шлюза "В сети".</span><span class="sxs-lookup"><span data-stu-id="a3fbf-180">The **Settings** page displays the gateway status as "Online".</span></span> <span data-ttu-id="a3fbf-181">В области справа можно просмотреть состояние и другие полезные сведения.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-181">In the right-hand pane, you'll find status and other useful information.</span></span>

    ![Параметры шлюза](media/machine-learning-use-data-from-an-on-premises-sql-server/gateway-status.png)
12. <span data-ttu-id="a3fbf-183">В диспетчере конфигурации шлюза управления данными Майкрософт перейдите на вкладку **Сертификат** .</span><span class="sxs-lookup"><span data-stu-id="a3fbf-183">In the Microsoft Data Management Gateway Configuration Manager switch to the **Certificate** tab.</span></span> <span data-ttu-id="a3fbf-184">Сертификат, указанный на этой вкладке, используется для шифрования и расшифровывания учетных данных локального хранилища данных, указанного на портале.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-184">The certificate specified on this tab is used to encrypt/decrypt credentials for the on-premises data store that you specify in the portal.</span></span> <span data-ttu-id="a3fbf-185">Это созданный по умолчанию сертификат.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-185">This certificate is the default certificate.</span></span> <span data-ttu-id="a3fbf-186">Корпорация Майкрософт рекомендует заменить его собственным сертификатом, сохраненном в системе управления сертификатами.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-186">Microsoft recommends changing this to your own certificate that you back up in your certificate management system.</span></span> <span data-ttu-id="a3fbf-187">Чтобы использовать вместо него собственный сертификат, щелкните **Изменить** .</span><span class="sxs-lookup"><span data-stu-id="a3fbf-187">Click **Change** to use your own certificate instead.</span></span>

    ![Изменение сертификата шлюза](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-certificate.png)
13. <span data-ttu-id="a3fbf-189">(Необязательно.) Если для устранения проблем со шлюзом вы хотите использовать подробное ведение журнала, то в диспетчере конфигурации шлюза управления данными перейдите на вкладку **Диагностика** и установите флажок **Включить запись подробных сведений в журнал для устранения неполадок**.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-189">(optional) If you want to enable verbose logging in order to troubleshoot issues with the gateway, in the Microsoft Data Management Gateway Configuration Manager switch to the **Diagnostics** tab and check the **Enable verbose logging for troubleshooting purposes** option.</span></span> <span data-ttu-id="a3fbf-190">Данные журналов можно изучить в средстве просмотра событий Windows, развернув узел **Журналы приложений и служб** -&gt; **Шлюз управления данными**.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-190">The logging information can be found in the Windows Event Viewer under the **Applications and Services Logs** -&gt; **Data Management Gateway** node.</span></span> <span data-ttu-id="a3fbf-191">На вкладке **Диагностика** можно также проверить подключение к локальному источнику данных через шлюз.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-191">You can also use the **Diagnostics** tab to test the connection to an on-premises data source using the gateway.</span></span>

    ![Включение ведения подробного журнала](media/machine-learning-use-data-from-an-on-premises-sql-server/data-gateway-configuration-manager-verbose-logging.png)

<span data-ttu-id="a3fbf-193">На этом процесс установки шлюза в Машинном обучении Azure завершается.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-193">This completes the gateway setup process in Azure Machine Learning.</span></span>
<span data-ttu-id="a3fbf-194">Теперь все готово к использованию локальных данных.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-194">You're now ready to use your on-premises data.</span></span>

<span data-ttu-id="a3fbf-195">В Студии машинного обучения можно создать и настроить несколько шлюзов для каждой рабочей области.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-195">You can create and set up multiple gateways in Studio for each workspace.</span></span> <span data-ttu-id="a3fbf-196">Например, можно использовать один шлюз, который будет подключаться к тестовым источникам данных во время разработки, и второй шлюз для подключения к рабочим источникам данных.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-196">For example, you may have a gateway that you want to connect to your test data sources during development, and a different gateway for your production data sources.</span></span> <span data-ttu-id="a3fbf-197">Машинное обучение Azure позволяет настроить несколько шлюзов в соответствии с вашей корпоративной средой.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-197">Azure Machine Learning gives you the flexibility to set up multiple gateways depending upon your corporate environment.</span></span> <span data-ttu-id="a3fbf-198">В настоящее время шлюз нельзя совместно использовать между несколькими рабочими областями, и на одном компьютере можно установить только один шлюз.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-198">Currently you can’t share a gateway between workspaces and only one gateway can be installed on a single computer.</span></span> <span data-ttu-id="a3fbf-199">Дополнительные сведения см. в статье [Перемещение данных между локальными источниками и облаком с помощью шлюза управления данными](../data-factory/data-factory-move-data-between-onprem-and-cloud.md).</span><span class="sxs-lookup"><span data-stu-id="a3fbf-199">For more information, see [Move data between on-premises sources and cloud with Data Management Gateway](../data-factory/data-factory-move-data-between-onprem-and-cloud.md).</span></span>

### <a name="step-2-use-the-gateway-to-read-data-from-an-on-premises-data-source"></a><span data-ttu-id="a3fbf-200">Шаг 2. Использование шлюза для чтения данных из локального источника данных</span><span class="sxs-lookup"><span data-stu-id="a3fbf-200">Step 2: Use the gateway to read data from an on-premises data source</span></span>
<span data-ttu-id="a3fbf-201">После настройки шлюза можно добавить в эксперимент модуль **Импорт данных** , который вводит данные из локальной базы данных SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-201">After you set up the gateway, you can add an **Import Data** module to an experiment that inputs the data from the on-premises SQL Server database.</span></span>

1. <span data-ttu-id="a3fbf-202">В Студии машинного обучения выберите вкладку **Эксперименты**, щелкните **+Создать** в левом нижнем углу и выберите **пустой эксперимент** (либо один из примеров экспериментов).</span><span class="sxs-lookup"><span data-stu-id="a3fbf-202">In Machine Learning Studio, select the **EXPERIMENTS** tab, click **+NEW** in the lower-left corner, and select **Blank Experiment** (or select one of several sample experiments available).</span></span>
2. <span data-ttu-id="a3fbf-203">Найдите и перетащите модуль **Импорт данных** на холст эксперимента.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-203">Find and drag the **Import Data** module to the experiment canvas.</span></span>
3. <span data-ttu-id="a3fbf-204">Внизу холста нажмите кнопку **Сохранить как** .</span><span class="sxs-lookup"><span data-stu-id="a3fbf-204">Click **Save as** below the canvas.</span></span> <span data-ttu-id="a3fbf-205">Введите название эксперимента "Учебник по использованию локальных данных SQL Server в Машинном обучении Azure", выберите рабочую область и нажмите кнопку **ОК** .</span><span class="sxs-lookup"><span data-stu-id="a3fbf-205">Enter "Azure Machine Learning On-Premises SQL Server Tutorial" for the experiment name, select the workspace, and click the **OK** check mark.</span></span>

   ![Сохранение эксперимента с новым именем](media/machine-learning-use-data-from-an-on-premises-sql-server/experiment-save-as.png)
4. <span data-ttu-id="a3fbf-207">Щелкните модуль **Импорт данных**, чтобы выбрать его, а затем в области **Свойства** справа от полотна в раскрывающемся списке **Источник данных** выберите "Локальная база данных SQL".</span><span class="sxs-lookup"><span data-stu-id="a3fbf-207">Click the **Import Data** module to select it, then in the **Properties** pane to the right of the canvas, select "On-Premises SQL Database" in the **Data source** dropdown list.</span></span>
5. <span data-ttu-id="a3fbf-208">Выберите **шлюз данных** , который вы установили и зарегистрировали.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-208">Select the **Data gateway** you installed and registered.</span></span> <span data-ttu-id="a3fbf-209">Вы можете установить еще один шлюз, выбрав "(Добавить шлюз данных…)".</span><span class="sxs-lookup"><span data-stu-id="a3fbf-209">You can set up another gateway by selecting "(add new Data Gateway…)".</span></span>

   ![Выбор шлюза данных для модуля импорта данных](media/machine-learning-use-data-from-an-on-premises-sql-server/import-data-select-on-premises-data-source.png)
6. <span data-ttu-id="a3fbf-211">Введите **имя сервера базы данных SQL** и **имя базы данных SQL**, а также **SQL-запрос к базе данных**, который требуется выполнить.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-211">Enter the SQL **Database server name** and **Database name**, along with the SQL **Database query** you want to execute.</span></span>
7. <span data-ttu-id="a3fbf-212">Нажмите кнопку **Enter values** (Введите значения) в разделе **Имя пользователя и пароль** и введите учетные данные базы данных.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-212">Click **Enter values** under **User name and password** and enter your database credentials.</span></span> <span data-ttu-id="a3fbf-213">Можно использовать встроенную аутентификацию Windows или аутентификацию SQL Server, в зависимости от настроек локального сервера SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-213">You can use Windows Integrated Authentication or SQL Server Authentication depending upon how your on-premises SQL Server is configured.</span></span>

   ![Ввод учетных данных базы данных](media/machine-learning-use-data-from-an-on-premises-sql-server/database-credentials.png)

   <span data-ttu-id="a3fbf-215">Сообщение "values required" (Требуются значения) изменится на "values set" (Значения заданы) с зеленой галочкой.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-215">The message "values required" changes to "values set" with a green check mark.</span></span> <span data-ttu-id="a3fbf-216">Необходимо только один раз ввести учетные данные, если только не изменится информация о базе данных или пароль.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-216">You only need to enter the credentials once unless the database information or password changes.</span></span> <span data-ttu-id="a3fbf-217">Машинное обучение Azure использует сертификат, предоставленный при установке шлюза, для шифрования учетных данных в облаке.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-217">Azure Machine Learning uses the certificate you provided when you installed the gateway to encrypt the credentials in the cloud.</span></span> <span data-ttu-id="a3fbf-218">Azure никогда не хранит локальные учетные данные без шифрования.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-218">Azure never stores on-premises credentials without encryption.</span></span>

   ![Свойства модуля "Импорт данных"](media/machine-learning-use-data-from-an-on-premises-sql-server/import-data-properties-entered.png)
8. <span data-ttu-id="a3fbf-220">Щелкните **ЗАПУСТИТЬ** , чтобы выполнить эксперимент.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-220">Click **RUN** to run the experiment.</span></span>

<span data-ttu-id="a3fbf-221">После завершения эксперимента можно визуализировать данные, импортированные из базы данных, щелкнув порт вывода модуля **Import Data** (Импорт данных) и выбрав **Visualize** (Визуализировать).</span><span class="sxs-lookup"><span data-stu-id="a3fbf-221">Once the experiment finishes running, you can visualize the data you imported from the database by clicking the output port of the **Import Data** module and selecting **Visualize**.</span></span>

<span data-ttu-id="a3fbf-222">После завершения разработки эксперимента можно развернуть и ввести в эксплуатацию свою модель.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-222">Once you finish developing your experiment, you can deploy and operationalize your model.</span></span> <span data-ttu-id="a3fbf-223">С помощью службы выполнения пакетов из локальной базы данных SQL Server, настроенной в модуле **Импорт данных** , будут считываться данные, которые будут использоваться для оценки.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-223">Using the Batch Execution Service, data from the on-premises SQL Server database configured in the **Import Data** module will be read and used for scoring.</span></span> <span data-ttu-id="a3fbf-224">Хотя вы можете для оценки локальных данных использовать службу ответа на запросы, вместо нее корпорация Майкрософт рекомендует использовать [надстройку Excel](machine-learning-excel-add-in-for-web-services.md) .</span><span class="sxs-lookup"><span data-stu-id="a3fbf-224">While you can use the Request Response Service for scoring on-premises data, Microsoft recommends using the [Excel Add-in](machine-learning-excel-add-in-for-web-services.md) instead.</span></span> <span data-ttu-id="a3fbf-225">В настоящее время запись в локальную базу данных SQL Server через модуль **Экспорт данных** не поддерживается в экспериментах или опубликованных веб-службах.</span><span class="sxs-lookup"><span data-stu-id="a3fbf-225">Currently, writing to an on-premises SQL Server database through **Export Data** is not supported either in your experiments or published web services.</span></span>
