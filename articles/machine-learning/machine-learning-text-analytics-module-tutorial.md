---
title: "aaaCreate текст analytics моделей в студии машинного обучения Azure | Документы Microsoft"
description: "Как анализа текста toocreate моделей в студии машинного обучения Azure с помощью модулей для предварительной обработки текста, N-грамм или хэширование признаков"
services: machine-learning
documentationcenter: 
author: rastala
manager: jhubbard
editor: 
ms.assetid: 08cd6723-3ae6-4e99-a924-e650942e461b
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/06/2016
ms.author: roastala
ms.openlocfilehash: e3799f37ba54bb2ec8815ecf5ed34e145ffb20e9
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="create-text-analytics-models-in-azure-machine-learning-studio"></a>Создание моделей текстовой аналитики в Студии машинного обучения Azure
Можно использовать toobuild машинного обучения Azure и эксплуатацию моделей анализа текста. Эти модели могут быть полезными, например, при решении проблем с классификацией документов или анализом мнений.

В эксперименте текстовой аналитики, как правило, выполняются следующие действия:

1. Очистка и предварительная обработка набора текстовых данных.
2. Извлечение из предварительно обработанного текста векторов числовых признаков.
3. Обучение модели классификации или регрессии.
4. Оценка и проверка модели hello
5. Развертывание модели tooproduction hello

В данном учебнике эти действия демонстрируются на примере модели анализа мнений с использованием набора данных Amazon Book Reviews (Обзоры книг на Amazon). См. исследовательскую работу "Biographies, Bollywood, Boom-boxes and Blenders: Domain Adaptation for Sentiment Classification" (Биографии, Болливуд, бум-боксы и блендеры: адаптация домена для классификации мнений пользователей), авторы — Джон Блитцер (John Blitzer), Марк Дредзе (Mark Dredze) и Фернандо Перейра (Fernando Pereira); Ассоциация компьютерной лингвистики (ACL), 2007 г. Этот набор данных состоит из оценок в обзоре (1-2 или 4-5) и текста в произвольной форме. Hello цели, toopredict hello проверки оценка: низкий (1 - 2) или high (4-5).

Эксперименты, рассматриваемые в этом учебнике, можно найти в коллекции Cortana Intelligence:

[Predict Book Reviews (Прогнозирование оценок в обзоре книг).](https://gallery.cortanaintelligence.com/Experiment/Predict-Book-Reviews-1)

[Predict Book Reviews - Predictive Experiment (Прогнозирование оценок в обзоре книг — прогнозной эксперимент).](https://gallery.cortanaintelligence.com/Experiment/Predict-Book-Reviews-Predictive-Experiment-1)

## <a name="step-1-clean-and-preprocess-text-dataset"></a>Шаг 1. Очистка и предварительная обработка набора текстовых данных
Мы начинаем hello эксперимент, разделив hello просмотрите оценки на неполадку hello двухклассовой классификации, tooformulate категориальные низким и высоким контейнеров. Для этого мы используем модули [Edit Metadata](https://msdn.microsoft.com/library/azure/dn905986.aspx) (Изменение метаданных) и [Group Categorical Values](https://msdn.microsoft.com/library/azure/dn906014.aspx) (Значения категорий группы).

![Создание метки](./media/machine-learning-text-analytics-module-tutorial/create-label.png)

Очистить hello текста с помощью [предварительной обработки текста](https://msdn.microsoft.com/library/azure/mt762915.aspx) модуля. Очистка Hello снижает шум hello в наборе данных hello, помогают найти наиболее важных функций hello и улучшить hello точность результирующей модели hello. Удаляются стоп-слова (такие как артикли или частицы), числа, специальные знаки, повторяющиеся знаки, адреса электронной почты и URL-адреса. Мы также преобразовать toolowercase текст hello, lemmatize слова hello и определения границ предложений, которые затем помечаются «^ ^ ^» символа в предварительно обработанный текст.

![Preprocess Text](./media/machine-learning-text-analytics-module-tutorial/preprocess-text.png)

Что делать, если хотите toouse пользовательского списка стоп-слов? Его можно передать в качестве дополнительных входных данных. Можно использовать пользовательские C# синтаксис регулярного выражения tooreplace подстрок и удалите слова, часть речи: существительные, глаголы и прилагательные.

После завершения предварительной обработки hello мы разбиение данных hello на обучение и тестовых наборов.

## <a name="step-2-extract-numeric-feature-vectors-from-pre-processed-text"></a>Шаг 2. Извлечение из предварительно обработанного текста векторов числовых признаков
toobuild модели текстовых данных, обычно имеют текст в свободной форме tooconvert в векторы числовых признаков. В этом примере мы используем [извлечь N-грамм функции из текста](https://msdn.microsoft.com/library/azure/mt762916.aspx) модуль tootransform hello toosuch формате. Этот модуль принимает столбец слов, разделенных пробелами, и вычисляет словарь слов, или N-граммы слов, которые отображаются в наборе данных. Затем модуль подсчитывает, сколько раз каждое слово, или N-грамм, встречается в каждой записи, и создает на основании этих подсчетов векторы признаков. В этом учебнике мы устанавливаем too2 размер N-грамм, поэтому наши векторов признаков включить отдельные слова и сочетания из двух последующих слов.

![Извлечение N-грамм](./media/machine-learning-text-analytics-module-tutorial/extract-ngrams.png)

Мы применяем TF * подсчитывает весовой коэффициент tooN-gram IDF (термин частоты Inverse Document Frequency). Этот подход добавляет Вес слов, которые часто встречаются в одной записи, но редки по всему набору данных hello. Другие варианты включают двоичные значения, TF и взвешенные значения диаграммы.

Такие текстовые признаки часто обладают высокой размерностью. Например, если ваш текст состоит из 100 000 уникальных слов, то пространство признаков будет иметь 100 000 размеров, или даже больше (когда используются N-граммы). модуль извлечения N-грамм функции Hello предоставляет ряд параметров tooreduce hello размерности. Вы можете tooexclude слова, которые являются toohave короткий или длинный, или слишком часто или слишком частые особого прогнозируемого значения. В этом учебнике мы исключаем N-граммы, которые встречаются реже чем в 5 записях или чаще чем в 80 % записей.

Кроме того можно использовать только те функции, которые являются наиболее hello коррелированных tooselect выбора компонентов с целевой прогноза. Мы используем возможности 1000 tooselect выбора компонентов хи-квадрат. Словарь hello выбранных слов или N-грамм можно просмотреть, щелкнув hello правой выходные данные модуля извлечения N-грамм.

Как альтернативный подход toousing функции извлечения N-грамм можно использовать модуль хэширование признаков. Однако имейте в виду, что модуль [Функции хэширования](https://msdn.microsoft.com/library/azure/dn906018.aspx) не имеет встроенной функции выбора признаков или взвешенных значений TF*IDF.

## <a name="step-3-train-classification-or-regression-model"></a>Шаг 3. Обучение модели классификации или регрессии
Теперь текст hello был преобразованный toonumeric столбцов признаков. Hello набора данных по-прежнему содержит строковых столбцов из предыдущих стадий, поэтому мы используем Выбор столбцов в наборе данных tooexclude их.

Затем мы используем [Двухклассовой логистической регрессии](https://msdn.microsoft.com/library/azure/dn905994.aspx) toopredict цель: оценка проверки большими или очень маленькими. На этом этапе проблема analytics текст hello преобразованных в задачу регулярного классификации. Можно использовать средства hello, доступные в модели hello tooimprove машинного обучения Azure. Например можно поэкспериментировать с различных классификаторов toofind out как точные результаты, они или hyperparameter СУБД tooimprove hello точности.

![Обучение и оценка](./media/machine-learning-text-analytics-module-tutorial/scoring-text.png)

## <a name="step-4-score-and-validate-hello-model"></a>Шаг 4: Оценка и проверка модели hello
Как проверить hello обученной модели? Мы оценки его hello проверочный набор данных и оценить точность hello. Тем не менее модели hello узнали словаря hello N-грамм и их веса из hello обучающий набор данных. Таким образом следует использовать этот словарь и вес этих компонентов при извлечение функции из проверочных данных, как отличие от словаря hello toocreating заново. Таким образом мы добавить оценки ветви эксперимента hello toohello модуль извлечения функции N-грамм, подключение словаря hello выходные данные из обучающих ветви и режим hello словарь только для tooread. Мы также отключить N-граммы по частоте параметр экземпляром минимальное too1 hello и максимальное too100% фильтрацию hello и отключить Выбор компонентов hello.

После hello текстового столбца на тестовые данные были преобразованы toonumeric столбцов компонентов, не включает строку hello столбцы из предыдущих стадий, например в ветви обучения. Затем с помощью модели оценки модуль toomake прогнозов и оценки модуль tooevaluate hello точности модели.

## <a name="step-5-deploy-hello-model-tooproduction"></a>Шаг 5: Развертывание модели tooproduction hello
модель Hello — tooproduction почти готово toobe развертывания. Если модель развернута как веб-служба, то в качестве входных данных она принимает строку с текстом в произвольной форме, а возвращает прогнозную оценку — "высокая" или "низкая". Он использует текст hello узнали N-грамм словаря tootransform hello toofeatures и обучения модели логистической регрессии toomake прогноз из этих функций. 

tooset копирование прогнозной эксперимента hello мы сначала сохранить словаря N-грамм hello как набор данных, а hello обученной модели логистической регрессии из ветви hello обучения, эксперимента hello. Затем мы сохранить hello эксперимента с помощью «Сохранить как» toocreate граф эксперимента для прогнозирования эксперимента. Модуль разбиения данных hello и ветвь обучения hello мы удаляем из эксперимента hello. Мы подключитесь словаря N-грамм hello ранее сохраненные и tooExtract модель N-грамм функций и модулей модель оценки соответственно. Кроме того, удалить модуль оценки модели hello.

Мы выберите столбцы вставки в набор данных модуля перед столбец метки hello tooremove модуль предварительной обработки текста и снять Выбор параметра «Toodataset столбца Append оценка» в модуле оценки. Таким образом, hello веб-службы не требует метки hello, он пытается toopredict и не выводит на экран входных признаков hello в ответ.

![Прогнозный эксперимент](./media/machine-learning-text-analytics-module-tutorial/predictive-text.png)

Теперь у нас готов эксперимент, который можно опубликовать как веб-службу и вызывать с помощью интерфейсов API "запрос-ответ" или пакетного выполнения.

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о модулях текстовой аналитики см. в [документации MSDN](https://msdn.microsoft.com/library/azure/dn905886.aspx).

