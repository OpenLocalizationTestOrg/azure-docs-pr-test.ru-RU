---
title: "aaaUsing линейной регрессии в машинном обучении | Документы Microsoft"
description: "Сравнение моделей линейной регрессии в Excel и Студии машинного обучения Azure"
metakeywords: 
services: machine-learning
documentationcenter: 
author: garyericson
manager: jhubbard
editor: cgronlun
ms.assetid: 417ae6ab-de4f-4bdd-957a-d96133234656
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/20/2017
ms.author: kbaroni;garye
ms.openlocfilehash: 8716040ad296053a72fb06c7c9660a186123ac15
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="using-linear-regression-in-azure-machine-learning"></a>Использование линейной регрессии в Машинном обучении Azure
> *Кейт Барони* (Kate Baroni) и *Бен Боутмен* (Ben Boatman) — архитекторы корпоративных решений в Научно-инновационном центре анализа данных корпорации Майкрософт. В этой статье они описывают порядок работы с перенос существующего регрессии анализа набора tooa облачного решения с помощью машинного обучения Azure. 
> 
> 

&nbsp; 

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

## <a name="goal"></a>Цель
У нашего проекта было две цели: 

1. Используйте прогнозирующего анализа точности hello tooimprove ежемесячные доход проекций нашей организации 
2. Использовать tooconfirm машинного обучения Azure, оптимизации, увеличение скорости и масштаб результатов. 

Как и множество других компаний, наша организация прогнозирует свой ежемесячный доход. Нашей небольшой группой бизнес-аналитики был задачу с помощью процесса hello toosupport машинного обучения Azure и повысить точность прогноза. несколько месяцев сбора данных из нескольких источников и запуска hello атрибуты данных с помощью статистического анализа, определение прогнозированию продаж соответствующие tooservices ключевых атрибутов, потраченных командой Hello. следующим шагом Hello было моделей toobegin статистические регрессии для создания прототипов hello данными в Excel. В течение нескольких недель мы должны были модель регрессии Excel, которая больше текущего поля hello и финансового прогнозирования процессов. Это стало результат прогноза hello базовых показателей. 

Мы затем перехватил hello следующий шаг toomoving нашей прогнозной аналитики tooAzure toofind машинного обучения, как улучшить машинного обучения на производительность прогнозирования.

## <a name="achieving-predictive-performance-parity"></a>Достижение соответствия производительности прогнозирования
Наш приоритетной был tooachieve четность между моделями регрессии машинного обучения и Excel. Учитывая hello и те же данные и hello же разделения для обучающих и проверочных данных, нам необходимо было tooachieve прогнозирования производительности четность между Excel и машинного обучения. Сначала нам не удалось выполнить эту задачу. модель Excel Hello превзошли hello машинного обучения модели. Hello произошел из-за отсутствия tooa понимать основы инструмента hello в машинном обучении. После синхронизации с группой разработчиков машинного обучения hello мы приобретенные лучше понять hello базовый параметр требуется для нашей наборов данных и достичь четность между двумя моделями hello. 

### <a name="create-regression-model-in-excel"></a>Создание регрессионной модели в Excel
Наш Регрессия Excel используется модель стандартных линейной регрессии hello hello пакета анализа в Excel. 

Мы вычисляется *среднее абсолютное % ошибка* и использования его в качестве меры производительности hello hello модели. Затрачено времени: 3 месяца tooarrive в работе модели с помощью Excel. Мы оперативный большую часть hello обучения в студии машинного обучения эксперимент, который в конечном итоге было полезным в общее представление о требованиях hello.

### <a name="create-comparable-experiment-in-azure-machine-learning"></a>Создание сравнительного эксперимента в Машинном обучении Azure
Эти действия toocreate мы следовали нашей эксперимента в студии машинного обучения: 

1. Отправленный hello dataset в виде tooMachine файл csv Learning Studio (очень небольшой файл)
2. Создать новый экспериментов и использовать hello [Выбор столбцов в наборе данных] [ select-columns] tooselect модуль hello и те же возможности данные, используемые в Excel 
3. Используемые hello [разбиение данных] [ split] модуля (с *относительное выражение* режим) данных toodivide hello в hello же обучающих наборах данных, которые выполняются в Excel 
4. Поэкспериментировали с hello [линейной регрессии] [ linear-regression] модуля (по умолчанию параметры только), описаны и сравнивать модели регрессии Excel tooour результаты hello

### <a name="review-initial-results"></a>Просмотр изначальных результатов
Сначала модель Excel hello четко превзошли hello студии машинного обучения модели: 

|  | Excel | Студия |
| --- |:---:|:---:|
| Производительность | | |
| <ul style="list-style-type: none;"><li>Скорректированный коэффициент детерминации R-квадрат</li></ul> |0,96 |Недоступно |
| <ul style="list-style-type: none;"><li>Коэффициент <br />определения</li></ul> |Недоступно |0,78<br />(низкая точность) |
| Средняя абсолютная погрешность |9 500 000 долл. США |19 400 000 долл. США |
| Средняя абсолютная погрешность (в %) |6,03 % |12,2 % |

Когда мы запустили наши процесса и результатов, hello разработчики и специалисты по анализу данных команды hello машинного обучения, они быстро предоставленные полезные советы. 

* При использовании hello [линейной регрессии] [ linear-regression] модуля в студии машинного обучения, предоставляются два метода:
  * метод градиентного спуска в режиме онлайн — может подойти для крупномасштабных проблем;
  * Обычный метод наименьших квадратов: Этот способ hello, большинство считают при их услышать линейной регрессии. Это самый оптимальный выбор для небольших наборов данных.
* Рассмотрите возможность настройки параметра tooimprove hello вес Регуляризации L2 производительности. По умолчанию имеет значение too0.001, но для нашего небольшого набора данных задается его too0.005 tooimprove производительности. 

### <a name="mystery-solved"></a>Решение найдено!
Мы примененный hello рекомендации, мы достичь hello же базовый уровень производительности в студии машинного обучения с помощью Excel: 

|  | Excel | Студия (первоначальная версия) | Студия с методом наименьших квадратов |
| --- |:---:|:---:|:---:|
| Значение с подписью |Фактические значения (числовые) |—||— |—||— |
| Ученик |Excel -> "Анализ данных" -> "Регрессия" |Линейная регрессия |Линейная регрессия |
| Параметры ученика |Недоступно |Значения по умолчанию |Метод наименьших квадратов<br />L2 = 0,005 |
| Набор данных |26 строк, 3 признака, 1 метка. Все значения числовые. |—||— |—||— |
| Разделение: обучение |Excel обучена на hello строк сначала, 18, проверяется на hello последнего 8 строк. |—||— |—||— |
| Разделение: тестирование |Excel формулу регрессии toohello последнего 8 строк |—||— |—||— |
| **Производительность** | | | |
| Скорректированный коэффициент детерминации R-квадрат |0,96 |Недоступно | |
| Коэффициент детерминации |Недоступно |0,78 |0,952049 |
| Средняя абсолютная погрешность |9 500 000 долл. США |19 400 000 долл. США |9 500 000 долл. США |
| Средняя абсолютная погрешность (в %) |<span style="background-color: 00FF00;"> 6,03 %</span> |12,2 % |<span style="background-color: 00FF00;"> 6,03 %</span> |

Кроме того коэффициенты hello Excel также сравнивать toohello веса функций в hello Azure обученной модели:

|  | Коэффициенты Excel | Весовые коэффициенты компонентов Azure |
| --- |:---:|:---:|
| Отрезок/смещение |19470209,88 |19328500 |
| Признак А |0,832653063 |0,834156 |
| Признак Б |11071967,08 |11007300 |
| Признак В |25383318,09 |25140800 |

## <a name="next-steps"></a>Дальнейшие действия
Нам необходимо было веб-службы машинного обучения tooconsume hello в Excel. Наш бизнес-аналитики используют Excel и мы необходимости hello toocall способом машинного обучения веб-службы со строкой данных Excel и вернуть его hello прогнозируемое значение tooExcel. 

Мы также исправили toooptimize нашей модели с помощью параметров hello и алгоритмы, доступные в студии машинного обучения.

### <a name="integration-with-excel"></a>Интеграция с Excel
Наши решения можно было toooperationalize нашей регрессии машинное Обучение модели путем создания веб-службы из обученной модели hello. В течение нескольких минут hello веб-службы был создан, и мы могли бы вызвать его непосредственно из Excel tooreturn доход прогнозируемое значение. 

Hello *панель мониторинга Web Services* раздел содержит загружаемые книги Excel. Книга Hello предусмотрен готовых hello информации веб-службы API и схемы внедренные. При нажатии кнопки *загрузить книгу Excel*, hello книга будет открыта, и его можно сохранить tooyour локального компьютера. 

![][1]

С книгой Привет открыть скопируйте предопределенные параметры в hello синий раздел параметров, как показано ниже. После ввода параметров hello Excel вызывает toohello веб-службы машинного обучения и hello прогнозируемые метки оцененных будет отображаться в разделе hello зеленый прогнозируемые значения. Hello книги по-прежнему toocreate прогнозы для параметров на основании обученной модели для всех элементов строк, указанных в разделе параметров. Дополнительные сведения о том, как toouse эту возможность, см. в разделе [Azure Machine Learning веб-служба на Excel](machine-learning-consuming-from-excel.md). 

![][2]

### <a name="optimization-and-further-experiments"></a>Оптимизация и дальнейшие эксперименты
Теперь, когда имеется базовый план с нашей модели Excel мы перешли упреждающего toooptimize нашей модели машинного обучения линейной регрессии. Мы использовали модуль hello [Выбор компонентов на основе фильтра] [ filter-based-feature-selection] tooimprove на подмножества элементов исходных данных и его помогли нам добиться выигрыша в производительности 4.6% означает абсолютная погрешность. Для будущих проектов мы будем использовать эту функцию, которая может сохранить нам недель в просмотре данных toofind атрибуты hello правильный набор возможностей toouse для моделирования. 

Далее мы планируем tooinclude дополнительные алгоритмы, такие как [Байесовской] [ bayesian-linear-regression] или [повышенного дерева принятия решений] [ boosted-decision-tree-regression] в нашем toocompare эксперимента производительность. 

Следует tooexperiment с регрессии tootry хороший набор данных является hello регрессии эффективность энергии образец набора данных, имеет множество числовых атрибутов. набор данных Hello предоставляется как часть hello образцы наборов данных в студии машинного обучения. Можно использовать различные обучающих модулей toopredict либо отопления или охлаждения нагрузку. Сравнение производительности различных регрессии узнает от hello энергопотребление набора данных прогноз для hello целевой переменной нагрузке охлаждения — Hello диаграмме ниже: 

| Модель | Средняя абсолютная погрешность | Среднеквадратическая погрешность | Относительная абсолютная погрешность | Относительная среднеквадратическая погрешность | Коэффициент детерминации |
| --- | --- | --- | --- | --- | --- |
| Увеличивающееся дерево принятия решений |0,930113 |1,4239 |0,106647 |0,021662 |0,978338 |
| Линейная регрессия (метод градиентного спуска) |2,035693 |2,98006 |0,233414 |0,094881 |0,905119 |
| Регрессия нейронной сети |1,548195 |2,114617 |0,177517 |0,047774 |0,952226 |
| Линейная регрессия (метод наименьших квадратов) |1,428273 |1,984461 |0,163767 |0,042074 |0,957926 |

## <a name="key-takeaways"></a>Общие выводы
Параллельное выполнение экспериментов Машинного обучения Azure и регрессии Excel позволило узнать много нового. Создание модели базовой hello в Excel и его сравнения с использованием машинного обучения toomodels [линейной регрессии] [ linear-regression] помогло нам узнать машинного обучения Azure, и мы обнаружили возможности tooimprove данных Выбор и модели производительности. 

Мы обнаружили, что это рекомендуется toouse [Выбор компонентов на основе фильтра] [ filter-based-feature-selection] tooaccelerate проекты прогноз на будущее. Применение данных tooyour выбора компонентов, можно создать улучшенную модель машинного обучения с лучшую общую производительность. 

Hello возможность tootransfer hello прогнозной аналитической прогнозирования из машинного обучения tooExcel systemically позволяет существенное увеличение количества в toosuccessfully hello возможность получения результатов аудиторией пользователей tooa широкие бизнес. 

## <a name="resources"></a>Ресурсы
Ниже перечислены некоторые ресурсы, которые помогут вам в работе с регрессией. 

* Регрессия в Excel. Если вы никогда не работали с регрессией в Excel, этот учебник упростит задачу: [http://www.excel-easy.com/examples/regression.html](http://www.excel-easy.com/examples/regression.html)
* Сравнение регрессии и прогнозирования. Tyler Chessman написал в блог статьи, о том, как toodo прогнозирование временных рядов в Excel, который содержит описание хорошо начинающих линейной регрессии. Здесь также представлено хорошее описание линейной регрессии для начинающих: [http://sqlmag.com/sql-server-analysis-services/understanding-time-series-forecasting-concepts](http://sqlmag.com/sql-server-analysis-services/understanding-time-series-forecasting-concepts). 
* Линейная регрессия по методу наименьших квадратов. Недостатки, проблемы и ошибки. Введение в регрессию и ее обсуждение см. по адресу [http://www.clockbackward.com/2009/06/18/ordinary-least-squares-linear-regression-flaws-problems-and-pitfalls/](http://www.clockbackward.com/2009/06/18/ordinary-least-squares-linear-regression-flaws-problems-and-pitfalls/).

[1]: ./media/machine-learning-linear-regression-in-azure/machine-learning-linear-regression-in-azure-1.png
[2]: ./media/machine-learning-linear-regression-in-azure/machine-learning-linear-regression-in-azure-2.png


<!-- Module References -->
[bayesian-linear-regression]: https://msdn.microsoft.com/library/azure/ee12de50-2b34-4145-aec0-23e0485da308/
[boosted-decision-tree-regression]: https://msdn.microsoft.com/library/azure/0207d252-6c41-4c77-84c3-73bdf1ac5960/
[filter-based-feature-selection]: https://msdn.microsoft.com/library/azure/918b356b-045c-412b-aa12-94a1d2dad90f/
[linear-regression]: https://msdn.microsoft.com/library/azure/31960a6f-789b-4cf7-88d6-2e1152c0bd1a/
[select-columns]: https://msdn.microsoft.com/library/azure/1ec722fa-b623-4e26-a44e-a50c6d726223/
[split]: https://msdn.microsoft.com/library/azure/70530644-c97a-4ab6-85f7-88bf30a8be5f/

