---
title: "Подготовка виртуальной машины Windows для обработки и анализа данных в Azure | Документация Майкрософт"
description: "Настройка и создание виртуальной машины в Azure для обработки и анализа данных и машинного обучения."
services: machine-learning
documentationcenter: 
author: bradsev
manager: cgronlun
editor: cgronlun
ms.assetid: e1467c0f-497b-48f7-96a0-7f806a7bec0b
ms.service: machine-learning
ms.workload: data-services
ms.devlang: na
ms.topic: article
ms.date: 09/10/2017
ms.author: bradsev
ms.openlocfilehash: d71d8e44d0327515ed302c5c902ce87587e36c7d
ms.sourcegitcommit: 9a8b9a24d67ba7b779fa34e67d7f2b45c941785e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2018
---
# <a name="provision-the-windows-data-science-virtual-machine-on-azure"></a>Подготовка виртуальной машины Windows для обработки и анализа данных в Azure
Виртуальная машина Майкрософт для обработки и анализа данных — это образ виртуальной машины (VM) Windows Azure, в котором предварительно установлен и настроен ряд распространенных средств, обычно необходимых для анализа данных и машинного обучения. К этим средствам относятся:

* [Azure Machine Learning](https://azure.microsoft.com/services/machine-learning-services/) Workbench;
* [Microsoft ML Server](https://docs.microsoft.com/machine-learning-server/index) Developer Edition;
* дистрибутив Anaconda Python;
* Jupyter Notebook (с ядрами R, Python и PySpark);
* выпуск Visual Studio Community;
* Power BI Desktop;
* SQL Server 2017 Developer Edition;
* автономный экземпляр Spark для локальной разработки и тестирования;
* [JuliaPro](https://juliacomputing.com/products/juliapro.html);
* Инструменты машинного обучения и анализа данных
  * Платформы глубокого обучения: на виртуальной машине представлен широкий набор платформ искусственного интеллекта, включая [Microsoft Cognitive Toolkit](https://www.microsoft.com/en-us/cognitive-toolkit/), [TensorFlow](https://www.tensorflow.org/), [Chainer](https://chainer.org/), mxNet и Keras.
  * [Vowpal Wabbit](https://github.com/JohnLangford/vowpal_wabbit): система быстрого машинного обучения, поддерживающая такие методы, как онлайн-обучение, хэширование, общее сокращение, сокращение, обучение поиску, активное и интерактивное обучение.
  * [XGBoost](https://xgboost.readthedocs.org/en/latest/): инструмент, предоставляющий быструю и точную реализацию повышенного дерева.
  * [Rattle](http://rattle.togaware.com/) (аналитический инструмент R для легкого обучения): инструмент, который облегчает начало работы с анализом данных и машинным обучением в R с помощью графического пользовательского интерфейса, в котором осуществляется исследование данных и моделирование с автоматическим созданием кода R.
  * [Weka](http://www.cs.waikato.ac.nz/ml/weka/): программное обеспечение для визуального интеллектуального анализа данных и машинного обучения, написанное на языке Java.
  * [Apache Drill](https://drill.apache.org/): обработчик SQL-запросов без схемы для Hadoop, NoSQL и облачного хранилища.  Поддерживает интерфейсы ODBC и JDBC для активации запросов к NoSQL, а также файлы из стандартных средств бизнес-аналитики, таких как PowerBI, Excel и Tableau.
* Библиотеки R и Python для машинного обучения Azure и других служб Azure
* Git, включая Git Bash, для работы с репозиториями исходного кода, такими как GitHub и Visual Studio Team Services.
* Порты Windows для нескольких популярных служебных программ командной строки Linux (включая awk, sed, perl, grep, find, wget, curl и др.), доступные в командной строке. 

Анализ данных включает выполнение следующих задач:

1. поиск, загрузка и предварительная обработка данных;
2. построение и тестирование моделей;
3. развертывание моделей для использования в приложениях для анализа.

Для выполнения этих задач специалисты по обработке и анализу данных используют широкий набор инструментов. Поиск правильной версии программного обеспечения и его последующая загрузка и установка могут занимать довольно много времени. Виртуальная машина Майкрософт для обработки и анализа данных позволяет упростить выполнение этих задач, предоставляя готовый образ, который можно подготовить в Azure. В этом образе уже будут предварительно установлены и настроены все популярные инструменты. 

Виртуальная машина Майкрософт для обработки и анализа данных придает значительный импульс вашему аналитическому проекту. Она позволяет работать над задачами, используя различные языки, включая R, Python, SQL и C#. Visual Studio использует удобный интерфейс IDE для разработки и тестирования кода. Пакет SDK Azure в виртуальной машине позволяет создавать приложения с помощью различных служб на облачной платформе Майкрософт. 

Плата за программное обеспечение для этого образа виртуальной машины не взимается. Вы платите только за использование Azure. Сумма зависит от размера виртуальной машины, которая будет подготовлена. Дополнительные сведения об оплате вычислительных ресурсов см. в разделе "Сведения о ценах" на странице [Data Science Virtual Machine](https://azuremarketplace.microsoft.com/marketplace/apps/microsoft-ads.windows-data-science-vm?tab=PlansAndPrice) (Виртуальная машина для обработки и анализа данных). 

## <a name="other-versions-of-the-data-science-virtual-machine"></a>Другие версии виртуальных машин для обработки и анализа данных
Доступен и образ [Ubuntu](dsvm-ubuntu-intro.md), содержащий множество аналогичных инструментов, а также несколько дополнительных платформ глубокого обучения. Также доступен образ [CentOS](linux-dsvm-intro.md). Кроме того, мы предлагаем виртуальные машины для обработки и анализа данных под управлением [выпуска Windows Server 2012](https://azuremarketplace.microsoft.com/marketplace/apps/microsoft-ads.standard-data-science-vm). Но некоторые средства доступны только в выпуске Windows Server 2016.  За исключением этого, сведения в настоящей статье также применимы к выпуску Windows Server 2012.

## <a name="prerequisites"></a>Необходимые компоненты
Прежде чем создавать виртуальную машину Майкрософт для обработки и анализа данных, необходимо убедиться в наличии следующих компонентов.

* **Подписка Azure** — сведения о ее получении см. на странице [создания бесплатной учетной записи Azure](http://azure.com/free).


## <a name="create-your-microsoft-data-science-virtual-machine"></a>Создание виртуальной машины Майкрософт для обработки и анализа данных
Ниже приведены шаги по созданию экземпляра виртуальной машины Майкрософт для обработки и анализа данных.

1. Перейдите к списку виртуальных машин на [портале Azure](https://portal.azure.com/#create/microsoft-ads.windows-data-science-vmwindows2016).
2. В нижней части страницы нажмите кнопку **Создать**. Откроется мастер.![configure-data-science-vm](./media/provision-vm/configure-data-science-virtual-machine.png)
3. Мастеру, который используется для создания виртуальной машины Майкрософт для обработки и анализа данных, требуются **входные данные** для всех **четырех шагов**, перечисленных в правой части этого изображения. Ниже приведено описание входных данных, необходимых для настройки на каждом из шагов.
   
   1. **Основы**
      
      1. **Имя**— имя создаваемого сервера для обработки и анализа данных.
      2. **Тип диска виртуальной машины**: выберите SSD или HDD. Для GPU (серии NC) выберите тип диска **HDD**. 
      3. **Имя пользователя**— идентификатор учетной записи администратора.
      4. **Пароль**— пароль учетной записи администратора.
      5. **Подписка**— при наличии нескольких подписок выберите ту, в которой будет создана виртуальная машина и для которой будет взиматься плата.
      6. **Группа ресурсов**— вы можете создать новую группу или использовать существующую.
      7. **Расположение**— выберите наиболее подходящий центр обработки данных. Обычно это центр обработки данных, в котором размещена большая часть ваших данных, или ближайший к вашему физическому расположению центр для наиболее быстрого доступа к сети.
   2. **Размер**. Выберите один из типов серверов, соответствующий вашим функциональным требованиям и выделенному бюджету. Дополнительные варианты размера виртуальной машины можно увидеть, щелкнув "Просмотреть все".
   3. **Параметры**:
      
      1. **Использование управляемых дисков**: выберите управляемый диск, если требуется управление дисками для виртуальной машины средствами Azure.  В противном случае укажите новую или существующую учетную запись хранения. 
      2. **Другие параметры**. В большинстве случаев используются значения по умолчанию. Если нужно использовать значения, отличные от значений по умолчанию, вы можете навести указатель мыши на информационную ссылку, чтобы получить справку по конкретному полю.
   4. **Сводка.** Убедитесь, что все сведения введены правильно, и щелкните **Создать**. **Примечание.** За использование виртуальной машины не взимается дополнительная плата, кроме платы за размер сервера, выбранный на шаге **Размер**. 

> [!NOTE]
> Подготовка занимает 10–20 минут. Состояние подготовки отображается на портале Azure.
> 
> 

## <a name="how-to-access-the-microsoft-data-science-virtual-machine"></a>Доступ к виртуальной машине Майкрософт для обработки и анализа данных
После создания виртуальной машины можно подключиться к ней с помощью удаленного рабочего стола, используя учетную запись администратора, настроенную в разделе **Основные сведения** . 

После создания и подготовки виртуальной машины вы можете начать использовать установленные и настроенные на ней средства. Для многих средств предусмотрены значки на рабочем столе и элементы в меню "Пуск". 


## <a name="tools-installed-on-the-microsoft-data-science-virtual-machine"></a>Средства, установленные на виртуальной машине Майкрософт для обработки и анализа данных

### <a name="azure-machine-learning-workbench"></a>Azure Machine Learning Workbench;

Azure Machine Learning Workbench — это классическое приложение с интерфейсом командной строки. Встроенный процесс подготовки данных Workbench обучается шагам подготовки по мере их выполнения. Кроме того, приложение предоставляет функции управления проектами, журнала выполнения и интеграции записной книжки, которые повышают производительность. Вы можете использовать лучшие платформы с открытым кодом, такие как TensorFlow, Cognitive Toolkit, Spark ML и scikit-learn, чтобы разрабатывать собственные модели. В DSVM на рабочем столе представлен значок (InstallAMLFromLocal) для локального извлечения Azure Machine Learning Workbench в каталог %LOCALAPPDATA% для каждого пользователя. Для работы с Workbench каждый пользователь должен однократно выполнить двойной щелчок значка InstallAMLFromLocal на рабочем столе, чтобы установить свой экземпляр Workbench. В службе "Машинное обучение Azure" также создается и используется среда Python для каждого пользователя. Она извлекается в расположение %LOCALAPPDATA%\amlworkbench\python.

### <a name="microsoft-ml-server-developer-edition"></a>Microsoft ML Server Developer Edition
Для использования корпоративных библиотек Майкрософт в масштабируемом коде R или Python для анализа данных на виртуальной машине установлен выпуск Microsoft ML Server Developer Edition (прежнее название — Microsoft R Server). Microsoft ML Server — это доступная для развертывания аналитическая платформа корпоративного уровня, совместимая с R и Python. Она обеспечивает масштабируемость, коммерческую поддержку и безопасность. Благодаря разнообразным возможностям статистической обработки больших данных, прогнозного моделирования и машинного обучения ML Server поддерживает все аналитические операцие: просмотр, анализ, визуализацию и моделирование. Платформа Microsoft ML Server позволяет использовать и расширять открытый код R и Python. Она полностью совместима со скриптами и функциями R и Python, а также с пакетами CRAN, PIP и Conda для анализа данных на корпоративном уровне. Он также устраняет ограничения памяти R с открытым исходным кодом путем добавления параллельной и фрагментарной обработки данных. Таким образом пользователи получают возможность анализа данных, размер которых намного превышает объем основной памяти.  Выпуск Visual Studio Community, включенный в виртуальную машину, содержит расширения R Tools for Visual Studio и Python Tools for Visual Studio, которые предоставляют полную среду IDE для работы с R или Python. Кроме того, на виртуальной машине доступны другие среды IDE, такие как [RStudio](http://www.rstudio.com) и [выпуск PyCharm Community](https://www.jetbrains.com/pycharm/). 

### <a name="python"></a>Python
Для разработки на языке Python установлен дистрибутив Anaconda Python версий 2.7 и 3.5. Этот дистрибутив содержит базовую версию Python, а также примерно 300 наиболее популярных математических и инженерных пакетов и пакетов аналитики данных. Можно использовать средства Python для Visual Studio (PTVS), установленные в выпуске Visual Studio 2015 Community, или одну из сред IDE, объединенную с Anaconda, например IDLE или Spyder. Их можно запустить, выполнив поиск на панели поиска (нажмите клавиши **WIN** + **S**).

> [!NOTE]
> Чтобы инструменты Python для Visual Studio указывали на Anaconda Python 2.7 и 3.5, необходимо создать пользовательские среды для каждой версии. Чтобы настроить пути сред в выпуске Visual Studio 2015 Community, последовательно выберите **Tools** (Инструменты)  ->  **Python Tools** (Инструменты Python)  ->  **Python Environments** (Среды Python), а затем нажмите кнопку **+ Custom** (+ Настраиваемая). 
> 
> 

Anaconda Python 2.7 устанавливается в папку C:\Anaconda, а Anaconda Python 3.5 — в папку С:\Anaconda\envs\py35. Подробные указания см. в [документации по PTVS](https://github.com/Microsoft/PTVS/wiki/Selecting-and-Installing-Python-Interpreters#hey-i-already-have-an-interpreter-on-my-machine-but-ptvs-doesnt-seem-to-know-about-it). 

### <a name="jupyter-notebook"></a>Портативный компьютер Jupyter
Дистрибутив Anaconda также содержит записную книжку Jupyter, среду для совместного использования кода и анализа. На сервере записной книжки Jupyter предварительно настроены ядра Python 2.7, Python 3.5, PySpark, Julia и R. На рабочем столе есть значок "Записная книжка Jupyter", с помощью которого можно запустить сервер Jupyter и браузер для доступа к серверу записной книжки. 

> [!NOTE]
> При появлении любых предупреждений о сертификатах нажмите кнопку "Продолжить". 
> 
> 

Мы также включили несколько примеров записных книжек в Python и R. Как только вы получите доступ к Jupyter, можно найти записные книжки, демонстрирующие способы работы с Microsoft ML Server, службами ML в SQL Server (внутренняя аналитика базы данных), Python, Microsoft Cognitive ToolKit Tensorflow и другими технологиями Azure. Ссылки на примеры можно найти на домашней странице записной книжки, войдя в записную книжку Jupyter с помощью пароля, созданного на предыдущем шаге. 

### <a name="visual-studio-2017-community-edition"></a>Выпуск Visual Studio Community 2017
На виртуальной машине установлен выпуск Visual Studio Community. Это бесплатная версия популярного IDE от Майкрософт, которую можно использовать для ознакомления, а также для небольших групп. Условия лицензионного соглашения вы можете просмотреть [здесь](https://www.visualstudio.com/support/legal/mt171547).  Откройте Visual Studio, дважды щелкнув значок на рабочем столе или выбрав соответствующий пункт в меню **Пуск** . Кроме того, вы можете выполнить поиск программ следующим образом: нажмите клавиши **WIN** + **S** и введите запрос "Visual Studio". Выполнив вход, вы сможете создавать проекты, используя такие языки, как C#, Python, R и node.js. Кроме того, установлены подключаемые модули, облегчающие работу со службами Azure, например каталог данных Azure, Azure HDInsight (Hadoop, Spark) и Azure Data Lake. 

> [!NOTE]
> Может появиться сообщение о том, что период ознакомления истек. Чтобы получить доступ к выпуску Visual Studio Community, введите учетные данные учетной записи Майкрософт или создайте бесплатную учетную запись. 
> 
> 

### <a name="sql-server-2017-developer-edition"></a>SQL Server 2017 Developer Edition
На виртуальной машине предоставляется версия для разработчиков SQL Server 2017 со службами ML для выполнения внутренней аналитики базы данных с использованием R или Python. Службы ML предоставляют платформу для разработки и развертывания аналитических приложений. Вы можете воспользоваться этими функциональными и мощными языками, а также множеством пакетов, предоставляемых сообществом, для создания моделей и формирования прогнозов для данных SQL Server. Так как службы ML (в базе данных) интегрируют языки R и Python в SQL Server, это позволяет поддерживать тесный контакт между аналитикой и данными. При этом сокращаются затраты и уменьшаются риски для системы безопасности, связанные с перемещением данных.

> [!NOTE]
> Выпуск для разработчиков SQL Server предназначен только для разработки и тестирования. Для его использования в рабочей среде требуется лицензия. 
> 
> 

Для доступа к серверу SQL Server запустите **SQL Server Management Studio**. Имя виртуальной машины используется в качестве имени сервера. При входе от имени администратора в ОС Windows используйте проверку подлинности Windows. Выполнив вход в SQL Server Management Studio, вы можете создавать других пользователей и базы данных, импортировать данные и выполнять запросы SQL. 

Чтобы включить внутреннюю аналитику базы данных с использованием служб SQL ML, войдите в систему с правами администратора сервера, а затем один раз выполните в SQL Server Management Studio следующую команду: 

        CREATE LOGIN [%COMPUTERNAME%\SQLRUserGroup] FROM WINDOWS 

        (Please replace the %COMPUTERNAME% with your VM name)


### <a name="azure"></a>Таблицы Azure
На виртуальной машине установлено несколько инструментов Azure.

* Имеется ярлык на рабочем столе для доступа к документации по пакету SDK для Azure. 
* **AzCopy**используется для перемещения данных в учетную запись хранения Microsoft Azure и из нее. Чтобы ознакомиться со сведениями об использовании, введите **Azcopy** в командной строке. 
* **Microsoft Azure Storage Explorer**используется для просмотра объектов, сохраненных в учетной записи хранения Azure, а также для перемещения данных в службу хранилища Azure и обратно. Для доступа к этому инструменту можно ввести **Storage Explorer** в поле поиска или найти его в меню "Пуск" в Windows. 
* **Adlcopy**используется для перемещения данных в Azure Data Lake. Чтобы ознакомиться со сведениями об использовании, введите **adlcopy** в командной строке. 
* **dtui** используется для перемещения данных в Azure Cosmos DB (базу данных NoSQL в облаке) и обратно. Введите **dtui** в командной строке. 
* **Integration Runtime в фабрике данных Azure** позволяет перемещать данные между локальными источниками данных и облаком. Он используется в таких инструментах, как фабрика данных Azure. 
* **Microsoft Azure PowerShell** — инструмент, используемый для управления ресурсами Azure на языке сценариев PowerShell, также установлен на вашей виртуальной машине. 

### <a name="power-bi"></a>Power BI
Для создания панелей мониторинга и реализации широких возможностей визуализации установлено приложение **Power BI Desktop**. Используйте это средство для извлечения данных из различных источников, создания панелей мониторинга и отчетов и их публикации в облаке. Дополнительные сведения см. на сайте [Power BI](http://powerbi.microsoft.com). Power BI Desktop можно найти в меню "Пуск". 

> [!NOTE]
> Для доступа к Power BI необходима учетная запись Office 365. 
> 
> 

## <a name="additional-microsoft-development-tools"></a>Дополнительные средства разработки Майкрософт
Для поиска и скачивания других инструментов разработки Майкрософт можно использовать [**установщик веб-платформы Майкрософт**](https://www.microsoft.com/web/downloads/platform.aspx). Ярлык этого средства также находится на рабочем столе виртуальной машины Майкрософт для обработки и анализа данных.  

## <a name="important-directories-on-the-vm"></a>Важные каталоги на виртуальной машине
| Элемент | Каталог |
| --- | --- |
| Конфигурации сервера записной книжки Jupyter |C:\ProgramData\jupyter |
| Корневой каталог примеров записных книжек Jupyter |c:\dsvm\notebooks |
| Другие примеры |c:\dsvm\samples |
| Anaconda (по умолчанию: Python 2.7) |c:\Anaconda |
| Среда Anaconda Python 3.5 |c:\Anaconda\envs\py35 |
| Отдельный сервер Microsoft ML Server Python  | C:\Program Files\Microsoft\ML Server\PYTHON_SERVER |
| Экземпляр R по умолчанию (отдельный сервер ML Server) |C:\Program Files\Microsoft\ML Server\R_SERVER |
| Каталог экземпляров служб SQL ML (в базе данных) |C:\Program Files\Microsoft SQL Server\MSSQL14.MSSQLSERVER |
| Azure Machine Learning Workbench (на пользователя) | %localappdata%\amlworkbench | 
| Прочие инструменты |c:\dsvm\tools |

> [!NOTE]
> В экземплярах виртуальной машины Майкрософт для обработки и анализа данных, предшествующих версии 1.5.0 (созданных до 3 сентября 2016 г.), структура каталогов немного отличалась от указанной в предыдущей таблице. 
> 
> 

## <a name="next-steps"></a>Дальнейшие действия
Ниже приведены некоторые дальнейшие действия для продолжения обучения. 

* Просмотреть различные средства обработки и анализа данных на виртуальной машине для анализа данных можно, щелкнув меню "Пуск" и проверив установленные средства в меню.
* Дополнительные сведения о Службах машинного обучения Azure и Machine Learning Workbench см. в [кратком руководстве и инструкциях](https://docs.microsoft.com/azure/machine-learning/preview/) по использованию продукта. 
* Перейдите к каталогу **C:\Program Files\Microsoft\ML Server\R_SERVER\library\RevoScaleR\demoScripts**, в котором можно найти примеры использования библиотеки RevoScaleR в R, поддерживающей анализ данных на корпоративном уровне.  
* Ознакомьтесь со статьей [10 задач, которые можно выполнить в виртуальной машине для обработки и анализа данных](http://aka.ms/dsvmtenthings).
* Изучите систематический подход к созданию комплексных аналитических решений с помощью [процесса обработки и анализа данных группы](https://azure.microsoft.com/documentation/learning-paths/data-science-process/).
* В [коллекции решений ИИ Azure](http://gallery.cortanaintelligence.com) можно найти примеры для машинного обучения и анализа данных, в которых используется служба "Машинное обучение Azure" и связанные с ней службы данных Azure. Мы также добавили значок на рабочий стол и элемент в меню **Пуск** для этой коллекции на виртуальной машине.

