---
title: "Перемещение данных в хранилище BLOB-объектов Azure и из него с помощью соединителей SSIS | Документация Майкрософт"
description: "Перемещение данных в хранилище BLOB-объектов Azure и из него с помощью соединителей SSIS."
services: machine-learning,storage
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 96a1b5fb-34d1-4b9b-8d99-2bb8289e0398
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/24/2017
ms.author: bradsev
ms.openlocfilehash: 575beaea5443919bd9728016bf100b43de8e4aab
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="move-data-to-or-from-azure-blob-storage-using-ssis-connectors"></a><span data-ttu-id="24078-103">Перемещение данных в хранилище BLOB-объектов Azure и из него с помощью соединителей SSIS</span><span class="sxs-lookup"><span data-stu-id="24078-103">Move data to or from Azure Blob Storage using SSIS connectors</span></span>
<span data-ttu-id="24078-104">[Пакет дополнительных компонентов SQL Server Integration Services для Azure](https://msdn.microsoft.com/library/mt146770.aspx) содержит компоненты для подключения к Azure, передачи данных между Azure и локальными источниками данных, а также для обработки данных, хранящихся в Azure.</span><span class="sxs-lookup"><span data-stu-id="24078-104">The [SQL Server Integration Services Feature Pack for Azure](https://msdn.microsoft.com/library/mt146770.aspx) provides components to connect to Azure, transfer data between Azure and on-premises data sources, and process data stored in Azure.</span></span>

[!INCLUDE [blob-storage-tool-selector](../../includes/machine-learning-blob-storage-tool-selector.md)]

<span data-ttu-id="24078-105">После перемещения в облако локальные данные становятся доступными из любых служб Azure. Теперь можно использовать все возможности набора технологий Azure.</span><span class="sxs-lookup"><span data-stu-id="24078-105">Once customers have moved on-premises data into the cloud, they can access it from any Azure service to leverage the full power of the suite of Azure technologies.</span></span> <span data-ttu-id="24078-106">К примеру, их можно использовать в машинном обучении Azure или в кластере HDInsight.</span><span class="sxs-lookup"><span data-stu-id="24078-106">It may be used, for example, in Azure Machine Learning or on an HDInsight cluster.</span></span>

<span data-ttu-id="24078-107">Обычно это является первым шагом для работы с [SQL](machine-learning-data-science-process-sql-walkthrough.md) и [HDInsight](machine-learning-data-science-process-hive-walkthrough.md).</span><span class="sxs-lookup"><span data-stu-id="24078-107">This is typically be the first step for the [SQL](machine-learning-data-science-process-sql-walkthrough.md) and [HDInsight](machine-learning-data-science-process-hive-walkthrough.md) walkthroughs.</span></span>

<span data-ttu-id="24078-108">Сведения о канонических сценариях, в рамках которых службы SSIS используются для выполнения бизнес-задач, часто встречающихся в сценариях интеграции гибридных данных, см. в записи блога [Doing more with SQL Server Integration Services Feature Pack for Azure](http://blogs.msdn.com/b/ssis/archive/2015/06/25/doing-more-with-sql-server-integration-services-feature-pack-for-azure.aspx) (Повышенная эффективность при использовании пакета дополнительных компонентов SQL Server Integration Services для Azure).</span><span class="sxs-lookup"><span data-stu-id="24078-108">For a discussion of canonical scenarios that use SSIS to accomplish business needs common in hybrid data integration scenarios, see [Doing more with SQL Server Integration Services Feature Pack for Azure](http://blogs.msdn.com/b/ssis/archive/2015/06/25/doing-more-with-sql-server-integration-services-feature-pack-for-azure.aspx) blog.</span></span>

> [!NOTE]
> <span data-ttu-id="24078-109">Полное описание базовых принципов использования хранилища BLOB-объектов Azure см. в статьях [Приступая к работе с хранилищем BLOB-объектов Azure с помощью .NET](../storage/blobs/storage-dotnet-how-to-use-blobs.md) и [Основные понятия службы BLOB-объектов](https://msdn.microsoft.com/library/azure/dd179376.aspx).</span><span class="sxs-lookup"><span data-stu-id="24078-109">For a complete introduction to Azure blob storage, refer to [Azure Blob Basics](../storage/blobs/storage-dotnet-how-to-use-blobs.md) and to [Azure Blob Service](https://msdn.microsoft.com/library/azure/dd179376.aspx).</span></span>
> 
> 

## <a name="prerequisites"></a><span data-ttu-id="24078-110">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="24078-110">Prerequisites</span></span>
<span data-ttu-id="24078-111">Для выполнения описанных в этой статье задач необходимо иметь подписку Azure и учетную запись хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="24078-111">To perform the tasks described in this article, you must have an Azure subscription and an Azure storage account set up.</span></span> <span data-ttu-id="24078-112">Чтобы отправлять и скачивать данные, необходимо знать имя учетной записи хранения Azure и ее ключ.</span><span class="sxs-lookup"><span data-stu-id="24078-112">You must know your Azure storage account name and account key to upload or download data.</span></span>

* <span data-ttu-id="24078-113">Сведения о настройке **подписки Azure** см. на странице [Создайте бесплатную учетную запись Azure уже сегодня](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="24078-113">To set up an **Azure subscription**, see [Free one-month trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="24078-114">Инструкции по созданию **учетной записи хранения** и получению сведений об учетной записи и ключах см. в статье [Об учетных записях хранения Azure](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="24078-114">For instructions on creating a **storage account** and for getting account and key information, see [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span>

<span data-ttu-id="24078-115">Чтобы использовать **Соединители SSIS**, необходимо загрузить следующие компоненты:</span><span class="sxs-lookup"><span data-stu-id="24078-115">To use the **SSIS connectors**, you must download:</span></span>

* <span data-ttu-id="24078-116">**SQL Server 2014 или 2016 Standard (или более поздняя версия)**: установка включает в себя SQL Server Integration Services.</span><span class="sxs-lookup"><span data-stu-id="24078-116">**SQL Server 2014 or 2016 Standard (or above)**: Install includes SQL Server Integration Services.</span></span>
* <span data-ttu-id="24078-117">**Пакет дополнительных компонентов Microsoft SQL Server 2014 или 2016 Integration Services для Azure:** пакет можно скачать на [этой](http://www.microsoft.com/download/details.aspx?id=47366) или на [этой странице](https://www.microsoft.com/download/details.aspx?id=49492) соответственно.</span><span class="sxs-lookup"><span data-stu-id="24078-117">**Microsoft SQL Server 2014 or 2016 Integration Services Feature Pack for Azure**: These can be downloaded, respectively, from the [SQL Server 2014 Integration Services](http://www.microsoft.com/download/details.aspx?id=47366) and [SQL Server 2016 Integration Services](https://www.microsoft.com/download/details.aspx?id=49492) pages.</span></span>

> [!NOTE]
> <span data-ttu-id="24078-118">Службы SSIS устанавливаются вместе с SQL Server, но в версию Express они не включены.</span><span class="sxs-lookup"><span data-stu-id="24078-118">SSIS is installed with SQL Server, but is not included in the Express version.</span></span> <span data-ttu-id="24078-119">Сведения о приложениях, которые включены в различные выпуски SQL Server, см. в статье [SQL Server 2016 SP1 editions](http://www.microsoft.com/en-us/server-cloud/products/sql-server-editions/) (Выпуски SQL Server 2016 с пакетом обновления 1 (SP1)).</span><span class="sxs-lookup"><span data-stu-id="24078-119">For information on what applications are included in various editions of SQL Server, see [SQL Server Editions](http://www.microsoft.com/en-us/server-cloud/products/sql-server-editions/)</span></span>
> 
> 

<span data-ttu-id="24078-120">Обучающие материалы о службах SSIS см. в [этой статье](http://www.microsoft.com/download/details.aspx?id=20766).</span><span class="sxs-lookup"><span data-stu-id="24078-120">For training materials on SSIS, see [Hands On Training for SSIS](http://www.microsoft.com/download/details.aspx?id=20766)</span></span>

<span data-ttu-id="24078-121">Дополнительные сведения о том, как с помощью SISS получить рабочую среду для создания простых пакетов извлечения, преобразования и загрузки (ETL), см. в статье [Службы SSIS: создание пакета ETL](https://msdn.microsoft.com/library/ms169917.aspx).</span><span class="sxs-lookup"><span data-stu-id="24078-121">For information on how to get up-and-running using SISS to build simple extraction, transformation, and load (ETL) packages, see [SSIS Tutorial: Creating a Simple ETL Package](https://msdn.microsoft.com/library/ms169917.aspx).</span></span>

## <a name="download-nyc-taxi-dataset"></a><span data-ttu-id="24078-122">Загрузка набора данных для такси Нью-Йорка</span><span class="sxs-lookup"><span data-stu-id="24078-122">Download NYC Taxi dataset</span></span>
<span data-ttu-id="24078-123">В приведенном здесь примере используется общедоступный набор данных [Поездки в такси по Нью-Йорку](http://www.andresmh.com/nyctaxitrips/) .</span><span class="sxs-lookup"><span data-stu-id="24078-123">The example described here use a publicly available dataset -- the [NYC Taxi Trips](http://www.andresmh.com/nyctaxitrips/) dataset.</span></span> <span data-ttu-id="24078-124">Набор данных состоит из информации об около 173 миллионах поездок в такси в Нью-Йорке в 2013 году.</span><span class="sxs-lookup"><span data-stu-id="24078-124">The dataset consists of about 173 million taxi rides in NYC in the year 2013.</span></span> <span data-ttu-id="24078-125">В нем используется два типа данных: сведения о поездках и тарифах.</span><span class="sxs-lookup"><span data-stu-id="24078-125">There are two types of data: trip details data and fare data.</span></span> <span data-ttu-id="24078-126">Так как для каждого месяца заведен отдельный файл, всего у нас есть 24 файла, каждый из которых занимает объем примерно 2 ГБ (в несжатом виде).</span><span class="sxs-lookup"><span data-stu-id="24078-126">As there is a file for each month, we have 24 files in all, each of which is approximately 2GB uncompressed.</span></span>

## <a name="upload-data-to-azure-blob-storage"></a><span data-ttu-id="24078-127">Отправка данных в хранилище больших двоичных объектов Azure</span><span class="sxs-lookup"><span data-stu-id="24078-127">Upload data to Azure blob storage</span></span>
<span data-ttu-id="24078-128">Чтобы переместить данные с помощью пакета дополнительных компонентов SSIS из локальной среды в хранилище BLOB-объектов Azure, мы используем экземпляр [**задачи отправки BLOB-объектов Azure**](https://msdn.microsoft.com/library/mt146776.aspx), как показано здесь:</span><span class="sxs-lookup"><span data-stu-id="24078-128">To move data using the SSIS feature pack from on-premises to Azure blob storage, we use an instance of the [**Azure Blob Upload Task**](https://msdn.microsoft.com/library/mt146776.aspx), shown here:</span></span>

![configure-data-science-vm](./media/machine-learning-data-science-move-data-to-azure-blob-using-ssis/ssis-azure-blob-upload-task.png)

<span data-ttu-id="24078-130">Ниже описаны параметры, используемые задачей.</span><span class="sxs-lookup"><span data-stu-id="24078-130">The parameters that the task uses are described here:</span></span>

| <span data-ttu-id="24078-131">Поле</span><span class="sxs-lookup"><span data-stu-id="24078-131">Field</span></span> | <span data-ttu-id="24078-132">Описание</span><span class="sxs-lookup"><span data-stu-id="24078-132">Description</span></span> |
| --- | --- |
| <span data-ttu-id="24078-133">**AzureStorageConnection**</span><span class="sxs-lookup"><span data-stu-id="24078-133">**AzureStorageConnection**</span></span> |<span data-ttu-id="24078-134">Задает существующий диспетчер подключения к хранилищу Azure или создает новый, который ссылается на учетную запись хранения Azure, указывающую на размещение файлов BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="24078-134">Specifies an existing Azure Storage Connection Manager or creates a new one that refers to an Azure storage account that points to where the blob files are hosted.</span></span> |
| <span data-ttu-id="24078-135">**BlobContainer**</span><span class="sxs-lookup"><span data-stu-id="24078-135">**BlobContainer**</span></span> |<span data-ttu-id="24078-136">Задает имя контейнера больших двоичных объектов, который содержит отправленные файлы в виде больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="24078-136">Specifies the name of the blob container that hold the uploaded files as blobs.</span></span> |
| <span data-ttu-id="24078-137">**BlobDirectory**</span><span class="sxs-lookup"><span data-stu-id="24078-137">**BlobDirectory**</span></span> |<span data-ttu-id="24078-138">Задает каталог больших двоичных объектов, в котором отправленный файл хранится в виде блочного BLOB-объекта.</span><span class="sxs-lookup"><span data-stu-id="24078-138">Specifies the blob directory where the uploaded file is stored as a block blob.</span></span> <span data-ttu-id="24078-139">Каталог BLOB-объектов имеет виртуальную иерархическую структуру.</span><span class="sxs-lookup"><span data-stu-id="24078-139">The blob directory is a virtual hierarchical structure.</span></span> <span data-ttu-id="24078-140">Если большой двоичный объект уже существует, он заменяется.</span><span class="sxs-lookup"><span data-stu-id="24078-140">If the blob already exists, it ia replaced.</span></span> |
| <span data-ttu-id="24078-141">**LocalDirectory**</span><span class="sxs-lookup"><span data-stu-id="24078-141">**LocalDirectory**</span></span> |<span data-ttu-id="24078-142">Задает локальный каталог с файлами для отправки.</span><span class="sxs-lookup"><span data-stu-id="24078-142">Specifies the local directory that contains the files to be uploaded.</span></span> |
| <span data-ttu-id="24078-143">**FileName**</span><span class="sxs-lookup"><span data-stu-id="24078-143">**FileName**</span></span> |<span data-ttu-id="24078-144">Указывает имя фильтра для выбора файлов с указанным шаблоном имени.</span><span class="sxs-lookup"><span data-stu-id="24078-144">Specifies a name filter to select files with the specified name pattern.</span></span> <span data-ttu-id="24078-145">Например, MySheet\*.xls\* включает в себя файлы MySheet001.xls и MySheetABC.xlsx.</span><span class="sxs-lookup"><span data-stu-id="24078-145">For example, MySheet\*.xls\* includes files such as MySheet001.xls and MySheetABC.xlsx</span></span> |
| <span data-ttu-id="24078-146">**TimeRangeFrom/TimeRangeTo**</span><span class="sxs-lookup"><span data-stu-id="24078-146">**TimeRangeFrom/TimeRangeTo**</span></span> |<span data-ttu-id="24078-147">Задает фильтр диапазона времени.</span><span class="sxs-lookup"><span data-stu-id="24078-147">Specifies a time range filter.</span></span> <span data-ttu-id="24078-148">Сюда включаются файлы, входящие в диапазон, крайними значениями которого являются *TimeRangeFrom* и *TimeRangeTo*.</span><span class="sxs-lookup"><span data-stu-id="24078-148">Files modified after *TimeRangeFrom* and before *TimeRangeTo* are included.</span></span> |

> [!NOTE]
> <span data-ttu-id="24078-149">Учетные данные **AzureStorageConnection** должны быть правильными. **BlobContainer** должен быть создан до попытки передачи.</span><span class="sxs-lookup"><span data-stu-id="24078-149">The **AzureStorageConnection** credentials need to be correct and the **BlobContainer** must exist before the transfer is attempted.</span></span>
> 
> 

## <a name="download-data-from-azure-blob-storage"></a><span data-ttu-id="24078-150">Загрузка данных из хранилища BLOB-объектов Azure</span><span class="sxs-lookup"><span data-stu-id="24078-150">Download data from Azure blob storage</span></span>
<span data-ttu-id="24078-151">Чтобы скачать данные из хранилища BLOB-объектов Azure в локальное хранилище с помощью служб SSIS, используйте экземпляр [задачи отправки BLOB-объектов Azure](https://msdn.microsoft.com/library/mt146779.aspx).</span><span class="sxs-lookup"><span data-stu-id="24078-151">To download data from Azure blob storage to on-premises storage with SSIS, use an instance of the [Azure Blob Upload Task](https://msdn.microsoft.com/library/mt146779.aspx).</span></span>

## <a name="more-advanced-ssis-azure-scenarios"></a><span data-ttu-id="24078-152">Более сложные сценарии SSIS-Azure</span><span class="sxs-lookup"><span data-stu-id="24078-152">More advanced SSIS-Azure scenarios</span></span>
<span data-ttu-id="24078-153">С помощью пакета дополнительных компонентов SSIS можно обрабатывать более сложные потоки, используя упаковку задач.</span><span class="sxs-lookup"><span data-stu-id="24078-153">The SSIS feature pack allows for more complex flows to be handled by packaging tasks together.</span></span> <span data-ttu-id="24078-154">Например, данные BLOB-объекта можно передать непосредственно в кластер HDInsight. После этого полученный результат можно скачать обратно в BLOB-объект, а затем — в локальное хранилище.</span><span class="sxs-lookup"><span data-stu-id="24078-154">For example, the blob data could feed directly into an HDInsight cluster, whose output could be downloaded back to a blob and then to on-premises storage.</span></span> <span data-ttu-id="24078-155">Службы SSIS могут запускать задания Hive и Pig в кластере HDInsight с помощью дополнительных соединительных служб SSIS.</span><span class="sxs-lookup"><span data-stu-id="24078-155">SSIS can run Hive and Pig jobs on an HDInsight cluster using additional SSIS connectors:</span></span>

* <span data-ttu-id="24078-156">Чтобы запустить сценарий Hive в кластере Azure HDInsight с помощью служб SSIS, используйте [задачу Hive Azure HDInsight](https://msdn.microsoft.com/library/mt146771.aspx).</span><span class="sxs-lookup"><span data-stu-id="24078-156">To run a Hive script on an Azure HDInsight cluster with SSIS, use [Azure HDInsight Hive Task](https://msdn.microsoft.com/library/mt146771.aspx).</span></span>
* <span data-ttu-id="24078-157">Чтобы запустить сценарий Pig в кластере Azure HDInsight с помощью служб SSIS, используйте [задачу Pig Azure HDInsight](https://msdn.microsoft.com/library/mt146781.aspx).</span><span class="sxs-lookup"><span data-stu-id="24078-157">To run a Pig script on an Azure HDInsight cluster with SSIS, use [Azure HDInsight Pig Task](https://msdn.microsoft.com/library/mt146781.aspx).</span></span>

