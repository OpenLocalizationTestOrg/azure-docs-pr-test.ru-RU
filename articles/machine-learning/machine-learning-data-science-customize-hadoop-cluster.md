---
title: "Настройка кластеров Hadoop для процесса обработки и анализа данных группы | Документация Майкрософт"
description: "Популярные модули Python становятся доступными в настраиваемых кластерах Azure HDInsight Hadoop."
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 0c115dca-2565-4e7a-9536-6002af5c786a
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/24/2017
ms.author: hangzh;bradsev
ms.openlocfilehash: 53ff04ee66b08ae36f3550536c659a547c658fd9
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="customize-azure-hdinsight-hadoop-clusters-for-the-team-data-science-process"></a>Настройка кластеров Azure HDInsight Hadoop для процесса обработки и анализа данных группы
В этой статье рассказывается о том, как настроить кластер Hadoop под управлением службы HDInsight, установив 64-разрядную версию программы Anaconda (Python 2.7) на каждом узле в процессе подготовки кластера как службы HDInsight. Здесь также приведена информация о том, как получить доступ к головному узлу для отправки пользовательских заданий в кластер. В результате этой настройки многие популярные модули Python, входящие в состав программы Anaconda, станут доступными для использования в определяемых пользователями функциях (UDF), предназначенных для обработки записей Hive в кластере. Инструкции по процедурам, которые используются в этом сценарии, см. в разделе [Отправка запросов Hive](machine-learning-data-science-move-hive-tables.md#submit).

Это меню содержит ссылки на разделы, описывающие настройку различных сред обработки и анализа данных, используемых [процессом обработки и анализа данных группы (TDSP)](data-science-process-overview.md).

[!INCLUDE [data-science-environment-setup](../../includes/cap-setup-environments.md)]

## <a name="customize"></a>Настройка кластера Hadoop под управлением службы Azure HDInsight
Чтобы создать настраиваемый кластер Hadoop под управлением службы HDInsight, необходимо войти на [**классический портал Azure**](https://manage.windowsazure.com/), щелкнуть **Создать** в левом нижнем углу, а затем выбрать "Службы данных > HDInsight" > **Настраиваемое создание**, чтобы открыть окно **Сведения о кластере**. 

![Создание рабочей области](./media/machine-learning-data-science-customize-hadoop-cluster/customize-cluster-img1.png)

Введите имя создаваемого кластера на 1-й странице настройки конфигурации и примите значения по умолчанию для других полей. Щелкните стрелку, чтобы перейти к следующей странице конфигурации. 

![Создание рабочей области](./media/machine-learning-data-science-customize-hadoop-cluster/customize-cluster-img1.png)

На странице 2 конфигурации введите количество в поле **Узлы данных**, выберите значение в поле **Регион или виртуальная сеть** и выберите размеры в полях **Головной узел** и **Узел данных**. Щелкните стрелку, чтобы перейти к следующей странице конфигурации.

> [!NOTE]
> Значение, выбранное в поле **РЕГИОН ИЛИ ВИРТУАЛЬНАЯ СЕТЬ** , должно соответствовать региону, указанному для учетной записи хранения, которая будет использоваться для кластера Hadoop под управлением службы HDInsight. В противном случае учетная запись хранения не будет отображаться в раскрывающемся списке **Имя учетной записи** на четвертой странице настройки конфигурации.
> 
> 

![Создание рабочей области](./media/machine-learning-data-science-customize-hadoop-cluster/customize-cluster-img3.png)

На 3-й странице настройки конфигурации укажите имя пользователя и пароль для кластера Hadoop под управлением службы HDInsight. **Не** устанавливайте флажок *Ввести куст или метахранилище Oozie*. Затем щелкните стрелку, чтобы перейти к следующей странице конфигурации. 

![Создание рабочей области](./media/machine-learning-data-science-customize-hadoop-cluster/customize-cluster-img4.png)

На 4-й странице настройки конфигурации задайте имя учетной записи хранения и контейнер кластера Hadoop под управлением службы HDInsight по умолчанию. Если в раскрывающемся списке **Контейнер по умолчанию** выбрать параметр *Создать контейнер по умолчанию*, будет создан контейнер с тем же именем, что у кластера. Щелкните стрелку, чтобы перейти к последней странице конфигурации.

![Создание рабочей области](./media/machine-learning-data-science-customize-hadoop-cluster/customize-cluster-img5.png)

На последней странице настройки конфигурации **Действия скрипта** нажмите кнопку **Добавить действие скрипта** и заполните текстовые поля следующими значениями.

* **Имя** — любая строка, соответствующая имени этого действия сценария.
* **Тип узла** — выберите значение **Все узлы**.
* **URI-адрес скрипта**  - —*http://getgoing.blob.core.windows.net/publicscripts/Azure_HDI_Setup_Windows.ps1* 
  * *publicscripts* — это общий контейнер в учетной записи хранения. 
  * *getgoing* — используется для совместного доступа к файлам сценариев PowerShell, чтобы упростить работу пользователей в Azure.
* **ПАРАМЕТРЫ** — оставьте это поле пустым.

Наконец, щелкните значок с изображением флажка, чтобы начать создание настраиваемого кластера Hadoop под управлением службы HDInsight. 

![Создание рабочей области](./media/machine-learning-data-science-customize-hadoop-cluster/script-actions.png)

## <a name="headnode"></a> Получение доступа к головному узлу кластера Hadoop
Чтобы получить доступ к головному узлу кластера Hadoop по протоколу RDP, необходимо включить удаленный доступ к кластеру Hadoop в Azure. 

1. Перейдите на [**классический портал Azure**](https://manage.windowsazure.com/), щелкните **HDInsight** в левой части страницы, выберите кластер Hadoop в списке кластеров, перейдите на вкладку **Конфигурация**, а затем щелкните значок **Включить удаленный доступ** в нижней части страницы.
   
    ![Создание рабочей области](./media/machine-learning-data-science-customize-hadoop-cluster/enable-remote-access-1.png)
2. В окне **Настройка удаленного рабочего стола** введите значения в полях «ИМЯ ПОЛЬЗОВАТЕЛЯ» и «ПАРОЛЬ» и выберите дату окончания срока действия для удаленного доступа. Затем щелкните значок с изображением флажка, чтобы включить удаленный доступ к головному узлу кластера Hadoop.
   
    ![Создание рабочей области](./media/machine-learning-data-science-customize-hadoop-cluster/enable-remote-access-2.png)

> [!NOTE]
> Имя пользователя и пароль для удаленного доступа должны отличаться от имени пользователя и пароля, которые использовались при создании кластера Hadoop. Это отдельный набор учетных данных. Срок действия удаленного доступа должен истечь не позднее чем через 7 дней с текущей даты.
> 
> 

После включения удаленного доступа щелкните **ПОДКЛЮЧИТЬСЯ** в нижней части страницы, чтобы получить удаленный доступ к головному узлу. Войдите на головной узел кластера Hadoop, указав заданные ранее учетные данные для удаленного доступа.

![Создание рабочей области](./media/machine-learning-data-science-customize-hadoop-cluster/enable-remote-access-3.png)

Дальнейшие действия по подготовке и обработке аналитических данных можно найти в статье [Процесс обработки и анализа данных группы](https://azure.microsoft.com/documentation/learning-paths/cortana-analytics-process/). Они могут включать в себя операции с перемещением данных в HDInsight, их обработкой и выборкой для подготовки к обучению по данным с помощью Машинного обучения Azure.

Инструкции по получению доступа к модулям Python, которые входят в состав программы Anaconda, с головного узла кластера в пользовательских функциях, предназначенных для обработки записей Hive, которые хранятся в кластере, см. в разделе [Отправка запросов Hive](machine-learning-data-science-move-hive-tables.md#submit).

