---
title: "aaaUsing импорта и экспорта данных в веб-службы машинного обучения Azure | Документы Microsoft"
description: "Узнайте, как toouse hello toosend модули данных импорта и экспорта данных и получать данные из веб-службы."
services: machine-learning
documentationcenter: 
author: vDonGlover
manager: raymondlaghaeian
editor: 
ms.assetid: 3a7ac351-ebd3-43a1-8c5d-18223903d08e
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/28/2017
ms.author: v-donglo
ms.openlocfilehash: 176380259b15cb338ede61c7f28ba2296b35dd52
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="deploying-azure-ml-web-services-that-use-data-import-and-data-export-modules"></a>Развертывание веб-служб машинного обучения Azure, использующих модули импорта и экспорта данных

При создании прогнозного эксперимента обычно добавляются вход и выход веб-службы. При развертывании hello эксперимент, потребители могут отправки и получения данных из веб-службу hello hello входы и выходы. В некоторых приложениях данные пользователя могут быть доступны через веб-канал данных или уже находиться во внешнем источнике данных, таком как хранилище BLOB-объектов Azure. В этих случаях для чтения и записи данных им не требуются входы и выходы веб-службы. Они могут, вместо этого использовать hello пакетного выполнения службы (BES) tooread данные из источника данных hello модуль импорта данных с помощью и записи hello оценки результатов tooa расположения различных данных, с помощью модуль экспорта данных.

Hello данных импорта и экспорта данных модулей, можно считывающие и записывающие toovarious данные, которые предоставляют местоположения, такие как URL-адрес через HTTP, запрос Hive, база данных Azure SQL, хранилище таблиц Azure, хранилище больших двоичных объектов Azure, веб-канала данных или из локальной базы данных SQL.

Hello в этом разделе используется «пример 5: обучение теста оценки для двоичной классификации: для взрослых набора данных» образец и предполагает hello набора данных в таблице Azure SQL с именем censusdata уже загружен.

## <a name="create-hello-training-experiment"></a>Создание эксперимента обучения hello
При открытии hello «пример 5: обучение теста оценки для двоичной классификации: для взрослых набора данных» образец он использует образец hello двоичной классификации для взрослых переписи доход, набора данных. И эксперимента hello hello визуальный элемент будет выглядеть аналогично toohello после изображения.

![Первоначальная настройка hello эксперимента.](./media/machine-learning-web-services-that-use-import-export-modules/initial-look-of-experiment.png)

tooread hello данные из таблицы hello Azure SQL:

1. Удалите модуль hello набора данных.
2. В поле поиска hello компонентов введите импорта.
3. Из списка результатов hello, добавьте *импорта данных* toohello модуль поэкспериментировать холста.
4. Подсоедините выход hello *импорта данных* входные данные модуля hello объекта hello *Очистка недостающих данных* модуля.
5. В панели «Свойства» выберите **базы данных SQL Azure** в hello **источника данных** раскрывающегося списка.
6. В hello **имя сервера базы данных**, **имя базы данных**, **имя пользователя**, и **пароль** введите соответствующую информацию hello для базы данных.
7. В поле запроса hello базы данных введите приветствия при следующем запросе.
   
     select [age],
   
        [workclass],
        [fnlwgt],
        [education],
        [education-num],
        [marital-status],
        [occupation],
        [relationship],
        [race],
        [sex],
        [capital-gain],
        [capital-loss],
        [hours-per-week],
        [native-country],
        [income]
     from dbo.censusdata;
8. Внизу hello холст эксперимента hello, нажмите кнопку **запуска**.

## <a name="create-hello-predictive-experiment"></a>Создание прогнозирующего эксперимента hello
Далее настройте hello прогнозной эксперимент, из которого развернуть веб-службу.

1. Внизу hello холст эксперимента hello, нажмите кнопку **настройки веб-службы** и выберите **прогнозной веб-службы (рекомендуется)**.
2. Удалите hello *входных данных для службы Web* и *Вывод службы веб-модули* из эксперимента прогнозной hello. 
3. В поле поиска hello компонентов введите экспорта.
4. Из списка результатов hello, добавьте *Экспорт данных* toohello модуль поэкспериментировать холста.
5. Подсоедините выход hello *модель оценки* входные данные модуля hello объекта hello *Экспорт данных* модуля. 
6. В панели «Свойства» выберите **базы данных SQL Azure** в раскрывающемся списке целевой данных hello.
7. В hello **имя сервера базы данных**, **имя базы данных**, **имя учетной записи пользователя сервера**, и **пароль учетной записи пользователя сервера** введите Hello соответствующие сведения для базы данных.
8. В hello **разделенный запятыми список столбцов toobe Сохранить** введите меток оцененных значений.
9. В hello **поле имя таблицы данных**, введите dbo. ScoredLabels. Если таблица hello не существует, оно создается при запуске эксперимента hello или hello веб-служба вызывается.
10. В hello **разделенный запятыми список столбцов таблицы данных** введите ScoredLabels.

При написании приложения, что вызовы hello окончательного веб-службы, вы можете toospecify другой входной запрос или целевой таблице во время выполнения. tooconfigure эти входы и выходы, использовать hello параметры веб-службы компонент tooset hello *импорта данных* модуль *источника данных* свойство и hello *Экспорт данных* режим свойство данных назначения.  Дополнительные сведения о параметры веб-службы см. в разделе hello [входа параметры веб-службы AzureML](https://blogs.technet.microsoft.com/machinelearning/2014/11/25/azureml-web-service-parameters/) по hello Cortana аналитики и обучения машины.

hello tooconfigure параметры веб-службы для запроса импорта hello и hello целевую таблицу:

1. На панели свойств hello для hello *импорта данных* модуля, нажмите значок hello в hello верхнему правому углу hello **запроса базы данных** и выберите **задать в качестве параметра веб-службы**.
2. На панели свойств hello для hello *Экспорт данных* модуля, нажмите значок hello в hello верхнему правому углу hello **имя таблицы данных** и выберите **задать в качестве параметра веб-службы**.
3. Внизу hello hello *Экспорт данных* модуль «свойства» в hello **параметры веб-службы** щелкните запрос базы данных и переименуйте его в запросе.
4. Щелкните **Имя таблицы данных** и измените его имя на **Таблица**.

Когда вы закончите, эксперимента должен выглядеть примерно toohello после изображения:

![Окончательный вид эксперимента.](./media/machine-learning-web-services-that-use-import-export-modules/experiment-with-import-data-added.png)

Теперь можно развернуть hello эксперимент как веб-службы.

## <a name="deploy-hello-web-service"></a>Развернуть веб-службу hello
Вы можете развернуть tooeither классический или создать веб-службы.

### <a name="deploy-a-classic-web-service"></a>Развертывание классической веб-службы
toodeploy классического веб-службы и создать приложение tooconsume его:

1. Внизу hello холст эксперимента hello нажмите кнопку "Выполнить".
2. После завершения выполнения hello щелкните **развертывание веб-службы** и выберите **развертывание веб-службы [классический]**.
3. Найдите свой ключ API на hello мониторинга веб-службы. Скопируйте и сохраните его toouse позже.
4. В hello **конечной точки по умолчанию** щелкните hello **Пакетное выполнение** hello tooopen ссылку API справочную страницу.
5. В Visual Studio создайте консольное приложение C# в Visual Studio (**Создать** > **Проект** > **Visual C#** > **Классический рабочий стол Windows** > **Консольное приложение (.NET Framework**).
6. Найдите на hello API справочная страница hello **образец кода** раздел hello нижней части страницы приветствия.
7. Скопируйте и вставьте hello образца кода на C# в файле Program.cs удаление хранилища больших двоичных объектов toohello все ссылки.
8. Обновите значение hello hello *apiKey* переменных с ключом hello API, сохраненный ранее.
9. Найдите hello запроса объявления и обновление hello значения параметры веб-службы, переданные toohello *импорта данных* и *Экспорт данных* модулей. В этом случае используйте hello исходный запрос, но определить новое имя таблицы.
   
        var request = new BatchExecutionRequest() 
        {           
            GlobalParameters = new Dictionary<string, string>() {
                { "Query", @"select [age], [workclass], [fnlwgt], [education], [education-num], [marital-status], [occupation], [relationship], [race], [sex], [capital-gain], [capital-loss], [hours-per-week], [native-country], [income] from dbo.censusdata" },
                { "Table", "dbo.ScoredTable2" },
            }
        };
10. Запустите приложение hello. 

По завершении выполнения hello новая таблица добавляется toohello базы данных, содержащей hello оценки результатов.

### <a name="deploy-a-new-web-service"></a>Развертывание новой веб-службы

> [!NOTE] 
> toodeploy новую веб-службу, необходимо иметь достаточные разрешения в toowhich hello подписки вы развертывание hello веб-службы. Дополнительные сведения см. в разделе [управление веб-службы с помощью портала веб-службы Azure Machine Learning hello](machine-learning-manage-new-webservice.md). 

toodeploy как веб-службу и создания приложения tooconsume его:

1. Внизу hello холст эксперимента hello, нажмите кнопку **запуска**.
2. После завершения выполнения hello щелкните **развертывание веб-службы** и выберите **развертывания [новое] веб-службы**.
3. На странице развертывание эксперимента hello, введите имя веб-службы и выбрать ценовой план, а затем нажмите кнопку **развернуть**.
4. На hello **краткое руководство** щелкните **использование**.
5. В hello **образец кода** щелкните **пакета**.
6. В Visual Studio создайте консольное приложение C# в Visual Studio (**Создать** > **Проект** > **Visual C#** > **Классический рабочий стол Windows** > **Консольное приложение (.NET Framework**).
7. Скопируйте и вставьте образец кода C# hello в файле Program.cs.
8. Обновите значение hello hello *apiKey* переменных с hello **первичного ключа** в hello **потребления основные сведения о** раздела.
9. Найдите hello *scoreRequest* объявления и обновления значения hello параметры веб-службы, переданные toohello *импорта данных* и *Экспорт данных* модулей. В этом случае используйте hello исходный запрос, но определить новое имя таблицы.
   
        var scoreRequest = new
        {       
            Inputs = new Dictionary<string, StringTable>()
            {
            },
            GlobalParameters = new Dictionary<string, string>() {
                { "Query", @"select [age], [workclass], [fnlwgt], [education], [education-num], [marital-status], [occupation], [relationship], [race], [sex], [capital-gain], [capital-loss], [hours-per-week], [native-country], [income] from dbo.censusdata" },
                { "Table", "dbo.ScoredTable3" },
            }
        };
10. Запустите приложение hello. 

