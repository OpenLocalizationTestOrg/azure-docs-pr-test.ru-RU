---
title: "Преобразование \"Разделение столбцов по образцу\" с помощью Azure Machine Learning Workbench"
description: "Справочный документ для преобразования \"Разделение столбцов по образцу\"."
services: machine-learning
author: ranvijaykumar
ms.author: ranku
manager: mwinkle
ms.reviewer: 
ms.service: machine-learning
ms.workload: data-services
ms.custom: mvc, reference
ms.topic: article
ms.date: 09/14/2017
ms.openlocfilehash: 013c99045621e4651a44ab99c9f695fff6004654
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="split-column-by-example-transformation"></a>Преобразование "Разделение столбцов по образцу"
Это преобразование прогнозировано разделяет содержимое столбца на информативные границы без задействования пользователя. Алгоритм разделения выбирает границы после анализа содержимого столбца. Эти границы можно определить с помощью:
* фиксированного разделителя;
* нескольких произвольных разделителей, отображающихся в определенных контекстах;
* шаблонов данных или некоторых типов сущности.

Пользователи также могут управлять поведением разделения в расширенном режиме, в котором можно указать разделители, или путем предоставления примеров нужных разделений.

В теории операции разделения можно выполнить в Workbench с помощью серии преобразований *Получение столбца по образцу*. Однако если есть несколько столбцов, получение каждого из них по отдельности даже с помощью подхода "по образцу" может занять много времени. Прогнозируемое разделение позволяет без проблем выполнить разделение. Пользователю не нужно предоставлять примеры для каждого столбца. 

## <a name="how-to-perform-this-transformation"></a>Как выполнить это преобразование

1. Выберите столбец, который необходимо разделить. 
2. В меню **Transforms** (Преобразования) выберите **Split Column by Example** (Разделение столбцов по образцу). Или щелкните правой кнопкой мыши заголовок выбранного столбца и в контекстном меню выберите **Split Column by Example** (Разделение столбцов по образцу). Откроется редактор преобразования, а новые столбцы будут добавлены рядом с выбранным столбцом. На этом этапе Workbench анализирует входной столбец, определяет границы разделения и синтезирует программу для разделения столбца, как показано в таблице. Синхронизированная программа применяется для всех строк в столбце. Разделители, если таковые имеются, исключаются из конечного результата.
3. Вы можете выбрать **расширенный режим** для более детального контроля над преобразованием разделения. 
4. Просмотрите выходные данные и нажмите кнопку **ОК**, чтобы принять преобразование. 

Преобразование предназначено для создания такого же числа итоговых столбцов для всех строк. Если какую-либо строку не удается разделить по определенным границам, по умолчанию для всех столбцов возвращается значение *NULL*. Это поведение можно изменить в **расширенном режиме**.

### <a name="transform-editor-advanced-mode"></a>Редактор преобразований: расширенный режим
**Расширенный режим** предоставляет более широкие возможности для разделения столбцов. 

Если выбрать **Keep Delimiter Columns** (Оставить столбцы-разделители), разделители будут включены в конечный результат. Разделители исключены по умолчанию.

Если указать **разделители**, будет переопределена автоматическая логика выбора разделителей. Можно указать несколько **разделителей**, по одному в каждой строке. Все эти символы используются в качестве разделителей для разделения столбца.

В некоторых случаях при разделении значения по определенным границам число созданных столбцов будет отличаться от обычного. В таких случаях **Fill Direction** (Направление заполнения) используется для определения порядка заполнения столбцов.

Выберите **Show suggested examples** (Показать рекомендуемые примеры), чтобы отобразить образцы строк, для которых пользователь должен предоставить пример разделения. Пользователь может щелкнуть **стрелку вверх** справа от рекомендуемой строки, чтобы повысить уровень строки, выбрав ее в качестве примера. 

Затем он может **удалить** или **вставить новые столбцы**, щелкнув правой кнопкой мыши заголовок **таблицы с примерами**.

Он также может скопировать и вставить значения из одной ячейки в другую, чтобы предоставить пример разделения.

Чтобы переключиться между **базовым** и **расширенным** режимами, щелкните ссылку в редакторе преобразований.

### <a name="editing-an-existing-transformation"></a>Редактирование имеющегося преобразования

Пользователь может изменить имеющееся преобразование **Split Column By Example** (Разделение столбцов по образцу), выбрав параметр **Edit** (Правка) на этапе преобразования. Когда вы выберете параметр **Edit** (Правка), откроется редактор преобразования в **расширенном режиме**, после чего отобразятся все примеры, предоставленные во время создания преобразования.

## <a name="examples-of-splitting-on-a-fixed-single-character-delimiter"></a>Примеры разделения с использованием фиксированного разделителя, состоящего из одного символа

Чаще всего поля данных разделяются фиксированным разделителем, состоящим из одного символа, например запятой в формате CSV. Преобразование Split (Разделение) пытается определить эти разделители автоматически. Например, в следующем сценарии оно автоматически определяет "." в качестве разделителя.

### <a name="splitting-ip-addresses"></a>Разделение IP-адресов

Значения в первом столбце прогнозировано разделены на четыре столбца.

|IP-адрес|IP-адрес_1|IP-адрес_2|IP-адрес_3|IP-адрес_4|
|:-----|:-----|:-----|:-----|:-----|
|192.168.0.102|192|168|0|102|
|192.138.0.101|192|138|0|101|
|192.168.0.102|192|168|0|102|
|192.158.1.202|192|158|1|202|
|192.168.0.102|192|168|0|102|
|192.169.1.102|192|169|1|102|

## <a name="examples-of-splitting-on-multiple-delimiters-within-particular-contexts"></a>Примеры разделения на несколько разделителей в пределах определенных контекстов

Данные пользователя могут содержать множество различных разделителей, отделяющих разные поля. Кроме того, только некоторые вхождения строки разделения могут быть разделителем, но не все. Например, в приведенном ниже примере для получения требуемых выходных данных необходимо иметь набор разделителей "-", "," и ":". Однако не все вхождения разделителя ":" должны использоваться в качестве точки разделения, так как нам не нужно разделять время, а нужно сохранить его в отдельном столбце. Преобразование Split (Разделение) определяет разделители в контекстах, где они встречаются во входных данных, а не все возможные вхождения разделителей. При преобразовании также учитываются общие типы данных, например дата и время.   

### <a name="splitting-store-opening-timings"></a>Разделение времени работы магазина

Значения в следующем столбце *расписания* прогнозировано разделены на девять столбцов, как показано в таблице под ним.

|Расписание|
|:-----|
|Понедельник — пятница: 07:00–18:00; суббота: 9:00–17:00; воскресенье: закрыто|
|Понедельник — пятница: 09:00–18:00; суббота: 4:00–16:00; воскресенье: закрыто|
|Понедельник — пятница: 08:30–19:00; суббота: 3:00–14:30; воскресенье: закрыто|
|Понедельник — пятница: 08:00–18:00; суббота: 2:00–15:00; воскресенье: закрыто|
|Понедельник — пятница: 04:00–19:00; суббота: 9:00–16:00; воскресенье: закрыто|
|Понедельник — пятница: 08:30–16:30; суббота: 9:00–17:00; воскресенье: закрыто|
|Понедельник — пятница: 05:30–18:30; суббота: 5:00–16:00; воскресенье: закрыто|
|Понедельник — пятница: 08:30–20:30; суббота: 6:00–17:00; воскресенье: закрыто|
|Понедельник — пятница: 08:00–21:00; суббота: 9:00–20:00; воскресенье: закрыто|
|Понедельник — пятница: 10:00–21:30; суббота: 9:30–15:00; воскресенье: закрыто|

|Расписание_1|Расписание_2|Расписание_3|Расписание_4|Расписание_5|Расписание_6|Расписание_7|Расписание_8|Расписание_9|
|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|
|Понедельник|Пятница|7:00|18:00|Суббота|9:00|17:00|Воскресенье|Закрытые|
|Понедельник|Пятница|9:00|18:00|Суббота|4:00|16:00|Воскресенье|Закрытые|
|Понедельник|Пятница|8:30|19:00|Суббота|3:00|14:30|Воскресенье|Закрытые|
|Понедельник|Пятница|8:00|18:00|Суббота|2:00|15:00|Воскресенье|Закрытые|
|Понедельник|Пятница|4:00|19:00|Суббота|9:00|16:00|Воскресенье|Закрытые|
|Понедельник|Пятница|8:30|16:30|Суббота|9:00|17:00|Воскресенье|Закрытые|
|Понедельник|Пятница|5:30|18:30|Суббота|5:00|16:00|Воскресенье|Закрытые|
|Понедельник|Пятница|8:30|20:30|Суббота|6:00|17:00|Воскресенье|Закрытые|
|Понедельник|Пятница|8:00|21:00|Суббота|9:00|20:00|Воскресенье|Закрытые|
|Понедельник|Пятница|10:00|21:30|Суббота|9:30|15:00|Воскресенье|Закрытые|

### <a name="splitting-iis-log"></a>Разделение журнала IIS

Вот еще один пример нескольких произвольных разделителей. Этот пример также включает контекстный разделитель "/", по которому не нужно выполнять разделение в URL-адресах или путях к файлам. Очень сложно выполнить подобное разделение с помощью различных преобразований *Derive Column by Example* (Получение столбцов по образцу) и предоставить примеры для каждого поля. С помощью преобразования Split (Разделение) можно выполнить прогнозированное разделение, не предоставляя примеры.

|logtext|
|:-----|
|192.128.138.20 - - [16/Oct/2016 16:22:33 -0200] "GET /images/picture.gif HTTP/1.1" 234 343 www.yahoo.com "http://www.example.com/" "Mozilla/4.0 (compatible; MSIE 4)" "-"|
|10.128.72.213 - - [17/Oct/2016 12:43:12 +0300] "GET /news/stuff.html HTTP/1.1" 200 6233 www.aol.com "http://www.sample.com/" "Mozilla/5.0 (MSIE)" "-"|
|192.165.71.165 - - [12/Nov/2016 14:22:44 -0500] "GET /sample.ico HTTP/1.1" 342 7342 www.facebook.com "-" "Mozilla/5.0 (Windows; U; Windows NT 5.1; rv:1.7.3)" "-"|
|10.166.64.165 - - [23/Nov/2016 01:52:45 -0800] "GET /style.css HTTP/1.1" 200 2552 www.google.com "http://www.test.com/index.html" "Mozilla/5.0 (Windows)" "-"|
|192.167.1.193 - - [16/Jan/2017 22:34:56 +0200] "GET /js/ads.js HTTP/1.1" 200 23462 www.microsoft.com "http://www.illustration.com/index.html" "Mozilla/5.0 (Windows)" "-"|
|192.147.76.193 - - [28/Jan/2017 26:36:16 +0800] "GET /search.php HTTP/1.1" 400 1777 www.bing.com "-" "Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)" "-"|
|192.166.64.165 - - [23/Mar/2017 01:55:25 -0800] "GET /style.css HTTP/1.1" 200 2552 www.google.com "http://www.test.com/index.html" "Mozilla/5.0 (Windows)" "-"|
|11.167.1.193 - - [16/Apr/2017 11:34:36 +0200] "GET /js/ads.js HTTP/1.1" 200 23462 www.microsoft.com "http://www.illustration.com/index.html" "Mozilla/5.0 (Windows)" "-"|

Разделены на следующие части:

|logtext_1|logtext_2|logtext_3|logtext_4|logtext_5|logtext_6|logtext_7|logtext_8|logtext_9|logtext_10|logtext_11|logtext_12|logtext_13|logtext_14|logtext_15|
|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|:-----|
|192.128.138.20|16/Oct/2016|16:22:33|-0200|ПОЛУЧЕНИЕ|images/picture.gif|HTTP|1,1|234|343|www.yahoo.com|http://www.example.com/|Mozilla|4,0|compatible; MSIE 4|
|10.128.72.213|17/Oct/2016|12:43:12|+0300|ПОЛУЧЕНИЕ|news/stuff.html|HTTP|1,1|200|6233|www.aol.com|http://www.sample.com/|Mozilla|5.0|MSIE|
|192.165.71.165|12/Nov/2016|14:22:44|-0500|ПОЛУЧЕНИЕ|sample.ico|HTTP|1,1|342|7342|www.facebook.com|-|Mozilla|5.0|Windows; U; Windows NT 5.1; rv:1.7.3|
|10.166.64.165|23/Nov/2016|01:52:45|-0800|ПОЛУЧЕНИЕ|style.css|HTTP|1,1|200|2552|www.google.com|http://www.test.com/index.html|Mozilla|5.0|Windows|
|192.167.1.193|16/Jan/2017|22:34:56|+0200|ПОЛУЧЕНИЕ|js/ads.js|HTTP|1,1|200|23462|www.microsoft.com|http://www.illustration.com/index.html|Mozilla|5.0|Windows|
|192.147.76.193|28/Jan/2017|26:36:16|+0800|ПОЛУЧЕНИЕ|search.php|HTTP|1,1|400|1777|www.bing.com|-|Mozilla|4,0|compatible; MSIE 6.0; Windows NT 5.1|
|192.166.64.165|23/Mar/2017|01:55:25|-0800|ПОЛУЧЕНИЕ|style.css|HTTP|1,1|200|2552|www.google.com|http://www.test.com/index.html|Mozilla|5.0|Windows|
|11.167.1.193|16/Apr/2017|11:34:36|+0200|ПОЛУЧЕНИЕ|js/ads.js|HTTP|1,1|200|23462|www.microsoft.com|http://www.illustration.com/index.html|Mozilla|5.0|Windows|

## <a name="examples-of-splitting-without-delimiters"></a>Примеры разделения без разделителей
В некоторых случаях нет фактических разделителей и поля данных могут быть последовательно расположены друг за другом. В этом случае преобразование Split (Разделение) автоматически обнаруживает шаблоны в данных, чтобы определить вероятные точки разделения. Например, в указанном ниже сценарии нужно отделить сумму от типа валюты. Преобразование Split (Разделение) автоматически определяет границу между числовыми и нечисловыми данными в качестве точки разделения.

### <a name="splitting-amount-with-currency-symbol"></a>Разделение суммы с символом денежной единицы

|Сумма|Сумма_1|Сумма_2|
|:-----|:-----|:-----|
|\$14|$|14|
|£9|£|9|
|\$34|$|34|
|€ 18|€ |18|
|\$42|$|42|
|\$7|$|7|
|£42|£|42|
|\$16|$|16|
|€ 16|€ |16|
|\$15|$|15|
|\$16|$|16|
|€ 64|€ |64|

В следующем примере мы отделим значения веса от единиц измерения. Снова преобразование Split (Разделение) автоматически определяет понятные границы и отдает им предпочтение над другими возможными разделителями, такими как символ ".". 

### <a name="splitting-weights-with-units"></a>Разделение значений веса с единицами измерения

|Вес|Вес_1|Вес_2|
|:-----|:-----|:-----|
|2.27KG|2.27|KG|
|1L|1|L|
|2.5KG|2.5|KG|
|2KG|2|KG|
|1.7KGA|1.7|KGA|
|3KG|3|KG|
|2KG|2|KG|
|125G|125|G.|
|500G|500|G.|
|1.5KGA|1.5|KGA|

## <a name="technical-notes"></a>Технические примечания

Функция преобразования Split (Разделение) основана на методе **прогнозного программного синтеза**. При использовании этого метода программы преобразования данных обучаются автоматически на основе входных данных. Программы синтезируются на предметно-ориентированном языке. Предметно-ориентированный язык основан на разделителях и полях, которые возникают в определенных контекстах регулярных выражений. Дополнительные сведения об этом методе можно найти в [последних публикациях на эту тему](https://www.microsoft.com/en-us/research/publication/automated-data-extraction-using-predictive-program-synthesis/). 
