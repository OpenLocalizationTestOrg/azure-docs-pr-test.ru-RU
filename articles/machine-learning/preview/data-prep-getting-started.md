---
title: "Начало работы со службой подготовки данных в Машинном обучении Azure | Документация Майкрософт"
description: "Это руководство по началу работы со службой подготовки данных в AML Workbench"
services: machine-learning
author: cforbe
ms.author: cforbe
manager: mwinkle
ms.reviewer: garyericson, jasonwhowell, mldocs
ms.service: machine-learning
ms.workload: data-services
ms.topic: article
ms.date: 09/07/2017
ms.openlocfilehash: 8f90bcb83233b1a2f1a5d342ee444e4b02d4927d
ms.sourcegitcommit: 68aec76e471d677fd9a6333dc60ed098d1072cfc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/18/2017
---
# <a name="getting-started-with-data-preparation"></a>Начало работы со службой подготовки данных

Предлагаем вашему вниманию руководство по началу работы со службой подготовки данных. 

Служба подготовки данных предоставляет набор средств для эффективного просмотра, анализа данных и устранения проблем в них. Вы сможете получать данные в самых разных формах и преобразовывать их в очищенный формат, пригодный для применения на последующих этапах.

Служба подготовки данных устанавливается в составе Azure Machine Learning Workbench.  Вы можете использовать эту службу локально или развертывать ее в качестве среды выполнения в целевой кластер или облако.

Среда выполнения времени разработки использует Python для расширения возможностей, поэтому зависит от нескольких библиотек Python (например, Pandas). Но для использования службы подготовки данных, как и других компонентов Azure ML Workbench, вам не нужно устанавливать Python отдельно, так как он устанавливается автоматически. Если же вам понадобятся дополнительные библиотеки, их следует устанавливать в каталог Python в Azure ML Workbench, а не в обычный каталог Python. Дополнительные сведения об установке пакетов вы найдете [здесь](data-prep-python-extensibility-overview.md).

Прежде чем использовать подготовку данных, нужно создать проект. 

Перейдите в раздел данных проекта, выбрав значок данных ![значок источника данных](media/data-prep-getting-started/data-source-icon.png) в левой части экрана.  Нажмите кнопку "+", чтобы **добавить источник данных**. Откроется мастер источников данных, который добавляет файл **источника данных** (.dsource) в проект. По умолчанию данные отображаются в виде сетки. Над сеткой есть элемент, позволяющий переключиться на представление метрик. В представлении метрик отображаются сводные статистические данные.  Просмотрев сводные статистические данные, нажмите кнопку **Подготовка** в верхней части экрана. [Дополнительные сведения о Мастере источников данных](data-source-wizard.md) 

## <a name="building-blocks-of-data-preparation"></a>Стандартные блоки службы подготовки данных ##
### <a name="the-package"></a>Пакет ###

Пакет является основным контейнером для работы. Именно пакет сохраняется на диск и загружается с диска. При работе в клиенте постоянно выполняется автоматическое сохранение пакета в фоновом режиме. 

Выходные данные (результаты) пакета можно изучать с помощью Python или записной книжки Jupyter.

Пакет можно выполнять в разных средах выполнения, например в локальных средах Python, Spark (в том числе в Docker) и HDInsight.

Пакет содержит один или несколько потоков данных, которые содержат действия и преобразования, применяемые к набору данных.

Пакет может использовать другой пакет в качестве источника данных (этот другой пакет будет называться "справочным потоком данных").

### <a name="the-dataflow"></a>Поток данных ###
Поток данных имеет источник и может включать несколько преобразований, которые упорядочиваются в последовательность шагов и для которых можно указать назначения. Щелкните любой шаг, чтобы повторно опросить все источники данных и применить преобразования вплоть до этого шага включительно.  В сетке отобразятся преобразованные данные после этого шага. Вы можете добавлять, перемещать и удалять шаги в потоке данных с помощью списка шагов.

Список шагов расположен в клиенте с правой стороны. Его можно закрыть, чтобы увеличить доступное на экране место, а затем снова открыть.

В пользовательском интерфейсе могут отображаться сразу несколько потоков данных, каждый из которых представлен на отдельной вкладке.

### <a name="the-source"></a>Источник
Источник определяет расположение и формат поступающих данных. Для пакета подготовки данных источником всегда является другой поток данных. Это будет справочный поток данных, содержащий нужные сведения. Для разных источников используются разные процессы настройки. Источник предоставляет данные в прямоугольном (табличном) виде. Если источник данных содержит данные без выравнивания по правому краю, его структура нормализуется до прямоугольной. [Приложение 2 содержит список поддерживаемых в настоящее время источников](data-prep-appendix2-supported-data-sources.md).

### <a name="the-transform"></a>Преобразование ###
Преобразование получает данные в заданном формате, выполняет с ними некоторые операции (например, изменяет тип данных) и выводит полученные данные в новом формате. Для разных преобразований применяются разные интерфейсы и реакции на события. Основной функцией системы подготовки данных является последовательное объединение нескольких преобразований в шаги для потока данных. [Приложение 3 содержит список поддерживаемых в настоящее время преобразований](data-prep-appendix3-supported-transforms.md).

### <a name="the-inspector"></a>Инспектор ###

Инспекторы предоставляют визуализацию данных и позволяют улучшить их понимание.  Понимая содержимое и качество данных, можно выбрать для них правильные действия (преобразования). Некоторые инспекторы поддерживают действия, создающие преобразования. Например, инспектор Value Count (Число значений) позволяет выбрать значение и применить фильтр по строкам, содержащим или не содержащим это значение. Инспекторы также могут предоставить контекст для преобразования. Например, при выборе одного или нескольких столбцов может измениться набор доступных преобразований.

Столбец в любой момент времени может иметь несколько инспекторов (например, Column Statistics (Статистика по столбцам) и Histogram (Гистограмма)). Также можно создать экземпляры инспекторов для нескольких столбцов. Например, можно применить гистограммы ко всем числовым столбцам одновременно.

Инспекторы отображаются в колодце профилирования в нижней части экрана.  Разверните инспектор, чтобы увидеть его крупнее в области основного содержимого. Сетку данных можно рассматривать как инспектор по умолчанию. Любой инспектор можно развернуть в область основного содержимого. При сворачивании инспекторы возвращаются из области основного содержимого в колодец профилирования. Чтобы настроить инспектор, щелкните значок карандаша в нужном инспекторе. Чтобы изменить порядок инспекторов в колодце профилирования, перетащите их в нужные места.

Некоторые инспекторы поддерживают режим Halo. В этом режиме отображаются значения или состояния до применения последнего преобразования. Старое значение отображается серым цветом, а текущее значение на переднем плане демонстрирует влияние преобразования. [Приложение 4 содержит список поддерживаемых в настоящее время инспекторов](data-prep-appendix4-supported-inspectors.md).

### <a name="the-destination"></a>Назначение
 Назначением называется расположение, в которое вы сохраняете или экспортируете данные, полученные в потоке данных. Для любого потока данных можно указать несколько назначений. Для разных назначений используются разные процессы настройки. Назначение принимает данные в прямоугольном (табличном) формате и записывает их в соответствии с настройками расположения и формата. [Приложение 5 содержит список поддерживаемых в настоящее время назначений](data-prep-appendix5-supported-destinations.md).

### <a name="using-data-preparation"></a>Использование службы подготовки данных ###
Служба подготовки данных представляет собой пятиступенчатую методологию подготовки данных.

#### <a name="step-1-ingestion"></a>Шаг 1. Прием ####
Импорт данных в службу подготовки данных с помощью параметра **Добавить источник данных** в представлении проекта.  Любое первичное получение данных выполняется через мастер источников данных.

#### <a name="step-2-understandprofile-the-data"></a>Шаг 2. Понимание и профилирование данных ####

Прежде всего следует обратить внимание на шкалу качества данных в верхней части каждого столбца. Зеленым цветом обозначены строки со значениями. Серым цветом обозначены строки без значения, строки со значением null и т. п. Красный цвет обозначает ошибки. Наведите указатель мыши на эту шкалу, чтобы увидеть всплывающую подсказку с точным количеством строк, относящихся к этим трем категориям. Шкала качества данных использует логарифмические значения, поэтому, чтобы узнать объем недостающих данных, желательно проверить фактические значения.

![columns](media/data-prep-getting-started/columns.png)

После этого примените другие инспекторы и сетку, чтобы лучше понять характеристики данных.  Сначала представьте, какая подготовка данных потребуется для дальнейшего анализа. Большинство инспекторов действуют для одного столбца или небольшого числа столбцов.  

Вполне вероятно, вам потребуется несколько инспекторов по нескольким столбцам, чтобы понять данные. Прокрутив колодец профилирования, вы можете изучить доступные инспекторы. В этом колодце вы можете переместить инспекторы в начало списка, чтобы они постоянно были на виду.

![Инспекторы](media/data-prep-getting-started/inspectors.PNG)

Для непрерывных и категориальных переменных и столбцов доступны разные виды инспекторов. В меню инспекторов могут появляться и исчезать доступные варианты в зависимости от типа используемых переменных и (или) столбцов.

Если вы используете расширенный набор данных с большим числом столбцов, рекомендуем применить прагматичный подход к работе с подмножествами. Он заключается в том, что вы занимаетесь небольшим количеством столбцов (примерно от 5 до 10), подготавливаете их и лишь затем переходите к следующей группе столбцов. Инспектор сетки поддерживает вертикальное секционирование столбцов. Если в вашем наборе данных более 300 столбцов, они будут представлены несколькими страницами, которые можно "перелистывать".
 

#### <a name="step-3-transform-the-data"></a>Шаг 3. Преобразование данных ####
Преобразование изменяет данные и позволяет выполнить с ними некоторые действия для проверки рабочей гипотезы. Преобразования отображаются в виде шагов в списке шагов с правой стороны. В списке шагов вы можете использовать "Переход во времени", выбирая произвольную точку в списке шагов.

Зеленый значок слева от каждого шага указывает, был ли он выполнен и отражены ли его результаты в отображаемых данных. Вертикальная черта слева от шага обозначает текущее состояние данных в инспекторах.

![steps](media/data-prep-getting-started/steps.PNG)

Старайтесь вносить изменения в данные небольшими порциями и проверяйте результаты (шаг 4) после каждого изменения и корректировки гипотезы.

#### <a name="step-4-verify-the-impact-of-the-transformation"></a>Шаг 4. Проверка влияния преобразований 
Оцените, было ли предположение верным. Если все нормально, создайте следующее предположение и повторите для него шаги 2 и 3. Если предположение оказалось неверным, отмените последнее преобразование, создайте новую гипотезу и повторите для нее шаги 2 и 3.

Основной способ оценки влияния преобразования заключается в применении инспекторов. Используйте существующие инспекторы. Используйте инспекторы с поддержкой Halo или запустите несколько инспекторов для просмотра данных в разные моменты времени.

![Инспектор с поддержкой Halo](media/data-prep-getting-started/halo1.PNG) ![Инспектор с поддержкой Halo](media/data-prep-getting-started/halo2.PNG)

Чтобы отменить преобразование, используйте список шагов в правой части интерфейса. Возможно, для этого потребуется снова открыть панель со списком шагов. Для этого нажмите кнопку с двойным шевроном, направленным влево. На панели списка шагов выберите выполненное преобразование, которое вы хотите отменить. Выберите раскрывающийся список на правой стороне интерфейсного блока. Выберите действие **Изменить**, чтобы внести изменения, или **Удалить**, чтобы убрать это преобразование из списка шагов и потока данных.

#### <a name="step-5-output"></a>Шаг 5. Выходные данные 
Когда вы завершите подготовку данных, можно записать поток данных в выходные данные. Поток данных может иметь много выходных данных. В меню преобразований можно выбрать, в какие выходные данные нужно сохранить поток данных. Для выводных данных также можно выбрать назначение. 

## <a name="list-of-appendices"></a>Список приложений 
[Supported data sources for this release](data-prep-appendix2-supported-data-sources.md) (Поддерживаемые источники данных в этом выпуске)  
[Supported Transforms for this release](data-prep-appendix3-supported-transforms.md) (Поддерживаемые типы преобразований в этом выпуске)  
[Supported Inspectors for this preview](data-prep-appendix4-supported-inspectors.md) (Поддерживаемые инспекторы в этой предварительной версии)  
[Supported data exports for this preview](data-prep-appendix5-supported-destinations.md) (Поддерживаемые типы экспорта данных в этой предварительной версии)  
[Sample of filter expressions (Python)](data-prep-appendix6-sample-filter-expressions-python.md) (Примеры выражений фильтра в Python)  
[Sample of custom data flow transforms (Python)](data-prep-appendix7-sample-transform-data-flow-python.md) (Примеры выражений трансформации потока данных в Python)  
[Sample of custom source connections (Python)](data-prep-appendix8-sample-source-connections-python.md) (Примеры подключений к пользовательским источникам данных в Python)  
[Sample of destination connections (Python)](data-prep-appendix9-sample-destination-connections-python.md) (Примеры подключений к назначениям в Python)  
[Sample of custom column transforms (Python)](data-prep-appendix10-sample-custom-column-transforms-python.md) (Примеры преобразований столбцов в Python)  

## <a name="see-also"></a>См. также

[Руководство по расширенной подготовке данных](tutorial-bikeshare-dataprep.md)