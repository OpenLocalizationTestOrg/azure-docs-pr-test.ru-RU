---
title: "API выставления счетов Azure | Документация Майкрософт"
description: "Сведения об интерфейсах API использования и RateCard для выставления счетов Azure, которые применяются для получения ценных сведений о потреблении ресурсов Azure и соответствующих тенденциях."
services: 
documentationcenter: 
author: BryanLa
manager: tonguyen
editor: 
tags: billing
ms.assetid: 3e817b43-0696-400c-a02e-47b7817f9b77
ms.service: billing
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: billing
ms.date: 04/18/2017
ms.author: mobandyo;bryanla
ms.openlocfilehash: 394ed29ed468fe80f47a6517c9521a81a5ddb7fd
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="use-azure-billing-apis-to-programmatically-get-insight-into-your-azure-usage"></a><span data-ttu-id="f8f34-103">Использование API выставления счетов Azure для программного получения ценных сведений об использовании Azure</span><span class="sxs-lookup"><span data-stu-id="f8f34-103">Use Azure Billing APIs to programmatically get insight into your Azure usage</span></span>
<span data-ttu-id="f8f34-104">Используйте API выставления счетов Azure для извлечения данных об использовании и ресурсах в предпочитаемые средства анализа данных.</span><span class="sxs-lookup"><span data-stu-id="f8f34-104">Use Azure Billing APIs to pull usage and resource data into your preferred data analysis tools.</span></span> <span data-ttu-id="f8f34-105">API использования ресурсов и RateCard в Azure позволяют точно прогнозировать расходы и управлять ими.</span><span class="sxs-lookup"><span data-stu-id="f8f34-105">The Azure Resource Usage and RateCard APIs can help you accurately predict and manage your costs.</span></span> <span data-ttu-id="f8f34-106">Интерфейсы API реализованы в виде поставщика ресурсов и относятся к семейству API, предоставляемых Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="f8f34-106">The APIs are implemented as a Resource Provider and part of the family of APIs exposed by the Azure Resource Manager.</span></span>  

## <a name="azure-invoice-download-api-preview"></a><span data-ttu-id="f8f34-107">API для скачивания счетов Azure (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="f8f34-107">Azure Invoice Download API (Preview)</span></span>
<span data-ttu-id="f8f34-108">Один раз [предоставив согласие](billing-manage-access.md#opt-in), вы можете скачивать счета с помощью предварительной версии [API счетов](/rest/api/billing).</span><span class="sxs-lookup"><span data-stu-id="f8f34-108">Once the [opt-in has been complete](billing-manage-access.md#opt-in), download invoices using the preview version of [Invoice API](/rest/api/billing).</span></span> <span data-ttu-id="f8f34-109">Доступны следующие функции:</span><span class="sxs-lookup"><span data-stu-id="f8f34-109">The features include:</span></span>

* <span data-ttu-id="f8f34-110">**Управление доступом на основе ролей Azure**. Настройте политики доступа на [портале Azure](https://portal.azure.com) или с помощью [командлетов Azure PowerShell](/powershell/azure/overview), чтобы указать, какие пользователи или приложения могут получить доступ к данным об использовании в рамках подписки.</span><span class="sxs-lookup"><span data-stu-id="f8f34-110">**Azure Role-based Access Control** - Configure access policies on the [Azure portal](https://portal.azure.com) or through [Azure PowerShell cmdlets](/powershell/azure/overview) to specify which users or applications can get access to the subscription’s usage data.</span></span> <span data-ttu-id="f8f34-111">Вызывающие объекты должны использовать стандартные маркеры Azure Active Directory для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="f8f34-111">Callers must use standard Azure Active Directory tokens for authentication.</span></span> <span data-ttu-id="f8f34-112">Добавьте вызывающий объект в роль читателя счетов, читателя, владельца или участника, чтобы получить доступ к данным об использовании для конкретной подписки Azure.</span><span class="sxs-lookup"><span data-stu-id="f8f34-112">Add the caller to either the Billing Reader, Reader, Owner, or Contributor role to get access to the usage data for a specific Azure subscription.</span></span>
* <span data-ttu-id="f8f34-113">**Фильтрация дат** — используйте параметр `$filter` для получения всех счетов в обратном хронологическом порядке по дате окончания расчетного периода.</span><span class="sxs-lookup"><span data-stu-id="f8f34-113">**Date Filtering** - Use the `$filter` parameter to get all the invoices in reverse chronological order by the invoice period end date.</span></span> 

> [!NOTE]
> <span data-ttu-id="f8f34-114">Эта функция находится на первом этапе предварительной версии, поэтому для нее может не обеспечиваться обратная совместимость.</span><span class="sxs-lookup"><span data-stu-id="f8f34-114">This feature is in first version of preview and may be subject to backward-incompatible changes.</span></span> <span data-ttu-id="f8f34-115">Сейчас она недоступна для определенных предложений подписки (не поддерживаются EA, CSP, AIO), а также в Azure для Германии.</span><span class="sxs-lookup"><span data-stu-id="f8f34-115">Currently, it's not available for certain subscription offers (EA, CSP, AIO not supported) and Azure Germany.</span></span>

## <a name="azure-resource-usage-api-preview"></a><span data-ttu-id="f8f34-116">API использования ресурсов Azure (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="f8f34-116">Azure Resource Usage API (Preview)</span></span>
<span data-ttu-id="f8f34-117">Применяйте [API использования ресурсов](https://msdn.microsoft.com/library/azure/mt219003) Azure для получения оценочных данных об уровне потребления Azure.</span><span class="sxs-lookup"><span data-stu-id="f8f34-117">Use the Azure [Resource Usage API](https://msdn.microsoft.com/library/azure/mt219003) to get your estimated Azure consumption data.</span></span> <span data-ttu-id="f8f34-118">API включает в себя следующие функции:</span><span class="sxs-lookup"><span data-stu-id="f8f34-118">The API includes:</span></span>

* <span data-ttu-id="f8f34-119">**Управление доступом на основе ролей Azure**. Настройте политики доступа на [портале Azure](https://portal.azure.com) или с помощью [командлетов Azure PowerShell](/powershell/azure/overview), чтобы указать, какие пользователи или приложения могут получить доступ к данным об использовании в рамках подписки.</span><span class="sxs-lookup"><span data-stu-id="f8f34-119">**Azure Role-based Access Control** - Configure access policies on the [Azure portal](https://portal.azure.com) or through [Azure PowerShell cmdlets](/powershell/azure/overview) to specify which users or applications can get access to the subscription’s usage data.</span></span> <span data-ttu-id="f8f34-120">Вызывающие объекты должны использовать стандартные маркеры Azure Active Directory для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="f8f34-120">Callers must use standard Azure Active Directory tokens for authentication.</span></span> <span data-ttu-id="f8f34-121">Добавьте вызывающий объект в роль читателя счетов, читателя, владельца или участника, чтобы получить доступ к данным об использовании для конкретной подписки Azure.</span><span class="sxs-lookup"><span data-stu-id="f8f34-121">Add the caller to either the Billing Reader, Reader, Owner, or Contributor role to get access to the usage data for a specific Azure subscription.</span></span>
* <span data-ttu-id="f8f34-122">**Hourly or Daily Aggregations** (Агрегирование по часам или по дням) — вызывающие объекты могут указать, требуется ли получать данные об использовании Azure сегментами за каждый час или за каждый день.</span><span class="sxs-lookup"><span data-stu-id="f8f34-122">**Hourly or Daily Aggregations** - Callers can specify whether they want their Azure usage data in hourly buckets or daily buckets.</span></span> <span data-ttu-id="f8f34-123">По умолчанию используется получение сегментов за каждый день.</span><span class="sxs-lookup"><span data-stu-id="f8f34-123">The default is daily.</span></span>
* <span data-ttu-id="f8f34-124">**Instance metadata (includes resource tags)** (Метаданные экземпляров, включая теги ресурсов). Сведения уровня экземпляра, например полный URI-код ресурса (/subscriptions/{идентификатор подписки}/..), информация о группе ресурсов и теги ресурсов.</span><span class="sxs-lookup"><span data-stu-id="f8f34-124">**Instance metadata (includes resource tags)** – Get instance-level detail like the fully qualified resource uri (/subscriptions/{subscription-id}/..), the resource group information, and resource tags.</span></span> <span data-ttu-id="f8f34-125">Эти метаданные помогут вам детерминированно и программно распределять использование по тегам для таких вариантов использования, как перекрестное выставление счетов.</span><span class="sxs-lookup"><span data-stu-id="f8f34-125">This metadata helps you deterministically and programmatically allocate usage by the tags, for use-cases like cross-charging.</span></span>
* <span data-ttu-id="f8f34-126">**Resource metadata** (Метаданные ресурсов). Сведения о ресурсах, такие как имя индикатора, категория индикатора, подкатегория индикатора, единица измерения и регион, позволяющие клиентам получить более полное представление о потребленных ресурсах.</span><span class="sxs-lookup"><span data-stu-id="f8f34-126">**Resource metadata** - Resource details such as the meter name, meter category, meter sub category, unit, and region give the caller a better understanding of what was consumed.</span></span> <span data-ttu-id="f8f34-127">Мы также работаем над согласованием терминологии метаданных для портала Azure, файлов сведений об использовании Azure, файлов сведений о выставлении счетов по EA и других общедоступных механизмов, чтобы разрешить вам соотносить данные из разных областей.</span><span class="sxs-lookup"><span data-stu-id="f8f34-127">We're also working to align resource metadata terminology across the Azure portal, Azure usage CSV, EA billing CSV, and other public-facing experiences, to let you correlate data across experiences.</span></span>
* <span data-ttu-id="f8f34-128">**Usage for all offer types** (Использование для всех видов предложений). Данные об использовании доступны для всех видов предложений, таких как оплата по мере использования, MSDN, денежные обязательства, денежный кредит и EA.</span><span class="sxs-lookup"><span data-stu-id="f8f34-128">**Usage for all offer types** – Usage data is available for all offer types like Pay-as-you-go, MSDN, Monetary commitment, Monetary credit, and EA.</span></span>

## <a name="azure-resource-ratecard-api-preview"></a><span data-ttu-id="f8f34-129">API RateCard по ресурсам Azure (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="f8f34-129">Azure Resource RateCard API (Preview)</span></span>
<span data-ttu-id="f8f34-130">Используйте [API RateCard по ресурсам Azure](https://msdn.microsoft.com/library/azure/mt219005) для получения списка доступных ресурсов Azure, а также примерной стоимости каждого из них.</span><span class="sxs-lookup"><span data-stu-id="f8f34-130">Use the [Azure Resource RateCard API](https://msdn.microsoft.com/library/azure/mt219005) to get the list of available Azure resources and estimated pricing information for each.</span></span> <span data-ttu-id="f8f34-131">API включает в себя следующие функции:</span><span class="sxs-lookup"><span data-stu-id="f8f34-131">The API includes:</span></span>

* <span data-ttu-id="f8f34-132">**Управление доступом на основе ролей Azure**. Настройте политики доступа на [портале Azure](https://portal.azure.com) или с помощью [командлетов Azure PowerShell](/powershell/azure/overview), чтобы указать, какие пользователи или приложения могут получить доступ к данным RateCard.</span><span class="sxs-lookup"><span data-stu-id="f8f34-132">**Azure Role-based Access Control** - Configure your access policies on the [Azure portal](https://portal.azure.com) or through [Azure PowerShell cmdlets](/powershell/azure/overview) to specify which users or applications can get access to the RateCard data.</span></span> <span data-ttu-id="f8f34-133">Вызывающие объекты должны использовать стандартные маркеры Azure Active Directory для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="f8f34-133">Callers must use standard Azure Active Directory tokens for authentication.</span></span> <span data-ttu-id="f8f34-134">Добавьте вызывающий объект в роль читателя, владельца или участника, чтобы получить доступ к данным об использовании для конкретной подписки Azure.</span><span class="sxs-lookup"><span data-stu-id="f8f34-134">Add the caller to either the Reader, Owner, or Contributor role to get access to the usage data for a particular Azure subscription.</span></span>
* <span data-ttu-id="f8f34-135">**Support for Pay-as-you-go, MSDN, Monetary commitment, and Monetary credit offers (EA not supported)** (Поддержка оплаты по мере использования, MSDN, денежных обязательств, денежного кредита, EA не поддерживается). Этот API предоставляет сведения о тарифах Azure на уровне предложений.</span><span class="sxs-lookup"><span data-stu-id="f8f34-135">**Support for Pay-as-you-go, MSDN, Monetary commitment, and Monetary credit offers (EA not supported)** - This API provides Azure offer-level rate information.</span></span>  <span data-ttu-id="f8f34-136">Вызывающий объект этого API должен передать сведения о предложении, чтобы получить информацию о ресурсах и тарифы.</span><span class="sxs-lookup"><span data-stu-id="f8f34-136">The caller of this API must pass in the offer information to get resource details and rates.</span></span> <span data-ttu-id="f8f34-137">Так как в рамках EA действуют специальные тарифы для каждой регистрации, в настоящее время мы не можем предоставить сведения о тарифах для EA.</span><span class="sxs-lookup"><span data-stu-id="f8f34-137">We're currently unable to provide EA rates because EA offers have customized rates per enrollment.</span></span> 

## <a name="scenarios"></a><span data-ttu-id="f8f34-138">Сценарии</span><span class="sxs-lookup"><span data-stu-id="f8f34-138">Scenarios</span></span>
<span data-ttu-id="f8f34-139">Ниже приведено несколько сценариев, которые становятся возможными благодаря сочетанию API использования и RateCard.</span><span class="sxs-lookup"><span data-stu-id="f8f34-139">Here are some of the scenarios that are made possible with the combination of the Usage and the RateCard APIs:</span></span>

* <span data-ttu-id="f8f34-140">**Azure spend during the month** (Затраты на Azure в течение месяца). Используйте сочетание API использования и RateCard, чтобы получить более ценные сведения о затратах на облако в течение месяца.</span><span class="sxs-lookup"><span data-stu-id="f8f34-140">**Azure spend during the month** - Use the combination of the Usage and RateCard APIs to get better insights into your cloud spend during the month.</span></span> <span data-ttu-id="f8f34-141">Вы можете анализировать данные оценки использования и затрат сегментами за каждый час или за каждый день.</span><span class="sxs-lookup"><span data-stu-id="f8f34-141">You can analyze the hourly and daily buckets of usage and charge estimates.</span></span>
* <span data-ttu-id="f8f34-142">**Set up alerts** (Настройка оповещений). API использования и RateCard можно использовать для получения оценочных показателей потребления облака и издержек, а также настройки оповещений на основе ресурсов или денежных средств.</span><span class="sxs-lookup"><span data-stu-id="f8f34-142">**Set up alerts** – Use the Usage and the RateCard APIs to get estimated cloud consumption and charges, and set up resource-based or monetary-based alerts.</span></span>
* <span data-ttu-id="f8f34-143">**Predict bill** (Прогнозирование счета). Получите оценочные показатели потребления и издержек для облака и примените алгоритмы машинного обучения, чтобы спрогнозировать сумму счета в конце цикла выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="f8f34-143">**Predict bill** – Get your estimated consumption and cloud spend, and apply machine learning algorithms to predict what the bill would be at the end of the billing cycle.</span></span>
* <span data-ttu-id="f8f34-144">**Pre-consumption cost analysis** (Анализ затрат до потребления). Используйте API RateCard, чтобы спрогнозировать размер счета для ожидаемого использования в случае переноса рабочих нагрузок в Azure.</span><span class="sxs-lookup"><span data-stu-id="f8f34-144">**Pre-consumption cost analysis** – Use the RateCard API to predict how much your bill would be for your expected usage when you move your workloads to Azure.</span></span> <span data-ttu-id="f8f34-145">При наличии имеющихся рабочих нагрузок в других облаках и частных облаках можно также сопоставить использование с тарифами Azure, чтобы точнее определить расходы Azure.</span><span class="sxs-lookup"><span data-stu-id="f8f34-145">If you have existing workloads in other clouds or private clouds, you can also map your usage with the Azure rates to get a better estimate of Azure spend.</span></span> <span data-ttu-id="f8f34-146">Данная оценка предоставляет возможность получения сводки по предложению, а также сравнения и противопоставления разных типов предложений, выходящих за рамки оплаты по мере использования, таких как денежные обязательства и денежный кредит.</span><span class="sxs-lookup"><span data-stu-id="f8f34-146">This estimate gives you the ability to pivot on offer, and compare and contrast between the different offer types beyond Pay-As-You-Go, like Monetary commitment and Monetary credit.</span></span> <span data-ttu-id="f8f34-147">API также позволяют оценить разницу в затратах по регионам, в результате чего становится возможен анализ "что если", необходимый для принятия решений о развертывании.</span><span class="sxs-lookup"><span data-stu-id="f8f34-147">The API also gives you the ability to see cost differences by region and allows you to do a what-if cost analysis to help you make deployment decisions.</span></span>
* <span data-ttu-id="f8f34-148">**What-if analysis** -</span><span class="sxs-lookup"><span data-stu-id="f8f34-148">**What-if analysis** -</span></span>
  
  * <span data-ttu-id="f8f34-149">Вы можете определить, выгоднее ли выполнять рабочие нагрузки в другом регионе или с другой конфигурацией ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="f8f34-149">You can determine whether it is more cost-effective to run workloads in another region, or on another configuration of the Azure resource.</span></span> <span data-ttu-id="f8f34-150">Стоимость ресурсов Azure может отличаться в зависимости от используемого региона Azure.</span><span class="sxs-lookup"><span data-stu-id="f8f34-150">Azure resource costs may differ based on the Azure region you're using.</span></span>
  * <span data-ttu-id="f8f34-151">Вы также можете определить, предоставляет ли другое предложение Azure более выгодный тариф на ресурс Azure.</span><span class="sxs-lookup"><span data-stu-id="f8f34-151">You can also determine if another Azure offer type gives a better rate on an Azure resource.</span></span>
  
## <a name="partner-solutions"></a><span data-ttu-id="f8f34-152">Решения партнеров</span><span class="sxs-lookup"><span data-stu-id="f8f34-152">Partner solutions</span></span>
<span data-ttu-id="f8f34-153">В статье [API использования и RateCard Microsoft Azure позволяют Cloudyn предоставлять ITFM-функции своим клиентам](billing-usage-rate-card-partner-solution-cloudyn.md) описывается интеграция механизмов, предоставляемых партнером по API выставления счетов Azure — [Cloudyn](https://www.cloudyn.com/microsoft-azure/).</span><span class="sxs-lookup"><span data-stu-id="f8f34-153">[Microsoft Azure Usage and RateCard APIs Enable Cloudyn to Provide ITFM for Customers](billing-usage-rate-card-partner-solution-cloudyn.md) describes the integration experience offered by Azure Billing API partner [Cloudyn](https://www.cloudyn.com/microsoft-azure/).</span></span> <span data-ttu-id="f8f34-154">В этой статье содержится описание полученного опыта, а также видео, где показано, как можно использовать API выставления счетов Azure и Cloudyn для извлечения ценных сведений из данных о потреблении Azure.</span><span class="sxs-lookup"><span data-stu-id="f8f34-154">This article talks about their experiences and includes a video that shows how you can use Cloudyn and the Azure Billing APIs to get insights from Azure consumption data.</span></span>

<span data-ttu-id="f8f34-155">В статье [Интеграция Cloud Cruiser и API выставления счетов Microsoft Azure](billing-usage-rate-card-partner-solution-cloudcruiser.md) описано, как [пакет Cloud Cruiser Express для Azure](http://www.cloudcruiser.com/partners/microsoft/) работает непосредственно с портала Windows Azure Pack (WAP).</span><span class="sxs-lookup"><span data-stu-id="f8f34-155">[Cloud Cruiser and Microsoft Azure Billing API Integration](billing-usage-rate-card-partner-solution-cloudcruiser.md) describes how [Cloud Cruiser's Express for Azure Pack](http://www.cloudcruiser.com/partners/microsoft/) works directly from the Windows Azure Pack (WAP) portal.</span></span> <span data-ttu-id="f8f34-156">Вы можете легко управлять рабочими и финансовыми аспектами частного или общедоступного облака Microsoft Azure из единого пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="f8f34-156">You can seamlessly manage both the operational and financial aspects of the Microsoft Azure private or hosted public cloud from a single user interface.</span></span>   

## <a name="next-steps"></a><span data-ttu-id="f8f34-157">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="f8f34-157">Next steps</span></span>
* <span data-ttu-id="f8f34-158">Вы можете ознакомиться с примерами кода в GitHub:</span><span class="sxs-lookup"><span data-stu-id="f8f34-158">Check out the code samples on GitHub:</span></span>
  * [<span data-ttu-id="f8f34-159">Пример кода API счетов</span><span class="sxs-lookup"><span data-stu-id="f8f34-159">Invoice API code sample</span></span>](https://go.microsoft.com/fwlink/?linkid=845124)

  * [<span data-ttu-id="f8f34-160">Пример кода API использования</span><span class="sxs-lookup"><span data-stu-id="f8f34-160">Usage API code sample</span></span>](https://github.com/Azure-Samples/billing-dotnet-usage-api)

  * [<span data-ttu-id="f8f34-161">Пример кода API RateCard</span><span class="sxs-lookup"><span data-stu-id="f8f34-161">RateCard API code sample</span></span>](https://github.com/Azure-Samples/billing-dotnet-ratecard-api)

* <span data-ttu-id="f8f34-162">Дополнительные сведения о Azure Resource Manager см. в статье [Обзор Azure Resource Manager](../azure-resource-manager/resource-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f8f34-162">To learn more about the Azure Resource Manager, see [Azure Resource Manager Overview](../azure-resource-manager/resource-group-overview.md).</span></span> 

* <span data-ttu-id="f8f34-163">Дополнительные сведения о наборе средств, необходимых для получения представления о расходах на облако, см. в статье Gartner [Market Guide for IT Financial Management (ITFM) Tools](http://www.gartner.com/technology/reprints.do?id=1-212F7AL&ct=140909&st=sb) (Руководство по ИТ-средствам финансового управления (ITFM)).</span><span class="sxs-lookup"><span data-stu-id="f8f34-163">For more information on the suite of tools necessary to help you get an understanding of cloud spend, see the Gartner article [Market Guide for IT Financial Management (ITFM) Tools](http://www.gartner.com/technology/reprints.do?id=1-212F7AL&ct=140909&st=sb).</span></span>

