---
title: "Интеграция Cloud Cruiser и API выставления счетов Microsoft Azure | Документация Майкрософт"
description: "В нем описан уникальный опыт Cloud Cruiser — партнера по выставлению счетов Microsoft Azure — по интеграции API выставления счетов Azure в свои продукты.  Эти сведения особенно полезны для клиентов Azure и Cloud Cruiser, которые хотели бы использовать Cloud Cruiser для Microsoft Azure Pack или уже рассматривают такой вариант."
services: 
documentationcenter: 
author: BryanLa
manager: tonguyen
editor: 
tags: billing
ms.assetid: b65128cf-5d4d-4cbd-b81e-d3dceab44271
ms.service: billing
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: billing
ms.date: 02/03/2017
ms.author: mobandyo;sirishap;bryanla
ms.openlocfilehash: a05fe5e610f1f0ce216a4b84bf2873b0d081875d
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="cloud-cruiser-and-microsoft-azure-billing-api-integration"></a><span data-ttu-id="884eb-104">Интеграция Cloud Cruiser и API выставления счетов Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="884eb-104">Cloud Cruiser and Microsoft Azure Billing API Integration</span></span>
<span data-ttu-id="884eb-105">В этой статье описаны способы использования сведений, собранных из новых API выставления счетов Microsoft Azure , в Cloud Cruiser для моделирования и анализа стоимости рабочих процессов.</span><span class="sxs-lookup"><span data-stu-id="884eb-105">This article describes how the information collected from the new Microsoft Azure Billing APIs can be used in Cloud Cruiser for workflow cost simulation and analysis.</span></span>

## <a name="azure-ratecard-api"></a><span data-ttu-id="884eb-106">API RateCard Azure</span><span class="sxs-lookup"><span data-stu-id="884eb-106">Azure RateCard API</span></span>
<span data-ttu-id="884eb-107">API RateCard предоставляет информацию о тарифах в Azure.</span><span class="sxs-lookup"><span data-stu-id="884eb-107">The RateCard API provides rate information from Azure.</span></span> <span data-ttu-id="884eb-108">После прохождения проверки подлинности с помощью подходящих учетных данных вы можете направить в API запрос для сбора метаданных по доступным в Azure службам, а также сведений о тарифах, связанных с вашим идентификатором запроса.</span><span class="sxs-lookup"><span data-stu-id="884eb-108">After authenticating with the proper credentials, you can query the API to collect metadata about the services available on Azure, along with the rates associated with your Offer ID.</span></span>

<span data-ttu-id="884eb-109">Ниже приведен пример ответа из API, отображающий цены на экземпляр A0 (Windows).</span><span class="sxs-lookup"><span data-stu-id="884eb-109">The following is a sample response from the API showing the prices for the A0 (Windows) instance:</span></span>

    {
        "MeterId": "0e59ad56-03e5-4c3d-90d4-6670874d7e29",
        "MeterName": "Compute Hours",
        "MeterCategory": "Virtual Machines",
        "MeterSubCategory": "A0 VM (Windows)",
        "Unit": "Hours",
        "MeterRates":
        {
            "0": 0.029
        },
        "EffectiveDate": "2014-08-01T00:00:00Z",
        "IncludedQuantity": 0.0,
        "MeterStatus": "Active"
    },

### <a name="cloud-cruisers-interface-to-azure-ratecard-api"></a><span data-ttu-id="884eb-110">Интерфейс Cloud Cruiser для API RateCard Azure</span><span class="sxs-lookup"><span data-stu-id="884eb-110">Cloud Cruiser’s Interface to Azure RateCard API</span></span>
<span data-ttu-id="884eb-111">Cloud Cruiser может по-разному использовать сведения, полученные API RateCard.</span><span class="sxs-lookup"><span data-stu-id="884eb-111">Cloud Cruiser can leverage the RateCard API information in different ways.</span></span> <span data-ttu-id="884eb-112">В этой статье будет показано, как их использовать для моделирования и анализа стоимости рабочих процессов IaaS.</span><span class="sxs-lookup"><span data-stu-id="884eb-112">For this article, we will show how it can be used to make IaaS workload cost simulation and analysis.</span></span>

<span data-ttu-id="884eb-113">Для демонстрации данного варианта использования представьте себе рабочую нагрузку нескольких экземпляров, работающих в Microsoft Azure Pack (WAP).</span><span class="sxs-lookup"><span data-stu-id="884eb-113">To demonstrate this use case, imagine a workload of several instances running on Microsoft Azure Pack (WAP).</span></span> <span data-ttu-id="884eb-114">Целью является моделирование  той же самой рабочей нагрузки в Azure и оценка затрат на осуществление такой миграции.</span><span class="sxs-lookup"><span data-stu-id="884eb-114">The goal is to simulate this same workload on Azure, and estimate the costs of doing such migration.</span></span> <span data-ttu-id="884eb-115">Чтобы обеспечить такое моделирование, необходимо выполнить две основные задачи:</span><span class="sxs-lookup"><span data-stu-id="884eb-115">In order to create this simulation, there are two main tasks to be performed:</span></span>

1. <span data-ttu-id="884eb-116">**Импорт и обработка информации о службе, полученной из API RateCard.**</span><span class="sxs-lookup"><span data-stu-id="884eb-116">**Import and process the service information collected from the RateCard API.**</span></span> <span data-ttu-id="884eb-117">Эта задача также выполняется с книгами, где извлеченные из API RateCard сведения преобразуются и публикуются в новом тарифном плане.</span><span class="sxs-lookup"><span data-stu-id="884eb-117">This task is also performed on the workbooks, where the extract from the RateCard API is transformed and published to a new rate plan.</span></span> <span data-ttu-id="884eb-118">Этот новый тарифный план будет использоваться при моделировании для оценки цен Azure.</span><span class="sxs-lookup"><span data-stu-id="884eb-118">This new rate plan will be used on the simulations to estimate the Azure prices.</span></span>
2. <span data-ttu-id="884eb-119">**Нормализация служб WAP и служб Azure для IaaS.**</span><span class="sxs-lookup"><span data-stu-id="884eb-119">**Normalize WAP services and Azure services for IaaS.**</span></span> <span data-ttu-id="884eb-120">По умолчанию службы WAP основаны на отдельных ресурсах (ЦП, объем памяти, размер диска и т. д.), а службы Azure основаны на размере экземпляра (A0, A1, A2 и т. д.).</span><span class="sxs-lookup"><span data-stu-id="884eb-120">By default, WAP services are based on individual resources (CPU, Memory Size, Disk Size, etc.) while Azure services are based on instance size (A0, A1, A2, etc.).</span></span> <span data-ttu-id="884eb-121">Первую задачу может выполнить ядро извлечения, преобразования и загрузки Cloud Cruiser, которое называется книгами, где эти ресурсы могут объединяться по размерам экземпляров, аналогично службам экземпляров Azure.</span><span class="sxs-lookup"><span data-stu-id="884eb-121">This first task can be performed by Cloud Cruiser’s ETL engine, called workbooks, where these resources can be bundled on instance sizes, analogous to Azure instance services.</span></span>

### <a name="import-data-from-the-ratecard-api"></a><span data-ttu-id="884eb-122">Импорт данных из API RateCard</span><span class="sxs-lookup"><span data-stu-id="884eb-122">Import data from the RateCard API</span></span>
<span data-ttu-id="884eb-123">Книги Cloud Cruiser предоставляют автоматический метод сбора и обработки информации из API RateCard.</span><span class="sxs-lookup"><span data-stu-id="884eb-123">Cloud Cruiser workbooks provide an automated way to collect and process information from the RateCard API.</span></span>  <span data-ttu-id="884eb-124">Книги извлечения, преобразования и загрузки позволяют настраивать сбор, преобразование и публикацию данных в базе данных Cloud Cruiser.</span><span class="sxs-lookup"><span data-stu-id="884eb-124">ETL (extract-transform-load) workbooks allow you to configure the collection, transformation, and publishing of data into the Cloud Cruiser database.</span></span>

<span data-ttu-id="884eb-125">В каждой книге может быть одна или несколько коллекций. Это позволяет сопоставлять данные из разных источников для дополнения или расширения данных об использовании.</span><span class="sxs-lookup"><span data-stu-id="884eb-125">Each workbook can have one or multiple collections, allowing you to correlate information from different sources to complement or augment the usage data.</span></span> <span data-ttu-id="884eb-126">На двух снимках экрана ниже показано создание новой *коллекции* в существующей книге и импорт данных из API RateCard в эту *коллекцию*.</span><span class="sxs-lookup"><span data-stu-id="884eb-126">The following two screenshots show how to create a new *collection* in an existing workbook, and importing information into the *collection* from the RateCard API:</span></span>

<span data-ttu-id="884eb-127">![Рис. 1. Создание коллекции][1]</span><span class="sxs-lookup"><span data-stu-id="884eb-127">![Figure 1 - Creating a new collection][1]</span></span>

<span data-ttu-id="884eb-128">![Рис. 2. Импорт данных из новой коллекции][2]</span><span class="sxs-lookup"><span data-stu-id="884eb-128">![Figure 2 - Import data from the new collection][2]</span></span>

<span data-ttu-id="884eb-129">После импорта данных в книгу можно создать несколько действий и процессов преобразования для изменения и моделирования данных.</span><span class="sxs-lookup"><span data-stu-id="884eb-129">After importing the data into the workbook, it’s possible to create multiple steps and transformation processes, to modify and model the data.</span></span> <span data-ttu-id="884eb-130">В этом примере, так как нас интересует только инфраструктура как служба (IaaS), можно использовать действия преобразования для удаления ненужных строк или записей, относящихся к службам, отличным от IaaS.</span><span class="sxs-lookup"><span data-stu-id="884eb-130">For this example, since we are only interested in infrastructure-as-a-Service (IaaS) we can use the transformation steps to remove unnecessary rows, or records, related to services other than IaaS.</span></span>

<span data-ttu-id="884eb-131">На следующем снимке экрана показаны действия преобразования, используемые для обработки собранных из API RateCard данных.</span><span class="sxs-lookup"><span data-stu-id="884eb-131">The following screenshot shows the transformation steps used to process the data collected from RateCard API:</span></span>

<span data-ttu-id="884eb-132">![Рис. 3. Действия преобразования для обработки данных, собранных из API RateCard][3]</span><span class="sxs-lookup"><span data-stu-id="884eb-132">![Figure 3 - Transformation steps to process collected data from RateCard API][3]</span></span>

### <a name="defining-new-services-and-rate-plans"></a><span data-ttu-id="884eb-133">Определение новых служб и тарифных планов</span><span class="sxs-lookup"><span data-stu-id="884eb-133">Defining New Services and Rate Plans</span></span>
<span data-ttu-id="884eb-134">В Cloud Cruiser доступны различные способы определения служб.</span><span class="sxs-lookup"><span data-stu-id="884eb-134">There are different ways to define services on Cloud Cruiser.</span></span> <span data-ttu-id="884eb-135">Один из вариантов заключается в импорте служб из данных об использовании.</span><span class="sxs-lookup"><span data-stu-id="884eb-135">One of the options is to import the services from the usage data.</span></span> <span data-ttu-id="884eb-136">Этот метод широко распространен при работе с общедоступными облаками, где службы уже определены поставщиком.</span><span class="sxs-lookup"><span data-stu-id="884eb-136">This method is commonly used when working with public clouds, where the services are already defined by the provider.</span></span>

<span data-ttu-id="884eb-137">Тарифный план — это набор тарифов или цен, которые, среди прочего, могут применяться к различным службам в определенные периоды действия или группам клиентов.</span><span class="sxs-lookup"><span data-stu-id="884eb-137">A Rate Plan is a set of rates or prices that can be applied to different services, based on effective dates, or group of customers, among other options.</span></span> <span data-ttu-id="884eb-138">Тарифные планы в Cloud Cruiser также можно использовать для создания моделей или сценариев "что если", чтобы понять, как изменения в службах могут повлиять на общую стоимость рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="884eb-138">Rate Plans can also be used on Cloud Cruiser to create simulation or “What-if” scenarios, to understand how changes in services can affect the total cost of a workload.</span></span>

<span data-ttu-id="884eb-139">В этом примере сведения о службе из API RateCard используются для определения новых служб в Cloud Cruiser.</span><span class="sxs-lookup"><span data-stu-id="884eb-139">In this example, we will use the service information from the RateCard API to define new services in Cloud Cruiser.</span></span> <span data-ttu-id="884eb-140">Аналогичным образом можно использовать связанные со службами тарифы для создания нового тарифного плана в Cloud Cruiser.</span><span class="sxs-lookup"><span data-stu-id="884eb-140">In the same way, we can use the rates associated to the services to create a new Rate Plan on Cloud Cruiser.</span></span>

<span data-ttu-id="884eb-141">В конце процесса преобразования можно создать новое действие и публиковать данные из API RateCard в качестве новых служб и тарифов.</span><span class="sxs-lookup"><span data-stu-id="884eb-141">At the end of the transformation process, it is possible to create a new step and publish the data from the RateCard API as new services and rates.</span></span>

<span data-ttu-id="884eb-142">![Рис. 4. Публикация данных из API RateCard в качестве новых служб и тарифов][4]</span><span class="sxs-lookup"><span data-stu-id="884eb-142">![Figure 4 - Publishing the data from the RateCard API as new Services and Rates][4]</span></span>

### <a name="verify-azure-services-and-rates"></a><span data-ttu-id="884eb-143">Проверка служб Azure и тарифов</span><span class="sxs-lookup"><span data-stu-id="884eb-143">Verify Azure Services and Rates</span></span>
<span data-ttu-id="884eb-144">После публикации служб и тарифов можно проверить список импортированных служб на вкладке *Службы* Cloud Cruiser:</span><span class="sxs-lookup"><span data-stu-id="884eb-144">After publishing the services and rates, you can verify the list of imported services in Cloud Cruiser’s *Services* tab:</span></span>

<span data-ttu-id="884eb-145">![Рис. 5. Проверка новых служб][5]</span><span class="sxs-lookup"><span data-stu-id="884eb-145">![Figure 5 - Verifying the new Services][5]</span></span>

<span data-ttu-id="884eb-146">На вкладке *Тарифные планы* можно ознакомиться с новым тарифным планом, который называется AzureSimulation и содержит тарифы, импортированные из API RateCard.</span><span class="sxs-lookup"><span data-stu-id="884eb-146">On the *Rate Plans* tab, you can check the new rate plan called “AzureSimulation” with the rates imported from the RateCard API.</span></span>

<span data-ttu-id="884eb-147">![Рис. 6. Проверка нового тарифного плана и связанных с ним тарифов][6]</span><span class="sxs-lookup"><span data-stu-id="884eb-147">![Figure 6 - Verifying the new Rate Plan and associated rates][6]</span></span>

### <a name="normalize-wap-and-azure-services"></a><span data-ttu-id="884eb-148">Нормализация WAP и служб Azure</span><span class="sxs-lookup"><span data-stu-id="884eb-148">Normalize WAP and Azure Services</span></span>
<span data-ttu-id="884eb-149">По умолчанию WAP предоставляет сведения об использовании на основе уровня использования вычислительных ресурсов, ресурсов памяти и сетевых ресурсов.</span><span class="sxs-lookup"><span data-stu-id="884eb-149">By default, WAP provides usage information based on the use of compute, memory, and network resources.</span></span> <span data-ttu-id="884eb-150">В Cloud Cruiser можно определить службы непосредственно на основе выделения или измеренного уровня использования этих ресурсов.</span><span class="sxs-lookup"><span data-stu-id="884eb-150">In Cloud Cruiser, you can define your services based directly on the allocation or metered usage of these resources.</span></span> <span data-ttu-id="884eb-151">Например, можно задать базовый тариф за каждый час использования ЦП или ставку за гигабайт памяти, выделенной для экземпляра.</span><span class="sxs-lookup"><span data-stu-id="884eb-151">For example, you can set a basic rate for each hour of CPU usage, or charge the GB of memory allocated to an instance.</span></span>

<span data-ttu-id="884eb-152">В этом примере для сравнения затрат между WAP и Azure необходимо агрегировать использование ресурсов WAP в пакеты, которые затем можно будет сопоставить со службами Azure.</span><span class="sxs-lookup"><span data-stu-id="884eb-152">For this example, in order to compare costs between WAP and Azure, we need to aggregate the resource usage on WAP into bundles, which can then be mapped to Azure services.</span></span> <span data-ttu-id="884eb-153">Это преобразование можно легко реализовать в книгах:</span><span class="sxs-lookup"><span data-stu-id="884eb-153">This transformation can be implemented easily in the workbooks:</span></span>

<span data-ttu-id="884eb-154">![Рис. 7. Преобразование данных WAP для нормализации служб][7]</span><span class="sxs-lookup"><span data-stu-id="884eb-154">![Figure 7 - Transforming WAP data to normalize services][7]</span></span>

<span data-ttu-id="884eb-155">Последним действием в книге является публикация данных в базе данных Cloud Cruiser.</span><span class="sxs-lookup"><span data-stu-id="884eb-155">The last step at the workbook is to publish the data into the Cloud Cruiser database.</span></span> <span data-ttu-id="884eb-156">На этом этапе данные об использовании собраны в пакеты (которые сопоставляются со службами Azure) и привязаны к тарифам по умолчанию для формирования расходов.</span><span class="sxs-lookup"><span data-stu-id="884eb-156">During this step, the usage data is now bundled into services (that map to the Azure Services) and tied to default rates to create the charges.</span></span>

<span data-ttu-id="884eb-157">После завершения книги вы можете автоматизировать обработку данных, добавив задачу в планировщик и указав частоту и время выполнения книги.</span><span class="sxs-lookup"><span data-stu-id="884eb-157">After finishing the workbook, you can automate the processing of the data, by adding a task on the scheduler and specifying the frequency and time for the workbook to run.</span></span>

<span data-ttu-id="884eb-158">![Рис. 8. Планирование книги][8]</span><span class="sxs-lookup"><span data-stu-id="884eb-158">![Figure 8 - Workbook scheduling][8]</span></span>

### <a name="create-reports-for-workload-cost-simulation-analysis"></a><span data-ttu-id="884eb-159">Создание отчетов для анализа моделирования стоимости рабочей нагрузки</span><span class="sxs-lookup"><span data-stu-id="884eb-159">Create Reports for Workload Cost Simulation Analysis</span></span>
<span data-ttu-id="884eb-160">По мере сбора данных об использовании и загрузке расходов в базу данных Cloud Cruiser можно использовать модуль Cloud Cruiser Insights, чтобы моделировать стоимость рабочей нагрузки так, как нам нужно.</span><span class="sxs-lookup"><span data-stu-id="884eb-160">After the usage is collected and charges are loaded into the Cloud Cruiser database, we can leverage the Cloud Cruiser Insights module to create the workload cost simulation that we desire.</span></span>

<span data-ttu-id="884eb-161">Чтобы продемонстрировать этот сценарий, был создан следующий отчет:</span><span class="sxs-lookup"><span data-stu-id="884eb-161">In order to demonstrate this scenario, we created the following report:</span></span>

<span data-ttu-id="884eb-162">![Сравнение стоимости][9]</span><span class="sxs-lookup"><span data-stu-id="884eb-162">![Cost Comparison][9]</span></span>

<span data-ttu-id="884eb-163">На верхней диаграмме показано сравнение затрат по службам, а также сравнивается стоимость выполнения рабочей нагрузки для каждой из них между WAP (темно-синий цвет) и Azure (голубой цвет).</span><span class="sxs-lookup"><span data-stu-id="884eb-163">The top graph shows a cost comparison by services, comparing the price of running the workload for each specific service between WAP (dark blue) and Azure (light blue).</span></span>

<span data-ttu-id="884eb-164">На нижней диаграмме показаны те же данные, но с разбивкой по отделам.</span><span class="sxs-lookup"><span data-stu-id="884eb-164">The bottom graph shows the same data but broken down by department.</span></span> <span data-ttu-id="884eb-165">На ней показаны затраты каждого отдела на выполнение своей рабочей нагрузки в WAP и Azure, а также разница между ними (в столбце "Savings" (зеленый)).</span><span class="sxs-lookup"><span data-stu-id="884eb-165">This shows the costs for each department to run their workload on WAP and Azure, along with the difference between them in the Savings bar (green).</span></span>

## <a name="azure-usage-api"></a><span data-ttu-id="884eb-166">API Usage Azure</span><span class="sxs-lookup"><span data-stu-id="884eb-166">Azure Usage API</span></span>
### <a name="introduction"></a><span data-ttu-id="884eb-167">Введение</span><span class="sxs-lookup"><span data-stu-id="884eb-167">Introduction</span></span>
<span data-ttu-id="884eb-168">Недавно корпорация Майкрософт представила API Usage Azure. Теперь подписчики могут программным путем получать данные об использовании, чтобы иметь больше информации о потреблении ресурсов.</span><span class="sxs-lookup"><span data-stu-id="884eb-168">Microsoft recently introduced the Azure Usage API, allowing subscribers to programmatically pull in usage data to gain insights into their consumption.</span></span> <span data-ttu-id="884eb-169">Это хорошие новости для пользователей Cloud Cruiser, которые могут получить более подробный набор данных, доступных через этот API.</span><span class="sxs-lookup"><span data-stu-id="884eb-169">This is great news for Cloud Cruiser customers that can take advantage of the richer dataset available through this API.</span></span>

<span data-ttu-id="884eb-170">Cloud Cruiser может по-разному использовать интеграцию.</span><span class="sxs-lookup"><span data-stu-id="884eb-170">Cloud Cruiser can leverage the integration with the Usage API in several ways.</span></span> <span data-ttu-id="884eb-171">В API доступны детализация (почасовая информация об использовании) и метаданные ресурсов, которые предоставляет необходимый набор данных для работы гибких моделей возвратных платежей и виртуальных счетов.</span><span class="sxs-lookup"><span data-stu-id="884eb-171">The granularity (hourly usage information) and resource metadata information available through the API provides the necessary dataset to support flexible Showback or Chargeback models.</span></span> 

<span data-ttu-id="884eb-172">В этом учебнике мы покажем, как Cloud Cruiser может применять информацию API Usage.</span><span class="sxs-lookup"><span data-stu-id="884eb-172">In this tutorial, we will present one example of how Cloud Cruiser can benefit from the Usage API information.</span></span> <span data-ttu-id="884eb-173">В частности, мы создадим группу ресурсов в Azure, сопоставим теги со структурой учетной записи и опишем процесс извлечения информации о тегах и ее обработки в Cloud Cruiser.</span><span class="sxs-lookup"><span data-stu-id="884eb-173">More specifically, we will create a Resource Group on Azure, associate tags for the account structure, then describe the process of pulling and processing the tag information into Cloud Cruiser.</span></span>

<span data-ttu-id="884eb-174">Конечной целью является возможность создания таких отчетов, как приведенный ниже, и анализа затрат и потребления на основе структуры учетной записи, заполненной тегами.</span><span class="sxs-lookup"><span data-stu-id="884eb-174">The final goal is to be able to create reports like the following one, and be able to analyze cost and consumption based on the account structure populated by the tags.</span></span>

<span data-ttu-id="884eb-175">![Рис. 10. Отчет с разбивкой по тегам][10]</span><span class="sxs-lookup"><span data-stu-id="884eb-175">![Figure 10 - Report with breakdowns using tags][10]</span></span>

### <a name="microsoft-azure-tags"></a><span data-ttu-id="884eb-176">Теги Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="884eb-176">Microsoft Azure Tags</span></span>
<span data-ttu-id="884eb-177">Данные, доступные в API Usage Azure, включают не только сведения о потреблении, но и метаданные ресурсов, в том числе все теги, сопоставленные с ними.</span><span class="sxs-lookup"><span data-stu-id="884eb-177">The data available through the Azure Usage API includes not only consumption information, but also resource metadata including any tags associated with it.</span></span> <span data-ttu-id="884eb-178">Теги предоставляют собой простой способ организации ресурсов. Чтобы они эффективно работали, должны быть соблюдены следующие условия.</span><span class="sxs-lookup"><span data-stu-id="884eb-178">Tags provide an easy way to organize your resources, but in order to be effective, you need to ensure that:</span></span>

* <span data-ttu-id="884eb-179">Теги правильно применяются к ресурсам во время подготовки.</span><span class="sxs-lookup"><span data-stu-id="884eb-179">Tags are correctly applied to the resources at provision time</span></span>
* <span data-ttu-id="884eb-180">Теги правильно используются в возвратных платежах и виртуальных счетах для привязки использования к структуре учетной записи организации.</span><span class="sxs-lookup"><span data-stu-id="884eb-180">Tags are properly used on the Showback/Chargeback process to tie the usage to the organization’s account structure.</span></span>

<span data-ttu-id="884eb-181">Выполнение этих двух требований может быть сложной задачей, особенно если подготовка ресурсов или учет расходов выполняются вручную.</span><span class="sxs-lookup"><span data-stu-id="884eb-181">Both of these requirements can be challenging, especially when there is a manual process on the provision or charging side.</span></span> <span data-ttu-id="884eb-182">При использовании тегов клиенты чаще всего жалуются на теги с опечатками, а также на неправильные и отсутствующие теги. Эти ошибки могут значительно усложнить учет расходов.</span><span class="sxs-lookup"><span data-stu-id="884eb-182">Mistyped, incorrect or even missing tags are common complaints from customers when using tags and these errors can make life on the charging side very difficult.</span></span>

<span data-ttu-id="884eb-183">Благодаря новому API Usage Azure Cloud Cruiser может извлекать информацию о маркировке ресурсов тегами. Затем с помощью сложного инструмента ETL, который называется "книгой", Cloud Cruiser устраняет распространенные ошибки маркировки.</span><span class="sxs-lookup"><span data-stu-id="884eb-183">With the new Azure Usage API, Cloud Cruiser can pull resource tagging information, and through a sophisticated ETL tool called workbooks, fix these common tagging errors.</span></span> <span data-ttu-id="884eb-184">Во время преобразования с использованием регулярных выражений и корреляции данных Cloud Cruiser может определять ресурсы с неправильными тегами и применять правильные теги, обеспечивая правильное сопоставление ресурсов с потребителем.</span><span class="sxs-lookup"><span data-stu-id="884eb-184">Through transformation using regular expressions and data correlation, Cloud Cruiser can identify incorrectly tagged resources and apply the correct tags, ensuring the correct association of the resources with the consumer.</span></span>

<span data-ttu-id="884eb-185">В области учета расходов Cloud Cruiser автоматизирует процедуру выставления виртуального счета и возвратного платежа и может использовать сведения о тегах для привязки использования к соответствующему потребителю (Подразделение, Отделение, Проект и т. д.).</span><span class="sxs-lookup"><span data-stu-id="884eb-185">On the charging side, Cloud Cruiser automates the Showback/Chargeback process, and can leverage the tag information to tie the usage to the appropriate consumer (Department, Division, Project, etc.).</span></span> <span data-ttu-id="884eb-186">Автоматизация совершенствует процесс учета расходов и обеспечивает его согласованность и подконтрольность.</span><span class="sxs-lookup"><span data-stu-id="884eb-186">This automation provides a huge improvement and can ensure a consistent and auditable charging process.</span></span>

### <a name="creating-a-resource-group-with-tags-on-microsoft-azure"></a><span data-ttu-id="884eb-187">Создание группы ресурсов с тегами в Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="884eb-187">Creating a Resource Group with tags on Microsoft Azure</span></span>
<span data-ttu-id="884eb-188">Первым шагом в этом учебнике является создание группы ресурсов на портале Azure и создание новых тегов для сопоставления с ресурсами.</span><span class="sxs-lookup"><span data-stu-id="884eb-188">The first step in this tutorial is to create a Resource Group in the Azure portal, then create new tags to associate to the resources.</span></span> <span data-ttu-id="884eb-189">В этом примере мы создадим следующие теги: Department, Environment, Owner, Project.</span><span class="sxs-lookup"><span data-stu-id="884eb-189">For this example, we will be creating the following tags: Department, Environment, Owner, Project.</span></span>

<span data-ttu-id="884eb-190">На снимке экрана ниже показан пример группы ресурсов с сопоставленными тегами.</span><span class="sxs-lookup"><span data-stu-id="884eb-190">The screenshot below shows a sample Resource Group with the associated tags.</span></span>

<span data-ttu-id="884eb-191">![Рис. 11. Группа ресурсов с сопоставленными тегами на портале Azure][11]</span><span class="sxs-lookup"><span data-stu-id="884eb-191">![Figure 11 - Resource Group with associated tags on Azure portal][11]</span></span>

<span data-ttu-id="884eb-192">На следующем шаге мы извлечем информацию из API Usage в Cloud Cruiser.</span><span class="sxs-lookup"><span data-stu-id="884eb-192">The next step is to pull the information from the Usage API into Cloud Cruiser.</span></span> <span data-ttu-id="884eb-193">В настоящее время API Usage предоставляет ответы в формате JSON.</span><span class="sxs-lookup"><span data-stu-id="884eb-193">The Usage API currently provides responses in JSON format.</span></span> <span data-ttu-id="884eb-194">Ниже приведен пример извлеченных данных:</span><span class="sxs-lookup"><span data-stu-id="884eb-194">Here is a sample of the data retrieved:</span></span>

    {
      "id": "/subscriptions/bb678b04-0e48-4b44-XXXX-XXXXXXX/providers/Microsoft.Commerce/UsageAggregates/Daily_BRSDT_20150623_0000",
      "name": "Daily_BRSDT_20150623_0000",
      "type": "Microsoft.Commerce/UsageAggregate",
      "properties":
      {
        "subscriptionId": "bb678b04-0e48-4b44-XXXX-XXXXXXXXX",
        "usageStartTime": "2015-06-22T00:00:00+00:00",
        "usageEndTime": "2015-06-23T00:00:00+00:00",
        "meterName": "Compute Hours",
        "meterRegion": "",
        "meterCategory": "Virtual Machines",
        "meterSubCategory": "Standard_D1 VM (Non-Windows)",
        "unit": "Hours",
        "instanceData": "{\"Microsoft.Resources\":{\"resourceUri\":\"/subscriptions/bb678b04-0e48-4b44-XXXX-XXXXXXXX/resourceGroups/DEMOUSAGEAPI/providers/Microsoft.Compute/virtualMachines/MyDockerVM\",\"location\":\"eastus\",\"tags\":{\"Department\":\"Sales\",\"Project\":\"Demo Usage API\",\"Environment\":\"Test\",\"Owner\":\"RSE\"},\"additionalInfo\":{\"ImageType\":\"Canonical\",\"ServiceType\":\"Standard_D1\"}}}",
        "meterId": "e60caf26-9ba0-413d-a422-6141f58081d6",
        "infoFields": {},
        "quantity": 8

      },
    },


### <a name="import-data-from-the-usage-api-into-cloud-cruiser"></a><span data-ttu-id="884eb-195">Импорт данных из API Usage в Cloud Cruiser</span><span class="sxs-lookup"><span data-stu-id="884eb-195">Import data from the Usage API into Cloud Cruiser</span></span>
<span data-ttu-id="884eb-196">В книгах Cloud Cruiser доступен автоматический метод сбора и обработки информации из API Usage.</span><span class="sxs-lookup"><span data-stu-id="884eb-196">Cloud Cruiser workbooks provide an automated way to collect and process information from the Usage API.</span></span> <span data-ttu-id="884eb-197">Книга ETL (извлечения, преобразования и загрузки) позволяет настраивать сбор, преобразование и публикацию данных в базе данных Cloud Cruiser.</span><span class="sxs-lookup"><span data-stu-id="884eb-197">An ETL (extract-transform-load) workbook allows you to configure the collection, transformation, and publishing of data into the Cloud Cruiser database.</span></span>

<span data-ttu-id="884eb-198">Каждая книга может иметь одну или несколько коллекций.</span><span class="sxs-lookup"><span data-stu-id="884eb-198">Each workbook can have one or multiple collections.</span></span> <span data-ttu-id="884eb-199">Это позволяет сопоставлять данные из разных источников для дополнения или расширения данных об использовании.</span><span class="sxs-lookup"><span data-stu-id="884eb-199">This allows you to correlate information from different sources to complement or augment the usage data.</span></span> <span data-ttu-id="884eb-200">В этом примере мы создадим новый лист в книге шаблона Azure (*UsageAPI)* и зададим новую *коллекцию* для импорта данных из API Usage.</span><span class="sxs-lookup"><span data-stu-id="884eb-200">For this example, we will create a new sheet in the Azure template workbook (*UsageAPI)* and set a new *collection* to import information from the Usage API.</span></span>

<span data-ttu-id="884eb-201">![Рис. 3. Данные API использования, импортированные на лист UsageAPI][12]</span><span class="sxs-lookup"><span data-stu-id="884eb-201">![Figure 3 - Usage API data imported into the UsageAPI sheet][12]</span></span>

<span data-ttu-id="884eb-202">Обратите внимание, что в этой книге уже есть другие листы для импорта служб из Azure (*ImportServices*) и обработки сведений о потреблении из API Billing (*PublishData*).</span><span class="sxs-lookup"><span data-stu-id="884eb-202">Notice that this workbook already has other sheets to import services from Azure (*ImportServices*), and process the consumption information from the Billing API (*PublishData*).</span></span>

<span data-ttu-id="884eb-203">Далее мы воспользуемся API Usage, чтобы заполнить лист *UsageAPI*, и сопоставим информацию с данными потребления из API Billing на листе *PublishData*.</span><span class="sxs-lookup"><span data-stu-id="884eb-203">Next we will use the Usage API to populate the *UsageAPI* sheet, and correlate the information with the consumption data from the Billing API on the *PublishData* sheet.</span></span>

### <a name="processing-the-tag-information-from-the-usage-api"></a><span data-ttu-id="884eb-204">Обработка информации о тегах из API Usage</span><span class="sxs-lookup"><span data-stu-id="884eb-204">Processing the tag information from the Usage API</span></span>
<span data-ttu-id="884eb-205">После импорта данных в книгу мы создадим шаги преобразования на листе *UsageAPI* для обработки информации из API.</span><span class="sxs-lookup"><span data-stu-id="884eb-205">After importing the data into the workbook, we will create transformation steps in the *UsageAPI* sheet in order to process the information from the API.</span></span> <span data-ttu-id="884eb-206">Сначала мы используем обработчик "JSON split" для извлечения тегов из одного поля, после чего создадим поля для каждого из них (Department, Project, Owner и Environment).</span><span class="sxs-lookup"><span data-stu-id="884eb-206">First step is to use a “JSON split” processor to extract the tags from a single field, then create fields for each one of them (Department, Project, Owner, and Environment).</span></span>

<span data-ttu-id="884eb-207">![Рис. 4. Создание полей для сведений о тегах][13]</span><span class="sxs-lookup"><span data-stu-id="884eb-207">![Figure 4 - Create new fields for the tag information][13]</span></span>

<span data-ttu-id="884eb-208">Обратите внимание, служба Networking отсутствует в сведениях тега (желтый прямоугольник). Но, посмотрев на поле *ResourceGroupName*, мы можем убедиться, что эта служба входит в ту же группу ресурсов.</span><span class="sxs-lookup"><span data-stu-id="884eb-208">Notice the “Networking” service is missing the tag information (yellow box), but we can verify that it is part of the same Resource Group by looking at the *ResourceGroupName* field.</span></span> <span data-ttu-id="884eb-209">Так как у нас есть теги для других ресурсов из этой группы ресурсов, мы используем эти сведения, чтобы применить отсутствующие теги к этому ресурсу позднее.</span><span class="sxs-lookup"><span data-stu-id="884eb-209">Since we have the tags for the other resources from this Resource Group, we can use this information to apply the missing tags to this resource later in the process.</span></span>

<span data-ttu-id="884eb-210">На следующем шаге мы создадим таблицу подстановки, которая будет сопоставлять информацию, полученную из тегов, с полем *ResourceGroupName*.</span><span class="sxs-lookup"><span data-stu-id="884eb-210">The next step is to create a lookup table associating the information from the tags to the *ResourceGroupName*.</span></span> <span data-ttu-id="884eb-211">Эта таблица подстановки будет использоваться на следующем шаге для обогащения данных потребления сведениями о тегах.</span><span class="sxs-lookup"><span data-stu-id="884eb-211">This lookup table will be used on the next step to enrich the consumption data with tag information.</span></span>

### <a name="adding-the-tag-information-to-the-consumption-data"></a><span data-ttu-id="884eb-212">Добавление сведений о тегах в данные потребления</span><span class="sxs-lookup"><span data-stu-id="884eb-212">Adding the tag information to the consumption data</span></span>
<span data-ttu-id="884eb-213">Теперь перейдем на лист *PublishData* , который обрабатывает данные потребления из API Billing, и добавим поля, извлеченные из тегов.</span><span class="sxs-lookup"><span data-stu-id="884eb-213">Now we can jump to the *PublishData* sheet, which processes the consumption information from the Billing API, and add the fields extracted from the tags.</span></span> <span data-ttu-id="884eb-214">Это можно сделать путем поиска в таблице подстановки, созданной на предыдущем шаге, используя *ResourceGroupName* в качестве поискового запроса.</span><span class="sxs-lookup"><span data-stu-id="884eb-214">This process is performed by looking at the lookup table created on the previous step, using the *ResourceGroupName* as the key for the lookups.</span></span>

<span data-ttu-id="884eb-215">![Рис. 5. Заполнение структуры учетной записи данными из результатов поиска][14]</span><span class="sxs-lookup"><span data-stu-id="884eb-215">![Figure 5 - Populating the account structure with the information from the lookups][14]</span></span>

<span data-ttu-id="884eb-216">Обратите внимание, для устранения проблемы отсутствующих тегов применены поля соответствующей структуры учетной записи для службы «Сети».</span><span class="sxs-lookup"><span data-stu-id="884eb-216">Notice that the appropriate account structure fields for the “Networking” service were applied, fixing the issue with the missing tags.</span></span> <span data-ttu-id="884eb-217">Мы также заполнили поля структуры учетной записи для ресурсов нашей целевой группы значением Other (Другое), чтобы различать их в отчетах.</span><span class="sxs-lookup"><span data-stu-id="884eb-217">We also populated the account structure fields for resources other than our target Resource Group with “Other”, in order to differentiate them on the reports.</span></span>

<span data-ttu-id="884eb-218">Теперь нужно просто добавить шаг, чтобы опубликовать данные об использовании.</span><span class="sxs-lookup"><span data-stu-id="884eb-218">Now we just need to add a step to publish the usage data.</span></span> <span data-ttu-id="884eb-219">Во время выполнения этого шага к сведениям об использовании будут применены соответствующие тарифы для каждой службы, определенные в нашем тарифном плане. Полученные в результате расходы будут загружены в базу данных.</span><span class="sxs-lookup"><span data-stu-id="884eb-219">During this step, the appropriate rates for each service defined on our Rate Plan will be applied to the usage information, with the resulting charge loaded into the database.</span></span>

<span data-ttu-id="884eb-220">Хорошая новость заключается в том, что этот процесс вам нужно выполнить только один раз.</span><span class="sxs-lookup"><span data-stu-id="884eb-220">The best part is that you only have to go through this process once.</span></span> <span data-ttu-id="884eb-221">После заполнения книги необходимо добавить ее в планировщик, и он будет запускать ее каждый час или день в запланированное время.</span><span class="sxs-lookup"><span data-stu-id="884eb-221">When the workbook is completed, you just need to add it to the scheduler and it will run hourly or daily at the scheduled time.</span></span> <span data-ttu-id="884eb-222">Затем вам нужно будет только создавать новые отчеты или редактировать существующие, чтобы анализировать данные для получения информативных сведений об использовании облака.</span><span class="sxs-lookup"><span data-stu-id="884eb-222">Then it’s just a matter of creating new reports, or customizing existing ones, in order to analyze the data to get meaningful insights from your cloud usage.</span></span>

### <a name="next-steps"></a><span data-ttu-id="884eb-223">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="884eb-223">Next Steps</span></span>
* <span data-ttu-id="884eb-224">Подробные инструкции по созданию книг и отчетов Cloud Cruiser см. в электронной [документации](http://docs.cloudcruiser.com/) по Cloud Cruiser (требуется действительное имя для входа).</span><span class="sxs-lookup"><span data-stu-id="884eb-224">For detailed instructions on creating Cloud Cruiser workbooks and reports, please refer to Cloud Cruiser’s online [documentation](http://docs.cloudcruiser.com/) (valid login required).</span></span>  <span data-ttu-id="884eb-225">Для получения дополнительных сведений о Cloud Cruiser обратитесь по адресу [info@cloudcruiser.com](mailto:info@cloudcruiser.com).</span><span class="sxs-lookup"><span data-stu-id="884eb-225">For more information about Cloud Cruiser, please contact [info@cloudcruiser.com](mailto:info@cloudcruiser.com).</span></span>
* <span data-ttu-id="884eb-226">В статье [Получение ценных сведений о потреблении ресурсов Microsoft Azure](billing-usage-rate-card-overview.md) приведены общие сведения об API использования ресурсов и RateCard в Azure.</span><span class="sxs-lookup"><span data-stu-id="884eb-226">See [Gain insights into your Microsoft Azure resource consumption](billing-usage-rate-card-overview.md) for an overview of the Azure Resource Usage and RateCard APIs.</span></span>
* <span data-ttu-id="884eb-227">В статье [Справочник по API REST выставления счетов в Azure](https://msdn.microsoft.com/library/azure/1ea5b323-54bb-423d-916f-190de96c6a3c) приведены дополнительные сведения о двух API, которые входят в состав набора API, предоставляемого диспетчером ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="884eb-227">Check out the [Azure Billing REST API Reference](https://msdn.microsoft.com/library/azure/1ea5b323-54bb-423d-916f-190de96c6a3c) for more information on both APIs, which are part of the set of APIs provided by the Azure Resource Manager.</span></span>
* <span data-ttu-id="884eb-228">Если вы хотите подробнее изучить код примера, посетите страницу "Образцы кода API выставления счетов Microsoft Azure" сайте [Образцы кодов Azure](https://azure.microsoft.com/documentation/samples/?term=billing).</span><span class="sxs-lookup"><span data-stu-id="884eb-228">If you would like to dive right into the sample code, check out our Microsoft Azure Billing API Code Samples on [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?term=billing).</span></span>

### <a name="learn-more"></a><span data-ttu-id="884eb-229">Подробнее</span><span class="sxs-lookup"><span data-stu-id="884eb-229">Learn More</span></span>
* <span data-ttu-id="884eb-230">В статье [Обзор диспетчера ресурсов Azure](../azure-resource-manager/resource-group-overview.md) приведены дополнительные сведения о диспетчере ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="884eb-230">See the [Azure Resource Manager Overview](../azure-resource-manager/resource-group-overview.md) article to learn more about the Azure Resource Manager.</span></span>

<!--Image references-->

<span data-ttu-id="884eb-231">[1]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Create-New-Workbook-Collection.png "Рис. 1. Создание коллекции"</span><span class="sxs-lookup"><span data-stu-id="884eb-231">[1]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Create-New-Workbook-Collection.png "Figure 1 - Creating a new collection"</span></span>
<span data-ttu-id="884eb-232">[2]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Import-Data-From-RateCard.png "Рис. 2. Импорт данных из новой коллекции"</span><span class="sxs-lookup"><span data-stu-id="884eb-232">[2]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Import-Data-From-RateCard.png "Figure 2 - Import data from the new collection"</span></span>
<span data-ttu-id="884eb-233">[3]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Transformation-Steps-Process-RateCard-Data.png "Рис. 3. Действия преобразования для обработки данных, собранных из API RateCard"</span><span class="sxs-lookup"><span data-stu-id="884eb-233">[3]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Transformation-Steps-Process-RateCard-Data.png "Figure 3 - Transformation steps to process collected data from RateCard API"</span></span>
<span data-ttu-id="884eb-234">[4]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Publish-RateCard-Data-New-Services-Rates.png "Рис. 4. Публикация данных из API RateCard в качестве новых служб и тарифов"</span><span class="sxs-lookup"><span data-stu-id="884eb-234">[4]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Publish-RateCard-Data-New-Services-Rates.png "Figure 4 - Publishing the data from the RateCard API as new Services and Rates"</span></span>
<span data-ttu-id="884eb-235">[5]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Verify-Azure-Services-And-Pricing1.png "Рис. 5. Проверка новых служб"</span><span class="sxs-lookup"><span data-stu-id="884eb-235">[5]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Verify-Azure-Services-And-Pricing1.png "Figure 5 - Verifying the new Services"</span></span>
<span data-ttu-id="884eb-236">[6]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Verify-Azure-Services-And-Pricing2.png "Рис. 6. Проверка нового тарифного плана и связанных с ним тарифов"</span><span class="sxs-lookup"><span data-stu-id="884eb-236">[6]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Verify-Azure-Services-And-Pricing2.png "Figure 6 - Verifying the new Rate Plan and associated rates"</span></span>
<span data-ttu-id="884eb-237">[7]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Transforming-WAP-Normalize-Services.png "Рис. 7. Преобразование данных WAP для нормализации служб"</span><span class="sxs-lookup"><span data-stu-id="884eb-237">[7]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Transforming-WAP-Normalize-Services.png "Figure 7 - Transforming WAP data to normalize services"</span></span>
<span data-ttu-id="884eb-238">[8]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Workbook-Scheduling.png "Рис. 8. Планирование книги"</span><span class="sxs-lookup"><span data-stu-id="884eb-238">[8]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Workbook-Scheduling.png "Figure 8 - Workbook scheduling"</span></span>
<span data-ttu-id="884eb-239">[9]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Workload-Cost-Simulation-Report.png "Рис. 9. Пример отчета для сценария сравнения стоимости рабочей нагрузки"</span><span class="sxs-lookup"><span data-stu-id="884eb-239">[9]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/Workload-Cost-Simulation-Report.png "Figure 9 - Sample Report for the Workload cost comparison scenario"</span></span>
<span data-ttu-id="884eb-240">[10]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/1_ReportWithTags.png "Рис. 10. Отчет с разбивкой по тегам"</span><span class="sxs-lookup"><span data-stu-id="884eb-240">[10]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/1_ReportWithTags.png "Figure 10 - Report with breakdowns using tags"</span></span>
<span data-ttu-id="884eb-241">[11]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/2_ResourceGroupsWithTags.png "Рис. 11. Группа ресурсов с сопоставленными тегами на портале Azure"</span><span class="sxs-lookup"><span data-stu-id="884eb-241">[11]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/2_ResourceGroupsWithTags.png "Figure 11 - Resource Group with associated tags on Azure portal"</span></span>
<span data-ttu-id="884eb-242">[12]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/3_ImportIntoUsageAPISheet.png "Рис. 12. Данные API использования, импортированные на лист UsageAPI"</span><span class="sxs-lookup"><span data-stu-id="884eb-242">[12]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/3_ImportIntoUsageAPISheet.png "Figure 12 - Usage API data imported into the UsageAPI sheet"</span></span>
<span data-ttu-id="884eb-243">[13]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/4_NewTagField.png "Рис. 13. Создание полей для сведений о тегах"</span><span class="sxs-lookup"><span data-stu-id="884eb-243">[13]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/4_NewTagField.png "Figure 13 - Create new fields for the tag information"</span></span>
<span data-ttu-id="884eb-244">[14]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/5_PopulateAccountStructure.png "Рис. 14. Заполнение структуры учетной записи данными из результатов поиска"</span><span class="sxs-lookup"><span data-stu-id="884eb-244">[14]: ./media/billing-usage-rate-card-partner-solution-cloudcruiser/5_PopulateAccountStructure.png "Figure 14 - Populating the account structure with the information from the lookups"</span></span>
