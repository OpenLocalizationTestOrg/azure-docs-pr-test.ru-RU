---
title: "Защита данных, хранимых в Azure Data Lake Store | Документация Майкрософт"
description: "Узнайте, как защитить данные в хранилище озера данных Azure с помощью групп и списков контроля доступа."
services: data-lake-store
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: ca35e65f-3986-4f1b-bf93-9af6066bb716
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 11/28/2017
ms.author: nitinme
ms.openlocfilehash: e246abaf8d1d7939765e1c878f6dfaf6375294f6
ms.sourcegitcommit: 651a6fa44431814a42407ef0df49ca0159db5b02
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/28/2017
---
# <a name="securing-data-stored-in-azure-data-lake-store"></a>Защита данных, хранимых в хранилище озера данных Azure
Для защиты данных, хранимых в хранилище озера данных Azure, необходимо выполнить три шага.

1. Начните с создания групп безопасности в Azure Active Directory (AAD). Эти группы безопасности используются для реализации управления доступом на основе ролей (RBAC) на портале Azure. Дополнительные сведения см. в статье [Использование управления доступом на основе ролей для контроля доступа к ресурсам в подписке Azure](../active-directory/role-based-access-control-configure.md).
2. Назначьте группы безопасности AAD учетной записи хранения озера данных Azure. Это позволит контролировать доступ к учетной записи хранения озера данных с портала и операции управления с портала или через API-интерфейсы.
3. Назначьте группы безопасности AAD как списки контроля доступа (ACL) в файловой системе хранилища озера данных.
4. Кроме того, вы также можете задать диапазон IP-адресов для клиентов с доступом к данным в хранилище озера данных.

В этой статье представлены инструкции по использованию портала Azure для выполнения указанных выше задач. Подробные сведения о реализации безопасности на уровне учетной записи и данных в Data Lake Store см. в статье [Обеспечение безопасности в Azure Data Lake Store](data-lake-store-security-overview.md). Подробные сведения о реализации списков ACL в Azure Data Lake Store см. в статье [Контроль доступа в Azure Data Lake Store](data-lake-store-access-control.md).

## <a name="prerequisites"></a>Предварительные требования
Перед началом работы с этим учебником необходимо иметь следующее:

* **Подписка Azure**. Ознакомьтесь с [бесплатной пробной версией Azure](https://azure.microsoft.com/pricing/free-trial/).
* **Учетная запись Azure Data Lake Store.** Инструкции по созданию учетной записи см. в статье [Начало работы с Azure Data Lake Store с помощью портала Azure](data-lake-store-get-started-portal.md).

## <a name="create-security-groups-in-azure-active-directory"></a>Создание групп безопасности в Azure Active Directory
Инструкции по созданию групп безопасности AAD и добавлению пользователей в группу см. в статье [Управление группами в Azure Active Directory](../active-directory/active-directory-groups-create-azure-portal.md).

> [!NOTE] 
> Добавить пользователей и другие группы в группу в Azure AD можно с помощью портала Azure. Тем не менее, чтобы добавить в группу субъект-службу, используйте [модуль PowerShell Azure AD](../active-directory/active-directory-accessmanagement-groups-settings-v2-cmdlets.md).
> 
> ```powershell
> # Get the desired group and service principal and identify the correct object IDs
> Get-AzureADGroup -SearchString "<group name>"
> Get-AzureADServicePrincipal -SearchString "<SPI name>"
> 
> # Add the service principal to the group
> Add-AzureADGroupMember -ObjectId <Group object ID> -RefObjectId <SPI object ID>
> ```
 
## <a name="assign-users-or-security-groups-to-azure-data-lake-store-accounts"></a>Назначение пользователей или групп безопасности учетным записям хранения озера данных Azure
При назначении пользователей или групп безопасности учетной записи хранения озера данных Azure вы контролируете доступ к операциям управления в учетной записи с помощью портала Azure и API диспетчера ресурсов Azure. 

1. Откройте учетную запись хранения озера данных Azure. В левой панели щелкните **Обзор**, щелкните **Хранилище озера данных**, а затем в колонке "Хранилище озера данных" щелкните имя учетной записи, которой вы хотите назначить пользователя или группу безопасности.

2. В колонке параметров Data Lake Store щелкните **Управление доступом (IAM)**. В колонке группа **Администраторы подписки** указана в качестве владельца по умолчанию.
   
    ![Назначение группы безопасности учетной записи Azure Data Lake Store](./media/data-lake-store-secure-data/adl.select.user.icon.png "Назначение группы безопасности учетной записи Azure Data Lake Store")

    Существует два способа добавить группу и назначить соответствующие роли:
   
    * добавить пользователя или группу в учетную запись и затем назначить роль или
    * добавить роль и затем назначить пользователей или группы роли.
     
    В этом разделе мы рассмотрим первый подход и сначала добавим группу, а затем назначим роли. Можно выполнить аналогичные шаги, чтобы сначала выбрать роль, а затем назначить группы для этой роли.
4. В колонке **Пользователи** щелкните **Добавить**, чтобы открыть колонку **Добавить доступ**. В колонке **Добавить доступ** щелкните **Выбрать роль** и выберите роль для пользователя или группы.
   
    ![Добавление роли для пользователя](./media/data-lake-store-secure-data/adl.add.user.1.png "Добавление роли для пользователя")
   
    Роли **Владелец** и **Участник** предоставляют доступ ко множеству функций администрирования учетной записи Data Lake. Пользователям, которые будут взаимодействовать с данными в озере данных, можно назначить роль **Читатель**. Область этих ролей ограничена операциями управления, относящимися к учетной записи хранения озера данных Azure.
   
    Разрешения отдельной файловой системы определяют, какие операции с данными могут выполнять пользователи. Таким образом, пользователь с ролью «Читатель» может только просматривать параметры администрирования, связанные с учетной записью, но потенциально может считывать и записывать данные в зависимости от назначенных ему разрешений файловой системы. Разрешения файловой системы хранилища озера данных описаны в разделе [Назначение группы безопасности в виде ACL в файловой системе хранилища озера данных Azure](#filepermissions).
5. В колонке **Добавление доступа** щелкните **Добавить пользователей**, чтобы открыть колонку **Добавление пользователей**. В этой колонке найдите группу безопасности, созданную ранее в Azure Active Directory. Если у вас много групп для поиска, воспользуйтесь текстовым полем в верхней части для фильтрации по имени группы. Нажмите кнопку **Выбрать**.
   
    ![Добавление группы безопасности](./media/data-lake-store-secure-data/adl.add.user.2.png "Добавление группы безопасности")
   
    Если вы хотите добавить группу или пользователя, которые отсутствуют в списке, вы можете пригласить их, щелкнув значок **Пригласить** и указав адрес электронной почты пользователя или группы.
6. Нажмите кнопку **ОК**. Вы увидите группы безопасности, как показано ниже.
   
    ![Добавленная группа безопасности](./media/data-lake-store-secure-data/adl.add.user.3.png "Добавленная группа безопасности")

7. У пользователя или группы безопасности теперь есть доступ к учетной записи хранения озера данных Azure. Если вы хотите предоставить доступ конкретным пользователям, их можно добавить в группу безопасности. Аналогично, если требуется отменить доступ для пользователя, его можно удалить из группы безопасности. Можно также назначить несколько групп безопасности для учетной записи. 

## <a name="filepermissions"></a>Назначение пользователей или группы безопасности в виде ACL в файловой системе хранилища озера данных Azure
Назначая пользователя или группы безопасности в файловой системе озера данных Azure, вы устанавливаете контроль доступа к данным, хранимым в хранилище озера данных Azure.

1. В колонке учетной записи «Хранилище озера данных» щелкните **Обозреватель данных**.
   
    ![Создание каталогов в учетной записи Data Lake Store](./media/data-lake-store-secure-data/adl.start.data.explorer.png "Создание каталогов в учетной записи Data Lake")
2. В колонке **Обозреватель данных** щелкните файл (или папку), для которого необходимо настроить ACL, а затем нажмите кнопку **Доступ**. Чтобы назначить ACL файлу, необходимо нажать кнопку **Доступ** в колонке **Предварительный просмотр файла**.
   
    ![Настройка списков управления доступом в файловой системе Data Lake](./media/data-lake-store-secure-data/adl.acl.1.png "Настройка списков управления доступом в файловой системе Data Lake")
3. В колонке **Доступ** перечислены стандартные и пользовательские варианты доступа, уже назначенные корню. Щелкните значок **Добавить** , чтобы добавить ACL пользовательского уровня.
   
    ![Перечисление стандартных и пользовательских сценариев доступа](./media/data-lake-store-secure-data/adl.acl.2.png "Перечисление стандартных и пользовательских сценариев доступа")
   
   * **Стандартный доступ** — доступ в стиле UNIX, где права на чтение, запись и выполнение (rwx) указываются для трех различных классов пользователей: владелец, группа и другие.
   * **Пользовательский доступ** соответствует спискам ACL POSIX, где можно задать разрешения для конкретных именованных пользователей или групп, а не только для владельца файла или группы. 
     
     Дополнительные сведения см. в разделе [ACL HDFS](https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html#ACLs_Access_Control_Lists). Дополнительные сведения о реализации списков управления доступом в контексте Data Lake Store см. в статье [Контроль доступа в Azure Data Lake Store](data-lake-store-access-control.md).
4. Щелкните значок **Добавить**, чтобы открыть колонку **Добавить настраиваемый доступ**. В этой колонке щелкните **Выберите пользователя или группу**, а затем в колонке **Выберите пользователя или группу** найдите группу безопасности, созданную ранее в Azure Active Directory. Если у вас много групп для поиска, воспользуйтесь текстовым полем в верхней части для фильтрации по имени группы. Выберите группу, которую необходимо добавить, и нажмите кнопку **Выбрать**.
   
    ![Добавление группы](./media/data-lake-store-secure-data/adl.acl.3.png "Добавление группы")
5. Щелкните **Выберите разрешения**, выберите необходимые разрешения, а затем укажите, назначить ли разрешения как список ACL по умолчанию, список ACL для доступа или оба этих параметра. Нажмите кнопку **ОК**.
   
    ![Назначение разрешений для группы](./media/data-lake-store-secure-data/adl.acl.4.png "Назначение разрешений для группы")
   
    Дополнительные сведения о разрешениях в Data Lake Store и списках ACL (по умолчанию и для доступа) см. в статье [Контроль доступа в Data Lake Store](data-lake-store-access-control.md).
6. В колонке **Добавить настраиваемый доступ** нажмите кнопку **ОК**. Теперь добавленная группа с соответствующими разрешениями отобразится в колонке **Доступ** .
   
    ![Назначение разрешений для группы](./media/data-lake-store-secure-data/adl.acl.5.png "Назначение разрешений для группы")
   
   > [!IMPORTANT]
   > В текущем выпуске в разделе **Пользовательский доступ**можно указать только девять записей. Если вы хотите добавить больше 9 пользователей, необходимо создать группы безопасности, добавить пользователей в группы безопасности и предоставить доступ этим группам безопасности к учетной записи хранения озера данных.
   > 
   > 
7. При необходимости можно также изменить права доступа уже после добавления группы. Снимите или установите флажок для каждого типа разрешений (чтение, запись, выполнение) в зависимости от того, нужно ли удалить или назначить разрешение для группы безопасности. Щелкните **Сохранить**, чтобы сохранить изменения, или **Отменить** для их отмены.

## <a name="set-ip-address-range-for-data-access"></a>Назначение диапазона IP-адресов для доступа к данным
Хранилище озера данных Azure позволяет дополнительно блокировать доступ к хранилищу данных на уровне сети. Вы можете включить брандмауэр, указать IP-адрес или определить диапазон IP-адресов для доверенных клиентов. После включения брандмауэра к хранилищу смогут подключаться только клиенты с IP-адресами из определенного диапазона.

![Параметры брандмауэра и доступ по IP-адресу](./media/data-lake-store-secure-data/firewall-ip-access.png "Параметры брандмауэра и доступ по IP-адресу")

## <a name="remove-security-groups-for-an-azure-data-lake-store-account"></a>Удаление групп безопасности из учетной записи хранения озера данных Azure
При удалении групп безопасности из учетной записи хранения озера данных Azure вы только изменяете доступ к операциям управления этой учетной записи на портале Azure и в API диспетчера ресурсов Azure.

1. В колонке учетной записи "Хранилище озера данных" щелкните **Настройки**. В колонке **Параметры** щелкните пункт **Пользователи**.
   
    ![Назначение группы безопасности учетной записи Azure Data Lake](./media/data-lake-store-secure-data/adl.select.user.icon.png "Назначение группы безопасности учетной записи Azure Data Lake")
2. В колонке **Пользователи** выберите группу безопасности, которую необходимо удалить.
   
    ![Группа безопасности, которую следует удалить](./media/data-lake-store-secure-data/adl.add.user.3.png "Группа безопасности, которую следует удалить")
3. В колонке группы безопасности нажмите кнопку **Удалить**.
   
    ![Удаленная группа безопасности](./media/data-lake-store-secure-data/adl.remove.group.png "Удаленная группа безопасности")

## <a name="remove-security-group-acls-from-azure-data-lake-store-file-system"></a>Удаление ACL группы безопасности из файловой системы хранилища озера данных Azure
При удалении ACL группы безопасности из файловой системы Azure Data Lake Store вы изменяете доступ к данным в Data Lake Store.

1. В колонке учетной записи «Хранилище озера данных» щелкните **Обозреватель данных**.
   
    ![Создание каталогов в учетной записи Data Lake](./media/data-lake-store-secure-data/adl.start.data.explorer.png "Создание каталогов в учетной записи Data")
2. В колонке **Обозреватель данных** щелкните файл (или папку), для которого необходимо удалить ACL, а затем щелкните значок **Доступ** в колонке учетной записи. Чтобы удалить ACL для файла, необходимо нажать кнопку **Доступ** в колонке **Предварительный просмотр файла**.
   
    ![Настройка списков управления доступом в файловой системе Data Lake](./media/data-lake-store-secure-data/adl.acl.1.png "Настройка списков управления доступом в файловой системе Data Lake")
3. В колонке **Доступ** в разделе **Настраиваемый доступ** щелкните группу безопасности, которую требуется удалить. В колонке **Настраиваемый доступ** щелкните **Удалить** и нажмите кнопку **ОК**.
   
    ![Назначение разрешений для группы](./media/data-lake-store-secure-data/adl.remove.acl.png "Назначение разрешений для группы")

## <a name="see-also"></a>Дополнительные материалы
* [Обзор хранилища озера данных Azure](data-lake-store-overview.md)
* [Копирование данных из больших двоичных объектов службы хранилища Azure в Data Lake Store](data-lake-store-copy-data-azure-storage-blob.md)
* [Использование аналитики озера данных Azure с хранилищем озера данных](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
* [Использование Azure HDInsight с хранилищем озера данных](data-lake-store-hdinsight-hadoop-use-portal.md)
* [Начало работы с хранилищем озера данных с помощью PowerShell](data-lake-store-get-started-powershell.md)
* [Начало работы с хранилищем озера данных с помощью пакета SDK .NET](data-lake-store-get-started-net-sdk.md)
* [Журналы диагностики доступа для Data Lake Store](data-lake-store-diagnostic-logs.md)

