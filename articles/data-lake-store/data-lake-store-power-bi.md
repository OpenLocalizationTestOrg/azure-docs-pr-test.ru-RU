---
title: "Анализ данных в Data Lake Store с помощью Power BI | Документация Майкрософт"
description: "Использование Power BI для анализа данных в хранилище озера данных Azure"
services: data-lake-store
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: 57d19d27-e135-49d9-a7ea-46c48ef4e3bd
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 05/10/2017
ms.author: nitinme
ms.openlocfilehash: 0cf7e385ef2edd650479e120f52469bc6632f2eb
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="analyze-data-in-data-lake-store-by-using-power-bi"></a><span data-ttu-id="a6ee7-103">Анализ данных в хранилище озера данных с помощью Power BI</span><span class="sxs-lookup"><span data-stu-id="a6ee7-103">Analyze data in Data Lake Store by using Power BI</span></span>
<span data-ttu-id="a6ee7-104">В этой статье вы узнаете, как использовать Power BI Desktop для анализа и визуализации данных в хранилище озера данных Azure.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-104">In this article you will learn how to use Power BI Desktop to analyze and visualize data stored in Azure Data Lake Store.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a6ee7-105">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="a6ee7-105">Prerequisites</span></span>
<span data-ttu-id="a6ee7-106">Перед началом работы с этим учебником необходимо иметь следующее:</span><span class="sxs-lookup"><span data-stu-id="a6ee7-106">Before you begin this tutorial, you must have the following:</span></span>

* <span data-ttu-id="a6ee7-107">**Подписка Azure**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-107">**An Azure subscription**.</span></span> <span data-ttu-id="a6ee7-108">Ознакомьтесь с [бесплатной пробной версией Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="a6ee7-108">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="a6ee7-109">**Учетная запись хранилища озера данных Azure**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-109">**Azure Data Lake Store account**.</span></span> <span data-ttu-id="a6ee7-110">Следуйте инструкциям в разделе [Приступая к работе с хранилищем озера данных Azure на портале Azure](data-lake-store-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a6ee7-110">Follow the instructions at [Get started with Azure Data Lake Store using the Azure Portal](data-lake-store-get-started-portal.md).</span></span> <span data-ttu-id="a6ee7-111">В этой статье предполагается, что вы уже создали учетную запись Data Lake Store с именем **mybidatalakestore** и добавили в нее образец файла данных (**Drivers.txt**).</span><span class="sxs-lookup"><span data-stu-id="a6ee7-111">This article assumes that you have already created a Data Lake Store account, called **mybidatalakestore**, and uploaded a sample data file (**Drivers.txt**) to it.</span></span> <span data-ttu-id="a6ee7-112">Этот образец файла можно скачать в [репозитории Git для озера данных Azure](https://github.com/Azure/usql/tree/master/Examples/Samples/Data/AmbulanceData/Drivers.txt).</span><span class="sxs-lookup"><span data-stu-id="a6ee7-112">This sample file is available for download from [Azure Data Lake Git Repository](https://github.com/Azure/usql/tree/master/Examples/Samples/Data/AmbulanceData/Drivers.txt).</span></span>
* <span data-ttu-id="a6ee7-113">**Power BI Desktop**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-113">**Power BI Desktop**.</span></span> <span data-ttu-id="a6ee7-114">Это средство можно скачать в [Центре загрузки Майкрософт](https://www.microsoft.com/en-us/download/details.aspx?id=45331).</span><span class="sxs-lookup"><span data-stu-id="a6ee7-114">You can download this from [Microsoft Download Center](https://www.microsoft.com/en-us/download/details.aspx?id=45331).</span></span> 

## <a name="create-a-report-in-power-bi-desktop"></a><span data-ttu-id="a6ee7-115">Создание отчета в Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="a6ee7-115">Create a report in Power BI Desktop</span></span>
1. <span data-ttu-id="a6ee7-116">Запустите Power BI Desktop на своем компьютере.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-116">Launch Power BI Desktop on your computer.</span></span>
2. <span data-ttu-id="a6ee7-117">На ленте **Главная** нажмите кнопку **Получить данные**, а затем щелкните "Дополнительно".</span><span class="sxs-lookup"><span data-stu-id="a6ee7-117">From the **Home** ribbon, click **Get Data**, and then click More.</span></span> <span data-ttu-id="a6ee7-118">В диалоговом окне **Получение данных** выберите пункт **Azure**, а затем выберите пункт **Azure Data Lake Store** и нажмите кнопку **Подключиться**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-118">In the **Get Data** dialog box, click **Azure**, click **Azure Data Lake Store**, and then click **Connect**.</span></span>
   
    <span data-ttu-id="a6ee7-119">![Подключение к Data Lake Store](./media/data-lake-store-power-bi/get-data-lake-store-account.png "Подключение к Data Lake Store")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-119">![Connect to Data Lake Store](./media/data-lake-store-power-bi/get-data-lake-store-account.png "Connect to Data Lake Store")</span></span>
3. <span data-ttu-id="a6ee7-120">Если появится диалоговое окно с сообщением о том, что соединитель находится в стадии разработки, выберите вариант "Продолжить".</span><span class="sxs-lookup"><span data-stu-id="a6ee7-120">If you see a dialog box about the connector being in a development phase, opt to continue.</span></span>
4. <span data-ttu-id="a6ee7-121">В диалоговом окне **Хранилище озера данных Microsoft Azure** укажите URL-адрес для своей учетной записи Data Lake Store и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-121">In the **Microsoft Azure Data Lake Store** dialog box, provide the URL to your Data Lake Store account, and then click **OK**.</span></span>
   
    <span data-ttu-id="a6ee7-122">![URL-адрес для Data Lake Store](./media/data-lake-store-power-bi/get-data-lake-store-account-url.png "URL-адрес для Data Lake Store")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-122">![URL for Data Lake Store](./media/data-lake-store-power-bi/get-data-lake-store-account-url.png "URL for Data Lake Store")</span></span>
5. <span data-ttu-id="a6ee7-123">В следующем диалоговом окне нажмите кнопку **Вход** , чтобы войти в учетную запись хранилища озера данных.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-123">In the next dialog box, click **Sign in** to sign into Data Lake Store account.</span></span> <span data-ttu-id="a6ee7-124">Вы будете перенаправлены на страницу входа своей организации.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-124">You will be redirected to your organization's sign in page.</span></span> <span data-ttu-id="a6ee7-125">Следуйте инструкциям для входа в учетную запись.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-125">Follow the prompts to sign into the account.</span></span>
   
    <span data-ttu-id="a6ee7-126">![Вход в Data Lake Store](./media/data-lake-store-power-bi/get-data-lake-store-account-signin.png "Вход в Data Lake Store")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-126">![Sign into Data Lake Store](./media/data-lake-store-power-bi/get-data-lake-store-account-signin.png "Sign into Data Lake Store")</span></span>
6. <span data-ttu-id="a6ee7-127">Успешно выполнив вход, нажмите кнопку **Подключиться**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-127">After you have successfully signed in, click **Connect**.</span></span>
   
    <span data-ttu-id="a6ee7-128">![Подключение к Data Lake Store](./media/data-lake-store-power-bi/get-data-lake-store-account-connect.png "Подключение к Data Lake Store")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-128">![Connect to Data Lake Store](./media/data-lake-store-power-bi/get-data-lake-store-account-connect.png "Connect to Data Lake Store")</span></span>
7. <span data-ttu-id="a6ee7-129">В следующем диалоговом окне будет указан файл, который вы добавили в учетную запись хранилища озера данных.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-129">The next dialog box shows the file that you uploaded to your Data Lake Store account.</span></span> <span data-ttu-id="a6ee7-130">Проверьте информацию и нажмите кнопку **Загрузить**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-130">Verify the info and then click **Load**.</span></span>
   
    <span data-ttu-id="a6ee7-131">![Скачивание данных из Data Lake Store](./media/data-lake-store-power-bi/get-data-lake-store-account-load.png "Скачивание данных из Data Lake Store")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-131">![Load data from Data Lake Store](./media/data-lake-store-power-bi/get-data-lake-store-account-load.png "Load data from Data Lake Store")</span></span>
8. <span data-ttu-id="a6ee7-132">После успешной загрузки данных в Power BI вы увидите приведенные ниже поля на вкладке **Поля** .</span><span class="sxs-lookup"><span data-stu-id="a6ee7-132">After the data has been successfully loaded into Power BI, you will see the following fields in the **Fields** tab.</span></span>
   
    <span data-ttu-id="a6ee7-133">![Импортированные поля](./media/data-lake-store-power-bi/imported-fields.png "Импортированные поля")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-133">![Imported fields](./media/data-lake-store-power-bi/imported-fields.png "Imported fields")</span></span>
   
    <span data-ttu-id="a6ee7-134">Однако для визуализации и анализа данных мы рекомендуем использовать показанные ниже поля.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-134">However, to visualize and analyze the data, we prefer the data to be available per the following fields</span></span>
   
    <span data-ttu-id="a6ee7-135">![Нужные поля](./media/data-lake-store-power-bi/desired-fields.png "Нужные поля")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-135">![Desired fields](./media/data-lake-store-power-bi/desired-fields.png "Desired fields")</span></span>
   
    <span data-ttu-id="a6ee7-136">В следующих шагах мы обновим запрос, чтобы преобразовать импортированные данные в нужный формат.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-136">In the next steps, we will update the query to convert the imported data in the desired format.</span></span>
9. <span data-ttu-id="a6ee7-137">На вкладке **Главная** ленты нажмите кнопку **Изменить запросы**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-137">From the **Home** ribbon, click **Edit Queries**.</span></span>
   
    <span data-ttu-id="a6ee7-138">![Изменение запросов](./media/data-lake-store-power-bi/edit-queries.png "Изменение запросов")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-138">![Edit queries](./media/data-lake-store-power-bi/edit-queries.png "Edit queries")</span></span>
10. <span data-ttu-id="a6ee7-139">В редакторе запросов в столбце **Содержимое** выберите вариант **Двоичные данные**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-139">In the Query Editor, under the **Content** column, click **Binary**.</span></span>
    
    <span data-ttu-id="a6ee7-140">![Изменение запросов](./media/data-lake-store-power-bi/convert-query1.png "Изменение запросов")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-140">![Edit queries](./media/data-lake-store-power-bi/convert-query1.png "Edit queries")</span></span>
11. <span data-ttu-id="a6ee7-141">Вы увидите значок, представляющий добавленный вами файл **Drivers.txt** .</span><span class="sxs-lookup"><span data-stu-id="a6ee7-141">You will see a file icon, that represents the **Drivers.txt** file that you uploaded.</span></span> <span data-ttu-id="a6ee7-142">Щелкните файл правой кнопкой мыши и выберите пункт **CSV**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-142">Right-click the file, and click **CSV**.</span></span>    
    
    <span data-ttu-id="a6ee7-143">![Изменение запросов](./media/data-lake-store-power-bi/convert-query2.png "Изменение запросов")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-143">![Edit queries](./media/data-lake-store-power-bi/convert-query2.png "Edit queries")</span></span>
12. <span data-ttu-id="a6ee7-144">В результате вы увидите выходные данные, приведенные ниже.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-144">You should see an output as shown below.</span></span> <span data-ttu-id="a6ee7-145">Данные теперь имеют формат, который можно использовать для создания визуализаций.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-145">Your data is now available in a format that you can use to create visualizations.</span></span>
    
    <span data-ttu-id="a6ee7-146">![Изменение запросов](./media/data-lake-store-power-bi/convert-query3.png "Изменение запросов")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-146">![Edit queries](./media/data-lake-store-power-bi/convert-query3.png "Edit queries")</span></span>
13. <span data-ttu-id="a6ee7-147">На вкладке **Главная** ленты нажмите кнопку **Закрыть и применить** и выберите пункт **Закрыть и применить**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-147">From the **Home** ribbon, click **Close and Apply**, and then click **Close and Apply**.</span></span>
    
    <span data-ttu-id="a6ee7-148">![Изменение запросов](./media/data-lake-store-power-bi/load-edited-query.png "Изменение запросов")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-148">![Edit queries](./media/data-lake-store-power-bi/load-edited-query.png "Edit queries")</span></span>
14. <span data-ttu-id="a6ee7-149">После обновления запроса на вкладке **Поля** появятся новые поля, доступные для визуализации.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-149">Once the query is updated, the **Fields** tab will show the new fields available for visualization.</span></span>
    
    <span data-ttu-id="a6ee7-150">![Обновление полей](./media/data-lake-store-power-bi/updated-query-fields.png "Обновление полей")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-150">![Updated fields](./media/data-lake-store-power-bi/updated-query-fields.png "Updated fields")</span></span>
15. <span data-ttu-id="a6ee7-151">Создадим круговую диаграмму, на которой будет представлено количество водителей в каждом городе данной страны.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-151">Let us create a pie chart to represent the drivers in each city for a given country.</span></span> <span data-ttu-id="a6ee7-152">Для этого выполним указанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-152">To do so, make the following selections.</span></span>
    
    1. <span data-ttu-id="a6ee7-153">На вкладке "Визуализации" щелкните символ круговой диаграммы.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-153">From the Visualizations tab, click the symbol for a pie chart.</span></span>
       
        <span data-ttu-id="a6ee7-154">![Создание круговой диаграммы](./media/data-lake-store-power-bi/create-pie-chart.png "Создание круговой диаграммы")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-154">![Create pie chart](./media/data-lake-store-power-bi/create-pie-chart.png "Create pie chart")</span></span>
    2. <span data-ttu-id="a6ee7-155">Мы собираемся использовать следующие столбцы: **Столбец 4** (название города) и **Столбец 7** (название страны).</span><span class="sxs-lookup"><span data-stu-id="a6ee7-155">The columns that we are going to use are **Column 4** (name of the city) and **Column 7** (name of the country).</span></span> <span data-ttu-id="a6ee7-156">Перетащите их с вкладки **Поля** на вкладку **Визуализации**, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-156">Drag these columns from **Fields** tab to **Visualizations** tab as shown below.</span></span>
       
        <span data-ttu-id="a6ee7-157">![Создание визуализации](./media/data-lake-store-power-bi/create-visualizations.png "Создание визуализации")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-157">![Create visualizations](./media/data-lake-store-power-bi/create-visualizations.png "Create visualizations")</span></span>
    3. <span data-ttu-id="a6ee7-158">Круговая диаграмма теперь должна выглядеть так, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-158">The pie chart should now resemble like the one shown below.</span></span>
       
        <span data-ttu-id="a6ee7-159">![Круговая диаграмма](./media/data-lake-store-power-bi/pie-chart.png "Создание визуализаций")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-159">![Pie chart](./media/data-lake-store-power-bi/pie-chart.png "Create visualizations")</span></span>
16. <span data-ttu-id="a6ee7-160">Выбрав определенную страну в фильтрах уровня страницы, вы можете теперь увидеть количество водителей в каждом городе этой страны.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-160">By selecting a specific country from the page level filters, you can now see the number of drivers in each city of the selected country.</span></span> <span data-ttu-id="a6ee7-161">Например, на вкладке **Визуализации** в списке **Фильтры** уровня страницы выберите **Бразилия**.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-161">For example, under the **Visualizations** tab, under **Page level filters**, select **Brazil**.</span></span>
    
    <span data-ttu-id="a6ee7-162">![Выбор страны](./media/data-lake-store-power-bi/select-country.png "Выбор страны")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-162">![Select a country](./media/data-lake-store-power-bi/select-country.png "Select a country")</span></span>
17. <span data-ttu-id="a6ee7-163">Круговая диаграмма автоматически обновится, и вы увидите количество водителей в городах Бразилии.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-163">The pie chart is automatically updated to display the drivers in the cities of Brazil.</span></span>
    
    <span data-ttu-id="a6ee7-164">![Количество водителей в стране](./media/data-lake-store-power-bi/driver-per-country.png "Количество водителей в каждой стране")</span><span class="sxs-lookup"><span data-stu-id="a6ee7-164">![Drivers in a country](./media/data-lake-store-power-bi/driver-per-country.png "Drivers per country")</span></span>
18. <span data-ttu-id="a6ee7-165">В меню **Файл** выберите пункт **Сохранить**, чтобы сохранить визуализацию как файл Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-165">From the **File** menu, click **Save** to save the visualization as a Power BI Desktop file.</span></span>

## <a name="publish-report-to-power-bi-service"></a><span data-ttu-id="a6ee7-166">Публикация отчета в службе Power BI</span><span class="sxs-lookup"><span data-stu-id="a6ee7-166">Publish report to Power BI service</span></span>
<span data-ttu-id="a6ee7-167">Создав визуализации в Power BI Desktop, вы можете предоставить общий доступ к ним другим пользователям, опубликовав их в службе Power BI.</span><span class="sxs-lookup"><span data-stu-id="a6ee7-167">Once you have created the visualizations in Power BI Desktop, you can share it with others by publishing it to the Power BI service.</span></span> <span data-ttu-id="a6ee7-168">Инструкции см. в разделе [Публикация из Power BI Desktop](https://powerbi.microsoft.com/documentation/powerbi-desktop-upload-desktop-files/).</span><span class="sxs-lookup"><span data-stu-id="a6ee7-168">For instructions on how to do that, see [Publish from Power BI Desktop](https://powerbi.microsoft.com/documentation/powerbi-desktop-upload-desktop-files/).</span></span>

## <a name="see-also"></a><span data-ttu-id="a6ee7-169">Дополнительные материалы</span><span class="sxs-lookup"><span data-stu-id="a6ee7-169">See also</span></span>
* [<span data-ttu-id="a6ee7-170">Анализ данных в хранилище озера данных с помощью Аналитики озера данных</span><span class="sxs-lookup"><span data-stu-id="a6ee7-170">Analyze data in Data Lake Store using Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)

