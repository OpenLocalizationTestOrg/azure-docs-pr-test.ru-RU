---
title: "aaaOverview управления доступом в хранилище Озера данных | Документы Microsoft"
description: "В этой статье описаны принципы контроля доступа в Azure Data Lake Store."
services: data-lake-store
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: d16f8c09-c954-40d3-afab-c86ffa8c353d
ms.service: data-lake-store
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/29/2017
ms.author: nitinme
ms.openlocfilehash: 1cc5d578f22ef0a123a1547abebfb4795ea09139
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="access-control-in-azure-data-lake-store"></a>Контроль доступа в Azure Data Lake Store

Хранилище Озера данных Azure реализует модель управления доступом, производный от HDFS, который в свою очередь является производным от модели управления доступом hello POSIX. В этой статье приведены основные принципы hello hello модель управления доступом для хранилища Озера данных. toolearn Дополнительные сведения о модели управления доступом hello HDFS, в разделе [HDFS разрешения руководства](https://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html).

## <a name="access-control-lists-on-files-and-folders"></a>Списки управления доступом для файлов и папок

Существует два типа списков управления доступом (ACL): **ACL для доступа** и **ACL по умолчанию**.

* **Доступ к ACL**: эти объект tooan доступа элемента управления. Списки ACL для доступа позволяют управлять доступом как к файлам, так и к папкам.

* **По умолчанию списки управления доступом**: «Шаблон» списков управления доступом связанный с папкой, которые определяют hello доступа ACL для дочерних элементов, которые создаются в этой папке. Файлы не имеют ACL по умолчанию.

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-1.png)

Списки ACL для доступа и списки управления доступом по умолчанию имеют hello одинаковую структуру.

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-2.png)



> [!NOTE]
> Изменение списка управления Доступом по умолчанию hello в родительском элементе не влияет на hello доступом ACL или по умолчанию ACL дочерних элементов, которые уже существуют.
>
>

## <a name="users-and-identities"></a>Пользователи и удостоверения

Каждый файл или папка имеет отдельные разрешения для следующих удостоверений:

* Привет, которой принадлежит пользователь hello файла
* Владелец группы Hello
* именованные пользователи;
* именованные группы;
* все остальные пользователи.

удостоверения Azure Active Directory (Azure AD), Hello удостоверения пользователей и групп. Если не указано иное, «пользователь,» в контексте hello хранилища Озера данных, можно либо означает, что пользователь Azure AD или группы безопасности Azure AD.

## <a name="permissions"></a>Разрешения

Hello разрешения на объект файловой системы, **чтения**, **записи**, и **Execute**, и их можно использовать для файлов и папок, как показано в следующей таблице hello:

|            |    Файл     |   Папка |
|------------|-------------|----------|
| **Разрешение на чтение (R)** | Можно считать содержимое файла hello | Требуется **чтения** и **Execute** toolist hello содержимое папки hello|
| **Разрешение на запись (W)** | Можно создать или добавить файл tooa | Требуется **записи** и **Execute** toocreate дочерних элементов в папке |
| **Разрешение на выполнение (X)** | Не означает, что-либо в контексте hello хранилища Озера данных | Требуется tootraverse hello дочерних элементов папки |

### <a name="short-forms-for-permissions"></a>Сокращения для разрешений

**RWX** — используется tooindicate **чтение + запись и выполнение**. В которой существует более краткие цифровая форма **чтения = 4**, **записи = 2**, и **Execute = 1**, сумма hello, из которых представляет hello разрешения. Ниже приводятся некоторые примеры.

| Цифровая форма | Краткая форма |      Значение     |
|--------------|------------|------------------------|
| 7            | RWX        | чтение, запись и выполнение |
| 5            | R-X        | Чтение + выполнение         |
| 4            | R--        | чтение                   |
| 0            | ---        | Нет разрешений         |


### <a name="permissions-do-not-inherit"></a>Разрешения не наследуются

В модели POSIX стиле hello, которая используется хранилище Озера данных разрешения для элемента, хранятся на сам элемент hello. Другими словами разрешения для элемента не может наследоваться от hello родительских элементов.

## <a name="common-scenarios-related-toopermissions"></a>Общие toopermissions связанные сценарии

Ниже приведены некоторые распространенные сценарии toohelp понять, какие разрешения, необходимые tooperform определенные операции в учетной записи хранилища Озера данных.

### <a name="permissions-needed-tooread-a-file"></a>Разрешения, необходимые tooread файла

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-3.png)

* Для toobe файл hello чтения, hello потребностей вызывающий объект **чтения** разрешения.
* Для всех hello папок hello структуры папок, содержащих файл hello, hello потребностей вызывающий объект **Execute** разрешения.

### <a name="permissions-needed-tooappend-tooa-file"></a>Файл tooa tooappend необходимые разрешения

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-4.png)

* Для добавляемый файл toobe hello hello потребностей вызывающий объект **записи** разрешения.
* Для всех hello папок, содержащих файл hello, hello потребностей вызывающий объект **Execute** разрешения.

### <a name="permissions-needed-toodelete-a-file"></a>Разрешения, необходимые toodelete файла

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-5.png)

* Hello родительской папке, hello потребностей вызывающий объект **записи + выполнение** разрешения.
* Для всех hello другие папки в пути к файлу hello, hello потребностей вызывающий объект **Execute** разрешения.



> [!NOTE]
> Записи разрешений на файл hello не требуется toodelete его при условии, что hello предыдущие два условия верны.
>
>

### <a name="permissions-needed-tooenumerate-a-folder"></a>Разрешения, необходимые tooenumerate папки

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-6.png)

* Для tooenumerate папки hello, hello потребностей вызывающий объект **чтения + Execute** разрешения.
* Для всех hello папки предка, hello потребностей вызывающий объект **Execute** разрешения.

## <a name="viewing-permissions-in-hello-azure-portal"></a>Просмотр разрешений в hello портал Azure

Из hello **обозреватель данных** колонке hello учетной записи хранилища Озера данных, нажмите кнопку **доступа** toosee hello списки управления доступом для файла или папки. Нажмите кнопку **доступа** toosee hello списки управления доступом для hello **каталога** папку hello **mydatastore** учетной записи.

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-show-acls-1.png)

В этой колонке hello верхнем разделе приведен обзор hello разрешений пользователя. (На снимке экрана приветствия пользователя hello — Боб). После этого отображаются hello разрешения на доступ. После этого hello **доступа** колонка, щелкните **простое представление** toosee Здравствуйте, чтобы упростить внешний вид.

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-show-acls-simple-view.png)

Нажмите кнопку **расширенное представление** toosee hello более расширенное представление, где показаны основные понятия hello по умолчанию списки управления доступом, маска и суперпользователя.

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-show-acls-advance-view.png)

## <a name="hello-super-user"></a>Hello суперпользователя

Супертипом пользователь имеет права на большинстве всех пользователей hello hello в hello хранилища Озера данных. Суперпользователь:

* Имеет разрешения RWX слишком**все** файлы и папки.
* Можно изменить разрешения hello любой файл или папку.
* Можно изменить hello, которой принадлежит пользователь или владелец группы любой файл или папку.

В учетной записи Azure Data Lake Store предусмотрено несколько ролей Azure, в том числе:

* владельцы;
* участники;
* читатели;

Все сотрудники hello **владельцев** роли для учетной записи хранилища Озера данных которого автоматически суперпользователя для этой учетной записи. toolearn более, в разделе [управления доступом на основе ролей](../active-directory/role-based-access-control-configure.md).
Если требуется toocreate пользовательского элемента управления на основе доступа ролей (RBAC) роли, имеющей разрешения суперпользователя, он должен быть hello toohave следующие разрешения:
- Microsoft.DataLakeStore/accounts/Superuser/action;
- Microsoft.Authorization/roleAssignments/write.


## <a name="hello-owning-user"></a>Hello владеющего пользователя

Hello пользователя, создавшего элемент hello автоматически — hello, которой принадлежит пользователь hello элемента. Владелец может:

* Изменение разрешений hello, включенного файла.
* Изменить владельца группы файла, который имеет владельца, при условии, что hello владеющего пользователя также является членом группы целевых hello hello.

> [!NOTE]
> Привет, которой принадлежит пользователь *нельзя* изменить hello, которой принадлежит пользователь другого владельца файла. Только супертипом пользователи могут изменять hello, которой принадлежит пользователь, файла или папки.
>
>

## <a name="hello-owning-group"></a>Владелец группы Hello

Каждый пользователь hello ACL POSIX, не связан с «основная группа». Например пользователь «alice» может быть участником группы «Финансы» toohello. Алиса также может быть участником группы toomultiple, но одна группа всегда назначается свой основной группой. В POSIX Если Алиса создает файл, hello, которой принадлежит группе этого файла задается tooher основную группу, что в данном случае является «finance».

При создании нового элемента filesystem хранилища Озера данных присваивает значение toohello, которой принадлежит группе.

* **Вариант 1**: hello корневую папку «/». Эта папка создается при создании учетной записи Data Lake Store. В этом случае владелец группы hello задается toohello пользователя, создавшего hello учетной записи.
* **Вариант 2** (всех остальных случаях): при создании нового элемента, владеющего группа hello копируется из hello родительской папки.

можно изменить владельца группы Hello с:
* одним из суперпользователей;
* Здравствуйте, которой принадлежит пользователь, если hello владеющего пользователя также является членом группы целевых hello.

## <a name="access-check-algorithm"></a>Алгоритм проверки доступа

Привет, Следующая иллюстрация представляет hello алгоритм проверки доступа для учетных записей хранилища Озера данных.

![Алгоритм работы списков управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-algorithm.png)


## <a name="hello-mask-and-effective-permissions"></a>Маска Hello и «действующие разрешения»

Hello **маска** является RWX значения, используемые toolimit доступ для **пользователей с именем**, hello **владелец группы**, и **с именем группы** после выполнение hello алгоритм проверки доступа. Ниже приведены основные понятия hello для hello маски.

* Маска Hello создает «действующие разрешения». То есть он изменяет разрешения hello во время проверки доступа hello.
* Маска Hello могут непосредственно изменять владельца файла hello и супер пользователей.
* Маска Hello можно удалить разрешения toocreate hello действующее разрешение. Маска Hello *нельзя* добавить разрешения toohello действующее разрешение.

Рассмотрим несколько примеров. В следующем примере hello, маска hello задано слишком**RWX**, что означает, что маска hello не удаляет какие-либо разрешения. действующие разрешения с именем пользователя, владеющего группы и группы с именем hello Hello не изменяются во время проверки доступа hello.

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-mask-1.png)

В следующем примере hello, маска hello задано слишком**R-X**. Это означает, что он **отключает разрешения на запись hello** для **с именем пользователя**, **владелец группы**, и **группы с именем** во время hello доступа Проверка.

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-mask-2.png)

Для ссылки Вот расположения hello маску для файла или папки в hello портал Azure.

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-show-acls-mask-view.png)

> [!NOTE]
> Для получения новой учетной записи хранилища Озера данных, hello маску для hello Доступом и ACL по умолчанию hello корневого папка («/») по умолчанию tooRWX.
>
>

## <a name="permissions-on-new-files-and-folders"></a>Разрешения для новых файлов и папок

При создании нового файла или папки внутри существующей папки определяет hello по умолчанию ACL для hello родительской папки:

- список ACL для доступа и список ACL по умолчанию для дочерней папки;
- список ACL для доступа для дочернего файла (файлы не имеют списка ACL по умолчанию).

### <a name="hello-access-acl-of-a-child-file-or-folder"></a>Hello Доступом дочернего файла или папки

При создании дочернего файла или папки, список управления Доступом по умолчанию hello родительского копируются как hello Доступом hello дочернего файла или папки. Кроме того Если **других** пользователь имеет разрешения RWX по умолчанию hello родительского списка управления Доступом, он удаляется из списка ACL для доступа к hello дочернего элемента.

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-child-items-1.png)

В большинстве случаев данные, полученные ранее hello —, все необходимые tooknow о том, как определяется Доступом дочернего элемента. Тем не менее, если вы знакомы с POSIX системами и хотите toounderstand подробные как достигается это преобразование, в разделе hello [Umask его роль в создании hello доступом ACL для новых файлов и папок](#umasks-role-in-creating-the-access-acl-for-new-files-and-folders) далее в этой статье.


### <a name="a-child-folders-default-acl"></a>ACL по умолчанию для дочерней папки

При создании дочерней папкой в родительской папке hello родительской папки по умолчанию ACL копируется через как toohello дочернюю папку по умолчанию ACL.

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-child-items-2.png)

## <a name="advanced-topics-for-understanding-acls-in-data-lake-store"></a>Темы для углубленного изучения принципов работы со списками ACL в Data Lake Store

Ниже приведены некоторые дополнительные разделы toohelp, вы понимаете, как определяется ACL для хранилища Озера данных файлов и папок.

### <a name="umasks-role-in-creating-hello-access-acl-for-new-files-and-folders"></a>Umask его роль в создании hello доступом ACL для новых файлов и папок

В POSIX-совместимая система, общий принцип hello является, umask 9-разрядное значение при hello родительской папки, применяющее разрешение hello tootransform **ответственный пользователь**, **владелец группы**, и  **другие** на hello Доступом нового дочернего файла или папки. биты Hello umask идентификации какие биты tooturn off в Доступом hello дочернего элемента. Таким образом используется hello перенос разрешений для предотвращения tooselectively **ответственный пользователь**, **владелец группы**, и **других**.

В системе HDFS hello umask обычно является параметр конфигурации на всем сайте, который управляется администраторами. Data Lake Store использует маску **umask уровня учетной записи** , которую нельзя изменить. Следующая таблица показывает hello Hello снимите маску для хранилища Озера данных.

| Группа пользователя  | Настройка | Влияние на ACL для доступа для нового дочернего элемента |
|------------ |---------|---------------------------------------|
| владельца | ---     | Не влияет                             |
| группы владельцев| ---     | Не влияет                             |
| другой       | RWX     | Удаление разрешения на чтение, запись и выполнение         |

Hello следующие иллюстрации показан этот umask в действии. конечным итогом Hello является tooremove **чтение + запись и выполнение** для **других** пользователя. Поскольку hello umask не указала бит для **ответственный пользователь** и **владелец группы**, эти разрешения не преобразуются.

![Списки управления доступом в Data Lake Store](./media/data-lake-store-access-control/data-lake-store-acls-umask.png)

### <a name="hello-sticky-bit"></a>закрепленные бит Hello

закрепленные бит Hello является еще одна возможность POSIX filesystem. В контексте hello хранилища Озера данных скорее всего, потребуется обновить закрепленные разряда hello.

Hello следующей таблице показано, как прикрепленные бит hello работает в хранилище Озера данных.

| Группа пользователя         | Файл    | Папка |
|--------------------|---------|-------------------------|
| Бит фиксации **выключен** | Не влияет   | Не влияет           |
| Бит фиксации **включен**  | Не влияет   | Не позволяет другим пользователям, за исключением **супер пользователей** и hello **ответственный пользователь** дочернего элемента, удаление или переименование этого дочернего элемента.               |

закрепленные бит Hello в hello портал Azure не отображается.

## <a name="common-questions-about-acls-in-data-lake-store"></a>Общие вопросы о списках ACL в хранилище Data Lake Store

Ниже приведены ответы на часто задаваемые вопросы, возникающие при работе со списками ACL в Data Lake Store.

### <a name="do-i-have-tooenable-support-for-acls"></a>У tooenable поддержка списки управления доступом?

Нет. Контроль доступа к учетной записи Data Lake Store с помощью ACL всегда включен.

### <a name="which-permissions-are-required-toorecursively-delete-a-folder-and-its-contents"></a>Разрешения, необходимые toorecursively удалить папку и ее содержимое?

* должен иметь родительскую папку Hello **записи + выполнение** разрешения.
* Здравствуйте toobe папка удалена, и каждую папку внутри нее, требует **чтение + запись и выполнение** разрешения.

> [!NOTE]
> Не требуется разрешение на запись toodelete файлы в папках. Кроме того, hello корневую папку «/» можно **никогда не** удалены.
>
>

### <a name="who-is-hello-owner-of-a-file-or-folder"></a>Кто является hello владельца файла или папки?

hello владельцем становится Hello создателя файла или папки.

### <a name="which-group-is-set-as-hello-owning-group-of-a-file-or-folder-at-creation"></a>Группу, которой назначается hello владельца файла или папки при создании группы?

Владелец группы Hello копируется из hello, которой принадлежит группе hello родительской папке, в рамках которой hello создается новый файл или папку.

### <a name="i-am-hello-owning-user-of-a-file-but-i-dont-have-hello-rwx-permissions-i-need-what-do-i-do"></a>Я хочу hello, которой принадлежит пользователь файла при отсутствии hello RWX разрешения, которые требуются. Что делать?

Hello владельца пользователь может изменить разрешения hello toogive файл hello сами любые RWX разрешения, необходимые им.

### <a name="when-i-look-at-acls-in-hello-azure-portal-i-see-user-names-but-through-apis-i-see-guids-why-is-that"></a>При просмотре списки управления доступом в hello портале Azure отображаются имена пользователей, но через API-интерфейсы, отображаются идентификаторы GUID, чем это?

Записи в ACL hello хранятся как идентификаторы GUID, которые соответствуют toousers в Azure AD. Hello API-интерфейсы возвращают идентификаторы GUID hello как есть. Hello портал Azure пытается проще toouse toomake списки управления доступом, перевод hello идентификаторы GUID в понятные имена, когда это возможно.

### <a name="why-do-i-sometimes-see-guids-in-hello-acls-when-im-using-hello-azure-portal"></a>Иногда осталась GUID в ACL hello при использовании hello портал Azure?

Идентификатор GUID отображается в том случае, когда пользователь hello не существует в Azure AD больше. Обычно это происходит, когда hello пользователь покидает компанию hello или если их учетная запись была удалена в Azure AD.

### <a name="does-data-lake-store-support-inheritance-of-acls"></a>Поддерживает ли Data Lake Store наследование списков ACL?

Нет.

### <a name="what-is-hello-difference-between-mask-and-umask"></a>Что такое hello разницу между маски и umask?

| маска | umask|
|------|------|
| Hello **маска** свойство доступно для каждого файла и папки. | Hello **umask** является свойством hello хранилища Озера данных. Поэтому имеется только один umask в hello хранилища Озера данных.    |
| свойство маски Hello для файла или папки может быть изменено, hello, которой принадлежит пользователь или владелец группы файла или суперпользователя. | Нельзя изменить свойство umask Hello любым пользователем, даже суперпользователя. Это неизменяемая постоянная величина.|
| свойство маски Hello используется во время hello алгоритм проверки доступа во время выполнения toodetermine, имеет ли пользователь hello правой tooperform операции для файла или папки. роль Hello маски hello — toocreate «действующие разрешения» во время проверки доступа hello. | во всех Hello umask не используется во время проверки доступа. Hello umask — используется toodetermine hello Доступом новых дочерних элементов папки. |
| Маска Hello является 3-битовое значение RWX, применяет toonamed пользователь, группа с именем и владеющего пользователя во время проверки доступа hello.| Hello umask представляет собой 9-разрядное значение, применяющий toohello, которой принадлежит пользователь, группа, которой принадлежит и **других** нового дочернего элемента.|

### <a name="where-can-i-learn-more-about-posix-access-control-model"></a>Где можно получить дополнительную информацию о модели контроля доступа POSIX?

* [POSIX Access Control Lists on Linux](http://www.vanemery.com/Linux/ACL/POSIX_ACL_on_Linux.html) (Списки управления доступом POSIX для Linux)

* [HDFS Permission Guide](http://hadoop.apache.org/docs/current/hadoop-project-dist/hadoop-hdfs/HdfsPermissionsGuide.html) (Руководство по разрешениям в HDFS)

* [POSIX FAQ (POSIX: вопросы и ответы)](http://www.opengroup.org/austin/papers/posix_faq.html)

* [POSIX 1003.1 2008](http://standards.ieee.org/findstds/standard/1003.1-2008.html)

* [POSIX 1003.1 2013](http://pubs.opengroup.org/onlinepubs/9699919799.2013edition/)

* [POSIX 1003.1 2016](http://pubs.opengroup.org/onlinepubs/9699919799.2016edition/)

* [POSIX ACL on Ubuntu](https://help.ubuntu.com/community/FilePermissionsACLs) (POSIX ACL для Ubuntu)

* [ACL: Using Access Control Lists on Linux](http://bencane.com/2012/05/27/acl-using-access-control-lists-on-linux/) (ACL: использование списков управления доступом в Linux)

## <a name="see-also"></a>Дополнительные материалы

* [Обзор хранилища озера данных Azure](data-lake-store-overview.md)
