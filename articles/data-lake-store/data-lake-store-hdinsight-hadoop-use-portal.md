---
title: "кластеры aaaUse hello Azure toocreate портала Azure HDInsight с хранилища Озера данных | Документы Microsoft"
description: "Использовать hello Azure toocreate портала и использовать кластерами HDInsight в хранилище Озера данных Azure"
services: data-lake-store,hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: a8c45a83-a8e3-4227-8b02-1bc1e1de6767
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 08/14/2017
ms.author: nitinme
ms.openlocfilehash: f23113d444a3c5a01894dba29f75f3621b2d16bd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="create-hdinsight-clusters-with-data-lake-store-by-using-hello-azure-portal"></a><span data-ttu-id="1a218-103">Создание кластеров HDInsight с хранилища Озера данных с помощью портала Azure hello</span><span class="sxs-lookup"><span data-stu-id="1a218-103">Create HDInsight clusters with Data Lake Store by using hello Azure portal</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="1a218-104">Использовать hello портал Azure</span><span class="sxs-lookup"><span data-stu-id="1a218-104">Use hello Azure portal</span></span>](data-lake-store-hdinsight-hadoop-use-portal.md)
> * [<span data-ttu-id="1a218-105">Использование PowerShell (для хранилища по умолчанию)</span><span class="sxs-lookup"><span data-stu-id="1a218-105">Use PowerShell (for default storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell-for-default-storage.md)
> * [<span data-ttu-id="1a218-106">Использование PowerShell (для дополнительного хранилища)</span><span class="sxs-lookup"><span data-stu-id="1a218-106">Use PowerShell (for additional storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)
> * [<span data-ttu-id="1a218-107">Использование Resource Manager</span><span class="sxs-lookup"><span data-stu-id="1a218-107">Use Resource Manager</span></span>](data-lake-store-hdinsight-hadoop-use-resource-manager-template.md)
>
>

<span data-ttu-id="1a218-108">Узнайте, как toouse hello Azure портала toocreate кластера HDInsight с помощью учетной записи хранилища Озера данных Azure как хранилища по умолчанию hello или дополнительное хранилище.</span><span class="sxs-lookup"><span data-stu-id="1a218-108">Learn how toouse hello Azure portal toocreate a HDInsight cluster with an Azure Data Lake Store account as hello default storage or an additional storage.</span></span> <span data-ttu-id="1a218-109">Несмотря на то, что дополнительное хранилище является обязательным для кластера HDInsight, рекомендуется toostore бизнес-данных в hello дополнительные учетные записи хранения.</span><span class="sxs-lookup"><span data-stu-id="1a218-109">Even though additional storage is optional for a HDInsight cluster, it is recommended toostore your business data in hello additional storage accounts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="1a218-110">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="1a218-110">Prerequisites</span></span>
<span data-ttu-id="1a218-111">Прежде чем начать работу с учебником, убедитесь, что соблюдены следующие требования к hello:</span><span class="sxs-lookup"><span data-stu-id="1a218-111">Before you begin this tutorial, ensure that you've met hello following requirements:</span></span>

* <span data-ttu-id="1a218-112">**Подписка Azure**.</span><span class="sxs-lookup"><span data-stu-id="1a218-112">**An Azure subscription**.</span></span> <span data-ttu-id="1a218-113">Go слишком[получить бесплатная пробная версия](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="1a218-113">Go too[Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="1a218-114">**Учетная запись Azure Data Lake Store.**</span><span class="sxs-lookup"><span data-stu-id="1a218-114">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="1a218-115">Следуйте инструкциям hello из [Приступая к работе с хранилища Озера данных Azure с помощью портала Azure hello](data-lake-store-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="1a218-115">Follow hello instructions from [Get started with Azure Data Lake Store by using hello Azure portal](data-lake-store-get-started-portal.md).</span></span> <span data-ttu-id="1a218-116">Необходимо также создать корневую папку на hello учетной записи.</span><span class="sxs-lookup"><span data-stu-id="1a218-116">You must also create a root folder on hello account.</span></span>  <span data-ttu-id="1a218-117">В этом учебнике используется корневая папка __/clusters__.</span><span class="sxs-lookup"><span data-stu-id="1a218-117">In this tutorial, a root folder called __/clusters__ is used.</span></span>
* <span data-ttu-id="1a218-118">**Субъект-служба Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="1a218-118">**An Azure Active Directory service principal**.</span></span> <span data-ttu-id="1a218-119">Этот учебник содержит инструкции о том, как toocreate участника службы в Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="1a218-119">This tutorial provides instructions on how toocreate a service principal in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="1a218-120">Однако toocreate участника службы, необходимо быть администратором Azure AD.</span><span class="sxs-lookup"><span data-stu-id="1a218-120">However, toocreate a service principal, you must be an Azure AD administrator.</span></span> <span data-ttu-id="1a218-121">Если вы являетесь администратором, можно пропустить это предварительное условие и продолжить работу с учебником hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-121">If you are an administrator, you can skip this prerequisite and proceed with hello tutorial.</span></span>

    >[!NOTE]
    ><span data-ttu-id="1a218-122">Создать субъект-службу может только администратор Azure AD.</span><span class="sxs-lookup"><span data-stu-id="1a218-122">You can create a service principal only if you are an Azure AD administrator.</span></span> <span data-ttu-id="1a218-123">Администратор Azure AD должен сначала создать субъект-службу, после чего вы сможете создать кластер HDInsight, использующий Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="1a218-123">Your Azure AD administrator must create a service principal before you can create an HDInsight cluster with Data Lake Store.</span></span> <span data-ttu-id="1a218-124">Кроме того, hello участника-службы должны создаваться с помощью сертификата, как описано в разделе [создании участника службы с сертификатом](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span><span class="sxs-lookup"><span data-stu-id="1a218-124">Also, hello service principal must be created with a certificate, as described at [Create a service principal with certificate](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span></span>
    >

## <a name="create-an-hdinsight-cluster"></a><span data-ttu-id="1a218-125">Создание кластера HDInsight</span><span class="sxs-lookup"><span data-stu-id="1a218-125">Create an HDInsight cluster</span></span>

<span data-ttu-id="1a218-126">В этом разделе создается кластер HDInsight с учетными записями хранилища Озера данных по умолчанию hello или hello дополнительное хранилище.</span><span class="sxs-lookup"><span data-stu-id="1a218-126">In this section, you create a HDInsight cluster with Data Lake Store accounts as hello default or hello additional storage.</span></span> <span data-ttu-id="1a218-127">В этой статье описываются только hello при настройке учетных записей хранилища Озера данных.</span><span class="sxs-lookup"><span data-stu-id="1a218-127">This article only focuses hello part of configuring Data Lake Store accounts.</span></span>  <span data-ttu-id="1a218-128">Hello общие кластера создания сведения и процедуры см. в разделе [кластеров создать Hadoop в HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="1a218-128">For hello general cluster creation information and procedures, see [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span></span>

### <a name="create-a-cluster-with-data-lake-store-as-default-storage"></a><span data-ttu-id="1a218-129">Создание кластера HDInsight, использующего Data Lake Store в качестве хранилища по умолчанию</span><span class="sxs-lookup"><span data-stu-id="1a218-129">Create a cluster with Data Lake Store as default storage</span></span>

<span data-ttu-id="1a218-130">**toocreate HDInsight кластера хранилище Озера данных в качестве учетной записи хранения по умолчанию hello**</span><span class="sxs-lookup"><span data-stu-id="1a218-130">**toocreate a HDInsight cluster with a Data Lake Store as hello default storage account**</span></span>

1. <span data-ttu-id="1a218-131">Войдите в toohello [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="1a218-131">Sign in toohello [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="1a218-132">Выполните [создавать кластеры](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) hello Общие сведения о создании кластеров HDInsight.</span><span class="sxs-lookup"><span data-stu-id="1a218-132">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for hello general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="1a218-133">На hello **хранения** колонки в разделе **тип основного хранилища**выберите **хранилища Озера данных**и введите следующую информацию hello:</span><span class="sxs-lookup"><span data-stu-id="1a218-133">On hello **Storage** blade, under **Primary storage type**, select **Data Lake Store**, and then enter hello following information:</span></span>

    <span data-ttu-id="1a218-134">![Добавить службы основной tooHDInsight кластера](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "добавить службы основной tooHDInsight кластера")</span><span class="sxs-lookup"><span data-stu-id="1a218-134">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "Add service principal tooHDInsight cluster")</span></span>

    - <span data-ttu-id="1a218-135">**Выбрать учетную запись Data Lake Store**: выберите существующую учетную запись Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="1a218-135">**Select Data Lake Store account**: Select an existing Data Lake Store account.</span></span> <span data-ttu-id="1a218-136">Требуется существующая учетная запись Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="1a218-136">An existing Data Lake Store account is required.</span></span>  <span data-ttu-id="1a218-137">См. раздел [Предварительные требования](#prereuisites).</span><span class="sxs-lookup"><span data-stu-id="1a218-137">See [Prerequisites](#prereuisites).</span></span>
    - <span data-ttu-id="1a218-138">**Путь к корневому каталогу**: Введите путь, в которых toobe хранимых файлов, относящихся к кластеру hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-138">**Root path**: Enter a path where hello cluster-specific files are toobe stored.</span></span> <span data-ttu-id="1a218-139">На снимке экрана приветствия, это __/кластеры/myhdiadlcluster/__, в какие hello __/кластеры__ папка должна существовать и hello портал создает *myhdicluster* папки.</span><span class="sxs-lookup"><span data-stu-id="1a218-139">On hello screenshot, it is __/clusters/myhdiadlcluster/__, in which hello __/clusters__ folder must exist, and hello Portal creates *myhdicluster* folder.</span></span>  <span data-ttu-id="1a218-140">Hello *myhdicluster* — имя кластера hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-140">hello *myhdicluster* is hello cluster name.</span></span>
    - <span data-ttu-id="1a218-141">**Доступ к хранилищу Озера данных**: настроить доступ между учетной записи хранилища Озера данных hello и кластера HDInsight.</span><span class="sxs-lookup"><span data-stu-id="1a218-141">**Data Lake Store access**: Configure access between hello Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="1a218-142">Инструкции см. в разделе [Настройка доступа к Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="1a218-142">For instructions, see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>
    - <span data-ttu-id="1a218-143">**Дополнительные учетные записи хранения**: Добавление учетных записей хранения Azure как дополнительное хранилище учетных записей для hello кластера.</span><span class="sxs-lookup"><span data-stu-id="1a218-143">**Additional storage accounts**: Add Azure Storage Accounts as additional storage accounts for hello cluster.</span></span> <span data-ttu-id="1a218-144">tooadd дополнительных хранилища Озера данных выполняется путем предоставления hello кластера разрешения на данные в несколько учетных записей хранилища Озера данных при настройке учетной записи хранилища Озера данных как тип основного хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-144">tooadd additional Data Lake Stores is done by giving hello cluster permissions on data in more Data Lake Store accounts while configuring a Data Lake Store account as hello primary storage type.</span></span> <span data-ttu-id="1a218-145">См. раздел [Настройка доступа к Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="1a218-145">See [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

4. <span data-ttu-id="1a218-146">На hello **доступ к хранилищу Озера данных**, нажмите кнопку **выберите**, а затем продолжите создание кластера, как описано в [кластеров создать Hadoop в HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span><span class="sxs-lookup"><span data-stu-id="1a218-146">On hello **Data Lake Store access**, click **Select**, and then continue with cluster creation as described in [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span></span>


### <a name="create-a-cluster-with-data-lake-store-as-additional-storage"></a><span data-ttu-id="1a218-147">Создание кластера HDInsight, использующего Data Lake Store в качестве дополнительного хранилища</span><span class="sxs-lookup"><span data-stu-id="1a218-147">Create a cluster with Data Lake Store as additional storage</span></span>

<span data-ttu-id="1a218-148">Hello следующие инструкции создание кластера HDInsight с учетная запись хранилища Azure в качестве хранилища по умолчанию hello и учетную запись хранилища Озера данных как дополнительное хранилище.</span><span class="sxs-lookup"><span data-stu-id="1a218-148">hello following instructions create a HDInsight cluster with an Azure Storage account as hello default storage, and a Data Lake Store account as an additional storage.</span></span>
<span data-ttu-id="1a218-149">**toocreate HDInsight кластера хранилище Озера данных в качестве учетной записи хранения по умолчанию hello**</span><span class="sxs-lookup"><span data-stu-id="1a218-149">**toocreate a HDInsight cluster with a Data Lake Store as hello default storage account**</span></span>

1. <span data-ttu-id="1a218-150">Войдите в toohello [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="1a218-150">Sign in toohello [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="1a218-151">Выполните [создавать кластеры](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) hello Общие сведения о создании кластеров HDInsight.</span><span class="sxs-lookup"><span data-stu-id="1a218-151">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for hello general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="1a218-152">На hello **хранилища** колонки в разделе **тип основного хранилища**выберите **хранилища Azure**и введите hello следующую информацию:</span><span class="sxs-lookup"><span data-stu-id="1a218-152">On hello **Storage** blade, under **Primary storage type**, select **Azure Storage**, and then enter hello following information:</span></span>

    <span data-ttu-id="1a218-153">![Добавить службы основной tooHDInsight кластера](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "добавить службы основной tooHDInsight кластера")</span><span class="sxs-lookup"><span data-stu-id="1a218-153">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "Add service principal tooHDInsight cluster")</span></span>

    - <span data-ttu-id="1a218-154">**Метод выбора**: используйте один из следующих вариантов hello:</span><span class="sxs-lookup"><span data-stu-id="1a218-154">**Selection method**: use one of hello following options:</span></span>

        * <span data-ttu-id="1a218-155">Выберите toospecify учетной записи хранилища, который является частью вашей подписке Azure **Мои подписки**, а затем выберите учетную запись хранения hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-155">toospecify a storage account that is part of your Azure subscription, select **My subscriptions**, and then select hello storage account.</span></span>
        * <span data-ttu-id="1a218-156">toospecify учетной записи хранилища, который находится за пределами вашей подписке Azure, выберите **ключ доступа**, а затем введите данные hello для hello за пределами учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="1a218-156">toospecify a storage account that is outside your Azure subscription, select **Access key**, and then provide hello information for hello outside storage account.</span></span>

    - <span data-ttu-id="1a218-157">**Контейнер по умолчанию**: использовать либо значение по умолчанию hello или задать собственное имя.</span><span class="sxs-lookup"><span data-stu-id="1a218-157">**Default container**: use either hello default value or specify your own name.</span></span>

    - <span data-ttu-id="1a218-158">Дополнительные учетные записи хранения: добавить несколько учетных записей хранилища Azure в качестве дополнительного хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-158">Additional Storage accounts: add more Azure Storage accounts as hello additional storage.</span></span>
    - <span data-ttu-id="1a218-159">Доступ к хранилищу Озера данных: настроить доступ между учетной записи хранилища Озера данных hello и кластера HDInsight.</span><span class="sxs-lookup"><span data-stu-id="1a218-159">Data Lake Store access: configure access between hello Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="1a218-160">Инструкции см. в разделе [Настройка доступа к Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="1a218-160">For instructions see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

## <a name="configure-data-lake-store-access"></a><span data-ttu-id="1a218-161">Настройка доступа к Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="1a218-161">Configure Data Lake Store access</span></span> 

<span data-ttu-id="1a218-162">В этом разделе вы настроите доступ к Data Lake Store из кластеров HDInsight с помощью субъекта-службы Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="1a218-162">In this section, you configure Data Lake Store access from HDInsight clusters using an Azure Active Directory service principal.</span></span> 

### <a name="specify-a-service-principal"></a><span data-ttu-id="1a218-163">Указание субъекта-службы</span><span class="sxs-lookup"><span data-stu-id="1a218-163">Specify a service principal</span></span>

<span data-ttu-id="1a218-164">Из hello портал Azure можно использовать существующий субъект-служба или создайте новую.</span><span class="sxs-lookup"><span data-stu-id="1a218-164">From hello Azure portal, you can either use an existing service principal or create a new one.</span></span>

<span data-ttu-id="1a218-165">**toocreate участника службы из hello портал Azure**</span><span class="sxs-lookup"><span data-stu-id="1a218-165">**toocreate a service principal from hello Azure portal**</span></span>

1. <span data-ttu-id="1a218-166">Нажмите кнопку **доступ к хранилищу Озера данных** из колонки hello хранилища.</span><span class="sxs-lookup"><span data-stu-id="1a218-166">Click **Data Lake Store access** from hello Store blade.</span></span>
2. <span data-ttu-id="1a218-167">На hello **доступ к хранилищу Озера данных** колонка, щелкните **создать новый**.</span><span class="sxs-lookup"><span data-stu-id="1a218-167">On hello **Data Lake Store access** blade, click **Create new**.</span></span>
3. <span data-ttu-id="1a218-168">Нажмите кнопку **участника-службы**, а затем выполните инструкции hello toocreate участника службы.</span><span class="sxs-lookup"><span data-stu-id="1a218-168">Click **Service Principal**, and then follow hello instructions toocreate a service principal.</span></span>
4. <span data-ttu-id="1a218-169">Загрузите сертификат hello в том случае, если вы решите toouse его снова в будущем hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-169">Download hello certificate if you decide toouse it again in hello future.</span></span> <span data-ttu-id="1a218-170">Загрузка hello сертификат полезен, если требуется toouse hello же служба участника при создании дополнительных кластеров HDInsight.</span><span class="sxs-lookup"><span data-stu-id="1a218-170">Downloading hello certificate is useful if you want toouse hello same service principal when you create additional HDInsight clusters.</span></span>

    <span data-ttu-id="1a218-171">![Добавить службы основной tooHDInsight кластера](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "добавить службы основной tooHDInsight кластера")</span><span class="sxs-lookup"><span data-stu-id="1a218-171">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "Add service principal tooHDInsight cluster")</span></span>

4. <span data-ttu-id="1a218-172">Нажмите кнопку **доступа** доступ к папке tooconfigure hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-172">Click **Access** tooconfigure hello folder access.</span></span>  <span data-ttu-id="1a218-173">См. раздел [Настройка разрешений для файлов](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="1a218-173">See [Configure file permissions](#configure-file-permissions).</span></span>


<span data-ttu-id="1a218-174">**toouse существующий субъект-службу из hello портал Azure**</span><span class="sxs-lookup"><span data-stu-id="1a218-174">**toouse an existing service principal from hello Azure portal**</span></span>

1. <span data-ttu-id="1a218-175">Щелкните **Доступ к Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="1a218-175">Click **Data Lake Store access**.</span></span>
1. <span data-ttu-id="1a218-176">На hello **доступ к хранилищу Озера данных** колонка, щелкните **использовать существующие**.</span><span class="sxs-lookup"><span data-stu-id="1a218-176">On hello **Data Lake Store access** blade, click **Use existing**.</span></span>
2. <span data-ttu-id="1a218-177">Щелкните **Субъект-служба**, а затем выберите субъект-службу.</span><span class="sxs-lookup"><span data-stu-id="1a218-177">Click **Service Principal**, and then select a service principal.</span></span> 
3. <span data-ttu-id="1a218-178">Отправка hello сертификата (PFX-файл), связанной с участниками выбранные службы, а затем введите пароль сертификата hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-178">Upload hello certificate (.pfx file) that's associated with your selected service principal, and then enter hello certificate password.</span></span>

    <span data-ttu-id="1a218-179">![Добавить службы основной tooHDInsight кластера](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "добавить службы основной tooHDInsight кластера")</span><span class="sxs-lookup"><span data-stu-id="1a218-179">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "Add service principal tooHDInsight cluster")</span></span>

4. <span data-ttu-id="1a218-180">Нажмите кнопку **доступа** доступ к папке tooconfigure hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-180">Click **Access** tooconfigure hello folder access.</span></span>  <span data-ttu-id="1a218-181">См. раздел [Настройка разрешений для файлов](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="1a218-181">See [Configure file permissions](#configure-file-permissions).</span></span>


### <span data-ttu-id="1a218-182"><a name="configure-file-permissions"></a>Настройка разрешений для файлов</span><span class="sxs-lookup"><span data-stu-id="1a218-182"><a name="configure-file-permissions"></a>Configure file permissions</span></span>

<span data-ttu-id="1a218-183">Настраивает Hello различаются в зависимости от того, было ли hello будут использоваться в качестве хранилища по умолчанию hello или дополнительная учетная запись хранения:</span><span class="sxs-lookup"><span data-stu-id="1a218-183">hello configures are different depending on whether hello account is used as hello default storage or an additional storage account:</span></span>

- <span data-ttu-id="1a218-184">В качестве хранилища по умолчанию:</span><span class="sxs-lookup"><span data-stu-id="1a218-184">Used as default storage</span></span>

    - <span data-ttu-id="1a218-185">разрешение на корневом уровне hello hello хранилища Озера данных</span><span class="sxs-lookup"><span data-stu-id="1a218-185">permission at hello root level of hello Data Lake Store account</span></span>
    - <span data-ttu-id="1a218-186">разрешение на корневом уровне hello hello хранения данных кластера HDInsight.</span><span class="sxs-lookup"><span data-stu-id="1a218-186">permission at hello root level of hello HDInsight cluster storage.</span></span> <span data-ttu-id="1a218-187">Например, hello __/кластеры__ папки, используемой ранее в учебнике hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-187">For example, hello __/clusters__ folder used earlier in hello tutorial.</span></span>
- <span data-ttu-id="1a218-188">В качестве дополнительного хранилища:</span><span class="sxs-lookup"><span data-stu-id="1a218-188">Use as an additional storage</span></span>

    - <span data-ttu-id="1a218-189">Разрешения на папки hello, где вам требуется доступ к файлам.</span><span class="sxs-lookup"><span data-stu-id="1a218-189">Permission at hello folders where you need file access.</span></span>

<span data-ttu-id="1a218-190">**разрешение tooassign во hello корневого уровня учетной записи хранилища Озера данных**</span><span class="sxs-lookup"><span data-stu-id="1a218-190">**tooassign permission at hello Data Lake Store account root level**</span></span>

1. <span data-ttu-id="1a218-191">На hello **доступ к хранилищу Озера данных** колонка, щелкните **доступа**.</span><span class="sxs-lookup"><span data-stu-id="1a218-191">On hello **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="1a218-192">Hello **выберите разрешения для файлов** открыть колонку.</span><span class="sxs-lookup"><span data-stu-id="1a218-192">hello **Select file permissions** blade is opened.</span></span> <span data-ttu-id="1a218-193">В нем перечислены все учетные записи хранилища Озера данных hello в вашей подписке.</span><span class="sxs-lookup"><span data-stu-id="1a218-193">It lists all hello Data Lake Store accounts in your subscription.</span></span>
2. <span data-ttu-id="1a218-194">Наведите указатель мыши (не выбирайте) hello при наведении hello имя hello toomake hello флажок отображается, а затем выберите hello флажок учетной записи хранилища Озера данных.</span><span class="sxs-lookup"><span data-stu-id="1a218-194">Hover (do not click) hello mouse over hello name of hello Data Lake Store account toomake hello check box visible, then select hello check box.</span></span>

    <span data-ttu-id="1a218-195">![Добавить службы основной tooHDInsight кластера](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "добавить службы основной tooHDInsight кластера")</span><span class="sxs-lookup"><span data-stu-id="1a218-195">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "Add service principal tooHDInsight cluster")</span></span>

  <span data-ttu-id="1a218-196">По умолчанию выбраны разрешения __Чтение__, __Запись__ и __Выполнение__.</span><span class="sxs-lookup"><span data-stu-id="1a218-196">By default, __READ__, __WRITE__, AND __EXECUTE__ are all selected.</span></span>

3. <span data-ttu-id="1a218-197">Нажмите кнопку **выберите** hello нижней части страницы приветствия.</span><span class="sxs-lookup"><span data-stu-id="1a218-197">Click **Select** on hello bottom of hello page.</span></span>
4. <span data-ttu-id="1a218-198">Нажмите кнопку **запуска** tooassign разрешение.</span><span class="sxs-lookup"><span data-stu-id="1a218-198">Click **Run** tooassign permission.</span></span>
5. <span data-ttu-id="1a218-199">Нажмите кнопку **Done**(Готово).</span><span class="sxs-lookup"><span data-stu-id="1a218-199">Click **Done**.</span></span>

<span data-ttu-id="1a218-200">**tooassign разрешение на уровне корневого кластера HDInsight hello**</span><span class="sxs-lookup"><span data-stu-id="1a218-200">**tooassign permission at hello HDInsight cluster root level**</span></span>

1. <span data-ttu-id="1a218-201">На hello **доступ к хранилищу Озера данных** колонка, щелкните **доступа**.</span><span class="sxs-lookup"><span data-stu-id="1a218-201">On hello **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="1a218-202">Hello **выберите разрешения для файлов** открыть колонку.</span><span class="sxs-lookup"><span data-stu-id="1a218-202">hello **Select file permissions** blade is opened.</span></span> <span data-ttu-id="1a218-203">В нем перечислены все учетные записи хранилища Озера данных hello в вашей подписке.</span><span class="sxs-lookup"><span data-stu-id="1a218-203">It lists all hello Data Lake Store accounts in your subscription.</span></span>
1. <span data-ttu-id="1a218-204">Из hello **выберите разрешения для файлов** колонка, щелкните имя tooshow hello хранилища Озера данных его содержимого.</span><span class="sxs-lookup"><span data-stu-id="1a218-204">From hello **Select file permissions** blade, click hello Data Lake Store name tooshow its content.</span></span>
2. <span data-ttu-id="1a218-205">Выберите корневого хранилища кластера HDInsight hello, установив флажок hello слева hello hello папки.</span><span class="sxs-lookup"><span data-stu-id="1a218-205">Select hello HDInsight cluster storage root by selecting hello checkbox on hello left of hello folder.</span></span> <span data-ttu-id="1a218-206">В соответствии с toohello экрана выше, — корневого хранилища кластера hello __/кластеры__ папки, заданной при выделении хранилища Озера данных hello хранения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="1a218-206">According toohello screenshot earlier, hello cluster storage root is __/clusters__ folder that you specified while selecting hello Data Lake Store as default storage.</span></span>
3. <span data-ttu-id="1a218-207">Задать hello разрешения на папку hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-207">Set hello permissions on hello folder.</span></span>  <span data-ttu-id="1a218-208">По умолчанию выбраны разрешения на чтение, запись и выполнение.</span><span class="sxs-lookup"><span data-stu-id="1a218-208">By default, read, write, and execute are all selected.</span></span>
4. <span data-ttu-id="1a218-209">Нажмите кнопку **выберите** hello нижней части страницы приветствия.</span><span class="sxs-lookup"><span data-stu-id="1a218-209">Click **Select** on hello bottom of hello page.</span></span>
5. <span data-ttu-id="1a218-210">Щелкните **Выполнить**.</span><span class="sxs-lookup"><span data-stu-id="1a218-210">Click **Run**.</span></span>
6. <span data-ttu-id="1a218-211">Нажмите кнопку **Done**(Готово).</span><span class="sxs-lookup"><span data-stu-id="1a218-211">Click **Done**.</span></span>

<span data-ttu-id="1a218-212">При использовании хранилища Озера данных как дополнительное хранилище, необходимо назначить разрешение только для папок hello, которые должны tooaccess из кластера HDInsight hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-212">If you are using Data Lake Store as additional storage, you must assign permission only for hello folders that you want tooaccess from hello HDInsight cluster.</span></span> <span data-ttu-id="1a218-213">Например, в следующем снимке экрана приветствия, вы предоставляете доступ только слишком**hdiaddonstorage** папки в учетной записи хранилища Озера данных.</span><span class="sxs-lookup"><span data-stu-id="1a218-213">For example, in hello screenshot below, you provide access only too**hdiaddonstorage** folder in a Data Lake Store account.</span></span>

<span data-ttu-id="1a218-214">![Назначить кластер HDInsight toohello разрешения участника службы](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "кластера HDInsight toohello разрешения участника службы Assign")</span><span class="sxs-lookup"><span data-stu-id="1a218-214">![Assign service principal permissions toohello HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "Assign service principal permissions toohello HDInsight cluster")</span></span>


## <a name="verify-cluster-set-up"></a><span data-ttu-id="1a218-215">Проверка настроек кластера</span><span class="sxs-lookup"><span data-stu-id="1a218-215">Verify cluster set up</span></span>

<span data-ttu-id="1a218-216">По завершении установки кластера hello в колонке кластера hello, проверьте результаты, выполнив одной или обеих hello следующие шаги:</span><span class="sxs-lookup"><span data-stu-id="1a218-216">After hello cluster setup is complete, on hello cluster blade, verify your results by doing either or both of hello following steps:</span></span>

* <span data-ttu-id="1a218-217">tooverify hello хранилища для кластера hello hello хранилища Озера данных указанной учетной записи, нажмите кнопку **учетные записи хранения** hello левой панели.</span><span class="sxs-lookup"><span data-stu-id="1a218-217">tooverify that hello associated storage for hello cluster is hello Data Lake Store account that you specified, click **Storage accounts** in hello left pane.</span></span>

    <span data-ttu-id="1a218-218">![Добавить службы основной tooHDInsight кластера](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "добавить службы основной tooHDInsight кластера")</span><span class="sxs-lookup"><span data-stu-id="1a218-218">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "Add service principal tooHDInsight cluster")</span></span>

* <span data-ttu-id="1a218-219">tooverify, hello участника-службы был правильно связан с кластером HDInsight hello, щелкните **доступ к хранилищу Озера данных** hello левой панели.</span><span class="sxs-lookup"><span data-stu-id="1a218-219">tooverify that hello service principal is correctly associated with hello HDInsight cluster, click **Data Lake Store access** in hello left pane.</span></span>

    <span data-ttu-id="1a218-220">![Добавить службы основной tooHDInsight кластера](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "добавить службы основной tooHDInsight кластера")</span><span class="sxs-lookup"><span data-stu-id="1a218-220">![Add service principal tooHDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "Add service principal tooHDInsight cluster")</span></span>


## <a name="examples"></a><span data-ttu-id="1a218-221">Примеры</span><span class="sxs-lookup"><span data-stu-id="1a218-221">Examples</span></span>

<span data-ttu-id="1a218-222">После настройки кластера hello с хранилища Озера данных как жесткие диски, см. Примеры toothese как toouse HDInsight кластера tooanalyze hello данные, которые хранятся в хранилище Озера данных.</span><span class="sxs-lookup"><span data-stu-id="1a218-222">After you have set up hello cluster with Data Lake Store as your storage, refer toothese examples of how toouse HDInsight cluster tooanalyze hello data that's stored in Data Lake Store.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-primary-storage"></a><span data-ttu-id="1a218-223">Выполнение запроса Hive к данным, хранящимся в Data Lake Store (основное хранилище)</span><span class="sxs-lookup"><span data-stu-id="1a218-223">Run a Hive query against data in a Data Lake Store (as primary storage)</span></span>

<span data-ttu-id="1a218-224">toorun запрос Hive с помощью интерфейса представления Hive hello hello Ambari портала.</span><span class="sxs-lookup"><span data-stu-id="1a218-224">toorun a Hive query, use hello Hive views interface in hello Ambari portal.</span></span> <span data-ttu-id="1a218-225">Инструкции по способ представления toouse Ambari куста см [hello используйте представление Hive с Hadoop в HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span><span class="sxs-lookup"><span data-stu-id="1a218-225">For instructions on how toouse Ambari Hive views, see [Use hello Hive View with Hadoop in HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span></span>

<span data-ttu-id="1a218-226">При работе с данными в хранилище Озера данных, существует несколько toochange строк.</span><span class="sxs-lookup"><span data-stu-id="1a218-226">When you work with data in a Data Lake Store, there are a few strings toochange.</span></span>

<span data-ttu-id="1a218-227">При использовании, например, созданный с помощью хранилища Озера данных в качестве основного хранилища, кластер hello hello путь toohello данные являются: *adl: / / < data_lake_store_account_name > /azuredatalakestore.net/path/to/file*.</span><span class="sxs-lookup"><span data-stu-id="1a218-227">If you use, for example, hello cluster that you created with Data Lake Store as primary storage, hello path toohello data is: *adl://<data_lake_store_account_name>/azuredatalakestore.net/path/to/file*.</span></span> <span data-ttu-id="1a218-228">Запрос Hive toocreate таблицу из образца данных, хранящихся в hello хранилища Озера данных выглядит следующим образом hello, следующем за инструкцией.</span><span class="sxs-lookup"><span data-stu-id="1a218-228">A Hive query toocreate a table from sample data that's stored in hello Data Lake Store account looks like hello following statement:</span></span>

    CREATE EXTERNAL TABLE websitelog (str string) LOCATION 'adl://hdiadlsstorage.azuredatalakestore.net/clusters/myhdiadlcluster/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/'

<span data-ttu-id="1a218-229">Описание</span><span class="sxs-lookup"><span data-stu-id="1a218-229">Descriptions:</span></span>
* <span data-ttu-id="1a218-230">`adl://hdiadlstorage.azuredatalakestore.net/`— основной hello hello хранилища Озера данных.</span><span class="sxs-lookup"><span data-stu-id="1a218-230">`adl://hdiadlstorage.azuredatalakestore.net/` is hello root of hello Data Lake Store account.</span></span>
* <span data-ttu-id="1a218-231">`/clusters/myhdiadlcluster`— основной hello hello данных кластера, указанный при создании кластера hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-231">`/clusters/myhdiadlcluster` is hello root of hello cluster data that you specified while creating hello cluster.</span></span>
* <span data-ttu-id="1a218-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/`— местоположение hello hello пример файла, который используется в запросе hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/` is hello location of hello sample file that you used in hello query.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-additional-storage"></a><span data-ttu-id="1a218-233">Выполнение запроса Hive к данным, хранящимся в Data Lake Store (дополнительное хранилище)</span><span class="sxs-lookup"><span data-stu-id="1a218-233">Run a Hive query against data in a Data Lake Store (as additional storage)</span></span>

<span data-ttu-id="1a218-234">Если созданный hello кластер использует хранилище больших двоичных объектов хранения по умолчанию, образец данных hello не содержится в hello учетной записи хранилища Озера данных Azure, которая используется в качестве дополнительного хранилища.</span><span class="sxs-lookup"><span data-stu-id="1a218-234">If hello cluster that you created uses Blob storage as default storage, hello sample data is not contained in hello Azure Data Lake Store account that's used as additional storage.</span></span> <span data-ttu-id="1a218-235">В этом случае сначала перенести данные hello из toohello хранилища больших двоичных объектов хранилища Озера данных и затем выполняются запросы hello, как показано в предшествующих пример hello.</span><span class="sxs-lookup"><span data-stu-id="1a218-235">In such a case, first transfer hello data from Blob storage toohello Data Lake Store, and then run hello queries as shown in hello preceding example.</span></span>

<span data-ttu-id="1a218-236">Сведения о как toocopy из BLOB-хранилища Озера данных tooa хранилище данных см. следующие статьи hello:</span><span class="sxs-lookup"><span data-stu-id="1a218-236">For information on how toocopy data from Blob storage tooa Data Lake Store, see hello following articles:</span></span>

* [<span data-ttu-id="1a218-237">Использовать данные toocopy Distcp между BLOB-объектов хранилища Azure и хранилища Озера данных</span><span class="sxs-lookup"><span data-stu-id="1a218-237">Use Distcp toocopy data between Azure Storage blobs and Data Lake Store</span></span>](data-lake-store-copy-data-wasb-distcp.md)
* [<span data-ttu-id="1a218-238">Использовать AdlCopy toocopy данные из хранилища Azure BLOB-объектов хранилища Озера tooData</span><span class="sxs-lookup"><span data-stu-id="1a218-238">Use AdlCopy toocopy data from Azure Storage blobs tooData Lake Store</span></span>](data-lake-store-copy-data-azure-storage-blob.md)

### <a name="use-data-lake-store-with-a-spark-cluster"></a><span data-ttu-id="1a218-239">Использование Data Lake Store с кластером Spark</span><span class="sxs-lookup"><span data-stu-id="1a218-239">Use Data Lake Store with a Spark cluster</span></span>
<span data-ttu-id="1a218-240">Toorun Spark Spark кластерных заданий можно использовать для данных, которые хранятся в хранилище Озера данных.</span><span class="sxs-lookup"><span data-stu-id="1a218-240">You can use a Spark cluster toorun Spark jobs on data that is stored in a Data Lake Store.</span></span> <span data-ttu-id="1a218-241">Дополнительные сведения см. в разделе [данные tooanalyze кластера HDInsight Spark использования хранилища Озера данных](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="1a218-241">For more information, see [Use HDInsight Spark cluster tooanalyze data in Data Lake Store](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span></span>


### <a name="use-data-lake-store-in-a-storm-topology"></a><span data-ttu-id="1a218-242">Использование хранилища озера данных в топологии Storm</span><span class="sxs-lookup"><span data-stu-id="1a218-242">Use Data Lake Store in a Storm topology</span></span>
<span data-ttu-id="1a218-243">Можно использовать данные toowrite hello хранилища Озера данных из топологии Storm.</span><span class="sxs-lookup"><span data-stu-id="1a218-243">You can use hello Data Lake Store toowrite data from a Storm topology.</span></span> <span data-ttu-id="1a218-244">Инструкции по tooachieve этот сценарий в разделе [использования хранилища Озера данных Azure с помощью Apache Storm с HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="1a218-244">For instructions on how tooachieve this scenario, see [Use Azure Data Lake Store with Apache Storm with HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="1a218-245">См. также</span><span class="sxs-lookup"><span data-stu-id="1a218-245">See also</span></span>
* [<span data-ttu-id="1a218-246">PowerShell: Создание toouse кластера HDInsight хранилища Озера данных</span><span class="sxs-lookup"><span data-stu-id="1a218-246">PowerShell: Create an HDInsight cluster toouse Data Lake Store</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)

[makecert]: https://msdn.microsoft.com/library/windows/desktop/ff548309(v=vs.85).aspx
[pvk2pfx]: https://msdn.microsoft.com/library/windows/desktop/ff550672(v=vs.85).aspx
