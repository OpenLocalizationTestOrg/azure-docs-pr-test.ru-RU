---
title: "Аутентификация между службами в Data Lake Store с помощью Azure Active Directory | Документация Майкрософт"
description: "Узнайте, как проверка подлинности service to service tooachieve с Azure Active Directory с помощью хранилища Озера данных"
services: data-lake-store
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: 820b7c5d-4863-4225-9bd1-df4d8f515537
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 04/21/2017
ms.author: nitinme
ms.openlocfilehash: 2e56237a75f020067b3248a1e1cfaf3c8df1371c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="service-to-service-authentication-with-data-lake-store-using-azure-active-directory"></a><span data-ttu-id="d666f-103">Аутентификация между службами в Data Lake Store с помощью Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="d666f-103">Service-to-service authentication with Data Lake Store using Azure Active Directory</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="d666f-104">Аутентификация между службами</span><span class="sxs-lookup"><span data-stu-id="d666f-104">Service-to-service authentication</span></span>](data-lake-store-authenticate-using-active-directory.md)
> * [<span data-ttu-id="d666f-105">Аутентификация пользователей</span><span class="sxs-lookup"><span data-stu-id="d666f-105">End-user authentication</span></span>](data-lake-store-end-user-authenticate-using-active-directory.md)
> 
> 

<span data-ttu-id="d666f-106">Azure Data Lake Store использует Azure Active Directory для аутентификации.</span><span class="sxs-lookup"><span data-stu-id="d666f-106">Azure Data Lake Store uses Azure Active Directory for authentication.</span></span> <span data-ttu-id="d666f-107">До создания приложения, которое работает с хранилища Озера данных Azure и аналитики Озера данных Azure, сначала необходимо решить, как tooauthenticate приложения с Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="d666f-107">Before authoring an application that works with Azure Data Lake Store or Azure Data Lake Analytics, you must first decide how you would like tooauthenticate your application with Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="d666f-108">Hello основные возможные варианты:</span><span class="sxs-lookup"><span data-stu-id="d666f-108">hello two main options available are:</span></span>

* <span data-ttu-id="d666f-109">Аутентификация пользователей</span><span class="sxs-lookup"><span data-stu-id="d666f-109">End-user authentication</span></span> 
* <span data-ttu-id="d666f-110">Аутентификация между службами (в этой статье)</span><span class="sxs-lookup"><span data-stu-id="d666f-110">Service-to-service authentication (this article)</span></span> 

<span data-ttu-id="d666f-111">Оба этих параметра привести приложение, предоставляемой с токеном OAuth 2.0, который получает tooeach вложенного запроса, выполняемого tooAzure хранилища Озера данных или аналитики Озера данных Azure.</span><span class="sxs-lookup"><span data-stu-id="d666f-111">Both these options result in your application being provided with an OAuth 2.0 token, which gets attached tooeach request made tooAzure Data Lake Store or Azure Data Lake Analytics.</span></span>

<span data-ttu-id="d666f-112">Из этой статьи вы узнаете, как создать **веб-приложение Azure AD для аутентификации между службами**.</span><span class="sxs-lookup"><span data-stu-id="d666f-112">This article talks about how create an **Azure AD web application for service-to-service authentication**.</span></span> <span data-ttu-id="d666f-113">Инструкции по настройке приложения Azure AD для аутентификации пользователей см. в статье [Аутентификация пользователей в Data Lake Store с помощью Azure Active Directory](data-lake-store-end-user-authenticate-using-active-directory.md).</span><span class="sxs-lookup"><span data-stu-id="d666f-113">For instructions on Azure AD application configuration for end-user authentication see [End-user authentication with Data Lake Store using Azure Active Directory](data-lake-store-end-user-authenticate-using-active-directory.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="d666f-114">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="d666f-114">Prerequisites</span></span>
* <span data-ttu-id="d666f-115">Подписка Azure.</span><span class="sxs-lookup"><span data-stu-id="d666f-115">An Azure subscription.</span></span> <span data-ttu-id="d666f-116">Ознакомьтесь с [бесплатной пробной версией Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="d666f-116">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>

## <a name="step-1-create-an-active-directory-web-application"></a><span data-ttu-id="d666f-117">Шаг 1. Создание веб-приложения Active Directory</span><span class="sxs-lookup"><span data-stu-id="d666f-117">Step 1: Create an Active Directory web application</span></span>

<span data-ttu-id="d666f-118">Создайте и настройте веб-приложение Azure AD для аутентификации между службами в Azure Data Lake Store с помощью Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d666f-118">Create and configure an Azure AD web application for service-to-service authentication with Azure Data Lake Store using Azure Active Directory.</span></span> <span data-ttu-id="d666f-119">Инструкции см. в разделе [Создание приложения Azure AD](../azure-resource-manager/resource-group-create-service-principal-portal.md).</span><span class="sxs-lookup"><span data-stu-id="d666f-119">For instructions, see [Create an Azure AD application](../azure-resource-manager/resource-group-create-service-principal-portal.md).</span></span>

<span data-ttu-id="d666f-120">Придерживаясь инструкциям hello в hello выше ссылку, обязательно выберите **веб-приложения и API** для типа приложения, как показано на следующем снимке экрана приветствия.</span><span class="sxs-lookup"><span data-stu-id="d666f-120">While following hello instructions at hello above link, make sure you select **Web App / API** for application type, as shown in hello screenshot below.</span></span>

<span data-ttu-id="d666f-121">![Создание веб-приложения](./media/data-lake-store-authenticate-using-active-directory/azure-active-directory-create-web-app.png "Создание веб-приложения")</span><span class="sxs-lookup"><span data-stu-id="d666f-121">![Create web app](./media/data-lake-store-authenticate-using-active-directory/azure-active-directory-create-web-app.png "Create web app")</span></span>

## <a name="step-2-get-application-id-authentication-key-and-tenant-id"></a><span data-ttu-id="d666f-122">Шаг 2. Получение идентификатора приложения, ключа проверки подлинности и идентификатора клиента</span><span class="sxs-lookup"><span data-stu-id="d666f-122">Step 2: Get application id, authentication key, and tenant id</span></span>
<span data-ttu-id="d666f-123">Программным способом входа в систему необходимо hello идентификатор для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="d666f-123">When programmatically logging in, you need hello id for your application.</span></span> <span data-ttu-id="d666f-124">Если приложение hello работает под свои собственные учетные данные, необходимо также ключ проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="d666f-124">If hello application runs under its own credentials, you will also need an authentication key.</span></span>

* <span data-ttu-id="d666f-125">Инструкции как идентификатор приложения hello tooretrieve и проверка подлинности ключа (также секрет клиента вызываемой hello) для вашего приложения см. в разделе [ключ идентификатора и проверки подлинности приложения Get](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-application-id-and-authentication-key).</span><span class="sxs-lookup"><span data-stu-id="d666f-125">For instructions on how tooretrieve hello application ID and authentication key (also called hello client secret) for your application, see [Get application ID and authentication key](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-application-id-and-authentication-key).</span></span>

* <span data-ttu-id="d666f-126">Инструкции как tooretrieve hello ИД клиента см. в разделе [получить идентификатор клиента](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-tenant-id).</span><span class="sxs-lookup"><span data-stu-id="d666f-126">For instructions on how tooretrieve hello tenant ID, see [Get tenant ID](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-tenant-id).</span></span>

## <a name="step-3-assign-hello-azure-ad-application-toohello-azure-data-lake-store-account-file-or-folder-only-for-service-to-service-authentication"></a><span data-ttu-id="d666f-127">Шаг 3: Назначение файла учетной записи хранилища Озера данных Azure toohello приложения hello Azure AD или папки (только для проверки подлинности для служб)</span><span class="sxs-lookup"><span data-stu-id="d666f-127">Step 3: Assign hello Azure AD application toohello Azure Data Lake Store account file or folder (only for service-to-service authentication)</span></span>
1. <span data-ttu-id="d666f-128">Войдите на новый toohello [портал Azure](https://portal.azure.com) и откройте hello хранилища Озера данных Azure учетной записью, которая tooassociate с hello приложения Azure Active Directory, созданной ранее.</span><span class="sxs-lookup"><span data-stu-id="d666f-128">Sign on toohello new [Azure portal](https://portal.azure.com) and open hello Azure Data Lake Store account that you want tooassociate with hello Azure Active Directory application you created earlier.</span></span>
2. <span data-ttu-id="d666f-129">В колонке учетной записи «Хранилище озера данных» щелкните **Обозреватель данных**.</span><span class="sxs-lookup"><span data-stu-id="d666f-129">In your Data Lake Store account blade, click **Data Explorer**.</span></span>
   
    <span data-ttu-id="d666f-130">![Создание каталогов в учетной записи Data Lake Store](./media/data-lake-store-authenticate-using-active-directory/adl.start.data.explorer.png "Создание каталогов в учетной записи Data Lake")</span><span class="sxs-lookup"><span data-stu-id="d666f-130">![Create directories in Data Lake Store account](./media/data-lake-store-authenticate-using-active-directory/adl.start.data.explorer.png "Create directories in Data Lake account")</span></span>
3. <span data-ttu-id="d666f-131">В hello **обозреватель данных** колонке выберите hello файл или папку, для которой хотите tooprovide доступа Azure AD toohello приложения и нажмите кнопку **доступа**.</span><span class="sxs-lookup"><span data-stu-id="d666f-131">In hello **Data Explorer** blade, click hello file or folder for which you want tooprovide access toohello Azure AD application, and then click **Access**.</span></span> <span data-ttu-id="d666f-132">файл tooa tooconfigure доступ, необходимо нажать кнопку **доступа** из hello **Просмотр файлов** колонку.</span><span class="sxs-lookup"><span data-stu-id="d666f-132">tooconfigure access tooa file, you must click **Access** from hello **File Preview** blade.</span></span>
   
    <span data-ttu-id="d666f-133">![Настройка списков управления доступом в файловой системе Data Lake](./media/data-lake-store-authenticate-using-active-directory/adl.acl.1.png "Настройка списков управления доступом в файловой системе Data Lake")</span><span class="sxs-lookup"><span data-stu-id="d666f-133">![Set ACLs on Data Lake file system](./media/data-lake-store-authenticate-using-active-directory/adl.acl.1.png "Set ACLs on Data Lake file system")</span></span>
4. <span data-ttu-id="d666f-134">Hello **доступа** колонке перечислены стандартным доступом hello и настраиваемого доступа уже назначены toohello корневой.</span><span class="sxs-lookup"><span data-stu-id="d666f-134">hello **Access** blade lists hello standard access and custom access already assigned toohello root.</span></span> <span data-ttu-id="d666f-135">Нажмите кнопку hello **добавить** значок tooadd другой списки управления доступом.</span><span class="sxs-lookup"><span data-stu-id="d666f-135">Click hello **Add** icon tooadd custom-level ACLs.</span></span>
   
    <span data-ttu-id="d666f-136">![Перечисление стандартных и пользовательских сценариев доступа](./media/data-lake-store-authenticate-using-active-directory/adl.acl.2.png "Перечисление стандартных и пользовательских сценариев доступа")</span><span class="sxs-lookup"><span data-stu-id="d666f-136">![List standard and custom access](./media/data-lake-store-authenticate-using-active-directory/adl.acl.2.png "List standard and custom access")</span></span>
5. <span data-ttu-id="d666f-137">Нажмите кнопку hello **добавить** hello значок tooopen **добавить доступ к пользовательским** колонку.</span><span class="sxs-lookup"><span data-stu-id="d666f-137">Click hello **Add** icon tooopen hello **Add Custom Access** blade.</span></span> <span data-ttu-id="d666f-138">В этой колонке нажмите кнопку **Выбор пользователя или группы**, а затем в **Выбор пользователя или группы** колонки, найдите приложение hello Azure Active Directory, созданной ранее.</span><span class="sxs-lookup"><span data-stu-id="d666f-138">In this blade, click **Select User or Group**, and then in **Select User or Group** blade, look for hello Azure Active Directory application you created earlier.</span></span> <span data-ttu-id="d666f-139">Если имеется много toosearch групп из используйте hello текстовое поле в верхнем toofilter hello на имя группы hello.</span><span class="sxs-lookup"><span data-stu-id="d666f-139">If you have a lot of groups toosearch from, use hello text box at hello top toofilter on hello group name.</span></span> <span data-ttu-id="d666f-140">Щелкните группу hello tooadd и нажмите кнопку **выберите**.</span><span class="sxs-lookup"><span data-stu-id="d666f-140">Click hello group you want tooadd and then click **Select**.</span></span>
   
    <span data-ttu-id="d666f-141">![Добавление группы](./media/data-lake-store-authenticate-using-active-directory/adl.acl.3.png "Добавление группы")</span><span class="sxs-lookup"><span data-stu-id="d666f-141">![Add a group](./media/data-lake-store-authenticate-using-active-directory/adl.acl.3.png "Add a group")</span></span>
6. <span data-ttu-id="d666f-142">Нажмите кнопку **выберите разрешения**, выберите разрешения hello и следует tooassign hello разрешения по умолчанию ACL ли получить доступ к ACL или оба.</span><span class="sxs-lookup"><span data-stu-id="d666f-142">Click **Select Permissions**, select hello permissions and whether you want tooassign hello permissions as a default ACL, access ACL, or both.</span></span> <span data-ttu-id="d666f-143">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="d666f-143">Click **OK**.</span></span>
   
    <span data-ttu-id="d666f-144">![Назначьте разрешения toogroup](./media/data-lake-store-authenticate-using-active-directory/adl.acl.4.png "назначить разрешения toogroup")</span><span class="sxs-lookup"><span data-stu-id="d666f-144">![Assign permissions toogroup](./media/data-lake-store-authenticate-using-active-directory/adl.acl.4.png "Assign permissions toogroup")</span></span>
   
    <span data-ttu-id="d666f-145">Дополнительные сведения о разрешениях в Data Lake Store и списках ACL (по умолчанию и для доступа) см. в статье [Контроль доступа в Data Lake Store](data-lake-store-access-control.md).</span><span class="sxs-lookup"><span data-stu-id="d666f-145">For more information about permissions in Data Lake Store, and Default/Access ACLs, see [Access Control in Data Lake Store](data-lake-store-access-control.md).</span></span>
7. <span data-ttu-id="d666f-146">В hello **добавить доступ к пользовательским** колонка, щелкните **ОК**.</span><span class="sxs-lookup"><span data-stu-id="d666f-146">In hello **Add Custom Access** blade, click **OK**.</span></span> <span data-ttu-id="d666f-147">Hello добавленным группы с разрешениями hello связанные будут перечислены в hello **доступа** колонку.</span><span class="sxs-lookup"><span data-stu-id="d666f-147">hello newly added group, with hello associated permissions, will now be listed in hello **Access** blade.</span></span>
   
    <span data-ttu-id="d666f-148">![Назначьте разрешения toogroup](./media/data-lake-store-authenticate-using-active-directory/adl.acl.5.png "назначить разрешения toogroup")</span><span class="sxs-lookup"><span data-stu-id="d666f-148">![Assign permissions toogroup](./media/data-lake-store-authenticate-using-active-directory/adl.acl.5.png "Assign permissions toogroup")</span></span>

## <a name="step-4-get-hello-oauth-20-token-endpoint-only-for-java-based-applications"></a><span data-ttu-id="d666f-149">Шаг 4: Получение hello конечная точка маркера OAuth 2.0 (только для приложений на основе Java)</span><span class="sxs-lookup"><span data-stu-id="d666f-149">Step 4: Get hello OAuth 2.0 token endpoint (only for Java-based applications)</span></span>

1. <span data-ttu-id="d666f-150">Войдите на новый toohello [портал Azure](https://portal.azure.com) и выберите Active Directory hello левой панели.</span><span class="sxs-lookup"><span data-stu-id="d666f-150">Sign on toohello new [Azure portal](https://portal.azure.com) and click Active Directory from hello left pane.</span></span>

2. <span data-ttu-id="d666f-151">На левой панели hello, нажмите кнопку **регистрации приложения**.</span><span class="sxs-lookup"><span data-stu-id="d666f-151">From hello left pane, click **App registrations**.</span></span>

3. <span data-ttu-id="d666f-152">Hello верхней части колонки регистрации приложения hello, щелкните **конечные точки**.</span><span class="sxs-lookup"><span data-stu-id="d666f-152">From hello top of hello App registrations blade, click **Endpoints**.</span></span>

    <span data-ttu-id="d666f-153">![Конечная точка маркера OAuth](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint.png "OAuth token endpoint")</span><span class="sxs-lookup"><span data-stu-id="d666f-153">![OAuth token endpoint](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint.png "OAuth token endpoint")</span></span>

4. <span data-ttu-id="d666f-154">Из списка hello конечных точек скопируйте конечная точка маркера OAuth 2.0 hello.</span><span class="sxs-lookup"><span data-stu-id="d666f-154">From hello list of endpoints, copy hello OAuth 2.0 token endpoint.</span></span>

    <span data-ttu-id="d666f-155">![Конечная точка маркера OAuth](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint-1.png "OAuth token endpoint")</span><span class="sxs-lookup"><span data-stu-id="d666f-155">![OAuth token endpoint](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint-1.png "OAuth token endpoint")</span></span>   

## <a name="next-steps"></a><span data-ttu-id="d666f-156">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="d666f-156">Next steps</span></span>
<span data-ttu-id="d666f-157">В этой статье необходимо создать веб-приложение Azure AD и собрать hello сведения, необходимые в клиентских приложениях можно создавать с помощью пакета SDK для .NET, Java SDK, и т. д. Теперь можно перейти toohello следующие статьи, в которых расскажем, как проверка подлинности приложения web toofirst для toouse hello Azure AD с хранилища Озера данных и затем выполнить другие операции в хранилище hello.</span><span class="sxs-lookup"><span data-stu-id="d666f-157">In this article you created an Azure AD web application and gathered hello information you need in your client applications that you author using .NET SDK, Java SDK, etc. You can now proceed toohello following articles that talk about how toouse hello Azure AD web application toofirst authenticate with Data Lake Store and then perform other operations on hello store.</span></span>

* [<span data-ttu-id="d666f-158">Начало работы с хранилищем озера данных Azure с помощью пакета SDK .NET</span><span class="sxs-lookup"><span data-stu-id="d666f-158">Get started with Azure Data Lake Store using .NET SDK</span></span>](data-lake-store-get-started-net-sdk.md)
* [<span data-ttu-id="d666f-159">Начало работы с хранилищем озера данных Azure с помощью пакета SDK .NET</span><span class="sxs-lookup"><span data-stu-id="d666f-159">Get started with Azure Data Lake Store using Java SDK</span></span>](data-lake-store-get-started-java-sdk.md)

<span data-ttu-id="d666f-160">В этой статье подробно описан hello основные шаги, необходимые tooget пользователь основной копии и запущена для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="d666f-160">This article walked you through hello basic steps needed tooget a user principal up and running for your application.</span></span> <span data-ttu-id="d666f-161">Можно взглянуть на hello следующие статьи tooget дополнительную информацию.</span><span class="sxs-lookup"><span data-stu-id="d666f-161">You can look at hello following articles tooget further information:</span></span>
* [<span data-ttu-id="d666f-162">Использовать субъекта-службы toocreate PowerShell</span><span class="sxs-lookup"><span data-stu-id="d666f-162">Use PowerShell toocreate service principal</span></span>](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authenticate-service-principal)
* [<span data-ttu-id="d666f-163">Создание субъекта-службы с использованием сертификата</span><span class="sxs-lookup"><span data-stu-id="d666f-163">Use certificate authentication for service principal authentication</span></span>](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authenticate-service-principal#create-service-principal-with-certificate)
* [<span data-ttu-id="d666f-164">Другие методы tooauthenticate tooAzure AD</span><span class="sxs-lookup"><span data-stu-id="d666f-164">Other methods tooauthenticate tooAzure AD</span></span>](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-authentication-scenarios)


