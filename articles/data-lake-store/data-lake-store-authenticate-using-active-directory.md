---
title: "Аутентификация между службами в Data Lake Store с помощью Azure Active Directory | Документация Майкрософт"
description: "Узнайте, как реализовать аутентификацию между службами в Data Lake Store с помощью Azure Active Directory."
services: data-lake-store
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: 820b7c5d-4863-4225-9bd1-df4d8f515537
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 04/21/2017
ms.author: nitinme
ms.openlocfilehash: 27ec0a4f48115d44da98dd048868b044aedf173c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="service-to-service-authentication-with-data-lake-store-using-azure-active-directory"></a><span data-ttu-id="cc66b-103">Аутентификация между службами в Data Lake Store с помощью Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="cc66b-103">Service-to-service authentication with Data Lake Store using Azure Active Directory</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="cc66b-104">Аутентификация между службами</span><span class="sxs-lookup"><span data-stu-id="cc66b-104">Service-to-service authentication</span></span>](data-lake-store-authenticate-using-active-directory.md)
> * [<span data-ttu-id="cc66b-105">Аутентификация пользователей</span><span class="sxs-lookup"><span data-stu-id="cc66b-105">End-user authentication</span></span>](data-lake-store-end-user-authenticate-using-active-directory.md)
> 
> 

<span data-ttu-id="cc66b-106">Azure Data Lake Store использует Azure Active Directory для аутентификации.</span><span class="sxs-lookup"><span data-stu-id="cc66b-106">Azure Data Lake Store uses Azure Active Directory for authentication.</span></span> <span data-ttu-id="cc66b-107">Прежде чем создать приложение, которое работает с Azure Data Lake Store или Azure Data Lake Analytics, необходимо решить, как его следует аутентифицировать посредством Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="cc66b-107">Before authoring an application that works with Azure Data Lake Store or Azure Data Lake Analytics, you must first decide how you would like to authenticate your application with Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="cc66b-108">Доступно два основных варианта:</span><span class="sxs-lookup"><span data-stu-id="cc66b-108">The two main options available are:</span></span>

* <span data-ttu-id="cc66b-109">Аутентификация пользователей</span><span class="sxs-lookup"><span data-stu-id="cc66b-109">End-user authentication</span></span> 
* <span data-ttu-id="cc66b-110">Аутентификация между службами (в этой статье)</span><span class="sxs-lookup"><span data-stu-id="cc66b-110">Service-to-service authentication (this article)</span></span> 

<span data-ttu-id="cc66b-111">Оба этих варианта позволят приложению получить маркер OAuth 2.0, который вкладывается в каждый запрос к Azure Data Lake Store или Azure Data Lake Analytics.</span><span class="sxs-lookup"><span data-stu-id="cc66b-111">Both these options result in your application being provided with an OAuth 2.0 token, which gets attached to each request made to Azure Data Lake Store or Azure Data Lake Analytics.</span></span>

<span data-ttu-id="cc66b-112">Из этой статьи вы узнаете, как создать **веб-приложение Azure AD для аутентификации между службами**.</span><span class="sxs-lookup"><span data-stu-id="cc66b-112">This article talks about how create an **Azure AD web application for service-to-service authentication**.</span></span> <span data-ttu-id="cc66b-113">Инструкции по настройке приложения Azure AD для аутентификации пользователей см. в статье [Аутентификация пользователей в Data Lake Store с помощью Azure Active Directory](data-lake-store-end-user-authenticate-using-active-directory.md).</span><span class="sxs-lookup"><span data-stu-id="cc66b-113">For instructions on Azure AD application configuration for end-user authentication see [End-user authentication with Data Lake Store using Azure Active Directory](data-lake-store-end-user-authenticate-using-active-directory.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="cc66b-114">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="cc66b-114">Prerequisites</span></span>
* <span data-ttu-id="cc66b-115">Подписка Azure.</span><span class="sxs-lookup"><span data-stu-id="cc66b-115">An Azure subscription.</span></span> <span data-ttu-id="cc66b-116">Ознакомьтесь с [бесплатной пробной версией Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="cc66b-116">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>

## <a name="step-1-create-an-active-directory-web-application"></a><span data-ttu-id="cc66b-117">Шаг 1. Создание веб-приложения Active Directory</span><span class="sxs-lookup"><span data-stu-id="cc66b-117">Step 1: Create an Active Directory web application</span></span>

<span data-ttu-id="cc66b-118">Создайте и настройте веб-приложение Azure AD для аутентификации между службами в Azure Data Lake Store с помощью Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="cc66b-118">Create and configure an Azure AD web application for service-to-service authentication with Azure Data Lake Store using Azure Active Directory.</span></span> <span data-ttu-id="cc66b-119">Инструкции см. в разделе [Создание приложения Azure AD](../azure-resource-manager/resource-group-create-service-principal-portal.md).</span><span class="sxs-lookup"><span data-stu-id="cc66b-119">For instructions, see [Create an Azure AD application](../azure-resource-manager/resource-group-create-service-principal-portal.md).</span></span>

<span data-ttu-id="cc66b-120">При выполнении инструкций по ссылке выше обязательно выберите тип приложения **Веб-приложение или API**, как показано на следующем снимке экрана.</span><span class="sxs-lookup"><span data-stu-id="cc66b-120">While following the instructions at the above link, make sure you select **Web App / API** for application type, as shown in the screenshot below.</span></span>

<span data-ttu-id="cc66b-121">![Создание веб-приложения](./media/data-lake-store-authenticate-using-active-directory/azure-active-directory-create-web-app.png "Создание веб-приложения")</span><span class="sxs-lookup"><span data-stu-id="cc66b-121">![Create web app](./media/data-lake-store-authenticate-using-active-directory/azure-active-directory-create-web-app.png "Create web app")</span></span>

## <a name="step-2-get-application-id-authentication-key-and-tenant-id"></a><span data-ttu-id="cc66b-122">Шаг 2. Получение идентификатора приложения, ключа проверки подлинности и идентификатора клиента</span><span class="sxs-lookup"><span data-stu-id="cc66b-122">Step 2: Get application id, authentication key, and tenant id</span></span>
<span data-ttu-id="cc66b-123">При программном входе необходимо указывать идентификатор приложения.</span><span class="sxs-lookup"><span data-stu-id="cc66b-123">When programmatically logging in, you need the id for your application.</span></span> <span data-ttu-id="cc66b-124">Если приложение выполняется под собственными учетными данными, потребуется также ключ проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="cc66b-124">If the application runs under its own credentials, you will also need an authentication key.</span></span>

* <span data-ttu-id="cc66b-125">Инструкции о том, как получить идентификатор приложения и ключ проверки подлинности (который также называется секретом клиента) для приложения, см. в разделе [Получение идентификатора приложения и ключа проверки подлинности](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-application-id-and-authentication-key).</span><span class="sxs-lookup"><span data-stu-id="cc66b-125">For instructions on how to retrieve the application ID and authentication key (also called the client secret) for your application, see [Get application ID and authentication key](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-application-id-and-authentication-key).</span></span>

* <span data-ttu-id="cc66b-126">Инструкции о том, как получить код клиента, см. в разделе [Получение идентификатора клиента](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-tenant-id).</span><span class="sxs-lookup"><span data-stu-id="cc66b-126">For instructions on how to retrieve the tenant ID, see [Get tenant ID](../azure-resource-manager/resource-group-create-service-principal-portal.md#get-tenant-id).</span></span>

## <a name="step-3-assign-the-azure-ad-application-to-the-azure-data-lake-store-account-file-or-folder-only-for-service-to-service-authentication"></a><span data-ttu-id="cc66b-127">Шаг 3. Назначение приложения Azure AD файлу или папке в учетной записи Azure Data Lake Store (только для аутентификации между службами)</span><span class="sxs-lookup"><span data-stu-id="cc66b-127">Step 3: Assign the Azure AD application to the Azure Data Lake Store account file or folder (only for service-to-service authentication)</span></span>
1. <span data-ttu-id="cc66b-128">Войдите на новый [портал Azure](https://portal.azure.com) и откройте учетную запись Azure Data Lake Store, которую необходимо связать с ранее созданным приложением Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="cc66b-128">Sign on to the new [Azure portal](https://portal.azure.com) and open the Azure Data Lake Store account that you want to associate with the Azure Active Directory application you created earlier.</span></span>
2. <span data-ttu-id="cc66b-129">В колонке учетной записи «Хранилище озера данных» щелкните **Обозреватель данных**.</span><span class="sxs-lookup"><span data-stu-id="cc66b-129">In your Data Lake Store account blade, click **Data Explorer**.</span></span>
   
    <span data-ttu-id="cc66b-130">![Создание каталогов в учетной записи Data Lake Store](./media/data-lake-store-authenticate-using-active-directory/adl.start.data.explorer.png "Создание каталогов в учетной записи Data Lake")</span><span class="sxs-lookup"><span data-stu-id="cc66b-130">![Create directories in Data Lake Store account](./media/data-lake-store-authenticate-using-active-directory/adl.start.data.explorer.png "Create directories in Data Lake account")</span></span>
3. <span data-ttu-id="cc66b-131">В колонке **Обозреватель данных** щелкните файл (или папку), к которому необходимо предоставить доступ для приложения Azure AD, а затем нажмите кнопку **Доступ**.</span><span class="sxs-lookup"><span data-stu-id="cc66b-131">In the **Data Explorer** blade, click the file or folder for which you want to provide access to the Azure AD application, and then click **Access**.</span></span> <span data-ttu-id="cc66b-132">Чтобы настроить доступ к файлу, необходимо нажать кнопку **Доступ** в колонке **Предварительный просмотр файла**.</span><span class="sxs-lookup"><span data-stu-id="cc66b-132">To configure access to a file, you must click **Access** from the **File Preview** blade.</span></span>
   
    <span data-ttu-id="cc66b-133">![Настройка списков управления доступом в файловой системе Data Lake](./media/data-lake-store-authenticate-using-active-directory/adl.acl.1.png "Настройка списков управления доступом в файловой системе Data Lake")</span><span class="sxs-lookup"><span data-stu-id="cc66b-133">![Set ACLs on Data Lake file system](./media/data-lake-store-authenticate-using-active-directory/adl.acl.1.png "Set ACLs on Data Lake file system")</span></span>
4. <span data-ttu-id="cc66b-134">В колонке **Доступ** перечислены стандартные и пользовательские варианты доступа, уже назначенные корню.</span><span class="sxs-lookup"><span data-stu-id="cc66b-134">The **Access** blade lists the standard access and custom access already assigned to the root.</span></span> <span data-ttu-id="cc66b-135">Щелкните значок **Добавить** , чтобы добавить ACL пользовательского уровня.</span><span class="sxs-lookup"><span data-stu-id="cc66b-135">Click the **Add** icon to add custom-level ACLs.</span></span>
   
    <span data-ttu-id="cc66b-136">![Перечисление стандартных и пользовательских сценариев доступа](./media/data-lake-store-authenticate-using-active-directory/adl.acl.2.png "Перечисление стандартных и пользовательских сценариев доступа")</span><span class="sxs-lookup"><span data-stu-id="cc66b-136">![List standard and custom access](./media/data-lake-store-authenticate-using-active-directory/adl.acl.2.png "List standard and custom access")</span></span>
5. <span data-ttu-id="cc66b-137">Щелкните значок **Добавить**, чтобы открыть колонку **Добавить настраиваемый доступ**.</span><span class="sxs-lookup"><span data-stu-id="cc66b-137">Click the **Add** icon to open the **Add Custom Access** blade.</span></span> <span data-ttu-id="cc66b-138">В этой колонке щелкните **Выберите пользователя или группу**, а затем в колонке **Выберите пользователя или группу** найдите созданное ранее приложение Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="cc66b-138">In this blade, click **Select User or Group**, and then in **Select User or Group** blade, look for the Azure Active Directory application you created earlier.</span></span> <span data-ttu-id="cc66b-139">Если у вас много групп для поиска, воспользуйтесь текстовым полем в верхней части для фильтрации по имени группы.</span><span class="sxs-lookup"><span data-stu-id="cc66b-139">If you have a lot of groups to search from, use the text box at the top to filter on the group name.</span></span> <span data-ttu-id="cc66b-140">Выберите группу, которую необходимо добавить, и нажмите кнопку **Выбрать**.</span><span class="sxs-lookup"><span data-stu-id="cc66b-140">Click the group you want to add and then click **Select**.</span></span>
   
    <span data-ttu-id="cc66b-141">![Добавление группы](./media/data-lake-store-authenticate-using-active-directory/adl.acl.3.png "Добавление группы")</span><span class="sxs-lookup"><span data-stu-id="cc66b-141">![Add a group](./media/data-lake-store-authenticate-using-active-directory/adl.acl.3.png "Add a group")</span></span>
6. <span data-ttu-id="cc66b-142">Щелкните **Выберите разрешения**, выберите необходимые разрешения, а затем укажите, назначить ли разрешения как список ACL по умолчанию, список ACL для доступа или оба этих параметра.</span><span class="sxs-lookup"><span data-stu-id="cc66b-142">Click **Select Permissions**, select the permissions and whether you want to assign the permissions as a default ACL, access ACL, or both.</span></span> <span data-ttu-id="cc66b-143">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="cc66b-143">Click **OK**.</span></span>
   
    <span data-ttu-id="cc66b-144">![Назначение разрешений для группы](./media/data-lake-store-authenticate-using-active-directory/adl.acl.4.png "Назначение разрешений для группы")</span><span class="sxs-lookup"><span data-stu-id="cc66b-144">![Assign permissions to group](./media/data-lake-store-authenticate-using-active-directory/adl.acl.4.png "Assign permissions to group")</span></span>
   
    <span data-ttu-id="cc66b-145">Дополнительные сведения о разрешениях в Data Lake Store и списках ACL (по умолчанию и для доступа) см. в статье [Контроль доступа в Data Lake Store](data-lake-store-access-control.md).</span><span class="sxs-lookup"><span data-stu-id="cc66b-145">For more information about permissions in Data Lake Store, and Default/Access ACLs, see [Access Control in Data Lake Store](data-lake-store-access-control.md).</span></span>
7. <span data-ttu-id="cc66b-146">В колонке **Добавить настраиваемый доступ** нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="cc66b-146">In the **Add Custom Access** blade, click **OK**.</span></span> <span data-ttu-id="cc66b-147">Теперь добавленная группа с соответствующими разрешениями отобразится в колонке **Доступ** .</span><span class="sxs-lookup"><span data-stu-id="cc66b-147">The newly added group, with the associated permissions, will now be listed in the **Access** blade.</span></span>
   
    <span data-ttu-id="cc66b-148">![Назначение разрешений для группы](./media/data-lake-store-authenticate-using-active-directory/adl.acl.5.png "Назначение разрешений для группы")</span><span class="sxs-lookup"><span data-stu-id="cc66b-148">![Assign permissions to group](./media/data-lake-store-authenticate-using-active-directory/adl.acl.5.png "Assign permissions to group")</span></span>

## <a name="step-4-get-the-oauth-20-token-endpoint-only-for-java-based-applications"></a><span data-ttu-id="cc66b-149">Шаг 4. Получение конечной точки маркера OAuth 2.0 (только для приложений на основе Java)</span><span class="sxs-lookup"><span data-stu-id="cc66b-149">Step 4: Get the OAuth 2.0 token endpoint (only for Java-based applications)</span></span>

1. <span data-ttu-id="cc66b-150">Войдите на новый [портал Azure](https://portal.azure.com) и щелкните "Active Directory" в левой области.</span><span class="sxs-lookup"><span data-stu-id="cc66b-150">Sign on to the new [Azure portal](https://portal.azure.com) and click Active Directory from the left pane.</span></span>

2. <span data-ttu-id="cc66b-151">В левой области щелкните **Регистрация приложений**.</span><span class="sxs-lookup"><span data-stu-id="cc66b-151">From the left pane, click **App registrations**.</span></span>

3. <span data-ttu-id="cc66b-152">В верхней части колонки "Регистрация приложений" щелкните **Конечные точки**.</span><span class="sxs-lookup"><span data-stu-id="cc66b-152">From the top of the App registrations blade, click **Endpoints**.</span></span>

    <span data-ttu-id="cc66b-153">![Конечная точка маркера OAuth](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint.png "OAuth token endpoint")</span><span class="sxs-lookup"><span data-stu-id="cc66b-153">![OAuth token endpoint](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint.png "OAuth token endpoint")</span></span>

4. <span data-ttu-id="cc66b-154">Из списка конечных точек скопируйте значение конечной точки маркера OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="cc66b-154">From the list of endpoints, copy the OAuth 2.0 token endpoint.</span></span>

    <span data-ttu-id="cc66b-155">![Конечная точка маркера OAuth](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint-1.png "OAuth token endpoint")</span><span class="sxs-lookup"><span data-stu-id="cc66b-155">![OAuth token endpoint](./media/data-lake-store-authenticate-using-active-directory/oauth-token-endpoint-1.png "OAuth token endpoint")</span></span>   

## <a name="next-steps"></a><span data-ttu-id="cc66b-156">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="cc66b-156">Next steps</span></span>
<span data-ttu-id="cc66b-157">В этой статье мы создали веб-приложение Azure AD и собрали сведения, необходимые в клиентских приложениях, создаваемых с помощью пакетов SDK для .NET, Java и др. Из следующих статей вы узнаете, как с помощью веб-приложения Azure AD проходить аутентификацию в Data Lake Store, а затем выполнить другие операции в хранилище.</span><span class="sxs-lookup"><span data-stu-id="cc66b-157">In this article you created an Azure AD web application and gathered the information you need in your client applications that you author using .NET SDK, Java SDK, etc. You can now proceed to the following articles that talk about how to use the Azure AD web application to first authenticate with Data Lake Store and then perform other operations on the store.</span></span>

* [<span data-ttu-id="cc66b-158">Начало работы с хранилищем озера данных Azure с помощью пакета SDK .NET</span><span class="sxs-lookup"><span data-stu-id="cc66b-158">Get started with Azure Data Lake Store using .NET SDK</span></span>](data-lake-store-get-started-net-sdk.md)
* [<span data-ttu-id="cc66b-159">Начало работы с хранилищем озера данных Azure с помощью пакета SDK .NET</span><span class="sxs-lookup"><span data-stu-id="cc66b-159">Get started with Azure Data Lake Store using Java SDK</span></span>](data-lake-store-get-started-java-sdk.md)

<span data-ttu-id="cc66b-160">В данной статье приведены пошаговые инструкции для настройки и подготовки к работе субъекта-пользователя для приложения.</span><span class="sxs-lookup"><span data-stu-id="cc66b-160">This article walked you through the basic steps needed to get a user principal up and running for your application.</span></span> <span data-ttu-id="cc66b-161">Для получения дополнительных сведений ознакомьтесь со следующими статьями:</span><span class="sxs-lookup"><span data-stu-id="cc66b-161">You can look at the following articles to get further information:</span></span>
* [<span data-ttu-id="cc66b-162">Использование Azure PowerShell для создания субъекта-службы и доступа к ресурсам</span><span class="sxs-lookup"><span data-stu-id="cc66b-162">Use PowerShell to create service principal</span></span>](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authenticate-service-principal)
* [<span data-ttu-id="cc66b-163">Создание субъекта-службы с использованием сертификата</span><span class="sxs-lookup"><span data-stu-id="cc66b-163">Use certificate authentication for service principal authentication</span></span>](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-authenticate-service-principal#create-service-principal-with-certificate)
* <span data-ttu-id="cc66b-164">[Other methods to authenticate to Azure AD](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-authentication-scenarios) (Другие методы аутентификации в Azure AD)</span><span class="sxs-lookup"><span data-stu-id="cc66b-164">[Other methods to authenticate to Azure AD](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-authentication-scenarios)</span></span>


