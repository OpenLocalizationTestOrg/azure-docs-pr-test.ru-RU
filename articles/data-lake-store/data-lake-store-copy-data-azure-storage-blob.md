---
title: "Копирование данных из больших двоичных объектов хранилища Azure в Data Lake Store | Документация Майкрософт"
description: "Использование средства AdlCopy для копирования данных из больших двоичных объектов хранилища Azure в хранилище озера данных"
services: data-lake-store
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: dc273ef8-96ef-47a6-b831-98e8a777a5c1
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/29/2017
ms.author: nitinme
ms.openlocfilehash: 68f44991432a76c2ef1c79ec6dffdea4c62bcb17
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="copy-data-from-azure-storage-blobs-to-data-lake-store"></a><span data-ttu-id="50c7d-103">Копирование данных из больших двоичных объектов хранилища Azure в хранилище озера данных</span><span class="sxs-lookup"><span data-stu-id="50c7d-103">Copy data from Azure Storage Blobs to Data Lake Store</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="50c7d-104">С помощью DistCp</span><span class="sxs-lookup"><span data-stu-id="50c7d-104">Using DistCp</span></span>](data-lake-store-copy-data-wasb-distcp.md)
> * [<span data-ttu-id="50c7d-105">С помощью AdlCopy</span><span class="sxs-lookup"><span data-stu-id="50c7d-105">Using AdlCopy</span></span>](data-lake-store-copy-data-azure-storage-blob.md)
>
>

<span data-ttu-id="50c7d-106">В Azure Data Lake Store доступно средство командной строки [AdlCopy](http://aka.ms/downloadadlcopy)для копирования данных из следующих источников.</span><span class="sxs-lookup"><span data-stu-id="50c7d-106">Azure Data Lake Store provides a command line tool, [AdlCopy](http://aka.ms/downloadadlcopy), to copy data from the following sources:</span></span>

* <span data-ttu-id="50c7d-107">Из больших двоичных объектов службы хранилища Azure в Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="50c7d-107">From Azure Storage Blobs into Data Lake Store.</span></span> <span data-ttu-id="50c7d-108">AdlCopy нельзя использовать для копирования данных из хранилища озера данных в большие двоичные объекты хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="50c7d-108">You cannot use AdlCopy to copy data from Data Lake Store to Azure Storage blobs.</span></span>
* <span data-ttu-id="50c7d-109">Между двумя учетными записями хранения Azure Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="50c7d-109">Between two Azure Data Lake Store accounts.</span></span>

<span data-ttu-id="50c7d-110">Также можно использовать инструмент AdlCopy в двух различных режимах:</span><span class="sxs-lookup"><span data-stu-id="50c7d-110">Also, you can use the AdlCopy tool in two different modes:</span></span>

* <span data-ttu-id="50c7d-111">**Автономный**, при котором для выполнения задачи используются ресурсы хранилища озера данных.</span><span class="sxs-lookup"><span data-stu-id="50c7d-111">**Standalone**, where the tool uses Data Lake Store resources to perform the task.</span></span>
* <span data-ttu-id="50c7d-112">**С помощью учетной записи аналитики озера данных**, при котором для выполнения операции копирования используются единицы, назначенные учетной записи аналитики озера данных.</span><span class="sxs-lookup"><span data-stu-id="50c7d-112">**Using a Data Lake Analytics account**, where the units assigned to your Data Lake Analytics account are used to perform the copy operation.</span></span> <span data-ttu-id="50c7d-113">Этот вариант можно использовать, если вы хотите, чтобы задачи копирования выполнялись предсказуемым образом.</span><span class="sxs-lookup"><span data-stu-id="50c7d-113">You might want to use this option when you are looking to perform the copy tasks in a predictable manner.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="50c7d-114">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="50c7d-114">Prerequisites</span></span>
<span data-ttu-id="50c7d-115">Перед началом работы с этой статьей необходимо иметь следующее:</span><span class="sxs-lookup"><span data-stu-id="50c7d-115">Before you begin this article, you must have the following:</span></span>

* <span data-ttu-id="50c7d-116">**Подписка Azure**.</span><span class="sxs-lookup"><span data-stu-id="50c7d-116">**An Azure subscription**.</span></span> <span data-ttu-id="50c7d-117">Ознакомьтесь с [бесплатной пробной версией Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="50c7d-117">See [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="50c7d-118">**больших двоичных объектов хранилища Azure** с некоторыми данными.</span><span class="sxs-lookup"><span data-stu-id="50c7d-118">**Azure Storage Blobs** container with some data.</span></span>
* <span data-ttu-id="50c7d-119">**Учетная запись Azure Data Lake Store.**</span><span class="sxs-lookup"><span data-stu-id="50c7d-119">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="50c7d-120">Инструкции по созданию учетной записи см. в статье [Начало работы с Azure Data Lake Store с помощью портала Azure](data-lake-store-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="50c7d-120">For instructions on how to create one, see [Get started with Azure Data Lake Store](data-lake-store-get-started-portal.md)</span></span>
* <span data-ttu-id="50c7d-121">**Учетная запись Azure Data Lake Analytics (необязательно).** Инструкции по созданию учетной записи Data Lake Store см. в статье [Руководство. Начало работы с Azure Data Lake Analytics с помощью портала Azure](../data-lake-analytics/data-lake-analytics-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="50c7d-121">**Azure Data Lake Analytics account (optional)** - See [Get started with Azure Data Lake Analytics](../data-lake-analytics/data-lake-analytics-get-started-portal.md) for instructions on how to create a Data Lake Store account.</span></span>
* <span data-ttu-id="50c7d-122">**Средство AdlCopy**.</span><span class="sxs-lookup"><span data-stu-id="50c7d-122">**AdlCopy tool**.</span></span> <span data-ttu-id="50c7d-123">Установите средство AdlCopy по ссылке [http://aka.ms/downloadadlcopy](http://aka.ms/downloadadlcopy).</span><span class="sxs-lookup"><span data-stu-id="50c7d-123">Install the AdlCopy tool from [http://aka.ms/downloadadlcopy](http://aka.ms/downloadadlcopy).</span></span>

## <a name="syntax-of-the-adlcopy-tool"></a><span data-ttu-id="50c7d-124">Синтаксис средства AdlCopy</span><span class="sxs-lookup"><span data-stu-id="50c7d-124">Syntax of the AdlCopy tool</span></span>
<span data-ttu-id="50c7d-125">Используйте следующий синтаксис для работы со средством AdlCopy</span><span class="sxs-lookup"><span data-stu-id="50c7d-125">Use the following syntax to work with the AdlCopy tool</span></span>

    AdlCopy /Source <Blob or Data Lake Store source> /Dest <Data Lake Store destination> /SourceKey <Key for Blob account> /Account <Data Lake Analytics account> /Unit <Number of Analytics units> /Pattern

<span data-ttu-id="50c7d-126">Параметры синтаксиса описаны ниже:</span><span class="sxs-lookup"><span data-stu-id="50c7d-126">The parameters in the syntax are described below:</span></span>

| <span data-ttu-id="50c7d-127">Параметр</span><span class="sxs-lookup"><span data-stu-id="50c7d-127">Option</span></span> | <span data-ttu-id="50c7d-128">Описание</span><span class="sxs-lookup"><span data-stu-id="50c7d-128">Description</span></span> |
| --- | --- |
| <span data-ttu-id="50c7d-129">Источник</span><span class="sxs-lookup"><span data-stu-id="50c7d-129">Source</span></span> |<span data-ttu-id="50c7d-130">Указывает расположение исходных данных в хранилище больших двоичных объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="50c7d-130">Specifies the location of the source data in the Azure storage blob.</span></span> <span data-ttu-id="50c7d-131">Источником может быть контейнер больших двоичных объектов, сам большой двоичный объект или другая учетная запись Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="50c7d-131">The source can be a blob container, a blob, or another Data Lake Store account.</span></span> |
| <span data-ttu-id="50c7d-132">Dest</span><span class="sxs-lookup"><span data-stu-id="50c7d-132">Dest</span></span> |<span data-ttu-id="50c7d-133">Указывает целевое хранилище озера данных для копирования.</span><span class="sxs-lookup"><span data-stu-id="50c7d-133">Specifies the Data Lake Store destination to copy to.</span></span> |
| <span data-ttu-id="50c7d-134">SourceKey</span><span class="sxs-lookup"><span data-stu-id="50c7d-134">SourceKey</span></span> |<span data-ttu-id="50c7d-135">Указывает ключ доступа к хранилищу для источника — хранилища больших двоичных объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="50c7d-135">Specifies the storage access key for the Azure storage blob source.</span></span> <span data-ttu-id="50c7d-136">Это необходимо только в том случае, если источником является контейнер больших двоичных объектов или сам большой двоичный объект.</span><span class="sxs-lookup"><span data-stu-id="50c7d-136">This is required only if the source is a blob container or a blob.</span></span> |
| <span data-ttu-id="50c7d-137">Учетная запись</span><span class="sxs-lookup"><span data-stu-id="50c7d-137">Account</span></span> |<span data-ttu-id="50c7d-138">**Необязательно**.</span><span class="sxs-lookup"><span data-stu-id="50c7d-138">**Optional**.</span></span> <span data-ttu-id="50c7d-139">Используйте этот вариант, если хотите, чтобы для запуска задания копирования использовалась учетная запись аналитики озера данных Azure.</span><span class="sxs-lookup"><span data-stu-id="50c7d-139">Use this if you want to use Azure Data Lake Analytics account to run the copy job.</span></span> <span data-ttu-id="50c7d-140">Если при запуске средства указан параметр /Account, но не указана учетная запись аналитики озера данных Azure, то для запуска задания AdlCopy использует учетную запись по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="50c7d-140">If you use the /Account option in the syntax but do not specify a Data Lake Analytics account, AdlCopy uses a default account to run the job.</span></span> <span data-ttu-id="50c7d-141">Кроме того, при использовании этого параметра необходимо добавить источник (хранилище больших двоичных Azure) и место назначения (хранилище озера данных Azure) в качестве источников данных для вашей учетной записи аналитики озера данных.</span><span class="sxs-lookup"><span data-stu-id="50c7d-141">Also, if you use this option, you must add the source (Azure Storage Blob) and destination (Azure Data Lake Store) as data sources for your Data Lake Analytics account.</span></span> |
| <span data-ttu-id="50c7d-142">Units</span><span class="sxs-lookup"><span data-stu-id="50c7d-142">Units</span></span> |<span data-ttu-id="50c7d-143">Указывает количество единиц аналитики озера данных, которые будут использоваться для задания копирования.</span><span class="sxs-lookup"><span data-stu-id="50c7d-143">Specifies the number of Data Lake Analytics units that will be used for the copy job.</span></span> <span data-ttu-id="50c7d-144">Этот параметр является обязательным, если вы указываете учетную запись аналитики озера данных с помощью параметра **/Account** .</span><span class="sxs-lookup"><span data-stu-id="50c7d-144">This option is mandatory if you use the **/Account** option to specify the Data Lake Analytics account.</span></span> |
| <span data-ttu-id="50c7d-145">Модель</span><span class="sxs-lookup"><span data-stu-id="50c7d-145">Pattern</span></span> |<span data-ttu-id="50c7d-146">Определяет шаблон регулярного выражения, который указывает, какие именно большие двоичные объекты и файлы нужно копировать.</span><span class="sxs-lookup"><span data-stu-id="50c7d-146">Specifies a regex pattern that indicates which blobs or files to copy.</span></span> <span data-ttu-id="50c7d-147">В AdlCopy используется сопоставление с учетом регистра.</span><span class="sxs-lookup"><span data-stu-id="50c7d-147">AdlCopy uses case-sensitive matching.</span></span> <span data-ttu-id="50c7d-148">Если шаблон не указан, то по умолчанию используется копирование всех элементов.</span><span class="sxs-lookup"><span data-stu-id="50c7d-148">The default pattern used when no pattern is specified is to copy all items.</span></span> <span data-ttu-id="50c7d-149">Задание нескольких шаблонов не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="50c7d-149">Specifying multiple file patterns is not supported.</span></span> |

## <a name="use-adlcopy-as-standalone-to-copy-data-from-an-azure-storage-blob"></a><span data-ttu-id="50c7d-150">Использование AdlCopy (автономно) для копирования данных из большого двоичного объекта службы хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="50c7d-150">Use AdlCopy (as standalone) to copy data from an Azure Storage blob</span></span>
1. <span data-ttu-id="50c7d-151">Откройте командную строку и перейдите в каталог, в который установлено средство AdlCopy, обычно `%HOMEPATH%\Documents\adlcopy`.</span><span class="sxs-lookup"><span data-stu-id="50c7d-151">Open a command prompt and navigate to the directory where AdlCopy is installed, typically `%HOMEPATH%\Documents\adlcopy`.</span></span>
2. <span data-ttu-id="50c7d-152">Выполните следующую команду, чтобы скопировать заданный большой двоичный объект из контейнера-источника в хранилище озера данных:</span><span class="sxs-lookup"><span data-stu-id="50c7d-152">Run the following command to copy a specific blob from the source container to a Data Lake Store:</span></span>

        AdlCopy /source https://<source_account>.blob.core.windows.net/<source_container>/<blob name> /dest swebhdfs://<dest_adls_account>.azuredatalakestore.net/<dest_folder>/ /sourcekey <storage_account_key_for_storage_container>

    <span data-ttu-id="50c7d-153">Например:</span><span class="sxs-lookup"><span data-stu-id="50c7d-153">For example:</span></span>

        AdlCopy /source https://mystorage.blob.core.windows.net/mycluster/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/909f2b.log /dest swebhdfs://mydatalakestore.azuredatalakestore.net/mynewfolder/ /sourcekey uJUfvD6cEvhfLoBae2yyQf8t9/BpbWZ4XoYj4kAS5Jf40pZaMNf0q6a8yqTxktwVgRED4vPHeh/50iS9atS5LQ==

    >[AZURE.NOTE] <span data-ttu-id="50c7d-154">Приведенный выше синтаксис указывает файл, который будет скопирован в папку в учетной записи Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="50c7d-154">The syntax above specifies the file to be copied to a folder in the Data Lake Store account.</span></span> <span data-ttu-id="50c7d-155">Инструмент AdlCopy создает папку, если указанного имени папки не существует.</span><span class="sxs-lookup"><span data-stu-id="50c7d-155">AdlCopy tool creates a folder if the specified folder name does not exist.</span></span>

    <span data-ttu-id="50c7d-156">Вам будет предложено ввести учетные данные для подписки Azure, в которой расположена учетная запись Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="50c7d-156">You will be prompted to enter the credentials for the Azure subscription under which you have your Data Lake Store account.</span></span> <span data-ttu-id="50c7d-157">Вы увидите результат, аналогичный приведенному ниже:</span><span class="sxs-lookup"><span data-stu-id="50c7d-157">You will see an output similar to the following:</span></span>

        Initializing Copy.
        Copy Started.
        100% data copied.
        Finishing Copy.
        Copy Completed. 1 file copied.

1. <span data-ttu-id="50c7d-158">Также можно скопировать все большие двоичные объекты из одного контейнера в учетную запись хранилища данных озера, используя следующую команду:</span><span class="sxs-lookup"><span data-stu-id="50c7d-158">You can also copy all the blobs from one container to the Data Lake Store account using the following command:</span></span>

        AdlCopy /source https://<source_account>.blob.core.windows.net/<source_container>/ /dest swebhdfs://<dest_adls_account>.azuredatalakestore.net/<dest_folder>/ /sourcekey <storage_account_key_for_storage_container>        

    <span data-ttu-id="50c7d-159">Например:</span><span class="sxs-lookup"><span data-stu-id="50c7d-159">For example:</span></span>

        AdlCopy /Source https://mystorage.blob.core.windows.net/mycluster/example/data/gutenberg/ /dest adl://mydatalakestore.azuredatalakestore.net/mynewfolder/ /sourcekey uJUfvD6cEvhfLoBae2yyQf8t9/BpbWZ4XoYj4kAS5Jf40pZaMNf0q6a8yqTxktwVgRED4vPHeh/50iS9atS5LQ==

### <a name="performance-considerations"></a><span data-ttu-id="50c7d-160">Рекомендации по производительности</span><span class="sxs-lookup"><span data-stu-id="50c7d-160">Performance considerations</span></span>

<span data-ttu-id="50c7d-161">При копировании из учетной записи хранения BLOB-объектов Azure может выполняться регулирование во время копирования на стороне хранилища BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="50c7d-161">If you are copying from an Azure Blob Storage account, you may be throttled during copy on the blob storage side.</span></span> <span data-ttu-id="50c7d-162">Это может снизить производительность задания копирования.</span><span class="sxs-lookup"><span data-stu-id="50c7d-162">This will degrade the performance of your copy job.</span></span> <span data-ttu-id="50c7d-163">Дополнительные сведения об ограничениях хранилища BLOB-объектов Azure см. в статье [Подписка Azure, границы, квоты и ограничения службы](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="50c7d-163">To learn more about the limits of Azure Blob Storage, see Azure Storage limits at [Azure subscription and service limits](../azure-subscription-service-limits.md).</span></span>

## <a name="use-adlcopy-as-standalone-to-copy-data-from-another-data-lake-store-account"></a><span data-ttu-id="50c7d-164">Использование AdlCopy (автономно) для копирования данных из другой учетной записи Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="50c7d-164">Use AdlCopy (as standalone) to copy data from another Data Lake Store account</span></span>
<span data-ttu-id="50c7d-165">Также можно использовать AdlCopy для копирования данных между двумя учетными записями Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="50c7d-165">You can also use AdlCopy to copy data between two Data Lake Store accounts.</span></span>

1. <span data-ttu-id="50c7d-166">Откройте командную строку и перейдите в каталог, в который установлено средство AdlCopy, обычно `%HOMEPATH%\Documents\adlcopy`.</span><span class="sxs-lookup"><span data-stu-id="50c7d-166">Open a command prompt and navigate to the directory where AdlCopy is installed, typically `%HOMEPATH%\Documents\adlcopy`.</span></span>
2. <span data-ttu-id="50c7d-167">Чтобы скопировать определенный файл из одной учетной записи Data Lake Store в другую, выполните следующую команду.</span><span class="sxs-lookup"><span data-stu-id="50c7d-167">Run the following command to copy a specific file from one Data Lake Store account to another.</span></span>

        AdlCopy /Source adl://<source_adls_account>.azuredatalakestore.net/<path_to_file> /dest adl://<dest_adls_account>.azuredatalakestore.net/<path>/

    <span data-ttu-id="50c7d-168">Например:</span><span class="sxs-lookup"><span data-stu-id="50c7d-168">For example:</span></span>

        AdlCopy /Source adl://mydatastore.azuredatalakestore.net/mynewfolder/909f2b.log /dest adl://mynewdatalakestore.azuredatalakestore.net/mynewfolder/

   > [!NOTE]
   > <span data-ttu-id="50c7d-169">Приведенный выше синтаксис указывает файл, который будет скопирован в папку в целевой учетной записи Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="50c7d-169">The syntax above specifies the file to be copied to a folder in the destination Data Lake Store account.</span></span> <span data-ttu-id="50c7d-170">Инструмент AdlCopy создает папку, если указанного имени папки не существует.</span><span class="sxs-lookup"><span data-stu-id="50c7d-170">AdlCopy tool creates a folder if the specified folder name does not exist.</span></span>
   >
   >

    <span data-ttu-id="50c7d-171">Вам будет предложено ввести учетные данные для подписки Azure, в которой расположена учетная запись Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="50c7d-171">You will be prompted to enter the credentials for the Azure subscription under which you have your Data Lake Store account.</span></span> <span data-ttu-id="50c7d-172">Вы увидите результат, аналогичный приведенному ниже:</span><span class="sxs-lookup"><span data-stu-id="50c7d-172">You will see an output similar to the following:</span></span>

        Initializing Copy.
        Copy Started.|
        100% data copied.
        Finishing Copy.
        Copy Completed. 1 file copied.
3. <span data-ttu-id="50c7d-173">Следующая команда копирует все файлы из указанной папки в исходной учетной записи Data Lake Store в папку в целевой учетной записи Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="50c7d-173">The following command copies all files from a specific folder in the source Data Lake Store account to a folder in the destination Data Lake Store account.</span></span>

        AdlCopy /Source adl://mydatastore.azuredatalakestore.net/mynewfolder/ /dest adl://mynewdatalakestore.azuredatalakestore.net/mynewfolder/

### <a name="performance-considerations"></a><span data-ttu-id="50c7d-174">Рекомендации по производительности</span><span class="sxs-lookup"><span data-stu-id="50c7d-174">Performance considerations</span></span>

<span data-ttu-id="50c7d-175">При использовании AdlCopy в качестве автономного инструмента копирование выполняется на общих ресурсах, управляемых Azure.</span><span class="sxs-lookup"><span data-stu-id="50c7d-175">When using AdlCopy as a standalone tool, the copy is run on shared, Azure managed resources.</span></span> <span data-ttu-id="50c7d-176">Производительность в этой среде зависит от системной нагрузки и доступных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="50c7d-176">The performance you may get in this environment depends on system load and available resources.</span></span> <span data-ttu-id="50c7d-177">Этот режим лучше всего применять для небольших передач, выполняемых при необходимости.</span><span class="sxs-lookup"><span data-stu-id="50c7d-177">This mode is best used for small transfers on an ad hoc basis.</span></span> <span data-ttu-id="50c7d-178">При использовании AdlCopy в качестве автономного инструмента параметры не требуют настройки.</span><span class="sxs-lookup"><span data-stu-id="50c7d-178">No parameters need to be tuned when using AdlCopy as a standalone tool.</span></span>

## <a name="use-adlcopy-with-data-lake-analytics-account-to-copy-data"></a><span data-ttu-id="50c7d-179">Использование AdlCopy (с учетной записью Data Lake Analytics) для копирования данных</span><span class="sxs-lookup"><span data-stu-id="50c7d-179">Use AdlCopy (with Data Lake Analytics account) to copy data</span></span>
<span data-ttu-id="50c7d-180">Вы также можете воспользоваться своей учетной записью аналитики озера данных для запуска задания AdlCopy для копирования данных из хранилища больших двоичных объектов Azure в хранилище озера данных.</span><span class="sxs-lookup"><span data-stu-id="50c7d-180">You can also use your Data Lake Analytics account to run the AdlCopy job to copy data from Azure storage blobs to Data Lake Store.</span></span> <span data-ttu-id="50c7d-181">Этот вариант обычно используется, если объем перемещаемых данных измеряется гигабайтами или терабайтами и вам необходима лучшая и прогнозируемая производительность.</span><span class="sxs-lookup"><span data-stu-id="50c7d-181">You would typically use this option when the data to be moved is in the range of gigabytes and terabytes, and you want better and predictable performance throughput.</span></span>

<span data-ttu-id="50c7d-182">Чтобы использовать учетную запись Data Lake Analytics с AdlCopy для копирования из большого двоичного объекта службы хранилища Azure, необходимо добавить источник (большой двоичный объект службы хранилища Azure) в качестве источника данных для вашей учетной записи Data Lake Analytics.</span><span class="sxs-lookup"><span data-stu-id="50c7d-182">To use your Data Lake Analytics account with AdlCopy to copy from an Azure Storage Blob, the source (Azure Storage Blob) must be added as a data source for your Data Lake Analytics account.</span></span> <span data-ttu-id="50c7d-183">Инструкции по добавлению дополнительных источников данных в учетную записи Data Lake Analytics см. в разделе [Управление источниками данных учетной записи](../data-lake-analytics/data-lake-analytics-manage-use-portal.md#manage-data-sources).</span><span class="sxs-lookup"><span data-stu-id="50c7d-183">For instructions on adding additional data sources to your Data Lake Analytics account, see [Manage Data Lake Analytics account data sources](../data-lake-analytics/data-lake-analytics-manage-use-portal.md#manage-data-sources).</span></span>

> [!NOTE]
> <span data-ttu-id="50c7d-184">Если копирование выполняется с использованием учетной записи Data Lake Analytics, а источником является учетная запись Azure Data Lake Store, то учетную запись Data Lake Store не требуется связывать с учетной записью Data Lake Analytics.</span><span class="sxs-lookup"><span data-stu-id="50c7d-184">If you are copying from an Azure Data Lake Store account as the source using a Data Lake Analytics account, you do not need to associate the Data Lake Store account with the Data Lake Analytics account.</span></span> <span data-ttu-id="50c7d-185">Связь исходного хранилища с учетной записью Data Lake Analytics требуется только в том случае, если источником является учетная запись хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="50c7d-185">The requirement to associate the source store with the Data Lake Analytics account is only when the source is an Azure Storage account.</span></span>
>
>

<span data-ttu-id="50c7d-186">Выполните следующую команду, чтобы скопировать данные из большого двоичного объекта службы хранилища Azure в учетную запись Data Lake Store, используя учетную запись Data Lake Analytics:</span><span class="sxs-lookup"><span data-stu-id="50c7d-186">Run the following command to copy from an Azure Storage blob to a Data Lake Store account using Data Lake Analytics account:</span></span>

    AdlCopy /source https://<source_account>.blob.core.windows.net/<source_container>/<blob name> /dest swebhdfs://<dest_adls_account>.azuredatalakestore.net/<dest_folder>/ /sourcekey <storage_account_key_for_storage_container> /Account <data_lake_analytics_account> /Unit <number_of_data_lake_analytics_units_to_be_used>

<span data-ttu-id="50c7d-187">Например:</span><span class="sxs-lookup"><span data-stu-id="50c7d-187">For example:</span></span>

    AdlCopy /Source https://mystorage.blob.core.windows.net/mycluster/example/data/gutenberg/ /dest swebhdfs://mydatalakestore.azuredatalakestore.net/mynewfolder/ /sourcekey uJUfvD6cEvhfLoBae2yyQf8t9/BpbWZ4XoYj4kAS5Jf40pZaMNf0q6a8yqTxktwVgRED4vPHeh/50iS9atS5LQ== /Account mydatalakeanalyticaccount /Units 2

<span data-ttu-id="50c7d-188">Аналогичным образом выполните следующую команду, чтобы скопировать данные из большого двоичного объекта службы хранилища Azure в учетную запись Data Lake Store, используя учетную запись Data Lake Analytics:</span><span class="sxs-lookup"><span data-stu-id="50c7d-188">Similarly, run the following command to copy from an Azure Storage blob to a Data Lake Store account using Data Lake Analytics account:</span></span>

    AdlCopy /Source adl://mysourcedatalakestore.azuredatalakestore.net/mynewfolder/ /dest adl://mydestdatastore.azuredatalakestore.net/mynewfolder/ /Account mydatalakeanalyticaccount /Units 2

### <a name="performance-considerations"></a><span data-ttu-id="50c7d-189">Рекомендации по производительности</span><span class="sxs-lookup"><span data-stu-id="50c7d-189">Performance considerations</span></span>

<span data-ttu-id="50c7d-190">При копировании данных в диапазоне терабайт применение AdlCopy с учетной записью Azure Data Lake Analytics обеспечивает более высокую и более предсказуемую производительность.</span><span class="sxs-lookup"><span data-stu-id="50c7d-190">When copying data in the range of terabytes, using AdlCopy with your own Azure Data Lake Analytics account provides better and more predictable performance.</span></span> <span data-ttu-id="50c7d-191">Параметр, который необходимо настроить, — это количество единиц Azure Data Lake Analytics для задания копирования.</span><span class="sxs-lookup"><span data-stu-id="50c7d-191">The parameter that should be tuned is the number of Azure Data Lake Analytics Units to use for the copy job.</span></span> <span data-ttu-id="50c7d-192">Увеличение числа единиц повысит производительность задания копирования.</span><span class="sxs-lookup"><span data-stu-id="50c7d-192">Increasing the number of units will increase the performance of your copy job.</span></span> <span data-ttu-id="50c7d-193">Каждый копируемый файл может использовать не более одной единицы.</span><span class="sxs-lookup"><span data-stu-id="50c7d-193">Each file to be copied can use maximum one unit.</span></span> <span data-ttu-id="50c7d-194">Если указать количество единиц, превышающее количество копируемых файлов, то это не приведет к повышению производительности.</span><span class="sxs-lookup"><span data-stu-id="50c7d-194">Specifying more units than the number of files being copied will not increase performance.</span></span>

## <a name="use-adlcopy-to-copy-data-using-pattern-matching"></a><span data-ttu-id="50c7d-195">Использование AdlCopy для копирования данных с помощью сопоставления шаблонов</span><span class="sxs-lookup"><span data-stu-id="50c7d-195">Use AdlCopy to copy data using pattern matching</span></span>
<span data-ttu-id="50c7d-196">В этом разделе показано, как использовать AdlCopy для копирования данных из источника (в приведенном ниже примере — из большого двоичного объекта службы хранилища Azure) в целевую учетную запись Data Lake Store с помощью сопоставления шаблонов.</span><span class="sxs-lookup"><span data-stu-id="50c7d-196">In this section, you learn how to use AdlCopy to copy data from a source (in our example below we use Azure Storage Blob) to a destination Data Lake Store account using pattern matching.</span></span> <span data-ttu-id="50c7d-197">Например, описанные ниже действия можно использовать для копирования всех файлов с расширением CSV из исходного большого двоичного объекта в целевое хранилище.</span><span class="sxs-lookup"><span data-stu-id="50c7d-197">For example, you can use the steps below to copy all files with .csv extension from the source blob to the destination.</span></span>

1. <span data-ttu-id="50c7d-198">Откройте командную строку и перейдите в каталог, в который установлено средство AdlCopy, обычно `%HOMEPATH%\Documents\adlcopy`.</span><span class="sxs-lookup"><span data-stu-id="50c7d-198">Open a command prompt and navigate to the directory where AdlCopy is installed, typically `%HOMEPATH%\Documents\adlcopy`.</span></span>
2. <span data-ttu-id="50c7d-199">Выполните следующую команду, чтобы скопировать все файлы с расширением CSV из указанного большого двоичного объекта из исходного контейнера в Data Lake Store:</span><span class="sxs-lookup"><span data-stu-id="50c7d-199">Run the following command to copy all files with *.csv extension from a specific blob from the source container to a Data Lake Store:</span></span>

        AdlCopy /source https://<source_account>.blob.core.windows.net/<source_container>/<blob name> /dest swebhdfs://<dest_adls_account>.azuredatalakestore.net/<dest_folder>/ /sourcekey <storage_account_key_for_storage_container> /Pattern *.csv

    <span data-ttu-id="50c7d-200">Например:</span><span class="sxs-lookup"><span data-stu-id="50c7d-200">For example:</span></span>

        AdlCopy /source https://mystorage.blob.core.windows.net/mycluster/HdiSamples/HdiSamples/FoodInspectionData/ /dest adl://mydatalakestore.azuredatalakestore.net/mynewfolder/ /sourcekey uJUfvD6cEvhfLoBae2yyQf8t9/BpbWZ4XoYj4kAS5Jf40pZaMNf0q6a8yqTxktwVgRED4vPHeh/50iS9atS5LQ== /Pattern *.csv

## <a name="billing"></a><span data-ttu-id="50c7d-201">Выставление счетов</span><span class="sxs-lookup"><span data-stu-id="50c7d-201">Billing</span></span>
* <span data-ttu-id="50c7d-202">При автономном использовании средства AdlCopy исходящий трафик для перемещения данных будет тарифицироваться в том случае, если источник учетной записи хранилища Azure и хранилище озера данных находятся в разных регионах.</span><span class="sxs-lookup"><span data-stu-id="50c7d-202">If you use the AdlCopy tool as standalone you will be billed for egress costs for moving data, if the source Azure Storage account is not in the same region as the Data Lake Store.</span></span>
* <span data-ttu-id="50c7d-203">При использовании средства AdlCopy с вашей учетной записью аналитики озера будут применены стандартные [тарифные ставки аналитики озера данных](https://azure.microsoft.com/pricing/details/data-lake-analytics/) .</span><span class="sxs-lookup"><span data-stu-id="50c7d-203">If you use the AdlCopy tool with your Data Lake Analytics account, standard [Data Lake Analytics billing rates](https://azure.microsoft.com/pricing/details/data-lake-analytics/) will apply.</span></span>

## <a name="considerations-for-using-adlcopy"></a><span data-ttu-id="50c7d-204">Рекомендации по использованию AdlCopy</span><span class="sxs-lookup"><span data-stu-id="50c7d-204">Considerations for using AdlCopy</span></span>
* <span data-ttu-id="50c7d-205">AdlCopy (для версии 1.0.5) поддерживает копирование данных из источников, которые совокупно содержат тысячи файлов и папок.</span><span class="sxs-lookup"><span data-stu-id="50c7d-205">AdlCopy (for version 1.0.5), supports copying data from sources that collectively have more than thousands of files and folders.</span></span> <span data-ttu-id="50c7d-206">Тем не менее, если при копировании большого набора данных возникают проблемы, то вы можете распределить файлы и папки в разных вложенных папках и использовать путь к этим вложенным папкам в качестве источника.</span><span class="sxs-lookup"><span data-stu-id="50c7d-206">However, if you encounter issues copying a large dataset, you can distribute the files/folders into different sub-folders and use the path to those sub-folders as the source instead.</span></span>

## <a name="performance-considerations-for-using-adlcopy"></a><span data-ttu-id="50c7d-207">Рекомендации по производительности при использовании AdlCopy</span><span class="sxs-lookup"><span data-stu-id="50c7d-207">Performance considerations for using AdlCopy</span></span>

<span data-ttu-id="50c7d-208">AdlCopy поддерживает копирование данных, содержащих тысячи файлов и папок.</span><span class="sxs-lookup"><span data-stu-id="50c7d-208">AdlCopy supports copying data containing thousands of files and folders.</span></span> <span data-ttu-id="50c7d-209">Тем не менее, если при копировании большого набора данных возникают проблемы, то вы можете распределить файлы и папки по вложенным папкам меньшего размера.</span><span class="sxs-lookup"><span data-stu-id="50c7d-209">However, if you encounter issues copying a large dataset, you can distribute the files/folders into smaller sub-folders.</span></span> <span data-ttu-id="50c7d-210">Инструмент AdlCopy был создан для выполнения задач копирования при необходимости.</span><span class="sxs-lookup"><span data-stu-id="50c7d-210">AdlCopy was built for ad hoc copies.</span></span> <span data-ttu-id="50c7d-211">Если требуется копировать данные на регулярной основе, то лучше воспользоваться [фабрикой данных Azure](../data-factory/data-factory-azure-datalake-connector.md), которая предоставляет возможности полного управления операциями копирования.</span><span class="sxs-lookup"><span data-stu-id="50c7d-211">If you are trying to copy data on a recurring basis, you should consider using [Azure Data Factory](../data-factory/data-factory-azure-datalake-connector.md) that provides full management around the copy operations.</span></span>

## <a name="release-notes"></a><span data-ttu-id="50c7d-212">Заметки о выпуске</span><span class="sxs-lookup"><span data-stu-id="50c7d-212">Release notes</span></span>
* <span data-ttu-id="50c7d-213">1.0.13 — при копировании данных в одну и ту же учетную запись Azure Data Lake Store в нескольких командах adlcopy больше не требуется повторно вводить свои учетные данные для каждого запуска.</span><span class="sxs-lookup"><span data-stu-id="50c7d-213">1.0.13 - If you are copying data to the same Azure Data Lake Store account across multiple adlcopy commands, you do not need to reenter your credentials for each run anymore.</span></span> <span data-ttu-id="50c7d-214">Теперь Adlcopy будет кэшировать эти данные в нескольких запусках.</span><span class="sxs-lookup"><span data-stu-id="50c7d-214">Adlcopy will now cache that information across multiple runs.</span></span>

## <a name="next-steps"></a><span data-ttu-id="50c7d-215">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="50c7d-215">Next steps</span></span>
* [<span data-ttu-id="50c7d-216">Защита данных в хранилище озера данных</span><span class="sxs-lookup"><span data-stu-id="50c7d-216">Secure data in Data Lake Store</span></span>](data-lake-store-secure-data.md)
* [<span data-ttu-id="50c7d-217">Использование аналитики озера данных Azure с хранилищем озера данных</span><span class="sxs-lookup"><span data-stu-id="50c7d-217">Use Azure Data Lake Analytics with Data Lake Store</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
* [<span data-ttu-id="50c7d-218">Использование Azure HDInsight с хранилищем озера данных</span><span class="sxs-lookup"><span data-stu-id="50c7d-218">Use Azure HDInsight with Data Lake Store</span></span>](data-lake-store-hdinsight-hadoop-use-portal.md)
