---
title: "aaaAzure данных Озера хранилище производительности рекомендации по настройке | Документы Microsoft"
description: "Рекомендации по настройке производительности Azure Data Lake Store"
services: data-lake-store
documentationcenter: 
author: stewu
manager: amitkul
editor: cgronlun
ms.assetid: ebde7b9f-2e51-4d43-b7ab-566417221335
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 06/30/2017
ms.author: stewu
ms.openlocfilehash: 939faa068c0f81d18d9533956f4d336bc4d0cbe3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-azure-data-lake-store-for-performance"></a><span data-ttu-id="44986-103">Настройка Azure Data Lake Store для повышения производительности</span><span class="sxs-lookup"><span data-stu-id="44986-103">Tuning Azure Data Lake Store for performance</span></span>

<span data-ttu-id="44986-104">Data Lake Store поддерживает высокую пропускную способность при анализе с интенсивным использованием ввода-вывода и перемещением данных.</span><span class="sxs-lookup"><span data-stu-id="44986-104">Data Lake Store supports high-throughput for I/O intensive analytics and data movement.</span></span>  <span data-ttu-id="44986-105">В хранилище Озера данных Azure использование всю доступную пропускную способность — hello объем данных, который может читать или записываемых за одну секунду — является важным tooget hello наилучшей производительности.</span><span class="sxs-lookup"><span data-stu-id="44986-105">In Azure Data Lake Store, using all available throughput – hello amount of data that can be read or written per second – is important tooget hello best performance.</span></span>  <span data-ttu-id="44986-106">Для этого нужно выполнить как можно больше операций чтения и записи параллельно.</span><span class="sxs-lookup"><span data-stu-id="44986-106">This is achieved by performing as many reads and writes in parallel as possible.</span></span>

![Производительность Data Lake Store](./media/data-lake-store-performance-tuning-guidance/throughput.png)

<span data-ttu-id="44986-108">Хранилище Озера данных Azure можно масштабировать tooprovide hello необходимые пропускной способности для всех analytics сценария.</span><span class="sxs-lookup"><span data-stu-id="44986-108">Azure Data Lake Store can scale tooprovide hello necessary throughput for all analytics scenario.</span></span> <span data-ttu-id="44986-109">По умолчанию учетную запись хранилища Озера данных Azure предоставляет автоматически достаточную пропускную способность потребностей hello toomeet широкие категории вариантов использования.</span><span class="sxs-lookup"><span data-stu-id="44986-109">By default, an Azure Data Lake Store account provides automatically enough throughput toomeet hello needs of a broad category of use cases.</span></span> <span data-ttu-id="44986-110">Для вариантов hello, где пользователи могут запускать в ограничение по умолчанию hello, hello ADLS учетной записи может быть более высокая пропускная способность настроенных tooprovide, обратившись в службу поддержки Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="44986-110">For hello cases where customers run into hello default limit, hello ADLS account can be configured tooprovide more throughput by contacting Microsoft support.</span></span>

## <a name="data-ingestion"></a><span data-ttu-id="44986-111">Прием данных</span><span class="sxs-lookup"><span data-stu-id="44986-111">Data ingestion</span></span>

<span data-ttu-id="44986-112">При передаче данных из исходной системы tooADLS, очень важно, tooconsider, hello оборудования источника, исходного сетевого оборудования и tooADLS подключения к сети может быть узким местом hello.</span><span class="sxs-lookup"><span data-stu-id="44986-112">When ingesting data from a source system tooADLS, it is important tooconsider that hello source hardware, source network hardware, and network connectivity tooADLS can be hello bottleneck.</span></span>  

![Производительность Data Lake Store](./media/data-lake-store-performance-tuning-guidance/bottleneck.png)

<span data-ttu-id="44986-114">Очень важно, что tooensure, hello перемещения данных не зависит от следующих факторов.</span><span class="sxs-lookup"><span data-stu-id="44986-114">It is important tooensure that hello data movement is not affected by these factors.</span></span>

### <a name="source-hardware"></a><span data-ttu-id="44986-115">Исходное оборудование</span><span class="sxs-lookup"><span data-stu-id="44986-115">Source Hardware</span></span>

<span data-ttu-id="44986-116">При использовании локальных компьютеров или виртуальных машин в Azure, следует тщательно выберите соответствующее оборудование hello.</span><span class="sxs-lookup"><span data-stu-id="44986-116">Whether you are using on-premises machines or VMs in Azure, you should carefully select hello appropriate hardware.</span></span> <span data-ttu-id="44986-117">Для источника дискового оборудования предпочтительно tooHDDs SSD и выберите дискового оборудования с шпинделей быстрее.</span><span class="sxs-lookup"><span data-stu-id="44986-117">For Source Disk Hardware, prefer SSDs tooHDDs and pick disk hardware with faster spindles.</span></span> <span data-ttu-id="44986-118">Для источника сетевого оборудования используйте hello наивысшей сетевых адаптеров.</span><span class="sxs-lookup"><span data-stu-id="44986-118">For Source Network Hardware, use hello fastest NICs possible.</span></span>  <span data-ttu-id="44986-119">В Azure мы рекомендуем D14 виртуальных машинах Azure, имеющих hello соответствующим образом мощные диска и сетевого оборудования.</span><span class="sxs-lookup"><span data-stu-id="44986-119">On Azure, we recommend Azure D14 VMs which have hello appropriately powerful disk and networking hardware.</span></span>

### <a name="network-connectivity-tooazure-data-lake-store"></a><span data-ttu-id="44986-120">Хранилище Озера данных tooAzure подключения к сети</span><span class="sxs-lookup"><span data-stu-id="44986-120">Network Connectivity tooAzure Data Lake Store</span></span>

<span data-ttu-id="44986-121">Hello сетевое подключение между исходными данными и хранилище Озера данных Azure иногда может быть узким местом hello.</span><span class="sxs-lookup"><span data-stu-id="44986-121">hello network connectivity between your source data and Azure Data Lake store can sometimes be hello bottleneck.</span></span> <span data-ttu-id="44986-122">Если исходные данные находятся в локальной среде, рекомендуется использовать выделенный канал с [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/).</span><span class="sxs-lookup"><span data-stu-id="44986-122">When your source data is On-Premises, consider using a dedicated link with [Azure ExpressRoute](https://azure.microsoft.com/en-us/services/expressroute/) .</span></span> <span data-ttu-id="44986-123">Если источник данных находится в Azure, производительности hello подойдет лучше всего, когда данные hello в hello же регионе Azure, что hello хранилища Озера данных.</span><span class="sxs-lookup"><span data-stu-id="44986-123">If your source data is in Azure, hello performance will be best when hello data is in hello same Azure region as hello Data Lake Store.</span></span>

### <a name="configure-data-ingestion-tools-for-maximum-parallelization"></a><span data-ttu-id="44986-124">Настройка средств приема данных для обеспечения максимальной параллелизации</span><span class="sxs-lookup"><span data-stu-id="44986-124">Configure Data Ingestion tools for maximum parallelization</span></span>

<span data-ttu-id="44986-125">После обращения к hello источника оборудования и сети узкие места подключения выше, вы являетесь готов tooconfigure ваши средства приема.</span><span class="sxs-lookup"><span data-stu-id="44986-125">Once you have addressed hello source hardware and network connectivity bottlenecks above, you are ready tooconfigure your ingestion tools.</span></span> <span data-ttu-id="44986-126">Hello следующей таблице приведена сводка hello ключевых параметров несколько средств популярных приема и предоставляет подробные настройки статей для их производительности.</span><span class="sxs-lookup"><span data-stu-id="44986-126">hello following table summarizes hello key settings for several popular ingestion tools and provides in-depth performance tuning articles for them.</span></span>  <span data-ttu-id="44986-127">toolearn больше о том, какие средства toouse для конкретного сценария, посетите следующий [статьи](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span><span class="sxs-lookup"><span data-stu-id="44986-127">toolearn more about which tool toouse for your scenario, visit this [article](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-data-scenarios).</span></span>

| <span data-ttu-id="44986-128">Средство</span><span class="sxs-lookup"><span data-stu-id="44986-128">Tool</span></span>               | <span data-ttu-id="44986-129">Параметры</span><span class="sxs-lookup"><span data-stu-id="44986-129">Settings</span></span>     | <span data-ttu-id="44986-130">Дополнительные сведения</span><span class="sxs-lookup"><span data-stu-id="44986-130">More Details</span></span>                                                                 |
|--------------------|------------------------------------------------------|------------------------------|
| <span data-ttu-id="44986-131">PowerShell</span><span class="sxs-lookup"><span data-stu-id="44986-131">Powershell</span></span>       | <span data-ttu-id="44986-132">PerFileThreadCount, ConcurrentFileCount</span><span class="sxs-lookup"><span data-stu-id="44986-132">PerFileThreadCount, ConcurrentFileCount</span></span> |  [<span data-ttu-id="44986-133">Ссылка</span><span class="sxs-lookup"><span data-stu-id="44986-133">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-get-started-powershell#performance-guidance-while-using-powershell)   |
| <span data-ttu-id="44986-134">AdlCopy</span><span class="sxs-lookup"><span data-stu-id="44986-134">AdlCopy</span></span>    | <span data-ttu-id="44986-135">Единицы измерения Azure Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="44986-135">Azure Data Lake Analytics units</span></span>  |   [<span data-ttu-id="44986-136">Ссылка</span><span class="sxs-lookup"><span data-stu-id="44986-136">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-azure-storage-blob#performance-considerations-for-using-adlcopy)         |
| <span data-ttu-id="44986-137">DistCp</span><span class="sxs-lookup"><span data-stu-id="44986-137">DistCp</span></span>            | <span data-ttu-id="44986-138">-m (mapper)</span><span class="sxs-lookup"><span data-stu-id="44986-138">-m (mapper)</span></span>   | [<span data-ttu-id="44986-139">Ссылка</span><span class="sxs-lookup"><span data-stu-id="44986-139">Link</span></span>](https://docs.microsoft.com/en-us/azure/data-lake-store/data-lake-store-copy-data-wasb-distcp#performance-considerations-while-using-distcp)                             |
| <span data-ttu-id="44986-140">Фабрика данных Azure</span><span class="sxs-lookup"><span data-stu-id="44986-140">Azure Data Factory</span></span>| <span data-ttu-id="44986-141">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="44986-141">parallelCopies</span></span>    | [<span data-ttu-id="44986-142">Ссылка</span><span class="sxs-lookup"><span data-stu-id="44986-142">Link</span></span>](../data-factory/data-factory-copy-activity-performance.md)                          |
| <span data-ttu-id="44986-143">Sqoop</span><span class="sxs-lookup"><span data-stu-id="44986-143">Sqoop</span></span>           | <span data-ttu-id="44986-144">fs.azure.block.size, -m (mapper)</span><span class="sxs-lookup"><span data-stu-id="44986-144">fs.azure.block.size, -m (mapper)</span></span>    |   [<span data-ttu-id="44986-145">Ссылка</span><span class="sxs-lookup"><span data-stu-id="44986-145">Link</span></span>](https://blogs.msdn.microsoft.com/bigdatasupport/2015/02/17/sqoop-job-performance-tuning-in-hdinsight-hadoop/)        |

## <a name="structure-your-data-set"></a><span data-ttu-id="44986-146">Структура набора данных</span><span class="sxs-lookup"><span data-stu-id="44986-146">Structure your data set</span></span>

<span data-ttu-id="44986-147">Если данные хранятся в хранилище Озера данных, размер файла hello, число файлов и структуру папок оказывают влияние на производительность.</span><span class="sxs-lookup"><span data-stu-id="44986-147">When data is stored in Data Lake Store, hello file size, number of files, and folder structure have an impact on performance.</span></span>  <span data-ttu-id="44986-148">Hello следующем разделе описываются рекомендации в следующих областях.</span><span class="sxs-lookup"><span data-stu-id="44986-148">hello following section describes best practices in these areas.</span></span>  

### <a name="file-size"></a><span data-ttu-id="44986-149">Размер файла</span><span class="sxs-lookup"><span data-stu-id="44986-149">File size</span></span>

<span data-ttu-id="44986-150">Как правило, у модулей аналитики, таких как HDInsight и Azure Data Lake Analytics, нагрузка зависит от количества файлов.</span><span class="sxs-lookup"><span data-stu-id="44986-150">Typically, analytics engines such as HDInsight and Azure Data Lake Analytics have a per-file overhead.</span></span>  <span data-ttu-id="44986-151">Если вы храните данные в большом количестве небольших файлов, это может отрицательно сказаться на производительности.</span><span class="sxs-lookup"><span data-stu-id="44986-151">If you store your data as many small files, this can negatively affect performance.</span></span>  

<span data-ttu-id="44986-152">Упорядочивайте свои данные в файлы большого размера для лучшей производительности.</span><span class="sxs-lookup"><span data-stu-id="44986-152">In general, organize your data into larger sized files for better performance.</span></span>  <span data-ttu-id="44986-153">Мы рекомендуем упорядочивать наборы данных в файлы размером 256 МБ или больше.</span><span class="sxs-lookup"><span data-stu-id="44986-153">As a rule of thumb, organize data sets in files of 256MB or larger.</span></span> <span data-ttu-id="44986-154">В некоторых случаях, таких как изображения и двоичные данные, не возможные tooprocess их параллельно.</span><span class="sxs-lookup"><span data-stu-id="44986-154">In some cases such as images and binary data, it is not possible tooprocess them in parallel.</span></span>  <span data-ttu-id="44986-155">В таких случаях рекомендуется tookeep отдельных файлов не более 2 ГБ.</span><span class="sxs-lookup"><span data-stu-id="44986-155">In these cases, it is recommended tookeep individual files under 2GB.</span></span>

<span data-ttu-id="44986-156">В некоторых случаях конвейеры данных полный контроль над hello необработанные данные, которые были большое количество небольших файлов.</span><span class="sxs-lookup"><span data-stu-id="44986-156">Sometimes, data pipelines have limited control over hello raw data which has lots of small files.</span></span>  <span data-ttu-id="44986-157">Рекомендуется toohave «кулинарии» процесс, который приводит к возникновению ошибки большего размера файлов toouse для нисходящие приложения.</span><span class="sxs-lookup"><span data-stu-id="44986-157">It is recommended toohave a “cooking” process that generates larger files toouse for downstream applications.</span></span>  

### <a name="organizing-time-series-data-in-folders"></a><span data-ttu-id="44986-158">Упорядочение данных временных рядов в папках</span><span class="sxs-lookup"><span data-stu-id="44986-158">Organizing Time Series data in folders</span></span>

<span data-ttu-id="44986-159">Для рабочих нагрузок Hive и ADLA раздел при очистке данных временных рядов могут помочь некоторых запросов, читаемых только подмножество данных hello, что улучшает производительность.</span><span class="sxs-lookup"><span data-stu-id="44986-159">For Hive and ADLA workloads, partition pruning of time-series data can help some queries read only a subset of hello data which improves performance.</span></span>    

<span data-ttu-id="44986-160">Конвейеры, принимающие данные временных рядов, часто помещают свои файлы с сильно структурированными именами файлов и папок.</span><span class="sxs-lookup"><span data-stu-id="44986-160">Those pipelines that ingest time-series data, often place their files with a very structured naming for files and folders.</span></span> <span data-ttu-id="44986-161">Ниже приведен обычный пример для данных, структурированных по дате:</span><span class="sxs-lookup"><span data-stu-id="44986-161">Below is a very common example we see for data that is structured by date:</span></span>

    \DataSet\YYYY\MM\DD\datafile_YYYY_MM_DD.tsv

<span data-ttu-id="44986-162">Обратите внимание, что данные datetime hello отображается как папки, а в параметре filename hello.</span><span class="sxs-lookup"><span data-stu-id="44986-162">Notice that hello datetime information appears both as folders and in hello filename.</span></span>

<span data-ttu-id="44986-163">Для даты и времени hello ниже приведен общий шаблон</span><span class="sxs-lookup"><span data-stu-id="44986-163">For date and time, hello following is a common pattern</span></span>

    \DataSet\YYYY\MM\DD\HH\mm\datafile_YYYY_MM_DD_HH_mm.tsv

<span data-ttu-id="44986-164">Опять же, сделанный для организации файлов и папок hello Выбор hello следует оптимизировать hello размер файлов и разумного числа файлов в каждой папке.</span><span class="sxs-lookup"><span data-stu-id="44986-164">Again, hello choice you make with hello folder and file organization should optimize for hello larger file sizes and a reasonable number of files in each folder.</span></span>

## <a name="optimizing-io-intensive-jobs-on-hadoop-and-spark-workloads-on-hdinsight"></a><span data-ttu-id="44986-165">Оптимизация заданий с интенсивными вычислениями ввода-вывода для рабочих нагрузок Hadoop и Spark в HDInsight</span><span class="sxs-lookup"><span data-stu-id="44986-165">Optimizing I/O intensive jobs on Hadoop and Spark workloads on HDInsight</span></span>

<span data-ttu-id="44986-166">Задания относятся к одному из следующих трех категорий hello:</span><span class="sxs-lookup"><span data-stu-id="44986-166">Jobs fall into one of hello following three categories:</span></span>

* <span data-ttu-id="44986-167">**Интенсивно использующие ЦП.**</span><span class="sxs-lookup"><span data-stu-id="44986-167">**CPU intensive.**</span></span>  <span data-ttu-id="44986-168">Эти задания имеют долгое время вычисления с минимальным временем ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="44986-168">These jobs have long computation times with minimal I/O times.</span></span>  <span data-ttu-id="44986-169">Примеры включают машинное обучение и задания обработки естественных языков.</span><span class="sxs-lookup"><span data-stu-id="44986-169">Examples include machine learning and natural language processing jobs.</span></span>  
* <span data-ttu-id="44986-170">**С высоким объемом требуемой памяти.**</span><span class="sxs-lookup"><span data-stu-id="44986-170">**Memory intensive.**</span></span>  <span data-ttu-id="44986-171">Эти задания используют большой объем памяти.</span><span class="sxs-lookup"><span data-stu-id="44986-171">These jobs use lots of memory.</span></span>  <span data-ttu-id="44986-172">Примеры включают PageRank и задания аналитики в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="44986-172">Examples include PageRank and real-time analytics jobs.</span></span>  
* <span data-ttu-id="44986-173">**С большим количеством операций ввода-вывода.**</span><span class="sxs-lookup"><span data-stu-id="44986-173">**I/O intensive.**</span></span>  <span data-ttu-id="44986-174">Эти задания большую часть своего времени выполняют операции ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="44986-174">These jobs spend most of their time doing I/O.</span></span>  <span data-ttu-id="44986-175">Распространенным примером является задание копирования, которое использует только операции чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="44986-175">A common example is a copy job which does only read and write operations.</span></span>  <span data-ttu-id="44986-176">Другие примеры задания подготовки данных, чтение большого объема данных, выполняет некоторые преобразования данных, а затем записывает hello задней toohello хранилища данных.</span><span class="sxs-lookup"><span data-stu-id="44986-176">Other examples include data preparation jobs that read a lot of data, performs some data transformation, and then writes hello data back toohello store.</span></span>  

<span data-ttu-id="44986-177">следующие рекомендации Hello — только применимые tooI заданиями ввода/вывода служб с интенсивными вычислениями.</span><span class="sxs-lookup"><span data-stu-id="44986-177">hello following guidance is only applicable tooI/O intensive jobs.</span></span>

### <a name="general-considerations-for-an-hdinsight-cluster"></a><span data-ttu-id="44986-178">Общие рекомендации, связанные с кластером HDInsight</span><span class="sxs-lookup"><span data-stu-id="44986-178">General Considerations for an HDInsight cluster</span></span>

* <span data-ttu-id="44986-179">**Поддерживаемые версии HDInsight.**</span><span class="sxs-lookup"><span data-stu-id="44986-179">**HDInsight versions.**</span></span> <span data-ttu-id="44986-180">Для повышения производительности рекомендуется используйте последний выпуск hello HDInsight.</span><span class="sxs-lookup"><span data-stu-id="44986-180">For best performance, use hello latest release of HDInsight.</span></span>
* <span data-ttu-id="44986-181">**Регионы.**</span><span class="sxs-lookup"><span data-stu-id="44986-181">**Regions.**</span></span> <span data-ttu-id="44986-182">Поместите хранилища Озера данных hello в hello же регионе, что кластер HDInsight hello.</span><span class="sxs-lookup"><span data-stu-id="44986-182">Place hello Data Lake Store in hello same region as hello HDInsight cluster.</span></span>  

<span data-ttu-id="44986-183">Кластер HDInsight An состоит из двух головных узлов и нескольких рабочих узлов.</span><span class="sxs-lookup"><span data-stu-id="44986-183">An HDInsight cluster is composed of two head nodes and some worker nodes.</span></span> <span data-ttu-id="44986-184">Каждый рабочий узел предоставляет определенное количество ядер и памяти, которое определяется hello типа ВМ.</span><span class="sxs-lookup"><span data-stu-id="44986-184">Each worker node provides a specific number of cores and memory, which is determined by hello VM-type.</span></span>  <span data-ttu-id="44986-185">При запуске задания, YARN очень согласователь ресурсов hello, выделяемый объем доступной памяти hello и контейнеры toocreate ядер.</span><span class="sxs-lookup"><span data-stu-id="44986-185">When running a job, YARN is hello resource negotiator that allocates hello available memory and cores toocreate containers.</span></span>  <span data-ttu-id="44986-186">Каждый контейнер запускается задание hello toocomplete необходимые задачи hello.</span><span class="sxs-lookup"><span data-stu-id="44986-186">Each container runs hello tasks needed toocomplete hello job.</span></span>  <span data-ttu-id="44986-187">Контейнеры быстро запустить в tooprocess параллельных задач.</span><span class="sxs-lookup"><span data-stu-id="44986-187">Containers run in parallel tooprocess tasks quickly.</span></span> <span data-ttu-id="44986-188">Таким образом производительность повышается за счет выполнения максимально возможного количества контейнеров параллельно.</span><span class="sxs-lookup"><span data-stu-id="44986-188">Therefore, performance is improved by running as many parallel containers as possible.</span></span>

<span data-ttu-id="44986-189">Существует три уровня в кластер HDInsight, которое может быть отлажена tooincrease hello число контейнеров и использовать всю доступную пропускную способность.</span><span class="sxs-lookup"><span data-stu-id="44986-189">There are three layers within an HDInsight cluster that can be tuned tooincrease hello number of containers and use all available throughput.</span></span>  

* <span data-ttu-id="44986-190">**Физический уровень**</span><span class="sxs-lookup"><span data-stu-id="44986-190">**Physical layer**</span></span>
* <span data-ttu-id="44986-191">**Уровень YARN**</span><span class="sxs-lookup"><span data-stu-id="44986-191">**YARN layer**</span></span>
* <span data-ttu-id="44986-192">**Уровень рабочей нагрузки**</span><span class="sxs-lookup"><span data-stu-id="44986-192">**Workload layer**</span></span>

### <a name="physical-layer"></a><span data-ttu-id="44986-193">Физический уровень</span><span class="sxs-lookup"><span data-stu-id="44986-193">Physical Layer</span></span>

<span data-ttu-id="44986-194">**Запустите кластер с большим количеством узлов и/или на виртуальной машине большего размера.**</span><span class="sxs-lookup"><span data-stu-id="44986-194">**Run cluster with more nodes and/or larger sized VMs.**</span></span>  <span data-ttu-id="44986-195">Больший размер кластера позволит вам toorun дополнительные контейнеры YARN, как показано на рисунке hello.</span><span class="sxs-lookup"><span data-stu-id="44986-195">A larger cluster will enable you toorun more YARN containers as shown in hello picture below.</span></span>

![Производительность Data Lake Store](./media/data-lake-store-performance-tuning-guidance/VM.png)

<span data-ttu-id="44986-197">**Используйте виртуальные машины с большей пропускной способностью сети.**</span><span class="sxs-lookup"><span data-stu-id="44986-197">**Use VMs with more network bandwidth.**</span></span>  <span data-ttu-id="44986-198">Hello объем пропускной способности сети может быть узким местом, если имеется меньше пропускной способности сети, чем пропускная способность хранилища Озера данных.</span><span class="sxs-lookup"><span data-stu-id="44986-198">hello amount of network bandwidth can be a bottleneck if there is less network bandwidth than Data Lake Store throughput.</span></span>  <span data-ttu-id="44986-199">У различных виртуальных машин будет разная пропускная способность сети.</span><span class="sxs-lookup"><span data-stu-id="44986-199">Different VMs will have varying network bandwidth sizes.</span></span>  <span data-ttu-id="44986-200">Выберите VM-тип, который имеет наибольший пропускную способность сети на hello.</span><span class="sxs-lookup"><span data-stu-id="44986-200">Choose a VM-type that has hello largest possible network bandwidth.</span></span>

### <a name="yarn-layer"></a><span data-ttu-id="44986-201">Уровень YARN</span><span class="sxs-lookup"><span data-stu-id="44986-201">YARN Layer</span></span>

<span data-ttu-id="44986-202">**Используйте контейнеры YARN меньшего размера.**</span><span class="sxs-lookup"><span data-stu-id="44986-202">**Use smaller YARN containers.**</span></span>  <span data-ttu-id="44986-203">Уменьшить размер hello каждого toocreate контейнера YARN дополнительные контейнеры с hello такого же объема ресурсов.</span><span class="sxs-lookup"><span data-stu-id="44986-203">Reduce hello size of each YARN container toocreate more containers with hello same amount of resources.</span></span>

![Производительность Data Lake Store](./media/data-lake-store-performance-tuning-guidance/small-containers.png)

<span data-ttu-id="44986-205">В зависимости от рабочей нагрузки минимальный необходимый размер контейнера YARN будет иметься всегда.</span><span class="sxs-lookup"><span data-stu-id="44986-205">Depending on your workload, there will always be a minimum YARN container size that is needed.</span></span> <span data-ttu-id="44986-206">Если выбрать слишком маленький контейнер, у заданий будут возникать проблемы из-за нехватки памяти.</span><span class="sxs-lookup"><span data-stu-id="44986-206">If you pick too small a container, your jobs will run into out-of-memory issues.</span></span> <span data-ttu-id="44986-207">Как правило, контейнеры YARN должны быть размером не менее 1 ГБ.</span><span class="sxs-lookup"><span data-stu-id="44986-207">Typically YARN containers should be no smaller than 1GB.</span></span> <span data-ttu-id="44986-208">Это обычные контейнеры YARN / 3GB toosee.</span><span class="sxs-lookup"><span data-stu-id="44986-208">It’s common toosee 3GB YARN containers.</span></span> <span data-ttu-id="44986-209">Для некоторых рабочих нагрузок могут потребоваться контейнеры YARN большего размера.</span><span class="sxs-lookup"><span data-stu-id="44986-209">For some workloads, you may need larger YARN containers.</span></span>  

<span data-ttu-id="44986-210">**Увеличьте количество ядер на контейнер YARN.**</span><span class="sxs-lookup"><span data-stu-id="44986-210">**Increase cores per YARN container.**</span></span>  <span data-ttu-id="44986-211">Увеличьте число hello ядер, выделенных tooeach контейнера tooincrease hello число параллельных задач, которые выполняются в каждом контейнере.</span><span class="sxs-lookup"><span data-stu-id="44986-211">Increase hello number of cores allocated tooeach container tooincrease hello number of parallel tasks that run in each container.</span></span>  <span data-ttu-id="44986-212">Это работает для приложений, которые выполняют несколько задач на контейнер, например Spark.</span><span class="sxs-lookup"><span data-stu-id="44986-212">This works for applications like Spark which run multiple tasks per container.</span></span>  <span data-ttu-id="44986-213">Для приложений, например Hive использующие один поток находится в каждом контейнере улучшенной toohave несколько контейнеров, а не больше ядер на контейнер.</span><span class="sxs-lookup"><span data-stu-id="44986-213">For applications like Hive which run a single thread in each container, it is better toohave more containers rather than more cores per container.</span></span>   

### <a name="workload-layer"></a><span data-ttu-id="44986-214">Уровень рабочей нагрузки</span><span class="sxs-lookup"><span data-stu-id="44986-214">Workload Layer</span></span>

<span data-ttu-id="44986-215">**Используйте все доступные контейнеры.**</span><span class="sxs-lookup"><span data-stu-id="44986-215">**Use all available containers.**</span></span>  <span data-ttu-id="44986-216">Набор hello число задач toobe равно или больше числа hello доступные контейнеры для всех ресурсов.</span><span class="sxs-lookup"><span data-stu-id="44986-216">Set hello number of tasks toobe equal or larger than hello number of available containers so that all resources are utilized.</span></span>

![Производительность Data Lake Store](./media/data-lake-store-performance-tuning-guidance/use-containers.png)

<span data-ttu-id="44986-218">**Незавершенные задачи ресурсоемки.**</span><span class="sxs-lookup"><span data-stu-id="44986-218">**Failed tasks are costly.**</span></span> <span data-ttu-id="44986-219">Если у каждой задачи есть большой объем данных tooprocess, неудачного выполнения задачи приводит к дорогих повторных попыток.</span><span class="sxs-lookup"><span data-stu-id="44986-219">If each task has a large amount of data tooprocess, then failure of a task results in an expensive retry.</span></span>  <span data-ttu-id="44986-220">Таким образом, существует более toocreate дополнительные задачи, каждый из которых обрабатывает небольшой объем данных.</span><span class="sxs-lookup"><span data-stu-id="44986-220">Therefore, it is better toocreate more tasks, each of which processes a small amount of data.</span></span>

<span data-ttu-id="44986-221">В дополнение toohello Общие рекомендации, приведенные выше каждое приложение имеет tootune доступны различные параметры для данного конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="44986-221">In addition toohello general guidelines above, each application has different parameters available tootune for that specific application.</span></span> <span data-ttu-id="44986-222">hello параметры и ссылки tooget, работы с Настройка производительности для каждого приложения, перечислены в следующей таблице Hello.</span><span class="sxs-lookup"><span data-stu-id="44986-222">hello table below lists some of hello parameters and links tooget started with performance tuning for each application.</span></span>

| <span data-ttu-id="44986-223">Рабочая нагрузка</span><span class="sxs-lookup"><span data-stu-id="44986-223">Workload</span></span>               | <span data-ttu-id="44986-224">Параметр tooset задачи</span><span class="sxs-lookup"><span data-stu-id="44986-224">Parameter tooset tasks</span></span>                                                         |
|--------------------|-------------------------------------------------------------------------------------|
| [<span data-ttu-id="44986-225">Spark в HDInsight</span><span class="sxs-lookup"><span data-stu-id="44986-225">Spark on HDInisight</span></span>](data-lake-store-performance-tuning-spark.md)       | <ul><li><span data-ttu-id="44986-226">Num-executors</span><span class="sxs-lookup"><span data-stu-id="44986-226">Num-executors</span></span></li><li><span data-ttu-id="44986-227">Executor-memory</span><span class="sxs-lookup"><span data-stu-id="44986-227">Executor-memory</span></span></li><li><span data-ttu-id="44986-228">Executor-cores</span><span class="sxs-lookup"><span data-stu-id="44986-228">Executor-cores</span></span></li></ul> |
| [<span data-ttu-id="44986-229">Hive в HDInsight</span><span class="sxs-lookup"><span data-stu-id="44986-229">Hive on HDInsight</span></span>](data-lake-store-performance-tuning-hive.md)    | <ul><li><span data-ttu-id="44986-230">hive.tez.container.size</span><span class="sxs-lookup"><span data-stu-id="44986-230">hive.tez.container.size</span></span></li></ul>         |
| [<span data-ttu-id="44986-231">MapReduce в HDInsight</span><span class="sxs-lookup"><span data-stu-id="44986-231">MapReduce on HDInsight</span></span>](data-lake-store-performance-tuning-mapreduce.md)            | <ul><li><span data-ttu-id="44986-232">Mapreduce.map.memory</span><span class="sxs-lookup"><span data-stu-id="44986-232">Mapreduce.map.memory</span></span></li><li><span data-ttu-id="44986-233">Mapreduce.job.maps</span><span class="sxs-lookup"><span data-stu-id="44986-233">Mapreduce.job.maps</span></span></li><li><span data-ttu-id="44986-234">Mapreduce.reduce.memory</span><span class="sxs-lookup"><span data-stu-id="44986-234">Mapreduce.reduce.memory</span></span></li><li><span data-ttu-id="44986-235">Mapreduce.job.reduces</span><span class="sxs-lookup"><span data-stu-id="44986-235">Mapreduce.job.reduces</span></span></li></ul> |
| [<span data-ttu-id="44986-236">Storm в HDInsight</span><span class="sxs-lookup"><span data-stu-id="44986-236">Storm on HDInsight</span></span>](data-lake-store-performance-tuning-storm.md)| <ul><li><span data-ttu-id="44986-237">Количество рабочих процессов</span><span class="sxs-lookup"><span data-stu-id="44986-237">Number of worker processes</span></span></li><li><span data-ttu-id="44986-238">Количество экземпляров исполнителей воронки</span><span class="sxs-lookup"><span data-stu-id="44986-238">Number of spout executor instances</span></span></li><li><span data-ttu-id="44986-239">Количество экземпляров исполнителей сита</span><span class="sxs-lookup"><span data-stu-id="44986-239">Number of bolt executor instances</span></span> </li><li><span data-ttu-id="44986-240">Количество задач воронки</span><span class="sxs-lookup"><span data-stu-id="44986-240">Number of spout tasks</span></span></li><li><span data-ttu-id="44986-241">Количество задач сита</span><span class="sxs-lookup"><span data-stu-id="44986-241">Number of bolt tasks</span></span></li></ul>|

## <a name="see-also"></a><span data-ttu-id="44986-242">Дополнительные материалы</span><span class="sxs-lookup"><span data-stu-id="44986-242">See also</span></span>
* [<span data-ttu-id="44986-243">Обзор хранилища озера данных Azure</span><span class="sxs-lookup"><span data-stu-id="44986-243">Overview of Azure Data Lake Store</span></span>](data-lake-store-overview.md)
* [<span data-ttu-id="44986-244">Начало работы с аналитикой озера данных Azure</span><span class="sxs-lookup"><span data-stu-id="44986-244">Get Started with Azure Data Lake Analytics</span></span>](../data-lake-analytics/data-lake-analytics-get-started-portal.md)
