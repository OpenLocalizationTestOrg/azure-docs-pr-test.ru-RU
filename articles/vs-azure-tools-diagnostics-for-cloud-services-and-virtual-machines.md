---
title: "aaaConfiguring диагностики для виртуальных машин и облачных служб Azure | Документы Microsoft"
description: "Описывает способ tooconfigure диагностической информации для отладки Azure облачной службы и виртуальные машины (ВМ) в Visual Studio."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: e70cd7b4-6298-43aa-adea-6fd618414c26
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 74cdf49413d6d89a84195070dd9d817da2463373
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="configuring-diagnostics-for-azure-cloud-services-and-virtual-machines"></a><span data-ttu-id="f6f3c-103">Настройка системы диагностики для облачных служб и виртуальных машин Azure</span><span class="sxs-lookup"><span data-stu-id="f6f3c-103">Configuring Diagnostics for Azure Cloud Services and Virtual Machines</span></span>
<span data-ttu-id="f6f3c-104">Если вам требуется tootroubleshoot Azure облачной службы или виртуальной машины Azure, можно настроить диагностики Azure проще с помощью Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-104">When you need tootroubleshoot an Azure cloud service or Azure virtual machine, you can configure Azure diagnostics more easily by using Visual Studio.</span></span> <span data-ttu-id="f6f3c-105">Диагностика Azure собирает системные данные и данные журналов hello виртуальных машин и экземпляров виртуальных машин, на которых работает облачная служба и передает эти данные в учетной записи хранения по своему усмотрению.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-105">Azure diagnostics captures system data and logging data on hello virtual machines and virtual machine instances that run your cloud service and transfers that data into a storage account of your choice.</span></span> <span data-ttu-id="f6f3c-106">В статье [Включение ведения журнала диагностики для веб-приложений в службе приложений Azure](app-service-web/web-sites-enable-diagnostic-log.md) собрана подробная информация о ведении журнала диагностики в Azure.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-106">See [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) for more information about diagnostics logging in Azure.</span></span>

<span data-ttu-id="f6f3c-107">В этом разделе показано, как tooenable и настройки системы диагностики Azure в Visual Studio, до или после развертывания, а также на виртуальных машинах Azure.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-107">This topic shows you how tooenable and configure Azure diagnostics in Visual Studio, both before and after deployment, as well as in Azure virtual machines.</span></span> <span data-ttu-id="f6f3c-108">Здесь также показано, как типы hello tooselect toocollect сведения диагностики и сборе информации hello tooview после него.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-108">It also shows you how tooselect hello types of diagnostics information toocollect and how tooview hello information after it's collected.</span></span>

<span data-ttu-id="f6f3c-109">Диагностика Azure можно настроить в hello следующих способов:</span><span class="sxs-lookup"><span data-stu-id="f6f3c-109">You can configure Azure Diagnostics in hello following ways:</span></span>

* <span data-ttu-id="f6f3c-110">Можно изменить параметры конфигурации диагностики через hello **конфигурация диагностики** диалоговое окно в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-110">You can change diagnostics configuration settings through hello **Diagnostics Configuration** dialog box in Visual Studio.</span></span> <span data-ttu-id="f6f3c-111">Hello параметры сохраняются в файле с именем diagnostics.wadcfgx (diagnostics.wadcfg в пакете Azure SDK 2.4 или более ранней версии).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-111">hello settings are saved in a file called diagnostics.wadcfgx (diagnostics.wadcfg in Azure SDK 2.4 or earlier).</span></span> <span data-ttu-id="f6f3c-112">Кроме того можно непосредственно изменить файл конфигурации hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-112">Alternatively, you can directly modify hello configuration file.</span></span> <span data-ttu-id="f6f3c-113">Если необходимо вручную обновить файл hello, hello изменения конфигурации вступят hello эффект развертывании hello облачной службы tooAzure или служба выполнения hello в эмуляторе hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-113">If you manually update hello file, hello configuration changes will take effect hello next time you deploy hello cloud service tooAzure or run hello service in hello emulator.</span></span>
* <span data-ttu-id="f6f3c-114">Используйте **Cloud Explorer** или **обозревателя серверов** в параметрах Visual Studio toochange hello диагностики для работающей облачной службы или виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-114">Use **Cloud Explorer** or **Server Explorer** in Visual Studio toochange hello diagnostics settings for a running cloud service or virtual machine.</span></span>

## <a name="azure-26-diagnostics-changes"></a><span data-ttu-id="f6f3c-115">Изменения в системе диагностики Azure версии 2.6</span><span class="sxs-lookup"><span data-stu-id="f6f3c-115">Azure 2.6 diagnostics changes</span></span>
<span data-ttu-id="f6f3c-116">Для проектов Azure SDK 2.6 в Visual Studio были внесены следующие отличия hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-116">For Azure SDK 2.6 projects in Visual Studio, hello following changes were made.</span></span> <span data-ttu-id="f6f3c-117">(Эти изменения также применяются toolater версии пакета Azure SDK).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-117">(These changes also apply toolater versions of Azure SDK.)</span></span>

* <span data-ttu-id="f6f3c-118">Hello локальный эмулятор теперь поддерживает систему диагностики.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-118">hello local emulator now supports diagnostics.</span></span> <span data-ttu-id="f6f3c-119">Это означает, что можно собирать данные диагностики и убедитесь, что приложение создает hello правильные трассировки во время разработки и тестирования в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-119">This means you can collect diagnostics data and ensure your application is creating hello right traces while you're developing and testing in Visual Studio.</span></span> <span data-ttu-id="f6f3c-120">Здравствуйте, строка подключения `UseDevelopmentStorage=true` включает сбор данных диагностики при запуске проекта облачной службы в Visual Studio с помощью эмулятора хранилища Azure hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-120">hello connection string `UseDevelopmentStorage=true` enables diagnostics data collection while you're running your cloud service project in Visual Studio by using hello Azure storage emulator.</span></span> <span data-ttu-id="f6f3c-121">Все диагностические данные собираются в учетной записи хранения hello (хранилище разработки).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-121">All diagnostics data is collected in hello (Development Storage) storage account.</span></span>
* <span data-ttu-id="f6f3c-122">Строка подключения учетной записи хранения диагностики Hello (Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString) еще раз сохраняется в файле конфигурации (cscfg) службы hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-122">hello diagnostics storage account connection string (Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString) is stored once again in hello service configuration (.cscfg) file.</span></span> <span data-ttu-id="f6f3c-123">Пакет SDK Azure 2.5 учетная запись хранения диагностики hello был указан в файле diagnostics.wadcfgx hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-123">In Azure SDK 2.5 hello diagnostics storage account was specified in hello diagnostics.wadcfgx file.</span></span>

<span data-ttu-id="f6f3c-124">Существуют некоторые важные различия между как строка подключения hello работает в Azure SDK 2.4 и более ранних версий и как он работает в Azure SDK 2.6 и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-124">There are some notable differences between how hello connection string worked in Azure SDK 2.4 and earlier and how it works in Azure SDK 2.6 and later.</span></span>

* <span data-ttu-id="f6f3c-125">В пакете Azure SDK 2.4 и более ранних версиях строка подключения hello используемый как среда выполнения hello tooget подключаемого модуля диагностики hello данных учетной записи хранения для передачи журналов диагностики.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-125">In Azure SDK 2.4 and earlier, hello connection string was used as a runtime by hello diagnostics plugin tooget hello storage account information for transferring diagnostics logs.</span></span>
* <span data-ttu-id="f6f3c-126">В пакете Azure SDK 2.6 и более поздних версиях строка подключения диагностики hello используется модулем Visual Studio tooconfigure hello диагностики hello сведения о соответствующих дисковых учетной записи во время публикации.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-126">In Azure SDK 2.6 and later, hello diagnostics connection string is used by Visual Studio tooconfigure hello diagnostics extension with hello appropriate storage account information during publishing.</span></span> <span data-ttu-id="f6f3c-127">Строка подключения Hello позволяет определить разных учетных записей хранения для различных конфигураций службы, Visual Studio будет использоваться при публикации.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-127">hello connection string lets you define different storage accounts for different service configurations that Visual Studio will use when publishing.</span></span> <span data-ttu-id="f6f3c-128">Тем не менее поскольку hello подключаемый модуль диагностики больше не доступен (после Azure SDK 2.5), cscfg-файле hello сам по себе не удается включить hello расширения диагностики.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-128">However, because hello diagnostics plugin is no longer available (after Azure SDK 2.5), hello .cscfg file by itself can't enable hello Diagnostics Extension.</span></span> <span data-ttu-id="f6f3c-129">У вас tooenable hello расширение отдельно с помощью средств, таких как Visual Studio или PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-129">You have tooenable hello extension separately through tools such as Visual Studio or PowerShell.</span></span>
* <span data-ttu-id="f6f3c-130">toosimplify hello процесс настройки расширения системы диагностики hello с помощью PowerShell, hello выходные данные пакета Visual Studio также содержит hello открытый XML-ФАЙЛ конфигурации для модуля диагностики hello для каждой роли.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-130">toosimplify hello process of configuring hello diagnostics extension with PowerShell, hello package output from Visual Studio also contains hello public configuration XML for hello diagnostics extension for each role.</span></span> <span data-ttu-id="f6f3c-131">Visual Studio использует hello диагностики данные строки подключения toopopulate hello хранилища учетной записи в открытой конфигурации hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-131">Visual Studio uses hello diagnostics connection string toopopulate hello storage account information present in hello public configuration.</span></span> <span data-ttu-id="f6f3c-132">файлы общедоступной конфигурации Hello создаются в папке расширений hello и следовать шаблону hello PaaSDiagnostics. &lt;RoleName >. PubConfig.xml.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-132">hello public config files are created in hello Extensions folder and follow hello pattern PaaSDiagnostics.&lt;RoleName>.PubConfig.xml.</span></span> <span data-ttu-id="f6f3c-133">Любые развертывания на основе PowerShell можно использовать этот шаблон toomap tooa каждой конфигурации роли.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-133">Any PowerShell based deployments can use this pattern toomap each configuration tooa Role.</span></span>
* <span data-ttu-id="f6f3c-134">Hello строку подключения в cscfg-файле hello также используется hello [портал Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040) tooaccess hello данные диагностики, поэтому она может отображаться в hello **мониторинг** требуется строка подключения hello вкладки. tooshow службы hello tooconfigure подробного мониторинга данных в портале hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-134">hello connection string in hello .cscfg file is also used by hello [Azure portal](http://go.microsoft.com/fwlink/p/?LinkID=525040) tooaccess hello diagnostics data so it can appear in hello **Monitoring** tab. hello connection string is needed tooconfigure hello service tooshow verbose monitoring data in hello portal.</span></span>

## <a name="migrating-projects-tooazure-sdk-26-and-later"></a><span data-ttu-id="f6f3c-135">Перенос проектов tooAzure SDK версии 2.6 и более поздних версий</span><span class="sxs-lookup"><span data-stu-id="f6f3c-135">Migrating projects tooAzure SDK 2.6 and later</span></span>
<span data-ttu-id="f6f3c-136">При миграции из пакета Azure SDK 2.5 tooAzure SDK 2.6 или более поздней версии, если у вас есть учетная запись хранения диагностики, указанной в wadcfgx-файле hello, затем она останется там.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-136">When migrating from Azure SDK 2.5 tooAzure SDK 2.6 or later, if you had a diagnostics storage account specified in hello .wadcfgx file, then it will stay there.</span></span> <span data-ttu-id="f6f3c-137">преимущества tootake hello гибкость использования различных хранилища учетных записей для различных конфигураций хранилища, необходимо добавить проект tooyour строка подключения hello toomanually.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-137">tootake advantage of hello flexibility of using different storage accounts for different storage configurations, you'll have toomanually add hello connection string tooyour project.</span></span> <span data-ttu-id="f6f3c-138">При миграции проекта из пакета Azure SDK 2.4 или более ранних tooAzure SDK 2.6, затем hello диагностики сохраняются строки подключения.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-138">If you're migrating a project from Azure SDK 2.4 or earlier tooAzure SDK 2.6, then hello diagnostics connection strings are preserved.</span></span> <span data-ttu-id="f6f3c-139">Тем не менее Обратите внимание, как строки подключения обрабатываются в пакете Azure SDK 2.6, указанное в предыдущем разделе hello изменения hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-139">However, please note hello changes in how connection strings are treated in Azure SDK 2.6 as specified in hello previous section.</span></span>

### <a name="how-visual-studio-determines-hello-diagnostics-storage-account"></a><span data-ttu-id="f6f3c-140">Определение учетной записи хранения диагностики hello в Visual Studio</span><span class="sxs-lookup"><span data-stu-id="f6f3c-140">How Visual Studio determines hello diagnostics storage account</span></span>
* <span data-ttu-id="f6f3c-141">Если строка подключения диагностики указана в cscfg-файле hello, Visual Studio использует его расширение диагностики hello tooconfigure при публикации, а также при создании XML-файлов общедоступной конфигурации hello во время упаковки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-141">If a diagnostics connection string is specified in hello .cscfg file, Visual Studio uses it tooconfigure hello diagnostics extension when publishing, and when generating hello public configuration xml files during packaging.</span></span>
* <span data-ttu-id="f6f3c-142">Если строка подключения диагностики указана в cscfg-файле hello, затем Visual Studio возвращается toousing hello указанную учетную запись хранения в hello .wadcfgx tooconfigure hello диагностики расширение файла при публикации и создания открытого hello XML-файлов конфигурации при упаковке.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-142">If no diagnostics connection string is specified in hello .cscfg file, then Visual Studio falls back toousing hello storage account specified in hello .wadcfgx file tooconfigure hello diagnostics extension when publishing, and generating hello public configuration xml files when packaging.</span></span>
* <span data-ttu-id="f6f3c-143">Строка подключения диагностики Hello в cscfg-файле hello имеет приоритет над hello учетной записи хранения в wadcfgx-файле hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-143">hello diagnostics connection string in hello .cscfg file takes precedence over hello storage account in hello .wadcfgx file.</span></span> <span data-ttu-id="f6f3c-144">Если строка подключения диагностики указано в cscfg-файле hello, затем Visual Studio использует эти данные и игнорирует hello учетной записи хранения в wadcfgx-файле.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-144">If a diagnostics connection string is specified in hello .cscfg file, then Visual Studio uses that and ignores hello storage account in .wadcfgx.</span></span>

### <a name="what-does-hello-update-development-storage-connection-strings-checkbox-do"></a><span data-ttu-id="f6f3c-145">Что does Здравствуйте, «Обновить строки подключения хранилища разработки...»</span><span class="sxs-lookup"><span data-stu-id="f6f3c-145">What does hello "Update development storage connection strings…"</span></span> <span data-ttu-id="f6f3c-146">"Обновлять строки подключения хранилища разработки..."?</span><span class="sxs-lookup"><span data-stu-id="f6f3c-146">checkbox do?</span></span>
<span data-ttu-id="f6f3c-147">Здравствуйте, флажок для **обновить строки подключения хранилища разработки для диагностики и кэширования учетные данные учетной записи хранения Microsoft Azure при публикации tooMicrosoft Azure** предоставляет удобный способ tooupdate любое Учетная запись строки подключения хранилища разработки с помощью учетной записи хранилища Azure hello, указанной во время публикации.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-147">hello checkbox for **Update development storage connection strings for Diagnostics and Caching with Microsoft Azure storage account credentials when publishing tooMicrosoft Azure** gives you a convenient way tooupdate any development storage account connection strings with hello Azure storage account specified during publishing.</span></span>

<span data-ttu-id="f6f3c-148">Например, предположим, этот флажок установлен, и строка подключения диагностики hello указывает `UseDevelopmentStorage=true`.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-148">For example, suppose you select this checkbox and hello diagnostics connection string specifies `UseDevelopmentStorage=true`.</span></span> <span data-ttu-id="f6f3c-149">При публикации проекта tooAzure hello, Visual Studio автоматически обновит строки подключения диагностики hello hello учетную запись хранилища, заданных в мастере публикации hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-149">When you publish hello project tooAzure, Visual Studio will automatically update hello diagnostics connection string with hello storage account you specified in hello Publish wizard.</span></span> <span data-ttu-id="f6f3c-150">Тем не менее если как строка подключения диагностики hello была указана реальная учетная запись хранения, то этой учетной записи будет использоваться вместо этого.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-150">However, if a real storage account was specified as hello diagnostics connection string, then that account is used instead.</span></span>

## <a name="diagnostics-functionality-differences-between-azure-sdk-24-and-earlier-and-azure-sdk-25-and-later"></a><span data-ttu-id="f6f3c-151">Функциональные различия диагностики в Azure SDK между более ранними (до 2.4 включительно) и более поздними (с 2.5 включительно) версиями</span><span class="sxs-lookup"><span data-stu-id="f6f3c-151">Diagnostics functionality differences between Azure SDK 2.4 and earlier and Azure SDK 2.5 and later</span></span>
<span data-ttu-id="f6f3c-152">Если вы осуществили обновление проекта Azure SDK 2.4 tooAzure SDK 2.5 или более поздней версии, следует иметь в виду hello после диагностики функциональные различия.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-152">If you're upgrading your project from Azure SDK 2.4 tooAzure SDK 2.5 or later, you should bear in mind hello following diagnostics functionality differences.</span></span>

* <span data-ttu-id="f6f3c-153">**API конфигурации больше не используются.** Программная конфигурация диагностики доступна в пакете SDK для Azure 2.4 и более ранних версий, но в дальнейших выпусках, начиная с версии SDK для Azure 2.5, она не используется.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-153">**Configuration APIs are deprecated** – Programmatic configuration of diagnostics is available in Azure SDK 2.4 or earlier versions, but is deprecated in Azure SDK 2.5 and later.</span></span> <span data-ttu-id="f6f3c-154">Если конфигурация системы диагностики определена в коде, вам потребуется tooreconfigure эти параметры с нуля в hello перенесенном проекте для работы tookeep диагностики.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-154">If your diagnostics configuration is currently defined in code, you'll need tooreconfigure those settings from scratch in hello migrated project in order for diagnostics tookeep working.</span></span> <span data-ttu-id="f6f3c-155">файл конфигурации диагностики Hello для Azure SDK 2.4 — diagnostics.wadcfg, а diagnostics.wadcfgx Azure SDK 2.5 и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-155">hello diagnostics configuration file for Azure SDK 2.4 is diagnostics.wadcfg, and diagnostics.wadcfgx for Azure SDK 2.5 and later.</span></span>
* <span data-ttu-id="f6f3c-156">**Диагностика для приложений облачных служб можно задавать только на уровне роли hello, а не на уровне экземпляра hello.**</span><span class="sxs-lookup"><span data-stu-id="f6f3c-156">**Diagnostics for cloud service applications can only be configured at hello role level, not at hello instance level.**</span></span>
* <span data-ttu-id="f6f3c-157">**Каждый раз при развертывании приложения hello конфигурация системы диагностики обновляется** — это может вызвать проблемы с контролем четности, если изменить конфигурацию диагностики из обозревателя серверов и затем повторно развернуть приложение.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-157">**Every time you deploy your app, hello diagnostics configuration is updated** – This can cause parity issues if you change your diagnostics configuration from Server Explorer and then redeploy your app.</span></span>
* <span data-ttu-id="f6f3c-158">**В пакете Azure SDK 2.5 и более поздних версиях аварийные дампы настраиваются в файле конфигурации диагностики hello не в коде** — Если аварийные дампы настроены в коде, потребуется toomanually передачи hello конфигурации из файла конфигурации toohello кода Поскольку hello аварийные дампы не перемещаются во время миграции hello tooAzure SDK 2.6.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-158">**In Azure SDK 2.5 and later, crash dumps are configured in hello diagnostics configuration file, not in code** – If you have crash dumps configured in code, you'll have toomanually transfer hello configuration from code toohello configuration file, because hello crash dumps aren't transferred during hello migration tooAzure SDK 2.6.</span></span>

## <a name="enable-diagnostics-in-cloud-service-projects-before-deploying-them"></a><span data-ttu-id="f6f3c-159">Включение диагностики в проекте облачной службы перед его развертыванием</span><span class="sxs-lookup"><span data-stu-id="f6f3c-159">Enable diagnostics in cloud service projects before deploying them</span></span>
<span data-ttu-id="f6f3c-160">В Visual Studio можно выбрать toocollect данные диагностики для ролей, выполняющихся в Azure, при запуске службы hello в эмуляторе hello перед его развертыванием.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-160">In Visual Studio, you can choose toocollect diagnostics data for roles that run in Azure, when you run hello service in hello emulator before deploying it.</span></span> <span data-ttu-id="f6f3c-161">Все параметры toodiagnostics изменения в Visual Studio сохраняются в файле конфигурации diagnostics.wadcfgx hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-161">All changes toodiagnostics settings in Visual Studio are saved in hello diagnostics.wadcfgx configuration file.</span></span> <span data-ttu-id="f6f3c-162">Эти параметры конфигурации указывают учетную запись хранения hello, где сохраняются данные диагностики при развертывании облачной службы.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-162">These configuration settings specify hello storage account where diagnostics data is saved when you deploy your cloud service.</span></span>

[!INCLUDE [cloud-services-wad-warning](../includes/cloud-services-wad-warning.md)]

### <a name="tooenable-diagnostics-in-visual-studio-before-deployment"></a><span data-ttu-id="f6f3c-163">tooenable диагностики в Visual Studio перед развертыванием</span><span class="sxs-lookup"><span data-stu-id="f6f3c-163">tooenable diagnostics in Visual Studio before deployment</span></span>
1. <span data-ttu-id="f6f3c-164">Hello контекстного меню для интересующей вас роли hello, выберите **свойства**, а затем выберите hello **конфигурации** hello роли на вкладке **свойства** окна.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-164">On hello shortcut menu for hello role that interests you, choose **Properties**, and then choose hello **Configuration** tab in hello role’s **Properties** window.</span></span>
2. <span data-ttu-id="f6f3c-165">В hello **диагностики** статьи, убедитесь, что hello **включить диагностику** установлен флажок.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-165">In hello **Diagnostics** section, make sure that hello **Enable Diagnostics** check box is selected.</span></span>
   
    ![Доступ к параметр Включить диагностику hello](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796660.png)
3. <span data-ttu-id="f6f3c-167">Выберите hello кнопку с многоточием (...) кнопку toospecify hello учетную запись хранения место hello диагностики данных toobe хранятся.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-167">Choose hello ellipsis (…) button toospecify hello storage account where you want hello diagnostics data toobe stored.</span></span> <span data-ttu-id="f6f3c-168">учетной записи хранилища Hello выбранного будет hello расположение, где хранятся данные диагностики.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-168">hello storage account you choose will be hello location where diagnostics data is stored.</span></span>
   
    ![Укажите toouse учетной записи хранилища hello](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796661.png)
4. <span data-ttu-id="f6f3c-170">В hello **Создание строки подключения хранилища** диалоговом окне укажите ли вы, чтобы tooconnect с помощью hello эмулятор хранилища Azure, подписка Azure или ручной ввод учетных данных.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-170">In hello **Create Storage Connection String** dialog box, specify whether you want tooconnect using hello Azure Storage Emulator, an Azure subscription, or manually entered credentials.</span></span>
   
    ![Диалоговое окно учетной записи хранения](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796662.png)
   
   * <span data-ttu-id="f6f3c-172">При выборе параметра эмулятор хранилища Microsoft Azure hello hello строка подключения имеет значение tooUseDevelopmentStorage = true.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-172">If you choose hello Microsoft Azure Storage Emulator option, hello connection string is set tooUseDevelopmentStorage=true.</span></span>
   * <span data-ttu-id="f6f3c-173">Для варианта hello вашей подписки, вы можете hello подписки Azure, имя учетной записи toouse и hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-173">If you choose hello Your subscription option, you can choose hello Azure subscription you want toouse and hello account name.</span></span> <span data-ttu-id="f6f3c-174">Можно выбрать, что управление учетными записями hello кнопку toomanage подписками Azure.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-174">You can choose hello Manage Accounts button toomanage your Azure subscriptions.</span></span>
   * <span data-ttu-id="f6f3c-175">Если выбран вариант hello ручной ввод учетных данных, вы запрашиваемые tooenter hello имени и ключа учетной записи Azure, требуется toouse hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-175">If you choose hello Manually entered credentials option, you're prompted tooenter hello name and key of hello Azure account you want toouse.</span></span>
5. <span data-ttu-id="f6f3c-176">Выберите hello **Настройка** hello tooview кнопку **конфигурация диагностики** диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-176">Choose hello **Configure** button tooview hello **Diagnostics configuration** dialog box.</span></span> <span data-ttu-id="f6f3c-177">Каждая вкладка (кроме вкладок **Общие** и **Каталоги журналов**) соответствует определенному источнику диагностических данных, которые можно собирать.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-177">Each tab (except for **General** and **Log Directories**) represents a diagnostic data source that you can collect.</span></span> <span data-ttu-id="f6f3c-178">Вкладка по умолчанию Hello, **Общие**, предлагает hello следующие варианты сбора данных диагностики: **только ошибки**, **все сведения о**, и **пользовательский план** .</span><span class="sxs-lookup"><span data-stu-id="f6f3c-178">hello default tab, **General**, offers you hello following diagnostics data collection options: **Errors only**, **All information**, and **Custom plan**.</span></span> <span data-ttu-id="f6f3c-179">Здравствуйте, параметр по умолчанию **только ошибки**, принимает hello наименьший объем хранилища, так как он не перемещает предупреждения и сообщения трассировки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-179">hello default option, **Errors only**, takes hello least amount of storage because it doesn’t transfer warnings or tracing messages.</span></span> <span data-ttu-id="f6f3c-180">Hello передач параметр сведения hello большая часть информации и, таким образом, hello самый дорогостоящий вариант с точки зрения хранилища.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-180">hello All information option transfers hello most information and is, therefore, hello most expensive option in terms of storage.</span></span>
   
    ![Включение и настройка диагностики Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758144.png)
6. <span data-ttu-id="f6f3c-182">Для этого примера выберите hello **пользовательский план** параметр для настройки данных hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-182">For this example, select hello **Custom plan** option so you can customize hello data collected.</span></span>
7. <span data-ttu-id="f6f3c-183">Hello **Квота диска в МБ** определяет, сколько места требуется tooallocate в учетной записи хранилища для диагностических данных.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-183">hello **Disk Quota in MB** box specifies how much space you want tooallocate in your storage account for diagnostics data.</span></span> <span data-ttu-id="f6f3c-184">Если требуется, можно изменить значение по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-184">You can change hello default value if you want.</span></span>
8. <span data-ttu-id="f6f3c-185">На каждой вкладке данных диагностики будет toocollect, выберите его **включить перемещение <log type>**  флажок.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-185">On each tab of diagnostics data you want toocollect, select its **Enable Transfer of <log type>** check box.</span></span> <span data-ttu-id="f6f3c-186">Например, если требуется, чтобы журналы приложения toocollect, выберите hello **включить перемещение журналов приложений** флажок на hello **журналы приложений** вкладки. Установите также все остальные параметры, необходимые для каждого типа диагностических данных.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-186">For example, if you want toocollect application logs, select hello **Enable transfer of Application Logs** check box on hello **Application Logs** tab. Also, specify any other information required by each diagnostics data type.</span></span> <span data-ttu-id="f6f3c-187">В разделе hello **настройки источников данных диагностики** далее в этом разделе сведения о конфигурации на каждой вкладке.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-187">See hello section **Configure diagnostics data sources** later in this topic for configuration information on each tab.</span></span>
9. <span data-ttu-id="f6f3c-188">После включения сбора диагностических данных всех hello, необходимо выбрать hello **ОК** кнопки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-188">After you’ve enabled collection of all hello diagnostics data you want, choose hello **OK** button.</span></span>
10. <span data-ttu-id="f6f3c-189">Теперь запустите проект облачной службы Azure в Visual Studio обычным образом.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-189">Run your Azure cloud service project in Visual Studio as usual.</span></span> <span data-ttu-id="f6f3c-190">При использовании приложения hello данные журнала, которые вы включили сохраняется toohello учетной записи хранилища Azure, указываемой.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-190">As you use your application, hello log information that you enabled is saved toohello Azure storage account you specified.</span></span>

## <a name="enable-diagnostics-in-azure-virtual-machines"></a><span data-ttu-id="f6f3c-191">Включение диагностики на виртуальных машинах Azure</span><span class="sxs-lookup"><span data-stu-id="f6f3c-191">Enable diagnostics in Azure virtual machines</span></span>
<span data-ttu-id="f6f3c-192">В Visual Studio можно выбрать toocollect данные диагностики для виртуальных машин Azure.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-192">In Visual Studio, you can choose toocollect diagnostics data for Azure virtual machines.</span></span>

### <a name="tooenable-diagnostics-in-azure-virtual-machines"></a><span data-ttu-id="f6f3c-193">tooenable диагностики в виртуальных машинах Azure</span><span class="sxs-lookup"><span data-stu-id="f6f3c-193">tooenable diagnostics in Azure virtual machines</span></span>
1. <span data-ttu-id="f6f3c-194">В **обозревателя серверов**, выберите hello узла Azure, а затем подключите tooyour подписки Azure, если вы еще не подключены.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-194">In **Server Explorer**, choose hello Azure node and then connect tooyour Azure subscription, if you're not already connected.</span></span>
2. <span data-ttu-id="f6f3c-195">Разверните hello **виртуальные машины** узла.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-195">Expand hello **Virtual Machines** node.</span></span> <span data-ttu-id="f6f3c-196">Вы можете создать новую виртуальную машину или выбрать уже существующую.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-196">You can create a new virtual machine, or select one that's already there.</span></span>
3. <span data-ttu-id="f6f3c-197">Hello контекстное меню для виртуальной машины hello интересующей вас выберите **Настройка**.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-197">On hello shortcut menu for hello virtual machine that interests you, choose **Configure**.</span></span> <span data-ttu-id="f6f3c-198">Откроется диалоговое окно конфигурации виртуальной машины hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-198">This shows hello virtual machine configuration dialog box.</span></span>
   
    ![Настройка виртуальной машины Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796663.png)
4. <span data-ttu-id="f6f3c-200">Если она еще не установлена, добавьте расширение диагностики Microsoft Monitoring Agent hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-200">If it's not already installed, add hello Microsoft Monitoring Agent Diagnostics extension.</span></span> <span data-ttu-id="f6f3c-201">Это расширение позволяет собирать данные диагностики для hello виртуальной машины Azure.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-201">This extension lets you gather diagnostics data for hello Azure virtual machine.</span></span> <span data-ttu-id="f6f3c-202">В списке установленные расширения hello выберите меню выберите раскрывающийся список доступных расширений hello и выберите Диагностика Microsoft Monitoring Agent.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-202">In hello Installed Extensions list, choose hello Select an available extension drop-down menu and then choose Microsoft Monitoring Agent Diagnostics.</span></span>
   
    ![Установка расширения виртуальной машины Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766024.png)
   
   > [!NOTE]
   > <span data-ttu-id="f6f3c-204">Для виртуальных машин существуют и другие диагностические расширения.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-204">Other diagnostics extensions are available for your virtual machines.</span></span> <span data-ttu-id="f6f3c-205">Дополнительные сведения см. в статье «Расширения и компоненты виртуальных машин Azure».</span><span class="sxs-lookup"><span data-stu-id="f6f3c-205">For more information, see Azure VM Extensions and Features.</span></span>
   > 
   > 
5. <span data-ttu-id="f6f3c-206">Выберите hello **добавить** tooadd расширения hello и представление, нажмите кнопку его **конфигурация диагностики** диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-206">Choose hello **Add** button tooadd hello extension and view its **Diagnostics configuration** dialog box.</span></span>
6. <span data-ttu-id="f6f3c-207">Выберите hello **Настройка** кнопку toospecify учетной записи хранилища, а затем выберите hello **ОК** кнопки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-207">Choose hello **Configure** button toospecify a storage account and then choose hello **OK** button.</span></span>
   
    <span data-ttu-id="f6f3c-208">Каждая вкладка (кроме вкладок **Общие** и **Каталоги журналов**) соответствует определенному источнику диагностических данных, которые можно собирать.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-208">Each tab (except for **General** and **Log Directories**) represents a diagnostic data source that you can collect.</span></span>
   
    ![Включение и настройка диагностики Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758144.png)
   
    <span data-ttu-id="f6f3c-210">Вкладка по умолчанию Hello, **Общие**, предлагает hello следующие варианты сбора данных диагностики: **только ошибки**, **все сведения о**, и **пользовательский план** .</span><span class="sxs-lookup"><span data-stu-id="f6f3c-210">hello default tab, **General**, offers you hello following diagnostics data collection options: **Errors only**, **All information**, and **Custom plan**.</span></span> <span data-ttu-id="f6f3c-211">Здравствуйте, параметр по умолчанию **только ошибки**, принимает hello наименьший объем хранилища, так как он не перемещает предупреждения и сообщения трассировки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-211">hello default option, **Errors only**, takes hello least amount of storage because it doesn’t transfer warnings or tracing messages.</span></span> <span data-ttu-id="f6f3c-212">Hello **все сведения о** передает параметр hello большая часть информации и, таким образом, hello вариант является наиболее затратным с точки зрения хранилища.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-212">hello **All information** option transfers hello most information and is, therefore, hello most expensive option in terms of storage.</span></span>
7. <span data-ttu-id="f6f3c-213">Для этого примера выберите hello **пользовательский план** параметр для настройки данных hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-213">For this example, select hello **Custom plan** option so you can customize hello data collected.</span></span>
8. <span data-ttu-id="f6f3c-214">Hello **Квота диска в МБ** определяет, сколько места требуется tooallocate в учетной записи хранилища для диагностических данных.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-214">hello **Disk Quota in MB** box specifies how much space you want tooallocate in your storage account for diagnostics data.</span></span> <span data-ttu-id="f6f3c-215">Если требуется, можно изменить значение по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-215">You can change hello default value if you want.</span></span>
9. <span data-ttu-id="f6f3c-216">На каждой вкладке данных диагностики будет toocollect, выберите его **включить перемещение <log type>**  флажок.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-216">On each tab of diagnostics data you want toocollect, select its **Enable Transfer of <log type>** check box.</span></span>
   
    <span data-ttu-id="f6f3c-217">Например, если требуется, чтобы журналы приложения toocollect, выберите hello **включить перемещение журналов приложений** флажок на hello **журналы приложений** вкладки. Установите также все остальные параметры, необходимые для каждого типа диагностических данных.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-217">For example, if you want toocollect application logs, select hello **Enable transfer of Application Logs** check box on hello **Application Logs** tab. Also, specify any other information required by each diagnostics data type.</span></span> <span data-ttu-id="f6f3c-218">В разделе hello **настройки источников данных диагностики** далее в этом разделе сведения о конфигурации на каждой вкладке.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-218">See hello section **Configure diagnostics data sources** later in this topic for configuration information on each tab.</span></span>
10. <span data-ttu-id="f6f3c-219">После включения сбора диагностических данных всех hello, необходимо выбрать hello **ОК** кнопки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-219">After you’ve enabled collection of all hello diagnostics data you want, choose hello **OK** button.</span></span>
11. <span data-ttu-id="f6f3c-220">Сохраните проект обновлен hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-220">Save hello updated project.</span></span>
    
     <span data-ttu-id="f6f3c-221">Вы увидите сообщение hello **журнал действий Microsoft Azure** окно, в котором hello виртуальной машины была обновлена.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-221">You'll see a message in hello **Microsoft Azure Activity Log** window that hello virtual machine has been updated.</span></span>

## <a name="configure-diagnostics-data-sources"></a><span data-ttu-id="f6f3c-222">Настройка источников диагностических данных</span><span class="sxs-lookup"><span data-stu-id="f6f3c-222">Configure diagnostics data sources</span></span>
<span data-ttu-id="f6f3c-223">После включения сбора данных диагностики можно уточнить источники данных требуется toocollect и какие сведения собираются.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-223">After you enable diagnostics data collection, you can choose exactly what data sources you want toocollect and what information is collected.</span></span> <span data-ttu-id="f6f3c-224">Hello ниже приведен список вкладок hello **конфигурация диагностики** диалоговое окно и означает, что каждый параметр конфигурации.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-224">hello following is a list of tabs in hello **Diagnostics configuration** dialog box and what each configuration option means.</span></span>

### <a name="application-logs"></a><span data-ttu-id="f6f3c-225">Журналы приложений</span><span class="sxs-lookup"><span data-stu-id="f6f3c-225">Application logs</span></span>
<span data-ttu-id="f6f3c-226">**Application logs** содержатся диагностические данные, созданные веб-приложениями.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-226">**Application logs** contain diagnostics information produced by a web application.</span></span> <span data-ttu-id="f6f3c-227">Журналы приложений toocapture, установите hello **включить перемещение журналов приложений** флажок.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-227">If you want toocapture application logs, select hello **Enable transfer of Application Logs** check box.</span></span> <span data-ttu-id="f6f3c-228">Можно увеличить или уменьшить hello количество минут при передаче журналов приложений hello tooyour учетной записи хранения, изменив hello **период передачи (мин)** значение.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-228">You can increase or decrease hello number of minutes when hello application logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span> <span data-ttu-id="f6f3c-229">Можно также изменить hello объем информации, записываемой в журнал hello, задав значение уровня журнала hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-229">You can also change hello amount of information captured in hello log by setting hello Log level value.</span></span> <span data-ttu-id="f6f3c-230">Например, вы можете **Verbose** tooget Дополнительные сведения или выберите **критическое** toocapture только критические ошибки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-230">For example, you can choose **Verbose** tooget more information or choose **Critical** toocapture only critical errors.</span></span> <span data-ttu-id="f6f3c-231">При наличии специальный поставщик диагностики, журналы приложений выдает их можно записать, добавив toohello GUID поставщика hello **GUID поставщика** поле.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-231">If you have a specific diagnostics provider that emits application logs, you can capture them by adding hello provider’s GUID toohello **Provider GUID** box.</span></span>

  ![Журналы приложений](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758145.png)

  <span data-ttu-id="f6f3c-233">Дополнительную информацию о диагностических журналах см. в статье [Включение ведения журнала диагностики для веб-приложений в службе приложений Azure](app-service-web/web-sites-enable-diagnostic-log.md).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-233">See [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md) for more information about application logs.</span></span>

### <a name="windows-event-logs"></a><span data-ttu-id="f6f3c-234">Журналы событий Windows</span><span class="sxs-lookup"><span data-stu-id="f6f3c-234">Windows event logs</span></span>
<span data-ttu-id="f6f3c-235">Toocapture журналы событий Windows, установите hello **включить передачу журналов событий Windows** флажок.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-235">If you want toocapture Windows event logs, select hello **Enable transfer of Windows Event Logs** check box.</span></span> <span data-ttu-id="f6f3c-236">Можно увеличить или уменьшить hello количество минут при передаче журналов событий hello tooyour учетной записи хранения, изменив hello **период передачи (мин)** значение.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-236">You can increase or decrease hello number of minutes when hello event logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span> <span data-ttu-id="f6f3c-237">Установите флажки hello для hello типов событий, которые должны tootrack.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-237">Select hello check boxes for hello types of events that you want tootrack.</span></span>

  ![журналы событий;](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796664.png)

<span data-ttu-id="f6f3c-239">Если вы используете Azure SDK 2.6 или более поздней версии и toospecify пользовательский источник данных, введите его в hello  **<Data source name>**  текст и затем выберите hello **добавить** Далее tooit кнопки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-239">If you're using Azure SDK 2.6 or later and want toospecify a custom data source, enter it in hello **<Data source name>** text box and then choose hello **Add** button next tooit.</span></span> <span data-ttu-id="f6f3c-240">источник данных Hello добавляется файл diagnostics.cfcfg toohello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-240">hello data source is added toohello diagnostics.cfcfg file.</span></span>

<span data-ttu-id="f6f3c-241">Если вы используете Azure SDK 2.5 и toospecify пользовательский источник данных, его можно добавить toohello `WindowsEventLog` hello diagnostics.wadcfgx файла, как следующий пример hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-241">If you're using Azure SDK 2.5 and want toospecify a custom data source, you can add it toohello `WindowsEventLog` section of hello diagnostics.wadcfgx file, such as in hello following example.</span></span>

```
<WindowsEventLog scheduledTransferPeriod="PT1M">
   <DataSource name="Application!*" />
   <DataSource name="CustomDataSource!*" />
</WindowsEventLog>
```
### <a name="performance-counters"></a><span data-ttu-id="f6f3c-242">Счетчики производительности</span><span class="sxs-lookup"><span data-stu-id="f6f3c-242">Performance counters</span></span>
<span data-ttu-id="f6f3c-243">Сведения о счетчиках производительности помогут вам найти проблемы в системе и оптимизировать производительность системы и приложений.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-243">Performance counter information can help you locate system bottlenecks and fine-tune system and application performance.</span></span> <span data-ttu-id="f6f3c-244">Дополнительные сведения см. в статье [Создание и использование счетчиков производительности в приложении Azure](https://msdn.microsoft.com/library/azure/hh411542.aspx).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-244">See [Create and Use Performance Counters in an Azure Application](https://msdn.microsoft.com/library/azure/hh411542.aspx) for more information.</span></span> <span data-ttu-id="f6f3c-245">Счетчики производительности toocapture, установите hello **включить передачу счетчиков производительности** флажок.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-245">If you want toocapture performance counters, select hello **Enable transfer of Performance Counters** check box.</span></span> <span data-ttu-id="f6f3c-246">Можно увеличить или уменьшить hello количество минут при передаче журналов событий hello tooyour учетной записи хранения, изменив hello **период передачи (мин)** значение.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-246">You can increase or decrease hello number of minutes when hello event logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span> <span data-ttu-id="f6f3c-247">Флажки hello для hello счетчики производительности, которые должны tootrack.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-247">Select hello check boxes for hello performance counters that you want tootrack.</span></span>

  ![Счетчики производительности](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758147.png)

<span data-ttu-id="f6f3c-249">tootrack счетчик производительности, который отсутствует в списке, введите его с помощью предложенного синтаксиса hello, а затем выберите hello **добавить** кнопки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-249">tootrack a performance counter that isn’t listed, enter it by using hello suggested syntax and then choose hello **Add** button.</span></span> <span data-ttu-id="f6f3c-250">Hello операционной системы на виртуальной машине hello определяет, какие счетчики производительности можно отслеживать. Дополнительные сведения о синтаксисе см. в статье [Specifying a Counter Path](https://msdn.microsoft.com/library/windows/desktop/aa373193.aspx) (Указание пути к счетчику).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-250">hello operating system on hello virtual machine determines which performance counters you can track. For more information about syntax, see [Specifying a Counter Path](https://msdn.microsoft.com/library/windows/desktop/aa373193.aspx).</span></span>

### <a name="infrastructure-logs"></a><span data-ttu-id="f6f3c-251">Журналы инфраструктуры</span><span class="sxs-lookup"><span data-stu-id="f6f3c-251">Infrastructure logs</span></span>
<span data-ttu-id="f6f3c-252">Журналы инфраструктуры toocapture, которые содержат сведения о hello инфраструктуры диагностики Azure, модуле RemoteAccess hello и hello модуль RemoteForwarder, установите hello **включить передачу журналов инфраструктуры**флажок.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-252">If you want toocapture infrastructure logs, which contain information about hello Azure diagnostic infrastructure, hello RemoteAccess module, and hello RemoteForwarder module, select hello **Enable transfer of Infrastructure Logs** check box.</span></span> <span data-ttu-id="f6f3c-253">Можно увеличить или уменьшить количество минут при передаче журналов hello в hello tooyour учетной записи хранения, изменив значение hello период передачи (мин).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-253">You can increase or decrease hello number of minutes when hello logs are transferred tooyour storage account by changing hello Transfer Period (min) value.</span></span>

  ![Журналы инфраструктуры диагностики](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC758148.png)

  <span data-ttu-id="f6f3c-255">Дополнительные сведения см. в статье [Сбор данных журнала с помощью системы диагностики Azure](https://msdn.microsoft.com/library/azure/gg433048.aspx).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-255">See [Collect Logging Data by Using Azure Diagnostics](https://msdn.microsoft.com/library/azure/gg433048.aspx) for more information.</span></span>

### <a name="log-directories"></a><span data-ttu-id="f6f3c-256">Каталоги журналов</span><span class="sxs-lookup"><span data-stu-id="f6f3c-256">Log directories</span></span>
<span data-ttu-id="f6f3c-257">Каталоги журналов toocapture, которые содержат данные, собранные из каталогов журналов для запросов служб Internet Information Services (IIS), неудачных запросов или выбранных папок, установите hello **включить передачу каталогов журналов**флажок.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-257">If you want toocapture log directories, which contain data collected from log directories for Internet Information Services (IIS) requests, failed requests, or folders that you choose, select hello **Enable transfer of Log Directories** check box.</span></span> <span data-ttu-id="f6f3c-258">Можно увеличить или уменьшить количество минут при передаче журналов hello в hello tooyour учетной записи хранения, изменив hello **период передачи (мин)** значение.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-258">You can increase or decrease hello number of minutes when hello logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span>

<span data-ttu-id="f6f3c-259">Можно выбрать поля hello hello журнал можно toocollect, такие как **журналы IIS** и **не удалось запросить** журналы.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-259">You can select hello boxes of hello logs you want toocollect, such as **IIS Logs** and **Failed Request** Logs.</span></span> <span data-ttu-id="f6f3c-260">Предоставляются имена контейнеров хранилища по умолчанию, но при необходимости можно изменить имена hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-260">Default storage container names are provided, but you can change hello names if you want.</span></span>

<span data-ttu-id="f6f3c-261">Кроме того, вы можете собирать журналы из любой папки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-261">Also, you can capture logs from any folder.</span></span> <span data-ttu-id="f6f3c-262">Просто укажите путь hello в hello **журнал из абсолютного каталога** статьи, а затем выберите hello **добавить каталог** кнопки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-262">Just specify hello path in hello **Log from Absolute Directory** section and then choose hello **Add Directory** button.</span></span> <span data-ttu-id="f6f3c-263">Hello журналы будут записаны toohello указан контейнеров.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-263">hello logs will be captured toohello specified containers.</span></span>

  ![Каталоги журналов](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796665.png)

### <a name="etw-logs"></a><span data-ttu-id="f6f3c-265">Журналы трассировки событий Windows</span><span class="sxs-lookup"><span data-stu-id="f6f3c-265">ETW logs</span></span>
<span data-ttu-id="f6f3c-266">Если вы используете [трассировки событий Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803\(v=vs.85\).aspx) (ETW) и журналы трассировки событий Windows toocapture, выберите hello **включить передачу журналов трассировки событий Windows** флажок.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-266">If you use [Event Tracing for Windows](https://msdn.microsoft.com/library/windows/desktop/bb968803\(v=vs.85\).aspx) (ETW) and want toocapture ETW logs, select hello **Enable transfer of ETW Logs** check box.</span></span> <span data-ttu-id="f6f3c-267">Можно увеличить или уменьшить количество минут при передаче журналов hello в hello tooyour учетной записи хранения, изменив hello **период передачи (мин)** значение.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-267">You can increase or decrease hello number of minutes when hello logs are transferred tooyour storage account by changing hello **Transfer Period (min)** value.</span></span>

<span data-ttu-id="f6f3c-268">Hello события записываются из источников событий и манифестов событий, указанных вами.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-268">hello events are captured from event sources and event manifests that you specify.</span></span> <span data-ttu-id="f6f3c-269">toospecify источник событий, введите имя в hello **источников событий** статьи, а затем выберите hello **добавить источник событий** кнопки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-269">toospecify an event source, enter a name in hello **Event Sources** section and then choose hello **Add Event Source** button.</span></span> <span data-ttu-id="f6f3c-270">Аналогичным образом, можно указать манифест события в hello **манифестов событий** статьи, а затем выберите hello **добавить манифест события** кнопки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-270">Similarly, you can specify an event manifest in hello **Event Manifests** section and then choose hello **Add Event Manifest** button.</span></span>

  ![Журналы трассировки событий Windows](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766025.png)

  <span data-ttu-id="f6f3c-272">Hello ETW framework поддерживается в ASP.NET через классы в hello [System.Diagnostics.aspx] (пространство имен https://msdn.microsoft.com/library/system.diagnostics (v=vs.110).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-272">hello ETW framework is supported in ASP.NET through classes in hello [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) namespace.</span></span> <span data-ttu-id="f6f3c-273">пространство имен Microsoft.WindowsAzure.Diagnostics Hello, который наследуется от и расширяет стандарт [System.Diagnostics.aspx] (классы https://msdn.microsoft.com/library/system.diagnostics (v=vs.110), включает использование hello () [System.Diagnostics.aspx] https://MSDN.Microsoft.com/library/System.Diagnostics (v=vs.110) как платформу ведения журналов в среде Azure hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-273">hello Microsoft.WindowsAzure.Diagnostics namespace, which inherits from and extends standard [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) classes, enables hello use of [System.Diagnostics.aspx](https://msdn.microsoft.com/library/system.diagnostics(v=vs.110) as a logging framework in hello Azure environment.</span></span> <span data-ttu-id="f6f3c-274">Дополнительные сведения см. в статьях [Управление ведением журналов и трассировкой в Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) и [Включение диагностики в облачных службах и виртуальных машинах Azure](cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-274">For more information, see [Take Control of Logging and Tracing in Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) and [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](cloud-services/cloud-services-dotnet-diagnostics.md).</span></span>

### <a name="crash-dumps"></a><span data-ttu-id="f6f3c-275">Аварийные дампы</span><span class="sxs-lookup"><span data-stu-id="f6f3c-275">Crash dumps</span></span>
<span data-ttu-id="f6f3c-276">Toocapture сведения о после сбоя экземпляра роли, установите hello **включить передачу аварийных дампов** флажок.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-276">If you want toocapture information about when a role instance crashes, select hello **Enable transfer of Crash Dumps** check box.</span></span> <span data-ttu-id="f6f3c-277">Поскольку ASP.NET обрабатывает большинство исключений, обычно это полезно только для рабочих ролей. Можно увеличить или уменьшить процент hello хранилища пространства выделено toohello аварийных дампов, изменив hello **Квота каталога (%)** значение.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-277">(Because ASP.NET handles most exceptions, this is generally useful only for worker roles.) You can increase or decrease hello percentage of storage space devoted toohello crash dumps by changing hello **Directory Quota (%)** value.</span></span> <span data-ttu-id="f6f3c-278">Можно изменить контейнер хранилища hello, где хранятся аварийные дампы hello, и можно выбрать, следует ли использовать toocapture **полного** или **Mini** дампа.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-278">You can change hello storage container where hello crash dumps are stored, and you can select whether you want toocapture a **Full** or **Mini** dump.</span></span>

<span data-ttu-id="f6f3c-279">Отслеживаемые процессы Hello перечислены.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-279">hello processes currently being tracked are listed.</span></span> <span data-ttu-id="f6f3c-280">Установите hello флажки для нужных toocapture процессов hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-280">Select hello check boxes for hello processes that you want toocapture.</span></span> <span data-ttu-id="f6f3c-281">tooadd другого процесса toohello списка, введите имя процесса hello и нажмите кнопку hello **добавить процесс** кнопки.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-281">tooadd another process toohello list, enter hello process name and then choose hello **Add Process** button.</span></span>

  ![Аварийные дампы](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766026.png)

  <span data-ttu-id="f6f3c-283">Дополнительные сведения см. в статьях [Управление ведением журналов и трассировкой в Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) и [Microsoft Azure Diagnostics Part 4: Custom Logging Components and Azure Diagnostics 1.3 Changes](http://justazure.com/microsoft-azure-diagnostics-part-4-custom-logging-components-azure-diagnostics-1-3-changes/) (Система диагностики Microsoft Azure, часть 4. Настраиваемые компоненты ведения журналов и изменения в системе диагностики Azure 1.3).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-283">See [Take Control of Logging and Tracing in Microsoft Azure](https://msdn.microsoft.com/magazine/ff714589.aspx) and [Microsoft Azure Diagnostics Part 4: Custom Logging Components and Azure Diagnostics 1.3 Changes](http://justazure.com/microsoft-azure-diagnostics-part-4-custom-logging-components-azure-diagnostics-1-3-changes/) for more information.</span></span>

## <a name="view-hello-diagnostics-data"></a><span data-ttu-id="f6f3c-284">Просмотр данных диагностики hello</span><span class="sxs-lookup"><span data-stu-id="f6f3c-284">View hello diagnostics data</span></span>
<span data-ttu-id="f6f3c-285">После того как собраны данные диагностики hello для облачной службы или виртуальной машины, можно просмотреть его.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-285">After you’ve collected hello diagnostics data for a cloud service or a virtual machine, you can view it.</span></span>

### <a name="tooview-cloud-service-diagnostics-data"></a><span data-ttu-id="f6f3c-286">tooview данных диагностики облачной службы</span><span class="sxs-lookup"><span data-stu-id="f6f3c-286">tooview cloud service diagnostics data</span></span>
1. <span data-ttu-id="f6f3c-287">Разверните и запустите облачную службу обычным образом.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-287">Deploy your cloud service as usual and then run it.</span></span>
2. <span data-ttu-id="f6f3c-288">Hello диагностические данные можно просмотреть в отчет, создаваемый Visual Studio или таблиц в учетной записи.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-288">You can view hello diagnostics data in either a report that Visual Studio generates or tables in your storage account.</span></span> <span data-ttu-id="f6f3c-289">Откройте tooview hello данных в отчете, **Cloud Explorer** или **обозревателя серверов**, откройте контекстное меню hello hello узла интересующей вас роли hello и нажмите кнопку **Просмотр диагностических данных** .</span><span class="sxs-lookup"><span data-stu-id="f6f3c-289">tooview hello data in a report, open **Cloud Explorer** or **Server Explorer**, open hello shortcut menu of hello node for hello role that interests you, and then choose **View Diagnostic Data**.</span></span>
   
    ![Просмотреть данные диагностики](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC748912.png)
   
    <span data-ttu-id="f6f3c-291">Отображается отчет, показывающий hello доступных данных.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-291">A report that shows hello available data appears.</span></span>
   
    ![Отчет о системе диагностики Microsoft Azure в Visual Studio](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796666.png)
   
    <span data-ttu-id="f6f3c-293">Если hello самых последних данных не отображается, может потребоваться toowait для tooelapse периода передачи hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-293">If hello most recent data doesn't appear, you might have toowait for hello transfer period tooelapse.</span></span>
   
    <span data-ttu-id="f6f3c-294">Выберите hello **обновление** связь данных hello tooimmediately обновления, или выберите интервал в hello **автообновления** раскрывающегося списка поле toohave hello автоматического обновления данных.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-294">Choose hello **Refresh** link tooimmediately update hello data, or choose an interval in hello **Auto-Refresh** dropdown list box toohave hello data updated automatically.</span></span> <span data-ttu-id="f6f3c-295">данные об ошибках tooexport hello, выберите hello **Экспорт tooCSV** toocreate кнопку CSV-файл, можно открыть в электронной таблице.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-295">tooexport hello error data, choose hello **Export tooCSV** button toocreate a comma-separated value file you can open in a spreadsheet.</span></span>
   
    <span data-ttu-id="f6f3c-296">В **Cloud Explorer** или **обозревателя серверов**, откройте hello учетной записи хранилища, связанной с развертыванием hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-296">In **Cloud Explorer** or **Server Explorer**, open hello storage account that's associated with hello deployment.</span></span>
3. <span data-ttu-id="f6f3c-297">Откройте таблицы диагностики hello в окне просмотра таблицы hello, а затем просмотрите собранные данные hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-297">Open hello diagnostics tables in hello table viewer, and then review hello data that you collected.</span></span> <span data-ttu-id="f6f3c-298">Для просмотра пользовательских журналов и журналов служб IIS вы можете открыть контейнер больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-298">For IIS logs and custom logs, you can open a blob container.</span></span> <span data-ttu-id="f6f3c-299">Просмотрев hello в следующей таблице, можно найти hello таблиц или BLOB-контейнер, содержащий данные hello интересующей вас.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-299">By reviewing hello following table, you can find hello table or blob container that contains hello data that interests you.</span></span> <span data-ttu-id="f6f3c-300">Кроме toohello данные для этого файла журнала, hello записи таблицы содержат EventTickCount, DeploymentId, Role и RoleInstance toohelp, необходимо указать, какая виртуальная машина и роль создаваемая hello данных и когда.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-300">In addition toohello data for that log file, hello table entries contain EventTickCount, DeploymentId, Role, and RoleInstance toohelp you identify what virtual machine and role generated hello data and when.</span></span> 
   
   | <span data-ttu-id="f6f3c-301">Диагностические данные</span><span class="sxs-lookup"><span data-stu-id="f6f3c-301">Diagnostic data</span></span> | <span data-ttu-id="f6f3c-302">Описание</span><span class="sxs-lookup"><span data-stu-id="f6f3c-302">Description</span></span> | <span data-ttu-id="f6f3c-303">Расположение</span><span class="sxs-lookup"><span data-stu-id="f6f3c-303">Location</span></span> |
   | --- | --- | --- |
   | <span data-ttu-id="f6f3c-304">Журналы приложений</span><span class="sxs-lookup"><span data-stu-id="f6f3c-304">Application Logs</span></span> |<span data-ttu-id="f6f3c-305">Журналы, создаваемые в коде путем вызова методов класса System.Diagnostics.Trace hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-305">Logs that your code generates by calling methods of hello System.Diagnostics.Trace class.</span></span> |<span data-ttu-id="f6f3c-306">WADLogsTable</span><span class="sxs-lookup"><span data-stu-id="f6f3c-306">WADLogsTable</span></span> |
   | <span data-ttu-id="f6f3c-307">журналы событий;</span><span class="sxs-lookup"><span data-stu-id="f6f3c-307">Event Logs</span></span> |<span data-ttu-id="f6f3c-308">Эти данные являются из журналов событий Windows hello на виртуальных машинах hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-308">This data is from hello Windows event logs on hello virtual machines.</span></span> <span data-ttu-id="f6f3c-309">В этих журналах хранит информацию ОС Windows, но приложения и службы также использовать их tooreport ошибки и сведений.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-309">Windows stores information in these logs, but applications and services also use them tooreport errors or log information.</span></span> |<span data-ttu-id="f6f3c-310">WADWindowsEventLogsTable</span><span class="sxs-lookup"><span data-stu-id="f6f3c-310">WADWindowsEventLogsTable</span></span> |
   | <span data-ttu-id="f6f3c-311">Счетчики производительности</span><span class="sxs-lookup"><span data-stu-id="f6f3c-311">Performance Counters</span></span> |<span data-ttu-id="f6f3c-312">Можно собирать данные любого счетчика производительности, который доступен на виртуальной машине hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-312">You can collect data on any performance counter that’s available on hello virtual machine.</span></span> <span data-ttu-id="f6f3c-313">Hello операционная система предоставляет счетчики производительности, предоставляющие всевозможные статистические данные, например памяти использования и время процессора.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-313">hello operating system provides performance counters, which include many statistics such as memory usage and processor time.</span></span> |<span data-ttu-id="f6f3c-314">WADPerformanceCountersTable</span><span class="sxs-lookup"><span data-stu-id="f6f3c-314">WADPerformanceCountersTable</span></span> |
   | <span data-ttu-id="f6f3c-315">Журналы инфраструктуры</span><span class="sxs-lookup"><span data-stu-id="f6f3c-315">Infrastructure Logs</span></span> |<span data-ttu-id="f6f3c-316">Эти журналы формируются самой инфраструктурой диагностики hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-316">These logs are generated from hello diagnostics infrastructure itself.</span></span> |<span data-ttu-id="f6f3c-317">WADDiagnosticInfrastructureLogsTable</span><span class="sxs-lookup"><span data-stu-id="f6f3c-317">WADDiagnosticInfrastructureLogsTable</span></span> |
   | <span data-ttu-id="f6f3c-318">Журналы IIS</span><span class="sxs-lookup"><span data-stu-id="f6f3c-318">IIS Logs</span></span> |<span data-ttu-id="f6f3c-319">В эти журналы записываются веб-запросы.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-319">These logs record web requests.</span></span> <span data-ttu-id="f6f3c-320">Если в облачную службу приходит очень много запросов, эти журналы могут быть довольно длинными, поэтому собирать и хранить их следует только при необходимости.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-320">If your cloud service gets a significant amount of traffic, these logs can be quite lengthy, so you should collect and store this data only when you need it.</span></span> |<span data-ttu-id="f6f3c-321">Можно найти журналы неудачных запросов в hello BLOB-контейнере wad-iis-failedreqlogs пути для этого развертывания, роли и экземпляра.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-321">You can find failed-request logs in hello blob container under wad-iis-failedreqlogs under a path for that deployment, role, and instance.</span></span> <span data-ttu-id="f6f3c-322">Полные журналы вы найдете в папке wad-iis-logfiles.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-322">You can find complete logs under wad-iis-logfiles.</span></span> <span data-ttu-id="f6f3c-323">Было сделано записей для каждого файла в таблицу WADDirectories hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-323">Entries for each file are made in hello WADDirectories table.</span></span> |
   | <span data-ttu-id="f6f3c-324">Аварийные дампы</span><span class="sxs-lookup"><span data-stu-id="f6f3c-324">Crash dumps</span></span> |<span data-ttu-id="f6f3c-325">Эта информация содержит двоичные образы процесса облачной службы (обычно рабочей роли).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-325">This information provides binary images of your cloud service’s process (typically a worker role).</span></span> |<span data-ttu-id="f6f3c-326">Контейнер больших двоичных объектов wad-crush-dumps</span><span class="sxs-lookup"><span data-stu-id="f6f3c-326">wad-crush-dumps blob container</span></span> |
   | <span data-ttu-id="f6f3c-327">Файлы пользовательских журналов</span><span class="sxs-lookup"><span data-stu-id="f6f3c-327">Custom log files</span></span> |<span data-ttu-id="f6f3c-328">Настроенные вами журналы.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-328">Logs of data that you predefined.</span></span> |<span data-ttu-id="f6f3c-329">Можно указать в расположение кода hello пользовательские файлы журналов в учетной записи.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-329">You can specify in code hello location of custom log files in your storage account.</span></span> <span data-ttu-id="f6f3c-330">например указать для них пользовательский контейнер больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-330">For example, you can specify a custom blob container.</span></span> |
4. <span data-ttu-id="f6f3c-331">При усечении данных любого типа можно попробовать возрастания hello буфера для этого типа данных или сокращение hello интервал между передачами данных из учетной записи хранения tooyour виртуальной машины hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-331">If data of any type is truncated, you can try increasing hello buffer for that data type or shortening hello interval between transfers of data from hello virtual machine tooyour storage account.</span></span>
5. <span data-ttu-id="f6f3c-332">(необязательно) Удаляйте данные из хранилища hello учетной записи иногда tooreduce общих затрат на хранение.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-332">(optional) Purge data from hello storage account occasionally tooreduce overall storage costs.</span></span>
6. <span data-ttu-id="f6f3c-333">При выполнении полного развертывания файл hello diagnostics.cscfg (wadcfgx для пакета Azure SDK 2.5) обновляется в Azure, и облачная служба принимает все конфигурации диагностики tooyour изменения.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-333">When you do a full deployment, hello diagnostics.cscfg file (.wadcfgx for Azure SDK 2.5) is updated in Azure, and your cloud service picks up any changes tooyour diagnostics configuration.</span></span> <span data-ttu-id="f6f3c-334">Если вместо этого вы, обновление существующего развертывания, в Azure не обновляется hello cscfg-файле.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-334">If you, instead, update an existing deployment, hello .cscfg file isn’t updated in Azure.</span></span> <span data-ttu-id="f6f3c-335">Параметры диагностики по-прежнему можно изменить, выполнив указанные ниже действия hello в следующем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-335">You can still change diagnostics settings, though, by following hello steps in hello next section.</span></span> <span data-ttu-id="f6f3c-336">Дополнительные сведения о полном развертывании и обновлении существующего развертывания см. в статье [Мастер публикации приложений Azure](vs-azure-tools-publish-azure-application-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-336">For more information about performing a full deployment and updating an existing deployment, see [Publish Azure Application Wizard](vs-azure-tools-publish-azure-application-wizard.md).</span></span>

### <a name="tooview-virtual-machine-diagnostics-data"></a><span data-ttu-id="f6f3c-337">данные диагностики tooview виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="f6f3c-337">tooview virtual machine diagnostics data</span></span>
1. <span data-ttu-id="f6f3c-338">Hello контекстное меню для hello виртуальной машины выберите **Просмотр данных диагностики**.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-338">On hello shortcut menu for hello virtual machine, choose **View Diagnostics Data**.</span></span>
   
    ![Просмотр диагностических данных на виртуальной машине Azure](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC766027.png)
   
    <span data-ttu-id="f6f3c-340">При этом откроется hello **Сводка по диагностике** окна.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-340">This opens hello **Diagnostics summary** window.</span></span>
   
    ![Сводка по диагностическим данным виртуальной машины](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC796667.png)  
   
    <span data-ttu-id="f6f3c-342">Если hello самых последних данных не отображается, может потребоваться toowait для tooelapse периода передачи hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-342">If hello most recent data doesn't appear, you might have toowait for hello transfer period tooelapse.</span></span>
   
    <span data-ttu-id="f6f3c-343">Выберите hello **обновление** связь данных hello tooimmediately обновления, или выберите интервал в hello **автообновления** раскрывающегося списка поле toohave hello автоматического обновления данных.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-343">Choose hello **Refresh** link tooimmediately update hello data, or choose an interval in hello **Auto-Refresh** dropdown list box toohave hello data updated automatically.</span></span> <span data-ttu-id="f6f3c-344">данные об ошибках tooexport hello, выберите hello **Экспорт tooCSV** toocreate кнопку CSV-файл, можно открыть в электронной таблице.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-344">tooexport hello error data, choose hello **Export tooCSV** button toocreate a comma-separated value file you can open in a spreadsheet.</span></span>

## <a name="configure-cloud-service-diagnostics-after-deployment"></a><span data-ttu-id="f6f3c-345">Настройка диагностики облачной службы после развертывания</span><span class="sxs-lookup"><span data-stu-id="f6f3c-345">Configure cloud service diagnostics after deployment</span></span>
<span data-ttu-id="f6f3c-346">Если выполняется анализ проблемы с облачной службой, уже выполняется, может потребоваться toocollect данные, которые не были указаны перед изначально развернутое приложение hello роли.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-346">If you're investigating a problem with a cloud service that already running, you might want toocollect data that you didn't specify before you originally deployed hello role.</span></span> <span data-ttu-id="f6f3c-347">В этом случае можно сначала toocollect эти данные с помощью параметров hello в обозревателе серверов.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-347">In this case, you can start toocollect that data by using hello settings in Server Explorer.</span></span> <span data-ttu-id="f6f3c-348">Можно настроить диагностику для одного экземпляра или все экземпляры hello в роли, нужно открыть диалоговое окно конфигурации диагностики hello hello контекстном меню для hello экземпляра или роли hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-348">You can configure diagnostics for either a single instance or all hello instances in a role, depending on whether you open hello Diagnostics Configuration dialog box from hello shortcut menu for hello instance or hello role.</span></span> <span data-ttu-id="f6f3c-349">При настройке узла роли Привет, вносимые изменения применяются tooall экземпляров.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-349">If you configure hello role node, any changes apply tooall instances.</span></span> <span data-ttu-id="f6f3c-350">При настройке узла экземпляра Привет, вносимые изменения применяются только toothat экземпляр.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-350">If you configure hello instance node, any changes apply toothat instance only.</span></span>

### <a name="tooconfigure-diagnostics-for-a-running-cloud-service"></a><span data-ttu-id="f6f3c-351">tooconfigure диагностики для работающей облачной службы</span><span class="sxs-lookup"><span data-stu-id="f6f3c-351">tooconfigure diagnostics for a running cloud service</span></span>
1. <span data-ttu-id="f6f3c-352">В обозревателе серверов разверните hello **облачные службы** узел, а затем разверните узлы toolocate hello роли или экземпляра, что требуется tooinvestigate или оба.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-352">In Server Explorer, expand hello **Cloud Services** node, and then expand nodes toolocate hello role or instance that you want tooinvestigate or both.</span></span>
   
    ![Настройка системы диагностики](./media/vs-azure-tools-diagnostics-for-cloud-services-and-virtual-machines/IC748913.png)
2. <span data-ttu-id="f6f3c-354">Hello контекстного меню для узла экземпляра или роли, выберите **обновить параметры диагностики**и выберите параметры диагностики, которые должны toocollect hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-354">On hello shortcut menu for an instance node or a role node, choose **Update Diagnostics Settings**, and then choose hello diagnostic settings that you want toocollect.</span></span>
   
    <span data-ttu-id="f6f3c-355">Сведения о параметрах конфигурации hello см. в разделе **настройки источников данных диагностики** в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-355">For information about hello configuration settings, see **Configure diagnostics data sources** in this topic.</span></span> <span data-ttu-id="f6f3c-356">Сведения о как tooview hello диагностических данных см. в разделе **Просмотр данных диагностики hello** в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-356">For information about how tooview hello diagnostics data, see **View hello diagnostics data** in this topic.</span></span>
   
    <span data-ttu-id="f6f3c-357">Когда вы изменяете настройки сбора данных в **обозревателе сервера**, эти изменения остаются в силе до следующего полного развертывания облачной службы.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-357">If you change data collection in **Server Explorer**, these changes remain in effect until you fully redeploy your cloud service.</span></span> <span data-ttu-id="f6f3c-358">При использовании параметров публикации по умолчанию hello hello изменения не перезаписываются, с момента публикации по умолчанию hello задается tooupdate hello существующего развертывания, вместо выполнения полного повторного развертывания.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-358">If you use hello default publish settings, hello changes are not overwritten, since hello default publish setting is tooupdate hello existing deployment, rather than do a full redeployment.</span></span> <span data-ttu-id="f6f3c-359">убедиться, что параметры hello toomake были сброшены во время развертывания, последовательно выберите toohello **Дополнительные параметры** на вкладке мастера публикации hello и очистить hello **обновление развертывания** флажок.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-359">toomake sure hello settings clear at deployment time, go toohello **Advanced Settings** tab in hello Publish wizard and clear hello **Deployment update** checkbox.</span></span> <span data-ttu-id="f6f3c-360">При повторном развертывании этот флажок снят, параметры hello возвращаются toothose в файле .wadcfgx (или .wadcfg) hello, как задается с помощью редактора свойств hello для роли hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-360">When you redeploy with that checkbox cleared, hello settings revert toothose in hello .wadcfgx (or .wadcfg) file as set through hello Properties editor for hello role.</span></span> <span data-ttu-id="f6f3c-361">При обновлении развертывания Azure сохраняет старые параметры hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-361">If you update your deployment, Azure keeps hello old settings.</span></span>

## <a name="troubleshoot-azure-cloud-service-issues"></a><span data-ttu-id="f6f3c-362">Устранение неполадок облачной службы Azure</span><span class="sxs-lookup"><span data-stu-id="f6f3c-362">Troubleshoot Azure cloud service issues</span></span>
<span data-ttu-id="f6f3c-363">При возникновении проблем с проектами облачных служб, таких как роли, которая возвращает находится в состоянии «занято», повторяющемся цикле или вызывает ошибку внутреннего сервера, существуют средства и методы можно использовать toodiagnose и устранить эти проблемы.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-363">If you experience problems with your cloud service projects, such as a role that gets stuck in a "busy" status, repeatedly recycles, or throws an internal server error, there are tools and techniques you can use toodiagnose and fix these problems.</span></span> <span data-ttu-id="f6f3c-364">Конкретные примеры стандартных проблем и решений, а также общие сведения о концепции hello и средства, используемые toodiagnose и исправления таких ошибок см. в разделе [Azure диагностические данные PaaS](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-364">For specific examples of common problems and solutions, as well as an overview of hello concepts and tools used toodiagnose and fix such errors, see [Azure PaaS Compute Diagnostics Data](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span></span>

## <a name="q--a"></a><span data-ttu-id="f6f3c-365">Вопросы и ответы</span><span class="sxs-lookup"><span data-stu-id="f6f3c-365">Q & A</span></span>
<span data-ttu-id="f6f3c-366">**Что такое размер буфера hello и размер должен быть его?**</span><span class="sxs-lookup"><span data-stu-id="f6f3c-366">**What is hello buffer size, and how large should it be?**</span></span>

<span data-ttu-id="f6f3c-367">На каждом экземпляре виртуальной машины квоты ограничивают объем диагностических данных могут храниться в локальной файловой системе hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-367">On each virtual machine instance, quotas limit how much diagnostic data can be stored on hello local file system.</span></span> <span data-ttu-id="f6f3c-368">Кроме того, вы определяете размер буфера для каждого доступного типа диагностических данных.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-368">In addition, you specify a buffer size for each type of diagnostic data that's available.</span></span> <span data-ttu-id="f6f3c-369">Этот буфер выполняет роль индивидуальной квоты для соответствующего типа данных.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-369">This buffer size acts like an individual quota for that type of data.</span></span> <span data-ttu-id="f6f3c-370">Проверив hello внизу диалоговое окно «hello», можно определить hello общей квоты и hello объем памяти, который остается.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-370">By checking hello bottom of hello dialog box, you can determine hello overall quota and hello amount of memory that remains.</span></span> <span data-ttu-id="f6f3c-371">Если задать буферы большего размера или большее количество типов данных, можно превысить общую квоту hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-371">If you specify larger buffers or more types of data, you'll approach hello overall quota.</span></span> <span data-ttu-id="f6f3c-372">Вы можете изменить hello общей квоты, изменив файл конфигурации diagnostics.wadcfg/.wadcfgx hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-372">You can change hello overall quota by modifying hello diagnostics.wadcfg/.wadcfgx configuration file.</span></span> <span data-ttu-id="f6f3c-373">данные хранятся на диагностики Hello hello же файловой данных приложения, поэтому если приложение использует много места на диске, не рекомендуется увеличивать hello общей квоты диагностики.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-373">hello diagnostics data is stored on hello same filesystem as your application’s data, so if your application uses a lot of disk space, you shouldn’t increase hello overall diagnostics quota.</span></span>

<span data-ttu-id="f6f3c-374">**Что такое период передачи hello, и как долго он должен быть?**</span><span class="sxs-lookup"><span data-stu-id="f6f3c-374">**What is hello transfer period, and how long should it be?**</span></span>

<span data-ttu-id="f6f3c-375">период передачи Hello — hello количество времени, которое проходит между записью данных.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-375">hello transfer period is hello amount of time that elapses between data captures.</span></span> <span data-ttu-id="f6f3c-376">После каждого периода передачи данные перемещаются из hello локальной файловой системе на виртуальной машине tootables вашей учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-376">After each transfer period, data is moved from hello local filesystem on a virtual machine tootables in your storage account.</span></span> <span data-ttu-id="f6f3c-377">Если hello объем собранных данных превышает квоту hello до окончания периода передачи hello, старые данные удаляются.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-377">If hello amount of data that's collected exceeds hello quota before hello end of a transfer period, older data is discarded.</span></span> <span data-ttu-id="f6f3c-378">Период передачи hello toodecrease может возникнуть, если потери данных из-за данных превышает размер буфера hello или hello общей квоты.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-378">You might want toodecrease hello transfer period if you're losing data because your data exceeds hello buffer size or hello overall quota.</span></span>

<span data-ttu-id="f6f3c-379">**Время какого часового пояса, hello отметки времени в?**</span><span class="sxs-lookup"><span data-stu-id="f6f3c-379">**What time zone are hello time stamps in?**</span></span>

<span data-ttu-id="f6f3c-380">Hello отметках времени указывается в местном часовом поясе hello hello центра обработки данных, на котором размещена облачной службы.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-380">hello time stamps are in hello local time zone of hello data center that hosts your cloud service.</span></span> <span data-ttu-id="f6f3c-381">Hello следующие три столбца отметки времени в таблицах журнала hello используются.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-381">hello following three timestamp columns in hello log tables are used.</span></span>

* <span data-ttu-id="f6f3c-382">**PreciseTimeStamp** значение является меткой времени трассировки событий Windows hello hello событий.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-382">**PreciseTimeStamp** is hello ETW timestamp of hello event.</span></span> <span data-ttu-id="f6f3c-383">То есть hello время hello событие регистрируется из клиента hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-383">That is, hello time hello event is logged from hello client.</span></span>
* <span data-ttu-id="f6f3c-384">**Отметка времени** PreciseTimeStamp округляется вниз toohello границы частоты передачи.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-384">**TIMESTAMP** is PreciseTimeStamp rounded down toohello upload frequency boundary.</span></span> <span data-ttu-id="f6f3c-385">Таким образом Если частота передачи — 5 минут до события hello время 00:17:12, отметка времени будет 00:15:00.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-385">So, if your upload frequency is 5 minutes and hello event time 00:17:12, TIMESTAMP will be 00:15:00.</span></span>
* <span data-ttu-id="f6f3c-386">**Отметка времени** временной метке hello, на какие hello сущность была создана в таблице Azure hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-386">**Timestamp** is hello timestamp at which hello entity was created in hello Azure table.</span></span>

<span data-ttu-id="f6f3c-387">**Как снизить затраты на сбор диагностической информации?**</span><span class="sxs-lookup"><span data-stu-id="f6f3c-387">**How do I manage costs when collecting diagnostic information?**</span></span>

<span data-ttu-id="f6f3c-388">Hello параметры по умолчанию (**уровень ведения журнала** значение слишком**ошибка** и **период передачи** значение слишком**1 минута**), разработанные toominimize затрат.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-388">hello default settings (**Log level** set too**Error** and **Transfer period** set too**1 minute**) are designed toominimize cost.</span></span> <span data-ttu-id="f6f3c-389">Затраты будут выше, если сбор дополнительных данных диагностики или уменьшить период передачи hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-389">Your compute costs will increase if you collect more diagnostic data or decrease hello transfer period.</span></span> <span data-ttu-id="f6f3c-390">Не собирать больше данных, чем требуется и не забывайте toodisable сбора данных, когда она больше не нужна.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-390">Don’t collect more data than you need, and don’t forget toodisable data collection when you no longer need it.</span></span> <span data-ttu-id="f6f3c-391">Можно всегда включить его снова, даже во время выполнения, как показано в предыдущем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-391">You can always enable it again, even at runtime, as shown in hello previous section.</span></span>

<span data-ttu-id="f6f3c-392">**Как собирать журналы неудачных запросов службы IIS?**</span><span class="sxs-lookup"><span data-stu-id="f6f3c-392">**How do I collect failed-request logs from IIS?**</span></span>

<span data-ttu-id="f6f3c-393">По умолчанию службы IIS не собирают журналы неудачных запросов.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-393">By default, IIS doesn’t collect failed-request logs.</span></span> <span data-ttu-id="f6f3c-394">Вы можете настроить IIS toocollect их при редактировании hello файл web.config для веб-роли.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-394">You can configure IIS toocollect them if you edit hello web.config file for your web role.</span></span>

<span data-ttu-id="f6f3c-395">**Я не получаю сведения о трассировке от методов RoleEntryPoint, например OnStart. Что не так?**</span><span class="sxs-lookup"><span data-stu-id="f6f3c-395">**I’m not getting trace information from RoleEntryPoint methods like OnStart. What’s wrong?**</span></span>

<span data-ttu-id="f6f3c-396">Hello методы RoleEntryPoint вызываются в контексте WAIISHost.exe, не IIS hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-396">hello methods of RoleEntryPoint are called in hello context of WAIISHost.exe, not IIS.</span></span> <span data-ttu-id="f6f3c-397">Таким образом hello сведения о конфигурации в файле web.config, который обычно включает трассировку не применяется.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-397">Therefore, hello configuration information in web.config that normally enables tracing doesn’t apply.</span></span> <span data-ttu-id="f6f3c-398">tooresolve эту проблему, добавьте файл .config tooyour веб-проект роли и имя hello файл toomatch hello выходной сборке, содержащей код RoleEntryPoint hello.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-398">tooresolve this issue, add a .config file tooyour web role project, and name hello file toomatch hello output assembly that contains hello RoleEntryPoint code.</span></span> <span data-ttu-id="f6f3c-399">В проект веб-роли по умолчанию для hello hello hello config-файл будет называться WAIISHost.exe.config. Затем добавьте следующие строки toothis файл hello:</span><span class="sxs-lookup"><span data-stu-id="f6f3c-399">In hello default web role project, hello name of hello .config file would be WAIISHost.exe.config. Then add hello following lines toothis file:</span></span>

```
<system.diagnostics>
  <trace>
      <listeners>
          <add name “AzureDiagnostics” type=”Microsoft.WindowsAzure.Diagnostics.DiagnosticMonitorTraceListener”>
              <filter type=”” />
          </add>
      </listeners>
  </trace>
</system.diagnostics>
```

<span data-ttu-id="f6f3c-400">Теперь в hello **свойства** окна, набор hello **скопируйте каталог tooOutput** свойство слишком**всегда Копировать**.</span><span class="sxs-lookup"><span data-stu-id="f6f3c-400">Now, in hello **Properties** window, set hello **Copy tooOutput Directory** property too**Copy always**.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f6f3c-401">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="f6f3c-401">Next steps</span></span>
<span data-ttu-id="f6f3c-402">toolearn Дополнительные сведения о Диагностика и ведение журнала в Azure, в разделе [включение диагностики в облачных службах Azure и виртуальных машин](cloud-services/cloud-services-dotnet-diagnostics.md) и [включить ведение журнала диагностики для веб-приложений в службе приложений Azure](app-service-web/web-sites-enable-diagnostic-log.md).</span><span class="sxs-lookup"><span data-stu-id="f6f3c-402">toolearn more about diagnostics logging in Azure, see [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](cloud-services/cloud-services-dotnet-diagnostics.md) and [Enable diagnostics logging for web apps in Azure App Service](app-service-web/web-sites-enable-diagnostic-log.md).</span></span>

