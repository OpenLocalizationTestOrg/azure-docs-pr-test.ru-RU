---
title: "руководство по aaaTroubleshooting для Azure Stream Analytics | Документы Microsoft"
description: "Как tootroubleshoot ваше задание Stream Analytics"
keywords: "руководство по устранению неполадок"
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: 4add48054e06a7d8eb617a08595c1be4555c59d2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshooting-guide-for-azure-stream-analytics"></a><span data-ttu-id="2ad9d-104">Руководство по устранению неполадок для Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2ad9d-104">Troubleshooting guide for Azure Stream Analytics</span></span>

<span data-ttu-id="2ad9d-105">Устранение неполадок Azure Stream Analytics может отображаться toobe более сложных усилий на первый взгляд.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-105">Azure Stream Analytics troubleshooting can appear toobe a complex effort at first glance.</span></span> <span data-ttu-id="2ad9d-106">После работы с большим числом пользователей, мы создали этот процесс hello оптимизировать toohelp руководства и удалите hello догадки о входов, выходов, запросы и функции.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-106">After working with many users, we have created this guide toohelp streamline hello process and remove hello guesswork about your inputs, outputs, queries, and functions.</span></span>

## <a name="troubleshoot-your-stream-analytics-job"></a><span data-ttu-id="2ad9d-107">Устранение неполадок в задании Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2ad9d-107">Troubleshoot your Stream Analytics job</span></span>

<span data-ttu-id="2ad9d-108">Для получения наилучших результатов при устранении неполадок в задание Stream Analytics используйте hello, следование правилам:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-108">For best results in troubleshooting your Stream Analytics job, use hello following guidelines:</span></span>

1.  <span data-ttu-id="2ad9d-109">Проверьте подключение:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-109">Test your connectivity:</span></span>
    - <span data-ttu-id="2ad9d-110">Проверьте подключение tooinputs и выходные данные с помощью hello **проверить подключение** кнопка для каждого входа и выхода.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-110">Verify connectivity tooinputs and outputs by using hello **Test Connection** button for each input and output.</span></span>

2.  <span data-ttu-id="2ad9d-111">Проверьте входные данные:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-111">Examine your input data:</span></span>
    - <span data-ttu-id="2ad9d-112">tooverify входных данных, поступающих в концентратор событий, используйте [обозревателя Service Bus](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a) tooconnect tooAzure концентратора событий (если используется концентратора событий ввода).</span><span class="sxs-lookup"><span data-stu-id="2ad9d-112">tooverify that input data is flowing into Event Hub, use [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a) tooconnect tooAzure Event Hub (if Event Hub input is used).</span></span>  
    - <span data-ttu-id="2ad9d-113">Используйте hello [ **образец данных** ](stream-analytics-sample-data-input.md) кнопку для каждого входа и загрузку данных hello выборки входных данных.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-113">Use hello [**Sample Data**](stream-analytics-sample-data-input.md) button for each input, and download hello input sample data.</span></span>
    - <span data-ttu-id="2ad9d-114">Проверить форму hello образец данных toounderstand hello данных hello: hello схемы и hello [типы данных](https://msdn.microsoft.com/library/azure/dn835065.aspx).</span><span class="sxs-lookup"><span data-stu-id="2ad9d-114">Inspect hello sample data toounderstand hello shape of hello data: hello schema and hello [data types](https://msdn.microsoft.com/library/azure/dn835065.aspx).</span></span>

3.  <span data-ttu-id="2ad9d-115">Проверьте запрос:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-115">Test your query:</span></span>
    - <span data-ttu-id="2ad9d-116">На hello **запроса** используйте hello **тестирования** кнопку tootest hello запроса и использовать образцы данных загружаются hello слишком[проверка hello запроса](stream-analytics-test-query.md).</span><span class="sxs-lookup"><span data-stu-id="2ad9d-116">On hello **Query** tab, use hello **Test** button tootest hello query, and use hello downloaded sample data too[test hello query](stream-analytics-test-query.md).</span></span> <span data-ttu-id="2ad9d-117">Просмотрите все ошибки и повторите попытку toocorrect их.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-117">Examine any errors and attempt toocorrect them.</span></span>
    - <span data-ttu-id="2ad9d-118">Если вы используете [ **Timestamp By**](https://msdn.microsoft.com/library/azure/mt573293.aspx), убедитесь, что события hello отметки времени больше, чем hello [время начала задания](stream-analytics-out-of-order-and-late-events.md).</span><span class="sxs-lookup"><span data-stu-id="2ad9d-118">If you use [**Timestamp By**](https://msdn.microsoft.com/library/azure/mt573293.aspx), verify that hello events have timestamps greater than hello [job start time](stream-analytics-out-of-order-and-late-events.md).</span></span>

4.  <span data-ttu-id="2ad9d-119">Выполните отладку запроса:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-119">Debug your query:</span></span>
    - <span data-ttu-id="2ad9d-120">Перестройте hello запрос последовательно из сложные агрегаты toomore простой инструкции select с помощью действия.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-120">Rebuild hello query progressively from simple select statement toomore complex aggregates by using steps.</span></span> <span data-ttu-id="2ad9d-121">использовать toobuild копирование логику запроса hello шаг за шагом, [WITH](https://msdn.microsoft.com/library/azure/dn835049.aspx) предложения.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-121">toobuild up hello query logic step by step, use [WITH](https://msdn.microsoft.com/library/azure/dn835049.aspx) clauses.</span></span>
    - <span data-ttu-id="2ad9d-122">Используйте [SELECT INTO](stream-analytics-select-into.md) toodebug действия запроса.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-122">Use [SELECT INTO](stream-analytics-select-into.md) toodebug query steps.</span></span>

5.  <span data-ttu-id="2ad9d-123">Исключите типичные проблемы, например:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-123">Eliminate common pitfalls, such as:</span></span>
    - <span data-ttu-id="2ad9d-124">Объект [ **ГДЕ** ](https://msdn.microsoft.com/library/azure/dn835048.aspx) предложение в запросе hello отфильтровываются все события, предотвращая создаваемого никаких выходных данных.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-124">A [**WHERE**](https://msdn.microsoft.com/library/azure/dn835048.aspx) clause in hello query filtered out all events, preventing any output from being generated.</span></span>
    - <span data-ttu-id="2ad9d-125">При использовании функции окна, дождитесь toosee длительность всего содержимого окна hello выходные данные из запроса hello.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-125">When you use window functions, wait for hello entire window duration toosee an output from hello query.</span></span>
    - <span data-ttu-id="2ad9d-126">Hello отметки времени для событий предшествует времени начала задания hello и, таким образом, события отбрасываются.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-126">hello timestamp for events precedes hello job start time and, therefore, events are being dropped.</span></span>

6.  <span data-ttu-id="2ad9d-127">Используйте упорядочивание событий:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-127">Use event ordering:</span></span>
    - <span data-ttu-id="2ad9d-128">Если все hello предыдущие шаги работал правильно, переходите toohello **параметры** и выберите [ **воспроизведении порядок возникновения событий**](stream-analytics-out-of-order-and-late-events.md).</span><span class="sxs-lookup"><span data-stu-id="2ad9d-128">If all hello previous steps worked fine, go toohello **Settings** blade and select [**Event Ordering**](stream-analytics-out-of-order-and-late-events.md).</span></span> <span data-ttu-id="2ad9d-129">Убедитесь, что эта политика настроена для требуемых элементов сценария.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-129">Verify that this policy is configured for what makes sense in your scenario.</span></span> <span data-ttu-id="2ad9d-130">политика Hello *не* применяется при использовании hello **тест** кнопку tootest hello запроса.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-130">hello policy is *not* applied when you use hello **Test** button tootest hello query.</span></span> <span data-ttu-id="2ad9d-131">Этот результат является одним из различий между тестирование в браузере и запуск задания hello в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-131">This result is one difference between testing in-browser versus running hello job in production.</span></span>

7.  <span data-ttu-id="2ad9d-132">Выполните отладку с использованием метрик:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-132">Debug by using metrics:</span></span>
    - <span data-ttu-id="2ad9d-133">Если получить выходные данные после hello Ожидаемая длительность, (на основе hello запроса), попробуйте следующие hello.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-133">If you obtain no output after hello expected duration (based on hello query), try hello following:</span></span>
        - <span data-ttu-id="2ad9d-134">Посмотрите на [ **мониторинг метрик** ](stream-analytics-monitoring.md) на hello **монитор** вкладки. Поскольку hello значения суммируются, метрики hello задерживаются на несколько минут.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-134">Look at [**Monitoring Metrics**](stream-analytics-monitoring.md) on hello **Monitor** tab. Because hello values are aggregated, hello metrics are delayed by a few minutes.</span></span>
            - <span data-ttu-id="2ad9d-135">Если входных событий > 0, hello задания — может tooread входных данных.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-135">If Input Events > 0, hello job is able tooread input data.</span></span> <span data-ttu-id="2ad9d-136">Если значение параметра "Входные события" меньше 0, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-136">If Input Events is not > 0, then:</span></span>
                - <span data-ttu-id="2ad9d-137">toosee ли источник данных hello содержит допустимые данные, проверьте его с помощью [обозревателя Service Bus](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a).</span><span class="sxs-lookup"><span data-stu-id="2ad9d-137">toosee whether hello data source has valid data, check it by using [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a).</span></span> <span data-ttu-id="2ad9d-138">Эта проверка применяется, если задание hello использует концентратора событий в качестве входных данных.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-138">This check applies if hello job is using Event Hub as input.</span></span>
                - <span data-ttu-id="2ad9d-139">Проверьте наличие toosee формат сериализации данных hello и кодировки данных соответствуют ожидаемым.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-139">Check toosee whether hello data serialization format and data encoding are as expected.</span></span>
                - <span data-ttu-id="2ad9d-140">Если задание hello использует концентратора событий, проверьте наличие toosee hello тело сообщения hello *Null*.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-140">If hello job is using an Event Hub, check toosee whether hello body of hello message is *Null*.</span></span>
            - <span data-ttu-id="2ad9d-141">Если ошибки преобразования данных может > 0 и экстремума выполняться hello следующие условия:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-141">If Data Conversion Errors > 0 and climbing, hello following might be true:</span></span>
                - <span data-ttu-id="2ad9d-142">Hello задания могут быть может toode-сериализации событий hello.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-142">hello job might not be able toode-serialize hello events.</span></span>
                - <span data-ttu-id="2ad9d-143">Hello схема событий может не совпадать с определенных hello или Ожидаемая схема событий hello в запросе hello.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-143">hello event schema might not match hello defined or expected schema of hello events in hello query.</span></span>
                - <span data-ttu-id="2ad9d-144">типы данных Hello некоторых hello полями hello события могут не соответствовать ожиданиям.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-144">hello datatypes of some of hello fields in hello event might not match expectations.</span></span>
            - <span data-ttu-id="2ad9d-145">Если ошибки времени выполнения > 0, это означает hello задания может получать данные hello, но выдает ошибки при обработке запроса hello.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-145">If Runtime Errors > 0, it means that hello job can receive hello data but is generating errors while processing hello query.</span></span>
                - <span data-ttu-id="2ad9d-146">ошибки toofind hello, последовательно выберите toohello [журналы аудита](../azure-resource-manager/resource-group-audit.md) и фильтрацию по *сбой* состояния.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-146">toofind hello errors, go toohello [Audit Logs](../azure-resource-manager/resource-group-audit.md) and filter on *Failed* status.</span></span>
            - <span data-ttu-id="2ad9d-147">Если InputEvents > 0 и OutputEvents = 0, означает, что одно из следующих hello имеет значение true:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-147">If InputEvents > 0 and OutputEvents = 0, it means that one of hello following is true:</span></span>
                - <span data-ttu-id="2ad9d-148">В результате обработки исходящие события не получены.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-148">Query processing resulted in zero output events.</span></span>
                - <span data-ttu-id="2ad9d-149">События или его поля могут быть повреждены, и выходные события после обработки запроса не получены.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-149">Events or its fields might be malformed, resulting in zero output after query processing.</span></span>
                - <span data-ttu-id="2ad9d-150">Задание Hello был toohello данных не удается toopush [приемником потока](stream-analytics-select-into.md) в целях подключения или проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-150">hello job was unable toopush data toohello [output sink](stream-analytics-select-into.md) for connectivity or authentication reasons.</span></span>
        - <span data-ttu-id="2ad9d-151">В hello всех упомянутых выше случаях ошибка операции, сообщения журнала приводятся дополнительные сведения, включая выполняемых, за исключением случаев, когда логику запроса hello исключены все события.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-151">In all hello previously mentioned error cases, operations log messages explain additional details (including what is happening), except in cases where hello query logic filtered out all events.</span></span> <span data-ttu-id="2ad9d-152">Если hello обработки нескольких событий приводит к возникновению ошибки, регистрирует журналы hello первые три сообщения об ошибках из того же типа, в течение 10 минут tooOperations hello Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-152">If hello processing of multiple events generates errors, Stream Analytics logs hello first three error messages of hello same type within 10 minutes tooOperations logs.</span></span> <span data-ttu-id="2ad9d-153">Затем дополнительные сообщения об идентичных ошибках скрываются, и появляется сообщение о том, что ошибки возникают слишком быстро, поэтому сообщения о них скрываются.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-153">It then suppresses additional identical errors with a message that reads “Errors are happening too rapidly, these are being suppressed.”</span></span>

8. <span data-ttu-id="2ad9d-154">Выполните отладку с помощью журналов аудита и диагностики:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-154">Debug by using audit and diagnostic logs:</span></span>
    - <span data-ttu-id="2ad9d-155">Используйте [журналы аудита](../azure-resource-manager/resource-group-audit.md)и ошибки фильтра tooidentify и отладки.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-155">Use [Audit Logs](../azure-resource-manager/resource-group-audit.md), and filter tooidentify and debug errors.</span></span>
    - <span data-ttu-id="2ad9d-156">Используйте [журналы диагностики задания](stream-analytics-job-diagnostic-logs.md) ошибки tooidentify и отладки.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-156">Use [job diagnostic logs](stream-analytics-job-diagnostic-logs.md) tooidentify and debug errors.</span></span>

9. <span data-ttu-id="2ad9d-157">Проверьте выходные данные hello:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-157">Examine hello outputs:</span></span>
    - <span data-ttu-id="2ad9d-158">Когда hello задание находится в состоянии *под управлением*, в зависимости от длительности hello, оговорено в запросе hello вывод hello в источнике данных приемник hello.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-158">When hello job status is *Running*, depending on hello duration that's stipulated in hello query, you can see hello output in hello sink data source.</span></span>
    - <span data-ttu-id="2ad9d-159">Если невозможно просмотреть выходные данные, которые будут tooa специальные выходные данные типа, перенаправлять их tooan тип выходных данных, менее сложна, такие как BLOB-объект Azure.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-159">If you cannot see outputs that are going tooa specific output type, redirect them tooan output type that is less complex, such as an Azure Blob.</span></span> <span data-ttu-id="2ad9d-160">С помощью обозревателя хранилищ, проверьте наличие toosee hello выходные данные будут видны.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-160">By using Storage Explorer, check toosee whether hello output can be seen.</span></span> <span data-ttu-id="2ad9d-161">Кроме того проверьте ли ограничения регулирования с выхода hello препятствуют получению данных.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-161">Additionally, verify whether throttling limits at hello output are preventing data from being received.</span></span>

10. <span data-ttu-id="2ad9d-162">Используйте анализ потока данных с помощью метрик схемы заданий:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-162">Use data-flow analysis with job diagram metrics:</span></span>
    - <span data-ttu-id="2ad9d-163">потока данных tooanalyze и идентифицировать проблемы, используйте hello [задания диаграмма с метриками](stream-analytics-job-diagram-with-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="2ad9d-163">tooanalyze data flow and identify issues, use hello [job diagram with metrics](stream-analytics-job-diagram-with-metrics.md).</span></span>

11. <span data-ttu-id="2ad9d-164">Отправьте запрос в службу поддержки:</span><span class="sxs-lookup"><span data-stu-id="2ad9d-164">Open a support case:</span></span>
    - <span data-ttu-id="2ad9d-165">Наконец Если ничего не поможет, откройте обращение в службу поддержки корпорации Майкрософт с помощью hello SubscriptionID, содержащий задание.</span><span class="sxs-lookup"><span data-stu-id="2ad9d-165">Finally, if all else fails, open a Microsoft support case by using hello SubscriptionID that contains your job.</span></span>

## <a name="get-help"></a><span data-ttu-id="2ad9d-166">Получение справки</span><span class="sxs-lookup"><span data-stu-id="2ad9d-166">Get help</span></span>

<span data-ttu-id="2ad9d-167">За дополнительной помощью обращайтесь на наш [форум Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="2ad9d-167">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="2ad9d-168">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="2ad9d-168">Next steps</span></span>

* [<span data-ttu-id="2ad9d-169">Введение tooAzure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2ad9d-169">Introduction tooAzure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="2ad9d-170">Приступая к работе с Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2ad9d-170">Get started using Azure Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="2ad9d-171">Масштабирование заданий в службе Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2ad9d-171">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="2ad9d-172">Справочник по языку запросов Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2ad9d-172">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="2ad9d-173">Справочник по API-интерфейсу REST управления Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="2ad9d-173">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
