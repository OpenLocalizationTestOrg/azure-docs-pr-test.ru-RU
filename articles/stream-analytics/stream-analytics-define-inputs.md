---
title: "Подключение данных: потоки входных данных из потока событий | Документация Майкрософт"
description: "Дополнительные сведения о настройке tooStream подключения данных аналитики, называется «входные данные». К входным данным относятся поток данных из событий, а также справочные данные."
keywords: "поток данных, подключение данных, поток событий"
services: stream-analytics
documentationcenter: 
author: samacha
manager: jhubbard
editor: cgronlun
ms.assetid: 8155823c-9dd8-4a6b-8393-34452d299b68
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 07/05/2017
ms.author: samacha
ms.openlocfilehash: be2008f159061c5c9be9d0314c27fa67193e3269
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="data-connection-learn-about-data-stream-inputs-from-events-toostream-analytics"></a>Подключение к данным: Дополнительные сведения о данных потока входных данных из события tooStream аналитика
Hello задания Stream Analytics tooa подключения данных представляет собой поток событий из источника данных, которым hello задания ссылка tooas *ввода*. Stream Analytics полностью интегрируется с источниками потоков данных Azure, включая [Концентраторы событий Azure](https://azure.microsoft.com/services/event-hubs/), [Центр Интернета вещей Azure](https://azure.microsoft.com/services/iot-hub/) и [хранилище BLOB-объектов Azure](https://azure.microsoft.com/services/storage/blobs/). Эти входные источником может быть из hello одной подписке, как ваше задание analytics или из другой подписки.

## <a name="data-input-types-data-stream-and-reference-data"></a>Типы входных данных: поток данных и справочные данные
Tooa источника данных при передаче данных, используемые задания Stream Analytics hello и обрабатываются в режиме реального времени. Входные данные делятся на два типа: входные потоковые данные и входные справочные данные.

### <a name="data-stream-inputs"></a>Входные потоковые данные
Поток данных — это несвязанная последовательность событий в динамике по времени. Задания Stream Analytics должны включать хотя бы один входной поток данных. В качестве источников входных потоковых данных могут выступать хранилища больших двоичных объектов, концентраторы событий и центры Интернета вещей. Концентраторы событий являются используется toocollect потоки событий из нескольких устройств и служб. Это могут быть ленты новостей социальных сетей, сведения о торговле акциями или данные датчиков. Центры IoT — это оптимизированный toocollect данные с подключенных устройств в сценариях Интернета вещей (IoT).  Хранилище больших двоичных объектов может использоваться в качестве источника входных данных при сборе массовых данных в виде потока, например файлов журналов.  

### <a name="reference-data"></a>Ссылочные данные
Stream Analytics также поддерживает входные данные, называемые *ссылочными данными*. Это вспомогательные данные, которые статичны или медленно изменяются. Они обычно используются для корреляции и поисков. Например можно объединить данные в hello данных потока ввода toodata в hello ссылочных данных, так же, как toolook соединения SQL статические значения. Хранилища больших двоичных объектов Azure в настоящее время является источника входных данных hello поддерживается только для ссылочных данных. Большие двоичные объекты источника данных ссылку ограничены too100 МБ.

toolearn статье входов справочные данные toocreate [использования ссылочных данных](stream-analytics-use-reference-data.md).  

## <a name="create-data-stream-input-from-event-hubs"></a>Создание входного потока данных из концентраторов событий

Концентраторы событий Azure предоставляют высокомасштабируемую службу приема данных о событиях публикации и подписки. Концентратор событий можно собирать миллионов событий в секунду, можно обрабатывать и анализировать hello значительные объемы данных, создаваемых подключенных устройств и приложений. Вместе концентраторы событий и Stream Analytics предоставляют законченное решение для аналитики в реальном времени. Концентраторы событий позволяют отправлять события в Azure в реальном времени, а задания Stream Analytics — их обрабатывать. Например можно отправить web щелчков, показания датчика или tooEvent события журнала в сети концентраторов. Затем можно создать toouse заданий Stream Analytics концентраторов событий как потоки hello входных данных в режиме реального времени фильтрацию, агрегирование и корреляции.

Отметка времени по умолчанию Hello событий, поступающих из концентраторов событий в Stream Analytics является поступивших hello отметку времени, hello событий в концентратор событий hello, который является `EventEnqueuedUtcTime`. tooprocess hello данных в виде потока с помощью метки времени в полезных данных события hello, необходимо использовать hello [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) ключевое слово.

### <a name="consumer-groups"></a>Группы получателей
Вы должны настроить каждого события Stream Analytics концентратора ввода toohave собственной группе потребителей. Если задание включает самосоединение или несколько источников входных данных, некоторые входные данные могут последовательно считываться несколькими модулями чтения. Такой ситуации влияет hello количество модулей чтения в группе одного получателя. tooavoid превышает hello концентраторов событий ограничение пять модулей чтения в группе потребителей на секцию, он является наиболее toodesignate рекомендаций, потребитель группу для каждого задания Stream Analytics. У каждого концентратора событий должно быть не более 20 групп получателей. Дополнительные сведения см. в [руководстве по программированию концентраторов событий](../event-hubs/event-hubs-programming-guide.md).

### <a name="configure-an-event-hub-as-a-data-stream-input"></a>Настройка концентратора событий в качестве входного потока данных
Hello следующей таблице поясняются каждого свойства hello **вводимые** колонки в hello портал Azure, при настройке концентратор событий в качестве входных данных.

| Свойство | Описание |
| --- | --- |
| **Псевдоним входных данных** |Понятное имя, которое используется в tooreference запроса задания hello это ввода. |
| **Пространство имен служебной шины** |Пространство имен служебной шины Azure — это контейнер для набора сущностей обмена сообщениями. При создании нового концентратора событий создается также пространство имен служебной шины. |
| **Имя концентратора событий** |Имя Hello hello toouse концентратора событий в качестве входного. |
| **Имя политики концентратора событий** |Здравствуйте, политики общего доступа, предоставляющий концентратора событий toohello доступа. Каждой политике общего доступа присваивается имя, а также для нее задаются разрешения и ключи доступа. |
| **Группа получателей концентратора событий** (необязательное свойство) |Hello потребителя группы toouse tooingest данные из концентратора событий hello. Если группы потребителей, hello задания Stream Analytics использует группы потребителей по умолчанию hello. Для каждого задания Stream Analytics рекомендуется использовать отдельную группу получателей. |
| **Формат сериализации событий** |Hello формат сериализации (JSON, CSV или Avro) hello входящего потока данных. |
| **Кодирование** | UTF-8 сейчас hello поддерживается только формат кодировки. |

Данные поступают из концентратора событий, предлагаются следующие поля метаданных в запросе Stream Analytics toohello доступа.

| Свойство | Описание |
| --- | --- |
| **EventProcessedUtcTime** |Hello дату и время события hello был обработан элементом Stream Analytics. |
| **EventEnqueuedUtcTime** |Hello дату и время события hello было получено концентраторов событий. |
| **PartitionId** |Отсчитываемый от нуля Секции для входного адаптера hello Hello. |

Например с помощью этих полей, можно написать запрос наподобие hello в следующем примере:

````
SELECT
    EventProcessedUtcTime,
    EventEnqueuedUtcTime,
    PartitionId
FROM Input
````

## <a name="create-data-stream-input-from-iot-hub"></a>Создание входного потока данных из Центра Интернета вещей
Центр Azure IoT — это высокомасштабируемая служба приема данных о событиях публикации и подписки, оптимизированная под сценарии "Интернет вещей".

Отметка времени по умолчанию Hello событий, поступающих из центра IoT в Stream Analytics является поступивших hello отметку времени, hello событий в центр IoT hello, который является `EventEnqueuedUtcTime`. tooprocess hello данных в виде потока с помощью метки времени в полезных данных события hello, необходимо использовать hello [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) ключевое слово.

> [!NOTE]
> Только сообщения, отправленные со свойством `DeviceClient`, могут быть обработаны.
> 
> 

### <a name="consumer-groups"></a>Группы получателей
Необходимо настроить каждый входной toohave концентратора Stream Analytics IoT собственной группе потребителей. Если задание включает самосоединение или несколько источников входных данных, некоторые входные данные могут последовательно считываться несколькими модулями чтения. Такой ситуации влияет hello количество модулей чтения в группе одного получателя. tooavoid превышает hello центр IoT Azure ограничение пять модулей чтения в группе потребителей на секцию, он является наиболее toodesignate рекомендаций, потребитель группу для каждого задания Stream Analytics.

### <a name="configure-an-iot-hub-as-a-data-stream-input"></a>Настройка Центра Интернета вещей в качестве входного потока данных
Hello следующей таблице поясняются каждого свойства hello **вводимые** колонки в hello портал Azure, при настройке центра IoT в качестве входных данных.

| Свойство | Описание |
| --- | --- |
| **Псевдоним входных данных** |Понятное имя, которое используется в tooreference запроса задания hello это ввода.|
| **Центр Интернета вещей** |Имя Hello toouse концентратора IoT hello в качестве входного. |
| **Конечная точка** |Конечная точка Hello центра IoT hello.|
| **Имя политики общего доступа** |политика доступа общих Hello, предоставляющий доступ toohello IoT hub. Каждой политике общего доступа присваивается имя, а также для нее задаются разрешения и ключи доступа. |
| **Ключ политики общего доступа** |Hello общий ключ доступа используется центр IoT toohello tooauthorize доступа. |
| **Группа получателей** (необязательное свойство) |Hello потребителя группы toouse tooingest данные из центра IoT hello. Если группы потребителей, задания Stream Analytics использует группы потребителей по умолчанию hello. Для каждого задания Stream Analytics рекомендуется использовать отдельную группу получателей. |
| **Формат сериализации событий** |Hello формат сериализации (JSON, CSV или Avro) hello входящего потока данных. |
| **Кодирование** |UTF-8 сейчас hello поддерживается только формат кодировки. |

Данные поступают из центра IoT, предлагаются следующие поля метаданных в запросе Stream Analytics toohello доступа.

| Свойство | Описание |
| --- | --- |
| **EventProcessedUtcTime** |Hello дату и время события hello было обработано. |
| **EventEnqueuedUtcTime** |Hello дату и время события hello было получено центра IoT hello. |
| **PartitionId** |Отсчитываемый от нуля Секции для входного адаптера hello Hello. |
| **IoTHub.MessageId** | Идентификатор, которое использовалось toocorrelate двусторонний обмен данными в центр IoT. |
| **IoTHub.CorrelationId** |Идентификатор, используемый в ответах на сообщение и отзывах в Центре Интернета вещей. |
| **IoTHub.ConnectionDeviceId** |Идентификатор Hello проверки подлинности, используемый toosend это сообщение. Данное значение записывается во servicebound сообщения в hello IoT hub. |
| **IoTHub.ConnectionDeviceGenerationId** |Идентификатор поколения Hello hello проверку подлинности устройства, используемые toosend это сообщение. Данное значение записывается во servicebound сообщения в hello IoT hub. |
| **IoTHub.EnqueuedTime** |Hello время, когда было получено сообщение hello центра IoT hello. |
| **IoTHub.StreamId** |Свойство пользовательского события, добавленные устройства отправителя hello. |


## <a name="create-data-stream-input-from-blob-storage"></a>Создание входного потока данных из хранилища больших двоичных объектов
Для сценариев с большим числом toostore неструктурированные данные в облаке hello хранилища больших двоичных объектов Azure предлагает экономически эффективных и масштабируемых решений. Данные в хранилище больших двоичных объектов обычно считаются неактивными. Тем не менее их можно обрабатывать как поток данных в Stream Analytics. Обычный сценарий для обработки входных данных хранилища больших двоичных объектов с помощью Stream Analytics — это обработка журнала. В этом случае телеметрии собранные из системы и toobe потребностей синтаксического анализа и обработки tooextract значимые данные.

Hello отметки времени по умолчанию для событий хранилища больших двоичных объектов в Stream Analytics является hello отметку времени, hello больших двоичных объектов произошло последнее изменение, который является `BlobLastModifiedUtcTime`. tooprocess hello данных в виде потока с помощью метки времени в полезных данных события hello, необходимо использовать hello [TIMESTAMP BY](https://msdn.microsoft.com/library/azure/dn834998.aspx) ключевое слово.

Входов в формате CSV *требуют* toodefine строки заголовка полей для набора данных hello. Кроме того, все поля заголовка строки должны быть уникальными.

> [!NOTE]
> Stream Analytics не поддерживает добавление существующего содержимого tooan большого двоичного объекта. Stream Analytics смогут просматривать большого двоичного объекта только один раз, и любые изменения, происходящие в большом двоичном объекте hello после задания hello считывания данных hello не обрабатываются. Рекомендуется tooupload все hello данным один раз, а не добавить хранилище больших двоичных объектов toothat события.
> 

### <a name="configure-blob-storage-as-a-data-stream-input"></a>Настройка хранилища BLOB-объектов в качестве потока входных данных

Hello следующей таблице поясняются каждого свойства hello **вводимые** колонки в hello портал Azure, при настройке хранилища BLOB-объектов в качестве входных данных.

| Свойство | Описание |
| --- | --- |
| **Псевдоним входных данных** | Понятное имя, которое используется в tooreference запроса задания hello это ввода. |
| **Учетная запись хранения** | Имя учетной записи хранения hello, где находятся файлы больших двоичных объектов hello Hello. |
| **Ключ учетной записи хранения** | Hello секретный ключ, связанный с учетной записью хранения hello. |
| **Контейнер** | Hello контейнер для входных данных большого двоичного объекта hello. Контейнеры обеспечивают логическое группирование больших двоичных объектов, хранящихся в hello службы BLOB-объектов Microsoft Azure. При передаче большого двоичного объекта toohello службы хранилища больших двоичных объектов, необходимо указать контейнер для объекта. |
| **Шаблон пути** (необязательно) | путь к файлу Hello используется toolocate hello BLOB-объектов в указанном контейнере hello. В пути hello, можно указать один или несколько экземпляров следующих трех переменных hello: `{date}`, `{time}`, или`{partition}`<br/><br/>Пример 1: `cluster1/logs/{date}/{time}/{partition}`<br/><br/>Пример 2: `cluster1/logs/{date}`<br/><br/>Hello `*` символ не является недопустимым значением для hello префикс пути. Допустимыми являются только <a HREF="https://msdn.microsoft.com/library/azure/dd135715.aspx">символы больших двоичных объектов Azure</a>. |
| **Формат даты** (необязательное свойство) | При использовании переменной date hello в пути hello hello формат даты, в какие hello организованы файлы. Пример: `YYYY/MM/DD` |
| **Формат времени** (необязательное свойство) |  При использовании переменной времени hello в пути hello hello формат времени, в какие hello организованы файлы. В настоящее время является hello поддерживается только значение `HH`. |
| **Формат сериализации событий** | Hello формат сериализации (JSON, CSV или Avro) для входных потоков данных. |
| **Кодирование** | Для CSV и JSON UTF-8 является hello поддерживается только формат кодировки. |

При данные поступают из хранилища BLOB-объекта источника, имеются следующие поля метаданных в запросе Stream Analytics toohello доступа:

| Свойство | Описание |
| --- | --- |
| **BlobName** |Имя Hello hello входного BLOB-объекта, hello событий, откуда. |
| **EventProcessedUtcTime** |Hello дату и время события hello был обработан элементом Stream Analytics. |
| **BlobLastModifiedUtcTime** |Hello дату и время последнего изменения большого двоичного объекта hello. |
| **PartitionId** |Отсчитываемый от нуля Секции для входного адаптера hello Hello. |

Например с помощью этих полей, можно написать запрос наподобие hello в следующем примере:

````
SELECT
    BlobName,
    EventProcessedUtcTime,
    BlobLastModifiedUtcTime
FROM Input
````

## <a name="get-help"></a>Получение справки
За дополнительной помощью обращайтесь на наш [форум Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).

## <a name="next-steps"></a>Дальнейшие действия
Вы ознакомились с параметрами подключения данных для заданий Stream Analytics в Azure. toolearn Дополнительные сведения о Stream Analytics см.:

* [Приступая к работе с Azure Stream Analytics](stream-analytics-real-time-fraud-detection.md)
* [Масштабирование заданий в службе Azure Stream Analytics](stream-analytics-scale-jobs.md)
* [Справочник по языку запросов Azure Stream Analytics](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [Справочник по API-интерфейсу REST управления Stream Analytics](https://msdn.microsoft.com/library/azure/dn835031.aspx)

<!--Link references-->
[stream.analytics.developer.guide]: ../stream-analytics-developer-guide.md
[stream.analytics.scale.jobs]: stream-analytics-scale-jobs.md
[stream.analytics.introduction]: stream-analytics-introduction.md
[stream.analytics.get.started]: stream-analytics-real-time-fraud-detection.md
[stream.analytics.query.language.reference]: http://go.microsoft.com/fwlink/?LinkID=513299
[stream.analytics.rest.api.reference]: http://go.microsoft.com/fwlink/?LinkId=517301
