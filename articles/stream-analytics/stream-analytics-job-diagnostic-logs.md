---
title: "aaaTroubleshoot Azure Stream Analytics с журналами диагностики | Документы Microsoft"
description: "Узнайте, как tooanalyze журналы диагностики из Stream Analytics заданий Microsoft Azure."
keywords: 
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: 600fce73636dd137f8f3a137f1d77b59b4a88801
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-azure-stream-analytics-by-using-diagnostics-logs"></a>Устранение неполадок Azure Stream Analytics с помощью журналов диагностики

В некоторых случаях обработка задания Azure Stream Analytics неожиданно прекращается. Это может tootroubleshoot важные toobe этом типа события. результат непредвиденный запрос, toodevices подключения или сбоя непредвиденной службы, может возникнуть событие Hello. Hello журналов диагностики в Stream Analytics может помочь определить hello причины возникновения проблем, когда они возникают и сократить время восстановления.

## <a name="log-types"></a>Типы журналов

Stream Analytics предоставляет журналы двух типов: 
* [Журналы действий](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs) (всегда включены), содержащие ценные сведения об операциях, выполняемых в заданиях.
* [Журналы диагностики](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs) (можно настроить) с подробными сведениями обо всех событиях в задании. Диагностика регистрирует при создании задания hello, взаимном hello задание удаляется. Они охватывают события при обновлении задания hello и при выполнении.

> [!NOTE]
> Можно использовать службы, такие как несоответствующие данные tooanalyze хранилища Azure, концентраторов событий Azure и Azure Log Analytics. Взимается плата в зависимости от hello цены модели для этих служб.
>

## <a name="turn-on-diagnostics-logs"></a>Включение журналов диагностики

По умолчанию журналы диагностики **отключены**. tooturn на журналы диагностики, выполните следующие действия.

1.  Войдите в портал Azure toohello и перейти toohello колонке задания потоковой передачи. В разделе **Мониторинг**выберите **Журналы диагностики**.

    ![Журналы toodiagnostics колонке навигации](./media/stream-analytics-job-diagnostic-logs/image1.png)  

2.  Выберите **Включить диагностику**.

    ![Включение журналов диагностики](./media/stream-analytics-job-diagnostic-logs/image2.png)

3.  На hello **параметры диагностики** страницы, для **состояние**выберите **на**.

    ![Изменение состояния для журналов диагностики](./media/stream-analytics-job-diagnostic-logs/image3.png)

4.  Настройка hello архивных целевой объекты (учетной записи хранилища, концентратора событий, служба аналитики журналов). Выберите категории hello журналов, которые должны toocollect (выполнения, создание и настройка). 

5.  Сохраните новую конфигурацию диагностики hello.

Конфигурация диагностики Hello вступает в силу tootake около 10 минут. После этого hello журналы в целевой архивных hello настроен запуск (вы увидите их на hello **журналы диагностики** страницы):

![Журналы toodiagnostics навигации колонке — архивных целевые объекты](./media/stream-analytics-job-diagnostic-logs/image4.png)

Дополнительные сведения о настройке диагностики см. в статье [Сбор и использование диагностических данных из ресурсов Azure](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs).

## <a name="diagnostics-log-categories"></a>Категории журналов диагностики

Сейчас мы записываем две категории журналов диагностики:

* **Разработка**: Записи журнала события, связанные toojob создания операций: Создание задания, добавления и удаления входов и выходов, добавление и обновление запроса hello, запуск и остановка задания hello.
* **Выполнение**: позволяет записывать в журнал все события, происходящие во время выполнения задания:
    * Ошибки подключения.
    * Ошибки обработки данных:
        * События, не соответствующие toohello запрос определения (типы несоответствующие полей и значения, отсутствующие поля и т.д.)
        * ошибки оценки выражений.
    * Другие события и ошибки.

## <a name="diagnostics-logs-schema"></a>Схема журналов диагностики

Все журналы хранятся в формате JSON. Каждая запись имеет следующие общие поля Строка hello:

Имя | Описание
------- | -------
Twitter в режиме реального | Отметка времени (в формате UTC) hello журнала.
resourceId | Идентификатор ресурса hello, hello операция выполнялась, в верхнем регистре. Он включает идентификатор подписки hello, группа ресурсов hello и hello имя задания. Например, **/SUBSCRIPTIONS/6503D296-DAC1-4449-9B03-609A1F4A1C87/RESOURCEGROUPS/MY-RESOURCE-GROUP/PROVIDERS/MICROSOFT.STREAMANALYTICS/STREAMINGJOBS/MYSTREAMINGJOB**.
category | Категория журнала, **Выполнение** или **Разработка**.
operationName | Имя операции hello, который выполнил вход. Например **отправки событий: сбой toomysqloutput запись выходных данных SQL**.
status | Состояние операции hello. Например, **Сбой** или **Успешно выполнено**.
уровень | Уровень ведения журнала. Например, **Ошибка**, **Предупреждение** или **Информация**.
properties | Сведения о записи журнала, сериализованные в строку JSON. Дополнительные сведения см. в разделе hello в следующих разделах.

### <a name="execution-log-properties-schema"></a>Схема свойств журнала выполнения

Журналы выполнения содержат сведения о событиях, произошедших при выполнении задания Stream Analytics. Схема Hello свойств зависит от типа hello события. В настоящее время у нас есть следующие типы журналов выполнения hello:

### <a name="data-errors"></a>Ошибки данных

Любая ошибка, возникающая во время задания hello обработки данных находится в этой категории журналов. Чаще всего эти журналы создаются во время операций чтения, сериализации и записи. Эти журналы не содержат ошибок подключения, которые обрабатываются как универсальные события.

Имя | Описание
------- | -------
Источник | Имя задания hello вход или выход, где произошла ошибка hello.
Сообщение | Сообщение, связанное с ошибкой hello.
Тип | Тип ошибки. Например **DataConversionError**, **CsvParserError** или **ServiceBusPropertyColumnMissingError**.
Данные | Содержит данные, которые полезно tooaccurately найдите hello источник ошибки hello. Тема tootruncation, в зависимости от размера.

В зависимости от hello **Имя_операции** значение ошибки данных имеют следующие схемы hello:
* **Сериализация событий.** Эта ошибка происходят во время операций чтения события, Они происходят, когда hello данные на входе hello не удовлетворяет hello схемы запроса для одной из следующих причин:
    * *Несоответствие типов во время события (de) сериализации*: Определяет hello поле, которое является причиной ошибки hello.
    * *Не удалось прочитать событие, недопустимый сериализации*: выводит сведения о расположении hello hello входных данных, где произошла ошибка hello. Включает в себя имя большого двоичного объекта для входных данных больших двоичных объектов, смещение и образец hello данных.
* **Отправка событий.** Этот тип ошибки происходит при выполнении операций записи. Они определяют hello потоковой передачи событий, вызвавшую ошибку hello.

### <a name="generic-events"></a>Универсальные события

Остальные типы ошибок считаются универсальными событиями.

Имя | Описание
-------- | --------
Ошибка | (Необязательно.) Сведения об ошибке. Как правило, это сведения об исключении (если они доступны).
Сообщение| Сообщение журнала.
Тип | Тип сообщения. Сопоставляет классификации toointernal ошибок. Например **JobValidationError** или **BlobOutputAdapterInitializationFailure**.
Идентификатор корреляции | [Идентификатор GUID](https://en.wikipedia.org/wiki/Universally_unique_identifier) , однозначно определяющий hello выполнения задания. Все записи журнала выполнения hello время hello задания начинается до hello завершается выполнение задания имеют hello же **идентификатор корреляции** значение.

## <a name="next-steps"></a>Дальнейшие действия

* [Введение tooStream аналитика](stream-analytics-introduction.md)
* [Приступая к работе с Azure Stream Analytics: выявление мошенничества в режиме реального времени](stream-analytics-real-time-fraud-detection.md)
* [Масштабирование заданий Azure Stream Analytics для повышения пропускной способности базы данных](stream-analytics-scale-jobs.md)
* [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx) (Справочник по языку запросов Stream Analytics)
* [Stream Analytics management REST API reference](https://msdn.microsoft.com/library/azure/dn835031.aspx) (Справочник по API-интерфейсу REST для управления Stream Analytics)
