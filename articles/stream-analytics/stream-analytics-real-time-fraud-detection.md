# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a><span data-ttu-id="cb1f3-101">Приступая к работе с Azure Stream Analytics: выявление мошенничества в режиме реального времени</span><span class="sxs-lookup"><span data-stu-id="cb1f3-101">Get started using Azure Stream Analytics: Real-time fraud detection</span></span>

<span data-ttu-id="cb1f3-102">Этот учебник конца в конец показано, как toouse Azure Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-102">This tutorial provides an end-to-end illustration of how toouse Azure Stream Analytics.</span></span> <span data-ttu-id="cb1f3-103">Вы узнаете, как выполнять следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-103">You learn how to:</span></span> 

* <span data-ttu-id="cb1f3-104">Перенести события потоковой передачи в экземпляр концентраторов событий Azure.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-104">Bring streaming events into an instance of Azure Event Hubs.</span></span> <span data-ttu-id="cb1f3-105">В рамках этого руководства вы будете использовать соответствующее приложение, имитирующее поток записей метаданных мобильного устройства.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-105">In this tutorial, you'll use an app that we provide that simulates a stream of mobile-phone metadata records.</span></span>

* <span data-ttu-id="cb1f3-106">Запись запросов tootransform SQL-подобного Stream Analytics данных, сведения об агрегировании или поиске шаблонов.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-106">Write SQL-like Stream Analytics queries tootransform data, aggregating information or looking for patterns.</span></span> <span data-ttu-id="cb1f3-107">Вы увидите, как toouse tooexamine запроса hello входящего потока и поиск вызовов, которые могут быть мошеннические.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-107">You will see how toouse a query tooexamine hello incoming stream and look for calls that might be fraudulent.</span></span>

* <span data-ttu-id="cb1f3-108">Отправьте hello результаты tooan приемником потока (хранилище), можно анализировать Дополнительные сведения.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-108">Send hello results tooan output sink (storage) that you can analyze for additional insights.</span></span> <span data-ttu-id="cb1f3-109">В этом случае будет отправлено hello подозрительные вызов данных tooAzure BLOB-объекта хранилища.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-109">In this case, you'll send hello suspicious call data tooAzure Blob storage.</span></span>

<span data-ttu-id="cb1f3-110">В этом учебнике мы используем пример hello в режиме реального времени мошенничества, на основе данных телефонный звонок.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-110">In  this tutorial, we use hello example of real-time fraud detection based on phone-call data.</span></span> <span data-ttu-id="cb1f3-111">Но способ hello демонстрируется также подходит для других типов мошенничества, таких как кража мошенничества или кредитной карты.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-111">But hello technique we illustrate is also suited for other types of fraud detection, such as credit card fraud or identity theft.</span></span> 

## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a><span data-ttu-id="cb1f3-112">Сценарий. Выявление мошенничества в отношении телекоммуникаций и SIM-карт в режиме реального времени</span><span class="sxs-lookup"><span data-stu-id="cb1f3-112">Scenario: Telecommunications and SIM fraud detection in real time</span></span>

<span data-ttu-id="cb1f3-113">У поставщика телекоммуникационных услуг есть большой объем данных для входящих вызовов.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-113">A telecommunications company has a large volume of data for incoming calls.</span></span> <span data-ttu-id="cb1f3-114">фирма toodetect мошеннические вызовов в режиме реального времени, чтобы они могут уведомить клиентов или завершение работы службы на определенное количество Hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-114">hello company wants toodetect fraudulent calls in real time so that they can notify customers or shut down service for a specific number.</span></span> <span data-ttu-id="cb1f3-115">Один тип мошенничества SIM включает в себя несколько вызовов из hello удостоверением вокруг hello же время, однако в географически различных мест.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-115">One type of SIM fraud involves multiple calls from hello same identity around hello same time but in geographically different locations.</span></span> <span data-ttu-id="cb1f3-116">toodetect этот тип мошенничества, hello компании потребностей tooexamine входящих записей, phone и поиск конкретных шаблонов — в этом случае для вызовов, сделанных вокруг hello одновременно в разных странах.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-116">toodetect this type of fraud, hello company needs tooexamine incoming phone records and look for specific patterns—in this case, for calls made around hello same time in different countries.</span></span> <span data-ttu-id="cb1f3-117">Любой телефон, в эту категорию попадают записи toostorage для последующего анализа.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-117">Any phone records that fall into this category are written toostorage for subsequent analysis.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="cb1f3-118">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="cb1f3-118">Prerequisites</span></span>

<span data-ttu-id="cb1f3-119">В рамках этого руководства вы смоделируете данные вызовов с помощью клиентского приложения, которое создает пример метаданных вызова.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-119">In this tutorial, you'll simulate phone-call data by using a client app that generates sample phone call metadata.</span></span> <span data-ttu-id="cb1f3-120">Некоторые записи hello, hello приложение создает выглядят мошеннические вызовов.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-120">Some of hello records that hello app produces look like fraudulent calls.</span></span> 

<span data-ttu-id="cb1f3-121">Прежде чем начать, убедитесь, что у вас есть следующие hello:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-121">Before you start, make sure you have hello following:</span></span>

* <span data-ttu-id="cb1f3-122">Учетная запись Azure.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-122">An Azure account.</span></span>
* <span data-ttu-id="cb1f3-123">приложение генератор события вызова Hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-123">hello call-event generator app.</span></span> <span data-ttu-id="cb1f3-124">Это можно получить, загрузив hello [TelcoGenerator.zip файл](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) из центра загрузки Майкрософт hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-124">You can get this by downloading hello [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) from hello Microsoft Download Center.</span></span> <span data-ttu-id="cb1f3-125">Распакуйте этот пакет в папку на компьютере.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-125">Unzip this package into a folder on your computer.</span></span> <span data-ttu-id="cb1f3-126">Если требуется toosee hello исходный код и приложение hello выполнения в отладчике, можно получить исходный код приложения hello из [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-126">If you want toosee hello source code and run hello app in a debugger, you can get hello app source code from [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span></span> 

    >[!NOTE]
    ><span data-ttu-id="cb1f3-127">Windows может блокировать hello загружен ZIP-файл.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-127">Windows might block hello downloaded .zip file.</span></span> <span data-ttu-id="cb1f3-128">Если вы не удается распаковать его, щелкните правой кнопкой мыши файл hello и выберите **свойства**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-128">If you can't unzip it, right-click hello file and select **Properties**.</span></span> <span data-ttu-id="cb1f3-129">Если вы видите hello сообщение «этот файл получен с другого компьютера и может быть заблокированных toohelp защитить этот компьютер», выберите hello **Unblock** и нажмите кнопку **применить**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-129">If you see hello "This file came from another computer and might be blocked toohelp protect this computer" message, select hello **Unblock** option and then click **Apply**.</span></span>

<span data-ttu-id="cb1f3-130">Если требуется, чтобы результаты hello tooexamine задание Streaming Analytics hello, необходимо также средство просмотра содержимого hello контейнера хранилища больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-130">If you want tooexamine hello results of hello Streaming Analytics job, you also need a tool for viewing hello contents of a Azure Blob Storage container.</span></span> <span data-ttu-id="cb1f3-131">Если вы используете Visual Studio, можно использовать [инструменты Azure для Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) или [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-131">If you use Visual Studio, you can use [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) or [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span></span> <span data-ttu-id="cb1f3-132">Кроме того, можно установить автономные средства, например [обозреватель хранилищ Azure](http://storageexplorer.com/) или [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-132">Alternatively, you can install standalone tools like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

## <a name="create-an-azure-event-hubs-tooingest-events"></a><span data-ttu-id="cb1f3-133">Создать событие Azure tooingest концентраторов событий</span><span class="sxs-lookup"><span data-stu-id="cb1f3-133">Create an Azure event hubs tooingest events</span></span>

<span data-ttu-id="cb1f3-134">поток данных tooanalyze вы *приема* его в Azure.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-134">tooanalyze a data stream, you *ingest* it into Azure.</span></span> <span data-ttu-id="cb1f3-135">Типичный способ tooingest данных является toouse [концентраторов событий Azure](../event-hubs/event-hubs-what-is-event-hubs.md), которая позволяет приема миллионов событий в секунду и последующей обработки и хранения информации о событиях hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-135">A typical way tooingest data is toouse [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), which lets you ingest millions of events per second and then process and store hello event information.</span></span> <span data-ttu-id="cb1f3-136">В этом учебнике вы создаете концентратор событий и иметь hello события вызова генератор приложения отправки вызова данных toothat концентратора событий.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-136">For this tutorial, you create an event hub and then have hello call-event generator app send call data toothat event hub.</span></span> <span data-ttu-id="cb1f3-137">Дополнительные сведения о концентраторах событий см. в разделе hello [документации Azure Service Bus](https://docs.microsoft.com/en-us/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-137">For more about event hubs, see hello [Azure Service Bus documentation](https://docs.microsoft.com/en-us/azure/service-bus/).</span></span>

>[!NOTE]
><span data-ttu-id="cb1f3-138">Более подробные версию этой процедуры см. в разделе [создать пространство имен концентраторов событий и концентратора событий с помощью портала Azure "hello"](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-138">For a more detailed version of this procedure, see [Create an Event Hubs namespace and an event hub using hello Azure portal](../event-hubs/event-hubs-create.md).</span></span> 

### <a name="create-a-namespace-and-event-hub"></a><span data-ttu-id="cb1f3-139">Создание пространства имен и концентратора событий</span><span class="sxs-lookup"><span data-stu-id="cb1f3-139">Create a namespace and event hub</span></span>
<span data-ttu-id="cb1f3-140">В этой процедуре сначала создать пространство имен концентратора событий и затем добавить namepsace toothat концентратора событий.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-140">In this procedure, you first create an event hub namespace, and then you add an event hub toothat namepsace.</span></span> <span data-ttu-id="cb1f3-141">Пространства имен концентратора событий используются группы toologically связанные экземпляры шины событий.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-141">Event hub namespaces are used toologically group related event bus instances.</span></span> 

1. <span data-ttu-id="cb1f3-142">Войдите на портал Azure hello и щелкните **New** > **Интернета вещей** > **концентратора событий**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-142">Log  into hello Azure portal and click **New** > **Internet of Things** > **Event Hub**.</span></span> 

2. <span data-ttu-id="cb1f3-143">В hello **создать пространство имен** колонки, введите имя пространства имен, например `<yourname>-eh-ns-demo`.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-143">In hello **Create namespace** blade, enter a namespace name such as `<yourname>-eh-ns-demo`.</span></span> <span data-ttu-id="cb1f3-144">Можно использовать любое имя для пространства имен hello, но hello имя должно быть допустимым URL-адреса и должно быть уникальным среди Azure.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-144">You can use any name for hello namespace, but hello name must be valid for a URL and it must be unique across Azure.</span></span> 
    
3. <span data-ttu-id="cb1f3-145">Выберите подписку, создайте или выберите группу ресурсов, а затем щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-145">Select a subscription and create or choose a resource group , then click **Create**.</span></span> 

    ![Создание пространства имен концентратора событий](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-namespace-new-portal.png)
 
4. <span data-ttu-id="cb1f3-147">После завершения развертывания приветствия имен найти пространство имен концентратора событий hello в списке ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-147">When hello namespace has finished deploying, find hello event hub namespace in your list of Azure resources.</span></span> 

5. <span data-ttu-id="cb1f3-148">Нажмите кнопку hello новое пространство имен затем в колонке приветствия имен  **+ &nbsp;концентратора событий**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-148">Click hello new namespace, and in hello namespace blade, click **+&nbsp;Event Hub**.</span></span> 

    ![<span data-ttu-id="cb1f3-149">Кнопка добавления концентратора событий Hello для создания нового концентратора событий</span><span class="sxs-lookup"><span data-stu-id="cb1f3-149">hello Add Event Hub button for creating a new event hub</span></span> ](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-button-new-portal.png)    
 
6. <span data-ttu-id="cb1f3-150">Новый концентратор событий имя hello `sa-eh-frauddetection-demo`.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-150">Name hello new event hub `sa-eh-frauddetection-demo`.</span></span> <span data-ttu-id="cb1f3-151">Вы можете использовать другое имя.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-151">You can use a different name.</span></span> <span data-ttu-id="cb1f3-152">В противном случае запишите его, поскольку его нужно имя hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-152">If you do, make a note of it, because you need hello name later.</span></span> <span data-ttu-id="cb1f3-153">Не нужно tooset другие параметры для концентратора событий hello прямо сейчас.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-153">You don't need tooset any other options for hello event hub right now.</span></span>

    ![Колонка создания нового концентратора событий](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-new-portal.png)
    
 
7. <span data-ttu-id="cb1f3-155">Щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-155">Click **Create**.</span></span>
### <a name="grant-access-toohello-event-hub-and-get-a-connection-string"></a><span data-ttu-id="cb1f3-156">Предоставление доступа к концентратору событий toohello и получить строку подключения</span><span class="sxs-lookup"><span data-stu-id="cb1f3-156">Grant access toohello event hub and get a connection string</span></span>

<span data-ttu-id="cb1f3-157">Процесс для отправки данных концентратора событий tooan, hello концентратора событий должен иметь политику, разрешающую соответствующие права доступа.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-157">Before a process can send data tooan event hub, hello event hub must have a policy that allows appropriate access.</span></span> <span data-ttu-id="cb1f3-158">политика доступа Hello создает строку подключения, которая включает сведения об авторизации.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-158">hello access policy produces a connection string that includes authorization information.</span></span>

1.  <span data-ttu-id="cb1f3-159">В колонке пространства имен событий hello щелкните **концентраторов событий** и щелкните имя hello нового концентратора событий.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-159">In hello event namespace blade, click **Event Hubs** and then click hello name of your new event hub.</span></span>

2.  <span data-ttu-id="cb1f3-160">В колонке концентратора событий hello щелкните **политики общего доступа** и нажмите кнопку  **+ &nbsp;добавить**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-160">In hello event hub blade, click **Shared access policies** and then click **+&nbsp;Add**.</span></span>

    >[!NOTE]
    ><span data-ttu-id="cb1f3-161">Убедитесь, что вы работаете с концентратора событий hello, не hello пространство имен концентратора событий.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-161">Make sure you're working with hello event hub, not hello event hub namespace.</span></span>

3.  <span data-ttu-id="cb1f3-162">Добавьте политику с именем `sa-policy-manage-demo`, а для параметра **Утверждение** выберите **Управление**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-162">Add a policy named `sa-policy-manage-demo` and for **Claim**, select **Manage**.</span></span>

    ![Колонка создания политики доступа для нового концентратора событий](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-shared-access-policy-manage-new-portal.png)
 
4.  <span data-ttu-id="cb1f3-164">Щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-164">Click **Create**.</span></span>

5.  <span data-ttu-id="cb1f3-165">После развертывания политики hello, щелкните его в списке hello политик общего доступа.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-165">After hello policy has been deployed, click it in hello list of shared access policies.</span></span>

6.  <span data-ttu-id="cb1f3-166">Поле поиска hello **строки ПЕРВИЧНОГО ключа подключения** и выберите hello копирования кнопку Далее toohello строку подключения.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-166">Find hello box labeled **CONNECTION STRING-PRIMARY KEY** and click hello copy button next toohello connection string.</span></span> 
    
    ![Копирование hello первичным соединением строковый ключ из политики доступа hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-shared-access-policy-copy-connection-string-new-portal.png)
 
7.  <span data-ttu-id="cb1f3-168">Вставьте строку подключения hello в текстовый редактор.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-168">Paste hello connection string into a text editor.</span></span> <span data-ttu-id="cb1f3-169">Эта строка подключения для hello в следующем разделе, необходимо после внесения tooit некоторые небольшие изменения.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-169">You need this connection string for hello next section, after you make some small edits tooit.</span></span>

    <span data-ttu-id="cb1f3-170">Строка подключения Hello выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-170">hello connection string looks like this:</span></span>

        Endpoint=sb://YOURNAME-eh-ns-demo.servicebus.windows.net/;SharedAccessKeyName=sa-policy-manage-demo;SharedAccessKey=Gw2NFZwU1Di+rxA2T+6hJYAtFExKRXaC2oSQa0ZsPkI=;EntityPath=sa-eh-frauddetection-demo

    <span data-ttu-id="cb1f3-171">Обратите внимание, что строка подключения hello содержит несколько пар ключ значение, разделенных точкой с запятой: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, и `EntityPath`.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-171">Notice that hello connection string contains multiple key-value pairs, separated with semicolons: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, and `EntityPath`.</span></span>  

## <a name="configure-and-start-hello-event-generator-application"></a><span data-ttu-id="cb1f3-172">Настройка и запуск приложения генератора событий hello</span><span class="sxs-lookup"><span data-stu-id="cb1f3-172">Configure and start hello event generator application</span></span>

<span data-ttu-id="cb1f3-173">Перед началом TelcoGenerator приложение hello задана, чтобы он отправлял концентратора событий toohello записей вызов только что созданный.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-173">Before you start hello TelcoGenerator app, you configure it so that it will send call records toohello event hub you just created.</span></span>

### <a name="configure-hello-telcogeneratorapp"></a><span data-ttu-id="cb1f3-174">Настройка hello TelcoGeneratorapp</span><span class="sxs-lookup"><span data-stu-id="cb1f3-174">Configure hello TelcoGeneratorapp</span></span>

1.  <span data-ttu-id="cb1f3-175">В редакторе hello скопированной строки подключения hello, запишите hello `EntityPath` значение, а затем удалите hello `EntityPath` пары (не забудьте tooremove hello точкой с запятой, за которым следуют его).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-175">In hello editor where you copied hello connection string, make a note of hello `EntityPath` value, and then remove hello `EntityPath` pair (don't forget tooremove hello semicolon that precedes it).</span></span> 

2.  <span data-ttu-id="cb1f3-176">В папке hello, куда было распаковано hello TelcoGenerator.zip файл откройте файл telcodatagen.exe.config hello в редакторе.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-176">In hello folder where you unzipped hello TelcoGenerator.zip file, open hello telcodatagen.exe.config file in an editor.</span></span> <span data-ttu-id="cb1f3-177">(Имеется более одного config-файл, поэтому при открытии hello вправо на один.)</span><span class="sxs-lookup"><span data-stu-id="cb1f3-177">(There is more than one .config file, so be sure that you open hello right one.)</span></span>

3.  <span data-ttu-id="cb1f3-178">В hello `<appSettings>` элемент, это сделать:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-178">In hello `<appSettings>` element, do this:</span></span>

    * <span data-ttu-id="cb1f3-179">Задайте значение hello hello `EventHubName` имя концентратора событий ключа toohello (то есть toohello значение пути hello сущности).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-179">Set hello value of hello `EventHubName` key toohello event hub name (that is, toohello value of hello entity path).</span></span>
    * <span data-ttu-id="cb1f3-180">Задайте значение hello hello `Microsoft.ServiceBus.ConnectionString` ключа toohello строку подключения.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-180">Set hello value of hello `Microsoft.ServiceBus.ConnectionString` key toohello connection string.</span></span> 

    <span data-ttu-id="cb1f3-181">Hello `<appSettings>` раздел будет выглядеть, как следующий пример hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-181">hello `<appSettings>` section will look like hello following example.</span></span> <span data-ttu-id="cb1f3-182">(Для ясности мы hello строк с переносом и удалены некоторые символы из маркера авторизации hello.)</span><span class="sxs-lookup"><span data-stu-id="cb1f3-182">(For clarity, we wrapped hello lines and removed some characters from hello authorization token.)</span></span>

    ![Файл конфигурации приложения TelcoGenerator, показывающая hello события концентратора имя и строку подключения](./media/stream-analytics-real-time-fraud-detection/stream-analytics-telcogenerator-config-file-app-settings.png)
 
4.  <span data-ttu-id="cb1f3-184">Сохраните файл hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-184">Save hello file.</span></span> 

### <a name="start-hello-app"></a><span data-ttu-id="cb1f3-185">Запуск приложения hello</span><span class="sxs-lookup"><span data-stu-id="cb1f3-185">Start hello app</span></span>
1.  <span data-ttu-id="cb1f3-186">Откройте окно командной строки и измените toohello папку, где приложение hello TelcoGenerator распакованную.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-186">Open a command window and change toohello folder where hello TelcoGenerator app is unzipped.</span></span>
2.  <span data-ttu-id="cb1f3-187">Введите следующую команду hello:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-187">Enter hello following command:</span></span>

        telcodatagen.exe 1000 .2 2

    <span data-ttu-id="cb1f3-188">используются следующие параметры Hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-188">hello parameters are:</span></span> 

    * <span data-ttu-id="cb1f3-189">Число записей подробных сведений о звонках за час.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-189">Number of CDRs per hour.</span></span> 
    * <span data-ttu-id="cb1f3-190">Вероятность мошенничества карты SIM: Как часто, в процентах для всех вызовов, приложение hello должны моделировать мошеннические вызова.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-190">SIM Card Fraud Probability: How often, as a percentage of all calls, that hello app should simulate a fraudulent call.</span></span> <span data-ttu-id="cb1f3-191">значение Hello.2 означает, что примерно на 20% записей вызов hello выглядят мошеннические.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-191">hello value .2 means that about 20% of hello call records will look fraudulent.</span></span>
    * <span data-ttu-id="cb1f3-192">Продолжительность в часах.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-192">Duration in hours.</span></span> <span data-ttu-id="cb1f3-193">Выполняйте Hello количество часов, приложение hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-193">hello number of hours that hello app should run.</span></span> <span data-ttu-id="cb1f3-194">Также можно остановить приложение hello любое время, нажав клавиши Ctrl + C hello командной строки.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-194">You can also stop hello app any time by pressing Ctrl+C at hello command line.</span></span>

    <span data-ttu-id="cb1f3-195">Через несколько секунд приложение hello начинается отображение записей телефонный звонок на экране приветствия, поскольку отправляет их toohello концентратора событий.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-195">After a few seconds, hello app starts displaying phone call records on hello screen as it sends them toohello event hub.</span></span>

<span data-ttu-id="cb1f3-196">Hello ниже приведены некоторые hello ключевых полей, которые вы будете использовать в этом приложении обнаружения мошенничества в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-196">Some of hello key fields that you will be using in this real-time fraud detection application are hello following:</span></span>

|<span data-ttu-id="cb1f3-197">**Запись**</span><span class="sxs-lookup"><span data-stu-id="cb1f3-197">**Record**</span></span>|<span data-ttu-id="cb1f3-198">**Определение**</span><span class="sxs-lookup"><span data-stu-id="cb1f3-198">**Definition**</span></span>|
|----------|--------------|
|`CallrecTime`|<span data-ttu-id="cb1f3-199">время начала Hello отметки времени для вызова hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-199">hello timestamp for hello call start time.</span></span> |
|`SwitchNum`|<span data-ttu-id="cb1f3-200">Hello коммутатора используется вызов tooconnect hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-200">hello telephone switch used tooconnect hello call.</span></span> <span data-ttu-id="cb1f3-201">Например коммутаторы hello являются строк, которые представляют Привет Страна происхождения (США, Китае, Великобритании, Германии или Австралия).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-201">For this example, hello switches are strings that represent hello country of origin (US, China, UK, Germany, or Australia).</span></span> |
|`CallingNum`|<span data-ttu-id="cb1f3-202">номер телефона Hello hello вызывающего объекта.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-202">hello phone number of hello caller.</span></span> |
|`CallingIMSI`|<span data-ttu-id="cb1f3-203">Hello международной Mobile подписчика идентификатора IMSI.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-203">hello International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="cb1f3-204">Это уникальный идентификатор hello hello вызывающего объекта.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-204">This is hello Unique identifier of hello caller.</span></span> |
|`CalledNum`|<span data-ttu-id="cb1f3-205">номер телефона получателя вызова hello Hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-205">hello phone number of hello call recipient.</span></span> |
|`CalledIMSI`|<span data-ttu-id="cb1f3-206">Идентификатор IMSI.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-206">International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="cb1f3-207">Это уникальный идентификатор получателя вызова hello hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-207">This is hello unique identifier of hello call recipient.</span></span> |


## <a name="create-a-stream-analytics-job-toomanage-streaming-data"></a><span data-ttu-id="cb1f3-208">Создание toomanage задания Stream Analytics, потоковая передача данных</span><span class="sxs-lookup"><span data-stu-id="cb1f3-208">Create a Stream Analytics job toomanage streaming data</span></span>

<span data-ttu-id="cb1f3-209">Теперь, когда у вас есть поток событий вызовов, вы можете настроить задание Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-209">Now that you have a stream of call events, you can set up a Stream Analytics job.</span></span> <span data-ttu-id="cb1f3-210">Задание Hello будет считывать данные из концентратора событий hello, которую вы настроили.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-210">hello job will read data from hello event hub that you set up.</span></span> 

### <a name="create-hello-job"></a><span data-ttu-id="cb1f3-211">Создание задания hello</span><span class="sxs-lookup"><span data-stu-id="cb1f3-211">Create hello job</span></span> 

1. <span data-ttu-id="cb1f3-212">В hello портал Azure, щелкните **New** > **Интернета вещей** > **задания Stream Analytics**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-212">In hello Azure portal, click **New** > **Internet of Things** > **Stream Analytics job**.</span></span>

2. <span data-ttu-id="cb1f3-213">Имя задания hello `sa_frauddetection_job_demo`, укажите подписки, группы ресурсов и расположение.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-213">Name hello job `sa_frauddetection_job_demo`, specify a subscription, resource group, and location.</span></span>

    <span data-ttu-id="cb1f3-214">Это помешает tooplace hello задания и hello концентратора событий в hello же регионе для оптимальной производительности и, что не придется tootransfer данных между регионами.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-214">It's a good idea tooplace hello job and hello event hub in hello same region for best performance and so that you don't pay tootransfer data between regions.</span></span>

    ![Создание нового задания Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-job-new-portal.png)

3. <span data-ttu-id="cb1f3-216">Щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-216">Click **Create**.</span></span>

    <span data-ttu-id="cb1f3-217">создается задание Hello и hello портал отобразит сведения о задании.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-217">hello job is created and hello portal displays job details.</span></span> <span data-ttu-id="cb1f3-218">Ничего не выполняется, хотя — имеется tooconfigure hello задания, прежде чем можно будет запустить.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-218">Nothing is running yet, though—you have tooconfigure hello job before it can be started.</span></span>

### <a name="configure-job-input"></a><span data-ttu-id="cb1f3-219">Настройка входных данных для задания</span><span class="sxs-lookup"><span data-stu-id="cb1f3-219">Configure job input</span></span>

1. <span data-ttu-id="cb1f3-220">В панели мониторинга hello или hello **все ресурсы** колонки, найдите и выберите hello `sa_frauddetection_job_demo` задания Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-220">In hello dashboard or hello **All resources** blade, find and select hello `sa_frauddetection_job_demo` Stream Analytics job.</span></span> 
2. <span data-ttu-id="cb1f3-221">В hello **топологии задания** раздел hello колонке задания Stream Analytics, щелкните hello **ввода** поле.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-221">In hello **Job Topology** section of hello Stream Analytics job blade, click hello **Input** box.</span></span>

    ![Поле ввода в топологии в колонке задание Streaming Analytics hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-input-box-new-portal.png)
 
3. <span data-ttu-id="cb1f3-223">Нажмите кнопку  **+ &nbsp;добавить** и затем заполнить hello колонка со следующими значениями:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-223">Click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="cb1f3-224">**Входной псевдоним**: hello используйте имя `CallStream`.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-224">**Input alias**: Use hello name `CallStream`.</span></span> <span data-ttu-id="cb1f3-225">Если используется другое имя, запишите его, так как оно понадобится позже.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-225">If you use a different name, make a note of it because you'll need it later.</span></span>
    * <span data-ttu-id="cb1f3-226">**Тип источника**: выберите **Поток данных**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-226">**Source type**: Select **Data stream**.</span></span> <span data-ttu-id="cb1f3-227">(**Ссылочные данные** ссылается toostatic уточняющего запроса данных, который не будет использовать в данном руководстве.)</span><span class="sxs-lookup"><span data-stu-id="cb1f3-227">(**Reference data** refers toostatic lookup data, which you won't use in this tutorial.)</span></span>
    * <span data-ttu-id="cb1f3-228">**Источник**: выберите **Концентратор событий**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-228">**Source**: Select **Event hub**.</span></span>
    * <span data-ttu-id="cb1f3-229">**Вариант импорта**: выберите **Использовать концентратор событий из текущей подписки**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-229">**Import option**: Select **Use event hub from current subscription**.</span></span> 
    * <span data-ttu-id="cb1f3-230">**Пространство имен служебной шины**: выберите пространство имен концентратора hello событий, созданной ранее (`<yourname>-eh-ns-demo`).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-230">**Service bus namespace**: Select hello event hub namespace that you created earlier (`<yourname>-eh-ns-demo`).</span></span>
    * <span data-ttu-id="cb1f3-231">**Концентратор событий**: hello выберите концентратор событий, созданной ранее (`sa-eh-frauddetection-demo`).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-231">**Event hub**: Select hello event hub that you created earlier (`sa-eh-frauddetection-demo`).</span></span>
    * <span data-ttu-id="cb1f3-232">**Имя политики концентратора событий**: выберите политику доступа hello, созданной ранее (`sa-policy-manage-demo`).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-232">**Event hub policy name**: Select hello access policy that you created earlier (`sa-policy-manage-demo`).</span></span>

    ![Создание новых входных данных для задания Streaming Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-input-new-portal.png)

4. <span data-ttu-id="cb1f3-234">Щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-234">Click **Create**.</span></span>

## <a name="create-queries-tootransform-real-time-data"></a><span data-ttu-id="cb1f3-235">Создание запросов в реальном времени данных tootransform</span><span class="sxs-lookup"><span data-stu-id="cb1f3-235">Create queries tootransform real-time data</span></span>

<span data-ttu-id="cb1f3-236">На этом этапе необходимо настроить tooread поток входящих данных задания Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-236">At this point, you have a Stream Analytics job set up tooread an incoming data stream.</span></span> <span data-ttu-id="cb1f3-237">Hello следующим шагом является toocreate преобразование, которое анализирует данные hello в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-237">hello next step is toocreate a transformation that analyzes hello data in real time.</span></span> <span data-ttu-id="cb1f3-238">Сделаем это с помощью создания запроса.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-238">You do this by creating a query.</span></span> <span data-ttu-id="cb1f3-239">Stream Analytics поддерживает простую декларативную модель запроса для описания преобразований для обработки в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-239">Stream Analytics supports a simple, declarative query model that describes transformations for real-time processing.</span></span> <span data-ttu-id="cb1f3-240">Hello запросы используют SQL-подобного языка, который имеет некоторые расширения определенного toostream analytics.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-240">hello queries use a SQL-like language that has some extensions specific toostream analytics.</span></span> 

<span data-ttu-id="cb1f3-241">Очень простой запрос может считать всех входящих данных hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-241">A very simple query might simply read all hello incoming data.</span></span> <span data-ttu-id="cb1f3-242">Тем не менее часто создают запросы, которые выглядят для конкретных данных, или для связи в данных hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-242">However, you often create queries that look for specific data or for relationships in hello data.</span></span> <span data-ttu-id="cb1f3-243">В этом разделе учебника hello будет создать и проверить несколько запросов toolearn несколькими способами, в которых можно преобразовать входной поток для анализа.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-243">In this section of hello tutorial, you will create and test several queries toolearn a few ways in which you can transform an input stream for analysis.</span></span> 

<span data-ttu-id="cb1f3-244">запросы Hello, созданный здесь будет только с экрана hello преобразованные данные toohello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-244">hello queries you create here will just display hello transformed data toohello screen.</span></span> <span data-ttu-id="cb1f3-245">В следующем разделе вы настроите приемник выходных данных и запрос, который записывает приемник toothat hello преобразованные данные.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-245">In a later section, you'll configure an output sink and a query that writes hello transformed data toothat sink.</span></span>

<span data-ttu-id="cb1f3-246">toolearn Дополнительные сведения о языке hello. в разделе hello [Справка языка запросов Azure Stream Analytics](https://msdn.microsoft.com/library/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-246">toolearn more about hello language, see hello [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span></span>

### <a name="get-sample-data-for-testing-queries"></a><span data-ttu-id="cb1f3-247">Получение образца данных для запросов для тестирования</span><span class="sxs-lookup"><span data-stu-id="cb1f3-247">Get sample data for testing queries</span></span>

<span data-ttu-id="cb1f3-248">приложение Hello TelcoGenerator отправляет концентратора событий toohello вызовов записи и задание Stream Analytics является настроенным tooread из концентратора событий hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-248">hello TelcoGenerator app is sending call records toohello event hub, and your Stream Analytics job is configured tooread from hello event hub.</span></span> <span data-ttu-id="cb1f3-249">Можно использовать запрос tootest hello задания toomake убедиться, что он правильно чтения.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-249">You can use a query tootest hello job toomake sure that it's reading correctly.</span></span> <span data-ttu-id="cb1f3-250">слишком проверить запрос в hello консоли Azure, необходимо образцов данных.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-250">too test a query in hello Azure console, you need sample data.</span></span> <span data-ttu-id="cb1f3-251">В этом пошаговом руководстве будет извлечь образец данных из потока hello, поступают в концентратор событий hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-251">For this walkthrough, you'll extract sample data from hello stream that's coming into hello event hub.</span></span>

1. <span data-ttu-id="cb1f3-252">Убедитесь, что запущен и формирует вызовах, записываемых TelcoGenerator приложение hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-252">Make sure that hello TelcoGenerator app is running and producing call records.</span></span>
2. <span data-ttu-id="cb1f3-253">На портале hello возвращают колонке задание Streaming Analytics toohello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-253">In hello portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="cb1f3-254">(При закрытии колонке hello поиск `sa_frauddetection_job_demo` в hello **все ресурсы** колонке.)</span><span class="sxs-lookup"><span data-stu-id="cb1f3-254">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
3. <span data-ttu-id="cb1f3-255">Нажмите кнопку hello **запроса** поле.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-255">Click hello **Query** box.</span></span> <span data-ttu-id="cb1f3-256">Azure перечислены hello входов и выходов, которые настроены для задания hello и позволяет создать запрос, который позволяет преобразования hello входного потока при передаче toohello выходные данные.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-256">Azure lists hello inputs and outputs that are configured for hello job, and lets you create a query that lets you transform hello input stream as it is sent toohello output.</span></span>
4. <span data-ttu-id="cb1f3-257">В hello **запроса** колонке нажмите кнопку Далее toohello точек hello `CallStream` входных данных, а затем выберите **выборку данных из входных данных**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-257">In hello **Query** blade, click hello dots next toohello `CallStream` input and then select **Sample data from input**.</span></span>

    ![Меню параметров toouse образцы данных для hello запись в задание Streaming Analytics с «Образец данных из входных данных» выбран](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sample-data-from-input.png)

    <span data-ttu-id="cb1f3-259">Это открывает колонку, которая позволяет указать, сколько tooget данных образца, определенные в терминах продолжительность tooread hello входного потока.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-259">This opens a blade that lets you specify how much sample data tooget, defined in terms of how long tooread hello input stream.</span></span>

5. <span data-ttu-id="cb1f3-260">Задать **минут** too3 и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-260">Set **Minutes** too3 and then click **OK**.</span></span> 
    
    ![Параметры выборки hello входного потока с выбран «3 минут».](./media/stream-analytics-real-time-fraud-detection/stream-analytics-input-create-sample-data.png)

    <span data-ttu-id="cb1f3-262">Azure образцы данные из входного потока hello за 3 минуты и предлагает при готовности данных образец hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-262">Azure samples 3 minutes' worth of data from hello input stream and notifies you when hello sample data is ready.</span></span> <span data-ttu-id="cb1f3-263">(Это займет некоторое время.)</span><span class="sxs-lookup"><span data-stu-id="cb1f3-263">(This takes a short while.)</span></span> 

<span data-ttu-id="cb1f3-264">данные образца Hello временно хранятся и доступны после открытия окна запроса hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-264">hello sample data is stored temporarily and is available while you have hello query window open.</span></span> <span data-ttu-id="cb1f3-265">Если закрыть окно запроса hello данные образца hello удаляются, и будет toocreate новый набор образца данных.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-265">If you close hello query window, hello sample data is discarded, and you'll have toocreate a new set of sample data.</span></span> 

<span data-ttu-id="cb1f3-266">В качестве альтернативы можно получить JSON-файл, содержащую образец данных [из GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json)и затем передать файл, .json toouse как образцы данных для hello `CallStream` ввода.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-266">As an alternative, you can get a .json file that has sample data in it [from GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), and then upload that .json file toouse as sample data for hello `CallStream` input .</span></span> 

### <a name="test-using-a-pass-through-query"></a><span data-ttu-id="cb1f3-267">Проверка с помощью запроса к серверу</span><span class="sxs-lookup"><span data-stu-id="cb1f3-267">Test using a pass-through query</span></span>

<span data-ttu-id="cb1f3-268">Следует tooarchive каждого события можно использовать tooread передаваемый запрос всех полей hello в hello полезных данных события hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-268">If you want tooarchive every event, you can use a pass-through query tooread all hello fields in hello payload of hello event.</span></span>

1. <span data-ttu-id="cb1f3-269">В окне запроса hello введите этот запрос:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-269">In hello query window, enter this query:</span></span>

        SELECT 
            *
        FROM 
            CallStream

    >[!NOTE]
    ><span data-ttu-id="cb1f3-270">Как и при использовании SQL, регистр ключевых слов не учитывается, пробел не имеет значения.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-270">As with SQL, keywords are not case sensitive, and whitespace is not significant.</span></span>

    <span data-ttu-id="cb1f3-271">В этом запросе `CallStream` hello псевдонимов, которые указаны при создании hello входных данных.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-271">In this query, `CallStream` is hello alias that you specified when you created hello input.</span></span> <span data-ttu-id="cb1f3-272">Если вы использовали другой псевдоним, используйте его, соответственно.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-272">If you used a different alias, use that name instead.</span></span>

2. <span data-ttu-id="cb1f3-273">Нажмите **Проверить**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-273">Click **Test**.</span></span>

    <span data-ttu-id="cb1f3-274">Задание Stream Analytics Hello выполняет запрос hello данных образец hello и выходных данных hello hello нижней части окна hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-274">hello Stream Analytics job runs hello query against hello sample data and displays hello output at hello bottom of hello window.</span></span> <span data-ttu-id="cb1f3-275">Это означает, что hello концентратора событий и задание Streaming Analytics hello настроены правильно.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-275">This tells you that hello event hub and hello Streaming Analytics job are configured correctly.</span></span> <span data-ttu-id="cb1f3-276">(Как уже отмечалось, позже вы создадите приемника выходных данных этого hello запроса может записывать данные в.)</span><span class="sxs-lookup"><span data-stu-id="cb1f3-276">(As noted, later you'll create an output sink that hello query can write data to.)</span></span>

    ![Выходные данные задания Stream Analytics, отображающие 73 созданные записи](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output.png)

    <span data-ttu-id="cb1f3-278">точное число записей, отображаемых в Hello зависит количество записей были записаны в вашем примере 3 минуты.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-278">hello exact number of records you see will depend on how many records were captured in your 3-minute sample.</span></span>
 
### <a name="reduce-hello-number-of-fields-using-a-column-projection"></a><span data-ttu-id="cb1f3-279">Сократите число hello полей с помощью проекции столбца</span><span class="sxs-lookup"><span data-stu-id="cb1f3-279">Reduce hello number of fields using a column projection</span></span>

<span data-ttu-id="cb1f3-280">Во многих случаях анализа не все столбцы hello из входного потока hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-280">In many cases, your analysis doesn't need all hello columns from hello input stream.</span></span> <span data-ttu-id="cb1f3-281">Можно использовать запрос tooproject, меньшего количества возвращаемых полей, чем в запросе к серверу hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-281">You can use a query tooproject a smaller set of returned fields than in hello pass-through query.</span></span>

1. <span data-ttu-id="cb1f3-282">Изменить запрос hello в редакторе toohello hello кода ниже:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-282">Change hello query in hello code editor toohello following:</span></span>

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum 
        FROM 
            CallStream

2. <span data-ttu-id="cb1f3-283">Снова щелкните **Проверка**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-283">Click **Test** again.</span></span> 

    ![Выходные данные задания Stream Analytics для заполнения столбцов, отображающие 25 созданных записей](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-projection.png)
 
### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a><span data-ttu-id="cb1f3-285">Количество входящих вызовов по региону: "переворачивающееся" окно с агрегированием</span><span class="sxs-lookup"><span data-stu-id="cb1f3-285">Count incoming calls by region: Tumbling window with aggregation</span></span>

<span data-ttu-id="cb1f3-286">Предположим, что следует toocount hello число входящих вызовов в одном регионе.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-286">Suppose you want toocount hello number of incoming calls per region.</span></span> <span data-ttu-id="cb1f3-287">В потоковой передачи данных, при необходимости tooperform агрегатных функций, например инвентаризации, необходим toosegment hello поток в temporal единицы (поскольку фактически бесконечные hello непосредственно источник данных).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-287">In streaming data, when you want tooperform aggregate functions like counting, you need toosegment hello stream into temporal units (since hello data stream itself is effectively endless).</span></span> <span data-ttu-id="cb1f3-288">Это можно сделать с помощью [функции окна](stream-analytics-window-functions.md) Streaming Analytics.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-288">You do this using a Streaming Analytics [window function](stream-analytics-window-functions.md).</span></span> <span data-ttu-id="cb1f3-289">С hello данных в этом окне можно будет работать как единое целое.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-289">You can then work with hello data inside that window as a unit.</span></span>

<span data-ttu-id="cb1f3-290">Для такого преобразования нужна последовательность временных окон, которые не перекрываются. У каждого окна будет дискретный набор данных, которые можно группировать и статистически обрабатывать.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-290">For this transformation, you want a sequence of temporal windows that don't overlap—each window will have a discrete set of data that you can group and aggregate.</span></span> <span data-ttu-id="cb1f3-291">Этот тип окна находится ссылка tooas *«переворачивающееся» окно* .</span><span class="sxs-lookup"><span data-stu-id="cb1f3-291">This type of window is referred tooas a *Tumbling window* .</span></span> <span data-ttu-id="cb1f3-292">В «переворачивающееся» окно приветствия, можно получить количество входящих вызовов hello, сгруппированные по `SwitchNum`, представляющий hello стране, где поступил вызов hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-292">Within hello Tumbling window, you can get a count of hello incoming calls grouped by `SwitchNum`, which represents hello country where hello call originated.</span></span> 

1. <span data-ttu-id="cb1f3-293">Изменить запрос hello в редакторе toohello hello кода ниже:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-293">Change hello query in hello code editor toohello following:</span></span>

        SELECT 
            System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
        FROM
            CallStream TIMESTAMP BY CallRecTime 
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    <span data-ttu-id="cb1f3-294">Этот запрос использует hello `Timestamp By` ключевое слово в hello `FROM` toospecify предложение, какое поле timestamp в hello входной поток toouse toodefine hello «переворачивающееся» окно.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-294">This query uses hello `Timestamp By` keyword in hello `FROM` clause toospecify which timestamp field in hello input stream toouse toodefine hello Tumbling window.</span></span> <span data-ttu-id="cb1f3-295">В этом случае окно hello делит hello данные на сегменты hello `CallRecTime` поля в каждой записи.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-295">In this case, hello window divides hello data into segments by hello `CallRecTime` field in each record.</span></span> <span data-ttu-id="cb1f3-296">(Если не указано, операция над окнами hello использует время hello, поступающих каждого события в концентратор событий hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-296">(If no field is specified, hello windowing operation uses hello time that each event arrives at hello event hub.</span></span> <span data-ttu-id="cb1f3-297">Дополнительные сведения см. в разделе о времени поступления и времени приложения в [справочнике по языку запросов Stream Analytics](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-297">See "Arrival Time Vs Application Time" in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span></span> 

    <span data-ttu-id="cb1f3-298">проекция Hello включает `System.Timestamp`, который возвращает отметку времени для hello конца каждого окна.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-298">hello projection includes `System.Timestamp`, which returns a timestamp for hello end of each window.</span></span> 

    <span data-ttu-id="cb1f3-299">toospecify, что требуется toouse «переворачивающегося» окна, используйте hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) функции hello `GROUP BY `предложения.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-299">toospecify that you want toouse a Tumbling window, you use hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) function in hello `GROUP BY `clause.</span></span> <span data-ttu-id="cb1f3-300">В функции hello укажите единицу времени (в любом из tooa в микросекунды день) и размер (количество единиц).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-300">In hello function, you specify a time unit (anywhere from a microsecond tooa day) and a window size (how many units).</span></span> <span data-ttu-id="cb1f3-301">В этом примере «переворачивающееся» окно hello состоит из каждые 5 секунд, вы получите число по странам для вызовов, накопленные за каждые 5 секунд.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-301">In this example, hello Tumbling window consists of 5-second intervals, so you will get a count by country for every 5 seconds' worth of calls.</span></span>

2. <span data-ttu-id="cb1f3-302">Снова щелкните **Проверка**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-302">Click **Test** again.</span></span> <span data-ttu-id="cb1f3-303">В результатах hello, обратите внимание, отметки времени hello в **WindowEnd** , с шагом 5 секунд.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-303">In hello results, notice that hello timestamps under **WindowEnd** are in 5-second increments.</span></span>

    ![Выходные данные задания Stream Analytics для статистической обработки, отображающие 13 созданных записей](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-aggregation.png)
 
### <a name="detect-sim-fraud-using-a-self-join"></a><span data-ttu-id="cb1f3-305">Выявление мошенничества в отношении SIM-карт с помощью самосоединения</span><span class="sxs-lookup"><span data-stu-id="cb1f3-305">Detect SIM fraud using a self-join</span></span>

<span data-ttu-id="cb1f3-306">В этом примере мы считаем мошеннические использования toobe вызовов, которые получаются из hello же пользователя, но в разных местах в течение 5 секунд друг от друга.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-306">For this example, we can consider fraudulent usage toobe calls that originate from hello same user but in different locations within 5 seconds of one another.</span></span> <span data-ttu-id="cb1f3-307">Например, hello того же пользователя не может вызвать основаниях из hello США и Австралии на hello то же время.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-307">For example, hello same user can't legitimately make a call from hello US and Australia at hello same time.</span></span> 

<span data-ttu-id="cb1f3-308">toocheck в этих случаях можно использовать самосоединение hello потоковой передачи данных toojoin hello поток tooitself основании hello `CallRecTime` значение.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-308">toocheck for these cases, you can use a self-join of hello streaming data toojoin hello stream tooitself based on hello `CallRecTime` value.</span></span> <span data-ttu-id="cb1f3-309">Затем можно найти для вызова записывает там, где hello `CallingIMSI` Здравствуйте значение (hello, рассчитанные на число), таким же, но hello `SwitchNum` значение (Страна происхождения) не является таким же hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-309">You can then look for call records where hello `CallingIMSI` value (hello originating number) is hello same, but hello `SwitchNum` value (country of origin) is not hello same.</span></span>

<span data-ttu-id="cb1f3-310">При использовании соединения с потоковой передачи данных hello соединения необходимо предоставить некоторые ограничения на насколько hello сопоставление строк можно разделить вовремя.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-310">When you use a join with streaming data, hello join must provide some limits on how far hello matching rows can be separated in time.</span></span> <span data-ttu-id="cb1f3-311">(Как уже отмечалось, hello, потоковая передача данных — фактически бесконечный). заданных ограничений по времени Hello соотношение hello hello `ON` предложения join hello с помощью hello `DATEDIFF` функции.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-311">(As noted earlier, hello streaming data is effectively endless.) hello time bounds for hello relationship are specified inside hello `ON` clause of hello join, using hello `DATEDIFF` function .</span></span> <span data-ttu-id="cb1f3-312">В этом случае hello соединение основано на 5-секундного интервала данных вызова.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-312">In this case, hello join is based on a 5-second interval of call data .</span></span>

1. <span data-ttu-id="cb1f3-313">Изменить запрос hello в редакторе toohello hello кода ниже:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-313">Change hello query in hello code editor toohello following:</span></span> 

        SELECT  System.Timestamp as Time, 
            CS1.CallingIMSI, 
            CS1.CallingNum as CallingNum1, 
            CS2.CallingNum as CallingNum2, 
            CS1.SwitchNum as Switch1, 
            CS2.SwitchNum as Switch2 
        FROM CallStream CS1 TIMESTAMP BY CallRecTime 
            JOIN CallStream CS2 TIMESTAMP BY CallRecTime 
            ON CS1.CallingIMSI = CS2.CallingIMSI 
            AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5 
        WHERE CS1.SwitchNum != CS2.SwitchNum

    <span data-ttu-id="cb1f3-314">Этот запрос подобен любого другого соединения SQL, за исключением hello `DATEDIFF` функции в соединении hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-314">This query is like any SQL join except for hello `DATEDIFF` function in hello join.</span></span> <span data-ttu-id="cb1f3-315">Это — это версия `DATEDIFF` это конкретных tooStreaming аналитика, и он должен указываться в hello `ON...BETWEEN` предложения.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-315">This is a version of `DATEDIFF` that's specific tooStreaming Analytics, and it must appear in hello `ON...BETWEEN` clause.</span></span> <span data-ttu-id="cb1f3-316">Параметры Hello — единица измерения времени (в этом примере секунды) и псевдонимы hello hello двух источников для hello соединения.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-316">hello parameters are a time unit (seconds in this example) and hello aliases of hello two sources for hello join.</span></span> <span data-ttu-id="cb1f3-317">(Это отличается от стандартного SQL hello `DATEDIFF` функции.)</span><span class="sxs-lookup"><span data-stu-id="cb1f3-317">(This is different from hello standard SQL `DATEDIFF` function.)</span></span> 

    <span data-ttu-id="cb1f3-318">Hello `WHERE` предложение включает hello условие, которое помечает мошеннические вызов hello: hello исходного ключи не являются hello таким же.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-318">hello `WHERE` clause includes hello condition that flags hello fraudulent call: hello originating switches are not hello same.</span></span> 

2. <span data-ttu-id="cb1f3-319">Снова щелкните **Проверка**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-319">Click **Test** again.</span></span> 

    ![Выходные данные задания Stream Analytics для самосоединения, отображающие 6 созданных записей](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-self-join.png)

3. <span data-ttu-id="cb1f3-321">Щелкните **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-321">Click **Save**.</span></span> <span data-ttu-id="cb1f3-322">Это экономит hello самосоединение запроса как часть задание Streaming Analytics hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-322">This saves hello self-join query as part of hello Streaming Analytics job.</span></span> <span data-ttu-id="cb1f3-323">(Он не сохраняет данные образца hello).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-323">(It doesn't save hello sample data.)</span></span>

    ![Сохранение задания Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-save-button-new-portal.png)

## <a name="create-an-output-sink-toostore-transformed-data"></a><span data-ttu-id="cb1f3-325">Создать выходные данные преобразования toostore приемника</span><span class="sxs-lookup"><span data-stu-id="cb1f3-325">Create an output sink toostore transformed data</span></span>

<span data-ttu-id="cb1f3-326">Поток событий, событий ввода tooingest концентратора событий и запроса tooperform преобразования определили hello потока.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-326">You've defined an event stream, an event hub input tooingest events, and a query tooperform a transformation over hello stream.</span></span> <span data-ttu-id="cb1f3-327">Hello последний шаг — toodefine приемника выходных данных для задания hello, т. е hello toowrite месте преобразования потока.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-327">hello last step is toodefine an output sink for hello job—that is, a place toowrite hello transformed stream to.</span></span> 

<span data-ttu-id="cb1f3-328">Вы можете использовать многие ресурсы в качестве приемников выходных данных — базу данных SQL Server, хранилище таблиц, хранилище озера данных, Power BI и даже другой концентратор событий.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-328">You can use many resources as output sinks—a SQL Server database, table storage, Data Lake storage, Power BI, and even another event hub.</span></span> <span data-ttu-id="cb1f3-329">В этом учебнике вы будете писать tooAzure hello потока хранилища больших двоичных объектов, что является обычной вариантом для сбора данных сведения о событии для последующего анализа, так как она предусматривает неструктурированных данных.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-329">For this tutorial, you'll write hello stream tooAzure Blob Storage, which is a typical choice for collecting event information for later analysis, since it accommodates unstructured data .</span></span>

<span data-ttu-id="cb1f3-330">Если у вас есть учетная запись хранения BLOB-объектов, вы можете ее использовать.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-330">If you have an existing blob storage account, you can use that.</span></span> <span data-ttu-id="cb1f3-331">В этом учебнике мы покажем, как toocreate новое хранилище учетную запись только для этого учебника.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-331">For this tutorial, we'll show you how toocreate a new storage account just for this tutorial.</span></span>

### <a name="create-an-azure-blob-storage-account"></a><span data-ttu-id="cb1f3-332">Создание учетной записи хранения BLOB-объектов Azure</span><span class="sxs-lookup"><span data-stu-id="cb1f3-332">Create an Azure Blob Storage account</span></span>

1. <span data-ttu-id="cb1f3-333">В hello портал Azure возвращают колонке задание Streaming Analytics toohello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-333">In hello Azure portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="cb1f3-334">(При закрытии колонке hello поиск `sa_frauddetection_job_demo` в hello **все ресурсы** колонке.)</span><span class="sxs-lookup"><span data-stu-id="cb1f3-334">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
2. <span data-ttu-id="cb1f3-335">В hello **топологии задания** щелкните hello **вывода** поле.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-335">In hello **Job Topology** section, click hello **Output** box.</span></span> 
3. <span data-ttu-id="cb1f3-336">В hello **выходов** колонка, щелкните  **+ &nbsp;добавить** и затем заполнить hello колонка со следующими значениями:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-336">In hello **Outputs** blade, click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="cb1f3-337">**Псевдоним вывода**: hello используйте имя `CallStream-FraudulentCalls`.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-337">**Output alias**: Use hello name `CallStream-FraudulentCalls`.</span></span> 
    * <span data-ttu-id="cb1f3-338">**Приемник.** Выберите **хранилище BLOB-объектов**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-338">**Sink**: Select **Blob storage**.</span></span>
    * <span data-ttu-id="cb1f3-339">**Параметры импорта**: выберите **Использовать хранилище BLOB-объектов из текущей подписки**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-339">**Import options**: Select **Use blob storage from current subscription**.</span></span>
    * <span data-ttu-id="cb1f3-340">**Учетная запись хранения**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-340">**Storage account**.</span></span> <span data-ttu-id="cb1f3-341">Выберите **Создать новую учетную запись хранения.**</span><span class="sxs-lookup"><span data-stu-id="cb1f3-341">Select **Create new storage account.**</span></span>
    * <span data-ttu-id="cb1f3-342">**Учетная запись хранения** (второе диалоговое окно).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-342">**Storage account** (second box).</span></span> <span data-ttu-id="cb1f3-343">Введите `YOURNAMEsademo`, где `YOURNAME` — ваше имя или другая уникальная строка.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-343">Enter `YOURNAMEsademo`, where `YOURNAME` is your name or another unique string.</span></span> <span data-ttu-id="cb1f3-344">Имя Hello можно использовать только строчные буквы и цифры и должно быть уникальным среди Azure.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-344">hello name can use only lowercase letters and numbers, and it must be unique across Azure.</span></span> 
    * <span data-ttu-id="cb1f3-345">**Контейнер**:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-345">**Container**.</span></span> <span data-ttu-id="cb1f3-346">Укажите `sa-fraudulentcalls-demo`.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-346">Enter `sa-fraudulentcalls-demo`.</span></span>
    <span data-ttu-id="cb1f3-347">Имя учетной записи хранения Hello и имя контейнера, используемые вместе tooprovide URI для хранилища больших двоичных объектов hello, следующим образом:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-347">hello storage account name and container name are used together tooprovide a URI for hello blob storage, like this:</span></span> 

    `http://yournamesademo.blob.core.windows.net/sa-fraudulentcalls-demo/...`
    
    ![Колонка "Новые выходные данные" для задания Stream Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-output-blob-storage-new-console.png)
    
4. <span data-ttu-id="cb1f3-349">Щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-349">Click **Create**.</span></span> 

    <span data-ttu-id="cb1f3-350">Azure создает учетную запись хранения hello и автоматически создает ключ.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-350">Azure creates hello storage account and generates a key automatically.</span></span> 

5. <span data-ttu-id="cb1f3-351">Закрыть hello **выходов** колонку.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-351">Close hello **Outputs** blade.</span></span> 

## <a name="start-hello-streaming-analytics-job"></a><span data-ttu-id="cb1f3-352">Запустить задание Streaming Analytics hello</span><span class="sxs-lookup"><span data-stu-id="cb1f3-352">Start hello Streaming Analytics job</span></span>

<span data-ttu-id="cb1f3-353">Теперь настроен Hello задания.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-353">hello job is now configured.</span></span> <span data-ttu-id="cb1f3-354">Вы указали входных данных (hello концентратора событий), преобразование (toolook запроса hello мошеннические вызовов) и выход (хранилище больших двоичных объектов).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-354">You've specified an input (hello event hub), a transformation (hello query toolook for fraudulent calls), and an output (blob storage).</span></span> <span data-ttu-id="cb1f3-355">Теперь вы можете запустить задание hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-355">You can now start hello job.</span></span> 

1. <span data-ttu-id="cb1f3-356">Убедитесь, что приложение hello TelcoGenerator выполняется.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-356">Make sure hello TelcoGenerator app is running.</span></span>

2. <span data-ttu-id="cb1f3-357">В колонке hello задания, нажмите кнопку **запустить**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-357">In hello job blade, click **Start**.</span></span>

    ![Запустить задание Stream Analytics hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-output.png)

3. <span data-ttu-id="cb1f3-359">В hello **запуска задания** колонке для вывода время запуска задания, выберите **теперь**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-359">In hello **Start job** blade, for Job output start time, select **Now**.</span></span> 

4. <span data-ttu-id="cb1f3-360">Нажмите **Запуск**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-360">Click **Start**.</span></span> 

    ![Колонка «Запустить задание» для задания Stream Analytics hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-job-blade.png)

    <span data-ttu-id="cb1f3-362">Azure уведомляет о запуска задания hello и в колонке задания hello hello состояние отображается как **под управлением**.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-362">Azure notifies you when hello job has started, and in hello job blade, hello status is displayed as **Running**.</span></span>

    ![Состояние задания Stream Analytics, отображающее состояние "Выполнение"](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-running-status.png)
    

## <a name="examine-hello-transformed-data"></a><span data-ttu-id="cb1f3-364">Проверьте данные преобразуются hello</span><span class="sxs-lookup"><span data-stu-id="cb1f3-364">Examine hello transformed data</span></span>

<span data-ttu-id="cb1f3-365">Теперь у вас есть готовое задание Streaming Analytics.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-365">You now have a complete Streaming Analytics job.</span></span> <span data-ttu-id="cb1f3-366">Hello задания проверки потока метаданных телефонный звонок, поиск мошеннические телефонные звонки в режиме реального времени и записи информации об этих toostorage мошеннические вызовы.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-366">hello job is examining a stream of phone call metadata, looking for fraudulent phone calls in real time, and writing information about those fraudulent calls toostorage.</span></span> 

<span data-ttu-id="cb1f3-367">toocomplete этого учебника вы можете toolook hello данных, записанных задание Streaming Analytics hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-367">toocomplete this tutorial, you might want toolook at hello data being captured by hello Streaming Analytics job.</span></span> <span data-ttu-id="cb1f3-368">данные Hello записывается tooAzure хранилища больших двоичных фрагментами (файлы).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-368">hello data is being written tooAzure Blog Storage in chunks (files).</span></span> <span data-ttu-id="cb1f3-369">Вы можете использовать любое средство, считывающее хранилище BLOB-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-369">You can use any tool that reads Azure Blob Storage.</span></span> <span data-ttu-id="cb1f3-370">Как упоминалось в разделе предварительных требований hello, можно использовать расширения Azure в Visual Studio, или можно воспользоваться инструментом [обозреватель хранилищ Azure](http://storageexplorer.com/) или [обозреватель Azure](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-370">As noted in hello Prerequisites section, you can use Azure extensions in Visual Studio, or you can use a tool like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

<span data-ttu-id="cb1f3-371">При проверке hello содержимое файла в хранилище больших двоичных объектов, появится примерно hello следующим образом:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-371">When you examine hello contents of a file in blob storage, you see something like hello following :</span></span>

![Хранилище BLOB-объектов Azure с выходными данными Streaming Analytics](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-blob-storage-view.png)
 

## <a name="clean-up-resources"></a><span data-ttu-id="cb1f3-373">Очистка ресурсов</span><span class="sxs-lookup"><span data-stu-id="cb1f3-373">Clean up resources</span></span>

<span data-ttu-id="cb1f3-374">У нас есть дополнительные статьи, продолжите hello мошенничества сценарии, которые используют ресурсы hello, созданные в этом учебнике.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-374">We have additional articles that continue with hello fraud-detection scenario and that use hello resources that you've created in this tutorial.</span></span> <span data-ttu-id="cb1f3-375">Следует toocontinue просмотра предложений hello под **дальнейшие действия** позже.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-375">If you want toocontinue, see hello suggestions under **Next steps** later.</span></span>

<span data-ttu-id="cb1f3-376">Тем не менее если не требуется hello ресурсы, которые вы создали завершения, их можно удалить, чтобы вы не взимается ненужные Azure.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-376">However, if you're done and you don't need hello resources you've created, you can delete them so that you don't incur unnecessary Azure charges.</span></span> <span data-ttu-id="cb1f3-377">В этом случае мы предлагаем, что hello следующие:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-377">In that case, we suggest that you do hello following:</span></span>

1. <span data-ttu-id="cb1f3-378">Остановите задание Streaming Analytics hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-378">Stop hello Streaming Analytics job.</span></span> <span data-ttu-id="cb1f3-379">В hello **заданий** колонка, щелкните **остановить** вверху hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-379">In hello **Jobs** blade, click **Stop** at hello top.</span></span>
2. <span data-ttu-id="cb1f3-380">Остановите приложение hello Telco генератора.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-380">Stop hello Telco Generator app.</span></span> <span data-ttu-id="cb1f3-381">В окне команд hello первоначальное приложение hello нажмите Ctrl + C.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-381">In hello command window where you started hello app, press Ctrl+C.</span></span>
3. <span data-ttu-id="cb1f3-382">Если вы создали новую учетную запись хранения BLOB-объектов только для работы с этим руководством, удалите ее.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-382">If you created a new blob storage account just for this tutorial, delete it.</span></span> 
4. <span data-ttu-id="cb1f3-383">Удалите задание Streaming Analytics hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-383">Delete hello Streaming Analytics job.</span></span>
5. <span data-ttu-id="cb1f3-384">Удаление концентратора событий hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-384">Delete hello event hub.</span></span>
6. <span data-ttu-id="cb1f3-385">Удалите пространство имен концентратора событий hello.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-385">Delete hello event hub namespace.</span></span>

## <a name="get-support"></a><span data-ttu-id="cb1f3-386">Получение поддержки</span><span class="sxs-lookup"><span data-stu-id="cb1f3-386">Get support</span></span>

<span data-ttu-id="cb1f3-387">За дополнительной помощью обращайтесь на наш [форум Azure Stream Analytics](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-387">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="cb1f3-388">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="cb1f3-388">Next steps</span></span>

<span data-ttu-id="cb1f3-389">Этот учебник можно будет продолжить hello в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-389">You can continue this tutorial with hello following articles:</span></span>

* <span data-ttu-id="cb1f3-390">[Stream Analytics и Power BI. Панель мониторинга для анализа потоковой передачи данных](stream-analytics-power-bi-dashboard.md).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-390">[Stream Analytics and Power BI: A real-time analytics dashboard for streaming data](stream-analytics-power-bi-dashboard.md).</span></span> <span data-ttu-id="cb1f3-391">В этой статье показано, как toosend hello выходные данные TelCo hello Stream Analytics задания tooPower бизнес-Аналитики для визуализации в режиме реального времени и анализа.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-391">This article shows you how toosend hello TelCo output of hello Stream Analytics job tooPower BI for real-time visualization and analysis.</span></span>
* <span data-ttu-id="cb1f3-392">[Как toostore данные из Azure Stream Analytics в кэше Redis для Azure с помощью функций Azure](stream-analytics-functions-redis.md).</span><span class="sxs-lookup"><span data-stu-id="cb1f3-392">[How toostore data from Azure Stream Analytics in an Azure Redis Cache using Azure Functions](stream-analytics-functions-redis.md).</span></span> <span data-ttu-id="cb1f3-393">В этой статье показано, как мошеннические toowrite функции Azure toouse вызывает tooan кэша redis для Azure — с помощью очереди Service Bus.</span><span class="sxs-lookup"><span data-stu-id="cb1f3-393">This article shows how toouse Azure Functions toowrite fraudulent calls tooan Azure Redis cache via a Service Bus queue.</span></span>

<span data-ttu-id="cb1f3-394">Узнать больше о Stream Analytics в целом вы можете с помощью следующих ресурсов:</span><span class="sxs-lookup"><span data-stu-id="cb1f3-394">For more information about Stream Analytics in general, try these articles:</span></span>

* [<span data-ttu-id="cb1f3-395">Введение tooAzure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="cb1f3-395">Introduction tooAzure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="cb1f3-396">Масштабирование заданий в службе Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="cb1f3-396">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="cb1f3-397">Справочник по языку запросов Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="cb1f3-397">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="cb1f3-398">Справочник по API-интерфейсу REST управления Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="cb1f3-398">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
