---
title: "рекомендации aaaPerformance - базы данных SQL Azure | Документы Microsoft"
description: "Hello базы данных SQL Azure предоставляет рекомендации для баз данных SQL, можно повысить производительность текущего запроса."
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: monicar
ms.assetid: 1db441ff-58f5-45da-8d38-b54dc2aa6145
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/05/2017
ms.author: sstein
ms.openlocfilehash: 77db338a0a395aec78c9e02849ae5ba4f2d01680
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="performance-recommendations"></a>Рекомендации по производительности

База данных SQL Azure узнает и адаптирует вместе с приложением и предоставляет настраиваемый рекомендации, позволяя toomaximize hello производительности баз данных SQL. Производительность постоянно оценивается путем анализа журнала использования базы данных SQL. рекомендации Hello, основаны на шаблоне уникальный рабочей нагрузки базы данных и повысить его производительность.

> [!NOTE]
> Для применения рекомендаций мы советуем включить автоматическую настройку базы данных. Дополнительные сведения см. в разделе [Автоматическая настройка](sql-database-automatic-tuning.md).
>

## <a name="create-index-recommendations"></a>Рекомендации по созданию индексов
База данных SQL Azure постоянно отслеживает при выполнении запросов hello и идентифицирует hello индексы, которые может улучшить производительность hello. После того, как система удостоверится в отсутствии определенного индекса, создается новая рекомендация **Создание индекса**. В результате Azure достоверности сборки базы данных SQL путем оценки индекса hello прирост производительности до времени. В зависимости от hello Предполагаемый рост производительности рекомендации, классифицируются как высокий, средний или низкий. 

Индексы, созданные с помощью рекомендаций, всегда помечаются флагом auto_created. Узнать, какие индексы имеют флаг auto_created, можно, просмотрев представление sys.indexes. Автоматически созданные индексы не блокируют команды ALTER и RENAME. При попытке toodrop hello столбец, который был автоматически создан индекс по нему hello команда передает и hello автоматически создать индекс удаляется также командой hello. Обычные индексы заблокирует команду ALTER или ПЕРЕИМЕНУЙТЕ hello на индексированные столбцы.

После создания hello рекомендация индекс применяется, база данных SQL Azure будет сравнить производительность запросов hello с hello базового уровня производительности. Если новый индекс, обозначенных улучшения производительности hello, рекомендация будет отмечен как успешно, и влияние отчет будет доступен. В случае, если индекс hello не дают преимущества hello, он будет автоматически использоваться. Таким образом база данных SQL Azure гарантирует, что используя рекомендации только улучшит производительность hello базы данных.

Любой **создать индекс** рекомендация имеет пассивный политику, которая не позволит Применение рекомендаций hello, если использование DTU hello базы данных или пула было превышает 80% в последние 20 минут или если hello хранилища превышает 90% использования. В этом случае будет отложена hello рекомендации.

## <a name="drop-index-recommendations"></a>Рекомендации по удалению индексов
В дополнение к этому toodetecting отсутствующий индекс базы данных SQL Azure постоянно анализирует производительность hello существующие индексы. Если индекс не используется, база данных SQL Azure порекомендует удалить его. Удаление индекса рекомендуется в двух случаях:
* индекс является дубликатом другого индекса (созданного на основе того же столбца, схемы секций и фильтров);
* индекс не используется в течение длительного времени (93 дня).

Удаление рекомендованных индексов также проходят проверку hello после реализации. Повысить эффективность выполнения hello hello влияние отчета будут доступны. Если будет обнаружено снижение производительности, применение рекомендации будет отменено.


## <a name="parameterize-queries-recommendations"></a>Рекомендации по параметризации запросов
**Параметризация запросов везде** рекомендации отображаются, когда имеется один или несколько запросов, которые постоянно перекомпиляции, но в конечном итоге Здравствуйте, одинаковый план выполнения запроса. Это условие открывает tooapply возможность принудительной параметризации, что позволит планов запросов toobe кэшируются и повторно использовать в будущих повышение производительности и уменьшение потребления ресурсов hello. 

Каждый запрос, изначально выдан для SQL Server должен toogenerate toobe компиляции плана выполнения. Каждый создаваемый план добавляется в кэш планов toohello и последующее выполнение hello того же запроса может повторного использования плана из кэша hello, устраняя необходимость дополнительных компиляции hello. 

Приложения, отправляющие запросы, которые включают значения без параметров, может привести tooa снижение производительности, где для каждого такого запроса с различными значениями параметров плана выполнения hello компилируется повторно. В многих случаях hello же запросы с другой параметр, который значения вызывают hello же планов выполнения, но эти планы отдельно по-прежнему будут добавлены toohello кэша планов. Рекомпиляции планы выполнения использовать ресурсы базы данных, увеличьте hello длительность времени и переполнения hello план запроса, вызывая кэша планов toobe извлекается из кэша hello. Это поведение SQL Server можно изменить, задав hello принудительно параметра parameterization для базы данных hello. 

toohelp оценить влияние этой рекомендации hello, вам предоставляются с сравнение текущего ЦП hello использования и hello предполагаемое использование ЦП (как если бы была применена hello рекомендации). Кроме экономии tooCPU вашей длительность запроса снижает hello времени, затраченного на компиляцию. Также будет гораздо меньше нагрузку на кэш планов, позволяя большую часть hello toostay в кэше планов и повторно использовать. Можно применить эту рекомендацию быстро и легко, щелкнув hello **применить** команды. 

После применения этой рекомендации, она будет включена Принудительная параметризация, в течение минут на базу данных и запуске hello, наблюдение за процессом, который длится примерно за 24 часа. По истечении этого периода будет быть отчет о проверке hello может toosee, показывающий 24 часа, после использования ЦП базы данных и после применения рекомендации hello. Помощник по настройке ядра базы данных SQL имеет защитным механизмом, который автоматически возвращается hello применить рекомендации, в случае, если обнаружена со снижением производительности.

## <a name="fix-schema-issues-recommendations"></a>Рекомендации по устранению ошибок схемы
**Устранение проблемы схемы** рекомендации отображаются, когда hello служба базы данных SQL обнаруживает аномалий в hello номер ошибки SQL связанные со схемой происходит на базе данных SQL Azure. Эта рекомендация обычно появляется, когда в базе данных возникает несколько связанных со схемой ошибок (недопустимое имя столбца, недопустимое имя объекта и т. д.) в течение часа.

«Проблемы схемы» — это класс синтаксических ошибок в SQL Server, которые происходят после определения hello hello SQL-запроса и hello hello схемы базы данных не согласована. Например, один из столбцов hello ожидаемый hello запроса могут отсутствовать в целевой таблице hello, или наоборот. 

Рекомендация «Исправить проблему схемы» появляется, когда служба базы данных SQL Azure обнаруживает аномалий в hello номер ошибки SQL связанные со схемой происходит на базе данных SQL Azure. следующие таблицы показано hello ошибки, проблемы, связанные tooschema Hello:

| Код ошибки SQL | Сообщение |
| --- | --- |
| 201 |Процедура или функция "*" ожидает параметр "*", который не был указан. |
| 207 |Недопустимое имя столбца "*". |
| 208 |Недопустимое имя объекта "*". |
| 213 |Имя столбца или число предоставленных значений не соответствует определению таблицы. |
| 2812 |Не удалось найти хранимую процедуру "*". |
| 8144 |Для процедуры или функции * указано слишком много аргументов. |

## <a name="next-steps"></a>Дальнейшие действия
Отслеживание рекомендаций и продолжить tooapply их toorefine производительности. Рабочие нагрузки базы данных являются динамическими и меняются непрерывно. Помощник по настройке ядра базы данных SQL по-прежнему toomonitor и предоставляет рекомендации, которые потенциально могут увеличить производительность вашей базы данных. 

* В разделе [рекомендации по повышению производительности в hello портал Azure](sql-database-advisor-portal.md) шагами как toouse рекомендации по повышению производительности в hello портал Azure.
* В разделе [подробных сведений о производительности запросов](sql-database-query-performance.md) toolearn о и представление hello нерегламентированными запросы воздействие на производительность.

## <a name="additional-resources"></a>Дополнительные ресурсы
* [Хранилище запросов](https://msdn.microsoft.com/library/dn817826.aspx)
* [CREATE INDEX](https://msdn.microsoft.com/library/ms188783.aspx)
* [Контроль доступа на основе ролей](../active-directory/role-based-access-control-what-is.md)

