---
title: "Включение автоматической настройки для базы данных SQL Azure | Документация Майкрософт"
description: "Вы можете легко включить автоматическую настройку для базы данных SQL Azure."
services: sql-database
documentationcenter: 
author: veljko-msft
manager: drasumic
editor: vvasic
ms.assetid: 
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Inactive
ms.date: 09/19/2016
ms.author: veljko-msft
ms.openlocfilehash: bf8e0203112a42132a80e234964747c550fea284
ms.sourcegitcommit: 0930aabc3ede63240f60c2c61baa88ac6576c508
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/07/2017
---
# <a name="enable-automatic-tuning"></a>Включение автоматической настройки

База данных SQL Azure — это автоматически управляемая служба данных, которая постоянно отслеживает запросы и определяет действия, которые вы можете выполнять для повышения производительности рабочей нагрузки. Вы можете просматривать рекомендации и вручную применять их, или позволить базе данных SQL Azure автоматически применять действия по исправлению, что известно как **режим автоматической настройки**. Автоматическую настройку можно включить на уровне сервера или базы данных.

## <a name="enable-automatic-tuning-on-server"></a>Включение автоматической настройки на сервере
На уровне сервера можно выбрать или отключить наследование автоматической настройки конфигурации из значений Azure по умолчанию. Значения Azure по умолчанию: FORCE_LAST_GOOD_PLAN включено, CREATE_INDEX включено, а DROP_INDEX отключено.

### <a name="portal"></a>Microsoft Azure
Чтобы включить автоматическую настройку на сервере базы данных SQL Azure, перейдите на сервер на портале Azure, а затем выберите в меню **Автонастройка**. Выберите параметры автоматической настройки, которые необходимо включить, а затем выберите **Применить**:

![сервер;](./media/sql-database-automatic-tuning-enable/server.png)

Параметры автоматической настройки на сервере применяются ко всем базам данных на сервере. По умолчанию все базы данных наследуют конфигурацию из родительского сервера, но ее можно переопределить, а также указать отдельно для каждой базы данных.

### <a name="rest-api"></a>Интерфейс REST API
[Щелкните здесь, чтобы получить дополнительные сведения о включении автоматической настройки на уровне сервера через REST API.](https://docs.microsoft.com/rest/api/sql/serverautomatictuning)

## <a name="enable-automatic-tuning-on-database"></a>Включение автоматических параметров для базы данных

База данных SQL Azure позволяет отдельно указать конфигурацию автоматической настройки в каждой базе данных. На уровне базы данных можно включить наследование автоматической настройки конфигурации из родительского сервера, значений Azure по умолчанию либо отключить наследование конфигурации. Значения Azure по умолчанию: FORCE_LAST_GOOD_PLAN включено, CREATE_INDEX включено, а DROP_INDEX отключено.

> [!NOTE]
> Мы рекомендуем управлять конфигурацией автоматической настройки на уровне сервера, чтобы те же параметры конфигурации можно было автоматически применить в каждой базе данных. Настройте автоматические параметры для отдельной базы данных, если она отличается от других на одном сервере.
>

### <a name="portal"></a>Microsoft Azure

Чтобы включить автоматическую настройку для отдельной базы данных, перейдите в базу данных на портале Azure, а затем выберите **Автонастройка**. Вы можете настроить отдельную базу данных, чтобы она наследовала параметры с сервера, выбрав соответствующий параметр, или вы можете отдельно указать конфигурацию для базы данных.

![База данных](./media/sql-database-automatic-tuning-enable/database.png)

После выбора соответствующей конфигурации щелкните **Применить**.

### <a name="rest-api"></a>Rest API
[Щелкните здесь, чтобы получить дополнительные сведения о включении автоматической настройки в одной базе данных через REST API.](https://docs.microsoft.com/rest/api/sql/databaseautomatictuning)

### <a name="t-sql"></a>T-SQL

Чтобы включить автоматическую настройку в одной базе данных через T-SQL, подключитесь к базе данных и выполните следующий запрос.

   ```T-SQL
   ALTER DATABASE current SET AUTOMATIC_TUNING = AUTO | INHERIT | CUSTOM
   ```
   
Если установить для автоматической настройки значение AUTO, будут применяться значения Azure по умолчанию. Если установить значение INHERIT, автоматическая настройка конфигурации будет унаследована от родительского сервера. Если установить значение CUSTOM, автоматическую настройку необходимо будет настраивать вручную.

Для настройки отдельных параметров автоматической настройки через T-SQL подключитесь к базе данных и выполните запрос, подобный следующему.

   ```T-SQL
   ALTER DATABASE current SET AUTOMATIC_TUNING (FORCE_LAST_GOOD_PLAN = ON, CREATE_INDEX = DEFAULT, DROP_INDEX = OFF)
   ```
   
Если задать для отдельного параметра настройки значение ON, это переопределит наследуемое значение базы данных и включит параметр настройки. Если задать значение OFF, это также переопределит наследуемое значение базы данных и отключит параметр настройки. Параметр автоматической настройки, для которого задано значение DEFAULT, будет наследовать конфигурацию от параметра автоматической настройки уровня базы данных.  

## <a name="disabled-by-the-system"></a>Отключено системой
Автоматическая настройка контролирует все действия, которые она выполняет в базе данных, и в некоторых случаях может определить, что автоматическая настройка в базе данных работает не должным образом. В этом случае параметр настройки будет отключен системой. В большинстве случаев это происходит потому, что хранилище запросов отключено или доступно только для чтения в определенной базе данных.

## <a name="next-steps"></a>Дальнейшие действия
* Дополнительные сведения об автоматической настройке и о том, как она повышает производительность, см. в [этой статье](sql-database-automatic-tuning.md).
* Общие сведения о рекомендациях по производительности базы данных SQL Azure см. в статье [Помощник по работе с базами данных SQL](sql-database-advisor.md).
* См. статью [Анализ производительности запросов базы данных Azure SQL](sql-database-query-performance.md), чтобы узнать о том, как просмотреть влияние на производительность основных запросов.
