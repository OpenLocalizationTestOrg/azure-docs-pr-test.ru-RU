---
title: "Маскирование динамических данных базы данных SQL aaaAzure | Документы Microsoft"
description: "Маскирование динамических данных базы данных SQL шансы раскрытия конфиденциальных данных, маскируя его toonon пользователей"
services: sql-database
documentationcenter: 
author: ronitr
manager: jhubbard
editor: 
ms.assetid: 4b36d78e-7749-4f26-9774-eed1120a9182
ms.service: sql-database
ms.custom: security
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.date: 03/09/2017
ms.author: ronitr; ronmat
ms.openlocfilehash: 68b55128dc096f7e3dd0e5ed1427b39da5d64736
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="sql-database-dynamic-data-masking"></a><span data-ttu-id="a48be-103">Динамическое маскирование данных базы данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="a48be-103">SQL Database dynamic data masking</span></span>

<span data-ttu-id="a48be-104">Маскирование динамических данных базы данных SQL ограничивает возможность раскрытия конфиденциальных данных маскируя toonon правами доступа.</span><span class="sxs-lookup"><span data-stu-id="a48be-104">SQL Database dynamic data masking limits sensitive data exposure by masking it toonon-privileged users.</span></span> 

<span data-ttu-id="a48be-105">Динамическое маскирование данных помогает предотвратить несанкционированный доступ к данным toosensitive, позволяя клиентам toodesignate объем hello tooreveal конфиденциальных данных с минимальным влиянием на уровень приложения hello.</span><span class="sxs-lookup"><span data-stu-id="a48be-105">Dynamic data masking helps prevent unauthorized access toosensitive data by enabling customers toodesignate how much of hello sensitive data tooreveal with minimal impact on hello application layer.</span></span> <span data-ttu-id="a48be-106">Это функция безопасности на основе политики скрывает hello конфиденциальные данные в hello результирующего набора запроса в заданных полях базы данных, а hello hello базы данных не изменяются.</span><span class="sxs-lookup"><span data-stu-id="a48be-106">It’s a policy-based security feature that hides hello sensitive data in hello result set of a query over designated database fields, while hello data in hello database is not changed.</span></span>

<span data-ttu-id="a48be-107">Например в службу поддержки в центре вызовов может идентифицировать абонентов по нескольким цифрам номера кредитных карт, но эти данные, элементы не должны быть полностью включены toohello службу поддержки.</span><span class="sxs-lookup"><span data-stu-id="a48be-107">For example, a service representative at a call center may identify callers by several digits of their credit card number, but those data items should not be fully exposed toohello service representative.</span></span> <span data-ttu-id="a48be-108">Можно определить правило маскирования, что маскирует все за исключением hello последние четыре цифры любой номер кредитной карты в hello результирующем наборе любого запроса.</span><span class="sxs-lookup"><span data-stu-id="a48be-108">A masking rule can be defined that masks all but hello last four digits of any credit card number in hello result set of any query.</span></span> <span data-ttu-id="a48be-109">Еще один пример соответствующей маски может быть определенный tooprotect данных персональные данные (PII), так, что разработчик может отправлять запросы к рабочей среде для устранения неполадок, не нарушая правил соответствия.</span><span class="sxs-lookup"><span data-stu-id="a48be-109">As another example, an appropriate data mask can be defined tooprotect personally identifiable information (PII) data, so that a developer can query production environments for troubleshooting purposes without violating compliance regulations.</span></span>

## <a name="sql-database-dynamic-data-masking-basics"></a><span data-ttu-id="a48be-110">Основы динамического маскирования данных базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="a48be-110">SQL Database dynamic data masking basics</span></span>
<span data-ttu-id="a48be-111">Настраиваются политики динамического маскирования данных в hello портал Azure, выбрав hello динамического маскирования операции в колонке конфигурации базы данных SQL или в колонке параметров данных.</span><span class="sxs-lookup"><span data-stu-id="a48be-111">You set up a dynamic data masking policy in hello Azure portal by selecting hello dynamic data masking operation in your SQL Database configuration blade or settings blade.</span></span>

### <a name="dynamic-data-masking-permissions"></a><span data-ttu-id="a48be-112">Разрешения для динамической маскировки данных</span><span class="sxs-lookup"><span data-stu-id="a48be-112">Dynamic data masking permissions</span></span>
<span data-ttu-id="a48be-113">Здравствуйте, администратор базы данных Azure, администратор сервера или сотрудник отдела роли безопасности можно настроить динамическое маскирование данных.</span><span class="sxs-lookup"><span data-stu-id="a48be-113">Dynamic data masking can be configured by hello Azure Database admin, server admin, or security officer roles.</span></span>

### <a name="dynamic-data-masking-policy"></a><span data-ttu-id="a48be-114">Политика динамической маскировки данных</span><span class="sxs-lookup"><span data-stu-id="a48be-114">Dynamic data masking policy</span></span>
* <span data-ttu-id="a48be-115">**Пользователи SQL, исключенные из маскирования** — набор пользователей SQL или результаты запроса AAD удостоверений, которые получает немаскированные данные в hello SQL.</span><span class="sxs-lookup"><span data-stu-id="a48be-115">**SQL users excluded from masking** - A set of SQL users or AAD identities that get unmasked data in hello SQL query results.</span></span> <span data-ttu-id="a48be-116">Пользователи с правами администратора всегда исключенные из маскирования и посмотрите, hello исходных данных без любой маски.</span><span class="sxs-lookup"><span data-stu-id="a48be-116">Users with administrator privileges are always excluded from masking, and see hello original data without any mask.</span></span>
* <span data-ttu-id="a48be-117">**Правила маскировки** -набор правил, определяющих hello обозначены маскированные toobe поля и hello, используется функция маскировки.</span><span class="sxs-lookup"><span data-stu-id="a48be-117">**Masking rules** - A set of rules that define hello designated fields toobe masked and hello masking function that is used.</span></span> <span data-ttu-id="a48be-118">Hello указанных полей можно задать имя схемы базы данных, имя таблицы и имя столбца.</span><span class="sxs-lookup"><span data-stu-id="a48be-118">hello designated fields can be defined using a database schema name, table name, and column name.</span></span>
* <span data-ttu-id="a48be-119">**Функции маскировки** -набор методов, управляющие hello раскрытия данных для различных сценариев.</span><span class="sxs-lookup"><span data-stu-id="a48be-119">**Masking functions** - A set of methods that control hello exposure of data for different scenarios.</span></span>

| <span data-ttu-id="a48be-120">Функция маскирования</span><span class="sxs-lookup"><span data-stu-id="a48be-120">Masking Function</span></span> | <span data-ttu-id="a48be-121">Логика маскирования</span><span class="sxs-lookup"><span data-stu-id="a48be-121">Masking Logic</span></span> |
| --- | --- |
| <span data-ttu-id="a48be-122">**По умолчанию**</span><span class="sxs-lookup"><span data-stu-id="a48be-122">**Default**</span></span> |<span data-ttu-id="a48be-123">**Полное маскирование данных соответствующим toohello типов hello назначенному поля**</span><span class="sxs-lookup"><span data-stu-id="a48be-123">**Full masking according toohello data types of hello designated fields**</span></span><br/><br/><span data-ttu-id="a48be-124">• Используйте XXXX или меньшее количество x, если размер hello hello поля меньше 4 символов для строковых типов данных (nchar, ntext, nvarchar).</span><span class="sxs-lookup"><span data-stu-id="a48be-124">• Use XXXX or fewer Xs if hello size of hello field is less than 4 characters for string data types (nchar, ntext, nvarchar).</span></span><br/><span data-ttu-id="a48be-125">• Для числовых типов данных (bigint, bit, decimal, int, money, numeric, smallint, smallmoney, tinyint, float, real) используется нулевое значение.</span><span class="sxs-lookup"><span data-stu-id="a48be-125">• Use a zero value for numeric data types (bigint, bit, decimal, int, money, numeric, smallint, smallmoney, tinyint, float, real).</span></span><br/><span data-ttu-id="a48be-126">• Для типов данных даты и времени (date, datetime2, datetime, datetimeoffset, smalldatetime, time) используется формат 01-01-1900.</span><span class="sxs-lookup"><span data-stu-id="a48be-126">• Use 01-01-1900 for date/time data types (date, datetime2, datetime, datetimeoffset, smalldatetime, time).</span></span><br/><span data-ttu-id="a48be-127">• Для типа "variant", значение по умолчанию hello SQL текущего типа hello используется.</span><span class="sxs-lookup"><span data-stu-id="a48be-127">• For SQL variant, hello default value of hello current type is used.</span></span><br/><span data-ttu-id="a48be-128">• Для XML-документа hello <masked/> используется.</span><span class="sxs-lookup"><span data-stu-id="a48be-128">• For XML hello document <masked/> is used.</span></span><br/><span data-ttu-id="a48be-129">.• Используйте пустое значение для специальных типов данных (таблица меток времени, hierarchyid, GUID, binary, image, пространственные типы varbinary).</span><span class="sxs-lookup"><span data-stu-id="a48be-129">• Use an empty value for special data types (timestamp table, hierarchyid, GUID, binary, image, varbinary spatial types).</span></span> |
| <span data-ttu-id="a48be-130">**Кредитная карта**</span><span class="sxs-lookup"><span data-stu-id="a48be-130">**Credit card**</span></span> |<span data-ttu-id="a48be-131">**Метод, который предоставляет hello маскирования последние четыре цифры hello указанных полей** и добавляет строковую константу в качестве префикса в форме hello кредитной карты.</span><span class="sxs-lookup"><span data-stu-id="a48be-131">**Masking method, which exposes hello last four digits of hello designated fields** and adds a constant string as a prefix in hello form of a credit card.</span></span><br/><br/><span data-ttu-id="a48be-132">XXXX-XXXX-XXXX-1234</span><span class="sxs-lookup"><span data-stu-id="a48be-132">XXXX-XXXX-XXXX-1234</span></span> |
| <span data-ttu-id="a48be-133">**Электронная почта**</span><span class="sxs-lookup"><span data-stu-id="a48be-133">**Email**</span></span> |<span data-ttu-id="a48be-134">**Метод, который раскрывает первую букву hello и заменяет hello домена XXX.com маскирования** с помощью префикса Постоянная строка в форме hello адреса электронной почты.</span><span class="sxs-lookup"><span data-stu-id="a48be-134">**Masking method, which exposes hello first letter and replaces hello domain with XXX.com** using a constant string prefix in hello form of an email address.</span></span><br/><br/>aXX@XXXX.com |
| <span data-ttu-id="a48be-135">**Случайное число**</span><span class="sxs-lookup"><span data-stu-id="a48be-135">**Random number**</span></span> |<span data-ttu-id="a48be-136">**Метод, который создает случайное число маскировки** toohello в соответствии с выбранной границы и фактических типов данных.</span><span class="sxs-lookup"><span data-stu-id="a48be-136">**Masking method, which generates a random number** according toohello selected boundaries and actual data types.</span></span> <span data-ttu-id="a48be-137">Если равны hello указанных границ, функции маскировки hello является постоянного количества.</span><span class="sxs-lookup"><span data-stu-id="a48be-137">If hello designated boundaries are equal, then hello masking function is a constant number.</span></span><br/><br/><span data-ttu-id="a48be-138">![Область навигации](./media/sql-database-dynamic-data-masking-get-started/1_DDM_Random_number.png)</span><span class="sxs-lookup"><span data-stu-id="a48be-138">![Navigation pane](./media/sql-database-dynamic-data-masking-get-started/1_DDM_Random_number.png)</span></span> |
| <span data-ttu-id="a48be-139">**Пользовательский текст**</span><span class="sxs-lookup"><span data-stu-id="a48be-139">**Custom text**</span></span> |<span data-ttu-id="a48be-140">**Метод, который предоставляет сначала hello и последний символы маскирования** и добавляет пользовательскую строку заполнения в середине hello.</span><span class="sxs-lookup"><span data-stu-id="a48be-140">**Masking method, which exposes hello first and last characters** and adds a custom padding string in hello middle.</span></span> <span data-ttu-id="a48be-141">Если исходная строка hello короче, чем предоставляется hello префикс и суффикс, используется только hello строка заполнения.</span><span class="sxs-lookup"><span data-stu-id="a48be-141">If hello original string is shorter than hello exposed prefix and suffix, only hello padding string is used.</span></span> <br/><span data-ttu-id="a48be-142">префикс[заполнение]суффикс</span><span class="sxs-lookup"><span data-stu-id="a48be-142">prefix[padding]suffix</span></span><br/><br/><span data-ttu-id="a48be-143">![Область навигации](./media/sql-database-dynamic-data-masking-get-started/2_DDM_Custom_text.png)</span><span class="sxs-lookup"><span data-stu-id="a48be-143">![Navigation pane](./media/sql-database-dynamic-data-masking-get-started/2_DDM_Custom_text.png)</span></span> |

<a name="Anchor1"></a>

### <a name="recommended-fields-toomask"></a><span data-ttu-id="a48be-144">Рекомендуемые поля toomask</span><span class="sxs-lookup"><span data-stu-id="a48be-144">Recommended fields toomask</span></span>
<span data-ttu-id="a48be-145">Hello DDM подсистемы рекомендаций, помечает определенные поля из базы данных потенциально конфиденциальных полей, которые могут быть хорошими кандидатами для маски.</span><span class="sxs-lookup"><span data-stu-id="a48be-145">hello DDM recommendations engine, flags certain fields from your database as potentially sensitive fields, which may be good candidates for masking.</span></span> <span data-ttu-id="a48be-146">Hello колонку динамической маскировки данных в портале hello вы увидите hello, рекомендуется использовать столбцы для базы данных.</span><span class="sxs-lookup"><span data-stu-id="a48be-146">In hello Dynamic Data Masking blade in hello portal, you will see hello recommended columns for your database.</span></span> <span data-ttu-id="a48be-147">Все, что нужно toodo — щелкните **Добавить маску** для одного или нескольких столбцов и затем **Сохранить** tooapply маску для этих полей.</span><span class="sxs-lookup"><span data-stu-id="a48be-147">All you need toodo is click **Add Mask** for one or more columns and then **Save** tooapply a mask for these fields.</span></span>

## <a name="set-up-dynamic-data-masking-for-your-database-using-powershell-cmdlets"></a><span data-ttu-id="a48be-148">Настройка динамического маскирования данных для базы данных с помощью командлетов Powershell</span><span class="sxs-lookup"><span data-stu-id="a48be-148">Set up dynamic data masking for your database using Powershell cmdlets</span></span>
<span data-ttu-id="a48be-149">См. статью с описанием [командлетов базы данных SQL Azure](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="a48be-149">See [Azure SQL Database Cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span>

## <a name="set-up-dynamic-data-masking-for-your-database-using-rest-api"></a><span data-ttu-id="a48be-150">Настройка динамической маскировки данных для базы данных с помощью REST API</span><span class="sxs-lookup"><span data-stu-id="a48be-150">Set up dynamic data masking for your database using REST API</span></span>
<span data-ttu-id="a48be-151">См. статью с описанием [операций для баз данных SQL Azure](https://msdn.microsoft.com/library/dn505719.aspx).</span><span class="sxs-lookup"><span data-stu-id="a48be-151">See [Operations for Azure SQL Databases](https://msdn.microsoft.com/library/dn505719.aspx).</span></span>

