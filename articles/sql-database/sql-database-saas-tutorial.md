---
title: "aaaDeploy и исследовать hello многопользовательского Wingtip SaaS приложения, использующего базу данных SQL Azure | Документы Microsoft"
description: "Развернуть и изучить hello Wingtip SaaS многопользовательскому приложению, демонстрирующий шаблоны SaaS, с использованием базы данных SQL Azure."
keywords: "руководство по базе данных sql"
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: 7c528ee19472d3b8c7a285b2f86013945e8f4bf4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="deploy-and-explore-a-multi-tenant-application-that-uses-azure-sql-database---wingtip-saas"></a><span data-ttu-id="7d23d-104">Развертывание и изучение мультитенантного приложения, использующего базу данных SQL Azure — SaaS Wingtip</span><span class="sxs-lookup"><span data-stu-id="7d23d-104">Deploy and explore a multi-tenant application that uses Azure SQL Database - Wingtip SaaS</span></span>

<span data-ttu-id="7d23d-105">В этом учебнике развертывание и просмотр приложения Wingtip SaaS hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-105">In this tutorial, you deploy and explore hello Wingtip SaaS application.</span></span> <span data-ttu-id="7d23d-106">приложение Hello использует базы данных отдельных клиентов, модель приложения SaaS, tooservice нескольких клиентов.</span><span class="sxs-lookup"><span data-stu-id="7d23d-106">hello application uses a database-per-tenant, SaaS application pattern, tooservice multiple tenants.</span></span> <span data-ttu-id="7d23d-107">приложение Hello — спроектированный tooshowcase функции базы данных SQL Azure, которые упрощают Включение сценарии SaaS.</span><span class="sxs-lookup"><span data-stu-id="7d23d-107">hello application is designed tooshowcase features of Azure SQL Database that simplify enabling SaaS scenarios.</span></span>

<span data-ttu-id="7d23d-108">Здравствуйте, пять минут после нажатия кнопки *развертывание tooAzure* кнопку ниже, у вас есть многопользовательскому приложению SaaS, используя базу данных SQL, до и работающими в облаке hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-108">Five minutes after clicking hello *Deploy tooAzure* button below, you have a multi-tenant SaaS application, using SQL Database, up and running in hello cloud.</span></span> <span data-ttu-id="7d23d-109">приложение Hello развертывается с тремя клиентами образца, каждый из которых свою собственную базу данных, все развернутые в пул эластичных БД SQL.</span><span class="sxs-lookup"><span data-stu-id="7d23d-109">hello application is deployed with three sample tenants, each with its own database, all deployed into a SQL elastic pool.</span></span> <span data-ttu-id="7d23d-110">Это приложение Hello развернутой tooyour подписки Azure, предоставляя полный доступ tooexplore и работа с hello отдельных компонентов приложения.</span><span class="sxs-lookup"><span data-stu-id="7d23d-110">hello app is deployed tooyour Azure subscription, giving you full access tooexplore and work with hello individual application components.</span></span> <span data-ttu-id="7d23d-111">Hello приложения исходного кода и сценариев управления доступны в репозитории WingtipSaaS GitHub hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-111">hello application source code and management scripts are available in hello WingtipSaaS GitHub repo.</span></span>


<span data-ttu-id="7d23d-112">Из этого руководства вы узнаете следующее:</span><span class="sxs-lookup"><span data-stu-id="7d23d-112">In this tutorial you learn:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="7d23d-113">Как toodeploy hello приложения Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="7d23d-113">How toodeploy hello Wingtip SaaS application</span></span>
> * <span data-ttu-id="7d23d-114">Где tooget hello исходный код приложения и скрипты управления</span><span class="sxs-lookup"><span data-stu-id="7d23d-114">Where tooget hello application source code, and management scripts</span></span>
> * <span data-ttu-id="7d23d-115">О серверах hello, пулы и баз данных, составляющих приложение hello</span><span class="sxs-lookup"><span data-stu-id="7d23d-115">About hello servers, pools, and databases that make up hello app</span></span>
> * <span data-ttu-id="7d23d-116">Как клиенты сопоставляются tootheir данных с помощью hello *каталога*</span><span class="sxs-lookup"><span data-stu-id="7d23d-116">How tenants are mapped tootheir data with hello *catalog*</span></span>
> * <span data-ttu-id="7d23d-117">Как tooprovision нового клиента</span><span class="sxs-lookup"><span data-stu-id="7d23d-117">How tooprovision a new tenant</span></span>
> * <span data-ttu-id="7d23d-118">Как toomonitor клиента действия в приложение hello</span><span class="sxs-lookup"><span data-stu-id="7d23d-118">How toomonitor tenant activity in hello app</span></span>

<span data-ttu-id="7d23d-119">tooexplore различных SaaS проектирования и управления шаблонов, [серию учебников, связанных](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) доступен, созданы на основе этого первоначального развертывания.</span><span class="sxs-lookup"><span data-stu-id="7d23d-119">tooexplore various SaaS design and management patterns, a [series of related tutorials](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) is available that build upon this initial deployment.</span></span> <span data-ttu-id="7d23d-120">Во время с помощью учебников hello, подробно рассмотреть hello предоставленные сценарии и проверьте реализации различных шаблонов SaaS hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-120">While going through hello tutorials, dive into hello provided scripts, and examine how hello different SaaS patterns are implemented.</span></span> <span data-ttu-id="7d23d-121">Пошаговое выполнение сценариев hello в каждой учебника toogain более глубокого понимания, как tooimplement hello многие базы данных SQL преимущества упростить разработку приложений SaaS.</span><span class="sxs-lookup"><span data-stu-id="7d23d-121">Step through hello scripts in each tutorial toogain a deeper understanding how tooimplement hello many SQL Database features that simplify developing SaaS applications.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7d23d-122">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="7d23d-122">Prerequisites</span></span>

<span data-ttu-id="7d23d-123">toocomplete завершения этого учебника, убедитесь, что hello следующие предварительные требования:</span><span class="sxs-lookup"><span data-stu-id="7d23d-123">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="7d23d-124">Установите Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7d23d-124">Azure PowerShell is installed.</span></span> <span data-ttu-id="7d23d-125">Дополнительные сведения см. в статье [Начало работы с Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).</span><span class="sxs-lookup"><span data-stu-id="7d23d-125">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="deploy-hello-wingtip-saas-application"></a><span data-ttu-id="7d23d-126">Развертывание приложения Wingtip SaaS hello</span><span class="sxs-lookup"><span data-stu-id="7d23d-126">Deploy hello Wingtip SaaS application</span></span>

<span data-ttu-id="7d23d-127">Разверните приложение hello Wingtip SaaS:</span><span class="sxs-lookup"><span data-stu-id="7d23d-127">Deploy hello Wingtip SaaS app:</span></span>

1. <span data-ttu-id="7d23d-128">Выбрав hello **развертывание tooAzure** кнопка открывает шаблон развертывания hello Azure портала toohello Wingtip SaaS.</span><span class="sxs-lookup"><span data-stu-id="7d23d-128">Clicking hello **Deploy tooAzure** button opens hello Azure portal toohello Wingtip SaaS deployment template.</span></span> <span data-ttu-id="7d23d-129">Hello шаблона требуется указать значения параметров; имя для новой группы ресурсов и имя пользователя, являющийся отличительным признаком данного развертывания от других развертываний приложение Wingtip SaaS hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-129">hello template requires two parameter values; a name for a new resource group, and a user name that distinguishes this deployment from other deployments of hello Wingtip SaaS app.</span></span> <span data-ttu-id="7d23d-130">Следующий шаг Hello подробные сведения о настройке этих значений.</span><span class="sxs-lookup"><span data-stu-id="7d23d-130">hello next step provides details for setting these values.</span></span>

   <span data-ttu-id="7d23d-131">Убедиться, что toonote hello точных значений, используемых вами убедитесь в том случае, поскольку его нужно будет tooenter их в конфигурацию позднее файл.</span><span class="sxs-lookup"><span data-stu-id="7d23d-131">Make sure toonote hello exact values that you use, because you will need tooenter them into a configuration file later.</span></span>

   <a href="http://aka.ms/deploywtpapp" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>

1. <span data-ttu-id="7d23d-132">Введите значения обязательного параметра для hello развертывания:</span><span class="sxs-lookup"><span data-stu-id="7d23d-132">Enter required parameter values for hello deployment:</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="7d23d-133">Некоторые проверки подлинности и брандмауэры сервера не защищены специально, так как предназначены для демонстрации.</span><span class="sxs-lookup"><span data-stu-id="7d23d-133">Some authentication, and server firewalls are intentionally unsecured for demonstration purposes.</span></span> <span data-ttu-id="7d23d-134">**Создайте группу ресурсов** и не используйте имеющиеся группы ресурсов, серверы или пулы.</span><span class="sxs-lookup"><span data-stu-id="7d23d-134">**Create a new resource group**, and do not use existing resource groups, servers, or pools.</span></span> <span data-ttu-id="7d23d-135">Не используйте это приложение или ресурсы, которые оно создает, для рабочей среды.</span><span class="sxs-lookup"><span data-stu-id="7d23d-135">Do not use this application, or any resources it creates, for production.</span></span> <span data-ttu-id="7d23d-136">Удалить этот ресурс группы при завершении работы с toostop приложения hello, связанные с выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="7d23d-136">Delete this resource group when you are finished with hello application toostop related billing.</span></span>

    * <span data-ttu-id="7d23d-137">**Группа ресурсов** — выберите **создать новый** и предоставить **имя** для группы ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-137">**Resource group** - Select **Create new** and provide a **Name** for hello resource group.</span></span> <span data-ttu-id="7d23d-138">Выберите **расположение** из раскрывающегося списка hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-138">Select a **Location** from hello drop-down list.</span></span>
    * <span data-ttu-id="7d23d-139">**Пользователь** — для некоторых ресурсов требуются глобально уникальные имена.</span><span class="sxs-lookup"><span data-stu-id="7d23d-139">**User** - Some resources require names that are globally unique.</span></span> <span data-ttu-id="7d23d-140">уникальность tooensure каждый раз при развертывании приложения hello предоставлять значение toodifferentiate ресурсов, создать, от ресурсов, созданных любое другое развертывание приложения Wingtip hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-140">tooensure uniqueness, each time you deploy hello application provide a value toodifferentiate resources you create, from resources created by any other deployment of hello Wingtip application.</span></span> <span data-ttu-id="7d23d-141">Рекомендуется toouse короткие **пользователя** имя, например инициалы вместе с номером (например, *bg1*) и используйте его в поле имя группы ресурсов hello (например, *wingtip-bg1*).</span><span class="sxs-lookup"><span data-stu-id="7d23d-141">It’s recommended toouse a short **User** name, such as your initials plus a number (for example, *bg1*), and then use that in hello resource group name (for example, *wingtip-bg1*).</span></span> <span data-ttu-id="7d23d-142">Параметр **Пользователь** может содержать только буквы, цифры и дефисы (без пробелов).</span><span class="sxs-lookup"><span data-stu-id="7d23d-142">The **User** parameter can only contain letters, numbers, and hyphens (no spaces).</span></span> <span data-ttu-id="7d23d-143">Hello первый и последний символ должен быть буквой или цифрой (рекомендуется использовать все строчные).</span><span class="sxs-lookup"><span data-stu-id="7d23d-143">hello first and last character must be a letter or a number (all lowercase is recommended).</span></span>


1. <span data-ttu-id="7d23d-144">**Развертывание приложения hello**.</span><span class="sxs-lookup"><span data-stu-id="7d23d-144">**Deploy hello application**.</span></span>

    * <span data-ttu-id="7d23d-145">Щелкните tooagree toohello условий.</span><span class="sxs-lookup"><span data-stu-id="7d23d-145">Click tooagree toohello terms and conditions.</span></span>
    * <span data-ttu-id="7d23d-146">Щелкните **Приобрести**.</span><span class="sxs-lookup"><span data-stu-id="7d23d-146">Click **Purchase**.</span></span>

1. <span data-ttu-id="7d23d-147">Мониторинг состояния развертывания, щелкнув **уведомления** (значок колокольчика hello справа от поля поиска hello).</span><span class="sxs-lookup"><span data-stu-id="7d23d-147">Monitor deployment status by clicking **Notifications** (hello bell icon right of hello search box).</span></span> <span data-ttu-id="7d23d-148">Развертывание приложения Wingtip SaaS hello занимает приблизительно пять минут.</span><span class="sxs-lookup"><span data-stu-id="7d23d-148">Deploying hello Wingtip SaaS app takes approximately five minutes.</span></span>

   ![Развертывание выполнено](media/sql-database-saas-tutorial/succeeded.png)

## <a name="download-and-unblock-hello-wingtip-saas-scripts"></a><span data-ttu-id="7d23d-150">Загрузите и разблокировать сценарии Wingtip SaaS hello</span><span class="sxs-lookup"><span data-stu-id="7d23d-150">Download and unblock hello Wingtip SaaS scripts</span></span>

<span data-ttu-id="7d23d-151">При развертывании приложения hello, загрузите hello исходного кода и сценариев управления.</span><span class="sxs-lookup"><span data-stu-id="7d23d-151">While hello application is deploying, download hello source code and management scripts.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7d23d-152">Исполняемое содержимое (скрипты, библиотеки DLL) может быть заблокировано Windows, в то время как ZIP-файлы можно загрузить с внешнего источника, а затем извлечь их содержимое.</span><span class="sxs-lookup"><span data-stu-id="7d23d-152">Executable contents (scripts, dlls) may be blocked by Windows when zip files are downloaded from an external source and extracted.</span></span> <span data-ttu-id="7d23d-153">При извлечении hello скрипты из ZIP-файл, выполните действия hello ниже toounblock hello ZIP-файл перед извлечением.</span><span class="sxs-lookup"><span data-stu-id="7d23d-153">When extracting hello scripts from a zip file, follow hello steps below toounblock hello .zip file before extracting.</span></span> <span data-ttu-id="7d23d-154">Это гарантирует, что hello сценарии могут toorun.</span><span class="sxs-lookup"><span data-stu-id="7d23d-154">This ensures hello scripts are allowed toorun.</span></span>

1. <span data-ttu-id="7d23d-155">Обзор слишком[Wingtip SaaS hello в репозитории github](https://github.com/Microsoft/WingtipSaaS).</span><span class="sxs-lookup"><span data-stu-id="7d23d-155">Browse too[hello Wingtip SaaS github repo](https://github.com/Microsoft/WingtipSaaS).</span></span>
1. <span data-ttu-id="7d23d-156">Выберите **Clone or download** (Клонировать или скачать).</span><span class="sxs-lookup"><span data-stu-id="7d23d-156">Click **Clone or download**.</span></span>
1. <span data-ttu-id="7d23d-157">Нажмите кнопку **загрузить ZIP** и сохраните файл hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-157">Click **Download ZIP** and save hello file.</span></span>
1. <span data-ttu-id="7d23d-158">Щелкните правой кнопкой мыши hello **WingtipSaaS master.zip** правой кнопкой мыши и выберите **свойства**.</span><span class="sxs-lookup"><span data-stu-id="7d23d-158">Right-click hello **WingtipSaaS-master.zip** file, and select **Properties**.</span></span>
1. <span data-ttu-id="7d23d-159">На hello **Общие** выберите **Unblock**и нажмите кнопку **применить**.</span><span class="sxs-lookup"><span data-stu-id="7d23d-159">On hello **General** tab, select **Unblock**, and click **Apply**.</span></span>
1. <span data-ttu-id="7d23d-160">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="7d23d-160">Click **OK**.</span></span>
1. <span data-ttu-id="7d23d-161">Извлеките файлы hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-161">Extract hello files.</span></span>

<span data-ttu-id="7d23d-162">Скрипты, расположенные в hello *... \\WingtipSaaS master\\модулей обучения* папки.</span><span class="sxs-lookup"><span data-stu-id="7d23d-162">Scripts are located in hello *..\\WingtipSaaS-master\\Learning Modules* folder.</span></span>

## <a name="update-hello-configuration-file-for-this-deployment"></a><span data-ttu-id="7d23d-163">Обновить файл конфигурации hello для этого развертывания</span><span class="sxs-lookup"><span data-stu-id="7d23d-163">Update hello configuration file for this deployment</span></span>

<span data-ttu-id="7d23d-164">Перед запуском любых других скриптов, настройте hello *группы ресурсов* и *пользователя* значения в **UserConfig.psm1**.</span><span class="sxs-lookup"><span data-stu-id="7d23d-164">Before running any scripts, set hello *resource group* and *user* values in **UserConfig.psm1**.</span></span> <span data-ttu-id="7d23d-165">Эти переменные задайте toohello значения, заданные во время развертывания.</span><span class="sxs-lookup"><span data-stu-id="7d23d-165">Set these variables toohello values you set during deployment.</span></span>

1. <span data-ttu-id="7d23d-166">Открыть... \\Модулей обучения\\*UserConfig.psm1* в hello *интегрированной среды Сценариев PowerShell*</span><span class="sxs-lookup"><span data-stu-id="7d23d-166">Open ...\\Learning Modules\\*UserConfig.psm1* in hello *PowerShell ISE*</span></span>
1. <span data-ttu-id="7d23d-167">Обновление *ResourceGroupName* и *имя* с определенными значениями hello для развертывания (в строках, 10 и 11 только).</span><span class="sxs-lookup"><span data-stu-id="7d23d-167">Update *ResourceGroupName* and *Name* with hello specific values for your deployment (on lines 10 and 11 only).</span></span>
1. <span data-ttu-id="7d23d-168">Сохраните изменения hello!</span><span class="sxs-lookup"><span data-stu-id="7d23d-168">Save hello changes!</span></span>

<span data-ttu-id="7d23d-169">Установка этого параметра здесь просто позволяет избежать tooupdate эти значения относящиеся к развертыванию в каждом сценарии.</span><span class="sxs-lookup"><span data-stu-id="7d23d-169">Setting this here simply keeps you from having tooupdate these deployment-specific values in every script.</span></span>

## <a name="run-hello-application"></a><span data-ttu-id="7d23d-170">Запустите приложение hello</span><span class="sxs-lookup"><span data-stu-id="7d23d-170">Run hello application</span></span>

<span data-ttu-id="7d23d-171">приложение Hello, демонстрирующий местоположения, такие как совместно помещениям, Поднимите настроение трефы спортивных трефы, на котором размещена события.</span><span class="sxs-lookup"><span data-stu-id="7d23d-171">hello app showcases venues, such as concert halls, jazz clubs, sports clubs, that host events.</span></span> <span data-ttu-id="7d23d-172">Местоположения регистрации в качестве клиентов (или клиенты) hello Wingtip платформы, для событий toolist легко и продажу билетов.</span><span class="sxs-lookup"><span data-stu-id="7d23d-172">Venues register as customers (or tenants) of hello Wingtip platform, for an easy way toolist events and sell tickets.</span></span> <span data-ttu-id="7d23d-173">Каждый проведения возвращает toomanage персонализированной web app и перечислены события, их и продажу билетов, независимые и изолирован от других клиентов.</span><span class="sxs-lookup"><span data-stu-id="7d23d-173">Each venue gets a personalized web app toomanage and list their events and sell tickets, independent and isolated from other tenants.</span></span> <span data-ttu-id="7d23d-174">На деле hello каждый клиент получает базы данных SQL, развернутой в пул эластичных БД SQL.</span><span class="sxs-lookup"><span data-stu-id="7d23d-174">Under hello covers, each tenant gets a SQL database deployed into a SQL elastic pool.</span></span>

<span data-ttu-id="7d23d-175">Центральный **концентратора событий** предоставляет список клиентов, URL-адреса tooyour конкретного развертывания.</span><span class="sxs-lookup"><span data-stu-id="7d23d-175">A central **Events Hub** provides a list of tenant URLs specific tooyour deployment.</span></span>

1. <span data-ttu-id="7d23d-176">Откройте hello _концентратора событий_ в веб-браузере: http://events.wtp.&lt; ПОЛЬЗОВАТЕЛЬ&gt;. trafficmanager.net (Замените именем пользователя развертывания):</span><span class="sxs-lookup"><span data-stu-id="7d23d-176">Open hello _Events Hub_ in your web browser: http://events.wtp.&lt;USER&gt;.trafficmanager.net (replace with your deployment's user name):</span></span>

    ![Концентратор событий](media/sql-database-saas-tutorial/events-hub.png)

1. <span data-ttu-id="7d23d-178">Щелкните **Fabrikam Jazz Club** в *концентраторе событий*.</span><span class="sxs-lookup"><span data-stu-id="7d23d-178">Click **Fabrikam Jazz Club** in the *Events Hub*.</span></span>

   ![События](./media/sql-database-saas-tutorial/fabrikam.png)


<span data-ttu-id="7d23d-180">Распределение hello toocontrol входящие запросы, приложение использует hello [ *диспетчера трафика Azure*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span><span class="sxs-lookup"><span data-stu-id="7d23d-180">toocontrol hello distribution of incoming requests, hello app uses [*Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span></span> <span data-ttu-id="7d23d-181">события страницы приветствия, которые зависят от конкретного клиента, требуют включения имен клиента в URL-адресах hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-181">hello events pages, which are tenant-specific, require that tenant names are included in hello URLs.</span></span> <span data-ttu-id="7d23d-182">Все hello клиента URL-адреса включают конкретных *пользователя* значение и соответствует этому формату: http://events.wtp.&lt; ПОЛЬЗОВАТЕЛЬ&gt;.trafficmanager.net/*fabrikamjazzclub*.</span><span class="sxs-lookup"><span data-stu-id="7d23d-182">All hello tenant URLs include your specific *User* value and follow this format: http://events.wtp.&lt;USER&gt;.trafficmanager.net/*fabrikamjazzclub*.</span></span> <span data-ttu-id="7d23d-183">приложение Hello события выполняет синтаксический анализ имени клиента hello hello URL-адресу и использует его toocreate ключа tooaccess каталога с помощью [ *управления карты сегментов*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span><span class="sxs-lookup"><span data-stu-id="7d23d-183">hello events app parses hello tenant name from hello URL and uses it toocreate a key tooaccess a catalog using [*shard map management*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span></span> <span data-ttu-id="7d23d-184">Здравствуйте hello ключа toohello каталога карты клиента расположение базы данных.</span><span class="sxs-lookup"><span data-stu-id="7d23d-184">hello catalog maps hello key toohello tenant's database location.</span></span> <span data-ttu-id="7d23d-185">Hello **концентратора событий** использует расширенные метаданные в имя tooretrieve hello hello каталога клиента, связанные с каждой базы данных tooprovide hello список URL-адресов.</span><span class="sxs-lookup"><span data-stu-id="7d23d-185">hello **Events Hub** uses extended metadata in hello catalog tooretrieve hello tenant’s name associated with each database tooprovide hello list of URLs.</span></span>

<span data-ttu-id="7d23d-186">В рабочей среде обычно бы создать запись CNAME DNS для [ *направление домена Интернета компании* ](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) в профиле диспетчера трафика hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-186">In a production environment, you would typically create a CNAME DNS record to [*point a company internet domain*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) to hello traffic manager profile.</span></span>

## <a name="start-generating-load-on-hello-tenant-databases"></a><span data-ttu-id="7d23d-187">Приступить к созданию нагрузки на базы данных клиента hello</span><span class="sxs-lookup"><span data-stu-id="7d23d-187">Start generating load on hello tenant databases</span></span>

<span data-ttu-id="7d23d-188">Теперь, когда hello развертывается приложение, скажем toowork!</span><span class="sxs-lookup"><span data-stu-id="7d23d-188">Now that hello app is deployed, let’s put it toowork!</span></span> <span data-ttu-id="7d23d-189">Hello *LoadGenerator Демонстрация* сценарий PowerShell запускает относительно рабочей нагрузки для всех баз данных клиента.</span><span class="sxs-lookup"><span data-stu-id="7d23d-189">hello *Demo-LoadGenerator* PowerShell script starts a workload running against all tenant databases.</span></span> <span data-ttu-id="7d23d-190">Hello реальной нагрузки на многих приложений SaaS, обычно является случайные и непредсказуемым.</span><span class="sxs-lookup"><span data-stu-id="7d23d-190">hello real-world load on many SaaS apps is typically sporadic and unpredictable.</span></span> <span data-ttu-id="7d23d-191">toosimulate этот тип нагрузки, генератор hello выводятся нагрузки, распределенные по всем клиентам, случайного увеличениям на каждого клиента, происходящих случайного интервалы.</span><span class="sxs-lookup"><span data-stu-id="7d23d-191">toosimulate this type of load, hello generator produces a load distributed across all tenants, with randomized bursts on each tenant occurring at randomized intervals.</span></span> <span data-ttu-id="7d23d-192">По этой причине, необходимое tooemerge шаблон нагрузки hello через несколько минут в этом случае наилучшим генератор hello toolet, запустите для по крайней мере трех или четырех минут, прежде чем мониторинга hello нагрузки.</span><span class="sxs-lookup"><span data-stu-id="7d23d-192">Because of this it takes several minutes for hello load pattern tooemerge, so it’s best toolet hello generator run for at least three or four minutes before monitoring hello load.</span></span>

1. <span data-ttu-id="7d23d-193">В hello *интегрированной среды Сценариев PowerShell*откройте hello... \\Модулей обучения\\программы\\*LoadGenerator.ps1 Демонстрация* сценария.</span><span class="sxs-lookup"><span data-stu-id="7d23d-193">In hello *PowerShell ISE*, open hello ...\\Learning Modules\\Utilities\\*Demo-LoadGenerator.ps1* script.</span></span>
1. <span data-ttu-id="7d23d-194">Нажмите клавишу **F5** запустить сценарий hello и запустить генератор нагрузки hello (оставьте hello значения параметров по умолчанию сейчас).</span><span class="sxs-lookup"><span data-stu-id="7d23d-194">Press **F5** to run hello script and start hello load generator (leave hello default parameter values for now).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7d23d-195">toorun других сценариев, откройте новое окно интегрированной среды Сценариев PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7d23d-195">toorun other scripts, open a new PowerShell ISE window.</span></span> <span data-ttu-id="7d23d-196">Генератор нагрузки Hello выполняется как ряд заданий в локальном сеансе PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7d23d-196">hello load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="7d23d-197">Hello *LoadGenerator.ps1 Демонстрация* сценария начинается hello реальную нагрузку генератор скрипта, который выполняется как задача переднего плана, а также ряд создание нагрузки фоновых заданий.</span><span class="sxs-lookup"><span data-stu-id="7d23d-197">hello *Demo-LoadGenerator.ps1* script kicks off hello actual load generator script, which runs as a foreground task plus a series of background load-generation jobs.</span></span> <span data-ttu-id="7d23d-198">Задание генератор нагрузки вызывается для каждой базы данных, зарегистрированные в каталоге hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-198">A load-generator job is invoked for each database registered in hello catalog.</span></span> <span data-ttu-id="7d23d-199">задания Hello выполняются в локальном сеансе PowerShell, чтобы закрыть сеанс PowerShell hello останавливает все задания.</span><span class="sxs-lookup"><span data-stu-id="7d23d-199">hello jobs are running in your local PowerShell session, so closing hello PowerShell session stops all jobs.</span></span> <span data-ttu-id="7d23d-200">Если приостановить работу компьютера, создание нагрузки будет приостановлено и будет возобновлено после включения компьютера.</span><span class="sxs-lookup"><span data-stu-id="7d23d-200">If you suspend your machine, load generation is paused and will resume when you wake up your machine.</span></span>

<span data-ttu-id="7d23d-201">После того, как генератор нагрузки hello вызывает создание нагрузки задания для каждого клиента, задача переднего плана hello остается в состоянии вызова задания, где он запускает дополнительные фоновых заданий для любого новых клиентов, которые впоследствии провизионируются.</span><span class="sxs-lookup"><span data-stu-id="7d23d-201">Once hello load generator invokes load-generation jobs for each tenant, hello foreground task remains in a job-invoking state, where it starts additional background jobs for any new tenants that are subsequently provisioned.</span></span> <span data-ttu-id="7d23d-202">Можно использовать *Ctrl-C* или нажмите клавишу hello *остановить* кнопку toostop hello основной задачи, но существующие фонового задания будут продолжать для создания нагрузки на каждой базе данных.</span><span class="sxs-lookup"><span data-stu-id="7d23d-202">You can use *Ctrl-C* or press hello *Stop* button toostop hello foreground task, but existing background jobs will continue generating load on each database.</span></span> <span data-ttu-id="7d23d-203">Если нужно toomonitor и управлять hello фоновых заданий, используйте *Get-Job*, *Receive-Job* и *Stop-Job*.</span><span class="sxs-lookup"><span data-stu-id="7d23d-203">If you need toomonitor and control hello background jobs, use *Get-Job*, *Receive-Job* and *Stop-Job*.</span></span> <span data-ttu-id="7d23d-204">Пока выполняется задача переднего плана hello не может использовать hello же tooexecute сеанса PowerShell других сценариев.</span><span class="sxs-lookup"><span data-stu-id="7d23d-204">While hello foreground task is running you cannot use hello same PowerShell session tooexecute other scripts.</span></span> <span data-ttu-id="7d23d-205">toorun других сценариев, откройте новое окно интегрированной среды Сценариев PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7d23d-205">toorun other scripts, open a new PowerShell ISE window.</span></span>

<span data-ttu-id="7d23d-206">Чтобы сеанс toorestart hello нагрузки генератора, например с разными параметрами, можно остановить hello задача переднего плана, а затем повторно запустите hello *LoadGenerator.ps1 Демонстрация* сценария.</span><span class="sxs-lookup"><span data-stu-id="7d23d-206">If you want toorestart hello load generator session, for example with different parameters, you can stop hello foreground task and then re-run hello *Demo-LoadGenerator.ps1* script.</span></span> <span data-ttu-id="7d23d-207">Повторный запуск *LoadGenerator.ps1 Демонстрация* сначала останавливает все выполняемые задания, а затем перезапуск hello генератор, который запускает новый набор заданий с использованием текущих параметров hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-207">Re-running *Demo-LoadGenerator.ps1* first stops any currently running jobs, and then restarts hello generator, which kicks off a new set of jobs using hello current parameters.</span></span>

<span data-ttu-id="7d23d-208">Пока оставьте генератор нагрузки hello в состоянии вызова задания hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-208">For now, leave hello load generator running in hello job-invoking state.</span></span>


## <a name="provision-a-new-tenant"></a><span data-ttu-id="7d23d-209">Подготовка нового клиента</span><span class="sxs-lookup"><span data-stu-id="7d23d-209">Provision a new tenant</span></span>

<span data-ttu-id="7d23d-210">Hello первоначального развертывания создает три образца клиента, но давайте создадим другой toosee клиента как это влияет на приложения hello развертывания.</span><span class="sxs-lookup"><span data-stu-id="7d23d-210">hello initial deployment creates three sample tenants, but let’s create another tenant toosee how this impacts hello deployed application.</span></span> <span data-ttu-id="7d23d-211">рабочий процесс подготовки клиентов Wingtip SaaS Hello подробно описан в hello [учебника подготовки и каталога](sql-database-saas-tutorial-provision-and-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="7d23d-211">hello Wingtip SaaS provisioning-tenants workflow is detailed in hello [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md).</span></span> <span data-ttu-id="7d23d-212">На этом шаге вы сможете быстро создать клиент.</span><span class="sxs-lookup"><span data-stu-id="7d23d-212">In this step, you quickly create a new tenant.</span></span>

1. <span data-ttu-id="7d23d-213">Открыть... \\Modules\Provision обучения и каталога\\*Демонстрация ProvisionAndCatalog.ps1* в hello *интегрированной среды Сценариев PowerShell*.</span><span class="sxs-lookup"><span data-stu-id="7d23d-213">Open ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1* in hello *PowerShell ISE*.</span></span>
1. <span data-ttu-id="7d23d-214">Нажмите клавишу **F5** для выполнения сценария hello (оставьте значения по умолчанию hello сейчас).</span><span class="sxs-lookup"><span data-stu-id="7d23d-214">Press **F5** to run hello script (leave hello default values for now).</span></span>

   > [!NOTE]
   > <span data-ttu-id="7d23d-215">Использовать много сценариев Wingtip SaaS *$PSScriptRoot* tooallow перемещение папки toocall функции в других сценариях.</span><span class="sxs-lookup"><span data-stu-id="7d23d-215">Many Wingtip SaaS scripts use *$PSScriptRoot* tooallow navigating folders toocall functions in other scripts.</span></span> <span data-ttu-id="7d23d-216">Эта переменная вычисляется только при выполнении скрипта hello, нажав клавишу **F5**.</span><span class="sxs-lookup"><span data-stu-id="7d23d-216">This variable is only evaluated when hello script is executed by pressing **F5**.</span></span>  <span data-ttu-id="7d23d-217">Если выделить несколько скриптов и запустить их (**F8**), может произойти ошибка, поэтому нажмите клавишу **F5** при выполнении скриптов.</span><span class="sxs-lookup"><span data-stu-id="7d23d-217">Highlighting and running a selection (**F8**) can result in errors, so press **F5** when running scripts.</span></span>

<span data-ttu-id="7d23d-218">Hello новой базы данных клиента создается в пуле эластичных БД SQL, инициализированы и зарегистрированы в каталоге hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-218">hello new tenant database is created in a SQL elastic pool, initialized and registered in hello catalog.</span></span> <span data-ttu-id="7d23d-219">После успешной подготовки нового клиента hello продажи билетов *событий* в браузере откроется сайт:</span><span class="sxs-lookup"><span data-stu-id="7d23d-219">After successful provisioning, hello new tenant's ticket-selling *Events* site appears in your browser:</span></span>

![Новый клиент](./media/sql-database-saas-tutorial/red-maple-racing.png)

<span data-ttu-id="7d23d-221">Обновить hello *концентратора событий* и новый клиент hello появится в списке hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-221">Refresh hello *Events Hub* and hello new tenant now appears in hello list.</span></span>


## <a name="explore-hello-servers-pools-and-tenant-databases"></a><span data-ttu-id="7d23d-222">Просмотр серверов hello, пулы и клиентов баз данных</span><span class="sxs-lookup"><span data-stu-id="7d23d-222">Explore hello servers, pools, and tenant databases</span></span>

<span data-ttu-id="7d23d-223">Теперь, когда вы начали запущенного нагрузки для hello коллекцию клиентов, рассмотрим некоторые hello ресурсы, которые были развернуты.</span><span class="sxs-lookup"><span data-stu-id="7d23d-223">Now that you've started running a load against hello collection of tenants, let’s look at some of hello resources that were deployed:</span></span>

1. <span data-ttu-id="7d23d-224">В [портал Azure](http://portal.azure.com)tooyour список серверов SQL Server перейдите и откройте **каталога -&lt;пользователя&gt;**  сервера.</span><span class="sxs-lookup"><span data-stu-id="7d23d-224">In the [Azure portal](http://portal.azure.com), browse tooyour list of SQL servers and open the **catalog-&lt;USER&gt;** server.</span></span> <span data-ttu-id="7d23d-225">сервер каталога Hello содержит две базы данных.</span><span class="sxs-lookup"><span data-stu-id="7d23d-225">hello catalog server contains two databases.</span></span> <span data-ttu-id="7d23d-226">Hello **tenantcatalog**и hello **basetenantdb** (пустой *золотой* или шаблона базы данных, скопированных toocreate новых клиентов).</span><span class="sxs-lookup"><span data-stu-id="7d23d-226">hello **tenantcatalog**, and hello **basetenantdb** (an empty *golden* or template database that is copied toocreate new tenants).</span></span>

   ![databases](./media/sql-database-saas-tutorial/databases.png)

1. <span data-ttu-id="7d23d-228">Вернитесь tooyour список серверов SQL Server и откройте hello **tenants1 -&lt;пользователя&gt;**  сервер, содержащий базы данных клиента hello.</span><span class="sxs-lookup"><span data-stu-id="7d23d-228">Go back tooyour list of SQL servers and open hello **tenants1-&lt;USER&gt;** server that holds hello tenant databases.</span></span> <span data-ttu-id="7d23d-229">Каждая клиентская база данных является эластичной базой данных _уровня "Стандартный"_ в пуле уровня "Стандартный" на 50 eDTU.</span><span class="sxs-lookup"><span data-stu-id="7d23d-229">Each tenant database is an _Elastic Standard_ database in a 50 eDTU standard pool.</span></span> <span data-ttu-id="7d23d-230">Также Обратите внимание, _трассировки клен Red_ базы данных, базы данных клиента hello подготовлены в ранее.</span><span class="sxs-lookup"><span data-stu-id="7d23d-230">Also notice there is a _Red Maple Racing_ database, hello tenant database you provisioned previously.</span></span>

   ![server](./media/sql-database-saas-tutorial/server.png)

## <a name="monitor-hello-pool"></a><span data-ttu-id="7d23d-232">Монитор hello пула</span><span class="sxs-lookup"><span data-stu-id="7d23d-232">Monitor hello pool</span></span>

<span data-ttu-id="7d23d-233">Если генератор нагрузки hello выполнения в течение нескольких минут, достаточно данных должны быть доступны toostart обзор некоторых hello мониторингу встроены в пулы и баз данных.</span><span class="sxs-lookup"><span data-stu-id="7d23d-233">If hello load generator has been running for several minutes, enough data should be available toostart looking at some of hello monitoring capabilities built into pools and databases.</span></span>

1. <span data-ttu-id="7d23d-234">Обзор сервера toohello **tenants1 -&lt;пользователя&gt;**и нажмите кнопку **Pool1** об использовании ресурсов для пула hello (генератор нагрузки hello запускали часа в hello следующие диаграммы) :</span><span class="sxs-lookup"><span data-stu-id="7d23d-234">Browse toohello server **tenants1-&lt;USER&gt;**, and click **Pool1** to view resource utilization for hello pool (hello load generator ran for an hour in hello following charts):</span></span>

   ![Отслеживание пула](./media/sql-database-saas-tutorial/monitor-pool.png)

<span data-ttu-id="7d23d-236">На этих диаграммах хорошо видно, насколько хорошо подходят эластичные пулы и база данных SQL для рабочих нагрузок приложения SaaS.</span><span class="sxs-lookup"><span data-stu-id="7d23d-236">What these two charts nicely illustrate, is how well suited elastic pools and SQL Database are for SaaS application workloads.</span></span> <span data-ttu-id="7d23d-237">Четырех баз данных, которые каждого всплеск tooas почти так же легко, поддерживаемых edtu, которое 40 50 eDTU пула.</span><span class="sxs-lookup"><span data-stu-id="7d23d-237">Four databases that are each bursting tooas much as 40 eDTUs are easily being supported in a 50 eDTU pool.</span></span> <span data-ttu-id="7d23d-238">Если они были подготовлены как автономные базы данных, они бы каждой необходимости toobe S2 (50 DTU) toosupport hello пакетами.</span><span class="sxs-lookup"><span data-stu-id="7d23d-238">If they were provisioned as standalone databases, they would each need toobe an S2 (50 DTU) toosupport hello bursts.</span></span> <span data-ttu-id="7d23d-239">стоимость Hello 4 S2 автономные базы данных могут быть цены hello почти 3 раза пула hello и hello пула по-прежнему содержит удовлетворяя многие дополнительные базы данных.</span><span class="sxs-lookup"><span data-stu-id="7d23d-239">hello cost of 4 standalone S2 databases would be nearly 3 times hello price of hello pool, and hello pool still has plenty of headroom for many more databases.</span></span> <span data-ttu-id="7d23d-240">В реальных ситуациях пользователям баз данных SQL в данный момент выполняются копирование баз данных too500 в 200 eDTU пулы.</span><span class="sxs-lookup"><span data-stu-id="7d23d-240">In real-world situations, SQL Database customers are currently running up too500 databases in 200 eDTU pools.</span></span> <span data-ttu-id="7d23d-241">Дополнительные сведения см. в разделе hello [наблюдение за учебника](sql-database-saas-tutorial-performance-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="7d23d-241">For more information, see hello [performance monitoring tutorial](sql-database-saas-tutorial-performance-monitoring.md).</span></span>


## <a name="next-steps"></a><span data-ttu-id="7d23d-242">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="7d23d-242">Next steps</span></span>

<span data-ttu-id="7d23d-243">Из этого руководства вы узнали следующее:</span><span class="sxs-lookup"><span data-stu-id="7d23d-243">In this tutorial you learned:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="7d23d-244">Как toodeploy hello приложения Wingtip SaaS</span><span class="sxs-lookup"><span data-stu-id="7d23d-244">How toodeploy hello Wingtip SaaS application</span></span>
> * <span data-ttu-id="7d23d-245">О серверах hello, пулы и баз данных, составляющих приложение hello</span><span class="sxs-lookup"><span data-stu-id="7d23d-245">About hello servers, pools, and databases that make up hello app</span></span>
> * <span data-ttu-id="7d23d-246">Клиенты, сопоставленные tootheir данных с помощью hello *каталога*</span><span class="sxs-lookup"><span data-stu-id="7d23d-246">Tenants are mapped tootheir data with hello *catalog*</span></span>
> * <span data-ttu-id="7d23d-247">Как tooprovision новых клиентов</span><span class="sxs-lookup"><span data-stu-id="7d23d-247">How tooprovision new tenants</span></span>
> * <span data-ttu-id="7d23d-248">Как toomonitor использование пула tooview клиента действия</span><span class="sxs-lookup"><span data-stu-id="7d23d-248">How tooview pool utilization toomonitor tenant activity</span></span>
> * <span data-ttu-id="7d23d-249">Взаимосвязь toostop ресурсы образец toodelete выставления счетов</span><span class="sxs-lookup"><span data-stu-id="7d23d-249">How toodelete sample resources toostop related billing</span></span>

<span data-ttu-id="7d23d-250">Теперь попробуйте hello [учебника подготовки и каталога](sql-database-saas-tutorial-provision-and-catalog.md)</span><span class="sxs-lookup"><span data-stu-id="7d23d-250">Now try hello [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md)</span></span>



## <a name="additional-resources"></a><span data-ttu-id="7d23d-251">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="7d23d-251">Additional resources</span></span>

* <span data-ttu-id="7d23d-252">Дополнительные [учебники, созданных на основе hello приложения Wingtip SaaS](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="7d23d-252">Additional [tutorials that build on hello Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* <span data-ttu-id="7d23d-253">в разделе toolearn о пулах эластичных БД [ *возможности пуле эластичных БД Azure SQL*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span><span class="sxs-lookup"><span data-stu-id="7d23d-253">toolearn about elastic pools, see [*What is an Azure SQL elastic pool*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span></span>
* <span data-ttu-id="7d23d-254">toolearn о эластичной заданиях см [ *базы данных горизонтально масштабируемого облака управление*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span><span class="sxs-lookup"><span data-stu-id="7d23d-254">toolearn about elastic jobs, see [*Managing scaled-out cloud databases*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span></span>
* <span data-ttu-id="7d23d-255">toolearn о приложения SaaS с несколькими клиентами, в разделе [ *шаблоны многопользовательских приложений SaaS проектирования*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span><span class="sxs-lookup"><span data-stu-id="7d23d-255">toolearn about multi-tenant SaaS applications, see [*Design patterns for multi-tenant SaaS applications*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span></span>
