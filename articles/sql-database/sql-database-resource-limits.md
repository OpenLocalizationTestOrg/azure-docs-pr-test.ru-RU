---
title: "Ограничения ресурсов базы данных SQL Azure | Документация Майкрософт"
description: "На этой странице описываются некоторые общие ограничения ресурсов для Базы данных SQL Azure."
services: sql-database
documentationcenter: na
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: 884e519f-23bb-4b73-a718-00658629646a
ms.service: sql-database
ms.custom: DBs & servers
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/12/2017
ms.author: carlrab
ms.openlocfilehash: e75458db79e6c15f8d5155b71f04a20fa21818ff
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="azure-sql-database-resource-limits"></a><span data-ttu-id="79242-103">Ограничения ресурсов базы данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="79242-103">Azure SQL Database resource limits</span></span>
## <a name="overview"></a><span data-ttu-id="79242-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="79242-104">Overview</span></span>
<span data-ttu-id="79242-105">База данных SQL Azure управляет ресурсами, доступными для базы данных, с использованием двух различных механизмов: **управления ресурсами** и **принудительного применения ограничений**.</span><span class="sxs-lookup"><span data-stu-id="79242-105">Azure SQL Database manages the resources available to a database using two different mechanisms: **Resources Governance** and **Enforcement of Limits**.</span></span> <span data-ttu-id="79242-106">В этой статье объясняются эти два основных элемента управления ресурсами.</span><span class="sxs-lookup"><span data-stu-id="79242-106">This topic explains these two main areas of resource management.</span></span>

## <a name="resource-governance"></a><span data-ttu-id="79242-107">управление ресурсами;</span><span class="sxs-lookup"><span data-stu-id="79242-107">Resource governance</span></span>
<span data-ttu-id="79242-108">Одна из целей проектирования уровней обслуживания "Базовый", "Стандартный", "Премиум" и Premium RS — обеспечить такое поведение базы данных SQL Azure, как если бы она работала на отдельном компьютере в полной изоляции от других баз данных.</span><span class="sxs-lookup"><span data-stu-id="79242-108">One of the design goals of the Basic, Standard, Premium, and Premium RS service tiers is for Azure SQL Database to behave as if the database is running on its own machine, isolated from other databases.</span></span> <span data-ttu-id="79242-109">Управление ресурсами эмулирует такое поведение.</span><span class="sxs-lookup"><span data-stu-id="79242-109">Resource governance emulates this behavior.</span></span> <span data-ttu-id="79242-110">В совокупности ресурсы, назначенные базе данных и связанные с ЦП, объемом памяти, а также операциями ввода-вывода журнала и данных, могут использоваться по максимуму. В таком случае механизм управления ресурсами будет отправлять запросы в очередь на выполнение и назначать им ресурсы по мере их высвобождения.</span><span class="sxs-lookup"><span data-stu-id="79242-110">If the aggregated resource utilization reaches the maximum available CPU, Memory, Log I/O, and Data I/O resources assigned to the database, resource governance queues queries in execution and assign resources to the queued queries as they free up.</span></span>

<span data-ttu-id="79242-111">Как и на выделенном компьютере, использование всех доступных ресурсов приводит к задержке выполнения текущих выполняемых запросов, что может вызвать превышение времени ожидания команд на клиенте.</span><span class="sxs-lookup"><span data-stu-id="79242-111">As on a dedicated machine, utilizing all available resources results in a longer execution of currently executing queries, which can result in command timeouts on the client.</span></span> <span data-ttu-id="79242-112">Приложения с агрессивной логикой повтора попыток и приложения, которые выполняют запросы к базе данных с высокой частотой, могут получать сообщения об ошибках при попытке выполнения новых запросов, если достигнут лимит одновременных запросов.</span><span class="sxs-lookup"><span data-stu-id="79242-112">Applications with aggressive retry logic and applications that execute queries against the database with a high frequency can encounter errors messages when trying to execute new queries when the limit of concurrent requests has been reached.</span></span>

### <a name="recommendations"></a><span data-ttu-id="79242-113">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="79242-113">Recommendations:</span></span>
<span data-ttu-id="79242-114">При приближении к максимальной загруженности базы данных отслеживайте показатели использования ресурсов, а также среднее время отклика на запросы.</span><span class="sxs-lookup"><span data-stu-id="79242-114">Monitor the resource utilization and the average response times of queries when nearing the maximum utilization of a database.</span></span> <span data-ttu-id="79242-115">При обнаружении увеличенных задержек выполнения запросов обычно есть три варианта:</span><span class="sxs-lookup"><span data-stu-id="79242-115">When encountering higher query latencies you generally have three options:</span></span>

1. <span data-ttu-id="79242-116">Уменьшить объем входящих запросов к базе данных, чтобы предотвратить превышение времени ожидания и накопление запросов.</span><span class="sxs-lookup"><span data-stu-id="79242-116">Reduce the number of incoming requests to the database to prevent timeout and the pile up of requests.</span></span>
2. <span data-ttu-id="79242-117">Назначить базе данных более высокий уровень производительности.</span><span class="sxs-lookup"><span data-stu-id="79242-117">Assign a higher performance level to the database.</span></span>
3. <span data-ttu-id="79242-118">Оптимизировать запросы для уменьшения использования ресурсов каждым из них.</span><span class="sxs-lookup"><span data-stu-id="79242-118">Optimize queries to reduce the resource utilization of each query.</span></span> <span data-ttu-id="79242-119">Для получения дополнительных сведений см. раздел "Настройка запросов и подсказки" в статье "Руководство по производительности базы данных SQL Azure".</span><span class="sxs-lookup"><span data-stu-id="79242-119">For more information, see the Query Tuning/Hinting section in the Azure SQL Database Performance Guidance article.</span></span>

## <a name="enforcement-of-limits"></a><span data-ttu-id="79242-120">принудительные ограничения;</span><span class="sxs-lookup"><span data-stu-id="79242-120">Enforcement of limits</span></span>
<span data-ttu-id="79242-121">При достижении лимита для ресурсов, отличных от ЦП, памяти, ввода-вывода журнала и ввода-вывода данных, новые запросы принудительно запрещаются.</span><span class="sxs-lookup"><span data-stu-id="79242-121">Resources other than CPU, Memory, Log I/O, and Data I/O are enforced by denying new requests when limits are reached.</span></span> <span data-ttu-id="79242-122">Когда база данных достигает заданного максимального размера, операции вставки и обновления, которые увеличивают объем данных, завершаются ошибкой. А операции выделения и удаления продолжают выполнятся.</span><span class="sxs-lookup"><span data-stu-id="79242-122">When a database reaches the configured maximum size limit, inserts and updates that increase data size fail, while selects and deletes continue to work.</span></span> <span data-ttu-id="79242-123">Клиенты получат [сообщение об ошибке](sql-database-develop-error-messages.md) в зависимости от достигнутого лимита.</span><span class="sxs-lookup"><span data-stu-id="79242-123">Clients receive an [error message](sql-database-develop-error-messages.md) depending on the limit that has been reached.</span></span>

<span data-ttu-id="79242-124">Например, ограничено количество подключений к базе данных SQL и количество одновременных запросов, которые могут быть обработаны.</span><span class="sxs-lookup"><span data-stu-id="79242-124">For example, the number of connections to a SQL database and the number of concurrent requests that can be processed are restricted.</span></span> <span data-ttu-id="79242-125">Для поддержки пулов соединений база данных SQL разрешает большее количество подключений к базе данных, чем количество одновременных запросов.</span><span class="sxs-lookup"><span data-stu-id="79242-125">SQL Database allows the number of connections to the database to be greater than the number of concurrent requests to support connection pooling.</span></span> <span data-ttu-id="79242-126">Хотя приложение может легко регулировать число доступных подключений, объем параллельных запросов зачастую существенно труднее оценивать и контролировать.</span><span class="sxs-lookup"><span data-stu-id="79242-126">While the number of connections that are available can easily be controlled by the application, the number of parallel requests is often times harder to estimate and to control.</span></span> <span data-ttu-id="79242-127">Возникновение ошибок особенно вероятно во время пиковых нагрузок, когда либо приложение отправляет слишком много запросов, либо база данных достигает лимита ресурсов и начинает накапливать рабочие потоки из-за все дольше выполняемых запросов.</span><span class="sxs-lookup"><span data-stu-id="79242-127">Especially during peak loads when the application either sends too many requests or the database reaches its resource limits and starts piling up worker threads due to longer running queries, errors can be encountered.</span></span>

## <a name="service-tiers-and-performance-levels"></a><span data-ttu-id="79242-128">Уровни служб и уровни производительности</span><span class="sxs-lookup"><span data-stu-id="79242-128">Service tiers and performance levels</span></span>
<span data-ttu-id="79242-129">Существуют уровни служб и уровни производительности для отдельных баз данных и эластичных пулов.</span><span class="sxs-lookup"><span data-stu-id="79242-129">There are service tiers and performance levels for both single database and elastic pools.</span></span>

### <a name="single-databases"></a><span data-ttu-id="79242-130">Отдельные базы данных</span><span class="sxs-lookup"><span data-stu-id="79242-130">Single databases</span></span>
<span data-ttu-id="79242-131">Ограничения для одной базы данных определяются уровнем служб и уровнем производительности базы данных.</span><span class="sxs-lookup"><span data-stu-id="79242-131">For a single database, the limits of a database are defined by the database service tier and performance level.</span></span> <span data-ttu-id="79242-132">В следующей таблице описываются характеристики баз данных уровня "Базовый", "Стандартный", "Премиум" и Premium RS на различных уровнях производительности.</span><span class="sxs-lookup"><span data-stu-id="79242-132">The following table describes the characteristics of Basic, Standard, Premium, and Premium RS databases at varying performance levels.</span></span>

[!INCLUDE [SQL DB service tiers table](../../includes/sql-database-service-tiers-table.md)]

> [!IMPORTANT]
> <span data-ttu-id="79242-133">Клиенты, использующие уровни производительности P11 и P15, могут использовать до 4 ТБ предоставленного хранилища без дополнительной платы.</span><span class="sxs-lookup"><span data-stu-id="79242-133">Customers using P11 and P15 performance levels can use up to 4 TB of included storage at no additional charge.</span></span> <span data-ttu-id="79242-134">Возможность использования до 4 ТБ предоставленного хранилища в настоящее время доступна в следующих регионах: восточная часть США 2, западная часть США, Виргиния (для обслуживания государственных организаций США), Западная Европа, Центральная Германия, Юго-Восточная Азия, восточная Япония, восточная Австралия, Центральная Канада и Восточная Канада.</span><span class="sxs-lookup"><span data-stu-id="79242-134">This 4 TB option is currently available in the following regions: US East2, West US, US Gov Virginia, West Europe, Germany Central, South East Asia, Japan East, Australia East, Canada Central, and Canada East.</span></span>
>

### <a name="elastic-pools"></a><span data-ttu-id="79242-135">Пулы эластичных БД</span><span class="sxs-lookup"><span data-stu-id="79242-135">Elastic pools</span></span>
<span data-ttu-id="79242-136">[Пулы эластичных БД](sql-database-elastic-pool.md) совместно используют ресурсы между базами данных в пуле.</span><span class="sxs-lookup"><span data-stu-id="79242-136">[Elastic pools](sql-database-elastic-pool.md) share resources across databases in the pool.</span></span> <span data-ttu-id="79242-137">В следующей таблице описываются характеристики эластичных пулов уровня "Базовый", "Стандартный", "Премиум" и "Премиум RS".</span><span class="sxs-lookup"><span data-stu-id="79242-137">The following table describes the characteristics of Basic, Standard, Premium, and Premium RS elastic pools.</span></span>

[!INCLUDE [SQL DB service tiers table for elastic databases](../../includes/sql-database-service-tiers-table-elastic-pools.md)]

<span data-ttu-id="79242-138">Расширенное определение каждого ресурса, указанного в предыдущих таблицах, см. в описаниях в разделе [Возможности и ограничения уровней служб](sql-database-performance-guidance.md#service-tier-capabilities-and-limits).</span><span class="sxs-lookup"><span data-stu-id="79242-138">For an expanded definition of each resource listed in the previous tables, see the descriptions in [Service tier capabilities and limits](sql-database-performance-guidance.md#service-tier-capabilities-and-limits).</span></span> <span data-ttu-id="79242-139">Общие сведения об уровнях служб см. в статье [Уровни служб базы данных SQL для отдельных баз данных и пулов эластичных баз данных](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="79242-139">For an overview of service tiers, see [Azure SQL Database Service Tiers and Performance Levels](sql-database-service-tiers.md).</span></span>

## <a name="other-sql-database-limits"></a><span data-ttu-id="79242-140">Другие ограничения базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="79242-140">Other SQL Database limits</span></span>
| <span data-ttu-id="79242-141">Область</span><span class="sxs-lookup"><span data-stu-id="79242-141">Area</span></span> | <span data-ttu-id="79242-142">Ограничение</span><span class="sxs-lookup"><span data-stu-id="79242-142">Limit</span></span> | <span data-ttu-id="79242-143">Описание</span><span class="sxs-lookup"><span data-stu-id="79242-143">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="79242-144">Базы данных, использующие автоматический экспорт для каждой подписки</span><span class="sxs-lookup"><span data-stu-id="79242-144">Databases using Automated export per subscription</span></span> |<span data-ttu-id="79242-145">10</span><span class="sxs-lookup"><span data-stu-id="79242-145">10</span></span> |<span data-ttu-id="79242-146">Автоматический экспорт позволяет создать настраиваемое расписание резервного копирования баз данных SQL.</span><span class="sxs-lookup"><span data-stu-id="79242-146">Automated export allows you to create a custom schedule for backing up your SQL databases.</span></span> <span data-ttu-id="79242-147">Срок действия предварительной версии этой функции истекает 1 марта 2017 г.</span><span class="sxs-lookup"><span data-stu-id="79242-147">The preview of this feature will end on March 1, 2017.</span></span>  |
| <span data-ttu-id="79242-148">Баз данных на сервер</span><span class="sxs-lookup"><span data-stu-id="79242-148">Databases per server</span></span> |<span data-ttu-id="79242-149">До 5000</span><span class="sxs-lookup"><span data-stu-id="79242-149">Up to 5000</span></span> |<span data-ttu-id="79242-150">На каждом сервере может размещаться не более 5000 баз данных.</span><span class="sxs-lookup"><span data-stu-id="79242-150">Up to 5000 databases are allowed per server.</span></span> |
| <span data-ttu-id="79242-151">Количество DTU для каждого сервера</span><span class="sxs-lookup"><span data-stu-id="79242-151">DTUs per server</span></span> |<span data-ttu-id="79242-152">45000</span><span class="sxs-lookup"><span data-stu-id="79242-152">45000</span></span> |<span data-ttu-id="79242-153">Для подготовки изолированных баз данных и эластичных пулов для каждого сервера доступно 45000 DTU.</span><span class="sxs-lookup"><span data-stu-id="79242-153">45000 DTUs are allowed per server for provisioning standalone databases and elastic pools.</span></span> <span data-ttu-id="79242-154">Общее количество изолированных баз данных и пулов для каждого сервера ограничено только числом DTU сервера.</span><span class="sxs-lookup"><span data-stu-id="79242-154">The total number of standalone databases and pools allowed per server is limited only by the number of server DTUs.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="79242-155">В настоящий момент служба Azure SQL Database Automated Export находится на этапе предварительной версии, и ее использование будет прекращено 1 марта 2017 года.</span><span class="sxs-lookup"><span data-stu-id="79242-155">Azure SQL Database Automated Export is now in preview and will be retired on March 1, 2017.</span></span> <span data-ttu-id="79242-156">Начиная с 1 декабря 2016 года завершается поддержка автоматического экспорта для всех баз данных SQL.</span><span class="sxs-lookup"><span data-stu-id="79242-156">Starting December 1st, 2016, you will no longer be able to configure automated export on any SQL database.</span></span> <span data-ttu-id="79242-157">Все существующие задания автоматического экспорта продолжат работать до 1 марта 2017 года.</span><span class="sxs-lookup"><span data-stu-id="79242-157">All your existing automated export jobs will continue to work until March 1st, 2017.</span></span> <span data-ttu-id="79242-158">После 1 декабря 2016 года можно использовать [долгосрочное хранение резервных копий](sql-database-long-term-retention.md) или [службу автоматизации Azure](../automation/automation-intro.md), чтобы периодически архивировать базы данных SQL с помощью PowerShell согласно выбранному расписанию.</span><span class="sxs-lookup"><span data-stu-id="79242-158">After December 1st, 2016, you can use [long-term backup retention](sql-database-long-term-retention.md) or [Azure Automation](../automation/automation-intro.md) to archive SQL databases periodically using PowerShell periodically according to a schedule of your choice.</span></span> <span data-ttu-id="79242-159">Пример сценария можно скачать из [репозитория GitHub](https://github.com/Microsoft/sql-server-samples/tree/master/samples/manage/azure-automation-automated-export).</span><span class="sxs-lookup"><span data-stu-id="79242-159">For a sample script, you can download the [sample script from GitHub](https://github.com/Microsoft/sql-server-samples/tree/master/samples/manage/azure-automation-automated-export).</span></span>
>


## <a name="resources"></a><span data-ttu-id="79242-160">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="79242-160">Resources</span></span>
[<span data-ttu-id="79242-161">Лимиты, квоты и ограничения подписки и обслуживания Azure</span><span class="sxs-lookup"><span data-stu-id="79242-161">Azure Subscription and Service Limits, Quotas, and Constraints</span></span>](../azure-subscription-service-limits.md)

[<span data-ttu-id="79242-162">Уровни служб и уровни производительности в базе данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="79242-162">Azure SQL Database Service Tiers and Performance Levels</span></span>](sql-database-service-tiers.md)

[<span data-ttu-id="79242-163">Сообщения об ошибках для клиентских программ базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="79242-163">Error messages for SQL Database client programs</span></span>](sql-database-develop-error-messages.md)
