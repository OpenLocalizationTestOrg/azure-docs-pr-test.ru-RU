---
title: "База данных SQL Server aaaMigrate tooAzure базы данных SQL | Документы Microsoft"
description: "Узнайте, toomigrate вашей tooAzure базы данных SQL Server базы данных SQL."
services: sql-database
documentationcenter: 
author: janeng
manager: jhubbard
editor: 
tags: 
ms.assetid: 
ms.service: sql-database
ms.custom: mvc,load & move data
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: 
ms.date: 06/27/2017
ms.author: janeng
ms.openlocfilehash: d10ad1d26576194f1dd6858bae5c3e7c1ec4fb91
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-your-sql-server-database-tooazure-sql-database"></a><span data-ttu-id="dd831-103">Перенос вашей tooAzure базы данных SQL Server база данных SQL</span><span class="sxs-lookup"><span data-stu-id="dd831-103">Migrate your SQL Server database tooAzure SQL Database</span></span>

<span data-ttu-id="dd831-104">Перемещение сервера SQL tooAzure базы данных база данных SQL состоит из трех этапов - подготовить, а затем экспортировать и затем импортировать hello базы данных.</span><span class="sxs-lookup"><span data-stu-id="dd831-104">Moving your SQL Server database tooAzure SQL Database is a three part process - you first prepare, then export, and then import hello database.</span></span> <span data-ttu-id="dd831-105">Из этого руководства вы узнаете, как выполнять такие задачи.</span><span class="sxs-lookup"><span data-stu-id="dd831-105">In this tutorial, you learn to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="dd831-106">Подготовка базы данных в SQL Server для миграции tooAzure базы данных SQL с помощью hello [помощник по миграции данных](https://www.microsoft.com/download/details.aspx?id=53595) (DMA).</span><span class="sxs-lookup"><span data-stu-id="dd831-106">Prepare a database in a SQL Server for migration tooAzure SQL Database using hello [Data Migration Assistant](https://www.microsoft.com/download/details.aspx?id=53595) (DMA)</span></span>
> * <span data-ttu-id="dd831-107">Экспорт файла BACPAC tooa hello базы данных</span><span class="sxs-lookup"><span data-stu-id="dd831-107">Export hello database tooa BACPAC file</span></span>
> * <span data-ttu-id="dd831-108">Импорт файла BACPAC hello в базе данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="dd831-108">Import hello BACPAC file into an Azure SQL Database</span></span>

<span data-ttu-id="dd831-109">Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/), прежде чем начинать работу.</span><span class="sxs-lookup"><span data-stu-id="dd831-109">If you don't have an Azure subscription, [create a free account](https://azure.microsoft.com/free/) before you begin.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="dd831-110">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="dd831-110">Prerequisites</span></span>

<span data-ttu-id="dd831-111">toocomplete завершения этого учебника, убедитесь, что hello следующие предварительные требования:</span><span class="sxs-lookup"><span data-stu-id="dd831-111">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

- <span data-ttu-id="dd831-112">Установленные hello новейшую версию [SQL Server Management Studio](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms) (SSMS).</span><span class="sxs-lookup"><span data-stu-id="dd831-112">Installed hello newest version of [SQL Server Management Studio](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms) (SSMS).</span></span> <span data-ttu-id="dd831-113">Также при установке SSMS устанавливается hello новейшую версию SQLPackage, программы командной строки, которое может быть используется tooautomate задачи разработки базы данных.</span><span class="sxs-lookup"><span data-stu-id="dd831-113">Installing SSMS also installs hello newest version of SQLPackage, a command-line utility that can be used tooautomate a range of database development tasks.</span></span> 
- <span data-ttu-id="dd831-114">Установленные hello [помощник по миграции данных](https://www.microsoft.com/download/details.aspx?id=53595) (DMA).</span><span class="sxs-lookup"><span data-stu-id="dd831-114">Installed hello [Data Migration Assistant](https://www.microsoft.com/download/details.aspx?id=53595) (DMA).</span></span>
- <span data-ttu-id="dd831-115">Должна быть определена и иметь доступ tooa базы данных toomigrate.</span><span class="sxs-lookup"><span data-stu-id="dd831-115">You have identified and have access tooa database toomigrate.</span></span> <span data-ttu-id="dd831-116">В этом учебнике используется hello [SQL Server 2008 R2 базы данных AdventureWorks OLTP](https://msftdbprodsamples.codeplex.com/releases/view/59211) в экземпляре SQL Server 2008 R2 и более поздних версий, но можно использовать любую базу данных, по своему усмотрению.</span><span class="sxs-lookup"><span data-stu-id="dd831-116">This tutorial uses hello [SQL Server 2008R2 AdventureWorks OLTP database](https://msftdbprodsamples.codeplex.com/releases/view/59211) on an instance of SQL Server 2008R2 or newer, but you can use any database of your choice.</span></span> <span data-ttu-id="dd831-117">вопросы совместимости toofix, используйте [SQL Server Data Tools](https://docs.microsoft.com/sql/ssdt/download-sql-server-data-tools-ssdt)</span><span class="sxs-lookup"><span data-stu-id="dd831-117">toofix compatibility issues, use [SQL Server Data Tools](https://docs.microsoft.com/sql/ssdt/download-sql-server-data-tools-ssdt)</span></span>

## <a name="prepare-for-migration"></a><span data-ttu-id="dd831-118">Подготовка к переносу</span><span class="sxs-lookup"><span data-stu-id="dd831-118">Prepare for migration</span></span>

<span data-ttu-id="dd831-119">Все готово tooprepare для миграции.</span><span class="sxs-lookup"><span data-stu-id="dd831-119">You are ready tooprepare for migration.</span></span> <span data-ttu-id="dd831-120">Выполните эти шаги toouse hello  **[помощник по миграции данных](https://www.microsoft.com/download/details.aspx?id=53595)**  tooassess hello готовности базы данных для миграции tooAzure базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="dd831-120">Follow these steps toouse hello **[Data Migration Assistant](https://www.microsoft.com/download/details.aspx?id=53595)** tooassess hello readiness of your database for migration tooAzure SQL Database.</span></span>

1. <span data-ttu-id="dd831-121">Откройте hello **помощник по миграции данных**.</span><span class="sxs-lookup"><span data-stu-id="dd831-121">Open hello **Data Migration Assistant**.</span></span> <span data-ttu-id="dd831-122">Можно запустить DMA на любом компьютере с подключением toohello экземпляр содержащего hello базы данных SQL Server, что планирование toomigrate, tooinstall его на компьютере с размещенным hello hello экземпляр SQL Server не требуется.</span><span class="sxs-lookup"><span data-stu-id="dd831-122">You can run DMA on any computer with connectivity toohello SQL Server instance containing hello database that you plan toomigrate, you do not need tooinstall it on hello computer hosting hello SQL Server instance.</span></span>

     ![Открытие Data Migration Assistant](./media/sql-database-migrate-your-sql-server-database/data-migration-assistant-open.png)

2. <span data-ttu-id="dd831-124">В левом меню hello выберите **+ создать** toocreate **оценки** проекта.</span><span class="sxs-lookup"><span data-stu-id="dd831-124">In hello left-hand menu, click **+ New** toocreate an **Assessment** project.</span></span> <span data-ttu-id="dd831-125">Заполните форму hello с **имя проекта** (все остальные значения следует оставить значения по умолчанию) и нажмите кнопку **создать**.</span><span class="sxs-lookup"><span data-stu-id="dd831-125">Fill in hello form with a **Project name** (all other values should be left at their default values) and click **Create**.</span></span> <span data-ttu-id="dd831-126">Hello **параметры** откроется страница.</span><span class="sxs-lookup"><span data-stu-id="dd831-126">hello **Options** page opens.</span></span>

     ![Создание проекта в Data Migration Assistant](./media/sql-database-migrate-your-sql-server-database/data-migration-assistant-new-project.png)

3. <span data-ttu-id="dd831-128">На hello **параметры** щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="dd831-128">On hello **Options** page, click **Next**.</span></span> <span data-ttu-id="dd831-129">Hello **выберите источники** откроется страница.</span><span class="sxs-lookup"><span data-stu-id="dd831-129">hello **Select sources** page opens.</span></span>

     ![Создание параметров переноса данных](./media/sql-database-migrate-your-sql-server-database/data-migration-assistant-options.png) 

4. <span data-ttu-id="dd831-131">На hello **выберите источники** введите имя экземпляра SQL Server, содержащего сервер hello, планирование toomigrate hello.</span><span class="sxs-lookup"><span data-stu-id="dd831-131">On hello **Select sources** page, enter hello name of SQL Server instance containing hello server you plan toomigrate.</span></span> <span data-ttu-id="dd831-132">Изменение hello другие значения на этой странице, при необходимости.</span><span class="sxs-lookup"><span data-stu-id="dd831-132">Change hello other values on this page if necessary.</span></span> <span data-ttu-id="dd831-133">Щелкните **Подключить**.</span><span class="sxs-lookup"><span data-stu-id="dd831-133">Click **Connect**.</span></span>

     ![Выбор новых источников при подготовке к переносу данных](./media/sql-database-migrate-your-sql-server-database/data-migration-assistant-sources.png)

5. <span data-ttu-id="dd831-135">В hello **добавить источники** часть hello **выберите источники** выберите флажки hello toobe hello баз данных, протестированы на совместимость.</span><span class="sxs-lookup"><span data-stu-id="dd831-135">In hello **Add sources** portion of hello **Select sources** page, select hello checkboxes for hello databases toobe tested for compatibility.</span></span> <span data-ttu-id="dd831-136">Щелкните **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="dd831-136">Click **Add**.</span></span>

     ![Выбор новых источников при подготовке к переносу данных](./media/sql-database-migrate-your-sql-server-database/data-migration-assistant-sources-add.png)

6. <span data-ttu-id="dd831-138">Нажмите кнопку **Start Assessment** (Запустить оценку).</span><span class="sxs-lookup"><span data-stu-id="dd831-138">Click **Start Assessment**.</span></span>

     ![Запуск оценки при подготовке к переносу данных](./media/sql-database-migrate-your-sql-server-database/data-migration-assistant-start-assessment.png)

7. <span data-ttu-id="dd831-140">После завершения оценки hello, сначала найдите toosee, если база данных hello toomigrate достаточно совместимы.</span><span class="sxs-lookup"><span data-stu-id="dd831-140">When hello assessment completes, first look toosee if hello database is sufficiently compatible toomigrate.</span></span> <span data-ttu-id="dd831-141">Найдите флажок hello на фоне зеленого круга.</span><span class="sxs-lookup"><span data-stu-id="dd831-141">Look for hello checkmark in a green circle.</span></span>

     ![Результаты оценки совместимости при подготовке к переносу данных](./media/sql-database-migrate-your-sql-server-database/data-migration-assistant-assessment-results-compatible.png)

8. <span data-ttu-id="dd831-143">Просмотрите результаты hello.</span><span class="sxs-lookup"><span data-stu-id="dd831-143">Review hello results.</span></span> <span data-ttu-id="dd831-144">Hello **паритет функций SQL Server** показаны не все результаты tooreview результатов по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="dd831-144">hello **SQL Server feature parity** results shown are hello default results tooreview.</span></span> <span data-ttu-id="dd831-145">В частности, просмотрите hello сведения о функциях, не поддерживаемые и частично поддерживаемые и hello предоставленные сведения о рекомендуемых действий.</span><span class="sxs-lookup"><span data-stu-id="dd831-145">Specifically review hello information about unsupported and partially supported features, and hello provided information about recommended actions.</span></span> 

     ![Результаты сравнения при подготовке к переносу данных](./media/sql-database-migrate-your-sql-server-database/data-migration-assistant-assessment-results-parity.png)

9. <span data-ttu-id="dd831-147">Просмотрите hello **проблемы совместимости** , щелкнув соответствующий параметр в верхнем левом углу hello.</span><span class="sxs-lookup"><span data-stu-id="dd831-147">Review hello **Compatibility issues** by clicking that option in hello upper left.</span></span> <span data-ttu-id="dd831-148">В частности анализ hello сведения о миграции препятствия для изменения поведения и устаревшие компоненты для каждого уровня совместимости.</span><span class="sxs-lookup"><span data-stu-id="dd831-148">Specifically review hello information about migration blockers, behavior changes, and deprecated features for each compatibility level.</span></span> <span data-ttu-id="dd831-149">Для базы данных hello AdventureWorks2008R2, проверьте изменения hello tooFull-Text Search, так как SQL Server 2008 и hello с отличиями tooSERVERPROPERTY('LCID') SQL Server 2000.</span><span class="sxs-lookup"><span data-stu-id="dd831-149">For hello AdventureWorks2008R2 database, review hello changes tooFull-Text Search since SQL Server 2008 and hello changes tooSERVERPROPERTY('LCID') since SQL Server 2000.</span></span> <span data-ttu-id="dd831-150">Дополнительные сведения об этих изменениях предоставлены по ссылкам.</span><span class="sxs-lookup"><span data-stu-id="dd831-150">For details on these changes, links for more information is provided.</span></span> <span data-ttu-id="dd831-151">Многие параметры и настройки полнотекстового поиска изменились.</span><span class="sxs-lookup"><span data-stu-id="dd831-151">Many search options and settings for Full-Text Search have changed</span></span> 

   > [!IMPORTANT] 
   > <span data-ttu-id="dd831-152">После переноса tooAzure вашей базы данных база данных SQL, вы можете toooperate hello базы данных на текущем уровне совместимости (уровень 100 для базы данных AdventureWorks2008R2 hello) или на более высоком уровне.</span><span class="sxs-lookup"><span data-stu-id="dd831-152">After you migrate your database tooAzure SQL Database, you can choose toooperate hello database at its current compatibility level (level 100 for hello AdventureWorks2008R2 database) or at a higher level.</span></span> <span data-ttu-id="dd831-153">Дополнительные сведения о последствиях hello и параметры для работы на уровне совместимости базы данных см. в разделе [уровень совместимости инструкции ALTER DATABASE](https://docs.microsoft.com/sql/t-sql/statements/alter-database-transact-sql-compatibility-level).</span><span class="sxs-lookup"><span data-stu-id="dd831-153">For more information on hello implications and options for operating a database at a specific compatibility level, see [ALTER DATABASE Compatibility Level](https://docs.microsoft.com/sql/t-sql/statements/alter-database-transact-sql-compatibility-level).</span></span> <span data-ttu-id="dd831-154">См. также [ALTER DATABASE SCOPED CONFIGURATION](https://docs.microsoft.com/sql/t-sql/statements/alter-database-scoped-configuration-transact-sql) сведения о дополнительных параметрах уровня базы данных, связанных с toocompatibility уровней.</span><span class="sxs-lookup"><span data-stu-id="dd831-154">See also [ALTER DATABASE SCOPED CONFIGURATION](https://docs.microsoft.com/sql/t-sql/statements/alter-database-scoped-configuration-transact-sql) for information about additional database-level settings related toocompatibility levels.</span></span>
   >

10. <span data-ttu-id="dd831-155">При необходимости щелкните **Экспорт отчета** toosave hello отчет в формате JSON.</span><span class="sxs-lookup"><span data-stu-id="dd831-155">Optionally, click **Export report** toosave hello report as a JSON file.</span></span>
11. <span data-ttu-id="dd831-156">Закрыть hello помощник по миграции данных.</span><span class="sxs-lookup"><span data-stu-id="dd831-156">Close hello Data Migration Assistant.</span></span>

## <a name="export-toobacpac-file"></a><span data-ttu-id="dd831-157">Файл экспорта tooBACPAC</span><span class="sxs-lookup"><span data-stu-id="dd831-157">Export tooBACPAC file</span></span> 

<span data-ttu-id="dd831-158">BACPAC-файл является ZIP-файл с расширением BACPAC, содержащий hello метаданных и данных из базы данных SQL Server.</span><span class="sxs-lookup"><span data-stu-id="dd831-158">A BACPAC file is a ZIP file with an extension of BACPAC containing hello metadata and data from a SQL Server database.</span></span> <span data-ttu-id="dd831-159">BACPAC-файл могут храниться в хранилище BLOB-объектов Azure или в локальное хранилище для архивирования или для миграции - например, из SQL Server tooAzure базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="dd831-159">A BACPAC file can be stored in Azure blob storage or in local storage for archiving or for migration - such as from SQL Server tooAzure SQL Database.</span></span> <span data-ttu-id="dd831-160">Для согласованного toobe экспорта необходимо убедиться, что нет записи во время экспорта приветствия интенсивна деятельность.</span><span class="sxs-lookup"><span data-stu-id="dd831-160">For an export toobe transactionally consistent, you must ensure either that no write activity is occurring during hello export.</span></span>

<span data-ttu-id="dd831-161">Выполните эти шаги toouse hello SQLPackage программы командной строки tooexport hello AdventureWorks2008R2 toolocal режим хранения базы данных.</span><span class="sxs-lookup"><span data-stu-id="dd831-161">Follow these steps toouse hello SQLPackage command-line utility tooexport hello AdventureWorks2008R2 database toolocal storage.</span></span>

1. <span data-ttu-id="dd831-162">Откройте командную строку Windows и измените папку tooa каталог, в котором имеется hello **130** версии SQLPackage – например, **\Microsoft SQL Server\130\DAC\bin C:\Program Files (x86)**.</span><span class="sxs-lookup"><span data-stu-id="dd831-162">Open a Windows command prompt and change your directory tooa folder in which you have hello **130** version of SQLPackage - such as **C:\Program Files (x86)\Microsoft SQL Server\130\DAC\bin**.</span></span>

2. <span data-ttu-id="dd831-163">Выполните следующую команду SQLPackage на hello tooexport командную строку hello hello **AdventureWorks2008R2** из базы данных **localhost** слишком**AdventureWorks2008R2.bacpac**.</span><span class="sxs-lookup"><span data-stu-id="dd831-163">Execute hello following SQLPackage command at hello command prompt tooexport hello **AdventureWorks2008R2** database from **localhost** too**AdventureWorks2008R2.bacpac**.</span></span> <span data-ttu-id="dd831-164">Измените эти значения как соответствующие tooyour среды.</span><span class="sxs-lookup"><span data-stu-id="dd831-164">Change any of these values as appropriate tooyour environment.</span></span>

    ```SQLPackage
    sqlpackage.exe /Action:Export /ssn:localhost /sdn:AdventureWorks2008R2 /tf:AdventureWorks2008R2.bacpac
    ```

    ![Экспорт SqlPackage](./media/sql-database-migrate-your-sql-server-database/sqlpackage-export.png)

<span data-ttu-id="dd831-166">После завершения выполнения hello BACPAC-файл, созданный hello хранится в каталоге hello, где находится исполняемый файл sqlpackage hello.</span><span class="sxs-lookup"><span data-stu-id="dd831-166">Once hello execution is complete hello generated BACPAC file is stored in hello directory where hello sqlpackage executable is located.</span></span> <span data-ttu-id="dd831-167">В этом примере это C:\Program Files (x86)\Microsoft SQL Server\130\DAC\bin.</span><span class="sxs-lookup"><span data-stu-id="dd831-167">In this example C:\Program Files (x86)\Microsoft SQL Server\130\DAC\bin.</span></span> 

## <a name="log-in-toohello-azure-portal"></a><span data-ttu-id="dd831-168">Войдите в toohello портал Azure</span><span class="sxs-lookup"><span data-stu-id="dd831-168">Log in toohello Azure portal</span></span>

<span data-ttu-id="dd831-169">Войдите в toohello [портал Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="dd831-169">Log in toohello [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="dd831-170">Вход в систему с компьютера hello, с которого выполняется запуск программы командной строки SQLPackage hello облегчает создание hello hello правила брандмауэра на шаге 5.</span><span class="sxs-lookup"><span data-stu-id="dd831-170">Logging on from hello computer from which you are running hello SQLPackage command-line utility eases hello creation of hello firewall rule in step 5.</span></span>

## <a name="create-a-sql-server-logical-server"></a><span data-ttu-id="dd831-171">Создание логического сервера SQL Server</span><span class="sxs-lookup"><span data-stu-id="dd831-171">Create a SQL server logical server</span></span>

<span data-ttu-id="dd831-172">[Логический сервер SQL Server](sql-database-features.md) выступает в качестве центральной точки администрирования нескольких баз данных.</span><span class="sxs-lookup"><span data-stu-id="dd831-172">A [SQL server logical server](sql-database-features.md) acts as a central administrative point for multiple databases.</span></span> <span data-ttu-id="dd831-173">Выполните следующие действия toocreate SQL server логический сервер toocontain hello миграции базы данных Adventure Works OLTP SQL Server.</span><span class="sxs-lookup"><span data-stu-id="dd831-173">Follow these steps toocreate a SQL server logical server toocontain hello migrated Adventure Works OLTP SQL Server database.</span></span> 

1. <span data-ttu-id="dd831-174">Нажмите кнопку hello **New** кнопка найдена в верхнем левом углу hello hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="dd831-174">Click hello **New** button found on hello upper left-hand corner of hello Azure portal.</span></span>

2. <span data-ttu-id="dd831-175">Тип **sql server** в окне поиска hello на hello **New** и выберите **базы данных SQL (логический сервер)** из hello отфильтрованном списке.</span><span class="sxs-lookup"><span data-stu-id="dd831-175">Type **sql server** in hello search window on hello **New** page, and select **SQL database (logical server)** from hello filtered list.</span></span>

    ![выбор логического сервера](./media/sql-database-migrate-your-sql-server-database/logical-server.png)

3. <span data-ttu-id="dd831-177">На hello **все** щелкните **SQL server (логический сервер)** и нажмите кнопку **создать** на hello **SQL Server (логический сервер)** страницы .</span><span class="sxs-lookup"><span data-stu-id="dd831-177">On hello **Everything** page, click **SQL server (logical server)** and then click **Create** on hello **SQL Server (logical server)** page.</span></span>

    ![Создание логического сервера](./media/sql-database-migrate-your-sql-server-database/logical-server-create.png)

4. <span data-ttu-id="dd831-179">Заполнение hello SQL server (логический сервер) формы с hello следующую информацию, как показано на hello предшествующий образа:</span><span class="sxs-lookup"><span data-stu-id="dd831-179">Fill out hello SQL server (logical server) form with hello following information, as shown on hello preceding image:</span></span>     

   | <span data-ttu-id="dd831-180">Настройка</span><span class="sxs-lookup"><span data-stu-id="dd831-180">Setting</span></span>       | <span data-ttu-id="dd831-181">Рекомендуемое значение</span><span class="sxs-lookup"><span data-stu-id="dd831-181">Suggested value</span></span> | <span data-ttu-id="dd831-182">Описание</span><span class="sxs-lookup"><span data-stu-id="dd831-182">Description</span></span> | 
   | ------------ | ------------------ | ------------------------------------------------- | 
   | <span data-ttu-id="dd831-183">**Server name** (Имя сервера)</span><span class="sxs-lookup"><span data-stu-id="dd831-183">**Server name**</span></span> | <span data-ttu-id="dd831-184">Введите любое глобально уникальное имя</span><span class="sxs-lookup"><span data-stu-id="dd831-184">Enter any globally unique name</span></span> | <span data-ttu-id="dd831-185">Допустимые имена серверов см. в статье о [правилах и ограничениях именования](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions).</span><span class="sxs-lookup"><span data-stu-id="dd831-185">For valid server names, see [Naming rules and restrictions](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions).</span></span> | 
   | <span data-ttu-id="dd831-186">**Имя для входа администратора сервера**</span><span class="sxs-lookup"><span data-stu-id="dd831-186">**Server admin login**</span></span> | <span data-ttu-id="dd831-187">Введите любое допустимое имя</span><span class="sxs-lookup"><span data-stu-id="dd831-187">Enter any valid name</span></span> | <span data-ttu-id="dd831-188">Допустимые имена входа см. в статье об [идентификаторах базы данных](https://docs.microsoft.com/sql/relational-databases/databases/database-identifiers).</span><span class="sxs-lookup"><span data-stu-id="dd831-188">For valid login names, see [Database Identifiers](https://docs.microsoft.com/sql/relational-databases/databases/database-identifiers).</span></span> |
   | <span data-ttu-id="dd831-189">**Пароль**</span><span class="sxs-lookup"><span data-stu-id="dd831-189">**Password**</span></span> | <span data-ttu-id="dd831-190">Введите любой допустимый пароль</span><span class="sxs-lookup"><span data-stu-id="dd831-190">Enter any valid password</span></span> | <span data-ttu-id="dd831-191">Пароль должен иметь по крайней мере 8 символов и должен содержать символы трех из следующих категорий hello: буквы в верхнем регистре, буквы в нижнем регистре, цифры и не буквенно-цифровых символов.</span><span class="sxs-lookup"><span data-stu-id="dd831-191">Your password must have at least 8 characters and must contain characters from three of hello following categories: upper case characters, lower case characters, numbers, and non-alphanumeric characters.</span></span> |
   | <span data-ttu-id="dd831-192">**Подписка**</span><span class="sxs-lookup"><span data-stu-id="dd831-192">**Subscription**</span></span> | <span data-ttu-id="dd831-193">Выбор подписки</span><span class="sxs-lookup"><span data-stu-id="dd831-193">Select a subscription</span></span> | <span data-ttu-id="dd831-194">Дополнительные сведения о подписках см. [здесь](https://account.windowsazure.com/Subscriptions).</span><span class="sxs-lookup"><span data-stu-id="dd831-194">For details about your subscriptions, see [Subscriptions](https://account.windowsazure.com/Subscriptions).</span></span> |
   | <span data-ttu-id="dd831-195">**Группа ресурсов**</span><span class="sxs-lookup"><span data-stu-id="dd831-195">**Resource group**</span></span> | <span data-ttu-id="dd831-196">Выберите имеющуюся группу ресурсов или создайте ее, например **myResourceGroup**</span><span class="sxs-lookup"><span data-stu-id="dd831-196">Choose an existing resource group or create a new group, such as **myResourceGroup**</span></span> |  <span data-ttu-id="dd831-197">Допустимые имена групп ресурсов см. в статье о [правилах и ограничениях именования](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions).</span><span class="sxs-lookup"><span data-stu-id="dd831-197">For valid resource group names, see [Naming rules and restrictions](https://docs.microsoft.com/azure/architecture/best-practices/naming-conventions).</span></span> |
   | <span data-ttu-id="dd831-198">**Расположение**</span><span class="sxs-lookup"><span data-stu-id="dd831-198">**Location**</span></span> | <span data-ttu-id="dd831-199">Введите любое действительное расположение для нового сервера hello</span><span class="sxs-lookup"><span data-stu-id="dd831-199">Enter any valid location for hello new server</span></span> | <span data-ttu-id="dd831-200">Дополнительные сведения о регионах Azure см. [здесь](https://azure.microsoft.com/regions/).</span><span class="sxs-lookup"><span data-stu-id="dd831-200">For information about regions, see [Azure Regions](https://azure.microsoft.com/regions/).</span></span> |

   ![Заполненная форма создания логического сервера](./media/sql-database-migrate-your-sql-server-database/logical-server-create-completed.png)

5. <span data-ttu-id="dd831-202">Нажмите кнопку **создать** tooprovision hello логического сервера.</span><span class="sxs-lookup"><span data-stu-id="dd831-202">Click **Create** tooprovision hello logical server.</span></span> <span data-ttu-id="dd831-203">Подготовка занимает несколько минут.</span><span class="sxs-lookup"><span data-stu-id="dd831-203">Provisioning takes a few minutes.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="dd831-204">Запомните имя сервера, имя для входа администратора сервера и пароль.</span><span class="sxs-lookup"><span data-stu-id="dd831-204">Remember your server name, server admin login name, and password.</span></span> <span data-ttu-id="dd831-205">Эти значения вам понадобятся позже (в рамках этого руководства).</span><span class="sxs-lookup"><span data-stu-id="dd831-205">You need these values later in this tutorial.</span></span>
>

## <a name="create-a-server-level-firewall-rule"></a><span data-ttu-id="dd831-206">создадим правило брандмауэра на уровне сервера;</span><span class="sxs-lookup"><span data-stu-id="dd831-206">Create a server-level firewall rule</span></span>

<span data-ttu-id="dd831-207">Создает Hello служба базы данных SQL [брандмауэра на уровне сервера hello](sql-database-firewall-configure.md) , предотвращает внешних приложений и средств подключения toohello сервера или любой базы данных на сервере hello правила брандмауэра не введен tooopen hello брандмауэр для конкретных IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="dd831-207">hello SQL Database service creates a [firewall at hello server-level](sql-database-firewall-configure.md) that prevents external applications and tools from connecting toohello server or any databases on hello server unless a firewall rule is created tooopen hello firewall for specific IP addresses.</span></span> <span data-ttu-id="dd831-208">Выполните эти шаги toocreate правило брандмауэра уровня сервера базы данных SQL для hello IP-адрес компьютера hello, с которого выполняется запуск программы командной строки SQLPackage hello.</span><span class="sxs-lookup"><span data-stu-id="dd831-208">Follow these steps toocreate a SQL Database server-level firewall rule for hello IP address of hello computer from which you are running hello SQLPackage command-line utility.</span></span> <span data-ttu-id="dd831-209">Это позволяет SQLPackage tooconnect toohello SQL serverDatabase логический сервер через брандмауэр базы данных SQL Azure hello.</span><span class="sxs-lookup"><span data-stu-id="dd831-209">This enables SQLPackage tooconnect toohello SQL serverDatabase logical server through hello Azure SQL Database firewall.</span></span> 

1. <span data-ttu-id="dd831-210">Нажмите кнопку **все ресурсы** hello левом меню и выберите новый сервер на hello **все ресурсы** страницы.</span><span class="sxs-lookup"><span data-stu-id="dd831-210">Click **All resources** from hello left-hand menu and click your new server on hello **All resources** page.</span></span> <span data-ttu-id="dd831-211">страница обзора Hello сервера открывает и предоставляет параметры для дальнейшей настройки.</span><span class="sxs-lookup"><span data-stu-id="dd831-211">hello overview page for your server opens and provides options for further configuration.</span></span>

     ![Общие сведения о логическом сервере](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="dd831-213">Нажмите кнопку **брандмауэра** в левом меню hello в **параметры** на страницу обзора hello.</span><span class="sxs-lookup"><span data-stu-id="dd831-213">Click **Firewall** in hello left-hand menu under **Settings** on hello overview page.</span></span> <span data-ttu-id="dd831-214">Hello **параметры брандмауэра** откроется страница приветствия базы данных SQL server.</span><span class="sxs-lookup"><span data-stu-id="dd831-214">hello **Firewall settings** page for hello SQL Database server opens.</span></span> 

3. <span data-ttu-id="dd831-215">Нажмите кнопку **добавить IP-адрес клиента** на hello инструментов tooadd hello IP-адрес компьютера hello используют в настоящее время и нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="dd831-215">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="dd831-216">Для текущего IP-адреса будет создано правило брандмауэра уровня сервера.</span><span class="sxs-lookup"><span data-stu-id="dd831-216">A server-level firewall rule is created for this IP address.</span></span>

     ![Настройка правила брандмауэра для сервера](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

4. <span data-ttu-id="dd831-218">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="dd831-218">Click **OK**.</span></span>

<span data-ttu-id="dd831-219">Теперь можно подключиться tooall баз данных на этом сервере, с помощью SQL Server Management Studio или другого средства по своему усмотрению с этого IP-адреса, с помощью учетной записи администратора сервера hello создали ранее.</span><span class="sxs-lookup"><span data-stu-id="dd831-219">You can now connect tooall databases on this server using SQL Server Management Studio or another tool of your choice from this IP address using hello server admin account created previously.</span></span>

> [!NOTE]
> <span data-ttu-id="dd831-220">База данных SQL обменивается данными через порт 1433.</span><span class="sxs-lookup"><span data-stu-id="dd831-220">SQL Database communicates over port 1433.</span></span> <span data-ttu-id="dd831-221">Если вы пытаетесь tooconnect из корпоративной сети, исходящий трафик через порт 1433 может оказаться невозможным брандмауэром вашей сети.</span><span class="sxs-lookup"><span data-stu-id="dd831-221">If you are trying tooconnect from within a corporate network, outbound traffic over port 1433 may not be allowed by your network's firewall.</span></span> <span data-ttu-id="dd831-222">В этом случае tooyour сервера базы данных SQL Azure не удается подключиться, если ИТ-отдел открывает порт 1433.</span><span class="sxs-lookup"><span data-stu-id="dd831-222">If so, you cannot connect tooyour Azure SQL Database server unless your IT department opens port 1433.</span></span>
>

## <a name="import-a-bacpac-file-tooazure-sql-database"></a><span data-ttu-id="dd831-223">Импорт BACPAC файла tooAzure базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="dd831-223">Import a BACPAC file tooAzure SQL Database</span></span> 

<span data-ttu-id="dd831-224">последние версии Hello hello SQLPackage программа командной строки обеспечивает поддержку создания базы данных Azure SQL по указанному индексу [службы уровня и уровня производительности](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="dd831-224">hello newest versions of hello SQLPackage command-line utility provide support for creating an Azure SQL database at a specified [service tier and performance level](sql-database-service-tiers.md).</span></span> <span data-ttu-id="dd831-225">Для наилучшей производительности во время импорта выберите уровень производительности и уровня высокого уровня обслуживания и затем масштабирование после импорта, если уровень производительности и уровня обслуживания hello больше, чем требуется немедленно.</span><span class="sxs-lookup"><span data-stu-id="dd831-225">For best performance during import, select a high service tier and performance level and then scale down after import if hello service tier and performance level is higher than you need immediately.</span></span>

<span data-ttu-id="dd831-226">Выполните эти шаги использования hello SQLPackage программы командной строки tooimport hello AdventureWorks2008R2 базы данных tooAzure базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="dd831-226">Follow these steps use hello SQLPackage command-line utility tooimport hello AdventureWorks2008R2 database tooAzure SQL Database.</span></span> <span data-ttu-id="dd831-227">При использовании SQL Server Management Studio для выполнения этой задачи SQLPackage — hello предпочтительный метод для большинства рабочих сред для максимальной гибкостью и оптимальной производительности.</span><span class="sxs-lookup"><span data-stu-id="dd831-227">While you can use SQL Server Management Studio for this task, SQLPackage is hello preferred method for most production environments for maximum flexibility and best performance.</span></span> <span data-ttu-id="dd831-228">В разделе [миграции с SQL Server tooAzure базы данных SQL с помощью файлов BACPAC](https://blogs.msdn.microsoft.com/sqlcat/2016/10/20/migrating-from-sql-server-to-azure-sql-database-using-bacpac-files/).</span><span class="sxs-lookup"><span data-stu-id="dd831-228">See [Migrating from SQL Server tooAzure SQL Database using BACPAC Files](https://blogs.msdn.microsoft.com/sqlcat/2016/10/20/migrating-from-sql-server-to-azure-sql-database-using-bacpac-files/).</span></span>

- <span data-ttu-id="dd831-229">Выполните следующую команду SQLPackage на hello tooimport командную строку hello hello **AdventureWorks2008R2** базу данных из локального хранилища toohello SQL server логического сервера, вы ранее созданный tooa новую базу данных, службы уровень **Premium**и цель обслуживания **P6**.</span><span class="sxs-lookup"><span data-stu-id="dd831-229">Execute hello following SQLPackage command at hello command prompt tooimport hello **AdventureWorks2008R2** database from local storage toohello SQL server logical server that you previously created tooa new database, a service tier of **Premium**, and a Service Objective of **P6**.</span></span> <span data-ttu-id="dd831-230">Замените значения hello в угловые скобки с соответствующими значениями для логического сервера SQL server и укажите имя для новой базы данных hello (также заменить hello угловые скобки).</span><span class="sxs-lookup"><span data-stu-id="dd831-230">Replace hello values in angle brackets with appropriate values for your SQL server logical server and specify a name for hello new database (also replace hello angle brackets).</span></span> <span data-ttu-id="dd831-231">Можно также toochange значения hello выпуск базы данных и службы objectgive как соответствующие tooyour среды.</span><span class="sxs-lookup"><span data-stu-id="dd831-231">You can also choose toochange hello values for database edition and service objectgive as appropriate tooyour environment.</span></span> <span data-ttu-id="dd831-232">Для целей этого учебника hello hello перенесенной базы данных называется **myMigratedDatabase**.</span><span class="sxs-lookup"><span data-stu-id="dd831-232">For hello purpose of this tutorial, hello migrated database is called **myMigratedDatabase**.</span></span>

    ```
    SqlPackage.exe /a:import /tcs:"Data Source=<your_server_name>.database.windows.net;Initial Catalog=<your_new_database_name>;User Id=<change_to_your_admin_user_account>;Password=<change_to_your_password>" /sf:AdventureWorks2008R2.bacpac /p:DatabaseEdition=Premium /p:DatabaseServiceObjective=P6
    ```

   ![Импорт с помощью SqlPackage](./media/sql-database-migrate-your-sql-server-database/sqlpackage-import.png)

> [!IMPORTANT]
> <span data-ttu-id="dd831-234">Логический сервер SQL Server прослушивает порт 1433.</span><span class="sxs-lookup"><span data-stu-id="dd831-234">A SQL server logical server listens on port 1433.</span></span> <span data-ttu-id="dd831-235">При попытке tooconnect tooa SQL server логического сервера внутри корпоративного брандмауэра, этот порт должен быть открыт в hello корпоративного брандмауэра для подключения к toosuccessfully вы.</span><span class="sxs-lookup"><span data-stu-id="dd831-235">If you are attempting tooconnect tooa SQL server logical server from within a corporate firewall, this port must be open in hello corporate firewall for you toosuccessfully connect.</span></span>
>

## <a name="connect-using-sql-server-management-studio-ssms"></a><span data-ttu-id="dd831-236">Подключение с помощью SQL Server Management Studio</span><span class="sxs-lookup"><span data-stu-id="dd831-236">Connect using SQL Server Management Studio (SSMS)</span></span>

<span data-ttu-id="dd831-237">Используйте SQL Server Management Studio tooestablish сервером базы данных SQL Azure tooyour соединения и только что перенесенной базы данных, называемой **myMigratedDatabase** в этом учебнике.</span><span class="sxs-lookup"><span data-stu-id="dd831-237">Use SQL Server Management Studio tooestablish a connection tooyour Azure SQL Database server and newly migrated database, called **myMigratedDatabase** in this tutorial.</span></span> <span data-ttu-id="dd831-238">При запуске SQL Server Management Studio на другом компьютере, из которой запущен SQLPackage создайте правило брандмауэра для данного компьютера, используя действия hello в предыдущей процедуре hello.</span><span class="sxs-lookup"><span data-stu-id="dd831-238">If you are running SQL Server Management Studio on a different computer from which you ran SQLPackage, create a firewall rule for this computer using hello steps in hello previous procedure.</span></span>

1. <span data-ttu-id="dd831-239">Откройте среду SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="dd831-239">Open SQL Server Management Studio.</span></span>

2. <span data-ttu-id="dd831-240">В hello **подключения tooServer** диалогового окна введите hello следующую информацию:</span><span class="sxs-lookup"><span data-stu-id="dd831-240">In hello **Connect tooServer** dialog box, enter hello following information:</span></span>
   - <span data-ttu-id="dd831-241">**Тип сервера** — укажите ядро СУБД.</span><span class="sxs-lookup"><span data-stu-id="dd831-241">**Server type**: Specify Database engine</span></span>
   - <span data-ttu-id="dd831-242">**Имя сервера.** Введите полное имя сервера, например **mynewserver20170403.database.windows.net**.</span><span class="sxs-lookup"><span data-stu-id="dd831-242">**Server name**: Enter your fully qualified server name, such as **mynewserver20170403.database.windows.net**</span></span>
   - <span data-ttu-id="dd831-243">**Проверка подлинности** — укажите проверку подлинности SQL Server.</span><span class="sxs-lookup"><span data-stu-id="dd831-243">**Authentication**: Specify SQL Server Authentication</span></span>
   - <span data-ttu-id="dd831-244">**Имя входа** — введите учетную запись администратора сервера.</span><span class="sxs-lookup"><span data-stu-id="dd831-244">**Login**: Enter your server admin account</span></span>
   - <span data-ttu-id="dd831-245">**Пароль**: hello пароль для учетной записи администратора сервера</span><span class="sxs-lookup"><span data-stu-id="dd831-245">**Password**: Enter hello password for your server admin account</span></span>
 
    ![Подключение с помощью SSMS](./media/sql-database-migrate-your-sql-server-database/connect-ssms.png)

3. <span data-ttu-id="dd831-247">Щелкните **Подключить**.</span><span class="sxs-lookup"><span data-stu-id="dd831-247">Click **Connect**.</span></span> <span data-ttu-id="dd831-248">Откроется окно обозревателя объектов Hello.</span><span class="sxs-lookup"><span data-stu-id="dd831-248">hello Object Explorer window opens.</span></span> 

4. <span data-ttu-id="dd831-249">В обозревателе объектов разверните **баз данных** и разверните **myMigratedDatabase** tooview объектов hello в образце hello базы данных.</span><span class="sxs-lookup"><span data-stu-id="dd831-249">In Object Explorer, expand **Databases** and then expand **myMigratedDatabase** tooview hello objects in hello sample database.</span></span>

## <a name="change-database-properties"></a><span data-ttu-id="dd831-250">Изменение свойств базы данных</span><span class="sxs-lookup"><span data-stu-id="dd831-250">Change database properties</span></span>

<span data-ttu-id="dd831-251">Можно изменить уровень службы hello, уровень производительности и уровень совместимости в среде SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="dd831-251">You can change hello service tier, performance level, and compatibility level using SQL Server Management Studio.</span></span> <span data-ttu-id="dd831-252">Во время фазы импорта hello рекомендуется импортировать tooa выше производительности уровня базы данных для повышения производительности, но масштабировать после завершения импорта hello toosave money, пока не используйте готов tooactively hello импортируемой базы данных.</span><span class="sxs-lookup"><span data-stu-id="dd831-252">During hello import phase, we recommend that you import tooa higher performance tier database for best performance, but that you scale down after hello import completes toosave money until you are ready tooactively use hello imported database.</span></span> <span data-ttu-id="dd831-253">Изменение уровня совместимости hello может привести к повышению производительности и возможности доступа к toohello новейшие hello службы базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="dd831-253">Changing hello compatibility level may yield better performance and access toohello newest capabilities of hello Azure SQL Database service.</span></span> <span data-ttu-id="dd831-254">При переносе старую базу данных, ее уровень совместимости базы данных поддерживается на уровне наименьшее hello поддерживается, совместимый с базой данных hello импорта.</span><span class="sxs-lookup"><span data-stu-id="dd831-254">When you migrate an older database, its database compatibility level is maintained at hello lowest supported level that is compatible with hello database being imported.</span></span> <span data-ttu-id="dd831-255">Дополнительные сведения см. в статье [Повышение производительности запросов с использованием уровня совместимости 130 в базе данных SQL Azure](sql-database-compatibility-level-query-performance-130.md).</span><span class="sxs-lookup"><span data-stu-id="dd831-255">For more information, see [Improved query performance with compatibility Level 130 in Azure SQL Database](sql-database-compatibility-level-query-performance-130.md).</span></span>

1. <span data-ttu-id="dd831-256">В обозревателе объектов щелкните **myMigratedDatabase** правой кнопкой мыши и выберите **Создать запрос**.</span><span class="sxs-lookup"><span data-stu-id="dd831-256">In Object Explorer, right-click **myMigratedDatabase** and click **New Query**.</span></span> <span data-ttu-id="dd831-257">Откроется окно запроса tooyour подключенной базы данных.</span><span class="sxs-lookup"><span data-stu-id="dd831-257">A query window opens connected tooyour database.</span></span>

2. <span data-ttu-id="dd831-258">Выполните следующий уровень обслуживания hello tooset команда слишком hello**Стандартная** и hello уровень производительности, слишком**S1**.</span><span class="sxs-lookup"><span data-stu-id="dd831-258">Execute hello following command tooset hello service tier too**Standard** and hello performance level too**S1**.</span></span>

    ```
    ALTER DATABASE myMigratedDatabase 
    MODIFY 
        (
        EDITION = 'Standard'
        , MAXSIZE = 250 GB
        , SERVICE_OBJECTIVE = 'S1'
    );
    ```

    ![Изменение уровня служб](./media/sql-database-migrate-your-sql-server-database/service-tier.png)

3. <span data-ttu-id="dd831-260">Выполните следующий уровень совместимости базы данных hello toochange команда слишком hello**130**.</span><span class="sxs-lookup"><span data-stu-id="dd831-260">Execute hello following command toochange hello database compatibility level too**130**.</span></span>

    ```
    ALTER DATABASE myMigratedDatabase  
    SET COMPATIBILITY_LEVEL = 130;
    ```

   ![Изменение уровня совместимости](./media/sql-database-migrate-your-sql-server-database/compat-level.png)

## <a name="next-steps"></a><span data-ttu-id="dd831-262">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="dd831-262">Next steps</span></span> 
<span data-ttu-id="dd831-263">В этом руководстве вы подготовили, экспортировали и импортировали базу данных.</span><span class="sxs-lookup"><span data-stu-id="dd831-263">In this tutorial you prepared, exported and imported your database.</span></span> <span data-ttu-id="dd831-264">Вы научились выполнять следующие задачи:</span><span class="sxs-lookup"><span data-stu-id="dd831-264">You learned to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="dd831-265">Подготовка базы данных в SQL Server для миграции tooAzure базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="dd831-265">Prepare a database in a SQL Server for migration tooAzure SQL Database</span></span>
> * <span data-ttu-id="dd831-266">Экспорт файла BACPAC tooa hello базы данных</span><span class="sxs-lookup"><span data-stu-id="dd831-266">Export hello database tooa BACPAC file</span></span>
> * <span data-ttu-id="dd831-267">Импорт файла BACPAC hello в базе данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="dd831-267">Import hello BACPAC file into an Azure SQL Database</span></span>

<span data-ttu-id="dd831-268">Как переместить следующий учебник toolearn toohello toosecure базы данных.</span><span class="sxs-lookup"><span data-stu-id="dd831-268">Advance toohello next tutorial toolearn how toosecure your database.</span></span>

> [!div class="nextstepaction"]
> <span data-ttu-id="dd831-269">[Защита базы данных SQL Azure](sql-database-security-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="dd831-269">[Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>


