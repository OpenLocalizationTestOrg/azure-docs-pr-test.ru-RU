---
title: "aaaRestore базе данных Azure SQL из резервной копии | Документы Microsoft"
description: "Дополнительные сведения о на момент восстановления, позволяющий tooroll назад точку предыдущего tooa базы данных SQL Azure в времени (вверх too35 дней)."
services: sql-database
documentationcenter: 
author: CarlRabeler
manager: jhubbard
editor: monicar
ms.assetid: fd1d334d-a035-4a55-9446-d1cf750d9cf7
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/15/2017
ms.author: carlrab
ms.openlocfilehash: 84ecc306a2072445c10dbf1e9d7cf3d1b43860cf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="recover-an-azure-sql-database-using-automated-database-backups"></a>Восстановление базы данных Azure SQL с помощью создаваемых автоматически резервных копий
База данных SQL предоставляет такие варианты восстановления базы данных с помощью [создаваемых автоматически резервных копий баз данных](sql-database-automated-backups.md) и [резервных копий в хранилище с включенной функцией долгосрочного хранения](sql-database-long-term-retention.md) Вы можете восстановить из резервной копии базы данных следующее:

* Новую базу данных на hello восстановлена на одном логическом сервере tooa указания момента времени в течение срока хранения hello. 
* Объект базы данных на hello же логическом сервере восстановлены toohello времени удаления для удаленной базы данных.
* Новую базу данных на любой логический сервер в любом регионе восстановить точки toohello hello последних ежедневных резервных копий в хранилище географической репликации больших двоичных объектов (RA-GRS).

> [!IMPORTANT]
> При восстановлении существующую базу данных невозможно перезаписать.
>

Можно также использовать [автоматическое резервное копирование базы данных](sql-database-automated-backups.md) toocreate [копирование базы данных](sql-database-copy.md) на любой логический сервер в любой области. 

## <a name="recovery-time"></a>Время восстановления
Здравствуйте, toorestore время восстановления, использование автоматических резервных копий базы данных влияют несколько факторов: 

* размер Hello hello базы данных
* уровень производительности Hello hello базы данных
* Hello число участвующих журналы транзакций
* точка восстановления toohello toorecover воспроизведены Hello объем действий, который должен toobe
* пропускная способность сети Hello, если восстановить hello является tooa другой регион 
* число Hello восстановления одновременных запросов, которые обрабатываются в целевой области hello. 
  
  Для очень больших или активной базы данных восстановления hello может занять несколько часов. В случае длительного простоя в регионе возможно появление большого количества запросов на геовосстановление, обрабатываемых другими регионами. При наличии большого числа запросов, для баз данных в этой области может увеличить время восстановления hello. В большинстве случаев на восстановление базы данных требуется до 12 часов.
  
Восстановление массового toodo не встроенных функциональных возможностей не существует. Hello [базы данных SQL Azure: полного восстановления сервера](https://gallery.technet.microsoft.com/Azure-SQL-Database-Full-82941666) сценарий — пример одного из способов выполнения этой задачи.

> [!IMPORTANT]
> с помощью toorecover автоматическое резервное копирование, необходимо быть членом роли участника SQL Server hello в подписке hello или быть владельцем подписки hello. Можно восстановить с помощью hello портал Azure, PowerShell или API-интерфейса REST hello. Использовать для этого Transact-SQL невозможно. 
> 

## <a name="point-in-time-restore"></a>Восстановление до точки во времени

Можно восстановить существующую базу данных tooan ранее на определенный момент времени как новую базу данных на hello же логическом сервере с помощью портала Azure "hello" [PowerShell](https://docs.microsoft.com/en-us/powershell/module/azurerm.sql/restore-azurermsqldatabase), или hello [API-интерфейса REST](https://msdn.microsoft.com/library/azure/mt163685.aspx). 

> [!TIP]
> Пример сценария PowerShell, отображаются как tooperform на момент восстановления базы данных, см. статью [восстановление базы данных SQL, с помощью PowerShell](scripts/sql-database-restore-database-powershell.md).
>

Hello базы данных может быть восстановленной tooany уровень обслуживания или производительности уровень и как одной базы данных или в пуле эластичных БД. Убедитесь, имеются достаточные ресурсы на логическом сервере hello или в toowhich эластичного пула hello hello база данных восстанавливается. После завершения hello восстановлена база данных не является обычным, полностью доступны, в Интернете. База данных восстановлена Hello оплачивается по обычным тарифам в соответствии с его уровнем производительности и уровня службы. Вы не взимается до завершения hello восстановление базы данных.

Обычно восстанавливается tooan базы данных более ранней точки для целей восстановления. При. таким образом можно считать hello восстановления базы данных для замены hello исходной базы данных или использовать его tooretrieve данные из, а затем обновите hello исходной базы данных. 

* ***Замена базы данных:*** Если hello восстановлена база данных предназначена для замены hello исходной базы данных, необходимо проверить уровень производительности hello и/или уровня обслуживания подходящие и масштабировать hello базы данных, при необходимости. Можно переименовать hello исходную базу данных и присвоить hello восстановления базы данных hello исходное имя с помощью команды ALTER DATABASE hello в T-SQL. 
* ***Восстановление данных:*** Если планируется tooretrieve данные из toorecover hello восстановить базу данных после ошибки пользователя или приложения, нужно toowrite и выполнения данные tooextract сценарии восстановления необходимых данных hello из toohello hello восстановления базы данных Исходная база данных. Несмотря на то, что операция восстановления hello может занять toocomplete много времени, hello восстановление базы данных видны в списке hello базы данных на протяжении всего процесса восстановления hello. При удалении hello базы данных во время восстановления hello, операция восстановления hello отменяется, а не взиматься плата за hello базы данных, которая не была завершена hello восстановления. 

### <a name="azure-portal"></a>Портал Azure

Здравствуйте toorecover tooa моменту времени с помощью портала Azure, Привет открыть страницу для базы данных и нажмите кнопку **восстановить** на панели инструментов hello.

![point-in-time-restore](./media/sql-database-recovery-using-backups/point-in-time-recovery.png)

## <a name="deleted-database-restore"></a>Восстановление удаленной базы данных
Вы можете восстановить удаленные toohello момента удаления базы данных для удаленной базы данных на hello же логическом сервере с помощью hello портал Azure [PowerShell](https://docs.microsoft.com/en-us/powershell/module/azurerm.sql/restore-azurermsqldatabase), или hello [REST (createMode = восстановить)](https://msdn.microsoft.com/library/azure/mt163685.aspx). 

> [!TIP]
> Пример, в PowerShell скрипт отображение toorestore удаленной базы данных. в статье [восстановление базы данных SQL, с помощью PowerShell](scripts/sql-database-restore-database-powershell.md).
>

> [!IMPORTANT]
> При удалении экземпляра сервера базы данных SQL Azure все базы данных, находившиеся на нем, также будут удалены без возможности восстановления. В настоящее время восстановление удаленного сервера не поддерживается.
> 

### <a name="azure-portal"></a>Портал Azure

toorecover удаленной базы данных во время его [срок хранения](sql-database-service-tiers.md) с помощью hello портал Azure, откройте hello страницы для сервера и области операций hello щелкните **удаленных баз данных**.

![deleted-database-restore-1](./media/sql-database-recovery-using-backups/deleted-database-restore-1.png)


![deleted-database-restore-2](./media/sql-database-recovery-using-backups/deleted-database-restore-2.png)

## <a name="geo-restore"></a>Геовосстановление
Можно восстановить базу данных SQL на любом сервере в любом регионе Azure из hello самые последние георепликацией полные и разностные резервные копии. Географическое восстановление в качестве источника используется геоизбыточной резервной копии и может быть используется toorecover базы данных, даже если из-за сбоя tooan недоступна база данных hello или центра обработки данных. 

Геовосстановление является режим восстановления по умолчанию hello, когда база данных недоступна из-за инцидента в регионе hello, где размещаются базы данных hello. Если крупномасштабного инцидента в области, приводит к недоступности базы данных приложения, можно восстановить базу данных с сервера tooa hello георепликацией резервных копий в какой другой области. Задержка между при создается разностная резервная копия и когда это георепликацией tooan Azure BLOB-объект в другом регионе. Эта задержка может длиться вверх tooan час, таким образом, в случае аварии может существовать вверх потери данных tooone час. Следующая иллюстрация Hello показано восстановление базы данных hello hello последней доступной резервной копии в другом регионе.

![Геовосстановление](./media/sql-database-geo-restore/geo-restore-2.png)

> [!TIP]
> Пример, в PowerShell скрипт отображение tooperform географическое восстановление. в статье [восстановление базы данных SQL, с помощью PowerShell](scripts/sql-database-restore-database-powershell.md).
> 

Восстановление до точки во времени для базы данных-получателя геореплицируемых данных в настоящее время не поддерживается. Восстановление до точки во времени может выполняться только для базы данных-источника. Подробные сведения об использовании toorecover географическое восстановление после сбоя см. в разделе [восстановление после сбоя](sql-database-disaster-recovery.md).

> [!IMPORTANT]
> Восстановление из резервных копий — hello основным hello аварийного восстановления решений, доступных в базе данных SQL с hello длинного RPO и время оценки восстановления (ERT). Для решений, использующих базы данных уровня "Базовый", геовосстановление часто предусматривает решение аварийного восстановления с ERT, равного 12 часам. В решениях, использующих базы данных уровня "Стандартный" или "Премиум", для которых требуется минимизировать интервалы восстановления, мы рекомендуем использовать [активную георепликацию](sql-database-geo-replication-overview.md). Активная георепликация предоставляет намного ниже RPO и ERT, как он требуется только инициировать дополнительного tooa постоянно реплицировать отработки отказа. Дополнительные сведения о непрерывности бизнес-процессов см. в статье [Обзор обеспечения непрерывности бизнес-процессов с помощью базы данных SQL Azure](sql-database-business-continuity.md).
> 

### <a name="azure-portal"></a>Портал Azure

toogeo восстановления базы данных во время его [срок хранения](sql-database-service-tiers.md) с hello портал Azure, откройте страницу приветствия баз данных SQL и нажмите кнопку **добавить**. В hello **выберите источник** текстовое поле, выберите **резервного копирования**. Укажите из какой tooperform hello восстановления резервной копии hello в регионе hello и на сервере hello по своему усмотрению. 

## <a name="programmatically-performing-recovery-using-automated-backups"></a>Программное восстановление с помощью создаваемых автоматически резервных копий
Как отмечалось ранее Кроме toohello портал Azure, восстановление базы данных может осуществляться программными средствами с помощью Azure PowerShell или hello REST API. Hello следующие таблицы описывают hello набор доступных команд.

### <a name="powershell"></a>PowerShell
| Командлет | Описание |
| --- | --- |
| [Get-AzureRmSqlDatabase](/powershell/module/azurerm.sql/get-azurermsqldatabase) |Получает одну или несколько баз данных. |
| [Get-AzureRMSqlDeletedDatabaseBackup](/powershell/module/azurerm.sql/get-azurermsqldeleteddatabasebackup) | Получает удаленную базу данных, которую можно восстановить. |
| [Get-AzureRmSqlDatabaseGeoBackup](/powershell/module/azurerm.sql/get-azurermsqldatabasegeobackup) |Получает геоизбыточную резервную копию базы данных. |
| [Restore-AzureRmSqlDatabase](/powershell/module/azurerm.sql/restore-azurermsqldatabase) |Восстанавливает базу данных SQL. |
|  | |

### <a name="rest-api"></a>REST API
| API | Описание |
| --- | --- |
| [REST (createMode=Recovery)](https://msdn.microsoft.com/library/azure/mt163685.aspx) |Восстанавливает базу данных. |
| [Получение, создание или обновление состояния базы данных](https://msdn.microsoft.com/library/azure/mt643934.aspx) |Возвращает состояние hello во время операции восстановления |
|  | |

## <a name="summary"></a>Сводка
Создаваемые автоматически резервные копии позволяют защитить базы данных от ошибок пользователей и приложений, случайного удаления базы данных и длительных простоев. Эта встроенная возможность доступна для всех уровней служб и уровней производительности. 

## <a name="next-steps"></a>Дальнейшие действия
* Сведения об обеспечении непрерывности бизнес-процессов и возможные сценарии описаны в [обзоре непрерывности бизнес-процессов](sql-database-business-continuity.md)
* toolearn о резервных копиях автоматических базы данных SQL Azure, в разделе [базы данных SQL автоматическое резервное копирование](sql-database-automated-backups.md)
* toolearn о долгосрочного хранения резервной копии, в разделе [долгосрочного хранения резервной копии](sql-database-long-term-retention.md)
* tooconfigure, управления и восстановите из долгосрочную защиту автоматическое резервное копирование в хранилище служб восстановления Azure, с помощью hello Azure портала, см. в разделе [Настройка и использование долгосрочное резервное копирование хранения](sql-database-long-term-backup-retention-configure.md). 
* toolearn о быстрее параметры восстановления, в разделе [активной георепликации](sql-database-geo-replication-overview.md)  
