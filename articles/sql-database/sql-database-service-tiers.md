---
title: "Уровни служб и уровни производительности базы данных SQL | Документация Майкрософт"
description: "Сравнение уровней служб базы данных SQL и уровней производительности для отдельных баз данных, а также сведения об эластичных пулах SQL"
keywords: "параметры базы данных, производительность базы данных"
services: sql-database
documentationcenter: 
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: f5c5c596-cd1e-451f-92a7-b70d4916e974
ms.service: sql-database
ms.custom: DBs & servers
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 06/30/2017
ms.author: carlrab
ms.openlocfilehash: b27b78788614d32e6c0c4267fe0ce504ebd2f444
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="what-performance-options-are-available-for-an-azure-sql-database"></a>Доступные параметры производительности базы данных SQL Azure

[База данных SQL Azure](sql-database-technical-overview.md) предлагает четыре уровня служб как для отдельных, так и для [объединенных в пулы](sql-database-elastic-pool.md) баз данных. Эти следующие уровни: **Базовый**, **Стандартный**, **Премиум** и **Премиум RS**. В каждом уровне службы находятся несколько уровней производительности ([Dtu](sql-database-what-is-a-dtu.md)) и параметры хранения toohandle различных рабочих нагрузок и данных размеров. Более высокие уровни производительности предоставляют дополнительные вычислительные и ресурсы хранения, toodeliver увеличенной пропускной способностью и емкость. Вы можете динамически изменять уровни служб, уровни производительности и хранилище без простоев в работе. 
- В соответствии с соглашением об уровне обслуживания все уровни службы — **Базовый**, **Стандартный** и **Премиум** — включают такие преимущества, как бесперебойная работа в течение 99,99 % времени, гибкость в обеспечении непрерывности бизнес-процессов, функции безопасности и почасовая тарификация. 
- Hello **Premium RS** уровень обеспечивает hello уровней производительности как hello уровня Premium с ограниченной соглашения об уровне ОБСЛУЖИВАНИЯ, так как он выполняется с помощью меньшего числа избыточные копии, чем в базе данных в hello других уровней обслуживания. Поэтому в случае сбоя службы hello может потребоваться toorecover базы данных из резервной копии с копирование запаздывания tooa 5 минут.

> [!IMPORTANT]
> Базы данных Azure SQL возвращает гарантированную набор ресурсов и hello ожидаемого характеристики производительности базы данных не затрагиваются управлением любой другой базы данных в Azure. 

## <a name="choosing-a-service-tier"></a>Выбор уровня службы
Hello следующей таблице приведены примеры уровней hello наиболее подходит для рабочих нагрузок другого приложения.

| Уровень служб | Целевые рабочие нагрузки |
| :--- | --- |
| **базовая;** | Лучше всего подходит для небольшой базы данных, для которой в определенный момент времени обычно выполняется одна активная операция. В качестве примера можно привести базы данных, используемые для разработки или тестирования, или небольшие редко используемые приложения. |
| **Стандартный** |Hello go-toooption для облачных приложений с низкой toomedium операции ввода-ВЫВОДА требования к производительности, поддерживающих несколько параллельных запросов. В качестве примера можно привести рабочую группу или веб-приложения. |
| **Премиальный** | Разработан для большого объема транзакций с высокими требованиями к производительности операций ввода-вывода. Поддерживается параллельная работа множества пользователей. В качестве примера можно привести базы данных для поддержки критически важных приложений. |
| **Premium RS** | Предназначены для рабочих нагрузок интенсивно использующих ввод вывод, не требующие hello наибольший гарантии доступности. Примеры включают тестирование высокой производительности рабочих нагрузок или аналитической рабочей нагрузки, где база данных hello не hello систему записи. |
|||

Вы можете создавать отдельные базы данных с выделенными ресурсами на уровне служб и выбранным [уровнем производительности](sql-database-service-tiers.md#single-database-service-tiers-and-performance-levels) или базы данных в [эластичном пуле SQL](sql-database-service-tiers.md#elastic-pool-service-tiers-and-performance-in-edtus). В гибкий пул SQL hello вычислительные ресурсы и хранилища являются общими для нескольких баз данных в пределах одного логического сервера. 

Ресурсы, доступные для отдельных баз данных, выражаются в единицах транзакций базы данных (DTU), а ресурсы для эластичных пулов SQL — в единицах транзакций эластичной базы данных (eDTU). См. дополнительные сведения о [единицах DTU и eDTU](sql-database-what-is-a-dtu.md).

toodecide на уровне службы, начните с определения hello минимальные возможности, необходимые:

| **Возможности уровня служб** | **базовая;** | **Стандартный** | **Премиальный** | **Premium RS**|
| :-- | --: | --: | --: | --: |
| Максимальный размер отдельной базы данных | 2 ГБ | 250 ГБ | 4 TБ*  | 500 ГБ  |
| Максимальный размер эластичного пула | 156 ГБ | 2,9 ТБ | 4 TБ* | 750 ГБ |
| Максимальный размер базы данных в эластичном пуле | 2 ГБ | 250 ГБ | 500 ГБ | 500 ГБ |
| Максимальное количество баз данных на пул | 500  | 500 | 100 | 100 |
| Максимальное количество DTU отдельной базы данных | 5 | 100 | 4000 | 1000 |
| Максимальное количество DTU для одной базы данных в эластичном пуле | 5 | 3000 | 4000 | 1000 |
| Срок хранения резервной копии | 7 дней | 35 дней | 35 дней | 35 дней |
||||||

> [!IMPORTANT]
> Хранилища вверх too4 ТБ в настоящее время доступна в следующих областей hello: нам East2, Запад США, Вирджиния государственных организаций США, Западной Европе, Германия центра, Южная Восточная Азия, восток Японии, Восточная Австралия, Канады центра и Восточная Канада. См. [текущие ограничения в 4 ТБ](sql-database-service-tiers.md#current-limitations-of-p11-and-p15-databases-with-4-tb-maxsize).
>

После определения уровня соответствующую службу hello предпринимается готов toodetermine hello уровень производительности (hello число Dtu) и hello объему хранилища для hello базы данных. 

- Здравствуйте, S2 и S3 уровни производительности в hello **Стандартная** уровня часто являются хорошей отправной точкой. 
- Для баз данных с высокие требования к ЦП и ввода-ВЫВОДА hello уровни производительности в hello **Premium** уровня являются hello правой отправной точки. 
- Hello **Premium** категория предлагает больше ресурсов ЦП и начинается в 10 раз дополнительные операции ввода-ВЫВОДА по сравнению toohello высокий уровень производительности в hello **Стандартная** уровня.
- Hello **PremiumRS** уровень обеспечивает производительность hello hello **Premium** уровня при более низких затратах, но с ограниченной соглашения об уровне ОБСЛУЖИВАНИЯ.

> [!IMPORTANT]
> Просмотрите hello [пулах эластичных БД SQL](sql-database-elastic-pool.md) hello сведения о группирование баз данных в SQL эластичных пулов ресурсов вычислений и хранения tooshare. Hello оставшейся части этой статьи посвящена уровни обслуживания и производительности для отдельных баз данных.
>

## <a name="single-database-service-tiers-and-performance-levels"></a>Уровни служб для отдельной базы данных и уровни производительности
Для отдельных баз данных доступно несколько уровней производительности и объемов хранилищ в пределах каждого уровня служб. 

[!INCLUDE [SQL DB service tiers table](../../includes/sql-database-service-tiers-table.md)]

## <a name="scaling-up-or-scaling-down-a-single-database"></a>Увеличение или уменьшение масштаба отдельной базы данных

Изначально выбрав уровень служб и уровень производительности, вы сможете динамически увеличивать или уменьшать масштаб отдельной базы данных в процессе фактической работы.  

> [!VIDEO https://channel9.msdn.com/Blogs/Azure/Azure-SQL-Database-dynamically-scale-up-or-scale-down/player]
>

Изменение hello уровня и/или производительности уровня обслуживания базы данных создает реплику hello исходной базы данных на новый уровень производительности hello и затем переключается реплики toohello подключений. Все данные сохраняются во время этого процесса, но во время hello короткий промежуток времени Если переключатель через toohello реплика, базу данных toohello соединения отключены и некоторые транзакции проходят может быть выполнен откат. Hello интервал времени для hello переключиться изменяется, но обычно находится в разделе 4 секунды составляет менее 30 секунд 99% времени hello. При наличии большого количества транзакций, передаваемых в момент подключений hello отключены, hello время для hello переключиться может быть больше.  

Длительность Hello hello весь процесс масштабирования зависит от размера обоих hello и hello уровень обслуживания базы данных, до и после изменения hello. Например, если база данных размером 250 ГБ переводится с уровня службы "Стандартный", на этот уровень или в его пределах, процесс должен завершиться в течение 6 часов. Для базы данных из hello такого же размера, то есть изменение уровни производительности в рамках уровня служб Premium hello, операция должна завершиться в течение 3 часов.

> [!TIP]
> toocheck hello состояние текущей операции масштабирования базы данных SQL можно использовать приветствия при следующем запросе: ```select * from sys.dm_operation_status```.
>

* При обновлении tooa выше уровня служб или производительности уровня hello максимальный размер базы данных не увеличивается, если явно не указан максимальный размер.
* toodowngrade базы данных hello база данных должна быть меньше, чем максимально допустимый размер hello hello целевого уровня обслуживания. 
* При обновлении базы данных с [георепликации](sql-database-geo-replication-portal.md) включен, обновите его базы данных-получатели toohello требуемую производительность уровня перед обновлением hello базы данных-источника (Общие рекомендации). При обновлении tooa другой выпуск ugrading hello баз данных-получателей сначала является обязательным. 
* При понижении базы данных с [георепликации](sql-database-geo-replication-portal.md) включен, понизить его уровня базы данных-источники toohello требуемую производительность перед понижением версии hello базы данных-получателя (Общие рекомендации). При понижении tooa другой выпуск переходе hello базы данных-источника сначала требуется. 

* Hello предложения службы восстановления отличаются для разных уровней служб hello. При переходе на toohello **основные** уровня, необходимо будет ниже срок хранения резервной копии — в разделе [резервные копии баз данных SQL Azure](sql-database-automated-backups.md).
* новые свойства базы данных hello Hello не применяются до завершения внесения изменений hello.


## <a name="current-limitations-of-p11-and-p15-databases-with-4-tb-maxsize"></a>Текущие ограничения баз данных P11 и P15 с максимальным размером 4 ТБ

Максимальный размер баз данных P11 и P15 (4 ТБ) поддерживается только в некоторых регионах (как указано выше). Hello следующие рекомендации и ограничения применяются tooP11 и P15 баз данных с 4 ТБ maxsize.

- Если выбран параметр maxsize hello 4 ТБ, при создании базы данных (с помощью значение 4 ТБ или 4096 ГБ), hello создать Сбой команды с ошибкой, если выполняется подготовка базы данных hello в регион не поддерживается.
- Для существующих P11 P15 баз данных и расположен в одном из регионов hello поддерживается можно увеличить хранилище too4 hello maxsize ТБ. Это можно проверить с помощью hello [ВЫБЕРИТЕ DATABASEPROPERTYEX](https://msdn.microsoft.com/library/ms186823.aspx) или путем проверки hello размер базы данных в hello портал Azure. Обновление существующего P11 или P15 базы данных может выполняться только с именем входа субъекта серверного уровня или члены роли базы данных dbmanager hello. 
- При выполнении операции обновления в поддерживаемом регионе hello конфигурации немедленного обновления. Hello находится в оперативном режиме во время обновления hello. Тем не менее, нельзя использовать полный hello 4 ТБ памяти — пока hello реальной базы данных файлы были обновлены toohello новый параметр maxsize. Hello время ожидания зависит от размера hello hello база данных обновляется.  
- При создании или обновлении базы данных P11 или P15 можно выбрать только одно из двух значений максимального размера хранилища (maxsize) — 1 ТБ или 4 ТБ. Промежуточные размеры сейчас не поддерживаются При создании P11/P15, параметр хранения по умолчанию hello 1 ТБ выбранного ранее. Для баз данных, расположенных в одном из регионов hello поддерживается можно увеличить максимальный too4TB hello хранилища одной новой или существующей базы данных. Для всех других регионов максимальный размер не может превышать 1 ТБ. Цена Hello не изменяется при выборе 4 ТБ памяти — включено.
- Hello 4 ТБ maxsize базы данных не может быть ТБ измененные too1 даже если hello используются фактического хранения меньше 1 ТБ. Таким образом, невозможно понизить P11 4 ТБ и P15 - 4 ТБ tooa P11 - 1 ТБ или P15 - 1 ТБ или более низкий уровень производительности, например, tooP1 P6) пока мы предоставляем дополнительных вариантов хранения для оставшихся hello hello уровней производительности. Это ограничение также применяется toohello восстановления и сценариев с копированием в момент, включая географическое восстановление долгосрочных-term-резервное копирование-срока хранения и копия базы данных. Как только база данных настроена с параметром 4 ТБ hello, все операции восстановления базы данных должна выполняться в P11/P15 со значением maxsize 4 ТБ.
- При создании или обновлении базы данных служб P11/P15 в регион не поддерживается hello создании или операция обновления завершается после сообщение hello: **P11 и P15 базы данных с помощью копирования too4TB хранилища доступны нам East2, Запад США, Вирджиния государственных организаций США Западная Европа, центральный Германии, Юго-Восточная Азия, восток Японии, Восточная Австралия, Центральная Канада и Восточная Канада.**
- Для сценариев активной георепликации:
   - Настройка связи георепликации: Если P11 или P15 hello базы данных-источника, hello secondary(ies) также должны P11 или P15; закреплено производительности отклоняются как баз данных-получателей, так как они не поддерживает 4 ТБ.
   - Обновление hello базы данных-источника в отношении георепликации: изменение ТБ too4 hello maxsize базы данных-источника запускает hello же изменить hello базе данных-получателе. Оба обновления должны быть успешными при изменении hello в силу основной tootake hello. Регион для параметра 4 ТБ hello ограничения (см. выше). Если hello получателя находится в регионе, который не поддерживает 4 ТБ, основной hello не обновляется.
- Использование службы импорта и экспорта hello загрузки P11 4 ТБ и P15 - 4 ТБ баз данных не поддерживается. Использовать SqlPackage.exe слишком[импорта](sql-database-import.md) и [Экспорт](sql-database-export.md) данных.

## <a name="manage-single-database-service-tiers-and-performance-levels-using-hello-azure-portal"></a>Управление уровни службы одной базы данных и производительности с помощью портала Azure hello

Здравствуйте tooset или изменение уровня служб, уровень производительности или объем хранилища для нового или существующего Azure базы данных SQL с помощью hello портал Azure, откройте hello **настройки производительности** окна для базы данных, щелкнув  **Ценовая категория (масштаб Dtu)** — как показано на следующий снимок экрана приветствия. 

- Задать или изменить уровень обслуживания hello, выбрав hello уровня обслуживания для рабочей нагрузки. 
- Установка или изменение уровня производительности hello (**Dtu**) в рамках одного уровня службы, с помощью hello **DTU** ползунок.
- Задать или изменить объем хранилища hello для hello уровня производительности, с помощью hello **хранения** ползунок. 

  ![Настройка уровня служб и производительности](./media/sql-database-service-tiers/service-tier-performance-level.png)

> [!IMPORTANT]
> Выбирая уровень служб P11 или P15, см. раздел [Текущие ограничения баз данных P11 и P15 с максимальным размером 4 ТБ](sql-database-service-tiers.md#current-limitations-of-p11-and-p15-databases-with-4-tb-maxsize).
>

## <a name="manage-single-database-service-tiers-and-performance-levels-using-powershell"></a>Управление уровнями служб и производительности для отдельной базы данных с помощью PowerShell

tooset или изменение уровней обслуживания баз данных Azure SQL, уровни производительности и объем хранилища с помощью PowerShell, используйте следующие командлеты PowerShell hello. Если необходима tooinstall или обновить PowerShell, см. раздел [установите Azure PowerShell модуль](/powershell/azure/install-azurerm-ps). 

| Командлет | Описание |
| --- | --- |
|[New-AzureRmSqlDatabase](/powershell/module/azurerm.sql/new-azurermsqldatabase)|Создает базу данных. |
|[Get-AzureRmSqlDatabase](/powershell/module/azurerm.sql/get-azurermsqldatabase)|Получает одну или несколько баз данных.|
|[Set-AzureRmSqlDatabase](/powershell/module/azurerm.sql/set-azurermsqldatabase)|Определяет свойства базы данных или перемещает ее в эластичный пул.|


> [!TIP]
> Пример сценария PowerShell, отслеживает hello метрики производительности базы данных, выполняет масштабирование tooa высокий уровень производительности и создает правило генерации оповещений на одном hello метрики производительности, см. в разделе [монитора и масштабирования одного SQL базы данных с помощью PowerShell](scripts/sql-database-monitor-and-scale-database-powershell.md).

## <a name="manage-single-database-service-tiers-and-performance-levels-using-hello-azure-cli"></a>Управление уровни службы одной базы данных и производительности с помощью hello Azure CLI

tooset или изменение уровней обслуживания баз данных Azure SQL, уровни производительности и объем хранилища с помощью hello Azure CLI, используйте ниже hello [базы данных SQL Azure CLI](/cli/azure/sql/db) команд. Используйте hello [оболочки облака](/azure/cloud-shell/overview) toorun hello CLI в браузере или [установить](/cli/azure/install-azure-cli) ее на macOS, Linux или Windows. Изучите дополнительные сведения о создании [эластичных пулов SQL](sql-database-elastic-pool.md) и управлении ими.

| Командлет | Описание |
| --- | --- |
|[az sql db create](/cli/azure/sql/db#create) |Создает базу данных.|
|[az sql db list](/cli/azure/sql/db#list)|Выводит список всех баз данных и хранилищ данных на сервере или всех баз данных в эластичном пуле.|
|[az sql db list-editions](/cli/azure/sql/db#list-editions)|Выводит список доступных целевых служб и ограничений хранилища.|
|[az sql db list-usages](/cli/azure/sql/db#list-usages)|Возвращает данные об использовании баз данных.|
|[az sql db show](/cli/azure/sql/db#show)|Возвращает сведения о базе данных или хранилище данных.|
|[az sql db update](/cli/azure/sql/db#update)|Обновляет базу данных.|

> [!TIP]
> Пример сценария Azure CLI, масштабируемая после выполнения запроса к hello сведения о размере базы данных hello один уровень производительности tooa базы данных Azure SQL, в разделе [toomonitor используйте CLI и масштаб одной базы данных SQL](scripts/sql-database-monitor-and-scale-database-cli.md).
>

## <a name="manage-single-database-service-tiers-and-performance-levels-using-transact-sql"></a>Управление уровнями служб и производительности для отдельной базы данных с помощью Transact-SQL

tooset или изменение уровней обслуживания баз данных Azure SQL, уровни производительности и объема хранилища с помощью Transact-SQL, используйте следующие команды T-SQL hello. Можно выполнить эти команды с помощью портала Azure hello [SQL Server Management Studio](/sql/ssms/use-sql-server-management-studio), [кода Visual Studio](https://code.visualstudio.com/docs), или любой другой программе, можно подключить tooan сервер базы данных SQL Azure и передать Transact-SQL команды. 

| Команда | Описание |
| --- | --- |
|[CREATE DATABASE (база данных SQL Azure)](/sql/t-sql/statements/create-database-azure-sql-database)|Создает базу данных. Должен быть toohello подключенной базы данных master toocreate новую базу данных.|
| [ALTER DATABASE (база данных SQL Azure)](/sql/t-sql/statements/alter-database-azure-sql-database) |Изменяет базу данных SQL Azure. |
|[sys.database_service_objectives (база данных SQL Azure)](/sql/relational-databases/system-catalog-views/sys-database-service-objectives-azure-sql-database)|Возвращает hello выпуск (уровень службы), цель службы (ценовой категории) и имя эластичного пула, если таковые имеются, для базы данных Azure SQL или хранилище данных SQL Azure. Если вход в систему toohello базы данных master на сервере базы данных SQL Azure, возвращает сведения обо всех базах данных. Для хранилища данных SQL Azure необходимо быть toohello подключенной базы данных master.|
|[sys.database_usage (база данных SQL Azure)](/sql/relational-databases/system-catalog-views/sys-database-usage-azure-sql-database)|Список hello количество, тип и длительность существования баз данных на сервере базы данных SQL Azure.|

Hello пример hello maxsize изменяется с помощью команды ALTER DATABASE hello:

 ```sql
ALTER DATABASE <myDatabaseName> 
   MODIFY (MAXSIZE = 4096 GB);
```

## <a name="manage-single-databases-using-hello-rest-api"></a>Управление с помощью API-интерфейса REST hello отдельных баз данных

tooset или изменение уровней обслуживания баз данных Azure SQL, уровни производительности и объем хранилища с помощью REST API hello. в разделе [API REST для базы данных SQL Azure](/rest/api/sql/).

## <a name="next-steps"></a>Дальнейшие действия

* См. дополнительные сведения о единицах [DTU](sql-database-what-is-a-dtu.md).
* toolearn о наблюдении за использование DTU см [наблюдение и настройка производительности](sql-database-troubleshoot-performance.md).

