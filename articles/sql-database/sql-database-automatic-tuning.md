---
title: "База данных — aaaSQL автоматической настройки | Документы Microsoft"
description: "База данных SQL анализирует SQL-запроса и автоматически адаптирует toouser рабочей нагрузки."
services: sql-database
documentationcenter: 
author: jovanpop-msft
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/05/2017
ms.author: jovanpop
ms.openlocfilehash: 897a8deaabedb6727dc49958c64d0433c5f2e4f4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="automatic-tuning"></a><span data-ttu-id="17a08-103">Автоматическая настройка</span><span class="sxs-lookup"><span data-stu-id="17a08-103">Automatic tuning</span></span>

<span data-ttu-id="17a08-104">База данных SQL Azure является полностью управляемым данных службы, которая отслеживает hello запросы, которые выполняются в базе данных hello и автоматически может повысить производительность рабочей нагрузки hello.</span><span class="sxs-lookup"><span data-stu-id="17a08-104">Azure SQL Database is a fully managed data service that monitors hello queries that are executed on hello database and can automatically improve performance of hello workload.</span></span> <span data-ttu-id="17a08-105">База данных SQL Azure имеет встроенный механизм, который может автоматически настраивать и повысить производительность запросов путем динамической адаптации нагрузки tooyour hello базы данных.</span><span class="sxs-lookup"><span data-stu-id="17a08-105">Azure SQL Database has a built-in intelligence mechanism that can automatically tune and improve performance of your queries by dynamically adapting hello database tooyour workload.</span></span> <span data-ttu-id="17a08-106">Автоматической настройки в базе данных SQL Azure может быть одним из самых важных функций hello, можно включить в базе данных SQL Azure toooptimize производительность запросов.</span><span class="sxs-lookup"><span data-stu-id="17a08-106">Automatic tuning in Azure SQL Database might be one of hello most important features that you can enable on Azure SQL Database toooptimize performance of your queries.</span></span>

<span data-ttu-id="17a08-107">См. в статье шагов hello слишком[включить автоматическую настройку](sql-database-automatic-tuning-enable.md) с помощью портала Azure "hello".</span><span class="sxs-lookup"><span data-stu-id="17a08-107">See this article for hello steps too[enable automatic tuning](sql-database-automatic-tuning-enable.md) using hello Azure portal.</span></span>

## <a name="why-automatic-tuning"></a><span data-ttu-id="17a08-108">Почему автоматическая настройка</span><span class="sxs-lookup"><span data-stu-id="17a08-108">Why automatic tuning?</span></span>

<span data-ttu-id="17a08-109">Одно из основных задач hello в классическом базы данных администрирования наблюдает за hello рабочей нагрузки, определение критических SQL запросы, индексы, которые должны быть добавлены tooimprove производительности и редко используемые индексы.</span><span class="sxs-lookup"><span data-stu-id="17a08-109">One of hello main tasks in classic database administration is monitoring hello workload, identifying critical SQL queries, indexes that should be added tooimprove performance, and rarely used indexes.</span></span> <span data-ttu-id="17a08-110">База данных SQL Azure предоставляет подробное представление о hello запросов и индексов, необходимо toomonitor.</span><span class="sxs-lookup"><span data-stu-id="17a08-110">Azure SQL Database provides detailed insight into hello queries and indexes that you need toomonitor.</span></span> <span data-ttu-id="17a08-111">Однако постоянный мониторинг базы данных — это сложная и трудоемкая задача, особенно при работе с несколькими базами данных.</span><span class="sxs-lookup"><span data-stu-id="17a08-111">However, constantly monitoring database is a hard and tedious task, especially when dealing with many databases.</span></span> <span data-ttu-id="17a08-112">Управление огромное число баз данных может быть невозможным toodo эффективно даже со все доступные средства и отчеты, которые содержат базы данных SQL Azure и на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="17a08-112">Managing a huge number of databases might be impossible toodo efficiently even with all available tools and reports that Azure SQL Database and Azure portal provide.</span></span> <span data-ttu-id="17a08-113">Вместо контроля и настройки базы данных вручную, следует рассмотреть возможность делегирования некоторые hello контроля и настройки действия tooAzure базы данных SQL с помощью функции автоматической настройки.</span><span class="sxs-lookup"><span data-stu-id="17a08-113">Instead of monitoring and tuning your database manually, you might consider delegating some of hello monitoring and tuning actions tooAzure SQL Database using automatic tuning feature.</span></span> 


> [!VIDEO https://channel9.msdn.com/Blogs/Azure-in-the-Enterprise/Enabling-Azure-SQL-Database-Auto-Tuning-at-Scale-for-Microsoft-IT/player]
>

## <a name="how-does-automatic-tuning-work"></a><span data-ttu-id="17a08-114">Как работает автоматическая настройка</span><span class="sxs-lookup"><span data-stu-id="17a08-114">How does automatic tuning work?</span></span>

<span data-ttu-id="17a08-115">База данных SQL Azure имеет процесс непрерывного производительности мониторинга и анализа, который постоянно узнает о hello характеристик рабочей нагрузки и определить потенциальные проблемы и усовершенствования.</span><span class="sxs-lookup"><span data-stu-id="17a08-115">Azure SQL Database has a continuous performance monitoring and analysis process that constantly learns about hello characteristic of your workload and identify potential issues and improvements.</span></span>

![Процесс автоматической настройки](./media/sql-database-automatic-tuning/tuning-process.png)

<span data-ttu-id="17a08-117">Этот процесс позволяет toodynamically базы данных SQL Azure адаптировать tooyour рабочей нагрузки, который можно найти, какие индексы и планов может способствовать повышению производительности для рабочих нагрузок и индексы влияют на рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="17a08-117">This process enables Azure SQL Database toodynamically adapt tooyour workload by finding what indexes and plans might improve performance of your workloads and what indexes affect your workloads.</span></span> <span data-ttu-id="17a08-118">На основании этих данных автоматическая настройка применяет действия по настройке производительности при рабочей нагрузке.</span><span class="sxs-lookup"><span data-stu-id="17a08-118">Based on these findings, automatic tuning applies tuning actions that improve performance of your workload.</span></span> <span data-ttu-id="17a08-119">Кроме того база данных SQL Azure постоянно отслеживает производительность после любого изменения, внесенные программой автоматической настройки tooensure, что позволяет повысить производительность рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="17a08-119">In addition, Azure SQL Database continuously monitors performance after any change made by automatic tuning tooensure that it improves performance of your workload.</span></span> <span data-ttu-id="17a08-120">Любое действие, которое не повысило производительность, автоматически отменяется.</span><span class="sxs-lookup"><span data-stu-id="17a08-120">Any action that didn’t improve performance is automatically reverted.</span></span> <span data-ttu-id="17a08-121">Процесс проверки является функцией ключа, которая гарантирует, что любые изменения, сделанные с автоматической настройки не приводит к снижению производительности hello рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="17a08-121">This verification process is a key feature that ensures that any change made by automatic tuning does not decrease hello performance of your workload.</span></span>

<span data-ttu-id="17a08-122">В базе данных SQL Azure есть две функции автоматической настройки:</span><span class="sxs-lookup"><span data-stu-id="17a08-122">There are two automatic tuning aspects that are available in Azure SQL Database:</span></span>

 -  <span data-ttu-id="17a08-123">**Автоматическое управление индексами**: определяет индексы, которые необходимо добавить в базу данных или удалить.</span><span class="sxs-lookup"><span data-stu-id="17a08-123">**Automatic index management** that identifies indexes that should be added in your database, and indexes that should be removed.</span></span>
 -  <span data-ttu-id="17a08-124">**Автоматическое изменение плана**: определяет проблемные планы и исправляет проблемы производительности плана SQL (ожидается в ближайшее время, уже доступна в SQL Server 2017).</span><span class="sxs-lookup"><span data-stu-id="17a08-124">**Automatic plan correction** (coming soon, already available in SQL Server 2017) that identifies problematic plans and fixes SQL plan performance problems.</span></span>

## <a name="automatic-index-management"></a><span data-ttu-id="17a08-125">Автоматическое управление индексами</span><span class="sxs-lookup"><span data-stu-id="17a08-125">Automatic index management</span></span>

<span data-ttu-id="17a08-126">В базе данных SQL Azure управлять индексами легко, так как база данных SQL Azure отслеживает рабочую нагрузку и всегда обеспечивает оптимальную индексацию данных.</span><span class="sxs-lookup"><span data-stu-id="17a08-126">In Azure SQL Database, index management is easy because Azure SQL Database learns about your workload and ensures that your data is always optimally indexed.</span></span> <span data-ttu-id="17a08-127">Правильное проектирование индекса имеет решающее значение для обеспечения оптимальной производительности при рабочей нагрузке. Автоматическое управление индексами поможет оптимизировать их.</span><span class="sxs-lookup"><span data-stu-id="17a08-127">Proper index design is crucial for optimal performance of your workload, and automatic index management can help you optimize your indexes.</span></span> <span data-ttu-id="17a08-128">Управление индексами автоматического можно устранять проблемы с производительностью в неправильно индексированных баз данных, или сохранить и оптимизируйте индексы по hello существующей схемы базы данных.</span><span class="sxs-lookup"><span data-stu-id="17a08-128">Automatic index management can either fix performance issues in incorrectly indexed databases, or maintain and improve indexes on hello existing database schema.</span></span> 

### <a name="why-do-you-need-index-management"></a><span data-ttu-id="17a08-129">Для чего необходимо управление индексами</span><span class="sxs-lookup"><span data-stu-id="17a08-129">Why do you need index management?</span></span>

<span data-ttu-id="17a08-130">Индексы ускорить некоторые запросы на чтение данных из таблиц hello. Тем не менее они могут замедлить hello запросов, которые обновляют данные.</span><span class="sxs-lookup"><span data-stu-id="17a08-130">Indexes speed up some of your queries that read data from hello tables; however, they can slow down hello queries that update data.</span></span> <span data-ttu-id="17a08-131">Требуется toocarefully анализ при toocreate индекса, и какие столбцы необходимо tooinclude в hello индекса.</span><span class="sxs-lookup"><span data-stu-id="17a08-131">You need toocarefully analyze when toocreate an index and what columns you need tooinclude in hello index.</span></span> <span data-ttu-id="17a08-132">Некоторые индексы могут оказаться ненужными через некоторое время.</span><span class="sxs-lookup"><span data-stu-id="17a08-132">Some indexes might not be needed after some time.</span></span> <span data-ttu-id="17a08-133">Таким образом, потребовалось бы tooperiodically определить и удалить индексы hello не отображают никаких преимуществ.</span><span class="sxs-lookup"><span data-stu-id="17a08-133">Therefore, you would need tooperiodically identify and drop hello indexes that do not bring any benefits.</span></span> <span data-ttu-id="17a08-134">Если сейчас пропустить Здравствуйте неиспользуемых индексов, будет снижаться производительность hello запросов, которые обновляют данные без никаких преимуществ на hello запросов на чтение данных.</span><span class="sxs-lookup"><span data-stu-id="17a08-134">If you ignore hello unused indexes, performance of hello queries that update data would be decreased without any benefit on hello queries that read data.</span></span> <span data-ttu-id="17a08-135">Неиспользуемые индексы также влиять на общую производительность системы hello, так как дополнительные обновления требуют ненужные ведения журнала.</span><span class="sxs-lookup"><span data-stu-id="17a08-135">Unused indexes also affect overall performance of hello system because additional updates require unnecessary logging.</span></span>

<span data-ttu-id="17a08-136">Поиск hello оптимальный набор индексов, которые повышают производительность запросов hello, считывать данные из таблиц и оказывать минимальное влияние на обновления может потребоваться непрерывные и сложного анализа.</span><span class="sxs-lookup"><span data-stu-id="17a08-136">Finding hello optimal set of indexes that improve performance of hello queries that read data from your tables and have minimal impact on updates might require continuous and complex analysis.</span></span>

<span data-ttu-id="17a08-137">База данных SQL Azure использует встроенные аналитики и расширенных правил, анализ запросов, определите индексы, которые были бы оптимально подходит для вашей текущей рабочей нагрузкой и hello индексы могут быть удалены.</span><span class="sxs-lookup"><span data-stu-id="17a08-137">Azure SQL Database uses built-in intelligence and advanced rules that analyze your queries, identify indexes that would be optimal for your current workloads, and hello indexes might be removed.</span></span> <span data-ttu-id="17a08-138">База данных SQL Azure гарантирует, что минимальный набор необходимых индексов, оптимизирующие hello запросов на чтение данных, с привет к минимуму влияние на hello других запросов.</span><span class="sxs-lookup"><span data-stu-id="17a08-138">Azure SQL Database ensures that you have a minimal necessary set of indexes that optimize hello queries that read data, with hello minimized impact on hello other queries.</span></span>

### <a name="how-tooidentify-indexes-that-need-toobe-changed-in-your-database"></a><span data-ttu-id="17a08-139">Как tooidentify индексы, toobe необходимость изменения в базе данных?</span><span class="sxs-lookup"><span data-stu-id="17a08-139">How tooidentify indexes that need toobe changed in your database?</span></span>

<span data-ttu-id="17a08-140">База данных SQL Azure упрощает процесс управления индексами.</span><span class="sxs-lookup"><span data-stu-id="17a08-140">Azure SQL Database makes index management process easy.</span></span> <span data-ttu-id="17a08-141">Вместо hello трудоемкий процесс анализа рабочей нагрузки вручную и мониторинга индекса базы данных SQL Azure анализа рабочей нагрузки, определяет hello запросы, которые могут выполняться быстрее с новым индексом и идентифицирует неиспользуемые или повторяющиеся индексы.</span><span class="sxs-lookup"><span data-stu-id="17a08-141">Instead of hello tedious process of manual workload analysis and index monitoring, Azure SQL Database analyzes your workload, identifies hello queries that could be executed faster with a new index, and identifies unused or duplicated indexes.</span></span> <span data-ttu-id="17a08-142">Дополнительные сведения об идентификации индексов, которые необходимо изменить, см. в статье [Использование помощника по базам данных SQL на портале Azure](sql-database-advisor-portal.md).</span><span class="sxs-lookup"><span data-stu-id="17a08-142">Find more information about identification of indexes that should be changed at [Find index recommendations in Azure portal](sql-database-advisor-portal.md).</span></span>

### <a name="automatic-index-management-considerations"></a><span data-ttu-id="17a08-143">Рекомендации по автоматическому управлению индексами</span><span class="sxs-lookup"><span data-stu-id="17a08-143">Automatic index management considerations</span></span>

<span data-ttu-id="17a08-144">Если обнаружится, что встроенные правила hello улучшить производительность hello базы данных, можно разрешить автоматическое управление индексов базы данных Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="17a08-144">If you find that hello built-in rules improve hello performance of your database, you might let Azure SQL database automatically manage your indexes.</span></span>

<span data-ttu-id="17a08-145">Действия, необходимые toocreate необходимые индексы в базах данных SQL Azure может потреблять ресурсы и временно повлиять на производительность рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="17a08-145">Actions required toocreate necessary indexes in Azure SQL Databases might consume resources and temporally affect workload performance.</span></span> <span data-ttu-id="17a08-146">влияние на производительность рабочей нагрузки, база данных SQL Azure создание индекса hello toominimize находит окно hello соответствующее время для любой операции управления индекса.</span><span class="sxs-lookup"><span data-stu-id="17a08-146">toominimize hello impact of index creation on workload performance, Azure SQL Database finds hello appropriate time window for any index management operation.</span></span> <span data-ttu-id="17a08-147">Действия по настройке будет отложена, если база данных hello должна tooexecute ресурсов рабочей нагрузки и запущена при hello базы данных имеет достаточно неиспользуемые ресурсы, которые могут использоваться для задач обслуживания hello.</span><span class="sxs-lookup"><span data-stu-id="17a08-147">Tuning action is postponed if hello database needs resources tooexecute your workload, and started when hello database has enough unused resources that can be used for hello maintenance task.</span></span> <span data-ttu-id="17a08-148">Одна из важных функций в индекс автоматического управления используется для подтверждения hello действий.</span><span class="sxs-lookup"><span data-stu-id="17a08-148">One important feature in automatic index management is a verification of hello actions.</span></span> <span data-ttu-id="17a08-149">Когда база данных SQL Azure создает или удаляет индекс, процесс мониторинга анализирует производительность tooverify вашей рабочей нагрузки, что действие hello Улучшенная производительность hello.</span><span class="sxs-lookup"><span data-stu-id="17a08-149">When Azure SQL Database creates or drops index, a monitoring process analyzes performance of your workload tooverify that hello action improved hello performance.</span></span> <span data-ttu-id="17a08-150">Если его не удалось перевести существенным усовершенствованием — действие hello возвращается немедленно.</span><span class="sxs-lookup"><span data-stu-id="17a08-150">If it didn’t bring significant improvement – hello action is immediately reverted.</span></span> <span data-ttu-id="17a08-151">Таким образом, база данных SQL Azure гарантирует, что автоматические действия не снижают производительность при рабочей нагрузке.</span><span class="sxs-lookup"><span data-stu-id="17a08-151">This way, Azure SQL Database ensures that automatic actions do not negatively impact performance of your workload.</span></span> <span data-ttu-id="17a08-152">Индексы, созданные путем автоматической настройки прозрачны для операции обслуживания hello hello базовой схемы.</span><span class="sxs-lookup"><span data-stu-id="17a08-152">Indexes created by automatic tuning are transparent for hello maintenance operation on hello underlying schema.</span></span> <span data-ttu-id="17a08-153">Изменения схемы, например, удаление или переименование столбцов наличием hello автоматически созданные индексов не блокируются.</span><span class="sxs-lookup"><span data-stu-id="17a08-153">Schema changes such as dropping or renaming columns are not blocked by hello presence of automatically created indexes.</span></span> <span data-ttu-id="17a08-154">Индексы, которые были автоматически созданы базой данных SQL Azure, немедленно удаляются при удалении связанных таблиц или столбцов.</span><span class="sxs-lookup"><span data-stu-id="17a08-154">Indexes that are automatically created by Azure SQL Database are immediately dropped when related table or columns is dropped.</span></span>

## <a name="automatic-plan-choice-correction"></a><span data-ttu-id="17a08-155">Автоматическое исправление выбора плана</span><span class="sxs-lookup"><span data-stu-id="17a08-155">Automatic plan choice correction</span></span>

<span data-ttu-id="17a08-156">Автоматическое исправление плана — это новая функция автоматической настройки, добавленная в SQL Server 2017 CTP 2.0, которая определяет неправильное поведение планов SQL.</span><span class="sxs-lookup"><span data-stu-id="17a08-156">Automatic plan correction is a new automatic tuning feature added in SQL Server 2017 CTP2.0 that identifies SQL plans that misbehave.</span></span> <span data-ttu-id="17a08-157">Функция автоматической настройки будет добавлена в ближайшее время в базе данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="17a08-157">This automatic tuning option is coming soon on Azure SQL Database.</span></span> <span data-ttu-id="17a08-158">Дополнительные сведения см.в статье [Автоматическая настройка](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning).</span><span class="sxs-lookup"><span data-stu-id="17a08-158">Find more information at [Automatic tuning in SQL Server 2017](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning).</span></span>

## <a name="next-steps"></a><span data-ttu-id="17a08-159">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="17a08-159">Next steps</span></span>

- <span data-ttu-id="17a08-160">автоматической настройки в базе данных SQL Azure и позволяют автоматического tooenable функция настройки полностью управлять рабочей нагрузки см. в разделе [включить автоматическую настройку](sql-database-automatic-tuning-enable.md).</span><span class="sxs-lookup"><span data-stu-id="17a08-160">tooenable automatic tuning in Azure SQL Database and let automatic tuning feature fully manage your workload, see [Enable automatic tuning](sql-database-automatic-tuning-enable.md).</span></span>
- <span data-ttu-id="17a08-161">Ручная настройка toouse, можно просмотреть [рекомендаций на портале Azure](sql-database-advisor-portal.md) и вручную применить hello из них, которые повышают производительность запросов.</span><span class="sxs-lookup"><span data-stu-id="17a08-161">toouse manual tuning, you can review [Tuning recommendations in Azure portal](sql-database-advisor-portal.md) and manually apply hello ones that improve performance of your queries.</span></span>
