---
title: "Автоматическая настройка базы данных SQL Azure | Документация Майкрософт"
description: "База данных SQL анализирует SQL-запрос и автоматически подстраивается под рабочую нагрузку пользователей."
services: sql-database
documentationcenter: 
author: jovanpop-msft
manager: drasumic
editor: danimir
ms.assetid: 
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: On Demand
ms.date: 11/08/2017
ms.author: jovanpop
ms.openlocfilehash: 50d1548637ecc6862f680f73e333e8d7f8d20e39
ms.sourcegitcommit: b07d06ea51a20e32fdc61980667e801cb5db7333
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/08/2017
---
# <a name="automatic-tuning-in-azure-sql-database"></a>Автоматическая настройка в базе данных SQL Azure

Автоматическая настройка базы данных SQL Azure обеспечивает наилучшую производительность и стабильность рабочих нагрузок благодаря механизму непрерывной оптимизации производительности на базе искусственного интеллекта.

Автоматическая настройка — это полностью управляемая служба, которая непрерывно отслеживает выполняемые в базе данных запросы с помощью встроенной системы аналитики и автоматически повышает их производительность. Это достигается за счет динамической адаптации базы данных к изменениям рабочих нагрузок и применения рекомендаций по настройке. Автоматическая настройка горизонтально изучает все базы данных Azure с помощью механизма искусственного интеллекта и динамически улучшает действия настройки. Чем дольше база данных SQL Azure выполняется с включенной автоматической настройкой, тем лучше она работает.

Автоматическая настройка в базе данных SQL Azure, возможно, одна из самых важных функций, позволяющая обеспечить выполнение рабочих нагрузок при стабильной и пиковой работе.

## <a name="what-can-automatic-tuning-do-for-you"></a>Возможности автоматической настройки

- Автоматическая оптимизация производительности базы данных SQL Azure.
- Автоматическая проверка прироста производительности.
- Автоматический откат и самостоятельное восстановление.
- Журнал выполнения настройки.
- Настройка T-SQL-скриптов для развертывания вручную.
- Упреждающий мониторинг производительности рабочей нагрузки.
- возможность развертывания сотен тысяч баз данных;
- положительное влияние на ресурсы DevOps и совокупную стоимость владения.

## <a name="safe-reliable-and-proven"></a>Безопасность и надежность

Операции настройки, применяемые к базам данных SQL Azure, полностью безопасны для выполнения самых интенсивных рабочих нагрузок. Система была разработана с осторожностью, чтобы предотвратить воздействие на рабочие нагрузки пользователя. Автоматические рекомендации по настройке применяются только во время недостаточной нагрузки. Система также может временно отключать автоматические операции по настройке, чтобы защитить производительность рабочей нагрузки. В этом случае на портале Azure появится сообщение "Disabled by the system" (Отключено системой). Автоматическая настройка относится к рабочим нагрузкам с наивысшим приоритетом ресурсов.

Автоматические механизмы настройки отлажены и были усовершенствованы на сотнях тысяч баз данных, работающих в Azure. Автоматические операции настройки проверяются автоматически, чтобы обеспечить положительное улучшение производительности рабочей нагрузки. Регрессионные рекомендации по производительности динамически обнаруживаются и оперативно отменяются. Журнал выполнения настройки позволяет отслеживать улучшения, сделанные механизмом настройки для каждой базы данных SQL Azure. 

![Как работает автоматическая настройка](./media/sql-database-automatic-tuning/how-does-automatic-tuning-work.png)

Автоматическая настройка базы данных SQL Azure использует основную логику совместно с механизмом автоматической настройки SQL Server. Дополнительные технические сведения о встроенном механизме настройки см. в статье [Automatic tuning](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning) (Автоматическая настройка).

## <a name="use-automatic-tuning"></a>Использование автоматической настройки

Автоматическую настройку нужно включить вручную в подписке. Чтобы узнать, как включить автоматическую настройку с помощью портала Azure, см. статью [Включение автоматической настройки](sql-database-automatic-tuning-enable.md).

Автоматическая настройка может работать автономно путем автоматического применения рекомендаций по настройке, включая проверки прироста производительности. 

Для большего контроля можно отключить автоматическое применение рекомендаций по настройке и применять их вручную с помощью портала Azure. Можно также использовать решение только для просмотра автоматических рекомендаций по настройке и применять их вручную, используя скрипты и средства по своему усмотрению. 

В приведенном ниже видео представлены принципы работы автоматической настройки и типичные сценарии использования.


> [!VIDEO https://channel9.msdn.com/Shows/Azure-Friday/Improve-Azure-SQL-Database-Performance-with-Automatic-Tuning/player]
>

## <a name="automatic-tuning-options"></a>Параметры автоматической настройки

Параметры автоматической настройки, доступные в базе данных SQL Azure:
 1. **Создать индекс** — для идентификации индексов, которые могут повысить производительность рабочей нагрузки, создания индексов и проверки их влияния на производительность запросов.
 2. **Удалить индекс** — для идентификации избыточных и повторяющихся индексов, а также индексов, которые не использовались долгое время.
 3. **FORCE LAST GOOD PLAN** (Принудительное выполнение последнего хорошего плана) — для идентификации SQL-запросов, использующих более медленный план выполнения по сравнению с предыдущим, и использования оптимального плана вместо регрессионного.

База данных SQL Azure определяет рекомендации для использования параметров **Создать индекс**, **Удалить индекс** и **FORCE LAST GOOD PLAN** (Принудительное выполнение последнего хорошего плана), с помощью которых можно оптимизировать базу данных, и отображает их на портале Azure. Дополнительные сведения об идентификации индексов, которые необходимо изменить, см. в статье [Использование помощника по базам данных SQL на портале Azure](sql-database-advisor-portal.md). Вы можете вручную применить рекомендации с помощью портала или разрешить базе данных SQL Azure автоматически применять эти рекомендации, отслеживать рабочие нагрузки после изменения, а затем выполнять проверку производительности рабочей нагрузки.

Параметры автоматической настройки можно включить и отключить отдельно для каждой базы данных, а также настроить на логическом сервере и применить для каждой базы данных, которая наследует параметры от сервера. Мы советуем настроить параметры автоматической настройки на сервере и задать наследование параметров от сервера, так как это упрощает управление этими параметрами для большого количества баз данных.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о том, как включить автоматическую настройку в базе данных SQL Azure, чтобы управлять рабочей нагрузкой, см. в статье [Включение автоматической настройки](sql-database-automatic-tuning-enable.md).
- Дополнительные сведения о том, как вручную проверить и применить рекомендации автоматической настройки, см. в статье [Поиск и применение рекомендаций по производительности](sql-database-advisor-portal.md).
- Дополнительные сведения о встроенном механизме аналитики, используемом для автоматической настройки, см. в записи блога [Artificial Intelligence tunes Azure SQL Databases](https://azure.microsoft.com/blog/artificial-intelligence-tunes-azure-sql-databases/) (Механизм искусственного интеллекта настраивает базы данных SQL Azure).
- Дополнительные сведения о том, как автоматическая настройка работает в базе данных SQL Azure и SQL Server 2017, см. в статье [Automatic tuning](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning) (Автоматическая настройка).
