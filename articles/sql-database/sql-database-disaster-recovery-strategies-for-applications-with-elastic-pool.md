---
title: "решения аварийного восстановления aaaDesign - базы данных SQL Azure | Документы Microsoft"
description: "Узнайте, как toodesign облачные решения для аварийного восстановления, выбрав шаблон hello правой отработки отказа."
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2db99057-0c79-4fb0-a7f1-d1c057ec787f
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/07/2017
ms.author: sashan;carlrab
ms.openlocfilehash: 9d9eca7570c7a01c992d0b33d449721709b471c3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="disaster-recovery-strategies-for-applications-using-sql-database-elastic-pools"></a><span data-ttu-id="a1ee7-103">Стратегии аварийного восстановления для приложений с использованием пула эластичных баз данных SQL</span><span class="sxs-lookup"><span data-stu-id="a1ee7-103">Disaster recovery strategies for applications using SQL Database elastic pools</span></span>
<span data-ttu-id="a1ee7-104">Hello лет мы узнали, что облачные службы не гарантирует полную надежность и произойти Неустранимая инцидентов.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-104">Over hello years we have learned that cloud services are not foolproof and catastrophic incidents happen.</span></span> <span data-ttu-id="a1ee7-105">База данных SQL предоставляет несколько возможностей tooprovide для обеспечения непрерывности бизнеса hello приложения при возникновении этих инцидентов.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-105">SQL Database provides several capabilities tooprovide for hello business continuity of your application when these incidents occur.</span></span> <span data-ttu-id="a1ee7-106">[Эластичные пулы](sql-database-elastic-pool.md) и одной базы данных поддерживают hello одинаковые возможности аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-106">[Elastic pools](sql-database-elastic-pool.md) and single databases support hello same kind of disaster recovery capabilities.</span></span> <span data-ttu-id="a1ee7-107">В этой статье представлены несколько стратегий аварийного восстановления для пулов эластичных БД, в которых используются функции обеспечения непрерывности бизнес-процессов базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-107">This article describes several DR strategies for elastic pools that leverage these SQL Database business continuity features.</span></span>

<span data-ttu-id="a1ee7-108">В этой статье используется hello следующие канонические шаблон приложения SaaS независимого поставщика программных Продуктов:</span><span class="sxs-lookup"><span data-stu-id="a1ee7-108">This article uses hello following canonical SaaS ISV application pattern:</span></span>

<span data-ttu-id="a1ee7-109"><i>Современных облачных веб-приложение передает одну базу данных SQL для каждого конечного пользователя. Hello ISV имеет большое количество клиентов и таким образом, используя несколько баз данных, известных как базы данных клиента. Поскольку базы данных клиента hello обычно имеют шаблоны непредсказуемое действие, hello ISV использует эластичного пула toomake hello базы данных цену очень прогнозируемого долгое время. Hello эластичного пула также упрощает управление производительностью hello время пиковых hello активности пользователей. В дополнение к этому приложения hello toohello клиента базы данных также использует несколько баз данных профилей пользователей toomanage, безопасности, собирать статистические характеристики интенсивности использования и т. д. Доступность hello отдельных клиентов не влияет на доступность приложения hello в целом. Однако hello доступностью и производительностью баз данных управления критическая для работы приложения hello и если базы данных управления hello всего приложения hello вне сети находится в автономном режиме.</i></span><span class="sxs-lookup"><span data-stu-id="a1ee7-109"><i>A modern cloud-based web application provisions one SQL database for each end user. hello ISV has many customers and therefore uses many databases, known as tenant databases. Because hello tenant databases typically have unpredictable activity patterns, hello ISV uses an elastic pool toomake hello database cost very predictable over extended periods of time. hello elastic pool also simplifies hello performance management when hello user activity spikes. In addition toohello tenant databases hello application also uses several databases toomanage user profiles, security, collect usage patterns etc. Availability of hello individual tenants does not impact hello application’s availability as whole. However, hello availability and performance of management databases is critical for hello application’s function and if hello management databases are offline hello entire application is offline.</i></span></span>  

<span data-ttu-id="a1ee7-110">В этой статье описываются стратегии аварийного восстановления, охватывают широкий спектр возможностей из tooones стоимость конфиденциальные запуска приложений, с требованиями строгой доступности.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-110">This article discusses DR strategies covering a range of scenarios from cost sensitive startup applications tooones with stringent availability requirements.</span></span>

## <a name="scenario-1-cost-sensitive-startup"></a><span data-ttu-id="a1ee7-111">Сценарий 1.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-111">Scenario 1.</span></span> <span data-ttu-id="a1ee7-112">Приложения с ограниченным бюджетом</span><span class="sxs-lookup"><span data-stu-id="a1ee7-112">Cost sensitive startup</span></span>
<span data-ttu-id="a1ee7-113"><i>В этом сценарии рассматривается недавно созданная компания с ограниченным бюджетом.  Я хочу toosimplify развертывания и управления ими приложения hello и возникают ограниченный соглашения об уровне ОБСЛУЖИВАНИЯ для отдельных клиентов. Однако требуется приложение hello tooensure как единое целое никогда не находится в автономном режиме.</i></span><span class="sxs-lookup"><span data-stu-id="a1ee7-113"><i>I am a startup business and am extremely cost sensitive.  I want toosimplify deployment and management of hello application and I can have a limited SLA for individual customers. But I want tooensure hello application as a whole is never offline.</i></span></span>

<span data-ttu-id="a1ee7-114">требование простоты toosatisfy hello, развертывание базы данных для всех клиентов в один эластичного пула в регионе Azure по своему усмотрению hello и развертывание баз данных управления как георепликацией одной базы данных.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-114">toosatisfy hello simplicity requirement, deploy all tenant databases into one elastic pool in hello Azure region of your choice and deploy management databases as geo-replicated single databases.</span></span> <span data-ttu-id="a1ee7-115">Для аварийного восстановления hello клиентов используйте геовосстановление, которая расположена без дополнительных затрат.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-115">For hello disaster recovery of tenants, use geo-restore, which comes at no additional cost.</span></span> <span data-ttu-id="a1ee7-116">доступность hello tooensure hello баз данных управления, репликации, их область tooanother, используя группу автоматического перехода на другой ресурс (в предварительного просмотра) (шаг 1).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-116">tooensure hello availability of hello management databases, geo-replicate them tooanother region using an auto-failover group (in-preview) (step 1).</span></span> <span data-ttu-id="a1ee7-117">Hello текущей конфигурации hello аварийного восстановления, в этом случае обходится равно toohello стоимость hello баз данных-получателей.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-117">hello ongoing cost of hello disaster recovery configuration in this scenario is equal toohello total cost of hello secondary databases.</span></span> <span data-ttu-id="a1ee7-118">Эта конфигурация показана на следующей схеме hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-118">This configuration is illustrated on hello next diagram.</span></span>

![На рисунке 1](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-1.png)

<span data-ttu-id="a1ee7-120">В случае сбоя в основном регионе hello hello toobring действия восстановления hello на следующей диаграмме показаны приложение в оперативный режим.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-120">If an outage occurs in hello primary region, hello recovery steps toobring your application online are illustrated by hello next diagram.</span></span>

* <span data-ttu-id="a1ee7-121">Hello отработки отказа группой инициирует автоматический переход области аварийного восстановления toohello базы данных управления hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-121">hello failover group initiates automatic failover of hello management database toohello DR region.</span></span> <span data-ttu-id="a1ee7-122">приложение Hello автоматически повторно подключенный toohello новый основной и все новые учетные записи и базами данных клиента создаются в области hello аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-122">hello application is automatically reconnected toohello new primary and all new accounts and tenant databases are created in hello DR region.</span></span> <span data-ttu-id="a1ee7-123">существующие заказчики Hello просматривать свои данные временно недоступны.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-123">hello existing customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="a1ee7-124">Создать эластичный пул hello с hello же конфигурации, что исходный пул hello (2).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-124">Create hello elastic pool with hello same configuration as hello original pool (2).</span></span>
* <span data-ttu-id="a1ee7-125">Используйте toocreate географическое восстановление копии базы данных клиента hello (3).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-125">Use geo-restore toocreate copies of hello tenant databases (3).</span></span> <span data-ttu-id="a1ee7-126">Можно рассмотрите возможность запуска восстановление отдельных hello соединениями hello конечным пользователем или некоторые другие схемы приоритет конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-126">You can consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>


<span data-ttu-id="a1ee7-127">На этом этапе приложение вновь подключен к сети в регионе hello аварийного восстановления, но некоторые клиенты задержка при доступе к их данным.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-127">At this point your application is back online in hello DR region, but some customers experience delay when accessing their data.</span></span>

![На рис. 2](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-2.png)

<span data-ttu-id="a1ee7-129">В случае временного сбоя hello возможна основного региона, hello восстанавливаются по Azure перед завершены все операции восстановления базы данных hello в регионе hello аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-129">If hello outage was temporary, it is possible that hello primary region is recovered by Azure before all hello database restores are complete in hello DR region.</span></span> <span data-ttu-id="a1ee7-130">В этом случае управлять скользящего hello приложения задней toohello первичного региона.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-130">In this case, orchestrate moving hello application back toohello primary region.</span></span> <span data-ttu-id="a1ee7-131">Hello занимает hello шаги показаны на следующей схеме hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-131">hello process takes hello steps illustrated on hello next diagram.</span></span>

* <span data-ttu-id="a1ee7-132">Отмена всех ожидающих запросов на геовосстановление.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-132">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="a1ee7-133">При сбое hello управления базами данных toohello основной регион (5).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-133">Fail over hello management databases toohello primary region (5).</span></span> <span data-ttu-id="a1ee7-134">После восстановления области hello hello в источниках старого автоматически стали баз данных-получателей.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-134">After hello region’s recovery, hello old primaries have automatically become secondaries.</span></span> <span data-ttu-id="a1ee7-135">Теперь они снова поменяются ролями.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-135">Now they switch roles again.</span></span> 
* <span data-ttu-id="a1ee7-136">Измените приложение hello соединения строки toopoint задней toohello первичный регион.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-136">Change hello application's connection string toopoint back toohello primary region.</span></span> <span data-ttu-id="a1ee7-137">Теперь в основном регионе hello создаются все новые учетные записи и базами данных клиента.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-137">Now all new accounts and tenant databases are created in hello primary region.</span></span> <span data-ttu-id="a1ee7-138">Для некоторых клиентов данные будут временно недоступными.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-138">Some existing customers see their data temporarily unavailable.</span></span>   
* <span data-ttu-id="a1ee7-139">Набор всех баз данных в hello DR пула только для tooread tooensure, их нельзя изменить в области hello аварийного восстановления (6).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-139">Set all databases in hello DR pool tooread-only tooensure they cannot be modified in hello DR region (6).</span></span> 
* <span data-ttu-id="a1ee7-140">Для каждой базы данных в пул аварийного восстановления, который был изменен с момента восстановления hello hello переименовать или удалить hello соответствующих баз данных в пуле основной hello (7).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-140">For each database in hello DR pool that has changed since hello recovery, rename or delete hello corresponding databases in hello primary pool (7).</span></span> 
* <span data-ttu-id="a1ee7-141">Копировать hello обновление баз данных из hello DR пула toohello основного пула (8).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-141">Copy hello updated databases from hello DR pool toohello primary pool (8).</span></span> 
* <span data-ttu-id="a1ee7-142">Удаление пула hello аварийного восстановления (9)</span><span class="sxs-lookup"><span data-stu-id="a1ee7-142">Delete hello DR pool (9)</span></span>

<span data-ttu-id="a1ee7-143">На этом этапе приложение находится в сети в основной регион hello со всех клиентов баз данных, доступных в hello основного пула.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-143">At this point your application is online in hello primary region with all tenant databases available in hello primary pool.</span></span>

![Рис. 3](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-3.png)

<span data-ttu-id="a1ee7-145">ключ Hello **преимущества** этой стратегии отличается низкой стоимостью текущего уровня избыточности данных.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-145">hello key **benefit** of this strategy is low ongoing cost for data tier redundancy.</span></span> <span data-ttu-id="a1ee7-146">Резервные копии создаются автоматически по hello служба базы данных SQL с без перезаписи приложения и без дополнительных затрат.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-146">Backups are taken automatically by hello SQL Database service with no application rewrite and at no additional cost.</span></span>  <span data-ttu-id="a1ee7-147">только в том случае, когда hello эластичной базы данных восстанавливаются связано с дополнительными затратами Hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-147">hello cost is incurred only when hello elastic databases are restored.</span></span> <span data-ttu-id="a1ee7-148">Hello **компромисс** затрачивается значительное время hello завершить восстановление всех баз данных клиента.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-148">hello **trade-off** is that hello complete recovery of all tenant databases takes significant time.</span></span> <span data-ttu-id="a1ee7-149">Hello время зависит от hello допустимое количество восстановление инициировать в hello аварийного восстановления области и общего объема hello клиента базы данных.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-149">hello length of time depends on hello total number of restores you initiate in hello DR region and overall size of hello tenant databases.</span></span> <span data-ttu-id="a1ee7-150">Даже если некоторые клиенты восстановление приоритет над другими, конкурировать с hello все другие необходимые восстановления, запущенных в hello же регионе, как служба hello управляет и регулирует toominimize hello общее влияние на заказчиков hello существующей базы данных.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-150">Even if you prioritize some tenants' restores over others, you are competing with all hello other restores that are initiated in hello same region as hello service arbitrates and throttles toominimize hello overall impact on hello existing customers' databases.</span></span> <span data-ttu-id="a1ee7-151">Кроме того hello восстановление баз данных клиента hello запуск будет невозможен до создается новый эластичный пул hello в регионе аварийного восстановления hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-151">In addition, hello recovery of hello tenant databases cannot start until hello new elastic pool in hello DR region is created.</span></span>

## <a name="scenario-2-mature-application-with-tiered-service"></a><span data-ttu-id="a1ee7-152">Сценарий 2.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-152">Scenario 2.</span></span> <span data-ttu-id="a1ee7-153">Отлаженное приложение с многоуровневой службой</span><span class="sxs-lookup"><span data-stu-id="a1ee7-153">Mature application with tiered service</span></span>
<span data-ttu-id="a1ee7-154"><i>В этом сценарии рассматривается готовое приложение SaaS с многоуровневыми службами и разными соглашениями об уровне обслуживания для пользователей бесплатной пробной версии и пользователей платной версии. Для пробной версии клиентов hello у меня есть hello tooreduce затрат, насколько возможно. Пользователи пробной версии может занять время простоя, но требуется tooreduce по вероятности. Для hello клиенты-плательщики простоев представляет угрозу рейса. Поэтому требуется, чтобы убедиться, что клиенты-плательщики всегда имеют доступ tooaccess toomake свои данные.</i></span><span class="sxs-lookup"><span data-stu-id="a1ee7-154"><i>I am a mature SaaS application with tiered service offers and different SLAs for trial customers and for paying customers. For hello trial customers, I have tooreduce hello cost as much as possible. Trial customers can take downtime but I want tooreduce its likelihood. For hello paying customers, any downtime is a flight risk. So I want toomake sure that paying customers are always able tooaccess their data.</i></span></span> 

<span data-ttu-id="a1ee7-155">toosupport в этом сценарии отдельные hello пробные клиенты из платных клиентов путем помещения их в отдельных пулах эластичных БД.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-155">toosupport this scenario, separate hello trial tenants from paid tenants by putting them into separate elastic pools.</span></span> <span data-ttu-id="a1ee7-156">Hello пробной клиенты имеют нижний eDTU на клиент и нижней соглашения об уровне ОБСЛУЖИВАНИЯ с больше времени восстановления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-156">hello trial customers have lower eDTU per tenant and lower SLA with a longer recovery time.</span></span> <span data-ttu-id="a1ee7-157">Клиенты-плательщики Hello находятся в пул с более высоким eDTU на клиент и выше соглашение об уровне ОБСЛУЖИВАНИЯ.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-157">hello paying customers are in a pool with higher eDTU per tenant and a higher SLA.</span></span> <span data-ttu-id="a1ee7-158">tooguarantee hello наименьшее время восстановления базы данных клиента hello клиенты-плательщики географически реплицируются.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-158">tooguarantee hello lowest recovery time, hello paying customers' tenant databases are geo-replicated.</span></span> <span data-ttu-id="a1ee7-159">Эта конфигурация показана на следующей схеме hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-159">This configuration is illustrated on hello next diagram.</span></span> 

![Рис. 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-4.png)

<span data-ttu-id="a1ee7-161">Как и первый сценарий hello баз данных управления hello активны довольно, использовать одну базу данных георепликацией для него (1).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-161">As in hello first scenario, hello management databases are quite active so you use a single geo-replicated database for it (1).</span></span> <span data-ttu-id="a1ee7-162">Это гарантирует hello прогнозируемую производительность для новых подписок клиента, профиль обновления и другие операции управления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-162">This ensures hello predictable performance for new customer subscriptions, profile updates, and other management operations.</span></span> <span data-ttu-id="a1ee7-163">Hello регион, в которой находятся в источниках hello баз данных управления hello является основной регион hello и hello регион, в котором находятся базы данных-получатели hello баз данных управления hello — регион, hello аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-163">hello region in which hello primaries of hello management databases reside is hello primary region and hello region in which hello secondaries of hello management databases reside is hello DR region.</span></span>

<span data-ttu-id="a1ee7-164">Hello реальную прибыль клиента базы данных имеют активных баз данных в hello «платная» Подготовка в основном регионе hello пула.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-164">hello paying customers’ tenant databases have active databases in hello “paid” pool provisioned in hello primary region.</span></span> <span data-ttu-id="a1ee7-165">Подготовьте дополнительный пул с hello точно такое же имя в области hello аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-165">Provision a secondary pool with hello same name in hello DR region.</span></span> <span data-ttu-id="a1ee7-166">Каждый клиент — дополнительный пул георепликацией toohello (2).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-166">Each tenant is geo-replicated toohello secondary pool (2).</span></span> <span data-ttu-id="a1ee7-167">Это позволит ускорить восстановление всех баз данных клиента с применением отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-167">This enables quick recovery of all tenant databases using failover.</span></span> 

<span data-ttu-id="a1ee7-168">В случае сбоя в основном регионе hello hello приложение в оперативный режим проиллюстрированы в следующей диаграмме hello toobring действия восстановления:</span><span class="sxs-lookup"><span data-stu-id="a1ee7-168">If an outage occurs in hello primary region, hello recovery steps toobring your application online are illustrated in hello next diagram:</span></span>

![Рис. 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-5.png)

* <span data-ttu-id="a1ee7-170">Выход из строя над областью hello управления базами данных toohello аварийного восстановления (3).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-170">Immediately fail over hello management databases toohello DR region (3).</span></span>
* <span data-ttu-id="a1ee7-171">Измените регион строка toopoint toohello аварийного восстановления для приложения hello соединения.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-171">Change hello application’s connection string toopoint toohello DR region.</span></span> <span data-ttu-id="a1ee7-172">Теперь в регионе аварийного восстановления hello создаются все новые учетные записи и базами данных клиента.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-172">Now all new accounts and tenant databases are created in hello DR region.</span></span> <span data-ttu-id="a1ee7-173">существующие заказчики пробной Hello просматривать свои данные временно недоступны.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-173">hello existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="a1ee7-174">Отработка отказа hello платная пула toohello баз данных клиента в область tooimmediately hello аварийного восстановления восстановите их доступность (4).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-174">Fail over hello paid tenant's databases toohello pool in hello DR region tooimmediately restore their availability (4).</span></span> <span data-ttu-id="a1ee7-175">Поскольку отработки отказа hello изменение уровня быстрого метаданных, рассмотрите возможность оптимизации которой запускается hello отдельных переход на другой ресурс по требованию соединениями hello для конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-175">Since hello failover is a quick metadata level change, consider an optimization where hello individual failovers are triggered on demand by hello end-user connections.</span></span> 
* <span data-ttu-id="a1ee7-176">Если размер eDTU пула получателей было меньше, чем основной hello hello баз данных-получателей только необходимые hello tooprocess hello Изменение емкости заносит в журнал при они были баз данных-получателей, немедленно увеличения емкости пула hello теперь tooaccommodate hello полной Рабочая нагрузка всех клиентов (5).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-176">If your secondary pool eDTU size was lower than hello primary because hello secondary databases only required hello capacity tooprocess hello change logs while they were secondaries, immediately increase hello pool capacity now tooaccommodate hello full workload of all tenants (5).</span></span> 
* <span data-ttu-id="a1ee7-177">Создайте новый эластичный пул hello с hello совпадают имя и hello же конфигурации в регионе hello аварийного восстановления баз данных заказчиков hello пробной (6).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-177">Create hello new elastic pool with hello same name and hello same configuration in hello DR region for hello trial customers' databases (6).</span></span> 
* <span data-ttu-id="a1ee7-178">После создания пула hello пробной клиентов используйте toorestore hello географическое восстановление отдельных пробной версии клиента-баз данных в новый пул hello (7).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-178">Once hello trial customers’ pool is created, use geo-restore toorestore hello individual trial tenant databases into hello new pool (7).</span></span> <span data-ttu-id="a1ee7-179">Попробуйте активации восстановление отдельных hello соединениями hello конечным пользователем или с помощью некоторых другая схема приоритет конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-179">Consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>

<span data-ttu-id="a1ee7-180">На этом этапе приложение будет включен в регионе аварийного восстановления hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-180">At this point your application is back online in hello DR region.</span></span> <span data-ttu-id="a1ee7-181">Все клиенты-плательщики имеют доступ tootheir данных во время пробной клиентов hello задержка при доступе к их данным.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-181">All paying customers have access tootheir data while hello trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="a1ee7-182">Когда восстанавливаются hello первичного региона по Azure *после* восстановления приложения hello в регионе hello аварийного восстановления, можно продолжить выполнение приложения hello в этом регионе или определить основной регион toofail toohello назад.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-182">When hello primary region is recovered by Azure *after* you have restored hello application in hello DR region you can continue running hello application in that region or you can decide toofail back toohello primary region.</span></span> <span data-ttu-id="a1ee7-183">Если восстанавливается первичный регион hello *перед* завершения процесса отработки отказа hello, рассмотрите возможность сбоя назад прямо сейчас.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-183">If hello primary region is recovered *before* hello failover process is completed, consider failing back right away.</span></span> <span data-ttu-id="a1ee7-184">Восстановление после сбоя Hello выполняет действия hello, представленный на следующей диаграмме hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-184">hello failback takes hello steps illustrated in hello next diagram:</span></span> 

![Рис. 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-6.png)

* <span data-ttu-id="a1ee7-186">Отмена всех ожидающих запросов на геовосстановление.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-186">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="a1ee7-187">Переключение баз данных управления hello (8).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-187">Fail over hello management databases (8).</span></span> <span data-ttu-id="a1ee7-188">После восстановления области hello hello старая первичная автоматически станет hello получателей.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-188">After hello region’s recovery, hello old primary automatically become hello secondary.</span></span> <span data-ttu-id="a1ee7-189">Теперь он становится hello основной еще раз.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-189">Now it becomes hello primary again.</span></span>  
* <span data-ttu-id="a1ee7-190">При сбое hello оплачена базы данных клиента (9).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-190">Fail over hello paid tenant databases (9).</span></span> <span data-ttu-id="a1ee7-191">Аналогичным образом после восстановления области hello hello в источниках старого автоматически станет hello баз данных-получателей.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-191">Similarly, after hello region’s recovery, hello old primaries automatically become hello secondaries.</span></span> <span data-ttu-id="a1ee7-192">Теперь они становятся первичные цвета hello еще раз.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-192">Now they become hello primaries again.</span></span> 
* <span data-ttu-id="a1ee7-193">Набор hello восстановить пробной версии базы данных, которые были изменены в регионе аварийного восстановления hello tooread (10).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-193">Set hello restored trial databases that have changed in hello DR region tooread-only (10).</span></span>
* <span data-ttu-id="a1ee7-194">Для каждой базы данных в пуле аварийного восстановления пользователи пробной версии hello, измененных с момента восстановления hello переименуйте или удалите соответствующую базу данных hello в hello пробной клиентов основного пула (11).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-194">For each database in hello trial customers DR pool that changed since hello recovery, rename or delete hello corresponding database in hello trial customers primary pool (11).</span></span> 
* <span data-ttu-id="a1ee7-195">Копировать hello обновление баз данных из hello DR пула toohello основного пула (12).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-195">Copy hello updated databases from hello DR pool toohello primary pool (12).</span></span> 
* <span data-ttu-id="a1ee7-196">Удаление пула hello аварийного восстановления (13)</span><span class="sxs-lookup"><span data-stu-id="a1ee7-196">Delete hello DR pool (13)</span></span> 

> [!NOTE]
> <span data-ttu-id="a1ee7-197">режим отработки отказа Hello является асинхронным.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-197">hello failover operation is asynchronous.</span></span> <span data-ttu-id="a1ee7-198">время восстановления toominimize hello, очень важно выполнять команда отработки отказа баз данных клиента hello в пакеты по крайней мере 20 баз данных.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-198">toominimize hello recovery time it is important that you execute hello tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 
> 

<span data-ttu-id="a1ee7-199">ключ Hello **преимущества** всего эта стратегия заключается в обеспечении hello наибольший соглашения об уровне ОБСЛУЖИВАНИЯ для клиенты-плательщики hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-199">hello key **benefit** of this strategy is that it provides hello highest SLA for hello paying customers.</span></span> <span data-ttu-id="a1ee7-200">Он также гарантирует, что новый пробные версии hello разблокированы, как только создан hello пробной пула аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-200">It also guarantees that hello new trials are unblocked as soon as hello trial DR pool is created.</span></span> <span data-ttu-id="a1ee7-201">Hello **компромисс** носителем, эта настройка hello совокупную стоимость hello базами данных клиента по стоимости hello hello получателей пула аварийного восстановления для оплачивается клиентов.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-201">hello **trade-off** is that this setup increases hello total cost of hello tenant databases by hello cost of hello secondary DR pool for paid customers.</span></span> <span data-ttu-id="a1ee7-202">Кроме того Если в пуле получателей hello другого размера, клиенты-плательщики hello производительности ниже после отработки отказа до hello пула в регионе hello DR завершения обновления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-202">In addition, if hello secondary pool has a different size, hello paying customers experience lower performance after failover until hello pool upgrade in hello DR region is completed.</span></span> 

## <a name="scenario-3-geographically-distributed-application-with-tiered-service"></a><span data-ttu-id="a1ee7-203">Сценарий 3.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-203">Scenario 3.</span></span> <span data-ttu-id="a1ee7-204">Географически распределенное приложение с многоуровневой службой</span><span class="sxs-lookup"><span data-stu-id="a1ee7-204">Geographically distributed application with tiered service</span></span>
<span data-ttu-id="a1ee7-205"><i>В этом сценарии рассматривается готовое приложение SaaS с многоуровневыми службами. Я требуется toooffer очень активно toomy соглашения об уровне ОБСЛУЖИВАНИЯ платная клиентов и свести к минимуму риск hello влияние при возникновении сбоев, так как даже краткие прерывания в работе может привести к неудовлетворенности клиентов. Очень важно, что hello, что клиенты-плательщики всегда иметь доступ к данным. бесплатные пробные версии Hello и соглашения об уровне ОБСЛУЖИВАНИЯ не будет предлагаться в течение пробного периода hello.</i></span><span class="sxs-lookup"><span data-stu-id="a1ee7-205"><i>I have a mature SaaS application with tiered service offers. I want toooffer a very aggressive SLA toomy paid customers and minimize hello risk of impact when outages occur because even brief interruption can cause customer dissatisfaction. It is critical that hello paying customers can always access their data. hello trials are free and an SLA is not offered during hello trial period. </i></span></span> 

<span data-ttu-id="a1ee7-206">toosupport этот сценарий, используйте три отдельных пулах эластичных БД.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-206">toosupport this scenario, use three separate elastic pools.</span></span> <span data-ttu-id="a1ee7-207">Подготовка к работе два одинакового размера пула с высокой число Edtu на базу данных в двух разных регионах toocontain hello платные клиентов базами данных клиента.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-207">Provision two equal size pools with high eDTUs per database in two different regions toocontain hello paid customers' tenant databases.</span></span> <span data-ttu-id="a1ee7-208">Hello третий пул, содержащий hello пробные клиенты могут иметь ниже число Edtu на базу данных и инициализировать в одном из двух областей hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-208">hello third pool containing hello trial tenants can have lower eDTUs per database and be provisioned in one of hello two regions.</span></span>

<span data-ttu-id="a1ee7-209">tooguarantee hello наименьшее время восстановления во время простоев, базами данных клиента hello клиенты-плательщики географически реплицируются с 50% hello баз данных-источников в каждой из областей hello двух.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-209">tooguarantee hello lowest recovery time during outages, hello paying customers' tenant databases are geo-replicated with 50% of hello primary databases in each of hello two regions.</span></span> <span data-ttu-id="a1ee7-210">Аналогичным образом в каждом регионе имеются 50% hello баз данных-получателей.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-210">Similarly, each region has 50% of hello secondary databases.</span></span> <span data-ttu-id="a1ee7-211">Таким образом, если область находится вне сети, только 50% hello платная баз данных клиентов затронуто и имели toofail.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-211">This way, if a region is offline, only 50% of hello paid customers' databases are impacted and have toofail over.</span></span> <span data-ttu-id="a1ee7-212">Hello других баз данных остаются неизменными.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-212">hello other databases remain intact.</span></span> <span data-ttu-id="a1ee7-213">Эта конфигурация проиллюстрирован в hello, следующая схема:</span><span class="sxs-lookup"><span data-stu-id="a1ee7-213">This configuration is illustrated in hello following diagram:</span></span>

![Рис. 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-7.png)

<span data-ttu-id="a1ee7-215">Как в предыдущих сценариях hello, довольно активны баз данных управления hello таким образом настройте их в одной географической репликации баз данных (1).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-215">As in hello previous scenarios, hello management databases are quite active so configure them as single geo-replicated databases (1).</span></span> <span data-ttu-id="a1ee7-216">Это обеспечит прогнозируемую производительность hello hello новые подписки клиента, обновление профиля и другие операции управления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-216">This ensures hello predictable performance of hello new customer subscriptions, profile updates and other management operations.</span></span> <span data-ttu-id="a1ee7-217">Областью является hello основной регион для баз данных управления hello и hello регион B используется для восстановления баз данных управления hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-217">Region A is hello primary region for hello management databases and hello region B is used for recovery of hello management databases.</span></span>

<span data-ttu-id="a1ee7-218">базы данных клиента Hello клиенты-плательщики также географически реплицируются, но с источников и баз данных-получателей, распределенный между областью и регион B (2).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-218">hello paying customers’ tenant databases are also geo-replicated but with primaries and secondaries split between region A and region B (2).</span></span> <span data-ttu-id="a1ee7-219">Таким образом, hello основной базы данных клиента затронут hello сбоя при сбое toohello другим областям и становятся доступными.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-219">This way, hello tenant primary databases impacted by hello outage can fail over toohello other region and become available.</span></span> <span data-ttu-id="a1ee7-220">Здравствуйте, другие половины hello базами данных клиента не влияет на всех.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-220">hello other half of hello tenant databases are not be impacted at all.</span></span> 

<span data-ttu-id="a1ee7-221">Hello на следующей диаграмме показано tootake действия восстановления hello, в случае сбоя в регионе, а.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-221">hello next diagram illustrates hello recovery steps tootake if  an outage occurs in region A.</span></span>

![Рис. 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-8.png)

* <span data-ttu-id="a1ee7-223">Немедленно при сбое tooregion баз данных управления hello B (3).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-223">Immediately fail over hello management databases tooregion B (3).</span></span>
* <span data-ttu-id="a1ee7-224">Изменить приложение hello соединения строки toopoint toohello управления базы данных в области б. Изменение hello управления базами данных toomake убедиться, что в регион B создаются новые учетные записи hello и базами данных клиента и существует найдены hello существующих баз данных клиента как хорошо.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-224">Change hello application’s connection string toopoint toohello management databases in region B. Modify hello management databases toomake sure hello new accounts and tenant databases are created in region B and hello existing tenant databases are found there as well.</span></span> <span data-ttu-id="a1ee7-225">существующие заказчики пробной Hello просматривать свои данные временно недоступны.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-225">hello existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="a1ee7-226">При сбое toopool баз данных клиента hello платная 2 в регион B tooimmediately восстановить их доступность (4).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-226">Fail over hello paid tenant's databases toopool 2 in region B tooimmediately restore their availability (4).</span></span> <span data-ttu-id="a1ee7-227">Поскольку отработки отказа hello изменение уровня быстрого метаданных, можно использовать оптимизацию которой запускается hello отдельных переход на другой ресурс по требованию соединениями hello для конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-227">Since hello failover is a quick metadata level change, you may consider an optimization where hello individual failovers are triggered on demand by hello end-user connections.</span></span> 
* <span data-ttu-id="a1ee7-228">Начиная с теперь пул 2 содержит только базы данных-источники, hello общей рабочей нагрузки в пуле возрастает hello и сразу же может увеличить его размер eDTU (5).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-228">Since now pool 2 contains only primary databases, hello total workload in hello pool increases and can immediately increase its eDTU size (5).</span></span> 
* <span data-ttu-id="a1ee7-229">Создайте новый эластичный пул hello с hello совпадают имя и hello же конфигурации в регионе hello B для заказчиков hello пробной версии базы данных (6).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-229">Create hello new elastic pool with hello same name and hello same configuration in hello region B for hello trial customers' databases (6).</span></span> 
* <span data-ttu-id="a1ee7-230">После использования hello toorestore географическое восстановление отдельных пробной версии клиента базы данных создается пул hello в пул носителей hello (7).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-230">Once hello pool is created use geo-restore toorestore hello individual trial tenant database into hello pool (7).</span></span> <span data-ttu-id="a1ee7-231">Можно рассмотрите возможность запуска восстановление отдельных hello соединениями hello конечным пользователем или некоторые другие схемы приоритет конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-231">You can consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>

> [!NOTE]
> <span data-ttu-id="a1ee7-232">режим отработки отказа Hello является асинхронным.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-232">hello failover operation is asynchronous.</span></span> <span data-ttu-id="a1ee7-233">время восстановления toominimize hello, очень важно выполнять команда отработки отказа баз данных клиента hello в пакеты по крайней мере 20 баз данных.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-233">toominimize hello recovery time, it is important that you execute hello tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 

<span data-ttu-id="a1ee7-234">На этом этапе приложение вновь подключен к сети в регионе б. Все клиенты-плательщики имеют доступ tootheir данных во время пробной клиентов hello задержка при доступе к их данным.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-234">At this point your application is back online in region B. All paying customers have access tootheir data while hello trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="a1ee7-235">При восстановлении региона A требуется toodecide, если требуется toouse регион B для пробной версии клиентов или пула пробной клиентов hello toousing восстановление после сбоя в регионе, а. Одно условие может быть % hello пробной версии клиента баз данных изменены с момента восстановления hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-235">When region A is recovered you need toodecide if you want toouse region B for trial customers or failback toousing hello trial customers pool in region A. One criteria could be hello % of trial tenant databases modified since hello recovery.</span></span> <span data-ttu-id="a1ee7-236">Независимо от того, это решение необходимо клиентов hello платных toore баланс между двумя пулами.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-236">Regardless of that decision, you need toore-balance hello paid tenants between two pools.</span></span> <span data-ttu-id="a1ee7-237">Hello следующей схеме показан процесс hello, если баз данных hello пробной версии клиента не задней tooregion A.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-237">hello next diagram illustrates hello process when hello trial tenant databases fail back tooregion A.</span></span>  

![Рис. 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-9.png)

* <span data-ttu-id="a1ee7-239">Отмените tootrial аварийного восстановления пула всех ожидающих геовосстановление запросов.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-239">Cancel all outstanding geo-restore requests tootrial DR pool.</span></span>   
* <span data-ttu-id="a1ee7-240">При сбое базы данных управления hello (8).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-240">Fail over hello management database (8).</span></span> <span data-ttu-id="a1ee7-241">После восстановления области hello старая первичная hello автоматически стало hello получателей.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-241">After hello region’s recovery, hello old primary automatically became hello secondary.</span></span> <span data-ttu-id="a1ee7-242">Теперь он становится hello основной еще раз.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-242">Now it becomes hello primary again.</span></span>  
* <span data-ttu-id="a1ee7-243">Выберите, какие базы данных клиента платной ошибкой задней toopool 1 до запуска отработки отказа tootheir баз данных-получателей (9).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-243">Select which paid tenant databases fail back toopool 1 and initiate failover tootheir secondaries (9).</span></span> <span data-ttu-id="a1ee7-244">После восстановления hello области всех баз данных в группу 1 автоматически стало баз данных-получателей.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-244">After hello region’s recovery, all databases in pool 1 automatically became secondaries.</span></span> <span data-ttu-id="a1ee7-245">Теперь половина баз данных снова становятся базами данных-источниками.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-245">Now 50% of them become primaries again.</span></span> 
* <span data-ttu-id="a1ee7-246">Уменьшите размер hello eDTU пула к 2 toohello исходный (10).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-246">Reduce hello size of pool 2 toohello original eDTU (10).</span></span>
* <span data-ttu-id="a1ee7-247">Набор всех восстановлен пробной версии баз данных в области hello B только для tooread (11).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-247">Set all restored trial databases in hello region B tooread-only (11).</span></span>
* <span data-ttu-id="a1ee7-248">Для каждой базы данных в пуле аварийного восстановления пробной версии hello, которые изменились с момента восстановления hello переименуйте или удалите соответствующую базу данных hello в пробной версии hello основного пула (12).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-248">For each database in hello trial DR pool that has changed since hello recovery, rename or delete hello corresponding database in hello trial primary pool (12).</span></span> 
* <span data-ttu-id="a1ee7-249">Копировать hello обновление баз данных из hello DR пула toohello основного пула (13).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-249">Copy hello updated databases from hello DR pool toohello primary pool (13).</span></span> 
* <span data-ttu-id="a1ee7-250">Удаление пула hello аварийного восстановления (14)</span><span class="sxs-lookup"><span data-stu-id="a1ee7-250">Delete hello DR pool (14)</span></span> 

<span data-ttu-id="a1ee7-251">ключ Hello **преимущества** эту стратегию, являются:</span><span class="sxs-lookup"><span data-stu-id="a1ee7-251">hello key **benefits** of this strategy are:</span></span>

* <span data-ttu-id="a1ee7-252">Он поддерживает hello наиболее интенсивными соглашения об уровне ОБСЛУЖИВАНИЯ для hello клиенты-плательщики так как он гарантирует, что сбоя не влияет на более 50% hello базами данных клиента.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-252">It supports hello most aggressive SLA for hello paying customers because it ensures that an outage cannot impact more than 50% of hello tenant databases.</span></span> 
* <span data-ttu-id="a1ee7-253">Он гарантирует, что новый пробные версии hello разблокированы, как можно скорее hello следа DR пул создается во время восстановления hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-253">It guarantees that hello new trials are unblocked as soon as hello trail DR pool is created during hello recovery.</span></span> 
* <span data-ttu-id="a1ee7-254">Она позволяет более эффективно использовать емкость пула hello как 50% от базы данных-получатели группы 1 и пул 2 гарантируется toobe менее активных чем hello баз данных-источников.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-254">It allows more efficient use of hello pool capacity as 50% of secondary databases in pool 1 and pool 2 are guaranteed toobe less active than hello primary databases.</span></span>

<span data-ttu-id="a1ee7-255">основной Hello **компромиссы** являются:</span><span class="sxs-lookup"><span data-stu-id="a1ee7-255">hello main **trade-offs** are:</span></span>

* <span data-ttu-id="a1ee7-256">Hello операций CRUD в базах данных управления hello иметь меньшей задержке hello конечных пользователей, подключенных tooregion A чем для конечных пользователей, подключенных hello tooregion B, выполняемые на первичной hello hello баз данных управления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-256">hello CRUD operations against hello management databases have lower latency for hello end users connected tooregion A than for hello end users connected tooregion B as they are executed against hello primary of hello management databases.</span></span>
* <span data-ttu-id="a1ee7-257">Требуются более сложные структуры базы данных управления hello.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-257">It requires more complex design of hello management database.</span></span> <span data-ttu-id="a1ee7-258">Например каждая запись клиента имеет расположение тег, который должен toobe изменен во время отработки отказа и восстановления размещения.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-258">For example, each tenant record has a location tag that needs toobe changed during failover and failback.</span></span>  
* <span data-ttu-id="a1ee7-259">Клиенты-плательщики Hello могут возникнуть скоростью, чем обычно, пока hello пула в регион B завершения обновления.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-259">hello paying customers may experience lower performance than usual until hello pool upgrade in region B is completed.</span></span> 

## <a name="summary"></a><span data-ttu-id="a1ee7-260">Сводка</span><span class="sxs-lookup"><span data-stu-id="a1ee7-260">Summary</span></span>
<span data-ttu-id="a1ee7-261">Эта статья посвящена hello стратегии аварийного восстановления для hello уровня базы данных, используемые многопользовательского приложения SaaS независимого поставщика программных Продуктов.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-261">This article focuses on hello disaster recovery strategies for hello database tier used by a SaaS ISV multi-tenant application.</span></span> <span data-ttu-id="a1ee7-262">Hello стратегия не была выбрана зависит от потребностей hello приложения hello, например модели бизнес-hello hello соглашения об уровне ОБСЛУЖИВАНИЯ должны toooffer tooyour заказчики, бюджета ограничения и т. д. Все описаны преимущества hello контуров стратегии и компромисс, могут принять обоснованное решение.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-262">hello strategy you choose is based on hello needs of hello application, such as hello business model, hello SLA you want toooffer tooyour customers, budget constraint etc. Each described strategy outlines hello benefits and trade-off so you could make an informed decision.</span></span> <span data-ttu-id="a1ee7-263">Вероятно, ваше приложение включает другие компоненты Azure.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-263">Also, your specific application likely includes other Azure components.</span></span> <span data-ttu-id="a1ee7-264">Чтобы просмотреть их руководство по непрерывности бизнеса и координировать восстановление hello hello уровня базы данных с ними.</span><span class="sxs-lookup"><span data-stu-id="a1ee7-264">So you review their business continuity guidance and orchestrate hello recovery of hello database tier with them.</span></span> <span data-ttu-id="a1ee7-265">toolearn Дополнительные сведения об управлении восстановления приложений баз данных в Azure, см. слишком[проектирование облачных решений для аварийного восстановления](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-265">toolearn more about managing recovery of database applications in Azure, refer too[Designing cloud solutions for disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>  

## <a name="next-steps"></a><span data-ttu-id="a1ee7-266">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="a1ee7-266">Next steps</span></span>
* <span data-ttu-id="a1ee7-267">toolearn о резервных копиях автоматических базы данных SQL Azure, в разделе [базы данных SQL автоматическое резервное копирование](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-267">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="a1ee7-268">Сведения об обеспечении непрерывности бизнес-процессов и возможные сценарии описаны в [обзоре непрерывности бизнес-процессов](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-268">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
* <span data-ttu-id="a1ee7-269">toolearn об использовании автоматического создания резервных копий для восстановления, в разделе [восстановление базы данных из резервных копий, инициируемых службой hello](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-269">toolearn about using automated backups for recovery, see [restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="a1ee7-270">toolearn о быстрее параметры восстановления, в разделе [активной георепликации](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-270">toolearn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md).</span></span>
* <span data-ttu-id="a1ee7-271">в разделе toolearn об использовании автоматического резервного копирования для архивации, [копирование базы данных](sql-database-copy.md).</span><span class="sxs-lookup"><span data-stu-id="a1ee7-271">toolearn about using automated backups for archiving, see [database copy](sql-database-copy.md).</span></span>

