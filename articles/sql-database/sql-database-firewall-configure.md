---
title: "правила брандмауэра базы данных SQL aaaAzure | Документы Microsoft"
description: "Узнайте, как tooconfigure SQL базы данных брандмауэра с доступом toomanage правила брандмауэра уровня сервера и уровня базы данных."
keywords: "брандмауэр базы данных"
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: ac57f84c-35c3-4975-9903-241c8059011e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 04/10/2017
ms.author: rickbyh
ms.openlocfilehash: 6a8cdf629d0d0e55421a5e9f9b894a21371be568
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-server-level-and-database-level-firewall-rules"></a><span data-ttu-id="24f3a-104">Правила брандмауэра уровня сервера и уровня базы данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="24f3a-104">Azure SQL Database server-level and database-level firewall rules</span></span> 

<span data-ttu-id="24f3a-105">База данных SQL Microsoft Azure предоставляет службу реляционных баз данных для Azure и других интернет-приложений.</span><span class="sxs-lookup"><span data-stu-id="24f3a-105">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="24f3a-106">toohelp защитить свои данные, брандмауэр не все сервера базы данных access tooyour, пока вы не укажете компьютеры, на которых есть разрешение.</span><span class="sxs-lookup"><span data-stu-id="24f3a-106">toohelp protect your data, firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="24f3a-107">Hello брандмауэр предоставляет доступ toodatabases основании hello, рассчитанные на IP-адреса каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="24f3a-107">hello firewall grants access toodatabases based on hello originating IP address of each request.</span></span>

## <a name="overview"></a><span data-ttu-id="24f3a-108">Обзор</span><span class="sxs-lookup"><span data-stu-id="24f3a-108">Overview</span></span>

<span data-ttu-id="24f3a-109">Изначально все Azure SQL server Transact-SQL доступа tooyour заблокирован брандмауэром hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-109">Initially, all Transact-SQL access tooyour Azure SQL server is blocked by hello firewall.</span></span> <span data-ttu-id="24f3a-110">toobegin с помощью сервера Azure SQL, необходимо указать одно или несколько правил брандмауэра уровня сервера, позволяющих доступ к tooyour Azure SQL server.</span><span class="sxs-lookup"><span data-stu-id="24f3a-110">toobegin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access tooyour Azure SQL server.</span></span> <span data-ttu-id="24f3a-111">Используйте toospecify правила брандмауэра hello, какой IP-адрес в диапазоне от Интернета разрешены hello и ли приложения Azure может попытаться выполнить tooconnect tooyour Azure SQL server.</span><span class="sxs-lookup"><span data-stu-id="24f3a-111">Use hello firewall rules toospecify which IP address ranges from hello Internet are allowed, and whether Azure applications can attempt tooconnect tooyour Azure SQL server.</span></span>

<span data-ttu-id="24f3a-112">tooselectively toojust доступа grant одной из баз данных hello в сервер Azure SQL, необходимо создать правило уровня базы данных для базы данных, необходимых hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-112">tooselectively grant access toojust one of hello databases in your Azure SQL server, you must create a database-level rule for hello required database.</span></span> <span data-ttu-id="24f3a-113">Укажите диапазон IP-адресов для правила брандмауэра базы данных hello, который выходит за пределы hello IP-адреса диапазона, указанного в правиле брандмауэра уровня сервера hello и убедитесь, что IP-адрес hello hello клиента находится в диапазоне hello, указанные в правиле уровня базы данных hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-113">Specify an IP address range for hello database firewall rule that is beyond hello IP address range specified in hello server-level firewall rule, and ensure that hello IP address of hello client falls in hello range specified in hello database-level rule.</span></span>

<span data-ttu-id="24f3a-114">Здравствуйте, попытки соединения из Интернета и Azure должны сначала пройти через брандмауэр hello прежде чем достигнут сервера Azure SQL или база данных SQL, как показано в hello, следующая схема:</span><span class="sxs-lookup"><span data-stu-id="24f3a-114">Connection attempts from hello Internet and Azure must first pass through hello firewall before they can reach your Azure SQL server or SQL Database, as shown in hello following diagram:</span></span>

   ![Схема, описывающая конфигурацию брандмауэра.][1]

* <span data-ttu-id="24f3a-116">**Правила брандмауэра на уровне сервера:** эти правила позволяют клиентам tooaccess всего сервера Azure SQL, то есть все базы данных hello в hello на одном логическом сервере.</span><span class="sxs-lookup"><span data-stu-id="24f3a-116">**Server-level firewall rules:** These rules enable clients tooaccess your entire Azure SQL server, that is, all hello databases within hello same logical server.</span></span> <span data-ttu-id="24f3a-117">Эти правила хранятся в hello **master** базы данных.</span><span class="sxs-lookup"><span data-stu-id="24f3a-117">These rules are stored in hello **master** database.</span></span> <span data-ttu-id="24f3a-118">Правила брандмауэра уровня сервера можно настроить с помощью портала hello, или с помощью инструкций Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="24f3a-118">Server-level firewall rules can be configured by using hello portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="24f3a-119">правила брандмауэра уровня сервера toocreate с помощью портала Azure hello или PowerShell, необходимо быть hello владельца подписки или подписки участником.</span><span class="sxs-lookup"><span data-stu-id="24f3a-119">toocreate server-level firewall rules using hello Azure portal or PowerShell, you must be hello subscription owner or a subscription contributor.</span></span> <span data-ttu-id="24f3a-120">toocreate правил брандмауэра уровня сервера с помощью Transact-SQL, необходимо подключить toohello экземпляр базы данных SQL, как имя входа субъекта серверного уровня hello или Здравствуйте, администратор Azure Active Directory (это означает, что необходимо создать правило брандмауэра уровня сервера пользователь с разрешениями уровня Azure).</span><span class="sxs-lookup"><span data-stu-id="24f3a-120">toocreate a server-level firewall rule using Transact-SQL, you must connect toohello SQL Database instance as hello server-level principal login or hello Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="24f3a-121">**Правила брандмауэра уровня базы данных:** эти правила позволяют клиентам tooaccess определенным (защищенным) баз данных в пределах hello таким же логическом сервере.</span><span class="sxs-lookup"><span data-stu-id="24f3a-121">**Database-level firewall rules:** These rules enable clients tooaccess certain (secure) databases within hello same logical server.</span></span> <span data-ttu-id="24f3a-122">Можно создать эти правила для каждой базы данных (включая hello **master** database0) и они хранятся в отдельных hello баз данных.</span><span class="sxs-lookup"><span data-stu-id="24f3a-122">You can create these rules for each database (including hello **master** database0) and they are stored in hello individual databases.</span></span> <span data-ttu-id="24f3a-123">Правила брандмауэра уровня базы данных можно настроить только с помощью инструкций Transact-SQL и только после настройки hello первый брандмауэра на уровне сервера.</span><span class="sxs-lookup"><span data-stu-id="24f3a-123">Database-level firewall rules can only be configured by using Transact-SQL statements and only after you have configured hello first server-level firewall.</span></span> <span data-ttu-id="24f3a-124">Если указать диапазон IP-адресов в правиле брандмауэра уровня базы данных hello, находится вне hello диапазона, указанного в правиле брандмауэра уровня сервера hello, только тех клиентов, которые имеют IP-адреса в диапазоне уровня базы данных hello можно доступа к базе данных hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-124">If you specify an IP address range in hello database-level firewall rule that is outside hello range specified in hello server-level firewall rule, only those clients that have IP addresses in hello database-level range can access hello database.</span></span> <span data-ttu-id="24f3a-125">Для базы данных можно задать не более 128 правил брандмауэра уровня базы данных.</span><span class="sxs-lookup"><span data-stu-id="24f3a-125">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="24f3a-126">Правила брандмауэра уровня базы данных для базы данных master и пользовательской базы данных можно создать и контролировать только с помощью Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="24f3a-126">Database-level firewall rules for master and user databases can only be created and managed through Transact-SQL.</span></span> <span data-ttu-id="24f3a-127">Дополнительные сведения о настройке правил брандмауэра уровня базы данных см. пример hello позже в этом статьи и в разделе [sp_set_database_firewall_rule (базы данных SQL Azure)](https://msdn.microsoft.com/library/dn270010.aspx).</span><span class="sxs-lookup"><span data-stu-id="24f3a-127">For more information on configuring database-level firewall rules, see hello example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="24f3a-128">**Рекомендация:** Корпорация Майкрософт рекомендует использовать правила брандмауэра уровня базы данных каждый раз, когда возможно tooenhance безопасности и toomake более переносимой базы данных.</span><span class="sxs-lookup"><span data-stu-id="24f3a-128">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible tooenhance security and toomake your database more portable.</span></span> <span data-ttu-id="24f3a-129">Использовать правила брандмауэра уровня сервера для администраторов и при наличии много баз данных, которые имеют hello же требований к доступу и не требуется времени toospend конфигурации по отдельности каждой базы данных.</span><span class="sxs-lookup"><span data-stu-id="24f3a-129">Use server-level firewall rules for administrators and when you have many databases that have hello same access requirements and you don't want toospend time configuring each database individually.</span></span>

> [!Note]
> <span data-ttu-id="24f3a-130">Сведения о переносимой базы данных в контексте hello непрерывности бизнеса см. в разделе [требования проверки подлинности для аварийного восстановления](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="24f3a-130">For information about portable databases in hello context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-hello-internet"></a><span data-ttu-id="24f3a-131">Подключение из Интернета hello</span><span class="sxs-lookup"><span data-stu-id="24f3a-131">Connecting from hello Internet</span></span>

<span data-ttu-id="24f3a-132">Когда компьютер пытается tooconnect tooyour базы данных сервера из hello Интернета, брандмауэр hello сначала проверяет hello, рассчитанные на IP-адреса запроса hello с правилами брандмауэра уровня базы данных hello, для базы данных hello, запрашивающего подключение hello:</span><span class="sxs-lookup"><span data-stu-id="24f3a-132">When a computer attempts tooconnect tooyour database server from hello Internet, hello firewall first checks hello originating IP address of hello request against hello database-level firewall rules, for hello database that hello connection is requesting:</span></span>

* <span data-ttu-id="24f3a-133">Если в одном из диапазонов hello, указанных в правилах брандмауэра уровня базы данных hello hello IP-адреса запроса hello, hello предоставляется возможность подключения toohello базы данных SQL, содержащего правило hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-133">If hello IP address of hello request is within one of hello ranges specified in hello database-level firewall rules, hello connection is granted toohello SQL Database that contains hello rule.</span></span>
* <span data-ttu-id="24f3a-134">Если IP-адреса hello hello запроса не в одном из диапазонов hello, указанным в правиле брандмауэра уровня базы данных hello, проверяются правила брандмауэра уровня сервера hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-134">If hello IP address of hello request is not within one of hello ranges specified in hello database-level firewall rule, hello server-level firewall rules are checked.</span></span> <span data-ttu-id="24f3a-135">Если в одном из диапазонов hello, указанных в правилах брандмауэра уровня сервера hello hello IP-адреса запроса hello, предоставляется возможность подключения hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-135">If hello IP address of hello request is within one of hello ranges specified in hello server-level firewall rules, hello connection is granted.</span></span> <span data-ttu-id="24f3a-136">Tooall баз данных SQL применяются правила брандмауэра уровня сервера на сервере Azure SQL hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-136">Server-level firewall rules apply tooall SQL databases on hello Azure SQL server.</span></span>  
* <span data-ttu-id="24f3a-137">Если IP-адреса hello hello запроса находится за пределами hello диапазонов, указанных в hello уровня базы данных или правила брандмауэра уровня сервера, происходит сбой запроса подключения hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-137">If hello IP address of hello request is not within hello ranges specified in any of hello database-level or server-level firewall rules, hello connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="24f3a-138">tooaccess базы данных SQL Azure с локального компьютера, убедитесь, что hello брандмауэр сети и локального компьютера разрешает исходящие соединения через TCP-порт 1433.</span><span class="sxs-lookup"><span data-stu-id="24f3a-138">tooaccess Azure SQL Database from your local computer, ensure hello firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="24f3a-139">Подключение из Azure</span><span class="sxs-lookup"><span data-stu-id="24f3a-139">Connecting from Azure</span></span>
<span data-ttu-id="24f3a-140">необходимо включить tooallow приложений с Azure tooconnect tooyour Azure SQL server, соединения с Azure.</span><span class="sxs-lookup"><span data-stu-id="24f3a-140">tooallow applications from Azure tooconnect tooyour Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="24f3a-141">Когда приложение из Azure пытается tooconnect tooyour базы данных сервера, hello брандмауэр проверяет, что разрешены соединения с Azure.</span><span class="sxs-lookup"><span data-stu-id="24f3a-141">When an application from Azure attempts tooconnect tooyour database server, hello firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="24f3a-142">Параметр брандмауэра с начальный и конечный адреса равно too0.0.0.0 указывает, что эти соединения разрешены.</span><span class="sxs-lookup"><span data-stu-id="24f3a-142">A firewall setting with starting and ending address equal too0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="24f3a-143">Если попытка соединения hello не разрешена, hello запроса не достигает сервера базы данных SQL Azure hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-143">If hello connection attempt is not allowed, hello request does not reach hello Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="24f3a-144">Этот параметр настраивает брандмауэр tooallow hello все подключения от Azure подключений, включая из подписок hello других клиентов.</span><span class="sxs-lookup"><span data-stu-id="24f3a-144">This option configures hello firewall tooallow all connections from Azure including connections from hello subscriptions of other customers.</span></span> <span data-ttu-id="24f3a-145">Если при выборе этого параметра убедитесь, что имя входа и разрешения пользователя ограничить доступ tooonly авторизованных пользователей.</span><span class="sxs-lookup"><span data-stu-id="24f3a-145">When selecting this option, make sure your login and user permissions limit access tooonly authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="24f3a-146">Создание правил брандмауэра и управление ими</span><span class="sxs-lookup"><span data-stu-id="24f3a-146">Creating and managing firewall rules</span></span>
<span data-ttu-id="24f3a-147">Hello первый параметр брандмауэра уровня сервера можно создать, используя hello [портал Azure](https://portal.azure.com/) или программным путем, используя [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), или hello [API-интерфейса REST](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span><span class="sxs-lookup"><span data-stu-id="24f3a-147">hello first server-level firewall setting can be created using hello [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), or hello [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="24f3a-148">Последующие правила брандмауэра уровня сервера можно создавать и контролировать с помощью этих методов и Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="24f3a-148">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="24f3a-149">Правила брандмауэра уровня базы данных можно создавать только с помощью Transact-SQL. То же самое касается и управления ими.</span><span class="sxs-lookup"><span data-stu-id="24f3a-149">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="24f3a-150">tooimprove производительности на уровне базы данных hello временно кэшируется правила брандмауэра на уровне сервера.</span><span class="sxs-lookup"><span data-stu-id="24f3a-150">tooimprove performance, server-level firewall rules are temporarily cached at hello database level.</span></span> <span data-ttu-id="24f3a-151">кэш hello toorefresh, в разделе [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="24f3a-151">toorefresh hello cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="24f3a-152">Можно использовать [аудита базы данных SQL](sql-database-auditing.md) tooaudit брандмауэра уровня сервера и уровня базы данных изменений.</span><span class="sxs-lookup"><span data-stu-id="24f3a-152">You can use [SQL Database Auditing](sql-database-auditing.md) tooaudit server-level and database-level firewall changes.</span></span>
>

### <a name="azure-portal"></a><span data-ttu-id="24f3a-153">Портал Azure</span><span class="sxs-lookup"><span data-stu-id="24f3a-153">Azure portal</span></span>

<span data-ttu-id="24f3a-154">tooset правила брандмауэра уровня сервера в hello портал Azure, вы можете перейти страница обзора toohello страницы Общие сведения о базе данных или hello Azure SQL для логического сервера базы данных Azure.</span><span class="sxs-lookup"><span data-stu-id="24f3a-154">tooset a server-level firewall rule in hello Azure portal, you can either go toohello Overview page for your Azure SQL database or hello Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="24f3a-155">См. в разделе [Создание базы данных с использованием hello портал Azure](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="24f3a-155">For a tutorial, see [Create a DB using hello Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="24f3a-156">**На странице обзора базы данных**</span><span class="sxs-lookup"><span data-stu-id="24f3a-156">**From database overview page**</span></span>

1. <span data-ttu-id="24f3a-157">tooset правила брандмауэра уровня сервера на основе страница обзора hello базы данных, нажмите кнопку **установить брандмауэр сервера** на hello инструментов, как показано в hello после изображения: hello **параметры брандмауэра** страница hello SQL Откроется сервер базы данных.</span><span class="sxs-lookup"><span data-stu-id="24f3a-157">tooset a server-level firewall rule from hello database overview page, click **Set server firewall** on hello toolbar as shown in hello following image: hello **Firewall settings** page for hello SQL Database server opens.</span></span>

      ![правило брандмауэра для сервера](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="24f3a-159">Нажмите кнопку **добавить IP-адрес клиента** на hello инструментов tooadd hello IP-адрес компьютера hello используют в настоящее время и нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="24f3a-159">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="24f3a-160">Для текущего IP-адреса будет создано правило брандмауэра уровня сервера.</span><span class="sxs-lookup"><span data-stu-id="24f3a-160">A server-level firewall rule is created for your current IP address.</span></span>

      ![Настройка правила брандмауэра для сервера](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="24f3a-162">**На странице обзора сервера**</span><span class="sxs-lookup"><span data-stu-id="24f3a-162">**From server overview page**</span></span>

<span data-ttu-id="24f3a-163">Hello страница общих сведений для server открывается, показывающая вы полностью hello доменное имя сервера (таких как **mynewserver20170403.database.windows.net**) и предоставляет параметры для дальнейшей настройки.</span><span class="sxs-lookup"><span data-stu-id="24f3a-163">hello overview page for your server opens, showing you hello fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="24f3a-164">Щелкните tooset правило уровня сервера на странице Общие сведения о сервере **брандмауэра** в левом меню hello в списке параметров, как показано в hello после изображения:</span><span class="sxs-lookup"><span data-stu-id="24f3a-164">tooset a server-level rule from server overview page, click **Firewall** in hello left-hand menu under Settings as showed in hello following image:</span></span> 

     ![Общие сведения о логическом сервере](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="24f3a-166">Нажмите кнопку **добавить IP-адрес клиента** на hello инструментов tooadd hello IP-адрес компьютера hello используют в настоящее время и нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="24f3a-166">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="24f3a-167">Для текущего IP-адреса будет создано правило брандмауэра уровня сервера.</span><span class="sxs-lookup"><span data-stu-id="24f3a-167">A server-level firewall rule is created for your current IP address.</span></span>

     ![Настройка правила брандмауэра для сервера](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

### <a name="transact-sql"></a><span data-ttu-id="24f3a-169">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="24f3a-169">Transact-SQL</span></span>
| <span data-ttu-id="24f3a-170">Представление каталога или хранимая процедура</span><span class="sxs-lookup"><span data-stu-id="24f3a-170">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="24f3a-171">Уровень</span><span class="sxs-lookup"><span data-stu-id="24f3a-171">Level</span></span> | <span data-ttu-id="24f3a-172">Описание</span><span class="sxs-lookup"><span data-stu-id="24f3a-172">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="24f3a-173">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="24f3a-173">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="24f3a-174">сервер;</span><span class="sxs-lookup"><span data-stu-id="24f3a-174">Server</span></span> |<span data-ttu-id="24f3a-175">Отображает текущие правила брандмауэра уровня сервера hello</span><span class="sxs-lookup"><span data-stu-id="24f3a-175">Displays hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="24f3a-176">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="24f3a-176">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="24f3a-177">сервер;</span><span class="sxs-lookup"><span data-stu-id="24f3a-177">Server</span></span> |<span data-ttu-id="24f3a-178">Создает или обновляет правила брандмауэра уровня сервера</span><span class="sxs-lookup"><span data-stu-id="24f3a-178">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="24f3a-179">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="24f3a-179">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="24f3a-180">сервер;</span><span class="sxs-lookup"><span data-stu-id="24f3a-180">Server</span></span> |<span data-ttu-id="24f3a-181">Удаляет правила брандмауэра уровня сервера</span><span class="sxs-lookup"><span data-stu-id="24f3a-181">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="24f3a-182">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="24f3a-182">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="24f3a-183">База данных</span><span class="sxs-lookup"><span data-stu-id="24f3a-183">Database</span></span> |<span data-ttu-id="24f3a-184">Отображает текущие правила брандмауэра уровня базы данных hello</span><span class="sxs-lookup"><span data-stu-id="24f3a-184">Displays hello current database-level firewall rules</span></span> |
| [<span data-ttu-id="24f3a-185">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="24f3a-185">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="24f3a-186">База данных</span><span class="sxs-lookup"><span data-stu-id="24f3a-186">Database</span></span> |<span data-ttu-id="24f3a-187">Создает или обновляет правила брандмауэра уровня базы данных hello</span><span class="sxs-lookup"><span data-stu-id="24f3a-187">Creates or updates hello database-level firewall rules</span></span> |
| [<span data-ttu-id="24f3a-188">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="24f3a-188">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="24f3a-189">Базы данных</span><span class="sxs-lookup"><span data-stu-id="24f3a-189">Databases</span></span> |<span data-ttu-id="24f3a-190">Удаляет правила брандмауэра на уровне базы данных</span><span class="sxs-lookup"><span data-stu-id="24f3a-190">Removes database-level firewall rules</span></span> |


<span data-ttu-id="24f3a-191">Hello следующие примеры просматривать существующие правила hello, включить диапазон IP-адресов на сервере hello Contoso и удаляет правило брандмауэра:</span><span class="sxs-lookup"><span data-stu-id="24f3a-191">hello following examples review hello existing rules, enable a range of IP addresses on hello server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="24f3a-192">Добавьте правило брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="24f3a-192">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="24f3a-193">toodelete правило брандмауэра уровня сервера, выполните hello sp_delete_firewall_rule хранимой процедуры.</span><span class="sxs-lookup"><span data-stu-id="24f3a-193">toodelete a server-level firewall rule, execute hello sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="24f3a-194">Hello следующий пример удаляет hello правило с именем ContosoFirewallRule:</span><span class="sxs-lookup"><span data-stu-id="24f3a-194">hello following example deletes hello rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

### <a name="azure-powershell"></a><span data-ttu-id="24f3a-195">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="24f3a-195">Azure PowerShell</span></span>
| <span data-ttu-id="24f3a-196">Командлет</span><span class="sxs-lookup"><span data-stu-id="24f3a-196">Cmdlet</span></span> | <span data-ttu-id="24f3a-197">Уровень</span><span class="sxs-lookup"><span data-stu-id="24f3a-197">Level</span></span> | <span data-ttu-id="24f3a-198">Описание</span><span class="sxs-lookup"><span data-stu-id="24f3a-198">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="24f3a-199">Get-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="24f3a-199">Get-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546731.aspx) |<span data-ttu-id="24f3a-200">сервер;</span><span class="sxs-lookup"><span data-stu-id="24f3a-200">Server</span></span> |<span data-ttu-id="24f3a-201">Возвращает текущие правила брандмауэра уровня сервера hello</span><span class="sxs-lookup"><span data-stu-id="24f3a-201">Returns hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="24f3a-202">New-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="24f3a-202">New-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546724.aspx) |<span data-ttu-id="24f3a-203">сервер;</span><span class="sxs-lookup"><span data-stu-id="24f3a-203">Server</span></span> |<span data-ttu-id="24f3a-204">Создает новое правило брандмауэра уровня сервера</span><span class="sxs-lookup"><span data-stu-id="24f3a-204">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="24f3a-205">Set-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="24f3a-205">Set-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546739.aspx) |<span data-ttu-id="24f3a-206">сервер;</span><span class="sxs-lookup"><span data-stu-id="24f3a-206">Server</span></span> |<span data-ttu-id="24f3a-207">Обновляет свойства hello существующего правила брандмауэра на уровне сервера</span><span class="sxs-lookup"><span data-stu-id="24f3a-207">Updates hello properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="24f3a-208">Remove-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="24f3a-208">Remove-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546727.aspx) |<span data-ttu-id="24f3a-209">сервер;</span><span class="sxs-lookup"><span data-stu-id="24f3a-209">Server</span></span> |<span data-ttu-id="24f3a-210">Удаляет правила брандмауэра уровня сервера</span><span class="sxs-lookup"><span data-stu-id="24f3a-210">Removes server-level firewall rules</span></span> |


<span data-ttu-id="24f3a-211">Следующий пример Hello задает правила брандмауэра уровня сервера, с помощью PowerShell:</span><span class="sxs-lookup"><span data-stu-id="24f3a-211">hello following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="24f3a-212">Примеры PowerShell в контексте hello быстрого запуска см. в разделе [создать база данных — PowerShell](sql-database-get-started-powershell.md) и [создать одну базу данных и настроить правила брандмауэра с помощью PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="24f3a-212">For PowerShell examples in hello context of a quick start, see [Create DB - PowerShell](sql-database-get-started-powershell.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

### <a name="azure-cli"></a><span data-ttu-id="24f3a-213">Инфраструктура CLI Azure</span><span class="sxs-lookup"><span data-stu-id="24f3a-213">Azure CLI</span></span>
| <span data-ttu-id="24f3a-214">Командлет</span><span class="sxs-lookup"><span data-stu-id="24f3a-214">Cmdlet</span></span> | <span data-ttu-id="24f3a-215">Уровень</span><span class="sxs-lookup"><span data-stu-id="24f3a-215">Level</span></span> | <span data-ttu-id="24f3a-216">Описание</span><span class="sxs-lookup"><span data-stu-id="24f3a-216">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="24f3a-217">az sql server firewall create</span><span class="sxs-lookup"><span data-stu-id="24f3a-217">az sql server firewall create</span></span>](/cli/azure/sql/server/firewall-rule#create) | <span data-ttu-id="24f3a-218">Создает брандмауэра правило tooallow доступа tooall баз данных SQL на сервере hello из hello ввести диапазон IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="24f3a-218">Creates a firewall rule tooallow access tooall SQL Databases on hello server from hello entered IP address range.</span></span>|
| [<span data-ttu-id="24f3a-219">az sql server firewall delete</span><span class="sxs-lookup"><span data-stu-id="24f3a-219">az sql server firewall delete</span></span>](/cli/azure/sql/server/firewall-rule#delete)| <span data-ttu-id="24f3a-220">Удаляет правило брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="24f3a-220">Deletes a firewall rule.</span></span>|
| [<span data-ttu-id="24f3a-221">az sql server firewall list</span><span class="sxs-lookup"><span data-stu-id="24f3a-221">az sql server firewall list</span></span>](/cli/azure/sql/server/firewall-rule#list)| <span data-ttu-id="24f3a-222">Список правил брандмауэра hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-222">Lists hello firewall rules.</span></span>|
| [<span data-ttu-id="24f3a-223">az sql server firewall rule show</span><span class="sxs-lookup"><span data-stu-id="24f3a-223">az sql server firewall rule show</span></span>](/cli/azure/sql/server/firewall-rule#show)| <span data-ttu-id="24f3a-224">Отображает подробные сведения hello правила брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="24f3a-224">Shows hello details of a firewall rule.</span></span>|
| [<span data-ttu-id="24f3a-225">ax sql server firewall rule update</span><span class="sxs-lookup"><span data-stu-id="24f3a-225">ax sql server firewall rule update</span></span>](/cli/azure/sql/server/firewall-rule#update)| <span data-ttu-id="24f3a-226">Обновляет правило брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="24f3a-226">Updates a firewall rule.</span></span>

<span data-ttu-id="24f3a-227">Следующий пример Hello задает правила брандмауэра уровня сервера, с помощью hello Azure CLI:</span><span class="sxs-lookup"><span data-stu-id="24f3a-227">hello following example sets a server-level firewall rule using hello Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="24f3a-228">Пример Azure CLI в контексте hello краткого руководства см. в разделе [создать DDB - Azure CLI](sql-database-get-started-cli.md) и [создать одну базу данных и настроить правило брандмауэра с помощью hello Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="24f3a-228">For an Azure CLI example in hello context of a quick start, see [Create DDB - Azure CLI](sql-database-get-started-cli.md) and [Create a single database and configure a firewall rule using hello Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

### <a name="rest-api"></a><span data-ttu-id="24f3a-229">Интерфейс REST API</span><span class="sxs-lookup"><span data-stu-id="24f3a-229">REST API</span></span>
| <span data-ttu-id="24f3a-230">API</span><span class="sxs-lookup"><span data-stu-id="24f3a-230">API</span></span> | <span data-ttu-id="24f3a-231">Уровень</span><span class="sxs-lookup"><span data-stu-id="24f3a-231">Level</span></span> | <span data-ttu-id="24f3a-232">Описание</span><span class="sxs-lookup"><span data-stu-id="24f3a-232">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="24f3a-233">Вывод списка правил брандмауэра</span><span class="sxs-lookup"><span data-stu-id="24f3a-233">List Firewall Rules</span></span>](https://msdn.microsoft.com/library/azure/dn505715.aspx) |<span data-ttu-id="24f3a-234">сервер;</span><span class="sxs-lookup"><span data-stu-id="24f3a-234">Server</span></span> |<span data-ttu-id="24f3a-235">Отображает текущие правила брандмауэра уровня сервера hello</span><span class="sxs-lookup"><span data-stu-id="24f3a-235">Displays hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="24f3a-236">Создание правила брандмауэра</span><span class="sxs-lookup"><span data-stu-id="24f3a-236">Create Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505712.aspx) |<span data-ttu-id="24f3a-237">сервер;</span><span class="sxs-lookup"><span data-stu-id="24f3a-237">Server</span></span> |<span data-ttu-id="24f3a-238">Создает или обновляет правила брандмауэра уровня сервера</span><span class="sxs-lookup"><span data-stu-id="24f3a-238">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="24f3a-239">Задание правила брандмауэра</span><span class="sxs-lookup"><span data-stu-id="24f3a-239">Set Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505707.aspx) |<span data-ttu-id="24f3a-240">сервер;</span><span class="sxs-lookup"><span data-stu-id="24f3a-240">Server</span></span> |<span data-ttu-id="24f3a-241">Обновляет свойства hello существующего правила брандмауэра на уровне сервера</span><span class="sxs-lookup"><span data-stu-id="24f3a-241">Updates hello properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="24f3a-242">Удаление правила брандмауэра</span><span class="sxs-lookup"><span data-stu-id="24f3a-242">Delete Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505706.aspx) |<span data-ttu-id="24f3a-243">сервер;</span><span class="sxs-lookup"><span data-stu-id="24f3a-243">Server</span></span> |<span data-ttu-id="24f3a-244">Удаляет правила брандмауэра уровня сервера</span><span class="sxs-lookup"><span data-stu-id="24f3a-244">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="24f3a-245">Сравнение правила брандмауэра уровня сервера и правила брандмауэра уровня базы данных</span><span class="sxs-lookup"><span data-stu-id="24f3a-245">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="24f3a-246">В.</span><span class="sxs-lookup"><span data-stu-id="24f3a-246">Q.</span></span> <span data-ttu-id="24f3a-247">Необходимо ли полностью изолировать пользователей одной базы данных от пользователей другой базы данных ?</span><span class="sxs-lookup"><span data-stu-id="24f3a-247">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="24f3a-248">Если да, то предоставьте доступ с помощью правил брандмауэра уровня базы данных.</span><span class="sxs-lookup"><span data-stu-id="24f3a-248">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="24f3a-249">Это позволяет избежать использования правил брандмауэра на уровне сервера, которые разрешают доступ через брандмауэр hello баз данных tooall, уменьшить глубину hello защиты.</span><span class="sxs-lookup"><span data-stu-id="24f3a-249">This avoids using server-level firewall rules, which permit access through hello firewall tooall databases, reducing hello depth of your defenses.</span></span>   
 
<span data-ttu-id="24f3a-250">В.</span><span class="sxs-lookup"><span data-stu-id="24f3a-250">Q.</span></span> <span data-ttu-id="24f3a-251">Пользователей по IP-адресу hello требуется доступ к базам данных tooall?</span><span class="sxs-lookup"><span data-stu-id="24f3a-251">Do users at hello IP address’s need access tooall databases?</span></span>   
  <span data-ttu-id="24f3a-252">Используйте правила брандмауэра уровня сервера tooreduce номера hello раз, необходимо настроить правила брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="24f3a-252">Use server-level firewall rules tooreduce hello number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="24f3a-253">В.</span><span class="sxs-lookup"><span data-stu-id="24f3a-253">Q.</span></span> <span data-ttu-id="24f3a-254">Hello пользователя или группы, Настройка правил брандмауэра hello только у доступ через hello портал Azure, PowerShell или hello API-интерфейса REST?</span><span class="sxs-lookup"><span data-stu-id="24f3a-254">Does hello person or team configuring hello firewall rules only have access through hello Azure portal, PowerShell, or hello REST API?</span></span>   
  <span data-ttu-id="24f3a-255">Необходимо использовать правила брандмауэра уровня сервера.</span><span class="sxs-lookup"><span data-stu-id="24f3a-255">You must use server-level firewall rules.</span></span> <span data-ttu-id="24f3a-256">Правила брандмауэра уровня базы данных можно настроить только с помощью Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="24f3a-256">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="24f3a-257">В.</span><span class="sxs-lookup"><span data-stu-id="24f3a-257">Q.</span></span> <span data-ttu-id="24f3a-258">Hello пользователя или группы, Настройка правил брандмауэра hello запрещено от необходимости высокого уровня разрешений на уровне базы данных hello?</span><span class="sxs-lookup"><span data-stu-id="24f3a-258">Is hello person or team configuring hello firewall rules prohibited from having high-level permission at hello database level?</span></span>   
  <span data-ttu-id="24f3a-259">Используйте правила брандмауэра уровня сервера.</span><span class="sxs-lookup"><span data-stu-id="24f3a-259">Use server-level firewall rules.</span></span> <span data-ttu-id="24f3a-260">Настройка правил брандмауэра уровня базы данных, с помощью Transact-SQL, требуется по крайней мере `CONTROL DATABASE` разрешение на уровне базы данных hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-260">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at hello database level.</span></span>  

<span data-ttu-id="24f3a-261">В.</span><span class="sxs-lookup"><span data-stu-id="24f3a-261">Q.</span></span> <span data-ttu-id="24f3a-262">— Hello пользователя или рабочей группы, аудит правил брандмауэра hello, или настройка дает возможность централизованно управлять правилами брандмауэра для многих (например, 100) баз данных?</span><span class="sxs-lookup"><span data-stu-id="24f3a-262">Is hello person or team configuring or auditing hello firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="24f3a-263">Это зависит от ваших потребностей и среды.</span><span class="sxs-lookup"><span data-stu-id="24f3a-263">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="24f3a-264">Правила брандмауэра уровня сервера может быть проще tooconfigure, но сценариев можно настроить правила для hello уровня базы данных.</span><span class="sxs-lookup"><span data-stu-id="24f3a-264">Server-level firewall rules might be easier tooconfigure, but scripting can configure rules at hello database-level.</span></span> <span data-ttu-id="24f3a-265">И даже при использовании правил брандмауэра уровня сервера, может потребоваться правила брандмауэра базы данных hello tooaudit, toosee при пользователей с `CONTROL` разрешения для базы данных hello создания правил брандмауэра уровня базы данных.</span><span class="sxs-lookup"><span data-stu-id="24f3a-265">And even if you use server-level firewall rules, you might need tooaudit hello database-firewall rules, toosee if users with `CONTROL` permission on hello database have created database-level firewall rules.</span></span>   

<span data-ttu-id="24f3a-266">В.</span><span class="sxs-lookup"><span data-stu-id="24f3a-266">Q.</span></span> <span data-ttu-id="24f3a-267">Можно ли одновременно использовать правила брандмауэра уровня сервера и уровня базы данных?</span><span class="sxs-lookup"><span data-stu-id="24f3a-267">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="24f3a-268">Да.</span><span class="sxs-lookup"><span data-stu-id="24f3a-268">Yes.</span></span> <span data-ttu-id="24f3a-269">Некоторым пользователям, например администраторам, требуются правила брандмауэра уровня сервера.</span><span class="sxs-lookup"><span data-stu-id="24f3a-269">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="24f3a-270">А другим пользователям, например пользователям приложения базы данных, необходимы правила брандмауэра уровня базы данных.</span><span class="sxs-lookup"><span data-stu-id="24f3a-270">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-hello-database-firewall"></a><span data-ttu-id="24f3a-271">Устранение неполадок брандмауэра hello базы данных</span><span class="sxs-lookup"><span data-stu-id="24f3a-271">Troubleshooting hello database firewall</span></span>
<span data-ttu-id="24f3a-272">Примите во внимание при toohello доступ службы баз данных SQL Microsoft Azure работать не так, как предполагается, что следующие точки hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-272">Consider hello following points when access toohello Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="24f3a-273">**Конфигурация локального брандмауэра:** перед компьютер может получить доступ к базе данных SQL Azure, может потребоваться toocreate исключение брандмауэра на компьютере для TCP-порт 1433.</span><span class="sxs-lookup"><span data-stu-id="24f3a-273">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need toocreate a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="24f3a-274">При создании соединения внутри границ облако Azure hello возможно tooopen дополнительные порты.</span><span class="sxs-lookup"><span data-stu-id="24f3a-274">If you are making connections inside hello Azure cloud boundary, you may have tooopen additional ports.</span></span> <span data-ttu-id="24f3a-275">Дополнительные сведения см. в разделе hello **базы данных SQL: за пределами vs внутри** раздел [порты за пределами 1433 для ADO.NET 4.5 и базы данных SQL](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="24f3a-275">For more information, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="24f3a-276">**Преобразование сетевых адресов (NAT):** tooNAT заказа, используемый tooAzure tooconnect ваш компьютер, база данных SQL может отличаться от hello IP-адреса, показанного в настройках конфигурации IP компьютера hello IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="24f3a-276">**Network address translation (NAT):** Due tooNAT, hello IP address used by your computer tooconnect tooAzure SQL Database may be different than hello IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="24f3a-277">tooview hello IP-адрес, на компьютере с помощью tooconnect tooAzure, войдите в портал toohello и перейдите toohello **Настройка** вкладку на приветствия сервера, на котором размещены базы данных.</span><span class="sxs-lookup"><span data-stu-id="24f3a-277">tooview hello IP address your computer is using tooconnect tooAzure, log in toohello portal and navigate toohello **Configure** tab on hello server that hosts your database.</span></span> <span data-ttu-id="24f3a-278">В разделе hello **разрешенные IP-адреса** статьи, hello **текущий IP-адрес клиента** отображается.</span><span class="sxs-lookup"><span data-stu-id="24f3a-278">Under hello **Allowed IP Addresses** section, hello **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="24f3a-279">Нажмите кнопку **добавить** toohello **разрешенные IP-адреса** tooallow сервер hello tooaccess этого компьютера.</span><span class="sxs-lookup"><span data-stu-id="24f3a-279">Click **Add** toohello **Allowed IP Addresses** tooallow this computer tooaccess hello server.</span></span>
* <span data-ttu-id="24f3a-280">**Список разрешенных toohello изменения не вступили в силу еще:** может быть как больше пяти минут задержки для изменения toohello базы данных SQL Azure брандмауэра конфигурации tootake эффект.</span><span class="sxs-lookup"><span data-stu-id="24f3a-280">**Changes toohello allow list have not taken effect yet:** There may be as much as a five-minute delay for changes toohello Azure SQL Database firewall configuration tootake effect.</span></span>
* <span data-ttu-id="24f3a-281">**Hello входа не имеет прав или неправильный пароль был использован:** Если имя входа не имеет разрешений на сервере базы данных SQL Azure hello или неверен пароль hello, сервер базы данных SQL Azure toohello подключения hello запрещен.</span><span class="sxs-lookup"><span data-stu-id="24f3a-281">**hello login is not authorized or an incorrect password was used:** If a login does not have permissions on hello Azure SQL Database server or hello password used is incorrect, hello connection toohello Azure SQL Database server is denied.</span></span> <span data-ttu-id="24f3a-282">Только создания параметра брандмауэра предоставляет клиентам возможность tooattempt подключении tooyour серверу; Каждый клиент должен предоставить необходимые учетные записи hello.</span><span class="sxs-lookup"><span data-stu-id="24f3a-282">Creating a firewall setting only provides clients with an opportunity tooattempt connecting tooyour server; each client must provide hello necessary security credentials.</span></span> <span data-ttu-id="24f3a-283">Дополнительные сведения о подготовке имен входа см. в разделе "Управление базами данных, именами входа и пользователями в базе данных SQL Azure".</span><span class="sxs-lookup"><span data-stu-id="24f3a-283">For more information about preparing logins, see Managing Databases, Logins, and Users in Azure SQL Database.</span></span>
* <span data-ttu-id="24f3a-284">**Динамический IP-адрес:** при наличии подключения к Интернету с динамическим IP-адресов и испытываете проблемы с прохождением через брандмауэр hello, может воспользоваться hello следующие решения:</span><span class="sxs-lookup"><span data-stu-id="24f3a-284">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through hello firewall, you could try one of hello following solutions:</span></span>
  
  * <span data-ttu-id="24f3a-285">Попросите поставщика услуг Интернета (ISP) для hello диапазон IP-адресов, назначенных tooyour клиентских компьютеров, сервер базы данных SQL Azure hello доступа, а затем добавьте hello диапазон IP-адресов в качестве правила брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="24f3a-285">Ask your Internet Service Provider (ISP) for hello IP address range assigned tooyour client computers that access hello Azure SQL Database server, and then add hello IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="24f3a-286">Получить статический IP-адреса для клиентских компьютеров, а затем задать hello IP-адреса в правила брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="24f3a-286">Get static IP addressing instead for your client computers, and then add hello IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="24f3a-287">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="24f3a-287">Next steps</span></span>

- <span data-ttu-id="24f3a-288">Чтобы быстро приступить к созданию правила брандмауэра уровня сервера и уровня базы данных, ознакомьтесь со статьей [Создание базы данных SQL Azure на портале Azure](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="24f3a-288">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="24f3a-289">Для подключения базы данных Azure SQL tooan с открытым исходным кодом или сторонние приложения обратитесь к статье [tooSQL базы данных примеров кода краткое клиента](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span><span class="sxs-lookup"><span data-stu-id="24f3a-289">For help in connecting tooan Azure SQL database from open source or third-party applications, see [Client quick-start code samples tooSQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="24f3a-290">Сведения о дополнительных портов, может потребоваться tooopen см hello **базы данных SQL: за пределами vs внутри** раздел [порты за пределами 1433 для ADO.NET 4.5 и базы данных SQL](sql-database-develop-direct-route-ports-adonet-v12.md)</span><span class="sxs-lookup"><span data-stu-id="24f3a-290">For information on additional ports that you may need tooopen, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="24f3a-291">Общие сведения о методах защиты в базе данных SQL Azure см. в [этой статье](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="24f3a-291">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png
