---
title: "aaaResolving T-SQL базы данных SQL различия миграции Azure | Документы Microsoft"
description: "Инструкции Transact-SQL, которые не полностью поддерживаются в базе данных SQL Azure"
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: c05abd9e-28a7-4c97-9bdf-bc60d08fc92e
ms.service: sql-database
ms.custom: load & move data
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 03/17/2017
ms.author: rickbyh
ms.openlocfilehash: 3852013338bfdc6c7da9d1d879c54781682bc635
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="resolving-transact-sql-differences-during-migration-toosql-database"></a>Разрешение различий Transact-SQL во время миграции tooSQL базы данных   
Когда [миграцию базы данных](sql-database-cloud-migrate.md) из SQL Server tooAzure SQL Server, вы можете заметить, что база данных требует некоторых перепроектирования перед hello SQL Server могут быть перенесены. Этот раздел содержит tooassist рекомендации, которые при выполнении повторного проектирования и основные сведения о базовой причин, почему hello hello перепроектирования не требуется. Несовместимость toodetect использовать hello [данных помощник по миграции (DMA)](https://www.microsoft.com/download/details.aspx?id=53595).

## <a name="overview"></a>Обзор
Большинство функций Transact-SQL, используемых приложениями, полностью поддерживаются как в Microsoft SQL Server, так и в базе данных SQL Azure. Например hello основных компонентов SQL, таких как типы данных, операторы, строки, арифметические, логические и функции работы с курсорами, одинаково работать в SQL Server и базы данных SQL. Но существует несколько различий T-SQL между элементами DDL (языка определения данных) и элементами DML (языка манипулирования данными), использование которых приводит к формированию частично поддерживаемых инструкций и запросов T-SQL (будет рассматриваться далее в этом разделе).

Кроме того некоторые функции и синтаксис, который не поддерживается на всех так как база данных SQL Azure разработан tooisolate функций из зависимостей от базы данных master hello и hello операционной системы. Поэтому многие действия на уровне сервера не подходят для базы данных SQL. Инструкции и параметры T-SQL недоступны, если они используются для настройки параметров серверного уровня, компонентов операционной системы, а также для задания конфигурации файловой системы. Если требуются такие возможности, их часто можно заменить соответствующими альтернативами, доступными в базе данных SQL или другой службе (компоненте) Azure. 

Например высокий уровень доступности встроены в Azure, поэтому Настройка Always On не требуется (хотя можно tooconfigure активной георепликации для быстрые темпы восстановления hello для события сбоя). Таким образом инструкции T-SQL, связанные с tooavailability группы не поддерживаются в базе данных SQL hello динамического административного представления связанных tooAlways на также не поддерживается.

Список функций hello, которые поддерживаются и не поддерживается в базе данных SQL, в разделе [сравнение функций базы данных SQL Azure](sql-database-features.md). Список Hello на этой странице дополняет этого раздела правила и функции и основное внимание уделяется инструкции Transact-SQL.

## <a name="transact-sql-syntax-statements-with-partial-differences"></a>Инструкции синтаксиса Transact-SQL с частичными различиями
инструкции DDL (языка описания данных) core Hello доступны, но имеют некоторые инструкции языка DDL расширения связанных toodisk размещения и неподдерживаемых функций. 

- У инструкций CREATE и ALTER DATABASE есть три десятка параметров. операторы Hello содержат размещение файлов, файловых ПОТОКОВ и параметры компонента service broker, применяются только tooSQL сервера. Это может не иметь значения при создании базы данных до миграции, но при переносе кода T-SQL, создающий базы данных следует сравнить [CREATE DATABASE (база данных SQL Azure)](https://msdn.microsoft.com/library/dn268335.aspx) с синтаксисом SQL Server hello в [создать Базы данных (SQL Server Transact-SQL)](https://msdn.microsoft.com/library/ms176061.aspx) toomake убедиться, что поддерживаются все параметры hello, вы используете. Создание базы данных для базы данных SQL Azure также имеет цель службы и параметры гибкого масштабирования, которые применяются только tooSQL базы данных.
- инструкции CREATE и ALTER TABLE Hello имеют FileTable параметры, которые нельзя использовать в базе данных SQL, так как FILESTREAM не поддерживается.
- Поддерживаются инструкции CREATE и ALTER login, но база данных SQL не предоставляет все параметры hello. toomake стимулирует более переносимыми database база данных SQL с помощью пользователей автономной базы данных вместо имен входа, когда это возможно. Дополнительные сведения см. в разделах [CREATE/ALTER LOGIN](https://msdn.microsoft.com/library/ms189828.aspx) и [Предоставление доступа к базе данных и управление им](https://docs.microsoft.com/azure/sql-database/sql-database-manage-logins).

## <a name="transact-sql-syntax-not-supported-in-sql-database"></a>Синтаксис Transact-SQL, не поддерживаемый в базе данных SQL   
В дополнение к этому toohello связанные инструкции tooTransact SQL неподдерживаемые функции, описанные в [сравнение функций базы данных SQL Azure](sql-database-features.md), hello следующие инструкции и групп инструкций, не поддерживаются. Таким образом, если миграция toobe вашей базы данных использует hello следующих функций, переделать вашей tooeliminate T-SQL эти функции T-SQL и инструкций.

- Параметры сортировки системных объектов
- Связанные с подключением: инструкции ENDPOINT, `ORIGINAL_DB_NAME`. База данных SQL не поддерживает проверку подлинности Windows, но поддерживает hello, аналогичную проверку подлинности Azure Active Directory. Некоторые типы проверки подлинности требуется последняя версия SSMS hello. Дополнительные сведения см. в разделе [tooSQL подключение базы данных или SQL данные хранилища с использованием Azure Active Directory проверки подлинности](sql-database-aad-authentication.md).
- Межбазовые запросы с помощью имен из трех или четырех частей. (Межбазовые запросы только для чтения поддерживаются с помощью [запроса к эластичной базе данных](sql-database-elastic-query-overview.md).)
- Межбазовые цепочки владения, параметр `TRUSTWORTHY`.
- `DATABASEPROPERTY` (вместо него следует использовать `DATABASEPROPERTYEX`).
- `EXECUTE AS LOGIN` (вместо него следует использовать EXECUTE AS USER).
- Шифрование не поддерживается, за исключением расширенного управления ключами.
- Отправка событий: события, уведомления о событиях, уведомления о запросах.
- Размещение файлов: синтаксиса, связанные с размещением файла toodatabase, размер файлов базы данных, которыми автоматически управляет Microsoft Azure.
- Высокий уровень доступности: синтаксис, связанный toohigh доступности, которые управляются с помощью учетной записи Microsoft Azure. Например, синтаксис, используемый для резервного копирования, восстановления, AlwaysOn, зеркального отображения базы данных, доставки журналов и режимов восстановления.
- Средство чтения журнала: синтаксис, который использует средство чтения журнала hello, которая недоступна в базе данных SQL: Принудительная репликация, отслеживание изменений в данных. База данных SQL может выступать подписчиком принудительной репликации.
- Функции: `fn_get_sql`, `fn_virtualfilestats`, `fn_virtualservernodes`.
- Глобальные временные таблицы
- Оборудование: Синтаксис связанные параметры сервера, связанные с toohardware: таких как память, рабочие потоки, сходство ЦП, флаги трассировки. Вместо них используйте уровни обслуживания.
- `HAS_DBACCESS`
- `KILL STATS JOB`
- `OPENQUERY`, `OPENROWSET`, `OPENDATASOURCE` и четырехкомпонентные имена.
- .NET Framework: интеграция SQL Server со средой CLR.
- Семантический поиск
- Учетные данные сервера: вместо них используйте [учетные данные для базы данных](https://msdn.microsoft.com/library/mt270260.aspx).
- Элементы серверного уровня: роли сервера, `IS_SRVROLEMEMBER`, `sys.login_token`. Элементы `GRANT`, `REVOKE` и `DENY` в разрешениях серверного уровня недоступны, хотя некоторые заменяются разрешениями уровня базы данных. Некоторые полезные динамические административные представления серверного уровня имеют эквивалентные динамические административные представления уровня базы данных.
- `SET REMOTE_PROC_TRANSACTIONS`
- `SHUTDOWN`
- `sp_addmessage`
- Параметры `sp_configure` и инструкция `RECONFIGURE`. Некоторые параметры доступны в инструкции [ALTER DATABASE SCOPED CONFIGURATION](https://msdn.microsoft.com/library/mt629158.aspx).
- `sp_helpuser`
- `sp_migrate_user_to_contained`
- Агент SQL Server: Синтаксис, который полагается на hello агента SQL Server или hello базы данных MSDB: оповещения, операторы, центральные серверы управления. Вместо этого используйте скрипты, например Azure PowerShell.
- Подсистема аудита SQL Server: вместо нее следует использовать аудит базы данных SQL.
- Трассировка SQL Server
- Флаги трассировки: флаг трассировки, некоторые элементы были перемещены toocompatibility режимы.
- Отладка Transact-SQL
- Триггеры: уровня сервера или триггеры входа
- `USE`инструкции: toochange hello базы данных контекста tooa другой базы данных, необходимо внести новые соединения toohello новую базу данных.

## <a name="full-transact-sql-reference"></a>Полный справочник по Transact-SQL
Дополнительные сведения о грамматике языка Transact-SQL, его использовании и примеры см. в [справочнике по Transact-SQL (компонент Database Engine)](https://msdn.microsoft.com/library/bb510741.aspx) в электронной документации по SQL Server. 

### <a name="about-hello-applies-to-tags"></a>О тегах «Относится к» hello
Hello Справочник по Transact-SQL включает tooSQL связанные разделы сервера версии 2008 toohello присутствует. Под названиями hello имеется панели значков, листинг hello четырех платформ SQL Server и является признаком того, применимости. Например, группы доступности появились в SQL Server 2012. [Создание группы ДОСТУПНОСТИ](https://msdn.microsoft.com/library/ff878399.aspx) раздела указывает, что инструкция hello применяется к **SQL Server (начиная с 2012)**. Инструкция Hello не применяется tooSQL Server 2008, SQL Server 2008 R2, база данных SQL Azure, хранилище данных SQL Azure или Parallel Data Warehouse.

В некоторых случаях можно использовать общие тема раздела hello в продукте, но есть небольшие отличия между продуктами. различия Hello, отображаются в средние точки в разделе hello соответствующим образом. В некоторых случаях можно использовать общие тема раздела hello в продукте, но есть небольшие отличия между продуктами. различия Hello, отображаются в средние точки в разделе hello соответствующим образом. Пример hello CREATE TRIGGER раздел доступен в базе данных SQL. Но hello **ALL SERVER** для триггеров уровня сервера, указывает, что триггеры уровня сервера не может использоваться в базе данных SQL. Вместо них следует использовать триггеры уровня базы данных.

## <a name="next-steps"></a>Дальнейшие действия

Список функций hello, которые поддерживаются и не поддерживается в базе данных SQL, в разделе [сравнение функций базы данных SQL Azure](sql-database-features.md). Список Hello на этой странице дополняет этого раздела правила и функции и основное внимание уделяется инструкции Transact-SQL.

