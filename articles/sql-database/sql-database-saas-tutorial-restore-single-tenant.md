---
title: "aaaRestore базе данных Azure SQL в приложении несколькими клиентами | Документы Microsoft"
description: "Узнайте, как toorestore один клиенты SQL базы данных после случайного удаления данных"
keywords: "руководство по базе данных sql"
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: billgib;sstein
ms.openlocfilehash: 8507ecec2424c135f1859b88ebf2bb4e17538a58
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="restore-a-wingtip-saas-tenants-sql-database"></a><span data-ttu-id="80722-104">Восстановление базы данных SQL клиентов SaaS Wingtip</span><span class="sxs-lookup"><span data-stu-id="80722-104">Restore a Wingtip SaaS tenants SQL database</span></span>

<span data-ttu-id="80722-105">приложение Wingtip SaaS Hello строится с помощью модели базы данных каждого клиента, где каждый клиент имеет собственную базу данных.</span><span class="sxs-lookup"><span data-stu-id="80722-105">hello Wingtip SaaS app is built using a database-per-tenant model, where each tenant has their own database.</span></span> <span data-ttu-id="80722-106">Одно из преимуществ hello этой модели — что он является простой toorestore данных одного клиента в изоляции без ущерба для других клиентов.</span><span class="sxs-lookup"><span data-stu-id="80722-106">One of hello benefits of this model is that it is easy toorestore a single tenant’s data in isolation without impacting other tenants.</span></span>

<span data-ttu-id="80722-107">В этом руководстве рассматривается два шаблона восстановления данных:</span><span class="sxs-lookup"><span data-stu-id="80722-107">In this tutorial you learn two data recovery patterns:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="80722-108">восстановление базы данных в параллельную базу данных (параллельное восстановление);</span><span class="sxs-lookup"><span data-stu-id="80722-108">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="80722-109">восстановить базу данных "на месте".</span><span class="sxs-lookup"><span data-stu-id="80722-109">Restore a database in place</span></span>


|||
|:--|:--|
| <span data-ttu-id="80722-110">**Восстановление предыдущей точки tooa клиента времени в параллельных базу данных**</span><span class="sxs-lookup"><span data-stu-id="80722-110">**Restore tenant tooa prior point in time, into a parallel database**</span></span> | <span data-ttu-id="80722-111">Этот шаблон может использоваться клиентом hello для проверки, аудита, соответствия, т. д., исходное hello база данных остается в сети и без изменений.</span><span class="sxs-lookup"><span data-stu-id="80722-111">This pattern can be used by hello tenant for review, auditing, compliance, etc. hello original database remains online and unchanged.</span></span> |
| <span data-ttu-id="80722-112">**Восстановление клиента "на месте"**</span><span class="sxs-lookup"><span data-stu-id="80722-112">**Restore tenant in-place**</span></span> | <span data-ttu-id="80722-113">Этот шаблон является типовыми toorecover точку предыдущего tooa клиента времени после клиента случайно удалил данные.</span><span class="sxs-lookup"><span data-stu-id="80722-113">This pattern is typically used toorecover a tenant tooa prior point in time, after a tenant accidentally deletes data.</span></span> <span data-ttu-id="80722-114">Hello исходной базы данных в автономный и заменены hello восстановленной базы данных.</span><span class="sxs-lookup"><span data-stu-id="80722-114">hello original database is taken offline, and replaced with hello restored database.</span></span> |
|||

<span data-ttu-id="80722-115">toocomplete завершения этого учебника, убедитесь, что hello следующие предварительные требования:</span><span class="sxs-lookup"><span data-stu-id="80722-115">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="80722-116">приложение Wingtip SaaS Hello развертывается.</span><span class="sxs-lookup"><span data-stu-id="80722-116">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="80722-117">toodeploy менее чем за пять минут. в разделе [развертывание и просмотр приложения Wingtip SaaS hello](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="80722-117">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="80722-118">Установите Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="80722-118">Azure PowerShell is installed.</span></span> <span data-ttu-id="80722-119">Дополнительные сведения см. в статье [Начало работы с Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).</span><span class="sxs-lookup"><span data-stu-id="80722-119">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toohello-saas-tenant-restore-pattern"></a><span data-ttu-id="80722-120">Введение toohello SaaS клиента восстановления шаблон</span><span class="sxs-lookup"><span data-stu-id="80722-120">Introduction toohello SaaS tenant restore pattern</span></span>

<span data-ttu-id="80722-121">Для клиента hello восстановление шаблон, есть два простых подхода для восстановления данных отдельного клиента.</span><span class="sxs-lookup"><span data-stu-id="80722-121">For hello tenant restore pattern, there are two simple patterns for restoring an individual tenant's data.</span></span> <span data-ttu-id="80722-122">Так как базы данных клиента изолированы, восстановление одного клиента не влияет на данные других клиентов.</span><span class="sxs-lookup"><span data-stu-id="80722-122">Because tenant databases are isolated from each other, restoring one tenant has no impact on any other tenant's data.</span></span>

<span data-ttu-id="80722-123">В первом шаблоне hello данные восстанавливаются в новую базу данных.</span><span class="sxs-lookup"><span data-stu-id="80722-123">In hello first pattern, data is restored into a new database.</span></span> <span data-ttu-id="80722-124">Hello клиента предоставляется доступ к базе данных toothis вместе с их рабочими данными.</span><span class="sxs-lookup"><span data-stu-id="80722-124">hello tenant is then given access toothis database alongside their production data.</span></span> <span data-ttu-id="80722-125">Этот шаблон позволяет admin tooreview hello восстановления данных клиента и использовать его tooselectively перезаписать текущие значения данных.</span><span class="sxs-lookup"><span data-stu-id="80722-125">This pattern allows a tenant admin tooreview hello restored data and potentially use it tooselectively overwrite current data values.</span></span> <span data-ttu-id="80722-126">Он работает toohello SaaS приложения конструктора toodetermine как сложных hello параметры должны быть восстановления данных.</span><span class="sxs-lookup"><span data-stu-id="80722-126">It's up toohello SaaS app designer toodetermine just how sophisticated hello data recovery options should be.</span></span> <span data-ttu-id="80722-127">Не может tooreview данных в состояние hello, в котором она находилась в в определенный момент времени может быть все, что является обязательным в некоторых сценариях.</span><span class="sxs-lookup"><span data-stu-id="80722-127">Simply being able tooreview data in hello state it was in at a given point in time may be all that is required in some scenarios.</span></span> <span data-ttu-id="80722-128">Если база данных hello использует [георепликации](sql-database-geo-replication-overview.md), мы рекомендуем копирование hello необходимых данных из копии восстановить hello в исходной базе данных hello.</span><span class="sxs-lookup"><span data-stu-id="80722-128">If hello database uses [geo-replication](sql-database-geo-replication-overview.md), we recommend copying hello required data from hello restored copy into hello original database.</span></span> <span data-ttu-id="80722-129">При замене hello исходной базы данных с базой данных восстановления hello, требуется tooreconfigure и повторная синхронизация географической репликации.</span><span class="sxs-lookup"><span data-stu-id="80722-129">If you replace hello original database with hello restored database, you need tooreconfigure and resynchronize geo-replication.</span></span>

<span data-ttu-id="80722-130">В hello второй шаблон, который имеет этот клиент hello произошла потеря или повреждение данных, восстанавливается рабочей базы данных клиента hello tooa предыдущий момент времени.</span><span class="sxs-lookup"><span data-stu-id="80722-130">In hello second pattern, which assumes that hello tenant has suffered a loss or corruption of data, hello tenant’s production database is restored tooa prior point in time.</span></span> <span data-ttu-id="80722-131">Во время восстановления hello в месте шаблон клиента hello переводится в автономный режим на короткое время во время hello базы данных восстановлена и переведена в режим в сети.</span><span class="sxs-lookup"><span data-stu-id="80722-131">In hello restore in place pattern, hello tenant is taken offline for a brief time while hello database is restored and brought back online.</span></span> <span data-ttu-id="80722-132">Hello исходная база данных удаляется, но по-прежнему могут быть восстановлены из при необходимости назад tooan toogo даже более раннего момента времени.</span><span class="sxs-lookup"><span data-stu-id="80722-132">hello original database is deleted, but can still be restored from if you need toogo back tooan even earlier point in time.</span></span> <span data-ttu-id="80722-133">Разновидность этот шаблон может переименовать hello базы данных, а не удаляйте его, несмотря на то, что переименование базы данных hello предлагает никаких дополнительных преимуществ с точки зрения безопасности данных.</span><span class="sxs-lookup"><span data-stu-id="80722-133">A variation of this pattern could rename hello database instead of deleting it, although renaming hello database offers no additional advantage in terms of data security.</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="80722-134">Получение скриптов приложения Wingtip hello</span><span class="sxs-lookup"><span data-stu-id="80722-134">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="80722-135">Hello Wingtip SaaS скриптов и исходный код приложения были доступны в hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) в репозитории github.</span><span class="sxs-lookup"><span data-stu-id="80722-135">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="80722-136">[Действия скриптов Wingtip SaaS hello toodownload](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="80722-136">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="simulate-a-tenant-accidentally-deleting-data"></a><span data-ttu-id="80722-137">Моделирование случайного удаления данных клиента</span><span class="sxs-lookup"><span data-stu-id="80722-137">Simulate a tenant accidentally deleting data</span></span>

<span data-ttu-id="80722-138">toodemonstrate эти сценарии восстановления необходимо слишком*случайно* удалить некоторые данные в одной из баз данных клиента hello.</span><span class="sxs-lookup"><span data-stu-id="80722-138">toodemonstrate these recovery scenarios, we need too*accidentally* delete some data in one of hello tenant databases.</span></span> <span data-ttu-id="80722-139">При удалении любой записи нарушения ссылочной целостности быть заблокирован hello следующий шаг настраивает toonot Демонстрация hello!</span><span class="sxs-lookup"><span data-stu-id="80722-139">While you can delete any record, hello next step sets up hello demo toonot get blocked by referential integrity violations!</span></span> <span data-ttu-id="80722-140">Он также добавляет некоторые данные покупку билета, можно использовать позже в hello *Wingtip SaaS Analytics учебники*.</span><span class="sxs-lookup"><span data-stu-id="80722-140">It also adds some ticket purchase data you can use later in hello *Wingtip SaaS Analytics tutorials*.</span></span>

<span data-ttu-id="80722-141">Выполнить скрипт генератор билет hello и создать дополнительные данные.</span><span class="sxs-lookup"><span data-stu-id="80722-141">Run hello ticket generator script and create additional data.</span></span> <span data-ttu-id="80722-142">Генератор билет Hello намеренно не приобрели билетов для каждого события последнего клиентов.</span><span class="sxs-lookup"><span data-stu-id="80722-142">hello ticket generator intentionally does not purchase tickets for each tenants last event.</span></span>

1. <span data-ttu-id="80722-143">Открыть... \\Модулей обучения\\программы\\*Демонстрация TicketGenerator.ps1* в hello *интегрированной среды Сценариев PowerShell*</span><span class="sxs-lookup"><span data-stu-id="80722-143">Open ...\\Learning Modules\\Utilities\\*Demo-TicketGenerator.ps1* in hello *PowerShell ISE*</span></span>
1. <span data-ttu-id="80722-144">Нажмите клавишу **F5** toorun hello скрипта и создания клиентов и билета данные о продажах.</span><span class="sxs-lookup"><span data-stu-id="80722-144">Press **F5** toorun hello script and generate customers and ticket sales data.</span></span>


### <a name="open-hello-events-app-tooreview-hello-current-events"></a><span data-ttu-id="80722-145">Откройте hello события приложения tooreview hello текущих событий</span><span class="sxs-lookup"><span data-stu-id="80722-145">Open hello Events app tooreview hello current events</span></span>

1. <span data-ttu-id="80722-146">Откройте hello *концентратора событий* (http://events.wtp.&lt; пользователь&gt;. trafficmanager.net) и нажмите кнопку **Hall совместно Contoso**:</span><span class="sxs-lookup"><span data-stu-id="80722-146">Open hello *Events Hub* (http://events.wtp.&lt;user&gt;.trafficmanager.net) and click **Contoso Concert Hall**:</span></span>

   ![Концентратор событий](media/sql-database-saas-tutorial-restore-single-tenant/events-hub.png)

1. <span data-ttu-id="80722-148">Прокрутите список событий hello и запишите hello последнего события в списке hello:</span><span class="sxs-lookup"><span data-stu-id="80722-148">Scroll hello list of events and make a note of hello last event in hello list:</span></span>

   ![Последнее событие](media/sql-database-saas-tutorial-restore-single-tenant/last-event.png)


### <a name="run-hello-demo-scenario-tooaccidentally-delete-hello-last-event"></a><span data-ttu-id="80722-150">Запустите hello демонстрационный сценарий tooaccidentally delete hello последнего события</span><span class="sxs-lookup"><span data-stu-id="80722-150">Run hello demo scenario tooaccidentally delete hello last event</span></span>

1. <span data-ttu-id="80722-151">Открыть... \\Модулей обучения\\непрерывности и аварийного восстановления\\RestoreTenant\\*Демонстрация RestoreTenant.ps1* в hello *интегрированной среды Сценариев PowerShell*, и набор hello следующие значения:</span><span class="sxs-lookup"><span data-stu-id="80722-151">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\*Demo-RestoreTenant.ps1* in hello *PowerShell ISE*, and set hello following value:</span></span>
   * <span data-ttu-id="80722-152">**$DemoScenario** = **1**, задайте слишком**1** -удалить события без продаж билета.</span><span class="sxs-lookup"><span data-stu-id="80722-152">**$DemoScenario** = **1**, Set too**1** - Delete events with no ticket sales.</span></span>
1. <span data-ttu-id="80722-153">Нажмите клавишу **F5** toorun hello скрипта и удаление последнего события hello.</span><span class="sxs-lookup"><span data-stu-id="80722-153">Press **F5** toorun hello script and delete hello last event.</span></span> <span data-ttu-id="80722-154">Вы увидите подтверждение сообщения аналогичные toohello следующее:</span><span class="sxs-lookup"><span data-stu-id="80722-154">You should see a confirmation message similar toohello following:</span></span>

   ```Console
   Deleting unsold events from Contoso Concert Hall ...
   Deleted event 'Seriously Strauss' from Contoso Concert Hall venue.
   ```

1. <span data-ttu-id="80722-155">Откроется страница событий Contoso Hello.</span><span class="sxs-lookup"><span data-stu-id="80722-155">hello Contoso events page opens.</span></span> <span data-ttu-id="80722-156">Прокрутите вниз и убедитесь, что событие hello удаляется.</span><span class="sxs-lookup"><span data-stu-id="80722-156">Scroll down and verify hello event is gone.</span></span> <span data-ttu-id="80722-157">Если по-прежнему в списке hello событие hello, щелкните "Обновить" и убедитесь, что он удаляется.</span><span class="sxs-lookup"><span data-stu-id="80722-157">If hello event is still in hello list, click refresh and verify it is gone.</span></span>

   ![Последнее событие](media/sql-database-saas-tutorial-restore-single-tenant/last-event-deleted.png)


## <a name="restore-a-tenant-database-in-parallel-with-hello-production-database"></a><span data-ttu-id="80722-159">Восстановление базы данных клиента параллельно с hello рабочей базы данных</span><span class="sxs-lookup"><span data-stu-id="80722-159">Restore a tenant database in parallel with hello production database</span></span>

<span data-ttu-id="80722-160">В этом упражнении производится восстановление hello базы данных Contoso совместно Hall tooa на момент времени перед hello событие было удалено.</span><span class="sxs-lookup"><span data-stu-id="80722-160">This exercise restores hello Contoso Concert Hall database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="80722-161">После удаления события hello в предыдущих шагах hello необходимо toorecover и просматривать данные удалены hello.</span><span class="sxs-lookup"><span data-stu-id="80722-161">After hello event is deleted in hello previous steps, you want toorecover and see hello deleted data.</span></span> <span data-ttu-id="80722-162">Не требуется toorestore рабочей базы данных с записью hello удалены, но необходимо toorecover hello старой базы данных tooaccess hello старые данные по другим причинам бизнеса.</span><span class="sxs-lookup"><span data-stu-id="80722-162">You don't need toorestore your production database with hello deleted record, but you need toorecover hello old database tooaccess hello old data for other business reasons.</span></span>

 <span data-ttu-id="80722-163">Hello *восстановления TenantInParallel.ps1* сценарий создает параллельных клиента базы данных и параллельной записи каталога оба с именем *ContosoConcertHall\_старый*.</span><span class="sxs-lookup"><span data-stu-id="80722-163">hello *Restore-TenantInParallel.ps1* script creates a parallel tenant database, and a parallel catalog entry both named *ContosoConcertHall\_old*.</span></span> <span data-ttu-id="80722-164">Этот шаблон лучше всего подходит для восстановления после незначительной потери данных или сценариев восстановления данных с обеспечением соответствия требованиям и аудита.</span><span class="sxs-lookup"><span data-stu-id="80722-164">This pattern of restore is best suited for recovering from a minor data loss or for compliance and auditing recovery scenarios.</span></span> <span data-ttu-id="80722-165">Это рекомендованный подход, при использовании hello [георепликации](sql-database-geo-replication-overview.md).</span><span class="sxs-lookup"><span data-stu-id="80722-165">It is also hello recommended approach when you are using [geo-replication](sql-database-geo-replication-overview.md).</span></span>

1. <span data-ttu-id="80722-166">Полный hello [имитировать пользователя случайное удаление данных](#simulate-a-tenant-accidentally-deleting-data) раздела.</span><span class="sxs-lookup"><span data-stu-id="80722-166">Complete hello [simulate a user accidentally deleting data](#simulate-a-tenant-accidentally-deleting-data) section.</span></span>
1. <span data-ttu-id="80722-167">Открыть... \\Модулей обучения\\непрерывности и аварийного восстановления\\RestoreTenant\\_Демонстрация RestoreTenant.ps1_ в hello *интегрированной среды Сценариев PowerShell*.</span><span class="sxs-lookup"><span data-stu-id="80722-167">Open ...\\Learning Modules\\Business Continuity and Disaster Recovery\\RestoreTenant\\_Demo-RestoreTenant.ps1_ in hello *PowerShell ISE*.</span></span>
1. <span data-ttu-id="80722-168">Задать **$DemoScenario** = **2**, установите это слишком**2** слишком*восстановления клиента в параллельном режиме*.</span><span class="sxs-lookup"><span data-stu-id="80722-168">Set **$DemoScenario** = **2**, Set this too**2** too*Restore tenant in parallel*.</span></span>
1. <span data-ttu-id="80722-169">Нажмите клавишу **F5** toorun hello скрипта.</span><span class="sxs-lookup"><span data-stu-id="80722-169">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="80722-170">Hello скрипта восстанавливает hello клиента (база данных tooa параллельных) tooa точки времени до удаления события hello в предыдущем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="80722-170">hello script restores hello tenant database (tooa parallel database) tooa point in time before you deleted hello event in hello previous section.</span></span> <span data-ttu-id="80722-171">Она создает вторую базу данных, удаляет все существующие метаданные каталога, который существует в этой базе данных, а также добавляет каталог toohello hello базы данных в списке hello *ContosoConcertHall\_старый* входа.</span><span class="sxs-lookup"><span data-stu-id="80722-171">It creates a second database, removes any existing catalog metadata that exists in this database, and adds hello database toohello catalog under hello *ContosoConcertHall\_old* entry.</span></span>

<span data-ttu-id="80722-172">скрипт демонстрации Hello открывает страницу события hello в браузере.</span><span class="sxs-lookup"><span data-stu-id="80722-172">hello demo script opens hello events page in your browser.</span></span> <span data-ttu-id="80722-173">Примечание с URL-адреса hello: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` , это является передача данных из базы данных восстановлена hello где *_old* добавляется имя toohello.</span><span class="sxs-lookup"><span data-stu-id="80722-173">Note from hello URL: ```http://events.wtp.&lt;user&gt;.trafficmanager.net/contosoconcerthall_old``` that this is showing data from hello restored database where *_old* is added toohello name.</span></span>

<span data-ttu-id="80722-174">Прокрутки hello событий, перечисленных в браузере tooconfirm hello, hello событий, удаленные в предыдущем разделе hello был восстановлен.</span><span class="sxs-lookup"><span data-stu-id="80722-174">Scroll hello events listed in hello browser tooconfirm that hello event deleted in hello previous section has been restored.</span></span>

<span data-ttu-id="80722-175">Обратите внимание этому предоставление клиенту hello восстановить как маловероятно, что toobe, как можно будет обеспечить данных toorestored доступа клиента, но служит tooeasily иллюстрируют шаблон hello восстановления дополнительных клиента, используя свой собственный билеты toobrowse событий приложения.</span><span class="sxs-lookup"><span data-stu-id="80722-175">Note that exposing hello restored tenant as an additional tenant, with its own Events app toobrowse tickets, is unlikely toobe how you would provide a tenant access toorestored data, but serves tooeasily illustrate hello restore pattern.</span></span>

<span data-ttu-id="80722-176">На самом деле вы, вероятно, только сохраните эту восстановленную базу данных на определенный период.</span><span class="sxs-lookup"><span data-stu-id="80722-176">In reality, you would probably only retain this restored database for a defined period.</span></span> <span data-ttu-id="80722-177">Можно удалить запись клиента hello восстановлена после завершения, вызывающему Привет *RestoredTenant.ps1 удаление* сценария.</span><span class="sxs-lookup"><span data-stu-id="80722-177">You can delete hello restored tenant entry once you are finished by calling hello *Remove-RestoredTenant.ps1* script.</span></span>

1. <span data-ttu-id="80722-178">Задать **$DemoScenario** слишком**4** tooselect hello *клиента восстановить удаление* сценария.</span><span class="sxs-lookup"><span data-stu-id="80722-178">Set **$DemoScenario** too**4** tooselect hello *remove restored tenant* scenario.</span></span>
1. <span data-ttu-id="80722-179">**Выполните этот сценарий**, **нажав клавишу** **F5**.</span><span class="sxs-lookup"><span data-stu-id="80722-179">**Execute** **using** **F5**</span></span>
1. <span data-ttu-id="80722-180">Hello *ContosoConcertHall\_старый* запись удаляется, из каталога hello.</span><span class="sxs-lookup"><span data-stu-id="80722-180">hello *ContosoConcertHall\_old* entry is now deleted from hello catalog.</span></span> <span data-ttu-id="80722-181">Продолжить и закрыть страницу приветствия события для этого клиента в браузере.</span><span class="sxs-lookup"><span data-stu-id="80722-181">Go ahead and close hello events page for this tenant in your browser.</span></span>


## <a name="restore-a-tenant-in-place-replacing-hello-existing-tenant-database"></a><span data-ttu-id="80722-182">Восстановление клиент в месте, заменив hello существующей базы данных клиента</span><span class="sxs-lookup"><span data-stu-id="80722-182">Restore a tenant in place, replacing hello existing tenant database</span></span>

<span data-ttu-id="80722-183">В этом упражнении восстанавливает hello Hall совместно Contoso клиента tooa точки предшествующей hello событие было удалено.</span><span class="sxs-lookup"><span data-stu-id="80722-183">This exercise restores hello Contoso Concert Hall tenant tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="80722-184">Hello *TenantInPlace восстановления* скрипт восстанавливает hello текущего клиента базы данных tooa новой базы данных указывает tooa предыдущий момент времени, и удаляет hello исходной базы данных.</span><span class="sxs-lookup"><span data-stu-id="80722-184">hello *Restore-TenantInPlace* script restores hello current tenant database tooa new database pointing tooa previous point in time, and deletes hello original database.</span></span> <span data-ttu-id="80722-185">Такая модель восстановления больше подходит для восстановление после повреждения данных серьезной, как может быть значительной потере данных, hello клиента будет иметь tooaccommodate.</span><span class="sxs-lookup"><span data-stu-id="80722-185">This pattern of restore is best suited for recovering from serious data corruption as there may be significant data loss that hello tenant would have tooaccommodate.</span></span>

1. <span data-ttu-id="80722-186">Откройте файл **Demo-RestoreTenant.ps1** в интегрированной среде сценариев PowerShell.</span><span class="sxs-lookup"><span data-stu-id="80722-186">Open **Demo-RestoreTenant.ps1** file in PowerShell ISE</span></span>
1. <span data-ttu-id="80722-187">Задать **$DemoScenario** слишком**5** tooselect hello *восстановления клиента в месте сценарии*.</span><span class="sxs-lookup"><span data-stu-id="80722-187">Set **$DemoScenario** too**5** tooselect hello *restore tenant in place scenario*.</span></span>
1. <span data-ttu-id="80722-188">Выполните этот сценарий, нажав клавишу **F5**.</span><span class="sxs-lookup"><span data-stu-id="80722-188">Execute using **F5**.</span></span>

<span data-ttu-id="80722-189">Hello скрипта восстанавливает базу данных tooa hello клиента точки пять минут, прежде чем hello событие было удалено.</span><span class="sxs-lookup"><span data-stu-id="80722-189">hello script restores hello tenant database tooa point five minutes before hello event was deleted.</span></span> <span data-ttu-id="80722-190">Это делается путем первого занимает hello Contoso совместно Hall клиента в автономном режиме, поэтому более нет обновляет данные toohello.</span><span class="sxs-lookup"><span data-stu-id="80722-190">It does this by first taking hello Contoso Concert Hall tenant offline so there are no further updates toohello data.</span></span> <span data-ttu-id="80722-191">Затем создается путем восстановления из точки восстановления hello и с именем параллельных базы данных с меткой времени, имя базы данных tooensure hello не конфликтует с именем существующей базы данных клиента hello.</span><span class="sxs-lookup"><span data-stu-id="80722-191">Then, a parallel database is created by restoring from hello restore point and named with a timestamp tooensure hello database name does not conflict with hello existing tenant database name.</span></span> <span data-ttu-id="80722-192">Затем удаляется hello старой базы данных клиента и hello Восстановленная база данных будет переименовано toohello исходное имя базы данных.</span><span class="sxs-lookup"><span data-stu-id="80722-192">Next, hello old tenant database is deleted, and hello restored database is renamed toohello original database name.</span></span> <span data-ttu-id="80722-193">Наконец Contoso совместно Hall переводится в режим online tooallow доступа приложения hello toohello восстановления базы данных.</span><span class="sxs-lookup"><span data-stu-id="80722-193">Finally, Contoso Concert Hall is brought online tooallow hello app access toohello restored database.</span></span>

<span data-ttu-id="80722-194">Успешно восстановлены tooa hello базы данных на момент времени, прежде чем hello событие было удалено.</span><span class="sxs-lookup"><span data-stu-id="80722-194">You successfully restored hello database tooa point in time before hello event was deleted.</span></span> <span data-ttu-id="80722-195">Здравствуйте, открывается страница события, поэтому подтверждение восстановила приветствия последнего события.</span><span class="sxs-lookup"><span data-stu-id="80722-195">hello Events page opens, so confirm hello last event has been restored.</span></span>


## <a name="next-steps"></a><span data-ttu-id="80722-196">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="80722-196">Next steps</span></span>

<span data-ttu-id="80722-197">Из этого руководства вы узнали, как выполнять такие задачи:</span><span class="sxs-lookup"><span data-stu-id="80722-197">In this tutorial, you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="80722-198">восстановить базу данных в параллельную базу данных (параллельное восстановление);</span><span class="sxs-lookup"><span data-stu-id="80722-198">Restore a database into a parallel database (side-by-side)</span></span>
> * <span data-ttu-id="80722-199">восстановить базу данных "на месте".</span><span class="sxs-lookup"><span data-stu-id="80722-199">Restore a database in place</span></span>

<span data-ttu-id="80722-200">[Manage schema for multiple tenants in the WTP SaaS application](sql-database-saas-tutorial-schema-management.md) (Управление схемой нескольких клиентов в SaaS-приложении WTP)</span><span class="sxs-lookup"><span data-stu-id="80722-200">[Manage tenant database schema](sql-database-saas-tutorial-schema-management.md)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="80722-201">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="80722-201">Additional resources</span></span>

* <span data-ttu-id="80722-202">Дополнительные [учебники, которые созданы на основе Wingtip SaaS приложения hello](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="80722-202">Additional [tutorials that build upon hello Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="80722-203">Обзор обеспечения непрерывности бизнес-процессов с помощью базы данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="80722-203">Overview of business continuity with Azure SQL Database</span></span>](sql-database-business-continuity.md)
* [<span data-ttu-id="80722-204">Подробнее о резервном копировании базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="80722-204">Learn about SQL Database backups</span></span>](sql-database-automated-backups.md)
