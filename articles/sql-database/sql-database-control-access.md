---
title: "tooAzure aaaGranting доступа к базе данных SQL | Документы Microsoft"
description: "Дополнительные сведения о предоставлении доступа tooMicrosoft базы данных SQL Azure."
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: 8e71b04c-bc38-4153-8f83-f2b14faa31d9
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/06/2017
ms.author: rickbyh
ms.openlocfilehash: 4c32fafa7e98b731ff2f9bf4666da7e4a3145286
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-access-control"></a><span data-ttu-id="c9a75-103">Контроль доступа к базе данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="c9a75-103">Azure SQL Database access control</span></span>
<span data-ttu-id="c9a75-104">безопасность tooprovide, база данных SQL управляет доступом с правилами брандмауэра ограничение подключение по IP-адресу механизмов проверки подлинности, требующие tooprove пользователей их идентификаторов и механизмы авторизации ограничений toospecific действий пользователей и данных.</span><span class="sxs-lookup"><span data-stu-id="c9a75-104">tooprovide security, SQL Database controls access with firewall rules limiting connectivity by IP address, authentication mechanisms requiring users tooprove their identity, and authorization mechanisms limiting users toospecific actions and data.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="c9a75-105">Обзор функций безопасности hello базы данных SQL см. в разделе [Обзор безопасности SQL](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c9a75-105">For an overview of hello SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span> <span data-ttu-id="c9a75-106">Ознакомьтесь с руководством [Защита базы данных SQL Azure](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="c9a75-106">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>

## <a name="firewall-and-firewall-rules"></a><span data-ttu-id="c9a75-107">Брандмауэр и правила брандмауэра</span><span class="sxs-lookup"><span data-stu-id="c9a75-107">Firewall and firewall rules</span></span>
<span data-ttu-id="c9a75-108">База данных SQL Microsoft Azure предоставляет службу реляционных баз данных для Azure и других интернет-приложений.</span><span class="sxs-lookup"><span data-stu-id="c9a75-108">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="c9a75-109">toohelp защитить свои данные, брандмауэр не все сервера базы данных access tooyour, пока вы не укажете компьютеры, на которых есть разрешение.</span><span class="sxs-lookup"><span data-stu-id="c9a75-109">toohelp protect your data, firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="c9a75-110">Hello брандмауэр предоставляет доступ toodatabases основании hello, рассчитанные на IP-адреса каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="c9a75-110">hello firewall grants access toodatabases based on hello originating IP address of each request.</span></span> <span data-ttu-id="c9a75-111">Дополнительные сведения см. в статье [Обзор правил брандмауэра базы данных SQL Azure](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="c9a75-111">For more information, see [Overview of Azure SQL Database firewall rules](sql-database-firewall-configure.md)</span></span>

<span data-ttu-id="c9a75-112">Hello службы базы данных SQL Azure доступна только через TCP-порт 1433.</span><span class="sxs-lookup"><span data-stu-id="c9a75-112">hello Azure SQL Database service is only available through TCP port 1433.</span></span> <span data-ttu-id="c9a75-113">tooaccess базы данных SQL с компьютера, убедитесь, что брандмауэр клиентского компьютера разрешает исходящие соединения через TCP-порт 1433.</span><span class="sxs-lookup"><span data-stu-id="c9a75-113">tooaccess a SQL Database from your computer, ensure that your client computer firewall allows outgoing TCP communication on TCP port 1433.</span></span> <span data-ttu-id="c9a75-114">Заблокируйте входящие подключения по протоколу TCP через порт 1433, если они не требуются для других приложений.</span><span class="sxs-lookup"><span data-stu-id="c9a75-114">If not needed for other applications, block inbound connections on TCP port 1433.</span></span> 

<span data-ttu-id="c9a75-115">В рамках процесса подключения hello подключений от виртуальных машин Azure, перенаправленный tooa другой IP-адрес и порт, уникальный для каждой рабочей роли.</span><span class="sxs-lookup"><span data-stu-id="c9a75-115">As part of hello connection process, connections from Azure virtual machines are redirected tooa different IP address and port, unique for each worker role.</span></span> <span data-ttu-id="c9a75-116">Hello используется порт в диапазоне hello от 11000 too11999.</span><span class="sxs-lookup"><span data-stu-id="c9a75-116">hello port number is in hello range from 11000 too11999.</span></span> <span data-ttu-id="c9a75-117">Дополнительные сведения о TCP-портах см. в статье [Порты для ADO.NET 4.5, отличные от порта 1433](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="c9a75-117">For more information about TCP ports, see [Ports beyond 1433 for ADO.NET 4.5 and SQL Database2](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>

## <a name="authentication"></a><span data-ttu-id="c9a75-118">Аутентификация</span><span class="sxs-lookup"><span data-stu-id="c9a75-118">Authentication</span></span>

<span data-ttu-id="c9a75-119">База данных SQL поддерживает два типа аутентификации:</span><span class="sxs-lookup"><span data-stu-id="c9a75-119">SQL Database supports two types of authentication:</span></span>

* <span data-ttu-id="c9a75-120">**Проверка подлинности SQL** с использованием имени пользователя и пароля.</span><span class="sxs-lookup"><span data-stu-id="c9a75-120">**SQL Authentication**, which uses a username and password.</span></span> <span data-ttu-id="c9a75-121">При создании hello логического сервера для базы данных, имя входа «администратор сервера» указано имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="c9a75-121">When you created hello logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="c9a75-122">Используя эти учетные данные, вы можете проверять подлинность tooany базы данных на этом сервере как владелец базы данных hello, или «dbo».</span><span class="sxs-lookup"><span data-stu-id="c9a75-122">Using these credentials, you can authenticate tooany database on that server as hello database owner, or "dbo."</span></span> 
* <span data-ttu-id="c9a75-123">**Проверка подлинности Azure Active Directory** с использованием удостоверений, контролируемых Azure Active Directory, которая поддерживается управляемыми и интегрированными доменами.</span><span class="sxs-lookup"><span data-stu-id="c9a75-123">**Azure Active Directory Authentication**, which uses identities managed by Azure Active Directory and is supported for managed and integrated domains.</span></span> <span data-ttu-id="c9a75-124">[По возможности](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode) используйте проверку подлинности Active Directory (встроенная безопасность).</span><span class="sxs-lookup"><span data-stu-id="c9a75-124">Use Active Directory authentication (integrated security) [whenever possible](https://docs.microsoft.com/sql/relational-databases/security/choose-an-authentication-mode).</span></span> <span data-ttu-id="c9a75-125">Если вы хотите toouse проверки подлинности Azure Active Directory, необходимо создать другой администратор сервера называется hello «Admin Azure AD», что допускается tooadminister Azure AD — пользователи и группы.</span><span class="sxs-lookup"><span data-stu-id="c9a75-125">If you want toouse Azure Active Directory Authentication, you must create another server admin called hello "Azure AD admin," which is allowed tooadminister Azure AD users and groups.</span></span> <span data-ttu-id="c9a75-126">Этот администратор также может выполнять все операции, доступные обычному администратору.</span><span class="sxs-lookup"><span data-stu-id="c9a75-126">This admin can also perform all operations that a regular server admin can.</span></span> <span data-ttu-id="c9a75-127">В разделе [подключении базы данных с использованием Azure Active Directory проверки подлинности tooSQL](sql-database-aad-authentication.md) для Пошаговое руководство по toocreate tooenable администрирования Azure AD проверки подлинности Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c9a75-127">See [Connecting tooSQL Database By Using Azure Active Directory Authentication](sql-database-aad-authentication.md) for a walkthrough of how toocreate an Azure AD admin tooenable Azure Active Directory Authentication.</span></span>

<span data-ttu-id="c9a75-128">Hello компонент Database Engine закрывает подключения, которые простаивать в течение более чем за 30 минут.</span><span class="sxs-lookup"><span data-stu-id="c9a75-128">hello Database Engine closes connections that remain idle for more than 30 minutes.</span></span> <span data-ttu-id="c9a75-129">Здравствуйте, соединения необходимо входа еще раз, прежде чем можно будет использовать.</span><span class="sxs-lookup"><span data-stu-id="c9a75-129">hello connection must login again before it can be used.</span></span> <span data-ttu-id="c9a75-130">Постоянно tooSQL активных подключений базы данных требуется повторная авторизация (выполняется ядром СУБД hello) каждые 10 часов.</span><span class="sxs-lookup"><span data-stu-id="c9a75-130">Continuously active connections tooSQL Database require reauthorization (performed by hello database engine) at least every 10 hours.</span></span> <span data-ttu-id="c9a75-131">компонент database engine Hello предпринимается повторная авторизация с использованием пароля изначально отправлено hello и вмешательство пользователя не требуется.</span><span class="sxs-lookup"><span data-stu-id="c9a75-131">hello database engine attempts reauthorization using hello originally submitted password and no user input is required.</span></span> <span data-ttu-id="c9a75-132">Для повышения производительности при сбросе пароля в базе данных SQL, hello соединение не будет выполнена повторная проверка подлинности, даже если сбрасывать hello соединение из-за tooconnection пулов.</span><span class="sxs-lookup"><span data-stu-id="c9a75-132">For performance reasons, when a password is reset in SQL Database, hello connection is not be reauthenticated, even if hello connection is reset due tooconnection pooling.</span></span> <span data-ttu-id="c9a75-133">Это отличается от поведения hello в локальной среде SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9a75-133">This is different from hello behavior of on-premises SQL Server.</span></span> <span data-ttu-id="c9a75-134">Если hello пароль был изменен с момента подключения hello изначально был авторизован, необходимо завершить подключение hello и установить новое соединение с помощью hello новый пароль.</span><span class="sxs-lookup"><span data-stu-id="c9a75-134">If hello password has been changed since hello connection was initially authorized, hello connection must be terminated and a new connection made using hello new password.</span></span> <span data-ttu-id="c9a75-135">Пользователь с hello `KILL DATABASE CONNECTION` разрешение может явным образом завершить tooSQL подключение базы данных с помощью hello [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql) команды.</span><span class="sxs-lookup"><span data-stu-id="c9a75-135">A user with hello `KILL DATABASE CONNECTION` permission can explicitly terminate a connection tooSQL Database by using hello [KILL](https://docs.microsoft.com/sql/t-sql/language-elements/kill-transact-sql) command.</span></span>

<span data-ttu-id="c9a75-136">Учетные записи пользователей могут быть созданы в базе данных master hello и могут быть предоставлены разрешения во всех базах данных на сервере hello, или они могут быть созданы в базе данных hello сам (называемые автономных пользователей).</span><span class="sxs-lookup"><span data-stu-id="c9a75-136">User accounts can be created in hello master database and can be granted permissions in all databases on hello server, or they can be created in hello database itself (called contained users).</span></span> <span data-ttu-id="c9a75-137">Сведения о создании имен для входа и управлении ими см. в [этой статье](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="c9a75-137">For information on creating and managing logins, see [Manage logins](sql-database-manage-logins.md).</span></span> <span data-ttu-id="c9a75-138">переносимость tooenhance и scalabilty, используют масштабируемость tooenhance пользователей автономной базы данных.</span><span class="sxs-lookup"><span data-stu-id="c9a75-138">tooenhance portability and scalabilty, use contained database users tooenhance scalability.</span></span> <span data-ttu-id="c9a75-139">Дополнительные сведения об автономных пользователях см. в статьях [Пользователи автономной базы данных — создание переносимой базы данных](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql) и [Автономные базы данных](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span><span class="sxs-lookup"><span data-stu-id="c9a75-139">For more information on contained users, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), [CREATE USER (Transact-SQL)](https://docs.microsoft.com/sql/t-sql/statements/create-user-transact-sql), and [Contained Databases](https://docs.microsoft.com/sql/relational-databases/databases/contained-databases).</span></span>

<span data-ttu-id="c9a75-140">Рекомендуется в приложении следует использовать выделенную учетную запись tooauthenticate--таким образом, можно ограничить hello разрешения, предоставленные toohello приложения и уменьшить риски hello вредоносных действий в случае атаки SQL injection уязвимых tooa код приложения атаки.</span><span class="sxs-lookup"><span data-stu-id="c9a75-140">As a best practice your application should use a dedicated account tooauthenticate -- this way you can limit hello permissions granted toohello application and reduce hello risks of malicious activity in case your application code is vulnerable tooa SQL injection attack.</span></span> <span data-ttu-id="c9a75-141">Hello рекомендуется toocreate [пользователя автономной базы данных](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), что позволяет tooauthenticate вашего приложения непосредственно toohello базы данных.</span><span class="sxs-lookup"><span data-stu-id="c9a75-141">hello recommended approach is toocreate a [contained database user](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable), which allows your app tooauthenticate directly toohello database.</span></span> 

## <a name="authorization"></a><span data-ttu-id="c9a75-142">Авторизация</span><span class="sxs-lookup"><span data-stu-id="c9a75-142">Authorization</span></span>

<span data-ttu-id="c9a75-143">Авторизация ссылается toowhat может делать пользователь в базе данных SQL Azure и осуществляется с помощью учетной записи пользователя базы данных [членство в ролях](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) и [разрешения на уровне объекта](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span><span class="sxs-lookup"><span data-stu-id="c9a75-143">Authorization refers toowhat a user can do within an Azure SQL Database, and this is controlled by your user account's database [role memberships](https://docs.microsoft.com/sql/relational-databases/security/authentication-access/database-level-roles) and [object-level permissions](https://docs.microsoft.com/sql/relational-databases/security/permissions-database-engine).</span></span> <span data-ttu-id="c9a75-144">Рекомендуется необходимо предоставить пользователям hello наименьшими необходимыми правами.</span><span class="sxs-lookup"><span data-stu-id="c9a75-144">As a best practice, you should grant users hello least privileges necessary.</span></span> <span data-ttu-id="c9a75-145">Учетная запись администратора Hello сервера с которым соединение является членом роли db_owner, имеющая центра toodo все условия в базе данных hello.</span><span class="sxs-lookup"><span data-stu-id="c9a75-145">hello server admin account you are connecting with is a member of db_owner, which has authority toodo anything within hello database.</span></span> <span data-ttu-id="c9a75-146">Сохраните эту учетную запись для развертывания обновлений схемы и выполнения других действий по управлению.</span><span class="sxs-lookup"><span data-stu-id="c9a75-146">Save this account for deploying schema upgrades and other management operations.</span></span> <span data-ttu-id="c9a75-147">Использовать учетную запись «ApplicationUser» hello с более ограниченные разрешения tooconnect из базы данных приложения toohello с hello наименьшие права доступа, необходимые для приложения.</span><span class="sxs-lookup"><span data-stu-id="c9a75-147">Use hello "ApplicationUser" account with more limited permissions tooconnect from your application toohello database with hello least privileges needed by your application.</span></span> <span data-ttu-id="c9a75-148">Дополнительные сведения см. в статье [Проверка подлинности и авторизация в базе данных SQL: предоставление доступа](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="c9a75-148">For more information, see [Manage logins](sql-database-manage-logins.md).</span></span>

<span data-ttu-id="c9a75-149">Как правило, только администраторы должны получить доступ к toohello `master` базы данных.</span><span class="sxs-lookup"><span data-stu-id="c9a75-149">Typically, only administrators need access toohello `master` database.</span></span> <span data-ttu-id="c9a75-150">Постоянный доступ tooeach пользовательской базы данных должен быть создан в каждой базе данных, то пользователи автономной базы данных без прав администратора.</span><span class="sxs-lookup"><span data-stu-id="c9a75-150">Routine access tooeach user database should be through non-administrator contained database users created in each database.</span></span> <span data-ttu-id="c9a75-151">При использовании пользователей автономной базы данных, не обязательно toocreate учетных записей в hello `master` базы данных.</span><span class="sxs-lookup"><span data-stu-id="c9a75-151">When you use contained database users, you do not need toocreate logins in hello `master` database.</span></span> <span data-ttu-id="c9a75-152">Дополнительные сведения см. в статье [Пользователи автономной базы данных — создание переносимой базы данных](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span><span class="sxs-lookup"><span data-stu-id="c9a75-152">For more information, see [Contained Database Users - Making Your Database Portable](https://docs.microsoft.com/sql/relational-databases/security/contained-database-users-making-your-database-portable).</span></span>

<span data-ttu-id="c9a75-153">Вам следует ознакомиться с hello следующие атрибуты, которые можно использовать toolimit или повысить права:</span><span class="sxs-lookup"><span data-stu-id="c9a75-153">You should familiarize yourself with hello following features that can be used toolimit or elevate permissions:</span></span>   
* <span data-ttu-id="c9a75-154">[Олицетворение](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) и [Подписание модулей](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) может быть используется toosecurely повысить права временно.</span><span class="sxs-lookup"><span data-stu-id="c9a75-154">[Impersonation](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/customizing-permissions-with-impersonation-in-sql-server) and [module-signing](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/signing-stored-procedures-in-sql-server) can be used toosecurely elevate permissions temporarily.</span></span>
* <span data-ttu-id="c9a75-155">[Безопасности на уровне строк](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) может использоваться, чтобы ограничить доступ пользователя к строкам.</span><span class="sxs-lookup"><span data-stu-id="c9a75-155">[Row-Level Security](https://docs.microsoft.com/sql/relational-databases/security/row-level-security) can be used limit which rows a user can access.</span></span>
* <span data-ttu-id="c9a75-156">[Маскирование данных](sql-database-dynamic-data-masking-get-started.md) может быть используется toolimit раскрытия конфиденциальных данных.</span><span class="sxs-lookup"><span data-stu-id="c9a75-156">[Data Masking](sql-database-dynamic-data-masking-get-started.md) can be used toolimit exposure of sensitive data.</span></span>
* <span data-ttu-id="c9a75-157">[Хранимые процедуры](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) может быть используется toolimit hello действия, которые могут быть выполнены в базе данных hello.</span><span class="sxs-lookup"><span data-stu-id="c9a75-157">[Stored procedures](https://docs.microsoft.com/sql/relational-databases/stored-procedures/stored-procedures-database-engine) can be used toolimit hello actions that can be taken on hello database.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c9a75-158">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="c9a75-158">Next steps</span></span>

- <span data-ttu-id="c9a75-159">Обзор функций безопасности hello базы данных SQL см. в разделе [Обзор безопасности SQL](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c9a75-159">For an overview of hello SQL Database security features, see [SQL security overview](sql-database-security-overview.md).</span></span>
- <span data-ttu-id="c9a75-160">toolearn Дополнительные сведения о правилах брандмауэра. в разделе [правила брандмауэра](sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="c9a75-160">toolearn more about firewall rules, see [Firewall rules](sql-database-firewall-configure.md).</span></span>
- <span data-ttu-id="c9a75-161">toolearn о пользователях и имена входа, в разделе [Управление именами входа](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="c9a75-161">toolearn about users and logins, see [Manage logins](sql-database-manage-logins.md).</span></span> 
- <span data-ttu-id="c9a75-162">Описание упреждающего мониторинга см. во вводных статьях об [аудите базы данных](sql-database-auditing.md) и [системе обнаружения угроз базы данных SQL](sql-database-threat-detection.md).</span><span class="sxs-lookup"><span data-stu-id="c9a75-162">For a discussion of proactive monitoring, see [Database Auditing](sql-database-auditing.md) and [SQL Database Threat Detection](sql-database-threat-detection.md).</span></span>
- <span data-ttu-id="c9a75-163">Ознакомьтесь с руководством [Защита базы данных SQL Azure](sql-database-security-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="c9a75-163">For a tutorial, see [Secure your Azure SQL Database](sql-database-security-tutorial.md).</span></span>
