---
title: "Мониторинг и настройка производительности базы данных SQL Azure | Документация Майкрософт"
description: "Советы по настройке базы данных SQL Azure — оценка и улучшение производительности."
services: sql-database
documentationcenter: 
author: v-shysun
manager: felixwu
editor: 
keywords: "настройка производительности sql, настройка производительности базы данных, советы по настройке производительности sql, настройка производительности базы данных sql"
ms.assetid: eb7b3f66-3b33-4e1b-84fb-424a928a6672
ms.service: sql-database
ms.custom: monitor & tune
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: v-shysun
ms.openlocfilehash: 7a2f1199a56e0bd32eafef9f420879c756673e7f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="monitoring-and-performance-tuning"></a><span data-ttu-id="7e0d1-104">Мониторинг и настройка производительности</span><span class="sxs-lookup"><span data-stu-id="7e0d1-104">Monitoring and performance tuning</span></span>

<span data-ttu-id="7e0d1-105">База данных SQL Azure — это управляемая автоматически гибкая служба данных, позволяющая легко отслеживать использование, добавлять и удалять ресурсы (ЦП, памяти, ввода-вывода), находить рекомендации, которые могут повысить производительность базы данных, а также позволить базе данных адаптироваться к рабочей нагрузке и автоматически оптимизировать производительность.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-105">Azure SQL Database is automatically managed and flexible data service where you can easily monitor usage, add or remove resources (CPU, memory, io), find recommendations that can improve performance of your database, or let database adapt to your workload and automatically optimize performance.</span></span>

<span data-ttu-id="7e0d1-106">Эта статья содержит общие сведения о возможностях мониторинга и настройки производительности, доступных в Базе данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-106">This article provides overview of monitoring and performance tuning options that are available in Azure SQL Database.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="monitoring-and-troubleshooting-database-performance"></a><span data-ttu-id="7e0d1-107">Мониторинг и устранение неполадок производительности базы данных</span><span class="sxs-lookup"><span data-stu-id="7e0d1-107">Monitoring and troubleshooting database performance</span></span>

<span data-ttu-id="7e0d1-108">База данных SQL Azure позволяет легко отслеживать использование базы данных и определять запросы, которые могут приводить к проблемам производительности.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-108">Azure SQL Database enables you to easily monitor your database usage and identify queries that might cause the performance issues.</span></span> <span data-ttu-id="7e0d1-109">Вы можете отслеживать производительность базы данных с помощью портала Azure или системных представлений.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-109">You can monitor database performance using Azure portal or system views.</span></span> <span data-ttu-id="7e0d1-110">Доступны следующие возможности мониторинга и устранения неполадок производительности базы данных.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-110">You have the following options for monitoring and troubleshooting database performance:</span></span>

1. <span data-ttu-id="7e0d1-111">На [портале Azure](https://portal.azure.com) щелкните **Базы данных SQL**, выберите базу данных и найдите ресурсы, приближающиеся к максимальной отметке, на диаграмме мониторинга.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-111">In the [Azure portal](https://portal.azure.com), click **SQL databases**, select the database, and then use the Monitoring chart to look for resources approaching their maximum.</span></span> <span data-ttu-id="7e0d1-112">По умолчанию отображается процент использования DTU.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-112">DTU consumption is shown by default.</span></span> <span data-ttu-id="7e0d1-113">Щелкните **Изменить** , чтобы изменить диапазон времени и отображаемые значения.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-113">Click **Edit** to change the time range and values shown.</span></span>
2. <span data-ttu-id="7e0d1-114">На странице [Анализ производительности запросов](sql-database-query-performance.md) можно определить, какие запросы потребляют большую часть ресурсов.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-114">Use [Query Performance Insight](sql-database-query-performance.md) to identify the queries that spend the most of resources.</span></span>
3. <span data-ttu-id="7e0d1-115">Для получения параметров производительности в режиме реального времени используйте динамические административные представления (DMV), расширенные события (`XEvents`) и хранилище запросов в SSMS.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-115">You can use dynamic management views (DMVs), Extended Events (`XEvents`), and the Query Store in SSMS to get performance parameters in real time.</span></span>

<span data-ttu-id="7e0d1-116">В [этом разделе руководства по производительности](sql-database-performance-guidance.md) описаны методы, которые можно использовать, чтобы повысить производительность Базы данных SQL Azure, если вы обнаружили какие-либо проблемы с помощью этих отчетов или представлений.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-116">See the [performance guidance topic](sql-database-performance-guidance.md) to find techniques that you can use to improve performance of Azure SQL Database if you identify some issue using these reports or views.</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="7e0d1-117">Чтобы обеспечить синхронизацию с обновлениями Microsoft Azure и Базой данных SQL, рекомендуется всегда использовать последнюю версию Management Studio.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-117">It is recommended that you always use the latest version of Management Studio to remain synchronized with updates to Microsoft Azure and SQL Database.</span></span> <span data-ttu-id="7e0d1-118">[Обновите среду SQL Server Management Studio](https://msdn.microsoft.com/library/mt238290.aspx).</span><span class="sxs-lookup"><span data-stu-id="7e0d1-118">[Update SQL Server Management Studio](https://msdn.microsoft.com/library/mt238290.aspx).</span></span>
>

## <a name="optimize-database-to-improve-performance"></a><span data-ttu-id="7e0d1-119">Оптимизация базы данных для повышения производительности</span><span class="sxs-lookup"><span data-stu-id="7e0d1-119">Optimize database to improve performance</span></span>

<span data-ttu-id="7e0d1-120">База данных SQL Azure позволяет выявить возможности для повышения и оптимизации производительности запросов без изменения ресурсов. Для этого достаточно изучить [рекомендации по настройке производительности](sql-database-advisor.md).</span><span class="sxs-lookup"><span data-stu-id="7e0d1-120">Azure SQL Database enables you to identify opportunities to improve and optimize query performance without changing resources by reviewing [performance tuning recommendations](sql-database-advisor.md).</span></span> <span data-ttu-id="7e0d1-121">Отсутствующие индексы и плохо оптимизированные запросы — распространенные причины низкой производительности баз данных.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-121">Missing indexes and poorly optimized queries are common reasons for poor database performance.</span></span> <span data-ttu-id="7e0d1-122">Можно применить эти рекомендации по настройке, чтобы повысить производительность рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-122">You can apply these tuning recommendations to improve performance of your workload.</span></span>
<span data-ttu-id="7e0d1-123">Можно также позволить Базе данных Azure SQL [автоматически оптимизировать производительность запросов](sql-database-automatic-tuning.md). В этом случае она будет применять все созданные рекомендации и проверять, действительно ли они повышают производительность базы данных.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-123">You can also let Azure SQL database to [automatically optimize performance of your queries](sql-database-automatic-tuning.md) by applying all identified recommendations and verifying that they improve database performance.</span></span> <span data-ttu-id="7e0d1-124">Для повышения производительности базы данных можно использовать следующие возможности.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-124">You can use the following options to improve performance of your database:</span></span>

1. <span data-ttu-id="7e0d1-125">Используйте [Помощник по базам данных SQL](sql-database-advisor-portal.md), чтобы просматривать рекомендации по созданию и удалению индексов, параметризации запросов и устранению ошибок схемы.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-125">Use [SQL Database Advisor](sql-database-advisor-portal.md) to view recommendations for creating and dropping indexes, parameterizing queries, and fixing schema issues.</span></span>
2. <span data-ttu-id="7e0d1-126">[Включите автоматическую настройку](sql-database-automatic-tuning-enable.md) и позвольте Базе данных SQL Azure автоматически исправлять выявленные проблемы производительности.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-126">[Enable automatic tuning](sql-database-automatic-tuning-enable.md) and let Azure SQL database automatically fix identified performance issues.</span></span>

## <a name="improving-database-performance-with-more-resources"></a><span data-ttu-id="7e0d1-127">Повышение производительности базы данных с помощью дополнительных ресурсов</span><span class="sxs-lookup"><span data-stu-id="7e0d1-127">Improving database performance with more resources</span></span>

<span data-ttu-id="7e0d1-128">Наконец, если для базы данных нет применимых рекомендаций по повышению производительности, можно изменить объем ресурсов, доступных в Базе данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-128">Finally, if there are no actionable items that can improve performance of your database, you can change the amount of resources available in Azure SQL Database.</span></span> <span data-ttu-id="7e0d1-129">Можно назначить больше ресурсов, изменив [уровень служб](sql-database-service-tiers.md) автономной базы данных или увеличив количество eDTU эластичного пула в любое время.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-129">You can assign more resources by changing the [service tier](sql-database-service-tiers.md) of a standalone database or increase the eDTUs of an elastic pool at any time.</span></span>
1. <span data-ttu-id="7e0d1-130">Для повышения производительности изолированных баз данных можно [изменять уровни служб](sql-database-service-tiers.md) по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-130">For standalone databases, you can [change service tiers](sql-database-service-tiers.md) on-demand to improve database performance.</span></span>
2. <span data-ttu-id="7e0d1-131">Если баз данных несколько, можно включить автомасштабирование ресурсов, используя [пулы эластичных баз данных](sql-database-elastic-pool-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="7e0d1-131">For multiple databases, consider using [elastic pools](sql-database-elastic-pool-guidance.md) to scale resources automatically.</span></span>

## <a name="tune-and-refactor-application-or-database-code"></a><span data-ttu-id="7e0d1-132">Настройка и рефакторинг кода приложения или базы данных</span><span class="sxs-lookup"><span data-stu-id="7e0d1-132">Tune and refactor application or database code</span></span>

<span data-ttu-id="7e0d1-133">Можно изменить код приложения для более оптимального использования базы данных, изменить индексы, принудительно применить планы или с помощью указаний вручную адаптировать базу данных для рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="7e0d1-133">You can change application code to more optimally use the database, change indexes, force plans, or use hints to manually adapt the database to your workload.</span></span> <span data-ttu-id="7e0d1-134">Рекомендации и советы по ручной настройке и изменению кода приведены в [этом разделе руководства по производительности](sql-database-performance-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="7e0d1-134">Find some guidance and tips for manual tuning and rewriting the code in the [performance guidance topic](sql-database-performance-guidance.md) article.</span></span>


## <a name="next-steps"></a><span data-ttu-id="7e0d1-135">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="7e0d1-135">Next steps</span></span>

- <span data-ttu-id="7e0d1-136">Дополнительные сведения о том, как включить автоматическую настройку в Базе данных SQL Azure и позволить ей полностью управлять рабочей нагрузкой, см. в [этой статье](sql-database-automatic-tuning-enable.md).</span><span class="sxs-lookup"><span data-stu-id="7e0d1-136">To enable automatic tuning in Azure SQL Database and let automatic tuning feature fully manage your workload, see [Enable automatic tuning](sql-database-automatic-tuning-enable.md).</span></span>
- <span data-ttu-id="7e0d1-137">Дополнительные сведения о ручной настройке для повышения производительности запросов см. в статье [Использование помощника по базам данных SQL на портале Azure](sql-database-advisor-portal.md).</span><span class="sxs-lookup"><span data-stu-id="7e0d1-137">To use manual tuning, you can review [Tuning recommendations in Azure portal](sql-database-advisor-portal.md) and manually apply the ones that improve performance of your queries.</span></span>
- <span data-ttu-id="7e0d1-138">Изменить ресурсы, доступные в базе данных, можно, изменив [уровни служб Базы данных SQL Azure](sql-database-performance-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="7e0d1-138">Change resources that are available in your database by changing [Azure SQL Database service tiers](sql-database-performance-guidance.md)</span></span>