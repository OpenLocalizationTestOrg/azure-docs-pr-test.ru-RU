---
title: "Шаблоны разработки мультитенантных приложений SaaS и базы данных SQL Azure | Документация Майкрософт"
description: "В этой статье описаны требования и общие шаблоны архитектуры данных мультитенантных приложений баз данных, работающих в облачной среде, а также различные компромиссы, связанные с этими шаблонами. Здесь также объясняется, как База данных SQL Azure с пулами эластичных БД и инструментами эластичных баз данных позволяет выполнить эти требования без компромиссов."
keywords: 
services: sql-database
documentationcenter: 
author: srinia
manager: jhubbard
editor: 
ms.assetid: 1dd20c6b-ddbb-40ef-ad34-609d398d008a
ms.service: sql-database
ms.custom: scale out apps
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: sqldb-design
ms.date: 02/01/2017
ms.author: srinia
ms.openlocfilehash: 0f6ba62a01f3211ccaae6b6c48f72e0de54aad78
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="design-patterns-for-multi-tenant-saas-applications-and-azure-sql-database"></a><span data-ttu-id="07434-104">Шаблоны разработки для мультитенантных приложений SaaS и база данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="07434-104">Design patterns for multi-tenant SaaS applications and Azure SQL Database</span></span>
<span data-ttu-id="07434-105">В этой статье рассматриваются требования и общие шаблоны архитектуры данных для мультитенантных приложений базы данных программного обеспечения как услуги (SaaS), работающих в облачной среде.</span><span class="sxs-lookup"><span data-stu-id="07434-105">In this article, you can learn about the requirements and common data architecture patterns of multi-tenant software as a service (SaaS) database applications that run in a cloud environment.</span></span> <span data-ttu-id="07434-106">Здесь также описываются факторы, которые необходимо учесть, и компромиссы различных шаблонов разработки.</span><span class="sxs-lookup"><span data-stu-id="07434-106">It also explains the factors you need to consider and the trade-offs of different design patterns.</span></span> <span data-ttu-id="07434-107">Пулы эластичных БД и инструменты эластичных баз данных в Базе данных SQL Azure помогают обеспечить соответствие конкретным требованиям без ущерба для других целей.</span><span class="sxs-lookup"><span data-stu-id="07434-107">Elastic pools and elastic tools in Azure SQL Database can help you meet your specific requirements without compromising other objectives.</span></span>

<span data-ttu-id="07434-108">При разработке клиентских моделей для уровней данных мультитенантных приложений разработчики иногда принимают решения, которые идут вразрез с их долгосрочными целями.</span><span class="sxs-lookup"><span data-stu-id="07434-108">Developers sometimes make choices that work against their long-term best interests when they design tenancy models for the data tiers of multi-tenant applications.</span></span> <span data-ttu-id="07434-109">По меньшей мере изначально простота разработки и низкая стоимость услуг поставщика облачных служб имела для разработчика большее значение, чем изоляция клиентов и масштабируемость приложений.</span><span class="sxs-lookup"><span data-stu-id="07434-109">Initially, at least, a developer might perceive ease of development and lower cloud service provider costs as more important than tenant isolation or the scalability of an application.</span></span> <span data-ttu-id="07434-110">Как результат — неудовлетворенные клиенты и дорогостоящее изменение стратегии в будущем.</span><span class="sxs-lookup"><span data-stu-id="07434-110">This choice can lead to customer satisfaction concerns and a costly course-correction later.</span></span>

<span data-ttu-id="07434-111">Мультитенатное приложение — это приложение, расположенное в облачной среде и предоставляющее одинаковый набор служб сотням или тысячам клиентов, которые не используют данные совместно и не обращаются к данным друг друга.</span><span class="sxs-lookup"><span data-stu-id="07434-111">A multi-tenant application is an application hosted in a cloud environment and that provides the same set of services to hundreds or thousands of tenants who do not share or see each other’s data.</span></span> <span data-ttu-id="07434-112">В качестве примера можно привести приложение SaaS, которое предоставляет службы для клиентов в размещенной в облаке среде.</span><span class="sxs-lookup"><span data-stu-id="07434-112">An example is an SaaS application that provides services to tenants in a cloud-hosted environment.</span></span>

## <a name="multi-tenant-applications"></a><span data-ttu-id="07434-113">Мультитенантные приложения</span><span class="sxs-lookup"><span data-stu-id="07434-113">Multi-tenant applications</span></span>
<span data-ttu-id="07434-114">В мультитенантных приложениях данные и рабочую нагрузку можно легко секционировать.</span><span class="sxs-lookup"><span data-stu-id="07434-114">In multi-tenant applications, data and workload can be easily partitioned.</span></span> <span data-ttu-id="07434-115">Это можно сделать, к примеру, вдоль границ между клиентами, так как большинство запросов выполняются в пределах клиента.</span><span class="sxs-lookup"><span data-stu-id="07434-115">You can partition data and workload, for example, along tenant boundaries, because most requests occur within the confines of a tenant.</span></span> <span data-ttu-id="07434-116">Это свойство присуще данным и рабочей нагрузке, а шаблоны приложений, рассматриваемые в этой статье, поддерживают его.</span><span class="sxs-lookup"><span data-stu-id="07434-116">That property is inherent in the data and the workload, and it favors the application patterns discussed in this article.</span></span>

<span data-ttu-id="07434-117">Разработчики используют этот тип приложения по всему спектру облачных приложений, включая следующие:</span><span class="sxs-lookup"><span data-stu-id="07434-117">Developers use this type of application across the whole spectrum of cloud-based applications, including:</span></span>

* <span data-ttu-id="07434-118">приложения партнерской базы данных, перемещаемые в облако в качестве приложений SaaS;</span><span class="sxs-lookup"><span data-stu-id="07434-118">Partner database applications that are being transitioned to the cloud as SaaS applications</span></span>
* <span data-ttu-id="07434-119">приложения SaaS, созданные для облака с нуля;</span><span class="sxs-lookup"><span data-stu-id="07434-119">SaaS applications built for the cloud from the ground up</span></span>
* <span data-ttu-id="07434-120">приложения, напрямую предоставляемые потребителям;</span><span class="sxs-lookup"><span data-stu-id="07434-120">Direct, customer-facing applications</span></span>
* <span data-ttu-id="07434-121">корпоративные приложения для сотрудников.</span><span class="sxs-lookup"><span data-stu-id="07434-121">Employee-facing enterprise applications</span></span>

<span data-ttu-id="07434-122">Приложения SaaS, предназначенные для облака, и приложения базы данных от партнеров, как правило, представляют собой мультитенантные приложения.</span><span class="sxs-lookup"><span data-stu-id="07434-122">SaaS applications that are designed for the cloud and those with roots as partner database applications typically are multi-tenant applications.</span></span> <span data-ttu-id="07434-123">Эти приложения SaaS предоставляют клиентам возможности специального программного приложения как услуги.</span><span class="sxs-lookup"><span data-stu-id="07434-123">These SaaS applications deliver a specialized software application as a service to their tenants.</span></span> <span data-ttu-id="07434-124">У клиентов есть доступ к службе приложения, и они полностью владеют связанными данными, хранимыми в приложении.</span><span class="sxs-lookup"><span data-stu-id="07434-124">Tenants can access the application service and have full ownership of associated data stored as part of the application.</span></span> <span data-ttu-id="07434-125">Но чтобы воспользоваться преимуществами SaaS, клиенты должны отказаться от определенной части контроля над своими данными.</span><span class="sxs-lookup"><span data-stu-id="07434-125">But to take advantage of the benefits of SaaS, tenants must surrender some control over their own data.</span></span> <span data-ttu-id="07434-126">Они передают их доверенному поставщику службы SaaS, который сможет обеспечить защиту этих данных и изолировать их от данных других клиентов.</span><span class="sxs-lookup"><span data-stu-id="07434-126">They trust the SaaS service provider to keep their data safe and isolated from other tenants’ data.</span></span> <span data-ttu-id="07434-127">Примерами такого мультитенантного приложения SaaS являются MYOB, SnelStart и Salesforce.com.</span><span class="sxs-lookup"><span data-stu-id="07434-127">Examples of this kind of multi-tenant SaaS application are MYOB, SnelStart, and Salesforce.com.</span></span> <span data-ttu-id="07434-128">Каждое из этих приложений можно секционировать вдоль границ между клиентами. Кроме того, они поддерживают шаблоны разработки приложений, рассмотренные в этой статье.</span><span class="sxs-lookup"><span data-stu-id="07434-128">Each of these applications can be partitioned along tenant boundaries and support the application design patterns we discuss in this article.</span></span>

<span data-ttu-id="07434-129">Приложения, предоставляющие службы пользователям или сотрудникам в организации напрямую (их зачастую называют пользователями, а не клиентами), представляют другую категорию в спектре мультитенантных приложений.</span><span class="sxs-lookup"><span data-stu-id="07434-129">Applications that provide a direct service to customers or to employees within an organization (often referred to as users, rather than tenants) are another category on the multi-tenant application spectrum.</span></span> <span data-ttu-id="07434-130">Клиенты подписываются на службу и не владеют данными, которые собирает и хранит поставщик услуг.</span><span class="sxs-lookup"><span data-stu-id="07434-130">Customers subscribe to the service and do not own the data that the service provider collects and stores.</span></span> <span data-ttu-id="07434-131">К поставщикам услуг применяются менее строгие требования относительно изоляции данных клиентов, помимо принятых государством законов о конфиденциальности.</span><span class="sxs-lookup"><span data-stu-id="07434-131">Service providers have less stringent requirements to keep their customers’ data isolated from each other beyond government-mandated privacy regulations.</span></span> <span data-ttu-id="07434-132">Примерами такого мультитенантного приложения для клиентов выступают поставщики мультимедийного содержимого, например Netflix, Spotify и Xbox LIVE.</span><span class="sxs-lookup"><span data-stu-id="07434-132">Examples of this kind of customer-facing multi-tenant application are media content providers like Netflix, Spotify, and Xbox LIVE.</span></span> <span data-ttu-id="07434-133">К другим примерам приложений с простым секционированием можно отнести веб-приложения для клиентов или приложения "Интернета вещей", где каждый клиент или каждое устройство может служить в качестве секции.</span><span class="sxs-lookup"><span data-stu-id="07434-133">Other examples of easily partitionable applications are customer-facing, Internet-scale applications, or Internet of Things (IoT) applications in which each customer or device can serve as a partition.</span></span> <span data-ttu-id="07434-134">При этом границы секций могут отделять разных пользователей или устройства.</span><span class="sxs-lookup"><span data-stu-id="07434-134">Partition boundaries can separate users and devices.</span></span>

<span data-ttu-id="07434-135">Не все приложения можно легко секционировать по одному свойству, например клиент, потребитель, пользователь или устройство.</span><span class="sxs-lookup"><span data-stu-id="07434-135">Not all applications partition easily along a single property such as tenant, customer, user, or device.</span></span> <span data-ttu-id="07434-136">В сложном приложении планирования ресурсов, например, содержатся продукты, заказы и клиенты.</span><span class="sxs-lookup"><span data-stu-id="07434-136">A complex enterprise resource planning (ERP) application, for example, has products, orders, and customers.</span></span> <span data-ttu-id="07434-137">Как правило, у них сложная схема с тысячами тесно взаимосвязанных таблиц.</span><span class="sxs-lookup"><span data-stu-id="07434-137">It usually has a complex schema with thousands of highly interconnected tables.</span></span>

<span data-ttu-id="07434-138">Невозможно разработать такую стратегию секционирования, которая охватывала бы все таблицы и задания в рабочей нагрузке приложения.</span><span class="sxs-lookup"><span data-stu-id="07434-138">No single partition strategy can apply to all tables and work across an application's workload.</span></span> <span data-ttu-id="07434-139">В этой статье рассматриваются мультитенантные приложения, данные и рабочие нагрузки которых легко секционировать.</span><span class="sxs-lookup"><span data-stu-id="07434-139">This article focuses on multi-tenant applications that have easily partitionable data and workloads.</span></span>

## <a name="multi-tenant-application-design-trade-offs"></a><span data-ttu-id="07434-140">Компромиссы при разработке мультитенантного приложения</span><span class="sxs-lookup"><span data-stu-id="07434-140">Multi-tenant application design trade-offs</span></span>
<span data-ttu-id="07434-141">Выбирая шаблон разработки, разработчику мультитенантного приложения следует учитывать следующие факторы:</span><span class="sxs-lookup"><span data-stu-id="07434-141">The design pattern that a multi-tenant application developer chooses typically is based on a consideration of the following factors:</span></span>

* <span data-ttu-id="07434-142">**Изоляция клиентов**.</span><span class="sxs-lookup"><span data-stu-id="07434-142">**Tenant isolation**.</span></span> <span data-ttu-id="07434-143">Разработчик должен обеспечить, чтобы ни один клиент не смог получить несанкционированный доступ к данным других клиентов.</span><span class="sxs-lookup"><span data-stu-id="07434-143">The developer needs to ensure that no tenant has unwanted access to other tenants’ data.</span></span> <span data-ttu-id="07434-144">Это требование изоляции распространяется и на другие свойства, например защиту от "шумных соседей", возможность восстановления данных конкретного клиента и выполнение настройки для определенного клиента.</span><span class="sxs-lookup"><span data-stu-id="07434-144">The isolation requirement extends to other properties, such as providing protection from noisy neighbors, being able to restore a tenant’s data, and implementing tenant-specific customizations.</span></span>
* <span data-ttu-id="07434-145">**Стоимость облачных ресурсов**.</span><span class="sxs-lookup"><span data-stu-id="07434-145">**Cloud resource cost**.</span></span> <span data-ttu-id="07434-146">Цена приложения SaaS должна быть оптимальной.</span><span class="sxs-lookup"><span data-stu-id="07434-146">An SaaS application needs to be cost-competitive.</span></span> <span data-ttu-id="07434-147">Используя облачные ресурсы, разработчик мультитенантного приложения может снизить затраты на ресурсы хранения и вычислительные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="07434-147">A multi-tenant application developer might choose to optimize for lower cost in the use of cloud resources, such as storage and compute costs.</span></span>
* <span data-ttu-id="07434-148">**Простота разработки и выполнения операций**.</span><span class="sxs-lookup"><span data-stu-id="07434-148">**Ease of DevOps**.</span></span> <span data-ttu-id="07434-149">Разработчику мультитенантного приложения необходимо внедрить защиту путем изоляции, поддерживать и отслеживать работоспособность приложений и схемы базы данных, а также устранять неполадки клиентов.</span><span class="sxs-lookup"><span data-stu-id="07434-149">A multi-tenant application developer needs to incorporate isolation protection, maintain, and monitor the health of their application and database schema, and troubleshoot tenant issues.</span></span> <span data-ttu-id="07434-150">Сложность разработки и выполнения операций приложения создает дополнительные расходы и влечет неудовлетворенность клиентов.</span><span class="sxs-lookup"><span data-stu-id="07434-150">Complexity in application development and operation translates directly to increased cost and challenges with tenant satisfaction.</span></span>
* <span data-ttu-id="07434-151">**Масштабируемость**.</span><span class="sxs-lookup"><span data-stu-id="07434-151">**Scalability**.</span></span> <span data-ttu-id="07434-152">Чтобы приложение SaaS успешно работало, оно должно иметь возможность поэтапного добавления дополнительных клиентов, а также дополнительной емкости для клиентов, которым она необходима.</span><span class="sxs-lookup"><span data-stu-id="07434-152">The ability to incrementally add more tenants and capacity for tenants who require it is imperative to a successful SaaS operation.</span></span>

<span data-ttu-id="07434-153">Каждый из этих факторов в сравнении характеризуется определенными компромиссами.</span><span class="sxs-lookup"><span data-stu-id="07434-153">Each of these factors has trade-offs compared to another.</span></span> <span data-ttu-id="07434-154">Облачное решение с минимальной стоимостью может оказаться не самым удобным в плане разработки.</span><span class="sxs-lookup"><span data-stu-id="07434-154">The lowest-cost cloud offering might not offer the most convenient development experience.</span></span> <span data-ttu-id="07434-155">В процессе разработки приложения разработчику очень важно принимать осознанные решения относительно этих аспектов, учитывая их компромиссы.</span><span class="sxs-lookup"><span data-stu-id="07434-155">It’s important for a developer to make informed choices about these options and their trade-offs during the application design process.</span></span>

<span data-ttu-id="07434-156">Популярный шаблон разработки — объединение нескольких клиентов в одной или в нескольких базах данных.</span><span class="sxs-lookup"><span data-stu-id="07434-156">A popular development pattern is to pack multiple tenants into one or a few databases.</span></span> <span data-ttu-id="07434-157">Преимуществом этого подхода является более низкая стоимость, так как вы платите за небольшое количество баз данных, и относительная простота работы с ограниченным количеством баз данных.</span><span class="sxs-lookup"><span data-stu-id="07434-157">The benefits of this approach are a lower cost because you pay for a few databases, and the relative simplicity of working with a limited number of databases.</span></span> <span data-ttu-id="07434-158">Но со временем разработчик мультитенантного приложения SaaS увидит, что у этого варианта есть существенные недостатки, касающиеся изоляции и масштабируемости клиентов.</span><span class="sxs-lookup"><span data-stu-id="07434-158">But over time, a SaaS multi-tenant application developer will realize that this choice has substantial downsides in tenant isolation and scalability.</span></span> <span data-ttu-id="07434-159">Когда возникает необходимость в изоляции клиентов, приходится прилагать дополнительные усилия, чтобы защитить данные клиента в общем хранилище от несанкционированного доступа или "шумных соседей".</span><span class="sxs-lookup"><span data-stu-id="07434-159">If tenant isolation becomes important, additional effort is required to protect tenant data in shared storage from unauthorized access or noisy neighbors.</span></span> <span data-ttu-id="07434-160">Из-за этих дополнительных усилий процесс разработки может значительно усложниться, а затраты на поддержку изоляции — повыситься.</span><span class="sxs-lookup"><span data-stu-id="07434-160">This additional effort might significantly boost development efforts and isolation maintenance costs.</span></span> <span data-ttu-id="07434-161">Аналогичным образом, если необходимо добавить клиентов, потребуется определенный опыт, чтобы с помощью этого шаблона разработки перераспределить данные клиента между базами данных для надлежащего масштабирования уровня данных приложения.</span><span class="sxs-lookup"><span data-stu-id="07434-161">Similarly, if adding tenants is required, this design pattern typically requires expertise to redistribute tenant data across databases to properly scale the data tier of an application.</span></span>  

<span data-ttu-id="07434-162">Изоляция клиентов зачастую является фундаментальным требованием в мультитенантных приложениях SaaS, предназначенных для предприятий и организаций.</span><span class="sxs-lookup"><span data-stu-id="07434-162">Tenant isolation often is a fundamental requirement in SaaS multi-tenant applications that cater to businesses and organizations.</span></span> <span data-ttu-id="07434-163">Разработчиков привлекают явные преимущества простоты и стоимости, и они игнорируют изоляцию клиентов и масштабируемость.</span><span class="sxs-lookup"><span data-stu-id="07434-163">A developer might be tempted by perceived advantages in simplicity and cost over tenant isolation and scalability.</span></span> <span data-ttu-id="07434-164">Из-за такого компромисса в будущем придется приложить дополнительные усилия и потратить дополнительные средства, так как по мере роста службы требования к изоляции клиентов становятся все более важными и должны выполняться на уровне приложения.</span><span class="sxs-lookup"><span data-stu-id="07434-164">This trade-off can prove complex and expensive as the service grows and tenant isolation requirements become more important and managed at the application layer.</span></span> <span data-ttu-id="07434-165">Тем не менее для мультитенантных приложений, предоставляющих потребительские службы для пользователей напрямую, изоляция клиентов может оказаться не столь приоритетной, как оптимизация стоимости облачных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="07434-165">However, in multi-tenant applications that provide a direct, consumer-facing service to customers, tenant isolation might be a lower priority than optimizing for cloud resource cost.</span></span>

## <a name="multi-tenant-data-models"></a><span data-ttu-id="07434-166">Мультитенантные модели данных</span><span class="sxs-lookup"><span data-stu-id="07434-166">Multi-tenant data models</span></span>
<span data-ttu-id="07434-167">Общие рекомендации по разработке для размещения данных клиента можно представить в виде трех отдельных моделей, показанных на рис. 1.</span><span class="sxs-lookup"><span data-stu-id="07434-167">Common design practices for placing tenant data follow three distinct models, shown in Figure 1.</span></span>

![модели данных мультитенантного приложения](./media/sql-database-design-patterns-multi-tenancy-saas-applications/sql-database-multi-tenant-data-models.png)

<span data-ttu-id="07434-169">Рис. 1. Общие рекомендации по разработке для моделей данных мультитенантных приложений</span><span class="sxs-lookup"><span data-stu-id="07434-169">Figure 1: Common design practices for multi-tenant data models</span></span>

* <span data-ttu-id="07434-170">**База данных для каждого клиента**.</span><span class="sxs-lookup"><span data-stu-id="07434-170">**Database-per-tenant**.</span></span> <span data-ttu-id="07434-171">У каждого клиента есть своя база данных.</span><span class="sxs-lookup"><span data-stu-id="07434-171">Each tenant has its own database.</span></span> <span data-ttu-id="07434-172">Все данные конкретного клиента ограничены его базой данных и изолированы от других клиентов и их данных.</span><span class="sxs-lookup"><span data-stu-id="07434-172">All tenant-specific data is confined to the tenant’s database and isolated from other tenants and their data.</span></span>
* <span data-ttu-id="07434-173">**Сегментированная общая база данных**.</span><span class="sxs-lookup"><span data-stu-id="07434-173">**Shared database-sharded**.</span></span> <span data-ttu-id="07434-174">Несколько клиентов совместно используют одну из нескольких баз данных.</span><span class="sxs-lookup"><span data-stu-id="07434-174">Multiple tenants share one of multiple databases.</span></span> <span data-ttu-id="07434-175">Каждой базе данных назначается отдельный набор клиентов с использованием стратегии секционирования, например хэш-секционирования, секционирования по диапазонам или по спискам.</span><span class="sxs-lookup"><span data-stu-id="07434-175">A distinct set of tenants is assigned to each database by using a partitioning strategy such as hash, range, or list partitioning.</span></span> <span data-ttu-id="07434-176">Эту стратегию распределения данных часто называют сегментированием.</span><span class="sxs-lookup"><span data-stu-id="07434-176">This data distribution strategy often is referred to as sharding.</span></span>
* <span data-ttu-id="07434-177">**Отдельная общая база данных**.</span><span class="sxs-lookup"><span data-stu-id="07434-177">**Shared database-single**.</span></span> <span data-ttu-id="07434-178">Отдельная большая база данных содержит данные для всех клиентов, которые различаются по столбцу идентификатора клиента.</span><span class="sxs-lookup"><span data-stu-id="07434-178">A single, sometimes large, database contains data for all tenants, which are disambiguated in a tenant ID column.</span></span>

> [!NOTE]
> <span data-ttu-id="07434-179">Разработчик приложения может разместить разные клиенты в разных схемах баз данных, а затем использовать имя схемы для устранения неоднозначностей между разными клиентами.</span><span class="sxs-lookup"><span data-stu-id="07434-179">An application developer might choose to place different tenants in different database schemas, and then use the schema name to disambiguate the different tenants.</span></span> <span data-ttu-id="07434-180">Мы не рекомендуем использовать этот подход, так как он, как правило, требует использования динамического SQL. Кроме того, он не может обеспечить эффективное кэширование плана.</span><span class="sxs-lookup"><span data-stu-id="07434-180">We do not recommend this approach because it usually requires the use of dynamic SQL, and it can’t be effective in plan caching.</span></span> <span data-ttu-id="07434-181">В оставшейся части этой статьи для этой категории мультитенантного приложения рассматривается подход, предусматривающий использование общей таблицы.</span><span class="sxs-lookup"><span data-stu-id="07434-181">In the remainder of this article, we focus on the shared table approach for this category of multi-tenant application.</span></span>
> 
> 

## <a name="popular-multi-tenant-data-models"></a><span data-ttu-id="07434-182">Популярные модели данных мультитенантного приложения</span><span class="sxs-lookup"><span data-stu-id="07434-182">Popular multi-tenant data models</span></span>
<span data-ttu-id="07434-183">Очень важно оценивать различные типы моделей данных мультитенантного приложения с точки зрения компромиссов разработки приложения, которые мы уже обозначили.</span><span class="sxs-lookup"><span data-stu-id="07434-183">It’s important to evaluate the different types of multi-tenant data models in terms of the application design trade-offs we’ve already identified.</span></span> <span data-ttu-id="07434-184">Эти факторы позволяют охарактеризовать три самые распространенные модели данных мультитенантного приложения, описанные ранее, и соответствующее использование базы данных, как показано на рис. 2.</span><span class="sxs-lookup"><span data-stu-id="07434-184">These factors help characterize the three most common multi-tenant data models described earlier and their database usage as shown in Figure 2.</span></span>

* <span data-ttu-id="07434-185">**Изоляция**.</span><span class="sxs-lookup"><span data-stu-id="07434-185">**Isolation**.</span></span> <span data-ttu-id="07434-186">Уровень изоляции клиентов — это мера, определяющая степень изоляции клиентов, которой можно добиться при использовании модели данных.</span><span class="sxs-lookup"><span data-stu-id="07434-186">The degree of isolation between tenants can be a measure of how much tenant isolation a data model achieves.</span></span>
* <span data-ttu-id="07434-187">**Стоимость облачных ресурсов**.</span><span class="sxs-lookup"><span data-stu-id="07434-187">**Cloud resource cost**.</span></span> <span data-ttu-id="07434-188">При оптимизации стоимости облачных ресурсов учитывается объем общих ресурсов для клиентов.</span><span class="sxs-lookup"><span data-stu-id="07434-188">The amount of resource sharing between tenants can optimize cloud resource cost.</span></span> <span data-ttu-id="07434-189">Стоимость ресурсов можно определить как стоимость вычислительных ресурсов и ресурсов хранения.</span><span class="sxs-lookup"><span data-stu-id="07434-189">A resource can be defined as the compute and storage cost.</span></span>
* <span data-ttu-id="07434-190">**Стоимость разработки и выполнения операций**.</span><span class="sxs-lookup"><span data-stu-id="07434-190">**DevOps cost**.</span></span> <span data-ttu-id="07434-191">Простота разработки и развертывания приложений, а также управления ими позволяет уменьшить общую стоимость работы приложения SaaS.</span><span class="sxs-lookup"><span data-stu-id="07434-191">The ease of application development, deployment, and manageability reduces overall SaaS operation cost.</span></span>  

<span data-ttu-id="07434-192">На рис. 2 на оси Y показан уровень изоляции клиентов.</span><span class="sxs-lookup"><span data-stu-id="07434-192">In Figure 2, the Y axis shows the level of tenant isolation.</span></span> <span data-ttu-id="07434-193">На оси X показан уровень совместного использования ресурсов.</span><span class="sxs-lookup"><span data-stu-id="07434-193">The X axis shows the level of resource sharing.</span></span> <span data-ttu-id="07434-194">Серая диагональная стрелка посередине указывает направление стоимости разработки и операций в сторону увеличения или уменьшения.</span><span class="sxs-lookup"><span data-stu-id="07434-194">The gray, diagonal arrow in the middle indicates the direction of DevOps costs, tending to increase or decrease.</span></span>

![Популярные шаблоны разработки мультитенантного приложения](./media/sql-database-design-patterns-multi-tenancy-saas-applications/sql-database-popular-application-patterns.png)

<span data-ttu-id="07434-196">Рис. 2. Популярные мультитенантные модели данных</span><span class="sxs-lookup"><span data-stu-id="07434-196">Figure 2: Popular multi-tenant data models</span></span>

<span data-ttu-id="07434-197">На рисунке 2 в нижнем правом квадранте представлен шаблон приложения, в котором используется подход с применением потенциально большой отдельной общей базы данных и общей таблицы (или отдельной схемы).</span><span class="sxs-lookup"><span data-stu-id="07434-197">The lower-right quadrant in Figure 2 shows an application pattern that uses a potentially large, shared single database, and the shared table (or separate schema) approach.</span></span> <span data-ttu-id="07434-198">Этот вариант подходит для совместного использования ресурсов, так как все клиенты используют одни и те же ресурсы базы данных (ЦП, память, операции ввода-вывода) в одной базе данных.</span><span class="sxs-lookup"><span data-stu-id="07434-198">It's good for resource sharing because all tenants use the same database resources (CPU, memory, input/output) in a single database.</span></span> <span data-ttu-id="07434-199">Но изоляция клиентов ограничена.</span><span class="sxs-lookup"><span data-stu-id="07434-199">But tenant isolation is limited.</span></span> <span data-ttu-id="07434-200">Возможно, потребуется принять дополнительные меры, чтобы защитить клиенты друг от друга на уровне приложения.</span><span class="sxs-lookup"><span data-stu-id="07434-200">You might need to take additional steps to protect tenants from each other at the application layer.</span></span> <span data-ttu-id="07434-201">Из-за этих дополнительных действий может значительно увеличиться стоимость разработки и выполнения операций при разработке приложения и управлении им.</span><span class="sxs-lookup"><span data-stu-id="07434-201">These additional steps can significantly increase the DevOps cost of developing and managing the application.</span></span> <span data-ttu-id="07434-202">Масштабируемость ограничивается масштабом оборудования, используемого для размещения базы данных.</span><span class="sxs-lookup"><span data-stu-id="07434-202">Scalability is limited by the scale of the hardware that hosts the database.</span></span>

<span data-ttu-id="07434-203">На рис. 2 в нижнем левом квадранте показаны несколько клиентов, сегментированных между несколькими базами данных (как правило, между разными единицами масштабирования оборудования).</span><span class="sxs-lookup"><span data-stu-id="07434-203">The lower-left quadrant in Figure 2 illustrates multiple tenants sharded across multiple databases (typically, different hardware scale units).</span></span> <span data-ttu-id="07434-204">В каждой базе данных содержится подмножество клиентов. Такой подход решает проблему масштабируемости других шаблонов.</span><span class="sxs-lookup"><span data-stu-id="07434-204">Each database hosts a subset of tenants, which addresses the scalability concern of other patterns.</span></span> <span data-ttu-id="07434-205">Если требуется дополнительная емкость для добавления клиентов, их можно легко разместить в новых базах данных, выделенных новым единицам масштабирования оборудования.</span><span class="sxs-lookup"><span data-stu-id="07434-205">If more capacity is required for more tenants, you can easily place the tenants on new databases allocated to new hardware scale units.</span></span> <span data-ttu-id="07434-206">Но из-за этого уменьшится объем общих ресурсов.</span><span class="sxs-lookup"><span data-stu-id="07434-206">However, the amount of resource sharing is reduced.</span></span> <span data-ttu-id="07434-207">Совместно использовать ресурсы могут только клиенты, размещенные в одной и той же единице масштабирования.</span><span class="sxs-lookup"><span data-stu-id="07434-207">Only tenants placed on the same scale units share resources.</span></span> <span data-ttu-id="07434-208">При этом подходе уровень изоляции клиентов меняется несущественно, так как множество клиентов по-прежнему находятся в одном размещении и для них не реализована автоматическая защита от взаимного вмешательства.</span><span class="sxs-lookup"><span data-stu-id="07434-208">This approach provides little improvement to tenant isolation because many tenants are still collocated without being automatically protected from each other’s actions.</span></span> <span data-ttu-id="07434-209">Сложность приложения остается высокой.</span><span class="sxs-lookup"><span data-stu-id="07434-209">Application complexity remains high.</span></span>

<span data-ttu-id="07434-210">Верхний левый квадрант на рис. 2 представляет собой третий подход.</span><span class="sxs-lookup"><span data-stu-id="07434-210">The upper-left quadrant in Figure 2 is the third approach.</span></span> <span data-ttu-id="07434-211">При этом данные каждого клиента помещаются в отдельную базу данных.</span><span class="sxs-lookup"><span data-stu-id="07434-211">It places each tenant’s data in its own database.</span></span> <span data-ttu-id="07434-212">Для такого подхода характерны высокий уровень изоляции клиентов и ограничение объема общих ресурсов, так как в каждой базе данных есть собственные выделенные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="07434-212">This approach has good tenant-isolation properties but limits resource sharing when each database has its own dedicated resources.</span></span> <span data-ttu-id="07434-213">Этот подход эффективен при наличии у всех клиентов прогнозируемых рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="07434-213">This approach is good if all tenants have predictable workloads.</span></span> <span data-ttu-id="07434-214">Но поставщик не может оптимизировать совместное использование ресурсов, если рабочие нагрузки клиентов становятся менее предсказуемыми.</span><span class="sxs-lookup"><span data-stu-id="07434-214">If tenant workloads become less predictable, the provider cannot optimize resource sharing.</span></span> <span data-ttu-id="07434-215">А для приложений SaaS характерна непредсказуемость.</span><span class="sxs-lookup"><span data-stu-id="07434-215">Unpredictability is common for SaaS applications.</span></span> <span data-ttu-id="07434-216">Поставщику необходимо выделить избыточное количество ресурсов в соответствии с требованиями или сократить количество ресурсов.</span><span class="sxs-lookup"><span data-stu-id="07434-216">The provider must either over-provision to meet demands or lower resources.</span></span> <span data-ttu-id="07434-217">В обоих случаях это приведет к увеличению затрат или неудовлетворенности клиентов.</span><span class="sxs-lookup"><span data-stu-id="07434-217">Either action results in either higher costs or lower tenant satisfaction.</span></span> <span data-ttu-id="07434-218">Предпочтительно увеличить объем общих ресурсов для клиентов, чтобы еще больше снизить стоимость решения.</span><span class="sxs-lookup"><span data-stu-id="07434-218">A higher degree of resource sharing across tenants becomes desirable to make the solution more cost-effective.</span></span> <span data-ttu-id="07434-219">Увеличение количества баз данных также приводит к увеличению стоимости разработки и выполнения операций при разработке и обслуживании приложений.</span><span class="sxs-lookup"><span data-stu-id="07434-219">Increasing the number of databases also increases DevOps cost to deploy and maintain the application.</span></span> <span data-ttu-id="07434-220">Несмотря на эти проблемы, этот метод обеспечивает максимальный уровень изоляции с минимальными усилиями для клиентов.</span><span class="sxs-lookup"><span data-stu-id="07434-220">Despite these concerns, this method provides the best and easiest isolation for tenants.</span></span>

<span data-ttu-id="07434-221">При выборе шаблона разработки также учитываются следующие факторы:</span><span class="sxs-lookup"><span data-stu-id="07434-221">These factors also influence the design pattern a customer chooses:</span></span>

* <span data-ttu-id="07434-222">**Владение данными клиента**.</span><span class="sxs-lookup"><span data-stu-id="07434-222">**Ownership of tenant data**.</span></span> <span data-ttu-id="07434-223">Для приложения, в котором клиенты являются владельцами своих данных, лучше всего подходит шаблон с использованием отдельной базы данных на клиента.</span><span class="sxs-lookup"><span data-stu-id="07434-223">An application in which tenants retain ownership of their own data favors the pattern of a single database per tenant.</span></span>
* <span data-ttu-id="07434-224">**Масштабирование**.</span><span class="sxs-lookup"><span data-stu-id="07434-224">**Scale**.</span></span> <span data-ttu-id="07434-225">Для приложения, предназначенного для множества клиентов, лучше всего применить подход с совместным использованием базы данных, например сегментирование.</span><span class="sxs-lookup"><span data-stu-id="07434-225">An application that targets hundreds of thousands or millions of tenants favors database sharing approaches such as sharding.</span></span> <span data-ttu-id="07434-226">В этом случае по-прежнему остаются жесткие требования к изоляции.</span><span class="sxs-lookup"><span data-stu-id="07434-226">Isolation requirements still can pose challenges.</span></span>
* <span data-ttu-id="07434-227">**Стоимость и бизнес-модель.**</span><span class="sxs-lookup"><span data-stu-id="07434-227">**Value and business model**.</span></span> <span data-ttu-id="07434-228">Если доход на клиента приложения мал (менее одного доллара), то требования к изоляции отходят на второй план. В этом случае разумно использовать общую базу данных.</span><span class="sxs-lookup"><span data-stu-id="07434-228">If an application’s per-tenant revenue if small (less than a dollar), isolation requirements become less critical and a shared database makes sense.</span></span> <span data-ttu-id="07434-229">Если доход для клиента составляет несколько долларов или более, целесообразно использовать базу данных для каждого клиента.</span><span class="sxs-lookup"><span data-stu-id="07434-229">If per-tenant revenue is a few dollars or more, a database-per-tenant model is more feasible.</span></span> <span data-ttu-id="07434-230">Благодаря этому можно снизить затраты на разработку.</span><span class="sxs-lookup"><span data-stu-id="07434-230">It might help reduce development costs.</span></span>

<span data-ttu-id="07434-231">Учитывая компромиссы разработки, как показано на рис. 2, идеальная мультитенантная модель должна предусматривать высокий уровень изоляции клиентов и оптимальный уровень совместного использования ресурсов между клиентами.</span><span class="sxs-lookup"><span data-stu-id="07434-231">Given the design trade-offs shown in Figure 2, an ideal multi-tenant model needs to incorporate good tenant isolation properties with optimal resource sharing among tenants.</span></span> <span data-ttu-id="07434-232">Эта модель подходит для категории, описанной в правом верхнем квадранте на рисунке 2.</span><span class="sxs-lookup"><span data-stu-id="07434-232">This model fits in the category described in the upper-right quadrant of Figure 2.</span></span>

## <a name="multi-tenancy-support-in-azure-sql-database"></a><span data-ttu-id="07434-233">Поддержка мультитенантности в базе данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="07434-233">Multi-tenancy support in Azure SQL Database</span></span>
<span data-ttu-id="07434-234">База данных SQL Azure поддерживает все шаблоны мультитенантных приложений, указанных на рис. 2.</span><span class="sxs-lookup"><span data-stu-id="07434-234">Azure SQL Database supports all multi-tenant application patterns outlined in Figure 2.</span></span> <span data-ttu-id="07434-235">Благодаря пулам эластичных БД она также поддерживает шаблон приложения, который объединяет в себе преимущества изоляции и совместного использования ресурсов, характерных для подхода с использованием одной базы данных для каждого клиента (см. верхний правый квадрант на рисунке 3).</span><span class="sxs-lookup"><span data-stu-id="07434-235">With elastic pools, it also supports an application pattern that combines good resource sharing and the isolation benefits of the database-per-tenant approach (see the upper-right quadrant in Figure 3).</span></span> <span data-ttu-id="07434-236">С помощью инструментов эластичных баз данных и возможностей в Базе данных SQL можно уменьшить стоимость разработки и эксплуатации приложения с несколькими базами данных (как показано в затененной области на рисунке 3).</span><span class="sxs-lookup"><span data-stu-id="07434-236">Elastic database tools and capabilities in SQL Database help reduce the cost to develop and operate an application that has many databases (shown in the shaded area in Figure 3).</span></span> <span data-ttu-id="07434-237">Эти инструменты позволяют создавать приложения, в которых используется любой из шаблонов с использованием нескольких баз данных, и управлять ими.</span><span class="sxs-lookup"><span data-stu-id="07434-237">These tools can help you build and manage applications that use any of the multi-database patterns.</span></span>

![Шаблоны в Базе данных SQL Azure](./media/sql-database-design-patterns-multi-tenancy-saas-applications/sql-database-patterns-sqldb.png)

<span data-ttu-id="07434-239">Рис. 3. Шаблоны мультитенантного приложения в базе данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="07434-239">Figure 3: Multi-tenant application patterns in Azure SQL Database</span></span>

## <a name="database-per-tenant-model-with-elastic-pools-and-tools"></a><span data-ttu-id="07434-240">Модель, предусматривающая использование одной базы данных для каждого клиента, с пулами и инструментами эластичных БД</span><span class="sxs-lookup"><span data-stu-id="07434-240">Database-per-tenant model with elastic pools and tools</span></span>
<span data-ttu-id="07434-241">Пулы эластичных БД в Базе данных SQL объединяют преимущества изоляции клиентов и совместного использования ресурсов в базах данных. Таким образом, улучшается поддержка подхода с использованием базы данных для каждого клиента.</span><span class="sxs-lookup"><span data-stu-id="07434-241">Elastic pools in SQL Database combine tenant isolation with resource sharing among tenant databases to better support the database-per-tenant approach.</span></span> <span data-ttu-id="07434-242">База данных SQL является решением уровня данных для поставщиков SaaS, которые создают мультитенантные приложения.</span><span class="sxs-lookup"><span data-stu-id="07434-242">SQL Database is a data tier solution for SaaS providers who build multi-tenant applications.</span></span> <span data-ttu-id="07434-243">Задача предоставления клиентам общего доступа к ресурсам перемещается с уровня приложения на уровень службы базы данных.</span><span class="sxs-lookup"><span data-stu-id="07434-243">The burden of resource sharing among tenants shifts from the application layer to the database service layer.</span></span> <span data-ttu-id="07434-244">Управление или выполнение запросов в масштабе в нескольких базах данных упрощается благодаря заданиям обработки эластичных БД, эластичным запросам, эластичным транзакциям и клиентской библиотеке эластичной базы данных.</span><span class="sxs-lookup"><span data-stu-id="07434-244">The complexity of managing and querying at scale across databases is simplified with elastic jobs, elastic query, elastic transactions, and the elastic database client library.</span></span>

| <span data-ttu-id="07434-245">Требования к приложению</span><span class="sxs-lookup"><span data-stu-id="07434-245">Application requirements</span></span> | <span data-ttu-id="07434-246">Возможности Базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="07434-246">SQL database capabilities</span></span> |
| --- | --- |
| <span data-ttu-id="07434-247">Изоляция клиентов и совместное использование ресурсов</span><span class="sxs-lookup"><span data-stu-id="07434-247">Tenant isolation and resource sharing</span></span> |<span data-ttu-id="07434-248">[Пулы эластичных БД](sql-database-elastic-pool.md)позволяют выделить пул ресурсов Базы данных SQL и распределить эти ресурсы между разными базами данных.</span><span class="sxs-lookup"><span data-stu-id="07434-248">[Elastic pools](sql-database-elastic-pool.md): Allocate a pool of SQL Database resources and share the resources across various databases.</span></span> <span data-ttu-id="07434-249">Кроме того, отдельные базы данных могут извлекать из пула ресурсы, необходимые при пиковом потреблении емкости из-за изменений рабочей нагрузки клиентов.</span><span class="sxs-lookup"><span data-stu-id="07434-249">Also, individual databases can draw as much resources from the pool as needed to accommodate capacity demand spikes due to changes in tenant workloads.</span></span> <span data-ttu-id="07434-250">При необходимости масштаб пула эластичных БД можно увеличить или уменьшить.</span><span class="sxs-lookup"><span data-stu-id="07434-250">The elastic pool itself can be scaled up or down as needed.</span></span> <span data-ttu-id="07434-251">Пулы эластичных БД также обеспечивают простоту управления, мониторинга и устранения неполадок на уровне пула.</span><span class="sxs-lookup"><span data-stu-id="07434-251">Elastic pools also provide ease of manageability and monitoring and troubleshooting at the pool level.</span></span> |
| <span data-ttu-id="07434-252">Простота разработки и выполнения операций в базах данных</span><span class="sxs-lookup"><span data-stu-id="07434-252">Ease of DevOps across databases</span></span> |<span data-ttu-id="07434-253">[Пулы эластичных БД](sql-database-elastic-pool.md) (см. выше).</span><span class="sxs-lookup"><span data-stu-id="07434-253">[Elastic pools](sql-database-elastic-pool.md): As noted earlier.</span></span> |
| | <span data-ttu-id="07434-254">[Эластичные запросы](sql-database-elastic-query-horizontal-partitioning.md)позволяют выполнять запросы к базам данных для формирования отчетов или выполнения анализа между клиентами.</span><span class="sxs-lookup"><span data-stu-id="07434-254">[Elastic query](sql-database-elastic-query-horizontal-partitioning.md): Query across databases for reporting or cross-tenant analysis.</span></span> |
| | <span data-ttu-id="07434-255">[Задания обработки эластичных БД](sql-database-elastic-jobs-overview.md)упаковывают и надежно развертывают операции обслуживания или изменения схемы в нескольких базах данных.</span><span class="sxs-lookup"><span data-stu-id="07434-255">[Elastic jobs](sql-database-elastic-jobs-overview.md): Package and reliably deploy database maintenance operations or database schema changes to multiple databases.</span></span> |
| | <span data-ttu-id="07434-256">[Эластичные транзакции](sql-database-elastic-transactions-overview.md)обрабатывают изменения в нескольких базах данных в атомарном и изолированном режиме.</span><span class="sxs-lookup"><span data-stu-id="07434-256">[Elastic transactions](sql-database-elastic-transactions-overview.md): Process changes to several databases in an atomic and isolated way.</span></span> <span data-ttu-id="07434-257">Эластичные транзакции необходимы, если приложение требует абсолютно гарантированного выполнения операций с несколькими базами данных.</span><span class="sxs-lookup"><span data-stu-id="07434-257">Elastic transactions are needed when applications need “all or nothing” guarantees over several database operations.</span></span> |
| | <span data-ttu-id="07434-258">[Клиентская библиотека эластичной базы данных](sql-database-elastic-database-client-library.md)обеспечивает управление распределением данных и сопоставляет клиенты с базами данных.</span><span class="sxs-lookup"><span data-stu-id="07434-258">[Elastic database client library](sql-database-elastic-database-client-library.md): Manage data distributions and map tenants to databases.</span></span> |

## <a name="shared-models"></a><span data-ttu-id="07434-259">Общие модели</span><span class="sxs-lookup"><span data-stu-id="07434-259">Shared models</span></span>
<span data-ttu-id="07434-260">Как описано выше, для большинства поставщиков SaaS подходы с использованием общей модели могут создавать проблемы с изоляцией клиентов, а также вызывать трудности при разработке и обслуживании приложений.</span><span class="sxs-lookup"><span data-stu-id="07434-260">As described earlier, for most SaaS providers, a shared model approach might pose problems with tenant isolation issues and complexities with application development and maintenance.</span></span> <span data-ttu-id="07434-261">Но для мультитенантных приложений, предоставляющих службы пользователям напрямую, требования к изоляции клиентов могут быть не такими приоритетными, как оптимизация затрат.</span><span class="sxs-lookup"><span data-stu-id="07434-261">However, for multi-tenant applications that provide a service directly to consumers, tenant isolation requirements may not be as high a priority as minimizing cost.</span></span> <span data-ttu-id="07434-262">В них можно плотно разместить клиенты в одной или нескольких базах данных, чтобы снизить затраты.</span><span class="sxs-lookup"><span data-stu-id="07434-262">They might be able to pack tenants in one or more databases at a high density to reduce costs.</span></span> <span data-ttu-id="07434-263">Модели с общими базами данных, в которых используется одна или несколько сегментированных баз данных, повышают эффективность совместного использования ресурсов и уменьшают совокупную стоимость.</span><span class="sxs-lookup"><span data-stu-id="07434-263">Shared-database models using a single database or multiple sharded databases might result in additional efficiencies in resource sharing and overall cost.</span></span> <span data-ttu-id="07434-264">База данных SQL Azure предоставляет некоторые возможности, которые позволяют клиентам повысить безопасность и обеспечить управление путем изоляции в масштабе на уровне данных.</span><span class="sxs-lookup"><span data-stu-id="07434-264">Azure SQL Database provides some features that help customers build isolation for improved security and management at scale in the data tier.</span></span>

| <span data-ttu-id="07434-265">Требования к приложению</span><span class="sxs-lookup"><span data-stu-id="07434-265">Application requirements</span></span> | <span data-ttu-id="07434-266">Возможности Базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="07434-266">SQL database capabilities</span></span> |
| --- | --- |
| <span data-ttu-id="07434-267">Возможности обеспечения защиты путем изоляции</span><span class="sxs-lookup"><span data-stu-id="07434-267">Security isolation features</span></span> |[<span data-ttu-id="07434-268">Безопасность на уровне строк</span><span class="sxs-lookup"><span data-stu-id="07434-268">Row-level security</span></span>](https://msdn.microsoft.com/library/dn765131.aspx) |
| [<span data-ttu-id="07434-269">Схема базы данных</span><span class="sxs-lookup"><span data-stu-id="07434-269">Database schema</span></span>](https://msdn.microsoft.com/library/dd207005.aspx) | |
| <span data-ttu-id="07434-270">Простота разработки и выполнения операций в базах данных</span><span class="sxs-lookup"><span data-stu-id="07434-270">Ease of DevOps across databases</span></span> |[<span data-ttu-id="07434-271">Запросы к эластичным БД</span><span class="sxs-lookup"><span data-stu-id="07434-271">Elastic query</span></span>](sql-database-elastic-query-horizontal-partitioning.md) |
| | [<span data-ttu-id="07434-272">Задания обработки эластичных БД</span><span class="sxs-lookup"><span data-stu-id="07434-272">Elastic jobs</span></span>](sql-database-elastic-jobs-overview.md) |
| | [<span data-ttu-id="07434-273">Эластичные транзакции</span><span class="sxs-lookup"><span data-stu-id="07434-273">Elastic transactions</span></span>](sql-database-elastic-transactions-overview.md) |
| | [<span data-ttu-id="07434-274">Клиентская библиотека эластичной базы данных</span><span class="sxs-lookup"><span data-stu-id="07434-274">Elastic database client library</span></span>](sql-database-elastic-database-client-library.md) |
| | [<span data-ttu-id="07434-275">Разделение и объединение эластичной базы данных</span><span class="sxs-lookup"><span data-stu-id="07434-275">Elastic database split and merge</span></span>](sql-database-elastic-scale-overview-split-and-merge.md) |

## <a name="summary"></a><span data-ttu-id="07434-276">Сводка</span><span class="sxs-lookup"><span data-stu-id="07434-276">Summary</span></span>
<span data-ttu-id="07434-277">Требования к изоляции клиентов важны для большинства мультитенантных приложений SaaS.</span><span class="sxs-lookup"><span data-stu-id="07434-277">Tenant isolation requirements are important for most SaaS multi-tenant applications.</span></span> <span data-ttu-id="07434-278">Самый лучший вариант с точки зрения изоляции — это подход с использованием одной базы данных для каждого клиента.</span><span class="sxs-lookup"><span data-stu-id="07434-278">The best option to provide isolation leans heavily toward the database-per-tenant approach.</span></span> <span data-ttu-id="07434-279">Остальные два подхода требуют множества дополнительных действий на уровне приложения. Изоляцию при этом должны обеспечивать опытные разработчики, что заметно повышает затраты и риск.</span><span class="sxs-lookup"><span data-stu-id="07434-279">The other two approaches require investments in complex application layers that require skilled development staff to provide isolation, which significantly increases cost and risk.</span></span> <span data-ttu-id="07434-280">Если требования к изоляции не учитываются на ранней стадии разработки службы, в первых двух моделях со временем это может создать больше затрат.</span><span class="sxs-lookup"><span data-stu-id="07434-280">If isolation requirements are not accounted for early in the service development, retrofitting them can be even more costly in the first two models.</span></span> <span data-ttu-id="07434-281">Основные недостатки модели с использованием одной базы данных для каждого клиента связаны с увеличением стоимости облачных ресурсов, вызванным ограниченным совместным использованием, а также обслуживанием множества баз данных и управлением ими.</span><span class="sxs-lookup"><span data-stu-id="07434-281">The main drawbacks associated with the database-per-tenant model are related to increased cloud resource costs due to reduced sharing, and maintaining and managing many databases.</span></span> <span data-ttu-id="07434-282">Зачастую разработчикам приложений SaaS очень сложно идти на эти компромиссы.</span><span class="sxs-lookup"><span data-stu-id="07434-282">SaaS application developers often struggle when they make these trade-offs.</span></span>

<span data-ttu-id="07434-283">Хотя эти компромиссы и могут быть главными препятствиями для большинства поставщиков облачных служб баз данных, пул эластичных БД и возможности эластичных баз данных Базы данных Azure SQL позволяют устранить их.</span><span class="sxs-lookup"><span data-stu-id="07434-283">Although trade-offs might be major barriers with most cloud database service providers, Azure SQL Database eliminates the barriers with its elastic pool and elastic database capabilities.</span></span> <span data-ttu-id="07434-284">Разработчики SaaS могут сочетать характеристики изоляции, которые предлагает модель с использованием одной базы данных для каждого клиента, оптимизировать совместное использование ресурсов и применять улучшенное управление множеством баз данных, используя пулы эластичных БД и связанные инструменты.</span><span class="sxs-lookup"><span data-stu-id="07434-284">SaaS developers can combine the isolation characteristics of a database-per-tenant model and optimize resource sharing and the manageability improvements of many databases by using elastic pools and associated tools.</span></span>

<span data-ttu-id="07434-285">Для поставщиков мультитенантных приложений, которые не предъявляют требования к изоляции клиентов и могут плотно разместить клиентов в базе данных, могут быть полезны общие модели данных. Они позволят повысить эффективность совместного использования ресурсов и уменьшить общую стоимость.</span><span class="sxs-lookup"><span data-stu-id="07434-285">Multi-tenant application providers who have no tenant isolation requirements and who can pack tenants in a database at a high density might find that shared data models result in additional efficiency in resource sharing and reduce overall cost.</span></span> <span data-ttu-id="07434-286">Используя средства эластичных баз данных, библиотеки сегментирования и функции обеспечения безопасности базы данных SQL Azure, поставщики SaaS могут создавать такие приложения и управлять ими.</span><span class="sxs-lookup"><span data-stu-id="07434-286">Azure SQL Database elastic database tools, sharding libraries, and security features help SaaS providers build and manage multi-tenant applications.</span></span>

## <a name="next-steps"></a><span data-ttu-id="07434-287">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="07434-287">Next steps</span></span>
<span data-ttu-id="07434-288">[Приступите к работе с инструментами эластичных баз данных](sql-database-elastic-scale-get-started.md) с помощью примера приложения, демонстрирующего клиентскую библиотеку.</span><span class="sxs-lookup"><span data-stu-id="07434-288">[Get started with elastic database tools](sql-database-elastic-scale-get-started.md) with a sample app that demonstrates the client library.</span></span>

<span data-ttu-id="07434-289">Создайте [настраиваемую панель мониторинга пула эластичных БД для SaaS](https://github.com/Microsoft/sql-server-samples/tree/master/samples/manage/azure-sql-db-elastic-pools-custom-dashboard) с помощью примера приложения, использующего пулы эластичных БД для экономичного и масштабируемого решения базы данных.</span><span class="sxs-lookup"><span data-stu-id="07434-289">Create an [elastic pool custom dashboard for SaaS](https://github.com/Microsoft/sql-server-samples/tree/master/samples/manage/azure-sql-db-elastic-pools-custom-dashboard) with a sample app that uses elastic pools for a cost-effective, scalable database solution.</span></span>

<span data-ttu-id="07434-290">Воспользуйтесь инструментами Базы данных SQL Azure, чтобы [перенести имеющиеся базы данных для масштабирования](sql-database-elastic-convert-to-use-elastic-tools.md).</span><span class="sxs-lookup"><span data-stu-id="07434-290">Use the Azure SQL Database tools to [migrate existing databases to scale out](sql-database-elastic-convert-to-use-elastic-tools.md).</span></span>

<span data-ttu-id="07434-291">О том, как создать эластичный пул с помощью портала Azure, можно узнать в разделе [Создание эластичного пула](sql-database-elastic-pool-manage-portal.md).</span><span class="sxs-lookup"><span data-stu-id="07434-291">To create an elastic pool using the Azure portal, see [create an elastic pool](sql-database-elastic-pool-manage-portal.md).</span></span>  

<span data-ttu-id="07434-292">Узнайте, как осуществлять [мониторинг пула эластичных БД и управлять им](sql-database-elastic-pool-manage-portal.md).</span><span class="sxs-lookup"><span data-stu-id="07434-292">Learn how to [monitor and manage an elastic pool](sql-database-elastic-pool-manage-portal.md).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="07434-293">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="07434-293">Additional resources</span></span>

* [<span data-ttu-id="07434-294">Развертывание и изучение мультитенантного приложения SaaS, использующего базу данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="07434-294">Deploy and explore a multi-tenant application that uses Azure SQL Database - Wingtip SaaS</span></span>](sql-database-saas-tutorial.md)
* [<span data-ttu-id="07434-295">Что такое пул эластичных БД Azure?</span><span class="sxs-lookup"><span data-stu-id="07434-295">What is an Azure elastic pool?</span></span>](sql-database-elastic-pool.md)
* [<span data-ttu-id="07434-296">Общие сведения о возможностях эластичных баз данных</span><span class="sxs-lookup"><span data-stu-id="07434-296">Scaling out with Azure SQL Database</span></span>](sql-database-elastic-scale-introduction.md)
* [<span data-ttu-id="07434-297">Мультитенантные приложения со средствами эластичных баз данных и безопасностью на уровне строк</span><span class="sxs-lookup"><span data-stu-id="07434-297">multi-tenant applications with elastic database tools and row-level security</span></span>](sql-database-elastic-tools-multi-tenant-row-level-security.md)
* <span data-ttu-id="07434-298">[Authenticate using Azure AD and OpenID Connect](../guidance/guidance-multitenant-identity-authenticate.md) (Проверка подлинности с помощью Azure AD и OpenID Connect)</span><span class="sxs-lookup"><span data-stu-id="07434-298">[Authentication in multi-tenant apps by using Azure Active Directory and OpenID Connect](../guidance/guidance-multitenant-identity-authenticate.md)</span></span>
* [<span data-ttu-id="07434-299">Сведения о приложении Tailspin Surveys</span><span class="sxs-lookup"><span data-stu-id="07434-299">Tailspin Surveys application</span></span>](../guidance/guidance-multitenant-identity-tailspin.md)


## <a name="questions-and-feature-requests"></a><span data-ttu-id="07434-300">Вопросы и запросы на функции</span><span class="sxs-lookup"><span data-stu-id="07434-300">Questions and feature requests</span></span>

<span data-ttu-id="07434-301">Вопросы можно задать на [форуме по Базе данных SQL](http://social.msdn.microsoft.com/forums/azure/home?forum=ssdsgetstarted).</span><span class="sxs-lookup"><span data-stu-id="07434-301">For questions, find us in the [SQL Database forum](http://social.msdn.microsoft.com/forums/azure/home?forum=ssdsgetstarted).</span></span> <span data-ttu-id="07434-302">Запрос на функцию можно добавить на [форуме обратной связи Базы данных SQL](https://feedback.azure.com/forums/217321-sql-database/).</span><span class="sxs-lookup"><span data-stu-id="07434-302">Add a feature request in the [SQL Database feedback forum](https://feedback.azure.com/forums/217321-sql-database/).</span></span>

