---
title: "aaaUse аналитика журналов с приложениями базы данных SQL с несколькими клиентами | Документы Microsoft"
description: "Настроить и использовать для анализа журналов (OMS) с приложением Wingtip SaaS образца базы данных SQL Azure hello"
keywords: "руководство по базе данных sql"
services: sql-database
documentationcenter: 
author: stevestein
manager: craigg
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: billgib; sstein
ms.openlocfilehash: fa9085ce3462939e66853faa2a3cd71e0f6c2581
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="setup-and-use-log-analytics-oms-with-hello-wingtip-saas-app"></a>Настроить и использовать для анализа журналов (OMS) с приложением Wingtip SaaS hello

В этом руководстве описывается настройка и использование *Log Analytics ([OMS](https://www.microsoft.com/cloud-platform/operations-management-suite))* для мониторинга эластичных пулов и баз данных. Она построена на hello [управления и наблюдения за производительностью учебника](sql-database-saas-tutorial-performance-monitoring.md)и показано, как toouse *анализа журналов* tooaugment hello мониторинг и предупреждение, приведенного в hello портал Azure. Служба Log Analytics особенно хорошо подходит для мониторинга и создания оповещений с возможностью масштабирования, так как она поддерживает сотни пулов и сотни тысяч баз данных. Она также обеспечивает единое решение для мониторинга, с помощью которого можно отслеживать интеграцию разных приложений и служб Azure в нескольких подписках Azure.

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * Установка и настройка Log Analytics (OMS).
> * Используйте пулы toomonitor анализа журналов и баз данных

toocomplete завершения этого учебника, убедитесь, что hello следующие предварительные требования:

* приложение Wingtip SaaS Hello развертывается. toodeploy менее чем за пять минут. в разделе [развертывание и просмотр приложения Wingtip SaaS hello](sql-database-saas-tutorial.md)
* Установите Azure PowerShell. Дополнительные сведения см. в статье [Начало работы с Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps).

Разделе hello [управления и наблюдения за производительностью учебника](sql-database-saas-tutorial-performance-monitoring.md) обсуждение hello SaaS сценариев и шаблонов, и как они влияют на требования hello на решение для мониторинга.

## <a name="monitoring-and-managing-performance-with-log-analytics-oms"></a>Мониторинг производительности и управление ею с помощью Log Analytics (OMS)

Для базы данных SQL средства мониторинга и создания оповещений доступны в базах данных и пулах. Этот встроенный мониторинга и оповещений конкретного ресурса и удобным для небольшого количества ресурсов, но менее крупных установок toomonitoring хорошо подходит или для предоставления унифицированного представления для разных ресурсов и подписки.

Log Analytics можно использовать для сценариев с большим количеством операций. Это отдельный служба Azure, которая предоставляет данные аналитики по порожденную журналы диагностики и телеметрии, собранных в рабочей области аналитики журналов, которого можно собирать данные телеметрии от многих служб и быть используется tooquery или настроить оповещения. Log Analytics предоставляет встроенный язык запросов и средства визуализации данных, позволяющие выполнять аналитику и визуализацию рабочих данных. Здравствуйте решения для анализа SQL предоставляет несколько предопределенных эластичного пула и базы данных мониторинга и предупреждений, представлений и запросов и позволяет добавлять собственные нерегламентированные запросы и сохранить их при необходимости. OMS также предоставляет конструктор пользовательского представления.

Решения рабочих областей и аналитика Analytics журнала можно открыть hello портал Azure и OMS. Hello портал Azure является hello новой точки доступа, но может находиться за портал OMS hello в некоторых областях.

### <a name="start-hello-load-generator-toocreate-data-tooanalyze"></a>Запуск hello нагрузки генератора toocreate данных tooanalyze

1. Откройте **Демонстрация PerformanceMonitoringAndManagement.ps1** в hello **интегрированной среды Сценариев PowerShell**. Не закрывайте этот скрипт необходимо toorun несколько вариантов создания hello нагрузки с помощью этого учебника.
1. Если менее 5 клиентов, подготовьте пакет tooprovide клиентов более содержательные мониторинга контекста:
   1. Чтобы выбрать скрипт **подготовки пакета клиентов**, задайте для параметра **$DemoScenario** значение 1.
   1. Нажмите клавишу **F5** toorun hello скрипта.

1. Чтобы **создать обычную нагрузку (около 40 DTU)**, задайте для параметра **$DemoScenario** значение 2.
1. Нажмите клавишу **F5** toorun hello скрипта.

## <a name="get-hello-wingtip-application-scripts"></a>Получение скриптов приложения Wingtip hello

Hello билеты Wingtip скриптов и исходный код приложения были доступны в hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) в репозитории github. Файлы скриптов, находятся в hello [папку модулей обучения](https://github.com/Microsoft/WingtipSaaS/tree/master/Learning%20Modules). Загрузите hello **модулей обучения** папки tooyour локального компьютера, поддержание его структуру папок.

## <a name="installing-and-configuring-log-analytics-and-hello-azure-sql-analytics-solution"></a>Установка и настройка службы анализа журналов и hello решения для анализа SQL Azure

Аналитика журналов представляет отдельную службу, необходимо настроить toobe. Log Analytics собирает данные журнала, телеметрию и метрики в рабочей области Log Analytics. Создайте рабочую область, которая ничем не отличается от других ресурсов в Azure. Хотя hello рабочей области не требует toobe, созданных в hello одну группу ресурсов как приложения hello наблюдении, это часто hello больше смысла. В случае hello приложение Wingtip SaaS hello это позволяет легко удалить вместе с приложением hello группы ресурсов hello toobe рабочей hello.

1. Открыть... \\Модулей обучения\\управления и наблюдения за производительностью\\анализа журналов\\*Демонстрация LogAnalytics.ps1* в hello **интегрированной среды Сценариев PowerShell**.
1. Нажмите клавишу **F5** toorun hello скрипта.

На этом этапе может открыть анализа журналов необходимо иметь в наличии hello портал Azure (или портал OMS hello). Может занять несколько минут для toobe телеметрии, собранных в рабочей области аналитики журналов hello и toobecome видимым. будет больше времени, оставьте hello системы сбора, что данные hello более интересные возможности hello Hello. Теперь это подходящий момент toograb напитков - точно так же, убедитесь, что по-прежнему запущено генератор нагрузки hello!


## <a name="use-log-analytics-and-hello-sql-analytics-solution-toomonitor-pools-and-databases"></a>Использование анализа журналов и hello пулов toomonitor решение SQL аналитики и баз данных


В этом упражнении откройте анализа журналов и toolook портала OMS hello в hello телеметрии, собранных для баз данных hello и пулы.

1. Обзор toohello [портал Azure](https://portal.azure.com) и открыть, щелкнув дополнительные службы анализа журналов, а затем поиск аналитики журналов:

   ![Открытие службы Log Analytics](media/sql-database-saas-tutorial-log-analytics/log-analytics-open.png)

1. Выберите рабочую область hello с именем *wtploganalytics -&lt;пользователя&gt;*.

1. Выберите **Обзор** tooopen hello решения аналитики журналов в hello портал Azure.
   ![Ссылка на параметр "Обзор"](media/sql-database-saas-tutorial-log-analytics/click-overview.png)

    **ВАЖНЫЕ**: может занять несколько минут, прежде чем решение hello. Подождите.

1. Щелкните hello tooopen плитки SQL Azure Analytics его.

    ![Обзор](media/sql-database-saas-tutorial-log-analytics/overview.png)

    ![Аналитика](media/sql-database-saas-tutorial-log-analytics/analytics.png)

1. представление в прокручивает колонке решения hello сторону Hello с собственный полосы прокрутки внизу hello (обновление hello колонке при необходимости).

1. Просмотр hello различные представления, нажав на них или для отдельных ресурсов tooopen explorer перехода, где можно использовать ползунок времени hello в hello сверху слева или щелкните на вертикальной панели toofocus в на уже интервала времени. С этим представлением можно выбрать отдельные базы данных или пулы toofocus определенных ресурсов.

    ![Диаграмма](media/sql-database-saas-tutorial-log-analytics/chart.png)

1. В колонке решения hello при прокрутке toohello правого вы увидите некоторые сохраненные запросы, можно щелкнуть tooopen и исследовать. Вы можете поэкспериментировать с их изменением, а затем сохранить интересные сформированные запросы, которые можно будет повторно открыть и использовать с другими ресурсами.

1. В колонке рабочей области аналитики журналов hello выберите решение hello tooopen портал OMS существует.

    ![OMS](media/sql-database-saas-tutorial-log-analytics/oms.png)

1. На портале OMS hello можно настроить оповещения. Щелкните hello предупреждения часть hello представление базы данных DTU.

1. В hello поиска журналов представление, которое отображается, вы увидите гистограмму, представленному метрик hello.

    ![Поиск в журналах](media/sql-database-saas-tutorial-log-analytics/log-search.png)

1. При нажатии на предупреждение в панели инструментов hello вы будет конфигурации оповещений может toosee hello и его можно изменить.

    ![Добавление правила оповещения](media/sql-database-saas-tutorial-log-analytics/add-alert.png)

Привет, мониторинга и оповещений в службе анализа журналов и OMS основан на запросах над данными hello в рабочей области hello, в отличие от hello предупреждения в колонке ресурсов каждого конкретного ресурса. Таким образом, вместо того чтобы определять оповещение для каждой базы данных, можно определить одно общее оповещение для всех баз данных или создать оповещение, использующее составной запрос по нескольким типам ресурсов. Запросы только ограничивается hello данные, доступные в рабочей области hello.

Служба аналитики журналов для базы данных SQL, плата за зависимости от объема данных hello в рабочей области hello. В этом учебнике вы создали бесплатную рабочую область, которой является ограниченной too500MB в день. При достижении этого предела данные больше не будут добавлены toohello рабочей области.


## <a name="next-steps"></a>Дальнейшие действия

Из этого руководства вы узнали, как выполнять такие задачи:

> [!div class="checklist"]
> * Установка и настройка Log Analytics (OMS).
> * Используйте пулы toomonitor анализа журналов и баз данных

[Выполнение распределенных запросов в нескольких базах данных SQL Azure](sql-database-saas-tutorial-tenant-analytics.md)

## <a name="additional-resources"></a>Дополнительные ресурсы

* [Дополнительные учебники, которые созданы на основе hello первоначального развертывания приложения Wingtip SaaS](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)
* [Мониторинг базы данных SQL Azure с помощью служб анализа SQL Azure (предварительная версия) в Log Analytics](../log-analytics/log-analytics-azure-sql.md).
* [OMS](https://blogs.technet.microsoft.com/msoms/2017/02/21/azure-sql-analytics-solution-public-preview/)
