---
title: "aaaSync данных (Предварительная версия) | Документы Microsoft"
description: "В этом обзоре представлена синхронизация данных SQL Azure (предварительная версия)."
services: sql-database
documentationcenter: 
author: douglaslms
manager: craigg
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: load & move data
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/27/2017
ms.author: douglasl
ms.openlocfilehash: d5b2bbd6a502ba94dba7fb309a6583d2d95cc1d4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="sync-data-across-multiple-cloud-and-on-premises-databases-with-sql-data-sync"></a>Синхронизация данных в нескольких облачных и локальных базах данных с помощью синхронизации данных SQL

Синхронизация данных SQL — это служба, построенных на базе данных SQL Azure, который позволяет синхронизировать данные hello выбрать двунаправленную по нескольким базам данных SQL и экземпляры SQL Server.

Синхронизация данных основана на концепции hello группы синхронизации. Группа синхронизации — это группы, которые должны toosynchronize баз данных.

Группа синхронизации имеет hello следующие свойства:

-   Hello **синхронизации схемы** описывает синхронизации данных.

-   Hello **направление синхронизации** может выполняться в обоих направлениях или могут передаваться только в одном направлении. То есть hello направление синхронизации, которое может быть *tooMember концентратора* или *tooHub член*, или оба.

-   Hello **интервал синхронизации** как часто выполняется синхронизация.

-   Hello **политика разрешения конфликтов** уровня политики группы, который может быть *приоритет концентратора* или *побеждает члена*.

Синхронизация данных используется Звездообразная топология toosynchronize данных. Он определяет одну из баз данных hello в группе hello как hello базы данных-концентратора. rest Hello hello баз данных являются базами данных члена. Синхронизация выполняется только между hello концентратора и отдельных членов.
-   Hello **базы данных-концентратора** должен быть базы данных SQL Azure.
-   Hello **баз данных-участников** может быть баз данных SQL, базы данных SQL Server в локальной или экземпляры SQL Server на виртуальных машинах Azure.
-   Hello **базы данных Sync** содержит метаданные hello и журнала для синхронизации данных. hello синхронизации базы данных имеет toobe базы данных SQL Azure в hello же регионе, что hello базы данных-концентратора. Hello синхронизации базы данных — клиент создан и принадлежит клиент.

> [!NOTE]
> Если вы используете в локальную базу данных, у вас есть слишком[настроить локальный агент.](https://docs.microsoft.com/en-us/azure/sql-database/sql-database-get-started-sql-data-sync)

![Синхронизация данных между базами данных](media/sql-database-sync-data/sync-data-overview.png)

## <a name="when-toouse-data-sync"></a>При синхронизации данных toouse

Синхронизация данных полезно в случаях, когда данные должны toobe поддерживает копирование toodate на несколько баз данных SQL Azure или баз данных SQL Server. Ниже приведены hello основных вариантов использования для синхронизации данных.

-   **Гибридные синхронизации данных:** Data Sync позволяет исключить синхронизации данных между локальными базами данных и баз данных SQL Azure tooenable гибридных приложений. Эта возможность может понравиться toocustomers, который собираетесь скользящего toohello облака и при tooput некоторые из своего приложения в Azure.

-   **Распределенные приложения:** во многих случаях он является полезным tooseparate разных рабочих нагрузок в различных базах данных. Например если у вас есть большой рабочей базы данных, но необходимо также toorun отчетов или анализа рабочей нагрузки на основе этих данных, является полезным toohave вторую базу данных для этой дополнительной рабочей нагрузки. Этот подход уменьшает hello влияние на производительность рабочей нагрузкой. Можно использовать эти две базы данных синхронизированы tookeep синхронизации данных.

-   **Глобально распределенные приложения**. Многие организации охватывают несколько регионов и даже несколько стран. toominimize задержки в сети, он является наиболее toohave закрыть данных в области tooyou. По синхронизации данных можно легко поддерживать баз данных в регионах по всему Здравствуй, мир! синхронизированы.

Мы не рекомендуем синхронизации данных для hello следующие сценарии:

-   Аварийное восстановление

-   масштаб чтения;

-   ETL (OLTP tooOLAP)

-   Миграция из tooAzure SQL Server в локальной базе данных SQL

## <a name="how-does-data-sync-work"></a>Как работает синхронизация данных? 

-   **Отслеживание изменения данных**. Служба синхронизации данных отслеживают изменения при помощи триггеров вставки, обновления и удаления. Hello изменения записываются в побочной таблице в базе данных пользователей hello.

-   **Синхронизация данных**. Служба синхронизации данных разработана на основе звездообразной модели. Hello концентратора синхронизируется с каждым элементом по отдельности. Изменения из hello концентратора, загруженные toohello членом, а затем изменения из члена hello не переданные toohello концентратора.

-   **Устранение конфликтов**. Служба синхронизации данных предоставляет два параметра для устранения конфликтов, *Выигрывает концентратор* и *Member wins* (Выигрывает член).
    -   При выборе *приоритет концентратора*, изменения hello в концентраторе hello всегда переписать изменения в элемент hello.
    -   При выборе *побеждает член*, hello изменения в hello член перезаписи изменений в концентраторе hello. Если имеется несколько элементов, hello окончательное значение зависит от того, какой элемент сначала синхронизируется.

## <a name="limitations-and-considerations"></a>Ограничения и рекомендации

### <a name="performance-impact"></a>Влияние на производительность
Синхронизация данных используются Вставка, обновление и удаление триггеров tootrack изменения. Он создает побочных таблиц в базе данных пользователей hello для отслеживания изменений. Действия по отслеживанию изменений оказывают влияние на рабочую нагрузку базы данных. Оцените текущий уровень служб и повысьте его, если потребуется.

### <a name="eventual-consistency"></a>Итоговая согласованность
Так как синхронизация данных основана на триггерах, транзакционная согласованность не гарантируется. Корпорация Майкрософт гарантирует, что все изменения будут внесены в конечном счете и что синхронизация данных не приведет к потере данных.

### <a name="unsupported-data-types"></a>Неподдерживаемые типы данных

-   FileStream;

-   UDT SQL или CLR;

-   XMLSchemaCollection (поддерживается XML);

-   Cursor, Timestamp, Hierarchyid.

### <a name="requirements"></a>Требования

-   Каждая таблица должна иметь первичный ключ.

-   Таблица может содержать столбец идентификаторов, не является первичным ключом hello.

-   Hello имена объектов (баз данных, таблиц и столбцов), не могут содержать hello печатных символов точки (.), левая квадратная скобка ([]) или правая квадратная квадратная скобка (]).

### <a name="limitations-on-service-and-database-dimensions"></a>Ограничения характеристик служб и баз данных

|                                                                 |                        |                             |
|-----------------------------------------------------------------|------------------------|-----------------------------|
| **Характеристики**                                                      | **Ограничение**              | **Возможное решение**              |
| Максимальное количество групп синхронизации, которым может принадлежать любая база данных       | 5                      |                             |
| Максимальное количество конечных точек в отдельной группе синхронизации              | 30                     | Создайте несколько групп синхронизации. |
| Максимальное количество локальных конечных точек в отдельной группе синхронизации | 5                      | Создайте несколько групп синхронизации. |
| Имена баз данных, таблиц, схем и столбцов                       | Имя может содержать до 50 знаков. |                             |
| Таблицы в группе синхронизации                                          | 500                    | Создайте несколько групп синхронизации. |
| Столбцы в таблице в группе синхронизации                              | 1000                   |                             |
| Размер строки данных в таблице                                        | 24 МБ                  |                             |
| Минимальный интервал синхронизации                                           | 5 мин              |                             |

## <a name="common-questions"></a>Часто задаваемые вопросы

### <a name="how-frequently-can-data-sync-synchronize-my-data"></a>Как часто функция синхронизации данных может синхронизировать мои данные? 
Минимальная частота Hello — каждые пять минут.

### <a name="can-i-use-data-sync-toosync-between-sql-server-on-premises-databases-only"></a>Можно использовать toosync синхронизации данных между локальной базы данных SQL Server только? 
Не напрямую. Можно выполнить синхронизацию между локальными базами данных SQL Server косвенно, тем не менее, путем создания базы данных-концентратора в Azure и затем добавления группы синхронизации toohello баз данных в локальной среде hello.
   
### <a name="can-i-use-data-sync-tooseed-data-from-my-production-database-tooan-empty-database-and-then-keep-them-synchronized"></a>Можно ли использовать данных tooseed синхронизации данных из рабочей базы данных tooan пустой базы данных и затем синхронизировать их? 
Да. Вручную создайте схему hello в hello новой базы данных с помощью сценариев, из исходной hello. После создания схемы hello, добавление таблиц hello tooa группы синхронизации toocopy данных hello и хранить синхронизированы.

### <a name="why-do-i-see-tables-that-i-did-not-create"></a>Почему я вижу таблицы, созданные не мной?  
Синхронизация данных создает вспомогательные таблицы в вашей базе данных для отслеживания изменений. Не удаляйте их, иначе функция синхронизации данных перестанет работать.
   
### <a name="i-got-an-error-message-that-said-cannot-insert-hello-value-null-into-hello-column-column-column-does-not-allow-nulls-what-does-this-mean-and-how-can-i-fix-hello-error"></a>Получено сообщение об ошибке, говорят, что «не удается вставить hello значение NULL в столбце hello \<столбца\>. В столбце запрещены значения NULL". Что это значит, и как можно исправить ошибку hello? 
Это сообщение об ошибке указывает один из двух следующих проблем hello:
1.  Возможно, таблица не имеет первичного ключа. toofix эту проблему, добавьте hello в tooall первичного ключа таблицы синхронизация.
2.  Возможно, в инструкции CREATE INDEX присутствует предложение WHERE. Синхронизация не обрабатывает это условие. toofix эту проблему, удалите предложение WHERE hello или вручную внести изменения hello tooall баз данных. 
 
### <a name="how-does-data-sync-handle-circular-references-that-is-when-hello-same-data-is-synced-in-multiple-sync-groups-and-keeps-changing-as-a-result"></a>Как синхронизация данных обрабатывает циклические ссылки? То есть при hello и те же данные синхронизированы в несколько групп синхронизации и меняется в результате?
Синхронизация данных не обрабатывает циклические ссылки. Быть tooavoid убедиться, что их. 

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о синхронизации данных SQL:

-   [Приступая к работе с синхронизацией данных SQL Azure (предварительная версия)](sql-database-get-started-sql-data-sync.md)

-   Полные примеры PowerShell, которые показывают, как tooconfigure синхронизации данных SQL:
    -   [Используйте PowerShell toosync между несколькими базами данных Azure SQL](scripts/sql-database-sync-data-between-sql-databases.md)
    -   [Используйте PowerShell toosync между базы данных SQL Azure и локальной базы данных SQL Server](scripts/sql-database-sync-data-between-azure-onprem.md)

-   [Загрузите hello технической документации завершения синхронизации данных SQL](https://github.com/Microsoft/sql-server-samples/raw/master/samples/features/sql-data-sync/Data_Sync_Preview_full_documentation.pdf?raw=true)

-   [Загрузить документацию по API REST для синхронизации данных SQL hello](https://github.com/Microsoft/sql-server-samples/raw/master/samples/features/sql-data-sync/Data_Sync_Preview_REST_API.pdf?raw=true)

Дополнительные сведения о Базе данных SQL:

-   [Обзор Базы данных SQL](sql-database-technical-overview.md)

-   [Управление жизненным циклом базы данных](https://msdn.microsoft.com/library/jj907294.aspx)
