---
title: "Обнаружение угроз для базы данных SQL Azure | Документация Майкрософт"
description: "Система обнаружения угроз обнаруживает подозрительную активность в базе данных, указывающую на наличие потенциальных угроз безопасности."
services: sql-database
documentationcenter: 
author: rmatchoro
manager: shaik
editor: v-romcal
ms.service: sql-database
ms.custom: security
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: On Demand
ms.date: 06/19/2017
ms.author: ronmat
ms.openlocfilehash: 889f65a796aee20d7902964b8c47af46dd9149cb
ms.sourcegitcommit: 71fa59e97b01b65f25bcae318d834358fea5224a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/11/2018
---
# <a name="sql-database-threat-detection"></a>Обнаружение угроз для базы данных SQL

Система обнаружения угроз SQL выявляет аномальные операции, указывающие на нестандартные и потенциально вредоносные попытки получить доступ к базам данных или воспользоваться их уязвимостями.

## <a name="overview"></a>Обзор

Благодаря оповещениям безопасности о подозрительной активности система обнаружения угроз формирует дополнительный уровень безопасности, позволяющий клиентам обнаруживать потенциальные угрозы по мере возникновения и реагировать на них.  Пользователи получают оповещения о подозрительных действиях с базами данных, потенциальных уязвимостях, атаках путем внедрения кода SQL и аномальных закономерностях в доступе к базам данных. Оповещения об обнаружении угроз SQL содержат сведения о подозрительных операциях и рекомендации о том, как исследовать причину угрозы и устранить ее. Пользователи могут анализировать подозрительные события с помощью [аудита базы данных SQL](sql-database-auditing.md), который позволяет определить причину таких событий (попытка получить доступ к данным в базе данных, нарушить безопасность или использовать их уязвимость). Система обнаружения угроз упрощает устранение потенциальных угроз безопасности базы данных, не требуя наличия у пользователя экспертных навыков в сфере безопасности либо умения работать в сложных системах отслеживания угроз.

Например, внедрение кода SQL — один из распространенных видов угроз безопасности веб-приложений в Интернете, используемый для получения несанкционированного доступа к приложениям, управляемым данными. Хакеры используют уязвимости приложения, чтобы ввести вредоносные инструкции SQL в поля ввода приложения, чтобы испортить или изменить данные в базе данных.

Оповещения об обнаружении угроз SQL интегрируются с оповещениями [центра безопасности Azure](https://azure.microsoft.com/en-us/services/security-center/). Каждый защищенный сервер базы данных SQL оплачивается по такому же тарифу, как и центр безопасности Azure категории "Стандартный" (15 долларов США за узел в месяц), где каждый защищенный сервер базы данных SQL считается как один узел.  

## <a name="set-up-threat-detection-for-your-database-in-the-azure-portal"></a>Настройка обнаружения угроз для базы данных с помощью портала Azure
1. Запустите портал Azure по адресу [https://portal.azure.com](https://portal.azure.com).
2. Перейдите на страницу настройки базы данных SQL, которую требуется отслеживать. На странице "Параметры" выберите **Аудит и обнаружение угроз**. 
    ![Область навигации][1]
3. На странице настройки **Аудит и обнаружение угроз** установите переключатель аудита в положение **Вкл.**, после чего отобразятся настройки обнаружения угроз.
  
    ![Область навигации][2]
4. Переведите переключатель системы обнаружения угроз в положение **ВКЛ.** .
5. Настройте список электронных адресов для получения оповещений безопасности в случае обнаружения подозрительной активности в базе данных.
6. На странице **Аудит и обнаружение угроз** щелкните **Сохранить**, чтобы сохранить новые или обновленные параметры аудита и обнаружения угроз.
       
    ![Область навигации][3]

## <a name="set-up-threat-detection-using-powershell"></a>Настройка обнаружения угроз с помощью PowerShell

Пример сценария см. в статье [Настройка аудита и обнаружения угроз для базы данных SQL с помощью PowerShell](scripts/sql-database-auditing-and-threat-detection-powershell.md).

## <a name="explore-anomalous-database-activities-upon-detection-of-a-suspicious-event"></a>Анализ подозрительной активности в базе данных при обнаружении подозрительного события
1. При обнаружении подозрительной активности в базе данных вы получите уведомление по электронной почте. <br/>
   В этом уведомлении содержится информация о подозрительном событии безопасности, в том числе характер подозрительных операций, имя базы данных, имя сервера, имя приложения, а также время, когда произошло событие. Кроме того, в уведомлении приводится информация о возможных причинах возникновения события, а также рекомендуемые действия по поиску и устранению потенциальной угрозы безопасности базы данных.<br/>
     
    ![Область навигации][4]
2. Оповещение по электронной почте содержит прямую ссылку на журнал аудита SQL. Если щелкнуть эту ссылку, откроется портал Azure и отобразятся записи аудита SQL, созданные во время подозрительного события. Щелкните запись аудита, чтобы просмотреть дополнительные сведения о подозрительных действиях с базой данных. Это упростит поиск инструкций SQL, которые были выполнены (кто получил доступ, что сделал и когда), и позволит определить, было ли событие допустимым или злоумышленным (например, была использована уязвимость приложения для атаки путем внедрения кода SQL, кто-то нарушил конфиденциальность данных и т. д.).<br/>
   ![Область навигации][5]


## <a name="explore-threat-detection-alerts-for-your-database-in-the-azure-portal"></a>Изучение оповещений об обнаружении угроз базы данных на портале Azure

Оповещения об обнаружении угроз базы данных SQL интегрируются с [центром безопасности Azure](https://azure.microsoft.com/en-us/services/security-center/). Динамическая плитка системы безопасности SQL на странице базы данных на портале Azure отображает состояние активных угроз. 

   ![Область навигации][6]
   
1. Если щелкнуть плитку системы безопасности SQL, откроется страница оповещений центра безопасности Azure, содержащая обзор активных угроз, обнаруженных в базе данных SQL. 

  ![Область навигации][7]

2. Если щелкнуть определенное оповещение, отобразятся дополнительные сведения и действия для изучения этой угрозы и устранения будущих угроз.

  ![Область навигации][8]


## <a name="next-steps"></a>Дополнительная информация

* Узнайте больше об обнаружении угроз, посетив [блог Azure](https://azure.microsoft.com/en-us/blog/azure-sql-database-threat-detection-general-availability-in-spring-2017/). 
* Узнайте больше об [аудите базы данных SQL Azure](sql-database-auditing.md).
* Узнайте больше о [центре безопасности Azure](https://docs.microsoft.com/azure/security-center/security-center-intro).
* Дополнительные сведения о ценах см. на [странице цен на базу данных SQL](https://azure.microsoft.com/en-us/pricing/details/sql-database/).  
* Пример сценария PowerShell см. в статье [Настройка аудита и обнаружения угроз для базы данных SQL с помощью PowerShell](scripts/sql-database-auditing-and-threat-detection-powershell.md).



<!--Image references-->
[1]: ./media/sql-database-threat-detection/1_td_click_on_settings.png
[2]: ./media/sql-database-threat-detection/2_td_turn_on_auditing.png
[3]: ./media/sql-database-threat-detection/3_td_turn_on_threat_detection.png
[4]: ./media/sql-database-threat-detection/4_td_email.png
[5]: ./media/sql-database-threat-detection/5_td_audit_record_details.png
[6]: ./media/sql-database-threat-detection/6_td_security_tile_view_alerts.png
[7]: ./media/sql-database-threat-detection/7_td_SQL_security_alerts_list.png
[8]: ./media/sql-database-threat-detection/8_td_SQL_security_alert_details.png


