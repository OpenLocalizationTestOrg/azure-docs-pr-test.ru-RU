---
title: "проблемы tooAzure aaaTroubleshoot общие подключения базы данных SQL"
description: "Действия tooidentify и устранение общих ошибок подключения для базы данных SQL Azure."
services: sql-database
documentationcenter: 
author: dalechen
manager: cshepard
editor: 
ms.assetid: ac463d1c-aec8-443d-b66e-fa5eadcccfa8
ms.service: sql-database
ms.custom: monitor & tune
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: daleche
ms.openlocfilehash: eb5f2d7b123a76942c7e4a84a7f475344fbcb144
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-connection-issues-tooazure-sql-database"></a><span data-ttu-id="e7550-103">Устранение проблем подключения tooAzure базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="e7550-103">Troubleshoot connection issues tooAzure SQL Database</span></span>
<span data-ttu-id="e7550-104">При сбое tooAzure hello подключения базы данных SQL, вы получаете [сообщения об ошибках](sql-database-develop-error-messages.md).</span><span class="sxs-lookup"><span data-stu-id="e7550-104">When hello connection tooAzure SQL Database fails, you receive [error messages](sql-database-develop-error-messages.md).</span></span> <span data-ttu-id="e7550-105">Эта статья представляет собой объединенный раздел, который поможет в устранении неполадок подключения к базе данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="e7550-105">This article is a centralized topic that helps you troubleshoot Azure SQL Database connectivity issues.</span></span> <span data-ttu-id="e7550-106">Представляет [hello основные причины](#cause) проблем подключения рекомендует [средством устранения неполадок](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) , помогает удостоверение hello проблему и предоставляет по устранению неполадок toosolve действия [ временные ошибки](#troubleshoot-transient-errors) и [постоянный или не является временной ошибки](#troubleshoot-persistent-errors).</span><span class="sxs-lookup"><span data-stu-id="e7550-106">It introduces [hello common causes](#cause) of connection issues, recommends [a troubleshooting tool](#try-the-troubleshooter-for-azure-sql-database-connectivity-issues) that helps you identity hello problem, and provides troubleshooting steps toosolve [transient errors](#troubleshoot-transient-errors) and [persistent or non-transient errors](#troubleshoot-persistent-errors).</span></span> 

<span data-ttu-id="e7550-107">Если возникли проблемы с подключением hello, попробуйте hello устранения действия, описанные в этой статье.</span><span class="sxs-lookup"><span data-stu-id="e7550-107">If you encounter hello connection issues, try hello troubleshoot steps that are described in this article.</span></span>
[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="cause"></a><span data-ttu-id="e7550-108">Причина:</span><span class="sxs-lookup"><span data-stu-id="e7550-108">Cause</span></span>
<span data-ttu-id="e7550-109">Проблемы подключения может быть вызвано любой из следующих hello:</span><span class="sxs-lookup"><span data-stu-id="e7550-109">Connection problems may be caused by any of hello following:</span></span>

* <span data-ttu-id="e7550-110">Сбой tooapply, рекомендации и советы по разработке во время разработки приложения hello.</span><span class="sxs-lookup"><span data-stu-id="e7550-110">Failure tooapply best practices and design guidelines during hello application design process.</span></span>  <span data-ttu-id="e7550-111">В разделе [Общие сведения о разработке базы данных SQL](sql-database-develop-overview.md) tooget работы.</span><span class="sxs-lookup"><span data-stu-id="e7550-111">See [SQL Database Development Overview](sql-database-develop-overview.md) tooget started.</span></span>
* <span data-ttu-id="e7550-112">Перенастройка базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="e7550-112">Azure SQL Database reconfiguration</span></span>
* <span data-ttu-id="e7550-113">Параметры брандмауэра</span><span class="sxs-lookup"><span data-stu-id="e7550-113">Firewall settings</span></span>
* <span data-ttu-id="e7550-114">Время ожидания подключения.</span><span class="sxs-lookup"><span data-stu-id="e7550-114">Connection time-out</span></span>
* <span data-ttu-id="e7550-115">Неправильные сведения для входа.</span><span class="sxs-lookup"><span data-stu-id="e7550-115">Incorrect login information</span></span>
* <span data-ttu-id="e7550-116">Достигнуто максимальное ограничение для некоторых ресурсов базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="e7550-116">Maximum limit reached on some Azure SQL Database resources</span></span>

<span data-ttu-id="e7550-117">Как правило tooAzure проблемы подключения базы данных SQL можно классифицировать следующим образом:</span><span class="sxs-lookup"><span data-stu-id="e7550-117">Generally, connection issues tooAzure SQL Database can be classified as follows:</span></span>

* [<span data-ttu-id="e7550-118">временные ошибки (кратковременные или возникающие периодически);</span><span class="sxs-lookup"><span data-stu-id="e7550-118">Transient errors (short-lived or intermittent)</span></span>](#troubleshoot-transient-errors)
* [<span data-ttu-id="e7550-119">постоянные или регулярно возникающие ошибки.</span><span class="sxs-lookup"><span data-stu-id="e7550-119">Persistent or non-transient errors (errors that regularly recur)</span></span>](#troubleshoot-persistent-errors)

## <a name="try-hello-troubleshooter-for-azure-sql-database-connectivity-issues"></a><span data-ttu-id="e7550-120">Повторите hello средство устранения неполадок проблем подключения к базе данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="e7550-120">Try hello troubleshooter for Azure SQL Database connectivity issues</span></span>
<span data-ttu-id="e7550-121">При возникновении определенной ошибки подключения попробуйте [этот инструмент](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), который поможет быстро выявить и устранить проблему.</span><span class="sxs-lookup"><span data-stu-id="e7550-121">If you encounter a specific connection error, try [this tool](https://support.microsoft.com/help/10085/troubleshooting-connectivity-issues-with-microsoft-azure-sql-database), which will help you quickly identity and resolve your problem.</span></span>

## <a name="troubleshoot-transient-errors"></a><span data-ttu-id="e7550-122">Устранение временных ошибок</span><span class="sxs-lookup"><span data-stu-id="e7550-122">Troubleshoot transient errors</span></span>

<span data-ttu-id="e7550-123">При подключении базы данных Azure SQL tooan приложения, появляется сообщение об ошибке после hello:</span><span class="sxs-lookup"><span data-stu-id="e7550-123">When an application connects tooan Azure SQL database, you receive hello following error message:</span></span>

```
Error code 40613: "Database <x> on server <y> is not currently available. Please retry hello connection later. If hello problem persists, contact customer support, and provide them hello session tracing ID of <z>"
```

> [!NOTE]
> <span data-ttu-id="e7550-124">Это сообщение об ошибке обычно временное (кратковременное).</span><span class="sxs-lookup"><span data-stu-id="e7550-124">This error message is typically transient (short-lived).</span></span>
> 
> 

<span data-ttu-id="e7550-125">Эта ошибка возникает при hello Azure база данных перемещена (или повторно настраивается) и приложение теряет свою базу данных SQL toohello соединения.</span><span class="sxs-lookup"><span data-stu-id="e7550-125">This error occurs when hello Azure database is being moved (or reconfigured) and your application loses its connection toohello SQL database.</span></span> <span data-ttu-id="e7550-126">События перенастройки базы данных SQL обычно происходят в запланированном случае (например, при обновлении программного обеспечения) или в незапланированном случае (например, при сбое процесса или балансировке нагрузки).</span><span class="sxs-lookup"><span data-stu-id="e7550-126">SQL database reconfiguration events occur because of a planned event (for example, a software upgrade) or an unplanned event (for example, a process crash, or load balancing).</span></span> <span data-ttu-id="e7550-127">Большей частью события перенастройки кратковременные и должны завершаться в течение 60 секунд максимум.</span><span class="sxs-lookup"><span data-stu-id="e7550-127">Most reconfiguration events are generally short-lived and should be completed in less than 60 seconds at most.</span></span> <span data-ttu-id="e7550-128">Тем не менее эти события иногда может потребоваться toofinish больше времени, например когда большой транзакции приводит восстановления длительное время.</span><span class="sxs-lookup"><span data-stu-id="e7550-128">However, these events can occasionally take longer toofinish, such as when a large transaction causes a long-running recovery.</span></span>

### <a name="steps-tooresolve-transient-connectivity-issues"></a><span data-ttu-id="e7550-129">Действия tooresolve временных неполадок</span><span class="sxs-lookup"><span data-stu-id="e7550-129">Steps tooresolve transient connectivity issues</span></span>

1. <span data-ttu-id="e7550-130">Проверьте hello [панель мониторинга службы Microsoft Azure](https://azure.microsoft.com/status) для любого известных сбоев, произошедших во время hello, во время которого hello ошибки приложения hello.</span><span class="sxs-lookup"><span data-stu-id="e7550-130">Check hello [Microsoft Azure Service Dashboard](https://azure.microsoft.com/status) for any known outages that occurred during hello time during which hello errors were reported by hello application.</span></span>
2. <span data-ttu-id="e7550-131">Приложения, которые подключаются tooa облачной службы, такие как базы данных SQL Azure следует ожидать события периодических перенастройки и реализовать повторите toohandle логику эти ошибки, а не отображает их в качестве toousers ошибок приложения.</span><span class="sxs-lookup"><span data-stu-id="e7550-131">Applications that connect tooa cloud service such as Azure SQL Database should expect periodic reconfiguration events and implement retry logic toohandle these errors instead of surfacing these as application errors toousers.</span></span> <span data-ttu-id="e7550-132">Просмотрите hello [временных ошибок](sql-database-connectivity-issues.md) раздел и hello рекомендации и правила в разработки [Общие сведения о разработке базы данных SQL](sql-database-develop-overview.md) Дополнительные сведения и общие стратегиями повтора.</span><span class="sxs-lookup"><span data-stu-id="e7550-132">Review hello [Transient errors](sql-database-connectivity-issues.md) section and hello best practices and design guidelines at [SQL Database Development Overview](sql-database-develop-overview.md) for more information and general retry strategies.</span></span> <span data-ttu-id="e7550-133">Затем ознакомьтесь с примерами кода в [библиотеке подключений для базы данных SQL и SQL Server](sql-database-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="e7550-133">Then, see code samples at [Connection Libraries for SQL Database and SQL Server](sql-database-libraries.md) for specifics.</span></span>
3. <span data-ttu-id="e7550-134">По мере приближения его ограничения ресурсов базы данных может показаться toobe временная ошибка подключения.</span><span class="sxs-lookup"><span data-stu-id="e7550-134">As a database approaches its resource limits, it can seem toobe a transient connectivity issue.</span></span> <span data-ttu-id="e7550-135">См. статью [Советы по настройке производительности базы данных SQL](sql-database-troubleshoot-performance.md).</span><span class="sxs-lookup"><span data-stu-id="e7550-135">See [Troubleshooting Performance Issues](sql-database-troubleshoot-performance.md).</span></span>
4. <span data-ttu-id="e7550-136">Если продолжить проблемы с подключением, либо если hello длительность, для которой приложения, возникает ошибка hello превышает 60 секунд или несколько вхождений hello ошибки содержатся в конкретный день, файл запрос поддержки Azure, выбрав **получения поддержки** на hello [поддержки Azure](https://azure.microsoft.com/support/options) сайта.</span><span class="sxs-lookup"><span data-stu-id="e7550-136">If connectivity problems continue, or if hello duration for which your application encounters hello error exceeds 60 seconds or if you see multiple occurrences of hello error in a given day, file an Azure support request by selecting **Get Support** on hello [Azure Support](https://azure.microsoft.com/support/options) site.</span></span>

## <a name="troubleshoot-persistent-errors"></a><span data-ttu-id="e7550-137">Устранение постоянных ошибок</span><span class="sxs-lookup"><span data-stu-id="e7550-137">Troubleshoot persistent errors</span></span>
<span data-ttu-id="e7550-138">Если tooconnect tooAzure базы данных SQL постоянно происходит сбой приложения hello, обычно указывает на проблему с одним из следующих hello:</span><span class="sxs-lookup"><span data-stu-id="e7550-138">If hello application persistently fails tooconnect tooAzure SQL Database, it usually indicates an issue with one of hello following:</span></span>

* <span data-ttu-id="e7550-139">Конфигурация брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="e7550-139">Firewall configuration.</span></span> <span data-ttu-id="e7550-140">Azure SQL Hello базы данных или на клиентском компьютере брандмауэр блокирует подключения tooAzure базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="e7550-140">hello Azure SQL database or client-side firewall is blocking connections tooAzure SQL Database.</span></span>
* <span data-ttu-id="e7550-141">Сетевые изменения конфигурации на стороне клиента hello: например, новый IP-адрес или прокси-сервер.</span><span class="sxs-lookup"><span data-stu-id="e7550-141">Network reconfiguration on hello client side: for example, a new IP address or a proxy server.</span></span>
* <span data-ttu-id="e7550-142">Ошибка пользователя: например, ошибки при вводе параметры соединения, такие как имя сервера hello в строке подключения hello.</span><span class="sxs-lookup"><span data-stu-id="e7550-142">User error: for example, mistyped connection parameters, such as hello server name in hello connection string.</span></span>

### <a name="steps-tooresolve-persistent-connectivity-issues"></a><span data-ttu-id="e7550-143">Проблемы постоянного подключения tooresolve действия</span><span class="sxs-lookup"><span data-stu-id="e7550-143">Steps tooresolve persistent connectivity issues</span></span>
1. <span data-ttu-id="e7550-144">Настройка [правила брандмауэра](sql-database-configure-firewall-settings.md) tooallow hello клиентского IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="e7550-144">Set up [firewall rules](sql-database-configure-firewall-settings.md) tooallow hello client IP address.</span></span> <span data-ttu-id="e7550-145">Для временного тестирования можно настройте правило брандмауэра с помощью 0.0.0.0 как hello начиная диапазон IP-адресов, с помощью 255.255.255.255 как hello конечный диапазон IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="e7550-145">For temporary testing purposes, set up a firewall rule using 0.0.0.0 as hello starting IP address range and using 255.255.255.255 as hello ending IP address range.</span></span> <span data-ttu-id="e7550-146">При этом откроется hello server tooall IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="e7550-146">This will open hello server tooall IP addresses.</span></span> <span data-ttu-id="e7550-147">Если это позволяет устранить проблемы с подключением, удалите это правило и создайте правило брандмауэра для надлежащим образом ограниченных IP-адресов или диапазона адресов.</span><span class="sxs-lookup"><span data-stu-id="e7550-147">If this resolves your connectivity issue, remove this rule and create a firewall rule for an appropriately limited IP address or address range.</span></span> 
2. <span data-ttu-id="e7550-148">Убедитесь, что открыт порт 1433 для исходящих соединений на все брандмауэры между клиентом hello и hello Интернета.</span><span class="sxs-lookup"><span data-stu-id="e7550-148">On all firewalls between hello client and hello Internet, make sure that port 1433 is open for outbound connections.</span></span> <span data-ttu-id="e7550-149">Просмотрите [Настройка брандмауэра Windows hello tooAllow доступа к SQL Server](https://msdn.microsoft.com/library/cc646023.aspx) и [гибридное удостоверение необходимые порты и протоколы](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) для дополнительных указателей связанных tooadditional порты, необходимые tooopen для Проверка подлинности Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="e7550-149">Review [Configure hello Windows Firewall tooAllow SQL Server Access](https://msdn.microsoft.com/library/cc646023.aspx) and [Hybrid Identity Required Ports and Protocols](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-ports) for additional pointers related tooadditional ports that you need tooopen for Azure Active Directory authentication.</span></span>
3. <span data-ttu-id="e7550-150">Проверьте строку подключения и другие параметры подключения.</span><span class="sxs-lookup"><span data-stu-id="e7550-150">Verify your connection string and other connection settings.</span></span> <span data-ttu-id="e7550-151">В разделе hello строка подключения раздела hello [разделе проблемы подключения к](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span><span class="sxs-lookup"><span data-stu-id="e7550-151">See hello Connection String section in hello [connectivity issues topic](sql-database-connectivity-issues.md#connections-to-azure-sql-database).</span></span>
4. <span data-ttu-id="e7550-152">Проверьте работоспособность службы на панели мониторинга hello.</span><span class="sxs-lookup"><span data-stu-id="e7550-152">Check service health in hello dashboard.</span></span> <span data-ttu-id="e7550-153">Если вы считаете, что региональном сбое, см. раздел [восстановление после сбоя](sql-database-disaster-recovery.md) для новой области действия toorecover tooa.</span><span class="sxs-lookup"><span data-stu-id="e7550-153">If you think there’s a regional outage, see [Recover from an outage](sql-database-disaster-recovery.md) for steps toorecover tooa new region.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e7550-154">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="e7550-154">Next steps</span></span>
* [<span data-ttu-id="e7550-155">Устранение проблем производительности базы данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="e7550-155">Troubleshoot Azure SQL Database performance issues</span></span>](sql-database-troubleshoot-performance.md)
* [<span data-ttu-id="e7550-156">Поиск документации hello в Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="e7550-156">Search hello documentation on Microsoft Azure</span></span>](http://azure.microsoft.com/search/documentation/)
* [<span data-ttu-id="e7550-157">Представление hello последние обновления службы toohello базы данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="e7550-157">View hello latest updates toohello Azure SQL Database service</span></span>](http://azure.microsoft.com/updates/?service=sql-database)

## <a name="additional-resources"></a><span data-ttu-id="e7550-158">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="e7550-158">Additional resources</span></span>
* [<span data-ttu-id="e7550-159">Общие сведения о разработке базы данных SQL</span><span class="sxs-lookup"><span data-stu-id="e7550-159">SQL Database Development Overview</span></span>](sql-database-develop-overview.md)
* [<span data-ttu-id="e7550-160">Общие рекомендации по повторным попыткам</span><span class="sxs-lookup"><span data-stu-id="e7550-160">General transient fault-handling guidance</span></span>](../best-practices-retry-general.md)
* [<span data-ttu-id="e7550-161">Библиотеки подключений для Базы данных SQL и SQL Server</span><span class="sxs-lookup"><span data-stu-id="e7550-161">Connection libraries for SQL Database and SQL Server</span></span>](sql-database-libraries.md)

