---
title: "руководство по настройке производительности базы данных SQL aaaAzure | Документы Microsoft"
description: "Эта статья поможет определить, какие toochoose уровня службы для приложения. Также рекомендуется tootune способов hello tooget вашего приложения наиболее из базы данных SQL Azure."
services: sql-database
documentationcenter: na
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: dd8d95fa-24b2-4233-b3f1-8e8952a7a22b
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/09/2017
ms.author: carlrab
ms.openlocfilehash: 2699f755391e94ab488ac1e6acedd30f8aec4488
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-performance-in-azure-sql-database"></a><span data-ttu-id="89db4-104">Настройка производительности в Базе данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="89db4-104">Tuning performance in Azure SQL Database</span></span>

<span data-ttu-id="89db4-105">База данных SQL Azure предоставляет [рекомендации](sql-database-advisor.md) , можно использовать tooimprove производительность базы данных или базы данных SQL Azure можно позволить [автоматически адаптируются приложения tooyour](sql-database-automatic-tuning.md) и применения изменений который улучшит производительность рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="89db4-105">Azure SQL Database provides [recommendations](sql-database-advisor.md) that you can use tooimprove performance of your database, or you can let Azure SQL Database [automatically adapt tooyour application](sql-database-automatic-tuning.md) and apply changes that will improve performance of your workload.</span></span>

<span data-ttu-id="89db4-106">В вашем нет применимых рекомендаций и у вас по-прежнему есть проблемы с производительностью, можно использовать следующие методы tooimprove производительность hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-106">In you don't have any applicable recommendations, and you still have performance issues, you might use hello following methods tooimprove performances:</span></span>
1. <span data-ttu-id="89db4-107">Увеличьте [уровней служб](sql-database-service-tiers.md) и предоставить дополнительные tooyour ресурсы базы данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-107">Increase [service tiers](sql-database-service-tiers.md) and provide more resources tooyour database.</span></span>
2. <span data-ttu-id="89db4-108">Настройте приложение и примените некоторые рекомендации, которые могут увеличить производительность.</span><span class="sxs-lookup"><span data-stu-id="89db4-108">Tune your application and apply some best practices that can improve performance.</span></span> 
3. <span data-ttu-id="89db4-109">Настройте базу данных hello, изменив индексов и запросов toomore эффективно работать с данными.</span><span class="sxs-lookup"><span data-stu-id="89db4-109">Tune hello database by changing indexes and queries toomore efficiently work with data.</span></span>

<span data-ttu-id="89db4-110">Это вручную методы, поскольку его нужно toodecide, что [уровней служб](sql-database-service-tiers.md) выбирается или нужно будет toorewrite приложения или код базы данных, а развертыванием hello изменения.</span><span class="sxs-lookup"><span data-stu-id="89db4-110">These are manual methods because you need toodecide what [service tiers](sql-database-service-tiers.md) you would choose or you would need toorewrite application or database code and deply hello changes.</span></span>

## <a name="increasing-performance-tier-of-your-database"></a><span data-ttu-id="89db4-111">Повышение уровня производительности базы данных</span><span class="sxs-lookup"><span data-stu-id="89db4-111">Increasing performance tier of your database</span></span>

<span data-ttu-id="89db4-112">Вы можете выбрать один из четырех [уровней служб](sql-database-service-tiers.md) базы данных SQL Azure: "Базовый", "Стандартный", "Премиум" или "Premium RS". Производительность измеряется в единицах пропускной способности базы данных, [DTU](sql-database-what-is-a-dtu.md).</span><span class="sxs-lookup"><span data-stu-id="89db4-112">Azure SQL Database offers four [service tiers](sql-database-service-tiers.md) that you can choose from: Basic, Standard, Premium, and Premium RS (performance is measured in database throughput units, or [DTUs](sql-database-what-is-a-dtu.md).</span></span> <span data-ttu-id="89db4-113">Каждая служба изолирует строго hello ресурсы базы данных SQL можно использовать что гарантирует прогнозируемую производительность для этого уровня службы.</span><span class="sxs-lookup"><span data-stu-id="89db4-113">Each service tier strictly isolates hello resources that your SQL database can use, and guarantees predictable performance for that service level.</span></span> <span data-ttu-id="89db4-114">В этой статье предлагаются рекомендации, которые помогут вам выбрать hello уровня службы для приложения.</span><span class="sxs-lookup"><span data-stu-id="89db4-114">In this article, we offer guidance that can help you choose hello service tier for your application.</span></span> <span data-ttu-id="89db4-115">Обсуждаются способы, можно настроить hello tooget вашего приложения наиболее из базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="89db4-115">We also discuss ways that you can tune your application tooget hello most from Azure SQL Database.</span></span>

> [!NOTE]
> <span data-ttu-id="89db4-116">В статье приведены рекомендации по производительности отдельных баз данных в Базе данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="89db4-116">This article focuses on performance guidance for single databases in Azure SQL Database.</span></span> <span data-ttu-id="89db4-117">Руководство по производительности в разделе пулы связанных tooelastic [цены и производительности рекомендации по пулам эластичных БД](sql-database-elastic-pool-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="89db4-117">For performance guidance related tooelastic pools, see [Price and performance considerations for elastic pools](sql-database-elastic-pool-guidance.md).</span></span> <span data-ttu-id="89db4-118">Отметить, что можно применить многие из рекомендаций в этой статье toodatabases в пуле эластичных hello и получить аналогичные производительность.</span><span class="sxs-lookup"><span data-stu-id="89db4-118">Note, though, that you can apply many of hello tuning recommendations in this article toodatabases in an elastic pool, and get similar performance benefits.</span></span>
> 

* <span data-ttu-id="89db4-119">**Основные**: hello предсказуемость базовой службы уровня предложения высокую производительность для каждой базы данных, час за час.</span><span class="sxs-lookup"><span data-stu-id="89db4-119">**Basic**: hello Basic service tier offers good performance predictability for each database, hour over hour.</span></span> <span data-ttu-id="89db4-120">При достаточном количестве ресурсов в базе данных уровня "Базовый" в небольших базах данных без большого количества параллельных запросов поддерживается отличная производительность.</span><span class="sxs-lookup"><span data-stu-id="89db4-120">In a Basic database, sufficient resources support good performance in a small database that doesn't have multiple concurrent requests.</span></span> <span data-ttu-id="89db4-121">Ниже приведены типичные случаи использования уровня служб "Базовый".</span><span class="sxs-lookup"><span data-stu-id="89db4-121">Typical use cases when you would use Basic service tier are:</span></span>
  * <span data-ttu-id="89db4-122">**Вы только начали работать с базой данных SQL Azure.**</span><span class="sxs-lookup"><span data-stu-id="89db4-122">**You're just getting started with Azure SQL Database**.</span></span> <span data-ttu-id="89db4-123">Для приложений на первых этапах разработки часто не требуется высокий уровень производительности.</span><span class="sxs-lookup"><span data-stu-id="89db4-123">Applications that are in development often don't need high-performance levels.</span></span> <span data-ttu-id="89db4-124">Базы данных уровня "Базовый" — идеальная среда для разработки и тестирования баз данных по низкой цене.</span><span class="sxs-lookup"><span data-stu-id="89db4-124">Basic databases are an ideal environment for database development or testing, at a low price point.</span></span>
  * <span data-ttu-id="89db4-125">**У вас есть база данных с одним пользователем.**</span><span class="sxs-lookup"><span data-stu-id="89db4-125">**You have a database with a single user**.</span></span> <span data-ttu-id="89db4-126">Для приложений, связывающих одного пользователя с базой данных, обычно не применяются строгие требования к параллелизму и производительности.</span><span class="sxs-lookup"><span data-stu-id="89db4-126">Applications that associate a single user with a database typically don’t have high concurrency and performance requirements.</span></span> <span data-ttu-id="89db4-127">Эти приложения являются кандидатами на уровень обслуживания Basic hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-127">These applications are candidates for hello Basic service tier.</span></span>
* <span data-ttu-id="89db4-128">**Стандартная**: hello уровень обслуживания Standard предлагает улучшенную предсказуемость производительности и обеспечивает хорошую производительность для баз данных, имеющих несколько одновременных запросов, например для рабочих групп и веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="89db4-128">**Standard**: hello Standard service tier offers improved performance predictability and provides good performance for databases that have multiple concurrent requests, like workgroup and web applications.</span></span> <span data-ttu-id="89db4-129">Выбрав этот уровень, вы можете определить размер приложения на основе поминутной предсказуемой производительности.</span><span class="sxs-lookup"><span data-stu-id="89db4-129">When you choose a Standard service tier database, you can size your database application based on predictable performance, minute over minute.</span></span>
  * <span data-ttu-id="89db4-130">**База данных содержит большое количество параллельных запросов.**</span><span class="sxs-lookup"><span data-stu-id="89db4-130">**Your database has multiple concurrent requests**.</span></span> <span data-ttu-id="89db4-131">Для приложений, обслуживающих несколько пользователей одновременно, обычно требуется более высокий уровень производительности.</span><span class="sxs-lookup"><span data-stu-id="89db4-131">Applications that service more than one user at a time usually need higher performance levels.</span></span> <span data-ttu-id="89db4-132">Например рабочей или веб-приложений, которые имеют низкий toomedium операции ввода-ВЫВОДА трафика требования, поддерживающих несколько параллельных запросов являются хорошими кандидатами для уровня Standard hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-132">For example, workgroup or web applications that have low toomedium IO traffic requirements supporting multiple concurrent queries are good candidates for hello Standard service tier.</span></span>
* <span data-ttu-id="89db4-133">**Premium**: hello уровень обслуживания Premium обеспечивает прогнозируемую производительность, второй по во-вторых, для каждой базы данных Premium.</span><span class="sxs-lookup"><span data-stu-id="89db4-133">**Premium**: hello Premium service tier provides predictable performance, second over second, for each Premium database.</span></span> <span data-ttu-id="89db4-134">При выборе уровня Premium hello можно размер приложения на основе пиковой загрузки hello для этой базы данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-134">When you choose hello Premium service tier, you can size your database application based on hello peak load for that database.</span></span> <span data-ttu-id="89db4-135">план Hello удаляет случаи, в которых отклонения производительности, выполняться дольше, чем ожидалось, в операциях, чувствительных к задержке tootake небольших запросов.</span><span class="sxs-lookup"><span data-stu-id="89db4-135">hello plan removes cases in which performance variance can cause small queries tootake longer than expected in latency-sensitive operations.</span></span> <span data-ttu-id="89db4-136">Эта модель может значительно упростить hello разработки продукта проверки циклы и для приложений, требующих строгого инструкций toomake о имеют Пиковая нагрузка, изменяемая производительность и задержка выполнения запросов.</span><span class="sxs-lookup"><span data-stu-id="89db4-136">This model can greatly simplify hello development and product validation cycles for applications that need toomake strong statements about peak resource needs, performance variance, or query latency.</span></span> <span data-ttu-id="89db4-137">Большинство вариантов использования уровня служб "Премиум" имеют одну или несколько из этих характеристик:</span><span class="sxs-lookup"><span data-stu-id="89db4-137">Most Premium service tier use cases have one or more of these characteristics:</span></span>
  * <span data-ttu-id="89db4-138">**Высокая пиковая нагрузка.**</span><span class="sxs-lookup"><span data-stu-id="89db4-138">**High peak load**.</span></span> <span data-ttu-id="89db4-139">Приложение, которое требует значительных ЦП, памяти или ввода вывода (I/O) toocomplete его операций требуется уровень выделенной, высокой производительности.</span><span class="sxs-lookup"><span data-stu-id="89db4-139">An application that requires substantial CPU, memory, or input/output (I/O) toocomplete its operations requires a dedicated, high-performance level.</span></span> <span data-ttu-id="89db4-140">Например известные tooconsume операции с базой данных несколько ядер ЦП на длительное время является кандидатом для уровня служб Premium hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-140">For example, a database operation known tooconsume several CPU cores for an extended time is a candidate for hello Premium service tier.</span></span>
  * <span data-ttu-id="89db4-141">**Множество параллельных запросов.**</span><span class="sxs-lookup"><span data-stu-id="89db4-141">**Many concurrent requests**.</span></span> <span data-ttu-id="89db4-142">Некоторые приложения баз данных обслуживают множество параллельных запросов, например веб-сайты с большим объемом трафика.</span><span class="sxs-lookup"><span data-stu-id="89db4-142">Some database applications service many concurrent requests, for example, when serving a website that has a high traffic volume.</span></span> <span data-ttu-id="89db4-143">Basic и Standard уровней обслуживания ограничить hello число одновременных запросов для базы данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-143">Basic and Standard service tiers limit hello number of concurrent requests per database.</span></span> <span data-ttu-id="89db4-144">Приложения, которым требуется больше подключений, должны toochoose соответствующий размер toohandle hello максимальное число запросов.</span><span class="sxs-lookup"><span data-stu-id="89db4-144">Applications that require more connections would need toochoose an appropriate reservation size toohandle hello maximum number of needed requests.</span></span>
  * <span data-ttu-id="89db4-145">**Минимальная задержка.**</span><span class="sxs-lookup"><span data-stu-id="89db4-145">**Low latency**.</span></span> <span data-ttu-id="89db4-146">Некоторые приложения должны tooguarantee ответа от базы данных hello минимальное время.</span><span class="sxs-lookup"><span data-stu-id="89db4-146">Some applications need tooguarantee a response from hello database in minimal time.</span></span> <span data-ttu-id="89db4-147">Если выполнение определенной хранимой процедуры вызывается как часть широкого взаимодействия с клиентом, может потребоваться toohave требование возврата из этого вызова не более 20 мс 99 процентов времени hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-147">If a specific stored procedure is called as part of a broader customer operation, you might have a requirement toohave a return from that call in no more than 20 milliseconds, 99 percent of hello time.</span></span> <span data-ttu-id="89db4-148">Этот тип преимущества приложений уровня служб Premium hello доступен toomake том, что требуется, hello вычислительной мощности.</span><span class="sxs-lookup"><span data-stu-id="89db4-148">This type of application benefits from hello Premium service tier, toomake sure that hello required computing power is available.</span></span>
* <span data-ttu-id="89db4-149">**Premium RS**: hello уровня Premium RS предназначен для рабочих нагрузок с интенсивным операции ввода-ВЫВОДА, которые не требуют hello наибольший гарантии доступности.</span><span class="sxs-lookup"><span data-stu-id="89db4-149">**Premium RS**: hello Premium RS tier is designed for IO-intensive workloads that do not require hello highest availability guarantees.</span></span> <span data-ttu-id="89db4-150">Примеры включают тестирование высокой производительности рабочих нагрузок или аналитической рабочей нагрузки, где база данных hello не hello систему записи.</span><span class="sxs-lookup"><span data-stu-id="89db4-150">Examples include testing high-performance workloads, or an analytical workload where hello database is not hello system of record.</span></span>

<span data-ttu-id="89db4-151">уровень обслуживания Hello, необходимое для базы данных SQL зависит от hello пиковой нагрузки для каждого измерения ресурсов.</span><span class="sxs-lookup"><span data-stu-id="89db4-151">hello service level that you need for your SQL database depends on hello peak load requirements for each resource dimension.</span></span> <span data-ttu-id="89db4-152">Некоторые приложения могут использовать небольшой объем одного ресурса и значительный — других.</span><span class="sxs-lookup"><span data-stu-id="89db4-152">Some applications use a trivial amount of a single resource, but have significant requirements for other resources.</span></span>

### <a name="service-tier-capabilities-and-limits"></a><span data-ttu-id="89db4-153">Возможности и ограничения уровней служб</span><span class="sxs-lookup"><span data-stu-id="89db4-153">Service tier capabilities and limits</span></span>

<span data-ttu-id="89db4-154">На каждом уровне службы значение hello уровень производительности, поэтому вы toopay гибкость hello только для необходимому объему hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-154">At each service tier, you set hello performance level, so you have hello flexibility toopay only for hello capacity you need.</span></span> <span data-ttu-id="89db4-155">Вы можете [регулировать объем ресурсов](sql-database-service-tiers.md), увеличивая или уменьшая его по мере изменения рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="89db4-155">You can [adjust capacity](sql-database-service-tiers.md), up or down, as workload changes.</span></span> <span data-ttu-id="89db4-156">Например если рабочая нагрузка базы данных во время покупок перед праздниками для учебного hello велико, можно увеличить продолжительность июля по сентябрь hello уровень производительности для базы данных hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-156">For example, if your database workload is high during hello back-to-school shopping season, you might increase hello performance level for hello database for a set time, July through September.</span></span> <span data-ttu-id="89db4-157">Его можно уменьшить после снижения пиковой нагрузки.</span><span class="sxs-lookup"><span data-stu-id="89db4-157">You can reduce it when your peak season ends.</span></span> <span data-ttu-id="89db4-158">Можно свести к минимуму вы платите оптимизировав вашей сезонности toohello облачной среде вашего бизнеса.</span><span class="sxs-lookup"><span data-stu-id="89db4-158">You can minimize what you pay by optimizing your cloud environment toohello seasonality of your business.</span></span> <span data-ttu-id="89db4-159">Кроме того, такая модель подходит для поддержки жизненного цикла программных продуктов.</span><span class="sxs-lookup"><span data-stu-id="89db4-159">This model also works well for software product release cycles.</span></span> <span data-ttu-id="89db4-160">Команда тестирования может увеличивать мощность на время тестирования и снижать ее после его завершения.</span><span class="sxs-lookup"><span data-stu-id="89db4-160">A test team might allocate capacity while it does test runs, and then release that capacity when they finish testing.</span></span> <span data-ttu-id="89db4-161">При использовании модели запроса мощности оплачивается только используемая мощность, а не выделенные редко используемые ресурсы.</span><span class="sxs-lookup"><span data-stu-id="89db4-161">In a capacity request model, you pay for capacity as you need it, and avoid spending on dedicated resources that you might rarely use.</span></span>

### <a name="why-service-tiers"></a><span data-ttu-id="89db4-162">Зачем нужны уровни служб?</span><span class="sxs-lookup"><span data-stu-id="89db4-162">Why service tiers?</span></span>
<span data-ttu-id="89db4-163">Несмотря на то, что рабочие нагрузки базы данных могут отличаться, hello уровней обслуживания предназначен tooprovide предсказуемость производительности на различных уровнях производительности.</span><span class="sxs-lookup"><span data-stu-id="89db4-163">Although each database workload can differ, hello purpose of service tiers is tooprovide performance predictability at various performance levels.</span></span> <span data-ttu-id="89db4-164">Благодаря этим уровням клиенты с высокими требованиями к ресурсам базы данных могут работать в более изолированной вычислительной среде.</span><span class="sxs-lookup"><span data-stu-id="89db4-164">Customers with large-scale database resource requirements can work in a more dedicated computing environment.</span></span>

## <a name="tune-your-application"></a><span data-ttu-id="89db4-165">Настройка приложения</span><span class="sxs-lookup"><span data-stu-id="89db4-165">Tune your application</span></span>
<span data-ttu-id="89db4-166">В традиционном локальном SQL Server hello процесс изначального планирования загрузки часто отделен от hello процесса запуска приложения в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="89db4-166">In traditional on-premises SQL Server, hello process of initial capacity planning often is separated from hello process of running an application in production.</span></span> <span data-ttu-id="89db4-167">Сначала приобретаются лицензии на оборудование и продукт, а затем настраивается производительность.</span><span class="sxs-lookup"><span data-stu-id="89db4-167">Hardware and product licenses are purchased first, and performance tuning is done afterward.</span></span> <span data-ttu-id="89db4-168">При использовании базы данных SQL Azure, это разумно toointerweave hello процесс его настройки и запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="89db4-168">When you use Azure SQL Database, it's a good idea toointerweave hello process of running an application and tuning it.</span></span> <span data-ttu-id="89db4-169">С моделью hello оплата только за емкости по запросу вы можете настроить toouse hello минимальное ресурсами приложения теперь требуется вместо избыточную подготовку согласно прогнозам будущего роста для приложений, которые часто неверны.</span><span class="sxs-lookup"><span data-stu-id="89db4-169">With hello model of paying for capacity on demand, you can tune your application toouse hello minimum resources needed now, instead of overprovisioning on hardware based on guesses of future growth plans for an application, which often are incorrect.</span></span> <span data-ttu-id="89db4-170">Некоторые клиенты могут выбрать не tootune приложения и вместо этого toooverprovision аппаратных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="89db4-170">Some customers might choose not tootune an application, and instead choose toooverprovision hardware resources.</span></span> <span data-ttu-id="89db4-171">Этот подход может служить хорошей идеей, если вы не хотите toochange ключевое приложение на период высокой нагрузки.</span><span class="sxs-lookup"><span data-stu-id="89db4-171">This approach might be a good idea if you don't want toochange a key application during a busy period.</span></span> <span data-ttu-id="89db4-172">Однако настройка приложения позволяет минимизировать потребление ресурсов и снизить ежемесячные расходы при использовании уровней обслуживания hello в базе данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="89db4-172">But, tuning an application can minimize resource requirements and lower monthly bills when you use hello service tiers in Azure SQL Database.</span></span>

### <a name="application-characteristics"></a><span data-ttu-id="89db4-173">Характеристики приложения</span><span class="sxs-lookup"><span data-stu-id="89db4-173">Application characteristics</span></span>
<span data-ttu-id="89db4-174">Несмотря на то, что уровни служб базы данных SQL Azure, разработанных tooimprove стабильной производительности и приложения, некоторые рекомендации могут помочь настройки приложения toobetter использовать преимущества hello ресурсов на уровне производительности.</span><span class="sxs-lookup"><span data-stu-id="89db4-174">Although Azure SQL Database service tiers are designed tooimprove performance stability and predictability for an application, some best practices can help you tune your application toobetter take advantage of hello resources at a performance level.</span></span> <span data-ttu-id="89db4-175">Несмотря на то, что многие приложения имеют значительный прирост производительности путем простого переключения tooa высокий уровень производительности или служба уровня, некоторые дополнительные настройки toobenefit более высокого уровня обслуживания приложений необходимо.</span><span class="sxs-lookup"><span data-stu-id="89db4-175">Although many applications have significant performance gains simply by switching tooa higher performance level or service tier, some applications need additional tuning toobenefit from a higher level of service.</span></span> <span data-ttu-id="89db4-176">Для повышения производительности приложений со следующими характеристиками необходима дополнительная настройка:</span><span class="sxs-lookup"><span data-stu-id="89db4-176">For increased performance, consider additional application tuning for applications that have these characteristics:</span></span>

* <span data-ttu-id="89db4-177">**Приложения с низкой производительностью из-за "нестабильной" работы.**В эту категорию входят приложения, которые совершают избыточные операции доступа к данным, несмотря на их чувствительность к сетевым задержкам.</span><span class="sxs-lookup"><span data-stu-id="89db4-177">**Applications that have slow performance because of "chatty" behavior**.</span></span> <span data-ttu-id="89db4-178">«Многословных» приложения выполнять операции доступа излишнего данных, которые будут конфиденциальных toonetwork задержки.</span><span class="sxs-lookup"><span data-stu-id="89db4-178">Chatty applications make excessive data access operations that are sensitive toonetwork latency.</span></span> <span data-ttu-id="89db4-179">Может потребоваться toomodify такого рода приложений tooreduce hello число базы данных SQL toohello операций доступа к данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-179">You might need toomodify these kinds of applications tooreduce hello number of data access operations toohello SQL database.</span></span> <span data-ttu-id="89db4-180">Например можно повысить производительность приложения с помощью методик, как пакетная обработка нерегламентированных запросов или при перемещении hello запрашивает toostored процедуры.</span><span class="sxs-lookup"><span data-stu-id="89db4-180">For example, you might improve application performance by using techniques like batching ad-hoc queries or moving hello queries toostored procedures.</span></span> <span data-ttu-id="89db4-181">в разделе [Пакетные запросы](#batch-queries).</span><span class="sxs-lookup"><span data-stu-id="89db4-181">For more information, see [Batch queries](#batch-queries).</span></span>
* <span data-ttu-id="89db4-182">**Базы данных с интенсивной рабочей нагрузкой, которые не могут работать на одном сервере.**Базы данных, которым требуется больше ресурсов, чем предоставляет уровень производительности "Премиум", можно оптимизировать за счет масштабирования рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="89db4-182">**Databases with an intensive workload that can't be supported by an entire single machine**.</span></span> <span data-ttu-id="89db4-183">Базы данных, которые превышают hello ресурсы hello высокий уровень производительности Premium может улучшить за счет масштабирования рабочей нагрузки hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-183">Databases that exceed hello resources of hello highest Premium performance level might benefit from scaling out hello workload.</span></span> <span data-ttu-id="89db4-184">Дополнительные сведения см. в разделах [Сегментирование баз данных](#cross-database-sharding) и [Функциональное секционирование](#functional-partitioning).</span><span class="sxs-lookup"><span data-stu-id="89db4-184">For more information, see [Cross-database sharding](#cross-database-sharding) and [Functional partitioning](#functional-partitioning).</span></span>
* <span data-ttu-id="89db4-185">**Приложения с неоптимальными запросами.**Приложениям, особенно тем, которые находятся на уровне доступа к данным и используют неоптимальные запросы, может не подойти более высокий уровень производительности.</span><span class="sxs-lookup"><span data-stu-id="89db4-185">**Applications that have suboptimal queries**.</span></span> <span data-ttu-id="89db4-186">Приложения, особенно тех hello уровне доступа к данным, которые используют неоптимальные запросы не могут выиграть от более высокий уровень производительности.</span><span class="sxs-lookup"><span data-stu-id="89db4-186">Applications, especially those in hello data access layer, that have poorly tuned queries might not benefit from a higher performance level.</span></span> <span data-ttu-id="89db4-187">Больше пользы таким приложениям приносят стандартные методы оптимизации производительности запросов.</span><span class="sxs-lookup"><span data-stu-id="89db4-187">This includes queries that lack a WHERE clause, have missing indexes, or have outdated statistics.</span></span> <span data-ttu-id="89db4-188">Дополнительные сведения см.</span><span class="sxs-lookup"><span data-stu-id="89db4-188">These applications benefit from standard query performance-tuning techniques.</span></span> <span data-ttu-id="89db4-189">Дополнительные сведения см. в разделах [Отсутствующие индексы](#identifying-and-adding-missing-indexes) и [Настройка запросов и указания на них](#query-tuning-and-hinting).</span><span class="sxs-lookup"><span data-stu-id="89db4-189">For more information, see [Missing indexes](#identifying-and-adding-missing-indexes) and [Query tuning and hinting](#query-tuning-and-hinting).</span></span>
* <span data-ttu-id="89db4-190">**Приложения с неоптимальной схемой доступа к данным.**Если в приложениях есть проблемы параллельного доступа к данным, например при одновременном доступе возникает блокировка, то более высокий уровень производительности, скорее всего, не улучшит их работу.</span><span class="sxs-lookup"><span data-stu-id="89db4-190">**Applications that have suboptimal data access design**.</span></span> <span data-ttu-id="89db4-191">Попробуйте снизить количество циклических запросов к Базе данных SQL Azure за счет кэширования данных на стороне клиента с помощью службы кэша Azure или других технологий кэширования.</span><span class="sxs-lookup"><span data-stu-id="89db4-191">Applications that have inherent data access concurrency issues, for example deadlocking, might not benefit from a higher performance level.</span></span> <span data-ttu-id="89db4-192">Рассмотрите возможность уменьшения циклов приема-передачи с hello базы данных SQL Azure путем кэширования данных на стороне клиента hello с hello Azure Caching service или другой технологии кэширования.</span><span class="sxs-lookup"><span data-stu-id="89db4-192">Consider reducing round trips against hello Azure SQL Database by caching data on hello client side with hello Azure Caching service or another caching technology.</span></span> <span data-ttu-id="89db4-193">раздел [Кэширование на уровне приложения](#application-tier-caching).</span><span class="sxs-lookup"><span data-stu-id="89db4-193">See [Application tier caching](#application-tier-caching).</span></span>

## <a name="tune-your-database"></a><span data-ttu-id="89db4-194">Настройка базы данных</span><span class="sxs-lookup"><span data-stu-id="89db4-194">Tune your database</span></span>
<span data-ttu-id="89db4-195">В этом разделе мы рассмотрим некоторые методы можно использовать tootune базы данных SQL Azure toogain hello наилучшей производительности приложения и запустите его на низком уровне производительности hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-195">In this section, we look at some techniques that you can use tootune Azure SQL Database toogain hello best performance for your application and run it at hello lowest possible performance level.</span></span> <span data-ttu-id="89db4-196">Некоторые из этих методик соответствует традиционных SQL Server, советы и рекомендации по настройке, а остальные — tooAzure определенной базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="89db4-196">Some of these techniques match traditional SQL Server tuning best practices, but others are specific tooAzure SQL Database.</span></span> <span data-ttu-id="89db4-197">В некоторых случаях можно проверить hello потребляет ресурсы для мелодии toofurther toofind области базы данных и расширяют традиционные toowork методы SQL Server в базе данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="89db4-197">In some cases, you can examine hello consumed resources for a database toofind areas toofurther tune and extend traditional SQL Server techniques toowork in Azure SQL Database.</span></span>

### <a name="identify-performance-issues-using-azure-portal"></a><span data-ttu-id="89db4-198">Выявление проблем производительности с помощью портала Azure</span><span class="sxs-lookup"><span data-stu-id="89db4-198">Identify performance issues using Azure portal</span></span>
<span data-ttu-id="89db4-199">Hello следующие средства в hello портал Azure может помочь анализа и устранения проблем производительности с базой данных SQL:</span><span class="sxs-lookup"><span data-stu-id="89db4-199">hello following tools in hello Azure portal can help you analyze and fix performance issues with your SQL database:</span></span>

* [<span data-ttu-id="89db4-200">Анализ производительности запросов</span><span class="sxs-lookup"><span data-stu-id="89db4-200">Query Performance Insight</span></span>](sql-database-query-performance.md)
* [<span data-ttu-id="89db4-201">Помощник по работе с базами данных SQL</span><span class="sxs-lookup"><span data-stu-id="89db4-201">SQL Database Advisor</span></span>](sql-database-advisor.md)

<span data-ttu-id="89db4-202">Hello портал Azure содержит дополнительные сведения об этих средств и каким образом toouse их.</span><span class="sxs-lookup"><span data-stu-id="89db4-202">hello Azure portal has more information about both of these tools and how toouse them.</span></span> <span data-ttu-id="89db4-203">tooefficiently диагностики и исправления ошибок, рекомендуется сначала попробовать средства hello в hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="89db4-203">tooefficiently diagnose and correct problems, we recommend that you first try hello tools in hello Azure portal.</span></span> <span data-ttu-id="89db4-204">Мы рекомендуем использовать hello по ручной настройке подходов, которые рассматриваются далее для отсутствующих индексов и настройка запросов, в особых случаях.</span><span class="sxs-lookup"><span data-stu-id="89db4-204">We recommend that you use hello manual tuning approaches that we discuss next, for missing indexes and query tuning, in special cases.</span></span>

<span data-ttu-id="89db4-205">Дополнительные сведения о выявлении проблем в Базе данных SQL Azure приведены в статье о [мониторинге производительности](sql-database-single-database-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="89db4-205">Find more information about identifying issues in Azure SQL Database on [performance monitoring](sql-database-single-database-monitor.md) article.</span></span>

### <a name="identifying-and-adding-missing-indexes"></a><span data-ttu-id="89db4-206">Определение и добавление недостающих индексов</span><span class="sxs-lookup"><span data-stu-id="89db4-206">Identifying and adding missing indexes</span></span>
<span data-ttu-id="89db4-207">Распространенная проблема производительности баз данных OLTP связана toohello физической структуры базы данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-207">A common problem in OLTP database performance relates toohello physical database design.</span></span> <span data-ttu-id="89db4-208">Часто схемы базы данных создаются и поставляются без проверки масштабируемости по нагрузке или объему данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-208">Often, database schemas are designed and shipped without testing at scale (either in load or in data volume).</span></span> <span data-ttu-id="89db4-209">К сожалению производительность hello план запроса будет приемлемые для малого масштаба, но существенно снижаться в производственных данных тома.</span><span class="sxs-lookup"><span data-stu-id="89db4-209">Unfortunately, hello performance of a query plan might be acceptable on a small scale but degrade substantially under production-level data volumes.</span></span> <span data-ttu-id="89db4-210">Hello наиболее распространенным источником этой проблемы является отсутствие hello соответствующих индексов toosatisfy фильтры и другие ограничения в запросе.</span><span class="sxs-lookup"><span data-stu-id="89db4-210">hello most common source of this issue is hello lack of appropriate indexes toosatisfy filters or other restrictions in a query.</span></span> <span data-ttu-id="89db4-211">Часто при этом сканируется вся таблица, в то время как поиска по индексу было бы достаточно.</span><span class="sxs-lookup"><span data-stu-id="89db4-211">Often, missing indexes manifests as a table scan when an index seek could suffice.</span></span>

<span data-ttu-id="89db4-212">В этом примере hello план запроса использует проверку, если было бы достаточно простого поиска.</span><span class="sxs-lookup"><span data-stu-id="89db4-212">In this example, hello selected query plan uses a scan when a seek would suffice:</span></span>

    DROP TABLE dbo.missingindex;
    CREATE TABLE dbo.missingindex (col1 INT IDENTITY PRIMARY KEY, col2 INT);
    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO dbo.missingindex(col2) VALUES (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION;
    GO
    SELECT m1.col1
    FROM dbo.missingindex m1 INNER JOIN dbo.missingindex m2 ON(m1.col1=m2.col1)
    WHERE m1.col2 = 4;

![План запроса c отсутствующими индексами](./media/sql-database-performance-guidance/query_plan_missing_indexes.png)

<span data-ttu-id="89db4-214">База данных SQL Azure может помочь выявить условия, при которых индекс становится необходимым.</span><span class="sxs-lookup"><span data-stu-id="89db4-214">Azure SQL Database can help you find and fix common missing index conditions.</span></span> <span data-ttu-id="89db4-215">Динамические административные представления, которые встроены в базе данных SQL Azure просмотрите компиляций запросов, в которых индекс мог бы значительно снизить toorun hello Предполагаемая стоимость запроса.</span><span class="sxs-lookup"><span data-stu-id="89db4-215">DMVs that are built into Azure SQL Database look at query compilations in which an index would significantly reduce hello estimated cost toorun a query.</span></span> <span data-ttu-id="89db4-216">Во время выполнения запроса отслеживает базы данных SQL, как часто выполняется каждый план запроса и отслеживает hello расчетные разрыв между выполнением плана запроса и hello hello представить один где использовался индекс.</span><span class="sxs-lookup"><span data-stu-id="89db4-216">During query execution, SQL Database tracks how often each query plan is executed, and tracks hello estimated gap between hello executing query plan and hello imagined one where that index existed.</span></span> <span data-ttu-id="89db4-217">Можно использовать эти динамические административные представления tooquickly прогноз, какие изменения tooyour физической структуры базы данных может повысить общую нагрузку для базы данных и его реальными рабочими нагрузками.</span><span class="sxs-lookup"><span data-stu-id="89db4-217">You can use these DMVs tooquickly guess which changes tooyour physical database design might improve overall workload cost for a database and its real workload.</span></span>

<span data-ttu-id="89db4-218">Можно использовать этот потенциал tooevaluate запросов отсутствующих индексов.</span><span class="sxs-lookup"><span data-stu-id="89db4-218">You can use this query tooevaluate potential missing indexes:</span></span>

    SELECT CONVERT (varchar, getdate(), 126) AS runtime,
        mig.index_group_handle, mid.index_handle,
        CONVERT (decimal (28,1), migs.avg_total_user_cost * migs.avg_user_impact *
                (migs.user_seeks + migs.user_scans)) AS improvement_measure,
        'CREATE INDEX missing_index_' + CONVERT (varchar, mig.index_group_handle) + '_' +
                  CONVERT (varchar, mid.index_handle) + ' ON ' + mid.statement + '
                  (' + ISNULL (mid.equality_columns,'')
                  + CASE WHEN mid.equality_columns IS NOT NULL
                              AND mid.inequality_columns IS NOT NULL
                         THEN ',' ELSE '' END + ISNULL (mid.inequality_columns, '')
                  + ')'
                  + ISNULL (' INCLUDE (' + mid.included_columns + ')', '') AS create_index_statement,
        migs.*,
        mid.database_id,
        mid.[object_id]
    FROM sys.dm_db_missing_index_groups AS mig
    INNER JOIN sys.dm_db_missing_index_group_stats AS migs
        ON migs.group_handle = mig.index_group_handle
    INNER JOIN sys.dm_db_missing_index_details AS mid
        ON mig.index_handle = mid.index_handle
    ORDER BY migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) DESC

<span data-ttu-id="89db4-219">В этом примере запрос hello привело к созданию этого предложения:</span><span class="sxs-lookup"><span data-stu-id="89db4-219">In this example, hello query resulted in this suggestion:</span></span>

    CREATE INDEX missing_index_5006_5005 ON [dbo].[missingindex] ([col2])  

<span data-ttu-id="89db4-220">После его создания этой же самой инструкции SELECT выбирает другой план, который использует поиск вместо сканирования, а затем выполняет план hello более эффективно:</span><span class="sxs-lookup"><span data-stu-id="89db4-220">After it's created, that same SELECT statement picks a different plan, which uses a seek instead of a scan, and then executes hello plan more efficiently:</span></span>

![План запроса c исправленными индексами](./media/sql-database-performance-guidance/query_plan_corrected_indexes.png)

<span data-ttu-id="89db4-222">Важно понимать Hello является, пропускную способность общего hello, товарного системы более ограничен, отличный от выделенного сервера.</span><span class="sxs-lookup"><span data-stu-id="89db4-222">hello key insight is that hello I/O capacity of a shared, commodity system is more limited than that of a dedicated server machine.</span></span> <span data-ttu-id="89db4-223">Нет расширенной минимизировать ненужные операции ввода-вывода tootake максимально использовать системы hello в hello DTU каждого уровня производительности hello уровней обслуживания базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="89db4-223">There's a premium on minimizing unnecessary I/O tootake maximum advantage of hello system in hello DTU of each performance level of hello Azure SQL Database service tiers.</span></span> <span data-ttu-id="89db4-224">Варианты соответствующие физической базы данных можно значительно сократить задержку hello для отдельных запросов, повысить пропускную способность hello одновременных запросов, которые обрабатываются на единицу масштабирования и свести к минимуму необходимые toosatisfy hello hello стоимость запроса.</span><span class="sxs-lookup"><span data-stu-id="89db4-224">Appropriate physical database design choices can significantly improve hello latency for individual queries, improve hello throughput of concurrent requests handled per scale unit, and minimize hello costs required toosatisfy hello query.</span></span> <span data-ttu-id="89db4-225">Дополнительные сведения о hello отсутствует индекс динамических административных представлений см. в разделе [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span><span class="sxs-lookup"><span data-stu-id="89db4-225">For more information about hello missing index DMVs, see [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span></span>

### <a name="query-tuning-and-hinting"></a><span data-ttu-id="89db4-226">Настройка запросов и указания на них</span><span class="sxs-lookup"><span data-stu-id="89db4-226">Query tuning and hinting</span></span>
<span data-ttu-id="89db4-227">оптимизатор запросов Hello в базе данных SQL Azure — примерно toohello традиционный оптимизатор запросов SQL Server.</span><span class="sxs-lookup"><span data-stu-id="89db4-227">hello query optimizer in Azure SQL Database is similar toohello traditional SQL Server query optimizer.</span></span> <span data-ttu-id="89db4-228">Большинство hello рекомендации по настройке запросов и основные сведения о hello рассуждения ограничения оптимизатора запросов hello также действуют tooAzure базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="89db4-228">Most of hello best practices for tuning queries and understanding hello reasoning model limitations for hello query optimizer also apply tooAzure SQL Database.</span></span> <span data-ttu-id="89db4-229">Если вам необходимо настроить запросы в базе данных SQL Azure, может появиться дополнительное преимущество hello снизить требования статистических ресурсов.</span><span class="sxs-lookup"><span data-stu-id="89db4-229">If you tune queries in Azure SQL Database, you might get hello additional benefit of reducing aggregate resource demands.</span></span> <span data-ttu-id="89db4-230">Приложения могут выполняться может toorun по более низкой цене, чем эквивалентный ненастроенные, поскольку он выполняется на более низком уровне производительности.</span><span class="sxs-lookup"><span data-stu-id="89db4-230">Your application might be able toorun at a lower cost than an untuned equivalent because it can run at a lower performance level.</span></span>

<span data-ttu-id="89db4-231">Например, обычно используется для SQL Server и которая также применяется tooAzure базы данных SQL, как оптимизатор» прослушивает» параметры запроса hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-231">An example that is common in SQL Server and which also applies tooAzure SQL Database is how hello query optimizer "sniffs" parameters.</span></span> <span data-ttu-id="89db4-232">Во время компиляции оптимизатор запросов hello вычисляет текущее значение параметра toodetermine hello ли оно может создавать более оптимального плана запроса.</span><span class="sxs-lookup"><span data-stu-id="89db4-232">During compilation, hello query optimizer evaluates hello current value of a parameter toodetermine whether it can generate a more optimal query plan.</span></span> <span data-ttu-id="89db4-233">Несмотря на то, что такая стратегия можно позволить tooa план запроса, который значительно быстрее, чем план, созданный без параметра известных значений, в настоящее время он работает imperfectly как в SQL Server и базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="89db4-233">Although this strategy often can lead tooa query plan that is significantly faster than a plan compiled without known parameter values, currently it works imperfectly both in SQL Server and in Azure SQL Database.</span></span> <span data-ttu-id="89db4-234">Иногда параметры hello не вносятся и иногда hello параметры вносятся, но созданный план hello не является оптимальным для полного набора значений параметров в рабочей нагрузке hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-234">Sometimes hello parameter is not sniffed, and sometimes hello parameter is sniffed but hello generated plan is suboptimal for hello full set of parameter values in a workload.</span></span> <span data-ttu-id="89db4-235">Майкрософт включает указания запросов (директивы), можно указать, следует ли и переопределить поведение по умолчанию hello пробное сохранение параметров.</span><span class="sxs-lookup"><span data-stu-id="89db4-235">Microsoft includes query hints (directives) so that you can specify intent more deliberately and override hello default behavior of parameter sniffing.</span></span> <span data-ttu-id="89db4-236">Часто при использовании подсказки, можно устранить проблемы, в которых hello по умолчанию SQL Server или база данных SQL Azure не идеально подходит для определенной рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="89db4-236">Often, if you use hints, you can fix cases in which hello default SQL Server or Azure SQL Database behavior is imperfect for a specific customer workload.</span></span>

<span data-ttu-id="89db4-237">Hello следующем примере показано, как обработчик запросов hello можно создать план, который не является оптимальным для производительности и требований к ресурсам.</span><span class="sxs-lookup"><span data-stu-id="89db4-237">hello next example demonstrates how hello query processor can generate a plan that is suboptimal both for performance and resource requirements.</span></span> <span data-ttu-id="89db4-238">В этом примере также показано, что при использовании указания запроса можно сократить время выполнения запроса и снизить требования к ресурсам для Базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="89db4-238">This example also shows that if you use a query hint, you can reduce query run time and resource requirements for your SQL database:</span></span>

    DROP TABLE psptest1;
    CREATE TABLE psptest1(col1 int primary key identity, col2 int, col3 binary(200));

    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO psptest1(col2) values (1);
        INSERT INTO psptest1(col2) values (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION
    CREATE INDEX i1 on psptest1(col2);
    GO

    CREATE PROCEDURE psp1 (@param1 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1
        WHERE col2 = @param1
        ORDER BY col2;
    END
    GO

    CREATE PROCEDURE psp2 (@param2 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1 WHERE col2 = @param2
        ORDER BY col2
        OPTION (OPTIMIZE FOR (@param2 UNKNOWN))
    END
    GO

    CREATE TABLE t1 (col1 int primary key, col2 int, col3 binary(200));
    GO

<span data-ttu-id="89db4-239">Hello установочный код создает таблицу, которая неравномерным распределения данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-239">hello setup code creates a table that has skewed data distribution.</span></span> <span data-ttu-id="89db4-240">Оптимальный запросов Hello отличается план на основании какой параметр выбран.</span><span class="sxs-lookup"><span data-stu-id="89db4-240">hello optimal query plan differs based on which parameter is selected.</span></span> <span data-ttu-id="89db4-241">К сожалению поведение кэширования плана hello не всегда повторно компилирует hello запрос, основанный на hello наиболее подходящего значения.</span><span class="sxs-lookup"><span data-stu-id="89db4-241">Unfortunately, hello plan caching behavior doesn't always recompile hello query based on hello most common parameter value.</span></span> <span data-ttu-id="89db4-242">Таким образом существует возможность toobe неоптимальный план кэшируется и используется в много значений, даже в том случае, если другой план в среднем может быть предпочтительнее плана.</span><span class="sxs-lookup"><span data-stu-id="89db4-242">So, it's possible for a suboptimal plan toobe cached and used for many values, even when a different plan might be a better plan choice on average.</span></span> <span data-ttu-id="89db4-243">План запроса hello создает две хранимые процедуры, которые идентичны, за исключением того, что один из них имеет специальное указание запроса.</span><span class="sxs-lookup"><span data-stu-id="89db4-243">Then hello query plan creates two stored procedures that are identical, except that one has a special query hint.</span></span>

<span data-ttu-id="89db4-244">**Пример, часть 1.**</span><span class="sxs-lookup"><span data-stu-id="89db4-244">**Example, part 1**</span></span>

    -- Prime Procedure Cache with scan plan
    EXEC psp1 @param1=1;
    TRUNCATE TABLE t1;

    -- Iterate multiple times tooshow hello performance difference
    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp1 @param1=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="89db4-245">**Пример, часть 2.**</span><span class="sxs-lookup"><span data-stu-id="89db4-245">**Example, part 2**</span></span>

<span data-ttu-id="89db4-246">(Рекомендуется отложить менее 10 минут, прежде чем часть 2 из пример hello hello результаты должны быть уникальными в hello, возникающие в данные телеметрии).</span><span class="sxs-lookup"><span data-stu-id="89db4-246">(We recommend that you wait at least 10 minutes before you begin part 2 of hello example, so that hello results are distinct in hello resulting telemetry data.)</span></span>

    EXEC psp2 @param2=1;
    TRUNCATE TABLE t1;

    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp2 @param2=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="89db4-247">Каждая часть примера пытается toorun параметризованную вставку 1000 раз (toogenerate достаточно toouse нагрузки качестве проверочного набора данных).</span><span class="sxs-lookup"><span data-stu-id="89db4-247">Each part of this example attempts toorun a parameterized insert statement 1,000 times (toogenerate a sufficient load toouse as a test data set).</span></span> <span data-ttu-id="89db4-248">При выполнении хранимой процедуры, обработчик запросов hello проверяет значение параметра hello, которое передается процедуре toohello во время первой компиляции («пробное сохранение параметров»).</span><span class="sxs-lookup"><span data-stu-id="89db4-248">When it executes stored procedures, hello query processor examines hello parameter value that is passed toohello procedure during its first compilation (parameter "sniffing").</span></span> <span data-ttu-id="89db4-249">Процессор Hello кэширует hello результирующий план и использует его в дальнейшем, даже если значение параметра hello отличается.</span><span class="sxs-lookup"><span data-stu-id="89db4-249">hello processor caches hello resulting plan and uses it for later invocations, even if hello parameter value is different.</span></span> <span data-ttu-id="89db4-250">оптимальный план Hello не может использоваться во всех случаях.</span><span class="sxs-lookup"><span data-stu-id="89db4-250">hello optimal plan might not be used in all cases.</span></span> <span data-ttu-id="89db4-251">Иногда требуется tooguide hello оптимизатор toopick план, который лучше подходит для случая среднее hello, а не конкретного случая hello из при первой компиляции запросов hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-251">Sometimes you need tooguide hello optimizer toopick a plan that is better for hello average case rather than hello specific case from when hello query was first compiled.</span></span> <span data-ttu-id="89db4-252">В этом примере изначальный план hello приводит к возникновению ошибки план «проверка», который считывает все строки toofind значение, которое отвечает параметр hello:</span><span class="sxs-lookup"><span data-stu-id="89db4-252">In this example, hello initial plan generates a "scan" plan that reads all rows toofind each value that matches hello parameter:</span></span>

![Настройка запроса с использованием плана сканирования](./media/sql-database-performance-guidance/query_tuning_1.png)

<span data-ttu-id="89db4-254">Так как мы выполним процедуру hello, используя hello значение 1, результирующий план hello было оптимальным для hello значение 1, но было оптимальным для всех значений в таблице hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-254">Because we executed hello procedure by using hello value 1, hello resulting plan was optimal for hello value 1 but was suboptimal for all other values in hello table.</span></span> <span data-ttu-id="89db4-255">скорее всего, результат Hello не, что вам потребуется, если были toopick случайным образом, каждый план потому, что план hello медленнее и использует больше ресурсов.</span><span class="sxs-lookup"><span data-stu-id="89db4-255">hello result likely isn't what you would want if you were toopick each plan randomly, because hello plan performs more slowly and uses more resources.</span></span>

<span data-ttu-id="89db4-256">При выполнении теста hello с `SET STATISTICS IO` значение слишком`ON`, hello логического сканирования в этом примере выполняется работа фоновом hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-256">If you run hello test with `SET STATISTICS IO` set too`ON`, hello logical scan work in this example is done behind hello scenes.</span></span> <span data-ttu-id="89db4-257">Можно просмотреть 1,148 операций чтения, план hello (который является неэффективным, если регистр среднее hello tooreturn только одну строку):</span><span class="sxs-lookup"><span data-stu-id="89db4-257">You can see that there are 1,148 reads done by hello plan (which is inefficient, if hello average case is tooreturn just one row):</span></span>

![Настройка запроса с использованием логического сканирования](./media/sql-database-performance-guidance/query_tuning_2.png)

<span data-ttu-id="89db4-259">во второй части примера hello для Hello использует toouse оптимизатор hello tootell указание запроса определенное значение во время компиляции hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-259">hello second part of hello example uses a query hint tootell hello optimizer toouse a specific value during hello compilation process.</span></span> <span data-ttu-id="89db4-260">В этом случае он заставляет hello запроса процессора tooignore hello значение, которое передается как параметр hello и вместо этого tooassume `UNKNOWN`.</span><span class="sxs-lookup"><span data-stu-id="89db4-260">In this case, it forces hello query processor tooignore hello value that is passed as hello parameter, and instead tooassume `UNKNOWN`.</span></span> <span data-ttu-id="89db4-261">Это относится tooa значение, которое имеет hello среднюю частоту в таблице hello (без учета наклон).</span><span class="sxs-lookup"><span data-stu-id="89db4-261">This refers tooa value that has hello average frequency in hello table (ignoring skew).</span></span> <span data-ttu-id="89db4-262">результирующий план Hello — план на основе поиска, который выполняется быстрее и использует меньше ресурсов, в среднем, чем план hello в части 1 этого примера:</span><span class="sxs-lookup"><span data-stu-id="89db4-262">hello resulting plan is a seek-based plan that is faster and uses fewer resources, on average, than hello plan in part 1 of this example:</span></span>

![Настройка запроса с помощью указания запроса](./media/sql-database-performance-guidance/query_tuning_3.png)

<span data-ttu-id="89db4-264">Можно увидеть эффект hello в hello **sys.resource_stats** таблицы (отсутствует задержка по времени hello выполнении теста hello и когда hello данных заполняет таблицу hello).</span><span class="sxs-lookup"><span data-stu-id="89db4-264">You can see hello effect in hello **sys.resource_stats** table (there is a delay from hello time that you execute hello test and when hello data populates hello table).</span></span> <span data-ttu-id="89db4-265">Для этого примера, часть 1, выполняется в процессе временного окна 22:25:00 hello и часть 2 выполняются в 22:35:00.</span><span class="sxs-lookup"><span data-stu-id="89db4-265">For this example, part 1 executed during hello 22:25:00 time window, and part 2 executed at 22:35:00.</span></span> <span data-ttu-id="89db4-266">Hello использовала больше ресурсов в течение этого периода времени, чем hello позже у одного (из-за повышения эффективности).</span><span class="sxs-lookup"><span data-stu-id="89db4-266">hello earlier time window used more resources in that time window than hello later one (because of plan efficiency improvements).</span></span>

    SELECT TOP 1000 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Пример результатов настройки запроса](./media/sql-database-performance-guidance/query_tuning_4.png)

> [!NOTE]
> <span data-ttu-id="89db4-268">Хотя hello тома в этом примере намеренно мал, эффект hello неоптимальных параметров могут быть существенными, особенно для больших баз данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-268">Although hello volume in this example is intentionally small, hello effect of suboptimal parameters can be substantial, especially on larger databases.</span></span> <span data-ttu-id="89db4-269">Разница Hello, в некоторых случаях может быть между секунд для быстрого случаях до нескольких часов, для случаев, медленно.</span><span class="sxs-lookup"><span data-stu-id="89db4-269">hello difference, in extreme cases, can be between seconds for fast cases and hours for slow cases.</span></span>
> 
> 

<span data-ttu-id="89db4-270">Можно проверить **sys.resource_stats** toodetermine ли hello для теста использует больше или меньше ресурсов, чем еще один тест.</span><span class="sxs-lookup"><span data-stu-id="89db4-270">You can examine **sys.resource_stats** toodetermine whether hello resource for a test uses more or fewer resources than another test.</span></span> <span data-ttu-id="89db4-271">При сравнении данных разделения времени hello тестов, чтобы они не hello окне 5 минут в hello **sys.resource_stats** представления.</span><span class="sxs-lookup"><span data-stu-id="89db4-271">When you compare data, separate hello timing of tests so that they are not in hello same 5-minute window in hello **sys.resource_stats** view.</span></span> <span data-ttu-id="89db4-272">Hello цель упражнения hello — toominimize hello общий объем ресурсов, используемых и не toominimize hello пиковых нагрузок ресурсы.</span><span class="sxs-lookup"><span data-stu-id="89db4-272">hello goal of hello exercise is toominimize hello total amount of resources used, and not toominimize hello peak resources.</span></span> <span data-ttu-id="89db4-273">Обычно оптимизация части кода с целью уменьшения задержки выполнения также приводит к сокращению использования ресурсов.</span><span class="sxs-lookup"><span data-stu-id="89db4-273">Generally, optimizing a piece of code for latency also reduces resource consumption.</span></span> <span data-ttu-id="89db4-274">Убедитесь, что hello внесенные tooan приложения необходимы, и что hello изменения не влияют на отрицательно hello качества для тех, кто может использоваться в приложении hello подсказки в запросе.</span><span class="sxs-lookup"><span data-stu-id="89db4-274">Make sure that hello changes you make tooan application are necessary, and that hello changes don't negatively affect hello customer experience for someone who might be using query hints in hello application.</span></span>

<span data-ttu-id="89db4-275">Если рабочая нагрузка содержит ряд повторяющихся запросов, часто он делает toocapture смысле и проверить оптимальность hello выбранные плана тем, что hello минимальный размер единицы необходимые toohost hello базы данных resource.</span><span class="sxs-lookup"><span data-stu-id="89db4-275">If a workload has a set of repeating queries, often it makes sense toocapture and validate hello optimality of your plan choices because it drives hello minimum resource size unit required toohost hello database.</span></span> <span data-ttu-id="89db4-276">После проверки, время от времени повторную проверку планов hello toohelp вы убедитесь, что они не ухудшилась.</span><span class="sxs-lookup"><span data-stu-id="89db4-276">After you validate it, occasionally reexamine hello plans toohelp you make sure that they have not degraded.</span></span> <span data-ttu-id="89db4-277">Дополнительные сведения об указаниях запроса (Transact-SQL) см. [в этой статье](https://msdn.microsoft.com/library/ms181714.aspx).</span><span class="sxs-lookup"><span data-stu-id="89db4-277">You can learn more about [query hints (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span></span>

### <a name="cross-database-sharding"></a><span data-ttu-id="89db4-278">Сегментирование баз данных</span><span class="sxs-lookup"><span data-stu-id="89db4-278">Cross-database sharding</span></span>
<span data-ttu-id="89db4-279">Так как база данных SQL Azure работает на неспециализированном оборудовании, ограничения емкости hello для одной базы данных ниже, чем для традиционной локальной установки SQL Server.</span><span class="sxs-lookup"><span data-stu-id="89db4-279">Because Azure SQL Database runs on commodity hardware, hello capacity limits for a single database are lower than for a traditional on-premises SQL Server installation.</span></span> <span data-ttu-id="89db4-280">Некоторые клиенты использовать сегментирование методы toospread базы данных операции над несколькими базами данных при операции hello не позволяют поместить hello пределы одной базы данных в базе данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="89db4-280">Some customers use sharding techniques toospread database operations over multiple databases when hello operations don't fit inside hello limits of a single database in Azure SQL Database.</span></span> <span data-ttu-id="89db4-281">Большинство клиентов, использующих сегментирование в Базе данных SQL Azure, разбивают данные одного измерения на несколько баз данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-281">Most customers who use sharding techniques in Azure SQL Database split their data on a single dimension across multiple databases.</span></span> <span data-ttu-id="89db4-282">Для этого подхода необходимо toounderstand, что OLTP-приложений часто выполняют транзакции, которые применяются tooonly одной строки или tooa небольшой группе строк в схеме hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-282">For this approach, you need toounderstand that OLTP applications often perform transactions that apply tooonly one row or tooa small group of rows in hello schema.</span></span>

> [!NOTE]
> <span data-ttu-id="89db4-283">База данных SQL теперь предоставляет библиотеки tooassist с сегментированием.</span><span class="sxs-lookup"><span data-stu-id="89db4-283">SQL Database now provides a library tooassist with sharding.</span></span> <span data-ttu-id="89db4-284">Дополнительные сведения см. в статье [Обзор клиентской библиотеки для эластичных баз данных](sql-database-elastic-database-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="89db4-284">For more information, see [Elastic Database client library overview](sql-database-elastic-database-client-library.md).</span></span>
> 
> 

<span data-ttu-id="89db4-285">Например, если база данных содержит имя клиента, порядок и сведения о заказе (например hello стандартном примере базы данных Northwind, поставляемую с SQL Server), можно разделить эти данные на несколько баз данных с помощью группирования заказчику hello заказа и сведения о заказе, связанные с сведения.</span><span class="sxs-lookup"><span data-stu-id="89db4-285">For example, if a database has customer name, order, and order details (like hello traditional example Northwind database that ships with SQL Server), you could split this data into multiple databases by grouping a customer with hello related order and order detail information.</span></span> <span data-ttu-id="89db4-286">Вы может гарантирует, что данные этого клиента hello остаются в одной базе данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-286">You can guarantee that hello customer's data stays in a single database.</span></span> <span data-ttu-id="89db4-287">приложение Hello должно разбивать заказчиков по базам данных, эффективно распределять hello нагрузки между несколькими базами данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-287">hello application would split different customers across databases, effectively spreading hello load across multiple databases.</span></span> <span data-ttu-id="89db4-288">Сегментирование клиентов не только помогают избежать hello предельный размер базы данных, но база данных SQL Azure может также обрабатывать рабочие нагрузки, которые значительно больше, чем предельные hello hello разные уровни производительности, при условии, что каждая отдельная база данных помещается в его DTU.</span><span class="sxs-lookup"><span data-stu-id="89db4-288">With sharding, customers not only can avoid hello maximum database size limit, but Azure SQL Database also can process workloads that are significantly larger than hello limits of hello different performance levels, as long as each individual database fits into its DTU.</span></span>

<span data-ttu-id="89db4-289">Несмотря на то что сегментирование баз данных не снижает производительности hello статистических ресурсов для решения, очень эффективен при поддержке очень крупных решений, которые распределены по нескольким базам данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-289">Although database sharding doesn't reduce hello aggregate resource capacity for a solution, it's highly effective at supporting very large solutions that are spread over multiple databases.</span></span> <span data-ttu-id="89db4-290">Каждой базы данных можно выполнить в разных производительности уровня toosupport очень больших «действующие» базы данных с высокими требованиями к ресурсам.</span><span class="sxs-lookup"><span data-stu-id="89db4-290">Each database can run at a different performance level toosupport very large, "effective" databases with high resource requirements.</span></span>

### <a name="functional-partitioning"></a><span data-ttu-id="89db4-291">Функциональное секционирование</span><span class="sxs-lookup"><span data-stu-id="89db4-291">Functional partitioning</span></span>
<span data-ttu-id="89db4-292">Пользователи SQL Server часто объединяют несколько функций в отдельной базе данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-292">SQL Server users often combine many functions in a single database.</span></span> <span data-ttu-id="89db4-293">Например при наличии в приложении логику toomanage запасами склада, что база данных может содержать логику, связанную с запасами, отслеживанием заказов на покупку, хранимые процедуры и индексируется и материализованные представления, управлять отчетами конец месяца.</span><span class="sxs-lookup"><span data-stu-id="89db4-293">For example, if an application has logic toomanage inventory for a store, that database might have logic associated with inventory, tracking purchase orders, stored procedures, and indexed or materialized views that manage end-of-month reporting.</span></span> <span data-ttu-id="89db4-294">Этот метод позволяет упростить hello tooadminister базы данных для операций, таких как резервное копирование, но также требует вы toosize hello оборудования toohandle hello пиковой нагрузки на все функции приложения.</span><span class="sxs-lookup"><span data-stu-id="89db4-294">This technique makes it easier tooadminister hello database for operations like backup, but it also requires you toosize hello hardware toohandle hello peak load across all functions of an application.</span></span>

<span data-ttu-id="89db4-295">При использовании масштабируемой архитектуры в базе данных SQL Azure это различные функции toosplit смысл приложения в разных базах данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-295">If you use a scale-out architecture in Azure SQL Database, it's a good idea toosplit different functions of an application into different databases.</span></span> <span data-ttu-id="89db4-296">При использовании этого метода приложения масштабируются независимо друг от друга.</span><span class="sxs-lookup"><span data-stu-id="89db4-296">By using this technique, each application scales independently.</span></span> <span data-ttu-id="89db4-297">И, как приложения повышения (hello нагрузку на hello роста базы данных) hello администратор может выбрать уровни производительности независимо для каждой функции приложения hello.</span><span class="sxs-lookup"><span data-stu-id="89db4-297">As an application becomes busier (and hello load on hello database increases), hello administrator can choose independent performance levels for each function in hello application.</span></span> <span data-ttu-id="89db4-298">В этой архитектуре предельном hello приложения может быть больше, чем может обработать одного сервера, так как hello нагрузки распределены между несколькими компьютерами.</span><span class="sxs-lookup"><span data-stu-id="89db4-298">At hello limit, with this architecture, an application can be larger than a single commodity machine can handle because hello load is spread across multiple machines.</span></span>

### <a name="batch-queries"></a><span data-ttu-id="89db4-299">Пакетные запросы</span><span class="sxs-lookup"><span data-stu-id="89db4-299">Batch queries</span></span>
<span data-ttu-id="89db4-300">Для приложений, доступ к данным с помощью большого объема часто нерегламентированные запросы к, достаточно много времени ответа уходит на сетевого взаимодействия между уровнями приложения hello и hello базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="89db4-300">For applications that access data by using high-volume, frequent, ad hoc querying, a substantial amount of response time is spent on network communication between hello application tier and hello Azure SQL Database tier.</span></span> <span data-ttu-id="89db4-301">Даже в том случае, если оба hello приложения и базы данных SQL Azure находятся в hello в одном центре обработки данных, hello сетевая задержка между двумя hello может вырасти большим числом операций доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="89db4-301">Even when both hello application and Azure SQL Database are in hello same data center, hello network latency between hello two might be magnified by a large number of data access operations.</span></span> <span data-ttu-id="89db4-302">round сети hello tooreduce поездок hello данных операций доступа, рассмотрите возможность использования hello параметр tooeither пакета hello нерегламентированных запросов или toocompile их как хранимые процедуры.</span><span class="sxs-lookup"><span data-stu-id="89db4-302">tooreduce hello network round trips for hello data access operations, consider using hello option tooeither batch hello ad hoc queries, or toocompile them as stored procedures.</span></span> <span data-ttu-id="89db4-303">При пакетных hello нерегламентированных запросов, можно отправить несколько запросов как один большой пакет в tooAzure одного обработки базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="89db4-303">If you batch hello ad hoc queries, you can send multiple queries as one large batch in a single trip tooAzure SQL Database.</span></span> <span data-ttu-id="89db4-304">При компиляции нерегламентированные запросы в хранимой процедуре, вы сможете достигнуть же результат, как если бы их пакетных приветствия.</span><span class="sxs-lookup"><span data-stu-id="89db4-304">If you compile ad hoc queries in a stored procedure, you could achieve hello same result as if you batch them.</span></span> <span data-ttu-id="89db4-305">С помощью хранимой процедуры также дает hello расширить возможности hello кэширования hello планов запросов в базе данных SQL Azure, чтобы можно было использовать hello снова хранимой процедуры.</span><span class="sxs-lookup"><span data-stu-id="89db4-305">Using a stored procedure also gives you hello benefit of increasing hello chances of caching hello query plans in Azure SQL Database so you can use hello stored procedure again.</span></span>

<span data-ttu-id="89db4-306">Некоторые приложения требуют большого количества операций записи. </span><span class="sxs-lookup"><span data-stu-id="89db4-306">Some applications are write-intensive.</span></span> <span data-ttu-id="89db4-307">Иногда можно уменьшить, учитывая как записывает toobatch hello общую нагрузку операций ввода-вывода в базе данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-307">Sometimes you can reduce hello total I/O load on a database by considering how toobatch writes together.</span></span> <span data-ttu-id="89db4-308">Часто для этого нужно просто использовать явные транзакции вместо автоматических в хранимых процедурах и пакетах нерегламентированных запросов.</span><span class="sxs-lookup"><span data-stu-id="89db4-308">Often, this is as simple as using explicit transactions instead of auto-commit transactions in stored procedures and ad hoc batches.</span></span> <span data-ttu-id="89db4-309">Оценку различных подходов см. в статье [Как повысить производительность приложений базы данных SQL с помощью пакетной обработки](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span><span class="sxs-lookup"><span data-stu-id="89db4-309">For an evaluation of different techniques you can use, see [Batching techniques for SQL Database applications in Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span></span> <span data-ttu-id="89db4-310">Попробуйте ввести собственные рабочей нагрузки toofind hello оптимальной модели пакетной обработки.</span><span class="sxs-lookup"><span data-stu-id="89db4-310">Experiment with your own workload toofind hello right model for batching.</span></span> <span data-ttu-id="89db4-311">Гарантирует, быть убедиться, что toounderstand, модель может иметь несколько различных согласованность транзакций.</span><span class="sxs-lookup"><span data-stu-id="89db4-311">Be sure toounderstand that a model might have slightly different transactional consistency guarantees.</span></span> <span data-ttu-id="89db4-312">Выявление hello оптимальной рабочей нагрузки минимизирует использование ресурсов требуется найти правильное сочетание hello согласованность и производительность компромиссы.</span><span class="sxs-lookup"><span data-stu-id="89db4-312">Finding hello right workload that minimizes resource use requires finding hello right combination of consistency and performance trade-offs.</span></span>

### <a name="application-tier-caching"></a><span data-ttu-id="89db4-313">Кэширование на уровне приложения</span><span class="sxs-lookup"><span data-stu-id="89db4-313">Application-tier caching</span></span>
<span data-ttu-id="89db4-314">Некоторые приложения базы данных содержат рабочие нагрузки, выполняющие много операций чтения.</span><span class="sxs-lookup"><span data-stu-id="89db4-314">Some database applications have read-heavy workloads.</span></span> <span data-ttu-id="89db4-315">Кэширование слои могут снизить нагрузку на hello в базе данных hello и потенциально может снизить hello производительности уровня требуется toosupport базы данных с помощью базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="89db4-315">Caching layers might reduce hello load on hello database and might potentially reduce hello performance level required toosupport a database by using Azure SQL Database.</span></span> <span data-ttu-id="89db4-316">С [кэш Azure Redis](https://azure.microsoft.com/services/cache/), при наличии чтения тяжелой рабочей нагрузкой, можно считывать данные hello один раз (или, возможно, один раз в компьютеров уровня приложений, в зависимости от того, как он настроен) и затем сохранять данные вне базы данных SQL.</span><span class="sxs-lookup"><span data-stu-id="89db4-316">With [Azure Redis Cache](https://azure.microsoft.com/services/cache/), if you have a read-heavy workload, you can read hello data once (or perhaps once per application-tier machine, depending on how it is configured), and then store that data outside your SQL database.</span></span> <span data-ttu-id="89db4-317">Это способ tooreduce нагрузку на базу данных (ЦП и чтения ввода-вывода), но отсутствует влияние на согласованность транзакций, так как считываемые из кэша hello hello данные могут быть синхронизированы с данными hello hello базы данных.</span><span class="sxs-lookup"><span data-stu-id="89db4-317">This is a way tooreduce database load (CPU and read I/O), but there is an effect on transactional consistency because hello data being read from hello cache might be out of sync with hello data in hello database.</span></span> <span data-ttu-id="89db4-318">Для многих приложений определенный уровень несогласованности приемлем, однако это подходит не для всех рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="89db4-318">Although in many applications some level of inconsistency is acceptable, that's not true for all workloads.</span></span> <span data-ttu-id="89db4-319">Мы советуем внимательно изучить требования к приложению, прежде чем использовать стратегию кэширования на уровне приложения.</span><span class="sxs-lookup"><span data-stu-id="89db4-319">You should fully understand any application requirements before you implement an application-tier caching strategy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="89db4-320">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="89db4-320">Next steps</span></span>
* <span data-ttu-id="89db4-321">Дополнительные сведения об уровнях служб см. в статье [Параметры базы данных SQL и производительность](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="89db4-321">For more information about service tiers, see [SQL Database options and performance](sql-database-service-tiers.md)</span></span>
* <span data-ttu-id="89db4-322">Дополнительные сведения о пулах эластичных баз данных Azure см. в статье [Что такое пул эластичных БД Azure?](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="89db4-322">For more information about elastic pools, see [What is an Azure elastic pool?](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="89db4-323">Сведения о производительности и эластичных пулов см. в разделе [при tooconsider пуле эластичных БД](sql-database-elastic-pool-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="89db4-323">For information about performance and elastic pools, see [When tooconsider an elastic pool](sql-database-elastic-pool-guidance.md)</span></span>

