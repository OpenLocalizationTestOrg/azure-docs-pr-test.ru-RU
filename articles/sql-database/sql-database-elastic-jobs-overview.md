---
title: "базы данных горизонтально масштабируемого облака aaaManaging | Документы Microsoft"
description: "Иллюстрирует hello службы заданий эластичных баз данных"
metakeywords: azure sql database elastic databases
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 6fa47cf2-1162-4534-a206-6e2d95b78580
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: b6d330cd712421b8cba781e835830772e6e5b77e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="managing-scaled-out-cloud-databases"></a><span data-ttu-id="b78c4-103">Управление масштабируемыми облачными базами данных</span><span class="sxs-lookup"><span data-stu-id="b78c4-103">Managing scaled-out cloud databases</span></span>
<span data-ttu-id="b78c4-104">Здравствуйте, toomanage масштабируемых сегментированных баз данных **заданий эластичных баз данных** (Предварительная версия) обеспечивает вы tooreliably выполнения скрипта Transact-SQL (T-SQL) между несколькими базами данных, включая:</span><span class="sxs-lookup"><span data-stu-id="b78c4-104">toomanage scaled-out sharded databases, hello **Elastic Database jobs** feature (preview) enables you tooreliably execute a Transact-SQL (T-SQL) script across a group of databases, including:</span></span>

* <span data-ttu-id="b78c4-105">пользовательское семейство баз данных (см. ниже);</span><span class="sxs-lookup"><span data-stu-id="b78c4-105">a custom-defined collection of databases (explained below)</span></span>
* <span data-ttu-id="b78c4-106">все базы данных в [эластичном пуле](sql-database-elastic-pool.md);</span><span class="sxs-lookup"><span data-stu-id="b78c4-106">all databases in an [elastic pool](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="b78c4-107">набор сегментов (созданный с помощью [клиентской библиотеки эластичной базы данных](sql-database-elastic-database-client-library.md)).</span><span class="sxs-lookup"><span data-stu-id="b78c4-107">a shard set (created using [Elastic Database client library](sql-database-elastic-database-client-library.md)).</span></span> 

## <a name="documentation"></a><span data-ttu-id="b78c4-108">Документация</span><span class="sxs-lookup"><span data-stu-id="b78c4-108">Documentation</span></span>
* <span data-ttu-id="b78c4-109">[Установить компоненты задания hello эластичной базы данных](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-109">[Install hello Elastic Database job components](sql-database-elastic-jobs-service-installation.md).</span></span> 
* <span data-ttu-id="b78c4-110">[Приступая к работе с инструментами эластичных баз данных](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-110">[Get started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>
* <span data-ttu-id="b78c4-111">[Создание и управление заданиями с помощью PowerShell](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-111">[Create and manage jobs using PowerShell](sql-database-elastic-jobs-powershell.md).</span></span>
* [<span data-ttu-id="b78c4-112">Создание развернутых баз данных SQL Azure и управление ими</span><span class="sxs-lookup"><span data-stu-id="b78c4-112">Create and manage scaled out Azure SQL Databases</span></span>](sql-database-elastic-jobs-getting-started.md)

<span data-ttu-id="b78c4-113">**Заданий эластичных баз данных** клиента Azure облачной службы, размещенной в, обеспечивающую выполнение кода hello ad-hoc и запланированные административные задачи, которые называются является в настоящее время **задания**.</span><span class="sxs-lookup"><span data-stu-id="b78c4-113">**Elastic Database jobs** is currently a customer-hosted Azure Cloud Service that enables hello execution of ad-hoc and scheduled administrative tasks, which are called **jobs**.</span></span> <span data-ttu-id="b78c4-114">С заданиями можно легко и надежно управлять больших групп баз данных SQL Azure, запуская скрипты Transact-SQL: tooperform административные операции.</span><span class="sxs-lookup"><span data-stu-id="b78c4-114">With jobs, you can easily and reliably manage large groups of Azure SQL Databases by running Transact-SQL scripts tooperform administrative operations.</span></span> 

![Служба заданий обработки эластичных баз данных][1]

## <a name="why-use-jobs"></a><span data-ttu-id="b78c4-116">Зачем использовать задания?</span><span class="sxs-lookup"><span data-stu-id="b78c4-116">Why use jobs?</span></span>
<span data-ttu-id="b78c4-117">**Управление**</span><span class="sxs-lookup"><span data-stu-id="b78c4-117">**Manage**</span></span>

<span data-ttu-id="b78c4-118">Удобство управления изменениями схемы, учетными данными, обновлением эталонных данных, сбором сведений о производительности и клиентских данных телеметрии.</span><span class="sxs-lookup"><span data-stu-id="b78c4-118">Easily do schema changes, credentials management, reference data updates, performance data collection or tenant (customer) telemetry collection.</span></span>

<span data-ttu-id="b78c4-119">**Отчеты**</span><span class="sxs-lookup"><span data-stu-id="b78c4-119">**Reports**</span></span>

<span data-ttu-id="b78c4-120">Сбор данных из семейства баз данных SQL Azure в одну целевую таблицу.</span><span class="sxs-lookup"><span data-stu-id="b78c4-120">Aggregate data from a collection of Azure SQL Databases into a single destination table.</span></span>

<span data-ttu-id="b78c4-121">**Уменьшение нагрузки**</span><span class="sxs-lookup"><span data-stu-id="b78c4-121">**Reduce overhead**</span></span>

<span data-ttu-id="b78c4-122">Как правило необходимо подключение базы данных tooeach независимо друг от друга в инструкции Transact-SQL toorun заказа или выполнять другие задачи администрирования.</span><span class="sxs-lookup"><span data-stu-id="b78c4-122">Normally, you must connect tooeach database independently in order toorun Transact-SQL statements or perform other administrative tasks.</span></span> <span data-ttu-id="b78c4-123">Задание обрабатывает задачу hello ведения журнала в базе данных tooeach в целевой группе hello.</span><span class="sxs-lookup"><span data-stu-id="b78c4-123">A job handles hello task of logging in tooeach database in hello target group.</span></span> <span data-ttu-id="b78c4-124">Также определите, поддерживать и сохранения toobe скриптов Transact-SQL, выполняется между несколькими базами данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="b78c4-124">You also define, maintain and persist Transact-SQL scripts toobe executed across a group of Azure SQL Databases.</span></span>

<span data-ttu-id="b78c4-125">**Учет**</span><span class="sxs-lookup"><span data-stu-id="b78c4-125">**Accounting**</span></span>

<span data-ttu-id="b78c4-126">Задания выполняются hello скрипта и журнала hello состояние выполнения для каждой базы данных.</span><span class="sxs-lookup"><span data-stu-id="b78c4-126">Jobs run hello script and log hello status of execution for each database.</span></span> <span data-ttu-id="b78c4-127">При сбое действие автоматически выполняется повторно.</span><span class="sxs-lookup"><span data-stu-id="b78c4-127">You also get automatic retry when failures occur.</span></span>

<span data-ttu-id="b78c4-128">**Гибкость**</span><span class="sxs-lookup"><span data-stu-id="b78c4-128">**Flexibility**</span></span>

<span data-ttu-id="b78c4-129">Определение пользовательских групп для баз данных SQL Azure и определение расписаний для запуска задания.</span><span class="sxs-lookup"><span data-stu-id="b78c4-129">Define custom groups of Azure SQL Databases, and define schedules for running a job.</span></span>

> [!NOTE]
> <span data-ttu-id="b78c4-130">В hello портал Azure лишь часть функций ограниченные tooSQL Azure эластичных пулов доступна.</span><span class="sxs-lookup"><span data-stu-id="b78c4-130">In hello Azure portal, only a reduced set of functions limited tooSQL Azure elastic pools is available.</span></span> <span data-ttu-id="b78c4-131">С помощью API-интерфейсов PowerShell tooaccess hello полного набора функциональных возможностей текущей hello.</span><span class="sxs-lookup"><span data-stu-id="b78c4-131">Use hello PowerShell APIs tooaccess hello full set of current functionality.</span></span>
> 
> 

## <a name="applications"></a><span data-ttu-id="b78c4-132">Приложения</span><span class="sxs-lookup"><span data-stu-id="b78c4-132">Applications</span></span>
* <span data-ttu-id="b78c4-133">Выполнение административных задач, таких как развертывание новой схемы.</span><span class="sxs-lookup"><span data-stu-id="b78c4-133">Perform administrative tasks, such as deploying a new schema.</span></span>
* <span data-ttu-id="b78c4-134">Обновление эталонных данных (например, сведений о продукте, которые являются общими для всех баз данных).</span><span class="sxs-lookup"><span data-stu-id="b78c4-134">Update reference data-product information common across all databases.</span></span> <span data-ttu-id="b78c4-135">Планируйте автоматические обновления на нерабочие часы в будни.</span><span class="sxs-lookup"><span data-stu-id="b78c4-135">Or schedules automatic updates every weekday, after hours.</span></span>
* <span data-ttu-id="b78c4-136">Перестройте производительность запросов индексов tooimprove.</span><span class="sxs-lookup"><span data-stu-id="b78c4-136">Rebuild indexes tooimprove query performance.</span></span> <span data-ttu-id="b78c4-137">Перестроение Hello может быть настроенный tooexecute по набору баз данных на регулярной основе, таких как часы с наименьшей загрузкой.</span><span class="sxs-lookup"><span data-stu-id="b78c4-137">hello rebuilding can be configured tooexecute across a collection of databases on a recurring basis, such as during off-peak hours.</span></span>
* <span data-ttu-id="b78c4-138">Собирайте результаты запросов из набора баз данных в центральную таблицу на постоянной основе.</span><span class="sxs-lookup"><span data-stu-id="b78c4-138">Collect query results from a set of databases into a central table on an on-going basis.</span></span> <span data-ttu-id="b78c4-139">Производительность запросов может выполняться непрерывно и настроить toobe дополнительные задачи tootrigger выполнена.</span><span class="sxs-lookup"><span data-stu-id="b78c4-139">Performance queries can be continually executed and configured tootrigger additional tasks toobe executed.</span></span>
* <span data-ttu-id="b78c4-140">Выполнение длительности выполнения запросов обработки данных между большим набором баз данных, например hello коллекцию телеметрии клиента.</span><span class="sxs-lookup"><span data-stu-id="b78c4-140">Execute longer running data processing queries across a large set of databases, for example hello collection of customer telemetry.</span></span> <span data-ttu-id="b78c4-141">Результаты собираются в одну целевую таблицу для дальнейшего анализа.</span><span class="sxs-lookup"><span data-stu-id="b78c4-141">Results are collected into a single destination table for further analysis.</span></span>

## <a name="elastic-database-jobs-end-to-end"></a><span data-ttu-id="b78c4-142">Работа с заданиями обработки эластичных баз данных</span><span class="sxs-lookup"><span data-stu-id="b78c4-142">Elastic Database jobs: end-to-end</span></span>
1. <span data-ttu-id="b78c4-143">Установка hello **заданий эластичных баз данных** компонентов.</span><span class="sxs-lookup"><span data-stu-id="b78c4-143">Install hello **Elastic Database jobs** components.</span></span> <span data-ttu-id="b78c4-144">Дополнительные сведения см. в статье [Обзор установки заданий обработки эластичных баз данных](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-144">For more information, see [Installing Elastic Database jobs](sql-database-elastic-jobs-service-installation.md).</span></span> <span data-ttu-id="b78c4-145">Если происходит сбой установки hello, см. раздел [как toouninstall](sql-database-elastic-jobs-uninstall.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-145">If hello installation fails, see [how toouninstall](sql-database-elastic-jobs-uninstall.md).</span></span>
2. <span data-ttu-id="b78c4-146">Используйте API-интерфейсов PowerShell tooaccess hello дополнительные функциональные возможности, например, для создания пользовательских баз данных коллекций, добавление расписаний и/или сбора результирующих наборов.</span><span class="sxs-lookup"><span data-stu-id="b78c4-146">Use hello PowerShell APIs tooaccess more functionality, for example creating custom-defined database collections, adding schedules and/or gathering results sets.</span></span> <span data-ttu-id="b78c4-147">Используйте портал hello для простой установки и создания и отслеживанием заданий ограничены tooexecution от **эластичного пула**.</span><span class="sxs-lookup"><span data-stu-id="b78c4-147">Use hello portal for simple installation and creation/monitoring of jobs limited tooexecution against a **elastic pool**.</span></span> 
3. <span data-ttu-id="b78c4-148">Создайте зашифрованные учетные данные для выполнения заданий и [Добавление hello пользователь (или роль) tooeach базы данных в группе hello](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-148">Create encrypted credentials for job execution and [add hello user (or role) tooeach database in hello group](sql-database-security-overview.md).</span></span>
4. <span data-ttu-id="b78c4-149">Создайте скрипт T-SQL, который можно запустить для каждой базы данных в группе hello идемпотентными.</span><span class="sxs-lookup"><span data-stu-id="b78c4-149">Create an idempotent T-SQL script that can be run against every database in hello group.</span></span> 
5. <span data-ttu-id="b78c4-150">Выполните эти действия toocreate задания, с помощью портала Azure hello: [Создание и управление заданиями эластичной базы данных](sql-database-elastic-jobs-create-and-manage.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-150">Follow these steps toocreate jobs using hello Azure portal: [Creating and managing Elastic Database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> 
6. <span data-ttu-id="b78c4-151">Вы также можете воспользоваться сценариями PowerShell. См. статью [Создание заданий обработки эластичных баз данных для базы данных SQL и управление ими с помощью PowerShell (предварительная версия)](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-151">Or use PowerShell scripts: [Create and manage a SQL Database elastic database jobs using PowerShell (preview)](sql-database-elastic-jobs-powershell.md).</span></span>

## <a name="idempotent-scripts"></a><span data-ttu-id="b78c4-152">Идемпотентные сценарии</span><span class="sxs-lookup"><span data-stu-id="b78c4-152">Idempotent scripts</span></span>
<span data-ttu-id="b78c4-153">Hello сценарии должны быть [идемпотентными](https://en.wikipedia.org/wiki/Idempotence).</span><span class="sxs-lookup"><span data-stu-id="b78c4-153">hello scripts must be [idempotent](https://en.wikipedia.org/wiki/Idempotence).</span></span> <span data-ttu-id="b78c4-154">Другими словами «идемпотентными» означает, что если hello скрипта завершается успешно, и снова запустите, hello того же результата выполняется.</span><span class="sxs-lookup"><span data-stu-id="b78c4-154">In simple terms, "idempotent" means that if hello script succeeds, and it is run again, hello same result occurs.</span></span> <span data-ttu-id="b78c4-155">Сценарий может завершиться ошибкой из-за проблемы с сетью tootransient.</span><span class="sxs-lookup"><span data-stu-id="b78c4-155">A script may fail due tootransient network issues.</span></span> <span data-ttu-id="b78c4-156">В этом случае задания hello автоматически повторит попытку выполняемого сценария hello предустановленную несколько раз перед desisting.</span><span class="sxs-lookup"><span data-stu-id="b78c4-156">In that case, hello job will automatically retry running hello script a preset number of times before desisting.</span></span> <span data-ttu-id="b78c4-157">Сценарий идемпотентными имеет hello же результат, даже если была успешно выполнена дважды.</span><span class="sxs-lookup"><span data-stu-id="b78c4-157">An idempotent script has hello same result even if has been successfully run twice.</span></span> 

<span data-ttu-id="b78c4-158">Простой способ — tootest для hello существование объекта перед его созданием.</span><span class="sxs-lookup"><span data-stu-id="b78c4-158">A simple tactic is tootest for hello existence of an object before creating it.</span></span>  

    IF NOT EXIST (some_object)
    -- Create hello object 
    -- If it exists, drop hello object before recreating it.

<span data-ttu-id="b78c4-159">Аналогичным образом скрипт должен быть tooexecute может успешно логически тестирование для и вопреки любые условия находит.</span><span class="sxs-lookup"><span data-stu-id="b78c4-159">Similarly, a script must be able tooexecute successfully by logically testing for and countering any conditions it finds.</span></span>

## <a name="failures-and-logs"></a><span data-ttu-id="b78c4-160">Сбои и журналы</span><span class="sxs-lookup"><span data-stu-id="b78c4-160">Failures and logs</span></span>
<span data-ttu-id="b78c4-161">При сбое скрипта после нескольких попыток задания hello запись об ошибке hello и продолжается.</span><span class="sxs-lookup"><span data-stu-id="b78c4-161">If a script fails after multiple attempts, hello job logs hello error and continues.</span></span> <span data-ttu-id="b78c4-162">После завершения задания (то есть выполняются для всех баз данных в группе hello), можно проверить свой список неудачных попыток входа.</span><span class="sxs-lookup"><span data-stu-id="b78c4-162">After a job ends (meaning a run against all databases in hello group), you can check its list of failed attempts.</span></span> <span data-ttu-id="b78c4-163">журналы Hello подробно toodebug неисправный скриптов.</span><span class="sxs-lookup"><span data-stu-id="b78c4-163">hello logs provide details toodebug faulty scripts.</span></span> 

## <a name="group-types-and-creation"></a><span data-ttu-id="b78c4-164">Типы групп и их создание</span><span class="sxs-lookup"><span data-stu-id="b78c4-164">Group types and creation</span></span>
<span data-ttu-id="b78c4-165">Группы бывают двух типов:</span><span class="sxs-lookup"><span data-stu-id="b78c4-165">There are two kinds of groups:</span></span> 

1. <span data-ttu-id="b78c4-166">наборы сегментов;</span><span class="sxs-lookup"><span data-stu-id="b78c4-166">Shard sets</span></span>
2. <span data-ttu-id="b78c4-167">настраиваемые группы.</span><span class="sxs-lookup"><span data-stu-id="b78c4-167">Custom groups</span></span>

<span data-ttu-id="b78c4-168">Группы в наборе сегментов создаются с помощью hello [эластичной базы данных средства](sql-database-elastic-scale-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-168">Shard set groups are created using hello [Elastic Database tools](sql-database-elastic-scale-introduction.md).</span></span> <span data-ttu-id="b78c4-169">При создании группы набор сегментов баз данных добавляются или удаляются из группы hello автоматически.</span><span class="sxs-lookup"><span data-stu-id="b78c4-169">When you create a shard set group, databases are added or removed from hello group automatically.</span></span> <span data-ttu-id="b78c4-170">Например новый сегмент будет автоматически в группе hello при ее добавлении toohello карты сегментов.</span><span class="sxs-lookup"><span data-stu-id="b78c4-170">For example, a new shard will be automatically in hello group when you add it toohello shard map.</span></span> <span data-ttu-id="b78c4-171">Для группы hello можно затем запустить задание.</span><span class="sxs-lookup"><span data-stu-id="b78c4-171">A job can then be run against hello group.</span></span>

<span data-ttu-id="b78c4-172">Настраиваемые группы на Здравствуйте другой стороны, строго определены.</span><span class="sxs-lookup"><span data-stu-id="b78c4-172">Custom groups, on hello other hand, are rigidly defined.</span></span> <span data-ttu-id="b78c4-173">В таких группах базы данных нужно добавлять и удалять явно.</span><span class="sxs-lookup"><span data-stu-id="b78c4-173">You must explicitly add or remove databases from custom groups.</span></span> <span data-ttu-id="b78c4-174">При удалении базы данных в группе hello hello задания будет предпринята скрипт hello toorun hello базе данных, что привело к возможному сбою.</span><span class="sxs-lookup"><span data-stu-id="b78c4-174">If a database in hello group is dropped, hello job will attempt toorun hello script against hello database resulting in an eventual failure.</span></span> <span data-ttu-id="b78c4-175">Группы, созданные с помощью hello портал Azure в настоящее время — настраиваемые группы.</span><span class="sxs-lookup"><span data-stu-id="b78c4-175">Groups created using hello Azure portal currently are custom groups.</span></span> 

## <a name="components-and-pricing"></a><span data-ttu-id="b78c4-176">Компоненты и цены</span><span class="sxs-lookup"><span data-stu-id="b78c4-176">Components and pricing</span></span>
<span data-ttu-id="b78c4-177">Hello следующие компоненты совместно toocreate Azure облачную службу, обеспечивающую выполнение специальных административных заданий.</span><span class="sxs-lookup"><span data-stu-id="b78c4-177">hello following components work together toocreate an Azure Cloud service that enables ad-hoc execution of administrative jobs.</span></span> <span data-ttu-id="b78c4-178">компоненты Hello установлена и настроена автоматически во время установки в вашей подписке.</span><span class="sxs-lookup"><span data-stu-id="b78c4-178">hello components are installed and configured automatically during setup, in your subscription.</span></span> <span data-ttu-id="b78c4-179">Hello служб можно определить, как все они имеют hello же автоматически формируемым именем.</span><span class="sxs-lookup"><span data-stu-id="b78c4-179">You can identify hello services as they all have hello same auto-generated name.</span></span> <span data-ttu-id="b78c4-180">Hello имя является уникальным и состоит из префикса hello «edj» следуют 21 случайных символов.</span><span class="sxs-lookup"><span data-stu-id="b78c4-180">hello name is unique, and consists of hello prefix "edj" followed by 21 randomly generated characters.</span></span>

* <span data-ttu-id="b78c4-181">**Облачная служба Azure**: заданий эластичных баз данных (Предварительная версия) поставляется как клиент размещенного облака Azure задачи запрошено выполнение службы tooperform hello.</span><span class="sxs-lookup"><span data-stu-id="b78c4-181">**Azure Cloud Service**: elastic database jobs (preview) is delivered as a customer-hosted Azure Cloud service tooperform execution of hello requested tasks.</span></span> <span data-ttu-id="b78c4-182">Из портала hello hello служба развертывается и размещенные в вашей подписке Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="b78c4-182">From hello portal, hello service is deployed and hosted in your Microsoft Azure subscription.</span></span> <span data-ttu-id="b78c4-183">службы развертывания по умолчанию Hello выполняется с hello минимум два рабочих ролей для обеспечения высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="b78c4-183">hello default deployed service runs with hello minimum of two worker roles for high availability.</span></span> <span data-ttu-id="b78c4-184">размер по умолчанию Hello каждой рабочей роли (ElasticDatabaseJobWorker) работает на экземпляре A0.</span><span class="sxs-lookup"><span data-stu-id="b78c4-184">hello default size of each worker role (ElasticDatabaseJobWorker) runs on an A0 instance.</span></span> <span data-ttu-id="b78c4-185">Сведения о ценах на облачные службы см. [здесь](https://azure.microsoft.com/pricing/details/cloud-services/).</span><span class="sxs-lookup"><span data-stu-id="b78c4-185">For pricing, see [Cloud services pricing](https://azure.microsoft.com/pricing/details/cloud-services/).</span></span> 
* <span data-ttu-id="b78c4-186">**База данных SQL Azure**: hello служба использует базы данных SQL Azure называется hello **базы данных системы управления** toostore все метаданные задания hello.</span><span class="sxs-lookup"><span data-stu-id="b78c4-186">**Azure SQL Database**: hello service uses an Azure SQL Database known as hello **control database** toostore all of hello job metadata.</span></span> <span data-ttu-id="b78c4-187">уровень обслуживания по умолчанию Hello является S0.</span><span class="sxs-lookup"><span data-stu-id="b78c4-187">hello default service tier is a S0.</span></span> <span data-ttu-id="b78c4-188">Сведения о ценах на базы данных SQL см. [здесь](https://azure.microsoft.com/pricing/details/sql-database/).</span><span class="sxs-lookup"><span data-stu-id="b78c4-188">For pricing, see [SQL Database Pricing](https://azure.microsoft.com/pricing/details/sql-database/).</span></span>
* <span data-ttu-id="b78c4-189">**Azure Service Bus**: Azure Service Bus предназначен для координации работы hello в hello Azure облачной службы.</span><span class="sxs-lookup"><span data-stu-id="b78c4-189">**Azure Service Bus**: An Azure Service Bus is for coordination of hello work within hello Azure Cloud Service.</span></span> <span data-ttu-id="b78c4-190">Сведения о ценах на служебную шину см. [здесь](https://azure.microsoft.com/pricing/details/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="b78c4-190">See [Service Bus Pricing](https://azure.microsoft.com/pricing/details/service-bus/).</span></span>
* <span data-ttu-id="b78c4-191">**Хранилище Azure**: учетная запись хранилища Azure используется toostore диагностических выходных данных ведения журнала в событии hello, проблема не может быть делегировать отладку (см. [включение диагностики в облачных службах Azure и виртуальных машин](../cloud-services/cloud-services-dotnet-diagnostics.md)).</span><span class="sxs-lookup"><span data-stu-id="b78c4-191">**Azure Storage**: An Azure Storage account is used toostore diagnostic output logging in hello event that an issue requires further debugging (see [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md)).</span></span> <span data-ttu-id="b78c4-192">Сведения о ценах на хранилище Azure см. [здесь](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="b78c4-192">For pricing, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>

## <a name="how-elastic-database-jobs-work"></a><span data-ttu-id="b78c4-193">Как работают задания обработки эластичных баз данных</span><span class="sxs-lookup"><span data-stu-id="b78c4-193">How Elastic Database jobs work</span></span>
1. <span data-ttu-id="b78c4-194">Базе данных SQL Azure назначается **управляющая база данных** , в которой хранятся все метаданные и сведения о состоянии.</span><span class="sxs-lookup"><span data-stu-id="b78c4-194">An Azure SQL Database is designated a **control database** which stores all meta-data and state data.</span></span>
2. <span data-ttu-id="b78c4-195">доступ к базе данных управления Hello hello **служба заданий** toolaunch и отслеживания tooexecute заданий.</span><span class="sxs-lookup"><span data-stu-id="b78c4-195">hello control database is accessed by hello **job service** toolaunch and track jobs tooexecute.</span></span>
3. <span data-ttu-id="b78c4-196">Двух разных ролей соединяются с базой данных управления hello.</span><span class="sxs-lookup"><span data-stu-id="b78c4-196">Two different roles communicate with hello control database:</span></span> 
   * <span data-ttu-id="b78c4-197">Контроллер: Определяет, какие задания требуют задачи tooperform hello запрошенную путем создания новых рабочих заданий и задания неудачных попыток.</span><span class="sxs-lookup"><span data-stu-id="b78c4-197">Controller: Determines which jobs require tasks tooperform hello requested job, and retries failed jobs by creating new job tasks.</span></span>
   * <span data-ttu-id="b78c4-198">Задания выполнения задачи: Выполняет hello рабочих заданий.</span><span class="sxs-lookup"><span data-stu-id="b78c4-198">Job Task Execution: Carries out hello job tasks.</span></span>

### <a name="job-task-types"></a><span data-ttu-id="b78c4-199">Типы задач</span><span class="sxs-lookup"><span data-stu-id="b78c4-199">Job task types</span></span>
<span data-ttu-id="b78c4-200">Существует несколько типов задач, которые выполняют задания:</span><span class="sxs-lookup"><span data-stu-id="b78c4-200">There are multiple types of job tasks that carry out execution of jobs:</span></span>

* <span data-ttu-id="b78c4-201">ShardMapRefresh: Запросы hello toodetermine карты сегментов, все базы данных hello использовать в качестве сегментов</span><span class="sxs-lookup"><span data-stu-id="b78c4-201">ShardMapRefresh: Queries hello shard map toodetermine all hello databases used as shards</span></span>
* <span data-ttu-id="b78c4-202">ScriptSplit: Разбивает один скрипт hello «Перейти» инструкций на пакеты</span><span class="sxs-lookup"><span data-stu-id="b78c4-202">ScriptSplit: Splits hello script across ‘GO’ statements into batches</span></span>
* <span data-ttu-id="b78c4-203">ExpandJob: создает дочерние задачи для каждой базы данных из задачи, которая направлена на группу баз данных</span><span class="sxs-lookup"><span data-stu-id="b78c4-203">ExpandJob: Creates child jobs for each database from a job that targets a group of databases</span></span>
* <span data-ttu-id="b78c4-204">ScriptExecution: выполняет сценарий для определенной базы данных с использованием заданных учетных данных</span><span class="sxs-lookup"><span data-stu-id="b78c4-204">ScriptExecution: Executes a script against a particular database using defined credentials</span></span>
* <span data-ttu-id="b78c4-205">DACPAC: Применяет DACPAC tooa определенной базы данных с использованием определенного учетных данных</span><span class="sxs-lookup"><span data-stu-id="b78c4-205">Dacpac: Applies a DACPAC tooa particular database using particular credentials</span></span>

## <a name="end-to-end-job-execution-work-flow"></a><span data-ttu-id="b78c4-206">Полный рабочий процесс выполнения заданий</span><span class="sxs-lookup"><span data-stu-id="b78c4-206">End-to-end job execution work-flow</span></span>
1. <span data-ttu-id="b78c4-207">С помощью портала hello или hello PowerShell API, задание будет вставлен hello **базы данных системы управления**.</span><span class="sxs-lookup"><span data-stu-id="b78c4-207">Using either hello Portal or hello PowerShell API, a job is inserted into hello  **control database**.</span></span> <span data-ttu-id="b78c4-208">Задание Hello запрашивает выполнение скрипта Transact-SQL для группы баз данных с помощью определенных учетных данных.</span><span class="sxs-lookup"><span data-stu-id="b78c4-208">hello job requests execution of a Transact-SQL script against a group of databases using specific credentials.</span></span>
2. <span data-ttu-id="b78c4-209">Hello контроллера определяет новое задание hello.</span><span class="sxs-lookup"><span data-stu-id="b78c4-209">hello controller identifies hello new job.</span></span> <span data-ttu-id="b78c4-210">Задачи задания создаются и выполнить скрипт toosplit hello и toorefresh hello группы баз данных.</span><span class="sxs-lookup"><span data-stu-id="b78c4-210">Job tasks are created and executed toosplit hello script and toorefresh hello group’s databases.</span></span> <span data-ttu-id="b78c4-211">И, наконец новое задание создается и выполняется задание tooexpand hello и создать новый дочерний объект задания, где указанный tooexecute hello сценарий Transact-SQL для отдельной базы данных в группе hello каждого дочернего задания.</span><span class="sxs-lookup"><span data-stu-id="b78c4-211">Lastly, a new job is created and executed tooexpand hello job and create new child jobs where each child job is specified tooexecute hello Transact-SQL script against an individual database in hello group.</span></span>
3. <span data-ttu-id="b78c4-212">Hello контроллера определяет hello созданы дочерние задания.</span><span class="sxs-lookup"><span data-stu-id="b78c4-212">hello controller identifies hello created child jobs.</span></span> <span data-ttu-id="b78c4-213">Для каждого задания контроллера hello создает и запускает задачи задания tooexecute hello сценарий в базе данных.</span><span class="sxs-lookup"><span data-stu-id="b78c4-213">For each job, hello controller creates and triggers a job task tooexecute hello script against a database.</span></span> 
4. <span data-ttu-id="b78c4-214">После завершения всех задач задания, контроллер hello обновляет состояние tooa завершения задания hello.</span><span class="sxs-lookup"><span data-stu-id="b78c4-214">After all job tasks have completed, hello controller updates hello jobs tooa completed state.</span></span> 
   <span data-ttu-id="b78c4-215">В любой момент во время выполнения задания hello PowerShell API может быть используется tooview hello текущее состояние выполнения задания.</span><span class="sxs-lookup"><span data-stu-id="b78c4-215">At any point during job execution, hello PowerShell API can be used tooview hello current state of job execution.</span></span> <span data-ttu-id="b78c4-216">Все значения времени, возвращенных hello API-интерфейсов PowerShell представлены в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="b78c4-216">All times returned by hello PowerShell APIs are represented in UTC.</span></span> <span data-ttu-id="b78c4-217">При желании запрос отмены может быть инициализирован toostop задания.</span><span class="sxs-lookup"><span data-stu-id="b78c4-217">If desired, a cancellation request can be initiated toostop a job.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="b78c4-218">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="b78c4-218">Next steps</span></span>
<span data-ttu-id="b78c4-219">[Установить компоненты hello](sql-database-elastic-jobs-service-installation.md), затем [создайте и добавьте журнал базы данных в группе hello баз данных tooeach](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-219">[Install hello components](sql-database-elastic-jobs-service-installation.md), then [create and add a log in tooeach database in hello group of databases](sql-database-manage-logins.md).</span></span> <span data-ttu-id="b78c4-220">toofurther понимать при создании заданий и управления см. в разделе [Создание и управление заданиями эластичной базы данных](sql-database-elastic-jobs-create-and-manage.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-220">toofurther understand job creation and management, see [creating and managing elastic database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> <span data-ttu-id="b78c4-221">См. также статью [Начало работы с заданиями обработки эластичных баз данных](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="b78c4-221">See also [Getting started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Image references-->
[1]: ./media/sql-database-elastic-jobs-overview/elastic-jobs.png
<!--anchors-->


