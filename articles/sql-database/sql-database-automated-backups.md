---
title: "Автоматическое, географически избыточная архивация базы данных SQL aaaAzure | Документы Microsoft"
description: "База данных SQL автоматически создает локальную резервную копию базы данных каждые пять минут и использует геоизбыточное хранилище Azure с доступом на чтение для обеспечения геоизбыточности."
services: sql-database
documentationcenter: 
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: 3ee3d49d-16fa-47cf-a3ab-7b22aa491a8d
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 07/05/2017
ms.author: carlrab
ms.openlocfilehash: 8aff5356e8142707dd7cd2533a4aa5ea8fec866d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="learn-about-automatic-sql-database-backups"></a>Подробнее об автоматически создаваемых резервных копиях в Базе данных SQL

База данных SQL автоматически создает резервные копии баз данных и использует геоизбыточность tooprovide доступ для чтения географически избыточное хранилище Azure (RA-GRS). Эти резервные копии создаются автоматически и без дополнительной платы. Не нужно toodo любые toomake их произойти. Резервные копии базы данных являются важной частью любой стратегии непрерывности бизнес-процессов и аварийного восстановления, так как они защищают данные от случайного повреждения или удаления. Если требуется tookeep резервные копии в контейнер хранилища можно настроить долгосрочные политики хранения архивов. Дополнительные сведения см. в статье [Storing Azure SQL Database Backups for up to 10 years](sql-database-long-term-retention.md) (Хранение резервных копий баз данных SQL Azure до 10 лет).

## <a name="what-is-a-sql-database-backup"></a>Что такое резервная копия Базы данных SQL?

База данных SQL использует toocreate технологии SQL Server [полного](https://msdn.microsoft.com/library/ms186289.aspx), [разностной](https://msdn.microsoft.com/library/ms175526.aspx), и [журнала транзакций](https://msdn.microsoft.com/library/ms191429.aspx) резервных копий. резервные копии журналов транзакций Hello обычно происходит каждые 5 – 10 минут с частотой hello на основе hello уровень производительности и активности базы данных. Резервные копии журналов транзакций, полные и разностные резервные копии позволяют toorestore базы данных tooa конкретного момента времени toohello того же сервера, на котором размещена база данных hello. При восстановлении базы данных, hello службы определяет, какие full, разностной резервной копии и резервные копии журналов транзакций необходимо восстановить toobe.


Эти резервные копии позволяют выполнить следующие операции:

* Восстановление базы данных tooa в определенный момент в течение срока хранения hello. Эта операция создаст новую базу данных в hello сервере hello исходной базы данных.
* Восстановление удаленной базы данных toohello времена, когда он был удален или в любое время в течение срока хранения hello. Hello удалить базу данных можно восстановить только в hello того же сервера, где была создана hello исходной базы данных.
* Восстановление базы данных tooanother географического региона. Это позволяет вам toorecover из географического аварийного когда не удается получить доступ к серверу и базе данных. Он создает новую базу данных в любой существующий сервер в любом месте Здравствуй, мир. 
* Восстановление базы данных из определенной резервной копии, хранимой в хранилище служб восстановления Azure. Это позволяет вам toorestore старой версии базы данных hello toosatisfy запрос соответствия или toorun старой версии приложения hello. Ознакомьтесь со статьей [Long-term retention](sql-database-long-term-retention.md) (Длительный период удержания).
* tooperform восстановления, в разделе [восстановление базы данных из резервных копий](sql-database-recovery-using-backups.md).

> [!NOTE]
> В хранилище Azure термин hello *репликации* ссылается toocopying файлов из одного расположения tooanother. В SQL *репликации базы данных* ссылается tookeeping toomultiple базы данных-получатели синхронизированы с базы данных-источника. 
> 

## <a name="how-much-backup-storage-is-included-at-no-cost"></a>Сколько места для хранения резервных копий предоставляется бесплатно?
База данных SQL предоставляет % too200 вашей максимального подготовленного хранилища базы данных в качестве резервного хранилища без дополнительных затрат. Например, если вы используете экземпляр базы данных уровня "Стандартный" с подготовленным размером базы данных 250 ГБ, вам будет предоставлено бесплатное хранилище службы архивации объемом 500 ГБ. Превышения hello, предоставляемые хранения резервных копий базы данных можно выбрать период хранения tooreduce hello, обратившись в службу поддержки Azure. Другой вариант — toopay для хранения дополнительных резервных копий, оплачивается по hello стандартной ставкой географически избыточного хранилища (RA-GRS) доступ для чтения. 

## <a name="how-often-do-backups-happen"></a>Как часто создаются резервные копии?
Полные резервные копии базы данных создаются каждую неделю, разностные резервные копии, как правило, создаются каждые несколько часов, а резервные копии журналов транзакций создаются каждые 5–10 минут. Hello первой полной резервной копии запланирована сразу же после создания базы данных. Обычно завершается в течение 30 минут, но может занять больше времени, когда существенного размера hello базы данных. Например hello начальной резервной копии может увеличиться на восстановленной базе данных или копию базы данных. После hello первого полного резервного копирования все последующие резервные копии, запланированных автоматически и управляются и автоматически в фоновом режиме hello. Hello точное время все резервные копии баз данных определяется hello служба базы данных SQL, как в нем сбалансированы hello общей рабочей нагрузки системы. 

географическая репликация хранилища резервных копий Hello происходит на основе расписания репликации hello хранилища Azure.

## <a name="how-long-do-you-keep-my-backups"></a>Как долго хранятся мои резервные копии?
Каждая резервная копия базы данных SQL имеет период хранения на основании hello [уровня службы](sql-database-service-tiers.md) hello базы данных. Hello срок хранения для базы данных в:


* Уровень служб "Базовый" — 7 дней.
* Уровень служб "Стандартный" — 35 дней.
* Уровень служб "Премиум" — 35 дней.

При переходе базы данных из hello Standard или Premium службы уровней tooBasic hello резервных копий на семь дней. Все существующие резервные копии старше семи дней становятся недоступными. 

При обновлении базы данных из tooStandard уровень службы Basic hello или Premium, базы данных SQL сохраняет существующие резервные копии, пока не будут 35 дней. Она хранит новые резервные копии в течение 35 дней.

При удалении базы данных, базы данных SQL хранит резервные копии hello в hello так же, как это происходит для оперативной базы данных. Например, предположим, что была удалена база данных уровня "Базовый", имеющая срок хранения 7 дней. Резервная копия, хранящаяся четыре дня, будет храниться еще три дня.

> [!IMPORTANT]
> При удалении hello Azure SQL server, на котором размещены базы данных SQL, все базы данных, принадлежащие toohello сервера также будут удалены без возможности восстановления. Удаленный сервер восстановить невозможно.
> 

## <a name="how-tooextend-hello-backup-retention-period"></a>Как tooextend hello резервное копирование срок хранения?
Если приложение требует, что резервные копии hello доступны за длительный период времени можно расширить встроенные срок hello, настроив hello долгосрочной политики хранения архивов для отдельных баз данных (политики LTR). Это позволяет срок хранения построен ИТ hello tooextend за годы too10 tooup 35 дней. Дополнительные сведения см. в статье [Storing Azure SQL Database Backups for up to 10 years](sql-database-long-term-retention.md) (Хранение резервных копий баз данных SQL Azure до 10 лет).

После добавления hello базы данных для tooa LTR политики с помощью портала Azure или API hello еженедельные резервные копии базы данных будет автоматически копируются tooyour владельцем хранилища службы архивации Azure. При шифровании базы данных с резервных копий hello прозрачного шифрования данных, автоматически шифруются при хранении.  Hello хранилище служб истекшим сроком действия на основе их отметки времени и hello политики LTR резервные копии будут удаляться.  Чтобы этого не требуется расписание резервного копирования toomanage hello или беспокойтесь о очистку hello hello старые файлы. поддерживает API восстановления Hello в хранилище резервных копий, хранящихся в hello, пока хранилище hello в hello той же подписке, базы данных SQL. Эти резервные копии можно использовать портал Azure hello или PowerShell tooaccess.

> [!TIP]
> Как tooguide разделе [Настройка и восстановление из долгосрочного хранения резервной копии базы данных SQL Azure](sql-database-long-term-backup-retention-configure.md)
>

## <a name="are-backups-encrypted"></a>Резервные копии зашифрованы?

Когда для базы данных Azure SQL включено прозрачное шифрование данных, также шифруются резервные копии. Прозрачное шифрование данных включено по умолчанию для всех новых баз данных SQL Azure. Дополнительные сведения о TDE см. в статье [Прозрачное шифрование данных в Базе данных SQL Azure](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database).

## <a name="next-steps"></a>Дальнейшие действия

- Резервные копии базы данных являются важной частью любой стратегии непрерывности бизнес-процессов и аварийного восстановления, так как они защищают данные от случайного повреждения или удаления. toolearn около hello другим решениям непрерывности бизнеса базы данных SQL Azure см. в разделе [непрерывности бизнес-обзора](sql-database-business-continuity.md).
- toorestore tooa моменту времени, с помощью портала Azure hello. в разделе [восстановление tooa базы данных на момент времени с помощью портала Azure hello](sql-database-recovery-using-backups.md).
- toorestore tooa моменту времени, с помощью PowerShell, в разделе [восстановить tooa базы данных на момент времени с помощью PowerShell](scripts/sql-database-restore-database-powershell.md).
- tooconfigure, управления и восстановите из долгосрочную защиту автоматическое резервное копирование в хранилище служб восстановления Azure, с помощью hello Azure портала, см. в разделе [управление долгосрочного хранения резервных копий использование hello портал Azure](sql-database-long-term-backup-retention-configure.md).
- tooconfigure, управлять и восстановление из долгосрочную защиту автоматическое резервное копирование в хранилище служб восстановления Azure с помощью PowerShell см. в разделе [управление долгосрочного хранения резервной копии с помощью PowerShell](sql-database-long-term-backup-retention-configure.md).
