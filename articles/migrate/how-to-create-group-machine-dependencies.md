---
title: "Группирование компьютеров на основе зависимостей с помощью службы \"Миграция Azure\" | Документация Майкрософт"
description: "В этой статье описывается, как создать оценку на основе зависимостей компьютера с помощью службы \"Миграция Azure\"."
author: rayne-wiselman
ms.service: azure-migrate
ms.topic: article
ms.date: 12/25/2017
ms.author: raynew
ms.openlocfilehash: 720380fd14d9eaf4856ad75269a80f2b63a4725f
ms.sourcegitcommit: 85012dbead7879f1f6c2965daa61302eb78bd366
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/02/2018
---
# <a name="group-machines-using-machine-dependency-mapping"></a>Группирование компьютеров с помощью зависимостей

В этой статье описывается, как создать группу компьютеров для [миграции Azure](migrate-overview.md) оценки по зависимости машин визуализации. Этот метод обычно используется, если вы хотите оценить группы виртуальных машин с более высоким уровнем достоверности, выполнив перекрестную проверку зависимостей компьютеров, прежде чем выполнять оценку. Визуализация зависимостей поможет эффективно спланировать миграцию в Azure. Это помогает убедиться, что ничего не остаются и неожиданные сбои не происходит при миграции в Azure. Вы можете узнать все независимые системы, которые необходимо перенести вместе и идентифицировать работающей системе обслуживает пользователей или является кандидатом для вывода из эксплуатации вместо миграции. 


## <a name="prepare-machines-for-dependency-mapping"></a>Подготовка компьютеров к сопоставлению зависимостей
Чтобы просмотреть зависимости машин, необходимо загрузить и установить агенты на каждом компьютере в локальной среде, которую нужно вычислить. Кроме того, если у вас есть компьютеры без подключения к Интернету, на них необходимо скачать и установить [шлюз OMS](../log-analytics/log-analytics-oms-gateway.md).

### <a name="download-and-install-the-vm-agents"></a>Скачивание и установка агентов виртуальной машины
1. На странице **Обзор** выберите **Управление** > **Компьютеры** и выберите необходимый компьютер.
2. В столбце **Зависимости** щелкните **Установить агенты**. 
3. На странице **Зависимости** скачайте и установите Microsoft Monitoring Agent (MMA) и агент зависимостей на каждую виртуальную машину, которую нужно оценить.
4. Скопируйте идентификатор и ключ рабочей области. Они требуются для установки MMA на локальном компьютере.

### <a name="install-the-mma"></a>Установка MMA

Вот как можно установить агент на компьютере Windows.

1. Дважды щелкните скачанный файл агента.
2. На странице **приветствия** нажмите кнопку **Далее**. На странице **Условия лицензии** нажмите кнопку **Принимаю**, чтобы принять условия лицензии.
3. В поле **Конечная папка** оставьте или измените папку установки по умолчанию. Нажмите кнопку **Далее**. 
4. В разделе **Параметры установки агента** выберите **Azure Log Analytics (OMS)** > **Далее**. 
5. Выберите **Добавить**, чтобы добавить новую рабочую область OMS. Вставьте идентификатор и ключ рабочей области, скопированные на портале. Нажмите кнопку **Далее**.


Вот как можно установить агент на компьютере Linux.

1. Перенесите соответствующий пакет (x86 или x64) на компьютер Linux с помощью scp или sftp.
2. Установите пакет, используя аргумент --install.

    ```sudo sh ./omsagent-<version>.universal.x64.sh --install -w <workspace id> -s <workspace key>```


### <a name="install-the-dependency-agent"></a>Установка агента зависимостей
1. Чтобы установить агент зависимостей на компьютере Windows, дважды щелкните файл установки и следуйте инструкциям мастера.
2. Чтобы установить агент зависимостей на компьютере Linux, сделайте это с правами привилегированного пользователя, используя следующую команду.

    ```sh InstallDependencyAgent-Linux64.bin```

[Узнайте больше](../operations-management-suite/operations-management-suite-service-map-configure.md#supported-operating-systems) об операционных системах, поддерживаемых агентом зависимостей. 

## <a name="create-a-group"></a>Создание группы

1. После установки агентов перейдите на портал и выберите **Управление** > **Компьютеры**.
2. Поиск на компьютере с установленным агентов.
3. **Зависимости** столбца для машины теперь должно отображаться как **просмотреть зависимости**. Щелкните столбец, чтобы просмотреть зависимости машины.
4. На карте зависимостей для машины показаны следующие сведения:
    - Входящие (клиентов) и исходящих соединений (серверы) TCP из компьютера
        - Зависимые компьютеров, на которых не установлен агент MMA и зависимостей группируются по номера портов
        - Dependenct машин, которые имеют MMA и установлен агент зависимостей отображаются как отдельные поля 
    - Процессы, работающие на машине, можно развернуть каждый компьютер используется для просмотра процессов
    - Такие свойства, как полное доменное имя, операционной системы, т. д. адрес MAC каждого компьютера, можно щелкнуть поле каждой машины для просмотра сведений

 ![Просмотр зависимостей машины](./media/how-to-create-group-machine-dependencies/machine-dependencies.png)

4. Можно взглянуть на зависимости для длительности другое время, щелкнув на продолжительность времени в диапазоне метка времени. По умолчанию диапазон равен одному часу. Можно изменить диапазон времени или указать даты начала и окончания и длительность.
5. После определения зависимых машины, которые необходимо сгруппировать, используйте сочетание клавиш Ctrl + щелчок для выбора нескольких машин на карте и нажмите кнопку **компьютеры группы**.
6. Укажите имя группы. Убедитесь, что зависимые машины обнаружены сервером миграции Azure. 

    > [!NOTE]
    > Если зависимые машины не обнаружен по миграции Azure, добавить его в группу нельзя. Добавление таких машин в группу, необходимо снова запустить процесс обнаружения в правой области в vCenter Server и убедитесь, что компьютер имеет получить по миграции Azure.  

7. Если вы хотите создать оценку для этой группы, установите флажок, чтобы создать новый оценки для группы.
8. Нажмите кнопку **ОК**, чтобы сохранить группу.

После создания группы, рекомендуется установить агенты на всех компьютерах группы и уточнить группе, визуализация зависимостей для всей группы.

## <a name="next-steps"></a>Дальнейшие действия

- [Узнайте, как](how-to-create-group-dependencies.md) для уточнения группе с визуализации зависимостей групп
- [Узнайте больше](concepts-assessment-calculation.md) о вычислении оценок.
