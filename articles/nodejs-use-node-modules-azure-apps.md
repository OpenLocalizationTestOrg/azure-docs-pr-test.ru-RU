---
title: "aaaWorking с использованием модулей Node.js"
description: "Узнайте, как toowork с использованием модулей Node.js при использовании службы приложений Azure или облачных служб."
services: 
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: c0e6cd3d-932d-433e-b72d-e513e23b4eb6
ms.service: multiple
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2016
ms.author: tarcher
ms.openlocfilehash: 926358b7eb80a659dbc1015686b06a30d8c9b8f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="using-nodejs-modules-with-azure-applications"></a>Использование модулей Node.js с приложениями Azure
Этот документ содержит указания по использованию модулей Node.js с приложениями, размещенными в Azure. В нем описывается, как обеспечить использование конкретной версии модуля приложением и как использовать собственные модули вместе с Azure.

Если вы уже знакомы с использованием модулей Node.js **package.json** и **npm shrinkwrap.json** файлы, hello следующую информацию содержит краткую сводку что описанные в этой статье:

* Служба приложений Azure может считывать файлы **package.json** и **npm-shrinkwrap.json** и устанавливать модули на основании записей в этих файлах.

* Облачные службы Azure ожидается, что все toobe модули, установленные в среде разработки hello и hello **узел\_модули** toobe каталога, включенного в пакет развертывания hello. Это возможно tooenable поддержка установки модулей с помощью **package.json** или **npm shrinkwrap.json** файлов на облачные службы; Однако эта конфигурация требует настройки по умолчанию hello скрипты, используемые в проектах облачных служб. Пример того, как tooconfigure этой среды. в разделе [npm toorun задачи запуска Azure установите tooavoid развертывание модулей узла](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)

> [!NOTE]
> Виртуальные машины Azure не рассматривается в этой статье, как hello опыт развертывания на виртуальной машине, зависит от операционной системе hello, размещаемую hello виртуальной машины.
> 
> 

## <a name="nodejs-modules"></a>Модули Node.js
Модули — это загружаемые пакеты JavaScript, предоставляющие вашему приложению определенные функциональные возможности. Обычно модули устанавливаются с помощью hello **npm** командной строки средства, однако некоторые модули (например, HTTP-модуль hello) предоставляются как часть пакета Node.js core hello.

Если установлены модули, они хранятся в hello **узел\_модули** каталог в корне hello структуры каталога приложения. Каждый модуль в пределах hello **узел\_модули** directory поддерживает собственный **узел\_модули** каталог, содержащий модули, которые он зависит, а это поведение повторяет для каждого модуля все способом hello цепочке зависимостей hello. Эта среда позволяет каждый модуль установлен toohave свои собственные требования к версии для модулей hello, он зависит, однако это может привести к очень больших структуру каталогов.

Развертывание hello **узел\_модули** каталога, как часть вашего приложения увеличивает размер hello hello развертывания при сравнении toousing **package.json** или  **npm shrinkwrap.json** файл; Однако он гарантирует, что версии hello hello модули, используемые в рабочей среде hello таким же как hello модули, используемые при разработке.

### <a name="native-modules"></a>Собственные модули
Хотя большинство модулей представляют собой просто текстовые файлы JavaScript, некоторые модули являются двоичными образами, предназначенными для конкретной платформы. Такие модули обычно компилируются во время установки, обычно для этого используется Python и node-gyp. Так как облачные службы Azure используют hello **узел\_модули** папки развертывания как часть приложения hello, любой собственный модуль, включается как часть hello установлены модули должны работать в облачной службе, при условии, что она была установлен и компилируется в системе разработки Windows.

Служба приложений Azure не поддерживает все собственные модули и может сообщать об ошибках при компиляции модулей со специфическими предварительными требованиями. Хотя у некоторых популярных модулей, например MongoDB, имеются дополнительные собственные зависимости, и они прекрасно работают без них, было найдено два обходных решения, подходящих почти для всех собственных модулей, доступных в настоящее время:

* Запустите **установки npm** на компьютере Windows, где установлены необходимые компоненты для всех hello собственного модуля. Затем разверните hello создан **узел\_модули** папки как часть приложения hello tooAzure службы приложений.

  * Перед компиляцией, убедитесь, что локальной установки Node.js имеет соответствующий архитектуру и версии hello совпадали возможных toohello использован в Azure (hello текущие значения может быть проверено на выполнения из свойств **process.arch**и **process.version**).

* Служба приложений Azure может быть пользовательских bash настроенных tooexecute или сценариев оболочки во время развертывания, предоставляя hello возможности tooexecute пользовательские команды и точно настроить hello способом **установки npm** запущена. Для видео отображение как tooconfigure этой среды. в разделе [пользовательские скрипты развертывания веб-сайта с Kudu].

### <a name="using-a-packagejson-file"></a>Использование файла package.json
Hello **package.json** файл является способом toospecify hello верхнего уровня зависимостей приложение требует, чтобы hello размещения платформы можно установить зависимости hello не требует от tooinclude hello **узла \_пакетов** папки в процессе развертывания hello. После развертывания приложения hello hello **установки npm** команды — hello используется tooparse **package.json** файл и установить все перечисленные зависимости hello.

Во время разработки, можно использовать hello **--Сохранить**, **--save-dev**, или **— необязательное сохранение** параметры при установке tooadd модули записи для модуля hello tooyour **package.json** файл автоматически. Дополнительные сведения см. в разделе с описанием [npm-install](https://docs.npmjs.com/cli/install).

Потенциальные неполадки hello **package.json** файл является то, что он только указывает версию hello для верхнего уровня зависимостей. Каждый модуль может или не может указывать версию hello hello модулей, от которых он зависит, и поэтому может оказаться, что может оказаться с разных зависимость, чем hello, один для использования в разработке.

> [!NOTE]
> Если при развертывании службы приложений tooAzure вашей <b>package.json</b> файл ссылается на модуль в машинном коде может появиться ошибка примерно toohello следующий пример, при публикации приложения hello, с помощью Git:
> 
> npm ERR! module-name@0.6.0 install: 'node-gyp configure build'
> 
> npm ERR! 'cmd "/c" "node-gyp configure build"' failed with 1
> 
> 

### <a name="using-a-npm-shrinkwrapjson-file"></a>Использование файла npm-shrinkwrap.json
Hello **npm shrinkwrap.json** файл — попытка tooaddress hello модуля управления версиями ограничения hello **package.json** файла. При hello **package.json** файл включает только версии для hello модули верхнего уровня, hello **npm shrinkwrap.json** файл содержит требования к версии hello для hello цепочку зависимостей полный модуля.

Когда приложение будет готово для рабочей среды, можно заблокировать требования к версии и создать **npm shrinkwrap.json** файла с помощью hello **npm shrinkwrap** команды. Эта команда будет использовать версии hello, установленные в hello **узел\_модули** папки и запишите эти версии toohello **npm shrinkwrap.json** файла. После приложения hello развернутой toohello среду размещения, hello **установки npm** команды — hello используется tooparse **npm shrinkwrap.json** файл и установить все перечисленные зависимости hello. Дополнительные сведения см. в статье о [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).

> [!NOTE]
> Если при развертывании службы приложений tooAzure вашей <b>npm shrinkwrap.json</b> файл ссылается на модуль в машинном коде может появиться ошибка примерно toohello следующий пример, при публикации приложения hello, с помощью Git:
> 
> npm ERR! module-name@0.6.0 install: 'node-gyp configure build'
> 
> npm ERR! 'cmd "/c" "node-gyp configure build"' failed with 1
> 
> 

## <a name="next-steps"></a>Дальнейшие действия
Теперь, когда вы знаете как toouse модулей Node.js в Azure, узнайте, как слишком[укажите версию Node.js hello], [построения и развертывания веб-приложения Node.js](app-service-web/app-service-web-get-started-nodejs.md), и [как toouse hello Azure командной строки Интерфейс для Mac и Linux].

Дополнительные сведения см. в разделе hello [Центр разработчика Node.js](/nodejs/azure/).

[укажите версию Node.js hello]: nodejs-specify-node-version-azure-apps.md
[как toouse hello Azure командной строки Интерфейс для Mac и Linux]:cli-install-nodejs.md
[пользовательские скрипты развертывания веб-сайта с Kudu]: https://channel9.msdn.com/Shows/Azure-Friday/Custom-Web-Site-Deployment-Scripts-with-Kudu-with-David-Ebbo
