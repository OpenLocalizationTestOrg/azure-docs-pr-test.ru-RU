---
title: "Предварительно настроенные решения IoT Azure | Документация Майкрософт"
description: "Описание предварительно настроенных решений IoT Azure и их архитектуры со ссылками на дополнительные ресурсы."
services: 
suite: iot-suite
documentationcenter: 
author: dominicbetts
manager: timlt
editor: 
ms.assetid: 59009f37-9ba0-4e17-a189-7ea354a858a2
ms.service: iot-suite
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/25/2017
ms.author: dobett
ms.openlocfilehash: d66dece63d2ba944c8f3828ba68c6202485d47e0
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="what-are-the-azure-iot-suite-preconfigured-solutions"></a><span data-ttu-id="d249e-103">Что такое предварительно настроенные решения Azure IoT Suite?</span><span class="sxs-lookup"><span data-stu-id="d249e-103">What are the Azure IoT Suite preconfigured solutions?</span></span>

<span data-ttu-id="d249e-104">Предварительно настроенные решения Azure IoT Suite — это реализация стандартных шаблонов IoT, которые вы можете развернуть в Azure с помощью своей подписки.</span><span class="sxs-lookup"><span data-stu-id="d249e-104">The Azure IoT Suite preconfigured solutions are implementations of common IoT solution patterns that you can deploy to Azure using your subscription.</span></span> <span data-ttu-id="d249e-105">Предварительно настроенные решения можно использовать:</span><span class="sxs-lookup"><span data-stu-id="d249e-105">You can use the preconfigured solutions:</span></span>

* <span data-ttu-id="d249e-106">в качестве отправной точки для собственных решений IoT;</span><span class="sxs-lookup"><span data-stu-id="d249e-106">As a starting point for your own IoT solutions.</span></span>
* <span data-ttu-id="d249e-107">для ознакомления с распространенными шаблонами, которые используются при проектировании и разработке решений IoT.</span><span class="sxs-lookup"><span data-stu-id="d249e-107">To learn about common patterns in IoT solution design and development.</span></span>

<span data-ttu-id="d249e-108">Каждое предварительно настроенное решение — это полная комплексная реализация, в которой для создания данных телеметрии используются виртуальные устройства.</span><span class="sxs-lookup"><span data-stu-id="d249e-108">Each preconfigured solution is a complete, end-to-end implementation that uses simulated devices to generate telemetry.</span></span>

<span data-ttu-id="d249e-109">Вы можете скачать полный исходный код для настройки и расширения решения в соответствии со своими требованиями, связанными с Интернетом вещей.</span><span class="sxs-lookup"><span data-stu-id="d249e-109">You can download the complete source code to customize and extend the solution to meet your specific IoT requirements.</span></span>

> [!NOTE]
> <span data-ttu-id="d249e-110">Чтобы развернуть одно из предварительно настроенных решений, посетите страницу [Microsoft Azure IoT Suite][lnk-azureiotsuite].</span><span class="sxs-lookup"><span data-stu-id="d249e-110">To deploy one of the preconfigured solutions, visit [Microsoft Azure IoT Suite][lnk-azureiotsuite].</span></span> <span data-ttu-id="d249e-111">В [руководстве по началу работы с предварительно настроенными решениями Интернета вещей][lnk-getstarted-preconfigured] подробно описывается, как развернуть и запустить одно из таких решений.</span><span class="sxs-lookup"><span data-stu-id="d249e-111">The article [Get started with the IoT preconfigured solutions][lnk-getstarted-preconfigured] provides more information about how to deploy and run one of the solutions.</span></span>

<span data-ttu-id="d249e-112">В следующей таблице показано соответствие этих решений конкретным функциям IoT.</span><span class="sxs-lookup"><span data-stu-id="d249e-112">The following table shows how the solutions map to specific IoT features:</span></span>

| <span data-ttu-id="d249e-113">Решение</span><span class="sxs-lookup"><span data-stu-id="d249e-113">Solution</span></span> | <span data-ttu-id="d249e-114">Прием данных</span><span class="sxs-lookup"><span data-stu-id="d249e-114">Data ingestion</span></span> | <span data-ttu-id="d249e-115">Удостоверение устройства</span><span class="sxs-lookup"><span data-stu-id="d249e-115">Device identity</span></span> | <span data-ttu-id="d249e-116">Управление устройствами</span><span class="sxs-lookup"><span data-stu-id="d249e-116">Device management</span></span> | <span data-ttu-id="d249e-117">Команды и управление</span><span class="sxs-lookup"><span data-stu-id="d249e-117">Command and control</span></span> | <span data-ttu-id="d249e-118">Правила и действия</span><span class="sxs-lookup"><span data-stu-id="d249e-118">Rules and actions</span></span> | <span data-ttu-id="d249e-119">Прогнозная аналитика</span><span class="sxs-lookup"><span data-stu-id="d249e-119">Predictive analytics</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d249e-120">[Удаленный мониторинг][lnk-getstarted-preconfigured]</span><span class="sxs-lookup"><span data-stu-id="d249e-120">[Remote monitoring][lnk-getstarted-preconfigured]</span></span> |<span data-ttu-id="d249e-121">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-121">Yes</span></span> |<span data-ttu-id="d249e-122">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-122">Yes</span></span> |<span data-ttu-id="d249e-123">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-123">Yes</span></span> |<span data-ttu-id="d249e-124">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-124">Yes</span></span> |<span data-ttu-id="d249e-125">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-125">Yes</span></span> |- |
| <span data-ttu-id="d249e-126">[Диагностическое обслуживание][lnk-predictive-maintenance]</span><span class="sxs-lookup"><span data-stu-id="d249e-126">[Predictive maintenance][lnk-predictive-maintenance]</span></span> |<span data-ttu-id="d249e-127">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-127">Yes</span></span> |<span data-ttu-id="d249e-128">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-128">Yes</span></span> |- |<span data-ttu-id="d249e-129">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-129">Yes</span></span> |<span data-ttu-id="d249e-130">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-130">Yes</span></span> |<span data-ttu-id="d249e-131">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-131">Yes</span></span> |
| <span data-ttu-id="d249e-132">[Подключенная фабрика][lnk-getstarted-factory]</span><span class="sxs-lookup"><span data-stu-id="d249e-132">[Connected factory][lnk-getstarted-factory]</span></span> |<span data-ttu-id="d249e-133">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-133">Yes</span></span> |<span data-ttu-id="d249e-134">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-134">Yes</span></span> |<span data-ttu-id="d249e-135">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-135">Yes</span></span> |<span data-ttu-id="d249e-136">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-136">Yes</span></span> |<span data-ttu-id="d249e-137">Да</span><span class="sxs-lookup"><span data-stu-id="d249e-137">Yes</span></span> |- |

* <span data-ttu-id="d249e-138">*Прием данных*: прием данных в облако в нужном масштабе.</span><span class="sxs-lookup"><span data-stu-id="d249e-138">*Data ingestion*: Ingress of data at scale to the cloud.</span></span>
* <span data-ttu-id="d249e-139">*Удостоверения устройств*: управление уникальными удостоверениями устройств и контроль доступа устройств к решению.</span><span class="sxs-lookup"><span data-stu-id="d249e-139">*Device identity*: Manage unique device identities and control device access to the solution.</span></span>
* <span data-ttu-id="d249e-140">*Управление устройствами*: управление метаданными устройств и выполнение операций, таких как перезагрузка устройства и обновление встроенного ПО.</span><span class="sxs-lookup"><span data-stu-id="d249e-140">*Device management*: Manage device metadata and perform operations such as device reboots and firmware upgrades.</span></span>
* <span data-ttu-id="d249e-141">*Команды и управление*: отправка сообщений на устройство из облака для выполнения на устройстве определенных действий.</span><span class="sxs-lookup"><span data-stu-id="d249e-141">*Command and control*: To cause the device to take an action, send messages to a device from the cloud.</span></span>
* <span data-ttu-id="d249e-142">*Правила и действия*: правила используются в серверной части решения для операций с определенными данными, отправляемыми с устройства в облако.</span><span class="sxs-lookup"><span data-stu-id="d249e-142">*Rules and actions*: To act on specific device-to-cloud data, the solution back end uses rules.</span></span>
* <span data-ttu-id="d249e-143">*Прогнозная аналитика*: данные, отправляемые с устройства в облако, анализируются в серверной части решения, что позволяет предсказать время выполнения определенных действий.</span><span class="sxs-lookup"><span data-stu-id="d249e-143">*Predictive analytics*: The solution back end analyzes device-to-cloud data to predict when specific actions should take place.</span></span> <span data-ttu-id="d249e-144">Пример — анализ данных телеметрии, поступающих от двигателя самолета, который позволяет определить время обслуживания двигателя.</span><span class="sxs-lookup"><span data-stu-id="d249e-144">For example, analyzing aircraft engine telemetry to determine when engine maintenance is due.</span></span>

## <a name="remote-monitoring-preconfigured-solution-overview"></a><span data-ttu-id="d249e-145">Обзор предварительно настроенного решения для удаленного мониторинга</span><span class="sxs-lookup"><span data-stu-id="d249e-145">Remote Monitoring preconfigured solution overview</span></span>

<span data-ttu-id="d249e-146">В этой статье мы решили обсудить предварительно настроенное решение для удаленного мониторинга, чтобы проиллюстрировать основные элементы проектирования, используемые другими решениями.</span><span class="sxs-lookup"><span data-stu-id="d249e-146">We have chosen to discuss the remote monitoring preconfigured solution in this article because it illustrates many common design elements that the other solutions share.</span></span>

<span data-ttu-id="d249e-147">На следующей схеме представлены основные элементы решения для удаленного мониторинга.</span><span class="sxs-lookup"><span data-stu-id="d249e-147">The following diagram illustrates the key elements of the remote monitoring solution.</span></span> <span data-ttu-id="d249e-148">Дополнительные сведения об этих элементах приведены в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="d249e-148">The following sections provide more information about these elements.</span></span>

![Архитектура предварительно настроенного решения удаленного мониторинга][img-remote-monitoring-arch]

## <a name="devices"></a><span data-ttu-id="d249e-150">Устройства</span><span class="sxs-lookup"><span data-stu-id="d249e-150">Devices</span></span>

<span data-ttu-id="d249e-151">Когда вы развертываете предварительно настроенные решения удаленного мониторинга, для такого решения заранее подготавливаются четыре виртуальных устройства, которые имитируют устройство охлаждения.</span><span class="sxs-lookup"><span data-stu-id="d249e-151">When you deploy the remote monitoring preconfigured solution, four simulated devices are pre-provisioned in the solution that simulate a cooling device.</span></span> <span data-ttu-id="d249e-152">Эти виртуальные устройства имеют встроенную модель, которая передает сведения о температуре и влажности в виде данных телеметрии.</span><span class="sxs-lookup"><span data-stu-id="d249e-152">These simulated devices have a built-in temperature and humidity model that emits telemetry.</span></span> <span data-ttu-id="d249e-153">Эти имитации устройств включены для выполнения следующих задач:</span><span class="sxs-lookup"><span data-stu-id="d249e-153">These simulated devices are included to:</span></span>

- <span data-ttu-id="d249e-154">демонстрация сквозного потока данных через решение;</span><span class="sxs-lookup"><span data-stu-id="d249e-154">Illustrate the end-to-end flow of data through the solution.</span></span>
- <span data-ttu-id="d249e-155">предоставление удобного источника данных телеметрии;</span><span class="sxs-lookup"><span data-stu-id="d249e-155">Provide a convenient source of telemetry.</span></span>
- <span data-ttu-id="d249e-156">предоставление целевого объекта для методов или команд, если вы являетесь разработчиком серверной части и используете решение в качестве отправной точки при создании собственной реализации.</span><span class="sxs-lookup"><span data-stu-id="d249e-156">Provide a target for methods or commands if you are a back-end developer using the solution as a starting point for a custom implementation.</span></span>

<span data-ttu-id="d249e-157">Имитации устройств в решении могут отвечать на следующие взаимодействия между облаком и устройствами:</span><span class="sxs-lookup"><span data-stu-id="d249e-157">The simulated devices in the solution can respond to the following cloud-to-device communications:</span></span>

- <span data-ttu-id="d249e-158">*Методы ([прямые методы][lnk-direct-methods])*: метод двунаправленного взаимодействия, при котором подключенное устройство должно отвечать немедленно.</span><span class="sxs-lookup"><span data-stu-id="d249e-158">*Methods ([direct methods][lnk-direct-methods])*: A two-way communication method where a connected device is expected to respond immediately.</span></span>
- <span data-ttu-id="d249e-159">*Команды (сообщения, оправляемые из облака на устройство)*: метод односторонней связи, при котором устройство получает команду из долгосрочной очереди.</span><span class="sxs-lookup"><span data-stu-id="d249e-159">*Commands (cloud-to-device messages)*: A one-way communication method where a device retrieves the command from a durable queue.</span></span>

<span data-ttu-id="d249e-160">Чтобы сравнить эти различные подходы, см. статью [Руководство по обмену данными между облаком и устройством][lnk-c2d-guidance].</span><span class="sxs-lookup"><span data-stu-id="d249e-160">For a comparison of these different approaches, see [Cloud-to-device communications guidance][lnk-c2d-guidance].</span></span>

<span data-ttu-id="d249e-161">Когда устройство впервые подключается к Центру Интернета вещей в рамках предварительно настроенного решения, оно отправляет в центр сообщение со сведениями об устройстве.</span><span class="sxs-lookup"><span data-stu-id="d249e-161">When a device first connects to IoT Hub in the preconfigured solution, it sends a device information message to the hub.</span></span> <span data-ttu-id="d249e-162">В этом сообщении содержится список методов, на которые устройство может отвечать.</span><span class="sxs-lookup"><span data-stu-id="d249e-162">This message enumerates the methods the device can respond to.</span></span> <span data-ttu-id="d249e-163">В предварительно настроенном решении для удаленного мониторинга имитации устройств поддерживают следующие методы:</span><span class="sxs-lookup"><span data-stu-id="d249e-163">In the remote monitoring preconfigured solution, simulated devices support these methods:</span></span>

* <span data-ttu-id="d249e-164">*Initiate Firmware Update* (Инициировать обновление встроенного ПО): этот метод инициирует на устройстве асинхронную задачу, чтобы выполнить обновление встроенного ПО.</span><span class="sxs-lookup"><span data-stu-id="d249e-164">*Initiate Firmware Update*: this method initiates an asynchronous task on the device to perform a firmware update.</span></span> <span data-ttu-id="d249e-165">Асинхронная задача использует сообщаемые свойства для доставки сведений об обновлении состояния на панель мониторинга решения.</span><span class="sxs-lookup"><span data-stu-id="d249e-165">The asynchronous task uses reported properties to deliver status updates to the solution dashboard.</span></span>
* <span data-ttu-id="d249e-166">*Reboot* (Перезагрузка): этот метод приводит к перезагрузке имитации устройства.</span><span class="sxs-lookup"><span data-stu-id="d249e-166">*Reboot*: this method causes the simulated device to reboot.</span></span>
* <span data-ttu-id="d249e-167">*FactoryReset* (Сброс до заводских настроек): этот метод вызывает сброс настроек имитации устройства к параметрам по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="d249e-167">*FactoryReset*: this method triggers a factory reset on the simulated device.</span></span>

<span data-ttu-id="d249e-168">Когда устройство впервые подключается к Центру Интернета вещей в рамках предварительно настроенного решения, оно отправляет в центр сообщение со сведениями об устройстве.</span><span class="sxs-lookup"><span data-stu-id="d249e-168">When a device first connects to IoT Hub in the preconfigured solution, it sends a device information message to the hub.</span></span> <span data-ttu-id="d249e-169">В этом сообщении содержится список команд, на которые устройство может отвечать.</span><span class="sxs-lookup"><span data-stu-id="d249e-169">This message enumerates the commands the device can respond to.</span></span> <span data-ttu-id="d249e-170">В предварительно настроенном решении для удаленного мониторинга имитации устройств поддерживают следующие команды:</span><span class="sxs-lookup"><span data-stu-id="d249e-170">In the remote monitoring preconfigured solution, simulated devices support these commands:</span></span>

* <span data-ttu-id="d249e-171">*Проверка связи с устройством*— устройство отвечает на эту команду подтверждением.</span><span class="sxs-lookup"><span data-stu-id="d249e-171">*Ping Device*: The device responds to this command with an acknowledgement.</span></span> <span data-ttu-id="d249e-172">С ее помощью вы можете убедиться, что устройство по-прежнему активно и находится в состоянии ожидания передачи данных.</span><span class="sxs-lookup"><span data-stu-id="d249e-172">This command is useful for checking that the device is still active and listening.</span></span>
* <span data-ttu-id="d249e-173">*Начать сбор данных телеметрии*— сообщает устройству о начале отправки данных телеметрии.</span><span class="sxs-lookup"><span data-stu-id="d249e-173">*Start Telemetry*: Instructs the device to start sending telemetry.</span></span>
* <span data-ttu-id="d249e-174">*Завершить сбор данных телеметрии*— сообщает устройству о завершении отправки данных телеметрии.</span><span class="sxs-lookup"><span data-stu-id="d249e-174">*Stop Telemetry*: Instructs the device to stop sending telemetry.</span></span>
* <span data-ttu-id="d249e-175">*Изменить заданную температуру*— контролирует имитированные данные телеметрии (значения температуры), отправляемые устройством.</span><span class="sxs-lookup"><span data-stu-id="d249e-175">*Change Set Point Temperature*: Controls the simulated temperature telemetry values the device sends.</span></span> <span data-ttu-id="d249e-176">Эта команда используется при тестировании логики серверной части.</span><span class="sxs-lookup"><span data-stu-id="d249e-176">This command is useful for testing back-end logic.</span></span>
* <span data-ttu-id="d249e-177">*Диагностические данные телеметрии*— определяет, должно ли устройство отправить сведения о наружной температуре в качестве данных телеметрии.</span><span class="sxs-lookup"><span data-stu-id="d249e-177">*Diagnostic Telemetry*: Controls if the device should send the external temperature as telemetry.</span></span>
* <span data-ttu-id="d249e-178">*Изменить состояние устройства* — задает свойство метаданных состояния устройства, о которых сообщает устройство.</span><span class="sxs-lookup"><span data-stu-id="d249e-178">*Change Device State*: Sets the device state metadata property that the device reports.</span></span> <span data-ttu-id="d249e-179">Эта команда используется при тестировании логики серверной части.</span><span class="sxs-lookup"><span data-stu-id="d249e-179">This command is useful for testing back-end logic.</span></span>

<span data-ttu-id="d249e-180">В решение можно добавить дополнительные имитации устройств, которые будут передавать аналогичные данные телеметрии и реагировать на одни и те же методы и команды.</span><span class="sxs-lookup"><span data-stu-id="d249e-180">You can add more simulated devices to the solution that emit the same telemetry and respond to the same methods and commands.</span></span>

<span data-ttu-id="d249e-181">Помимо реагирования на команды и методы решение также использует [двойники устройств][lnk-device-twin].</span><span class="sxs-lookup"><span data-stu-id="d249e-181">In addition to responding to commands and methods, the solution uses [device twins][lnk-device-twin].</span></span> <span data-ttu-id="d249e-182">Устройства используют двойники устройств для передачи значений свойств в серверную часть решения.</span><span class="sxs-lookup"><span data-stu-id="d249e-182">Devices use device twins to report property values to the solution back end.</span></span> <span data-ttu-id="d249e-183">Панель мониторинга решения использует двойники устройств, чтобы задать на устройствах новые значения свойств.</span><span class="sxs-lookup"><span data-stu-id="d249e-183">The solution dashboard uses device twins to set to new desired property values on devices.</span></span> <span data-ttu-id="d249e-184">Например, в процессе обновления встроенного ПО имитация устройства сообщает состояние обновления с помощью сообщаемых свойств.</span><span class="sxs-lookup"><span data-stu-id="d249e-184">For example, during the firmware update process the simulated device reports the status of the update using reported properties.</span></span>

## <a name="iot-hub"></a><span data-ttu-id="d249e-185">Центр Интернета вещей</span><span class="sxs-lookup"><span data-stu-id="d249e-185">IoT Hub</span></span>

<span data-ttu-id="d249e-186">В этом предварительно настроенном решении экземпляр Центра Интернета вещей соответствует *облачному шлюзу* в стандартной [архитектуре решения Интернета вещей][lnk-what-is-azure-iot].</span><span class="sxs-lookup"><span data-stu-id="d249e-186">In this preconfigured solution, the IoT Hub instance corresponds to the *Cloud Gateway* in a typical [IoT solution architecture][lnk-what-is-azure-iot].</span></span>

<span data-ttu-id="d249e-187">Центр Интернета вещей получает данные телеметрии с устройства через одну конечную точку.</span><span class="sxs-lookup"><span data-stu-id="d249e-187">An IoT hub receives telemetry from the devices at a single endpoint.</span></span> <span data-ttu-id="d249e-188">Центр Интернета вещей также поддерживает отдельные конечные точки устройства, через которые каждое устройство может получать отправляемые ему команды.</span><span class="sxs-lookup"><span data-stu-id="d249e-188">An IoT hub also maintains device-specific endpoints where each device can retrieve the commands that are sent to it.</span></span>

<span data-ttu-id="d249e-189">Центр Интернета вещей предоставляет доступ к полученным данным телеметрии через конечную точку для чтения таких данных на стороне службы.</span><span class="sxs-lookup"><span data-stu-id="d249e-189">The IoT hub makes the received telemetry available through the service-side telemetry read endpoint.</span></span>

<span data-ttu-id="d249e-190">Функция управления устройствами в Центре Интернета вещей дает возможность управлять свойствами устройств на портале решения и планировать задания, которые выполняют следующие операции:</span><span class="sxs-lookup"><span data-stu-id="d249e-190">The device management capability of IoT Hub enables you to manage your device properties from the solution portal and schedule jobs that perform operations such as:</span></span>

- <span data-ttu-id="d249e-191">перезагрузка устройств;</span><span class="sxs-lookup"><span data-stu-id="d249e-191">Rebooting devices</span></span>
- <span data-ttu-id="d249e-192">изменение состояний устройств;</span><span class="sxs-lookup"><span data-stu-id="d249e-192">Changing device states</span></span>
- <span data-ttu-id="d249e-193">обновление встроенного ПО.</span><span class="sxs-lookup"><span data-stu-id="d249e-193">Firmware updates</span></span>

## <a name="azure-stream-analytics"></a><span data-ttu-id="d249e-194">Azure Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="d249e-194">Azure Stream Analytics</span></span>

<span data-ttu-id="d249e-195">В предварительно настроенном решении используются три задания службы [Azure Stream Analytics][lnk-asa] (ASA), которые фильтруют поток поступающих с устройств телеметрических данных:</span><span class="sxs-lookup"><span data-stu-id="d249e-195">The preconfigured solution uses three [Azure Stream Analytics][lnk-asa] (ASA) jobs to filter the telemetry stream from the devices:</span></span>

* <span data-ttu-id="d249e-196">*Задание отправки сведений об устройстве*. Выводит данные в концентратор событий, который перенаправляет сообщения, связанные с регистрацией устройства, в реестр устройств решения —</span><span class="sxs-lookup"><span data-stu-id="d249e-196">*DeviceInfo job* - outputs data to an Event hub that routes device registration-specific messages to the solution device registry.</span></span> <span data-ttu-id="d249e-197">базу данных Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="d249e-197">This device registry is an Azure Cosmos DB database.</span></span> <span data-ttu-id="d249e-198">Это сообщение отправляется при первом подключении устройства или в ответ на команду **Изменить состояние устройства**.</span><span class="sxs-lookup"><span data-stu-id="d249e-198">These messages are sent when a device first connects or in response to a **Change device state** command.</span></span>
* <span data-ttu-id="d249e-199">*Задание отправки данных телеметрии.* Отправляет все необработанные данные телеметрии в хранилище BLOB-объектов Azure, где они автономно хранятся в неструктурированном виде, а также вычисляет значения сводных данных телеметрии, отображаемых на панели мониторинга решения.</span><span class="sxs-lookup"><span data-stu-id="d249e-199">*Telemetry job* - sends all raw telemetry to Azure blob storage for cold storage and calculates telemetry aggregations that display in the solution dashboard.</span></span>
* <span data-ttu-id="d249e-200">*Задание выполнения правил.* Отфильтровывает поток данных телеметрии, отсеивая значения, превышающие пороговые значения настроенных правил, а также выводит данные в концентратор событий.</span><span class="sxs-lookup"><span data-stu-id="d249e-200">*Rules job* - filters the telemetry stream for values that exceed any rule thresholds and outputs the data to an Event hub.</span></span> <span data-ttu-id="d249e-201">Когда правило выполняется, в представлении панели мониторинга на портале решения это событие отображается в виде новой строки в таблице журнала оповещений.</span><span class="sxs-lookup"><span data-stu-id="d249e-201">When a rule fires, the solution portal dashboard view displays this event as a new row in the alarm history table.</span></span> <span data-ttu-id="d249e-202">Эти правила могут также запускать действие на основе параметров, определенных в представлениях **Правила** и **Действия** на портале решения.</span><span class="sxs-lookup"><span data-stu-id="d249e-202">These rules can also trigger an action based on the settings defined on the **Rules** and **Actions** views in the solution portal.</span></span>

<span data-ttu-id="d249e-203">В этом предварительно настроенном решении задания ASA представляют собой часть **серверной части решения Интернета вещей** в стандартной [архитектуре решения Интернета вещей][lnk-what-is-azure-iot].</span><span class="sxs-lookup"><span data-stu-id="d249e-203">In this preconfigured solution, the ASA jobs form part of to the **IoT solution back end** in a typical [IoT solution architecture][lnk-what-is-azure-iot].</span></span>

## <a name="event-processor"></a><span data-ttu-id="d249e-204">Обработчик событий</span><span class="sxs-lookup"><span data-stu-id="d249e-204">Event processor</span></span>

<span data-ttu-id="d249e-205">В этом предварительно настроенном решении обработчик событий представляет собой часть **серверной части решения Интернета вещей** в стандартной [архитектуре решения Интернета вещей][lnk-what-is-azure-iot].</span><span class="sxs-lookup"><span data-stu-id="d249e-205">In this preconfigured solution, the event processor forms part of the **IoT solution back end** in a typical [IoT solution architecture][lnk-what-is-azure-iot].</span></span>

<span data-ttu-id="d249e-206">**Задание отправки сведений об устройстве** и **задание выполнения правил** отправляют свои выходные данные в концентраторы событий, чтобы эти данные перенаправлялись в другие службы серверной части.</span><span class="sxs-lookup"><span data-stu-id="d249e-206">The **DeviceInfo** and **Rules** ASA jobs send their output to Event hubs for delivery to other back-end services.</span></span> <span data-ttu-id="d249e-207">Для чтения сообщений из этих концентраторов событий в решении используется экземпляр [EventProcessorHost][lnk-event-processor], который выполняется в рамках [веб-задания][lnk-web-job].</span><span class="sxs-lookup"><span data-stu-id="d249e-207">The solution uses an [EventProcessorHost][lnk-event-processor] instance, running in a [WebJob][lnk-web-job], to read the messages from these Event hubs.</span></span> <span data-ttu-id="d249e-208">**EventProcessorHost** использует:</span><span class="sxs-lookup"><span data-stu-id="d249e-208">The **EventProcessorHost** uses:</span></span>
- <span data-ttu-id="d249e-209">данные **задания отправки сведений об устройстве**, чтобы обновить данные устройства в базе данных Cosmos DB;</span><span class="sxs-lookup"><span data-stu-id="d249e-209">The **DeviceInfo** data to update the device data in the Cosmos DB database.</span></span>
- <span data-ttu-id="d249e-210">данные **задания выполнения правил**, чтобы вызвать приложение логики и обновить предупреждения, отображаемые на портале решения.</span><span class="sxs-lookup"><span data-stu-id="d249e-210">The **Rules** data to invoke the Logic app and update the alerts display in the solution portal.</span></span>

## <a name="device-identity-registry-device-twin-and-cosmos-db"></a><span data-ttu-id="d249e-211">Реестр удостоверений устройств, двойник устройства и Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="d249e-211">Device identity registry, device twin, and Cosmos DB</span></span>

<span data-ttu-id="d249e-212">Каждый Центр Интернета вещей включает [реестр удостоверений устройств][lnk-identity-registry], в котором хранятся ключи устройств.</span><span class="sxs-lookup"><span data-stu-id="d249e-212">Every IoT hub includes a [device identity registry][lnk-identity-registry] that stores device keys.</span></span> <span data-ttu-id="d249e-213">Центр Интернета вещей использует эти сведения для проверки подлинности устройств: для подключения к концентратору устройство должно иметь действительный ключ и оно должно быть зарегистрированным.</span><span class="sxs-lookup"><span data-stu-id="d249e-213">IoT Hub uses this information authenticate devices - a device must be registered and have a valid key before it can connect to the hub.</span></span>

<span data-ttu-id="d249e-214">[Двойник устройства][lnk-device-twin] — это документ JSON, управляемый Центром Интернета вещей.</span><span class="sxs-lookup"><span data-stu-id="d249e-214">A [device twin][lnk-device-twin] is a JSON document managed by the IoT Hub.</span></span> <span data-ttu-id="d249e-215">Двойник устройства для устройства содержит описанные ниже компоненты.</span><span class="sxs-lookup"><span data-stu-id="d249e-215">A device twin for a device contains:</span></span>

- <span data-ttu-id="d249e-216">Сообщаемые свойства, отправляемые устройством в центр.</span><span class="sxs-lookup"><span data-stu-id="d249e-216">Reported properties sent by the device to the hub.</span></span> <span data-ttu-id="d249e-217">Эти свойства можно просмотреть на портале решения.</span><span class="sxs-lookup"><span data-stu-id="d249e-217">You can view these properties in the solution portal.</span></span>
- <span data-ttu-id="d249e-218">Требуемые свойства, которые необходимо отправить на устройство.</span><span class="sxs-lookup"><span data-stu-id="d249e-218">Desired properties that you want to send to the device.</span></span> <span data-ttu-id="d249e-219">Значения этих свойств можно задать на портале решения.</span><span class="sxs-lookup"><span data-stu-id="d249e-219">You can set these properties in the solution portal.</span></span>
- <span data-ttu-id="d249e-220">Теги, которые существуют только на двойнике устройства, а не на устройстве.</span><span class="sxs-lookup"><span data-stu-id="d249e-220">Tags that exist only in the device twin and not on the device.</span></span> <span data-ttu-id="d249e-221">Эти теги можно использовать для фильтрации списков устройств на портале решения.</span><span class="sxs-lookup"><span data-stu-id="d249e-221">You can use these tags to filter lists of devices in the solution portal.</span></span>

<span data-ttu-id="d249e-222">Это решение использует двойники устройств для управления метаданными устройств.</span><span class="sxs-lookup"><span data-stu-id="d249e-222">This solution uses device twins to manage device metadata.</span></span> <span data-ttu-id="d249e-223">Решение также использует базу данных Cosmos DB для хранения собственных дополнительных данных об устройствах, например команд, поддерживаемых каждым из устройств, и журнала команд.</span><span class="sxs-lookup"><span data-stu-id="d249e-223">The solution also uses a Cosmos DB database to store additional solution-specific device data such as the commands supported by each device and the command history.</span></span>

<span data-ttu-id="d249e-224">Оно также должно обеспечивать синхронизацию данных в реестре удостоверений устройств с содержимым базы данных Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="d249e-224">The solution must also keep the information in the device identity registry synchronized with the contents of the Cosmos DB database.</span></span> <span data-ttu-id="d249e-225">Для управления синхронизацией экземпляр **EventProcessorHost** использует данные **задания отправки сведений об устройстве** Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="d249e-225">The **EventProcessorHost** uses the data from **DeviceInfo** stream analytics job to manage the synchronization.</span></span>

## <a name="solution-portal"></a><span data-ttu-id="d249e-226">Портал решения</span><span class="sxs-lookup"><span data-stu-id="d249e-226">Solution portal</span></span>

![портал решения][img-dashboard]

<span data-ttu-id="d249e-228">Портал решения представляет собой веб-интерфейс, разворачиваемый в облаке в составе предварительно настроенного решения.</span><span class="sxs-lookup"><span data-stu-id="d249e-228">The solution portal is a web-based UI that is deployed to the cloud as part of the preconfigured solution.</span></span> <span data-ttu-id="d249e-229">Он позволяет:</span><span class="sxs-lookup"><span data-stu-id="d249e-229">It enables you to:</span></span>

* <span data-ttu-id="d249e-230">просматривать данные телеметрии и историю оповещений на панели мониторинга;</span><span class="sxs-lookup"><span data-stu-id="d249e-230">View telemetry and alarm history in a dashboard.</span></span>
* <span data-ttu-id="d249e-231">подготавливать новые устройства;</span><span class="sxs-lookup"><span data-stu-id="d249e-231">Provision new devices.</span></span>
* <span data-ttu-id="d249e-232">осуществлять управление и мониторинг устройств;</span><span class="sxs-lookup"><span data-stu-id="d249e-232">Manage and monitor devices.</span></span>
* <span data-ttu-id="d249e-233">отправлять команды на определенные устройства;</span><span class="sxs-lookup"><span data-stu-id="d249e-233">Send commands to specific devices.</span></span>
* <span data-ttu-id="d249e-234">вызывать методы на конкретных устройствах;</span><span class="sxs-lookup"><span data-stu-id="d249e-234">Invoke methods on specific devices.</span></span>
* <span data-ttu-id="d249e-235">управлять правилами и действиями.</span><span class="sxs-lookup"><span data-stu-id="d249e-235">Manage rules and actions.</span></span>
* <span data-ttu-id="d249e-236">планировать выполнение заданий на одном или нескольких устройствах.</span><span class="sxs-lookup"><span data-stu-id="d249e-236">Schedule jobs to run on one or more devices.</span></span>

<span data-ttu-id="d249e-237">В этом предварительно настроенном решении портал представляет собой часть **серверной части решения Интернета вещей**, а также часть системы, отвечающую за **обработку данных и подключение к устройствам организации**, в стандартной [архитектуре решения Интернета вещей][lnk-what-is-azure-iot].</span><span class="sxs-lookup"><span data-stu-id="d249e-237">In this preconfigured solution, the solution portal forms part of the **IoT solution back end** and part of the **Processing and business connectivity** in the typical [IoT solution architecture][lnk-what-is-azure-iot].</span></span>

## <a name="next-steps"></a><span data-ttu-id="d249e-238">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="d249e-238">Next steps</span></span>

<span data-ttu-id="d249e-239">Дополнительные сведения об архитектурах решений Интернета вещей см. в документе [Эталонная архитектура служб IoT Microsoft Azure][lnk-refarch].</span><span class="sxs-lookup"><span data-stu-id="d249e-239">For more information about IoT solution architectures, see [Microsoft Azure IoT services: Reference Architecture][lnk-refarch].</span></span>

<span data-ttu-id="d249e-240">Теперь вы знаете, что такое предварительно настроенное решение, и можете приступить к развертыванию предварительно настроенного решения для *удаленного мониторинга*. Ознакомьтесь со статьей [Начало работы с предварительно настроенными решениями][lnk-getstarted-preconfigured].</span><span class="sxs-lookup"><span data-stu-id="d249e-240">Now you know what a preconfigured solution is, you can get started by deploying the *remote monitoring* preconfigured solution: [Get started with the preconfigured solutions][lnk-getstarted-preconfigured].</span></span>

[img-remote-monitoring-arch]: ./media/iot-suite-what-are-preconfigured-solutions/remote-monitoring-arch1.png
[img-dashboard]: ./media/iot-suite-what-are-preconfigured-solutions/dashboard.png
[lnk-what-is-azure-iot]: iot-suite-what-is-azure-iot.md
[lnk-asa]: https://azure.microsoft.com/documentation/services/stream-analytics/
[lnk-event-processor]: ../event-hubs/event-hubs-programming-guide.md#event-processor-host
[lnk-web-job]: ../app-service-web/web-sites-create-web-jobs.md
[lnk-identity-registry]: ../iot-hub/iot-hub-devguide-identity-registry.md
[lnk-predictive-maintenance]: iot-suite-predictive-overview.md
[lnk-azureiotsuite]: https://www.azureiotsuite.com/
[lnk-refarch]: http://download.microsoft.com/download/A/4/D/A4DAD253-BC21-41D3-B9D9-87D2AE6F0719/Microsoft_Azure_IoT_Reference_Architecture.pdf
[lnk-getstarted-preconfigured]: iot-suite-getstarted-preconfigured-solutions.md
[lnk-c2d-guidance]: ../iot-hub/iot-hub-devguide-c2d-guidance.md
[lnk-device-twin]: ../iot-hub/iot-hub-devguide-device-twins.md
[lnk-direct-methods]: ../iot-hub/iot-hub-devguide-direct-methods.md
[lnk-getstarted-factory]: iot-suite-connected-factory-overview.md
