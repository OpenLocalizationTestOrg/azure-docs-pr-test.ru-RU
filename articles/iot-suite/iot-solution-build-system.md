---
title: "Пример решения Интернета вещей Azure MyDriving: сборка | Документация Майкрософт"
description: "Выполните сборку приложения, которое демонстрирует пример проектирования системы Центра Интернета вещей с помощью Microsoft Azure, включая Stream Analytics, машинное обучение и концентраторы событий."
services: 
documentationcenter: .net
suite: 
author: harikmenon
manager: douge
ms.assetid: c2fcd6ee-3bbe-43d1-a066-dce52cc3a53d
ms.service: multiple
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: dotnet
ms.topic: article
ms.date: 06/30/2017
ms.author: harikm
ms.openlocfilehash: c4b19cc76ca11f606ca8af6b0f3277b5aa46ac5a
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="build-and-deploy-the-mydriving-solution-to-your-environment"></a><span data-ttu-id="4d95d-103">Создание и развертывание решения MyDriving в вашей среде</span><span class="sxs-lookup"><span data-stu-id="4d95d-103">Build and deploy the MyDriving solution to your environment</span></span>
<span data-ttu-id="4d95d-104">MyDriving — это решение "Интернета вещей" (IoT), которое собирает данные о работе автомобиля, обрабатывает их с помощью методов машинного обучения и выводит полученную информацию на экран мобильного телефона.</span><span class="sxs-lookup"><span data-stu-id="4d95d-104">MyDriving is an Internet of Things (IoT) solution that gathers data from your car, processes it by using machine learning, and presents it on your mobile phone.</span></span> <span data-ttu-id="4d95d-105">Серверная состоит из различных служб, предоставляемых Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="4d95d-105">The back end consists of a variety of services provided by Microsoft Azure.</span></span> <span data-ttu-id="4d95d-106">Клиентами могут быть телефоны под управлением Android, iOS или Windows 10.</span><span class="sxs-lookup"><span data-stu-id="4d95d-106">The clients can be Android, iOS, or Windows 10 phones.</span></span>

<span data-ttu-id="4d95d-107">MyDriving — первый шаг на пути к созданию собственной системы IoT.</span><span class="sxs-lookup"><span data-stu-id="4d95d-107">We created the MyDriving solution to give you a jumpstart in creating your own IoT system.</span></span> <span data-ttu-id="4d95d-108">Из [репозитория MyDriving в GitHub](https://github.com/Azure-Samples/MyDriving) можно получить сценарии Azure Resource Manager для развертывания серверной архитектуры в учетной записи Azure.</span><span class="sxs-lookup"><span data-stu-id="4d95d-108">From the [MyDriving repository on GitHub](https://github.com/Azure-Samples/MyDriving), you can get Azure Resource Manager scripts to deploy the back-end architecture into your own Azure account.</span></span> <span data-ttu-id="4d95d-109">После этого вы сможете перенастроить различные службы, изменить запросы в соответствии со своими данными и т. п.</span><span class="sxs-lookup"><span data-stu-id="4d95d-109">From that point, you can reconfigure the different services, modify the queries to suit your own data, and so on.</span></span> <span data-ttu-id="4d95d-110">Эти сценарии, а также код для мобильного приложения, проект API службы приложений Azure и многое другое можно найти в репозитории MyDriving.</span><span class="sxs-lookup"><span data-stu-id="4d95d-110">You can find these scripts--along with code for the mobile app, the Azure App Service API project, and more--in the MyDriving repository.</span></span>

<span data-ttu-id="4d95d-111">Если вы еще не знакомы с этим приложением, см. дополнительные сведения о нем в [руководстве по началу работы](iot-solution-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="4d95d-111">If you haven't tried the app yet, look at the [Get started guide](iot-solution-get-started.md).</span></span>

<span data-ttu-id="4d95d-112">Подробное описание компонентов архитектуры можно найти в [справочном руководстве по MyDriving](http://aka.ms/mydrivingdocs).</span><span class="sxs-lookup"><span data-stu-id="4d95d-112">There's a detailed account of the architecture in the [MyDriving Reference Guide](http://aka.ms/mydrivingdocs).</span></span> <span data-ttu-id="4d95d-113">Ниже перечислены компоненты, которые мы настроили для создания похожего проекта.</span><span class="sxs-lookup"><span data-stu-id="4d95d-113">In summary, there are several pieces that we set up to create a similar project:</span></span>

* <span data-ttu-id="4d95d-114">**Клиентское приложение** работает на телефонах Android, iOS и Windows 10.</span><span class="sxs-lookup"><span data-stu-id="4d95d-114">A **client app** runs on Android, iOS, and Windows 10 phones.</span></span> <span data-ttu-id="4d95d-115">Для распространения большей части кода используется платформа Xamarin. Код размещен на сайте GitHub в разделе `src/MobileApp`.</span><span class="sxs-lookup"><span data-stu-id="4d95d-115">We use the Xamarin platform to share much of the code, which is stored on GitHub under `src/MobileApp`.</span></span> <span data-ttu-id="4d95d-116">По сути, приложение выполняет две роли:</span><span class="sxs-lookup"><span data-stu-id="4d95d-116">The app actually performs two distinct functions:</span></span>
  * <span data-ttu-id="4d95d-117">Оно ретранслирует телеметрию из устройства встроенной диагностики (OBD) и собственной службы расположений в облачную серверную часть системы.</span><span class="sxs-lookup"><span data-stu-id="4d95d-117">It relays telemetry from the on-board diagnostics (OBD) device and from its own location service to the system's cloud back end.</span></span>
  * <span data-ttu-id="4d95d-118">Это пользовательский интерфейс, который позволяет пользователям запрашивать сведения о записанных поездках.</span><span class="sxs-lookup"><span data-stu-id="4d95d-118">It's a user interface where users can query about their recorded road trips.</span></span>
* <span data-ttu-id="4d95d-119">**Облачная служба** принимает данные о поездках в режиме реального времени и обрабатывает их.</span><span class="sxs-lookup"><span data-stu-id="4d95d-119">A **cloud service** ingests the road-trip data in real time and processes it.</span></span> <span data-ttu-id="4d95d-120">Главная задача при создании этой службы — выбрать, параметризовать и подключить различные службы Azure.</span><span class="sxs-lookup"><span data-stu-id="4d95d-120">The main work of creating this service is to choose, parameterize, and wire up a variety of Azure services.</span></span> <span data-ttu-id="4d95d-121">Кроме того, чтобы фильтровать и обрабатывать входящие данные, для некоторых компонентов этого приложения требуются скрипты.</span><span class="sxs-lookup"><span data-stu-id="4d95d-121">Some of the parts require scripts to filter and process the incoming data.</span></span> <span data-ttu-id="4d95d-122">Мы используем для настройки всех компонентов шаблон Azure Resource Management.</span><span class="sxs-lookup"><span data-stu-id="4d95d-122">We use an Azure Resource Manager template to configure all the parts.</span></span>
* <span data-ttu-id="4d95d-123">**Приложение мобильной службы** — это веб-служба, которая составляет основу пользовательского интерфейса приложения устройства.</span><span class="sxs-lookup"><span data-stu-id="4d95d-123">A **mobile service app** is the web service behind the user interface part of the device app.</span></span> <span data-ttu-id="4d95d-124">Ее основная задача — отправлять запросы к базе данных, содержащей сохраненную обработанную информацию.</span><span class="sxs-lookup"><span data-stu-id="4d95d-124">Its main job is to query the database of stored, processed data.</span></span> <span data-ttu-id="4d95d-125">Код для этой службы размещен на сайте GitHub в разделе `src/MobileAppService`.</span><span class="sxs-lookup"><span data-stu-id="4d95d-125">Its code is on GitHub under `src/MobileAppService`.</span></span>
* <span data-ttu-id="4d95d-126">**Visual Studio с Xamarin** .</span><span class="sxs-lookup"><span data-stu-id="4d95d-126">**Visual Studio with Xamarin** is our development environment.</span></span> <span data-ttu-id="4d95d-127">Xamarin (как компонент Visual Studio или изолированная интегрированная среда разработки (IDE)) используется для создания кроссплатформенного кода для устройств.</span><span class="sxs-lookup"><span data-stu-id="4d95d-127">Xamarin, which exists both as a component of Visual Studio and as a stand-alone integrated development environment (IDE), is used to build the cross-platform device code.</span></span> <span data-ttu-id="4d95d-128">Для сборки кода iOS необходим экземпляр Xamarin, работающий на компьютере OS X.</span><span class="sxs-lookup"><span data-stu-id="4d95d-128">To build the iOS code, it's necessary to have an instance of Xamarin running on an OS X machine.</span></span> <span data-ttu-id="4d95d-129">При необходимости он может выполняться как агент, управляемый из Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4d95d-129">If required, it can be run as an agent, managed from Visual Studio.</span></span>
* <span data-ttu-id="4d95d-130">**Модульное тестирование** приложений устройств выполняется в тестовом облаке Xamarin.</span><span class="sxs-lookup"><span data-stu-id="4d95d-130">**Unit testing** of the device apps is performed in Xamarin Test Cloud.</span></span>
* <span data-ttu-id="4d95d-131">**GitHub** является репозиторием, где хранятся код, сценарии и шаблоны.</span><span class="sxs-lookup"><span data-stu-id="4d95d-131">**GitHub** is the repository where we store all the code, scripts, and templates.</span></span>
* <span data-ttu-id="4d95d-132">**Visual Studio Team Services** — это облачная служба, которая используется для управления непрерывным процессом сборки и тестирования приложений веб-службы и устройств.</span><span class="sxs-lookup"><span data-stu-id="4d95d-132">**Visual Studio Team Services** is a cloud service that's used to manage the continuous build and test of the web service and device apps.</span></span>
* <span data-ttu-id="4d95d-133">**HockeyApp** используется для распространения версий кода устройства.</span><span class="sxs-lookup"><span data-stu-id="4d95d-133">**HockeyApp** is used to distribute releases of the device code.</span></span> <span data-ttu-id="4d95d-134">Она также собирает отчеты о сбоях и использовании и отзывы пользователей.</span><span class="sxs-lookup"><span data-stu-id="4d95d-134">It also collects crash and usage reports and user feedback.</span></span>
* <span data-ttu-id="4d95d-135">**Visual Studio Application Insights** отслеживает мобильную веб-службу.</span><span class="sxs-lookup"><span data-stu-id="4d95d-135">**Visual Studio Application Insights** monitors the mobile web service.</span></span>

<span data-ttu-id="4d95d-136">Теперь нам нужно все это настроить.</span><span class="sxs-lookup"><span data-stu-id="4d95d-136">So, let's see how we set up all of that.</span></span> 

> [!NOTE] 
> <span data-ttu-id="4d95d-137">Многие действия не являются обязательными.</span><span class="sxs-lookup"><span data-stu-id="4d95d-137">Many of the following steps are optional.</span></span>
>
>

## <a name="sign-up-for-accounts"></a><span data-ttu-id="4d95d-138">Регистрация учетных записей</span><span class="sxs-lookup"><span data-stu-id="4d95d-138">Sign up for accounts</span></span>
* <span data-ttu-id="4d95d-139">[Visual Studio Dev Essentials](https://www.visualstudio.com/products/visual-studio-dev-essentials-vs.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d95d-139">[Visual Studio Dev Essentials](https://www.visualstudio.com/products/visual-studio-dev-essentials-vs.aspx).</span></span> <span data-ttu-id="4d95d-140">Эта бесплатная программа предоставляет удобный доступ ко многим службам и инструментам для разработки, в том числе Visual Studio, Visual Studio Team Services и Azure.</span><span class="sxs-lookup"><span data-stu-id="4d95d-140">This free program provides easy access to many developer tools and services, including Visual Studio, Visual Studio Team Services, and Azure.</span></span> <span data-ttu-id="4d95d-141">Кроме того, вы получаете кредит на использование Azure в размере 25 долл. США в месяц на протяжении года.</span><span class="sxs-lookup"><span data-stu-id="4d95d-141">It gives you a $25/month credit on Azure for 12 months.</span></span> <span data-ttu-id="4d95d-142">Она также предоставляет подписки на обучающие ресурсы Pluralsight и Xamarin University.</span><span class="sxs-lookup"><span data-stu-id="4d95d-142">It also includes subscriptions to Pluralsight training and Xamarin University.</span></span> <span data-ttu-id="4d95d-143">Можно также отдельно подписаться на службы [Azure](https://azure.com) и [Visual Studio Team Services](https://www.visualstudio.com/products/visual-studio-team-services-vs.aspx) уровня "Бесплатный", но эти подписки не предоставляют деньги на счете в Azure.</span><span class="sxs-lookup"><span data-stu-id="4d95d-143">You can also sign up separately for free tiers of [Azure](https://azure.com) and [Visual Studio Team Services](https://www.visualstudio.com/products/visual-studio-team-services-vs.aspx), but these do not provide Azure credits.</span></span>
* <span data-ttu-id="4d95d-144">[HockeyApp](https://rink.hockeyapp.net/) (необязательно). С помощью этой службы можно управлять тестовым распространением мобильных приложений и осуществлять сбор данных телеметрии.</span><span class="sxs-lookup"><span data-stu-id="4d95d-144">[HockeyApp](https://rink.hockeyapp.net/) (optional), for managing test distribution of mobile apps and collecting telemetry.</span></span>
* <span data-ttu-id="4d95d-145">[Xamarin](https://xamarin.com/) (обязательно). Этот компонент необходим для сборки мобильного приложения, а также выполнения отладки и тестирования в [тестовом облаке Xamarin](https://xamarin.com/test-cloud).</span><span class="sxs-lookup"><span data-stu-id="4d95d-145">[Xamarin](https://xamarin.com/) (required), for building the mobile app and running debug runs and tests on [Xamarin Test Cloud](https://xamarin.com/test-cloud).</span></span>
* <span data-ttu-id="4d95d-146">[GitHub](https://github.com/Azure-Samples/MyDriving/) (необязательно). Этот ресурс позволяет создавать общедоступные бесплатные репозитории кода (частные репозитории оплачиваются).</span><span class="sxs-lookup"><span data-stu-id="4d95d-146">[GitHub](https://github.com/Azure-Samples/MyDriving/) (optional), to create free public repositories for your own code (private repositories are paid).</span></span> <span data-ttu-id="4d95d-147">В качестве альтернативы для частных репозиториев можно использовать Visual Studio Team Services с планом "Базовый".</span><span class="sxs-lookup"><span data-stu-id="4d95d-147">Alternatively, you can use the basic plan in Visual Studio Team Services for private repositories.</span></span>
* <span data-ttu-id="4d95d-148">[Power BI](https://powerbi.microsoft.com/) (необязательно). Power BI можно использовать для создания расширенных визуализаций данных во всей системе.</span><span class="sxs-lookup"><span data-stu-id="4d95d-148">[Power BI](https://powerbi.microsoft.com/) (optional), to create rich visualizations of data across the entire system.</span></span>

> [!NOTE]
> <span data-ttu-id="4d95d-149">Получить доступ к коду MyDriving можно в [репозитории MyDriving в GitHub](https://github.com/Azure-Samples/MyDriving). Для этого учетная запись GitHub не требуется.</span><span class="sxs-lookup"><span data-stu-id="4d95d-149">You don't need a GitHub account to access the MyDriving code in [the GitHub MyDriving repository](https://github.com/Azure-Samples/MyDriving).</span></span>
> 
> 

## <a name="install-development-tools"></a><span data-ttu-id="4d95d-150">Установка средств разработки</span><span class="sxs-lookup"><span data-stu-id="4d95d-150">Install development tools</span></span>
<span data-ttu-id="4d95d-151">Приведенные ниже шаги настройки позволят разработать комплексное решение: кроссплатформенное приложение iOS, Android и Windows 10 Mobile с серверной частью Azure.</span><span class="sxs-lookup"><span data-stu-id="4d95d-151">The following setup is for developing the full solution: an iOS, Android, and Windows 10 Mobile cross-platform app, with an Azure back end.</span></span>

<span data-ttu-id="4d95d-152">Если вы не используете серверную часть Azure, для разработки мобильных приложений можно воспользоваться Xamarin Studio на компьютере Mac или Windows.</span><span class="sxs-lookup"><span data-stu-id="4d95d-152">As an alternative, you can use Xamarin Studio on either Mac or Windows to develop the mobile apps if you aren't working on the Azure back end.</span></span>

<span data-ttu-id="4d95d-153">Подробное описание указаний по настройке см. [здесь](https://msdn.microsoft.com/library/mt613162.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d95d-153">There's a [longer description of this setup](https://msdn.microsoft.com/library/mt613162.aspx).</span></span>

### <a name="windows-development-machine"></a><span data-ttu-id="4d95d-154">Компьютер разработки Windows</span><span class="sxs-lookup"><span data-stu-id="4d95d-154">Windows development machine</span></span>
<span data-ttu-id="4d95d-155">Основным средством для работы с приложением MyDriving для Android, Windows, проекта API службы приложений и расширений микрослужб в Windows выступает Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4d95d-155">The central tool on Windows is Visual Studio, for working with the MyDriving app for Android and Windows, the App Service API project, and microservice extensions.</span></span>

<span data-ttu-id="4d95d-156">Xamarin, Git, эмуляторы и другие полезные компоненты интегрированы в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4d95d-156">Xamarin, Git, emulators, and other useful components are all integrated with Visual Studio.</span></span>

<span data-ttu-id="4d95d-157">Установка:</span><span class="sxs-lookup"><span data-stu-id="4d95d-157">Install:</span></span>

* <span data-ttu-id="4d95d-158">[Visual Studio с Xamarin](https://www.visualstudio.com/products/visual-studio-community-vs) (любой выпуск; выпуск Community — бесплатный).</span><span class="sxs-lookup"><span data-stu-id="4d95d-158">[Visual Studio with Xamarin](https://www.visualstudio.com/products/visual-studio-community-vs) (any edition--Community is free).</span></span>
* <span data-ttu-id="4d95d-159">[SQLite для универсальной платформы Windows](https://visualstudiogallery.msdn.microsoft.com/4913e7d5-96c9-4dde-a1a1-69820d615936).</span><span class="sxs-lookup"><span data-stu-id="4d95d-159">[SQLite for Universal Windows Platform](https://visualstudiogallery.msdn.microsoft.com/4913e7d5-96c9-4dde-a1a1-69820d615936).</span></span> <span data-ttu-id="4d95d-160">Требуется для сборки кода для Windows 10 Mobile.</span><span class="sxs-lookup"><span data-stu-id="4d95d-160">Required to build the Windows 10 Mobile code.</span></span>
* <span data-ttu-id="4d95d-161">[Пакет SDK Azure для Visual Studio](https://www.visualstudio.com/vs/azure-tools/).</span><span class="sxs-lookup"><span data-stu-id="4d95d-161">[Azure SDK for Visual Studio](https://www.visualstudio.com/vs/azure-tools/).</span></span> <span data-ttu-id="4d95d-162">Этот пакет SDK позволяет выполнять приложения в Azure и управлять Azure с помощью программ командной строки.</span><span class="sxs-lookup"><span data-stu-id="4d95d-162">Gives you the SDK for running apps in Azure, along with command-line tools for managing Azure.</span></span>
* <span data-ttu-id="4d95d-163">[Пакет SDK для Azure Service Fabric](http://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=MicrosoftAzure-ServiceFabric).</span><span class="sxs-lookup"><span data-stu-id="4d95d-163">[Azure Service Fabric SDK](http://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=MicrosoftAzure-ServiceFabric).</span></span> <span data-ttu-id="4d95d-164">Требуется для создания расширения [микрослужб](../service-fabric/service-fabric-get-started.md) .</span><span class="sxs-lookup"><span data-stu-id="4d95d-164">Required to build the [microservice](../service-fabric/service-fabric-get-started.md) extension.</span></span>

<span data-ttu-id="4d95d-165">Убедитесь, что вы используете соответствующие расширения Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4d95d-165">Be sure you have the right Visual Studio extensions.</span></span> <span data-ttu-id="4d95d-166">Проверить это можно в разделе **Сервис**. Там вы увидите **Android, iOS, Xamarin и т. д.**</span><span class="sxs-lookup"><span data-stu-id="4d95d-166">Check that under **Tools**, you see **Android, iOS, Xamarin…**.</span></span> <span data-ttu-id="4d95d-167">В противном случае откройте Visual Studio, выполните поиск среды разработки Xamarin и установите ее, следуя инструкциям на экране.</span><span class="sxs-lookup"><span data-stu-id="4d95d-167">If not, open Visual Studio, search for Xamarin, and follow the prompts to install it.</span></span> <span data-ttu-id="4d95d-168">Также убедитесь, что клиент **Git для Windows** установлен.</span><span class="sxs-lookup"><span data-stu-id="4d95d-168">Also, check that **Git for Windows** is installed.</span></span> <span data-ttu-id="4d95d-169">В противном случае в Visual Studio выполните поиск этого клиента и установите его, следуя инструкциям на экране.</span><span class="sxs-lookup"><span data-stu-id="4d95d-169">If not, in Visual Studio, search for it and follow the prompts to install it.</span></span> 

### <a name="mac-development-machine"></a><span data-ttu-id="4d95d-170">Компьютер разработки Mac</span><span class="sxs-lookup"><span data-stu-id="4d95d-170">Mac development machine</span></span>
<span data-ttu-id="4d95d-171">Компьютер Mac (Yosemite или более поздней версии) необходим для разработки для iOS.</span><span class="sxs-lookup"><span data-stu-id="4d95d-171">The Mac (Yosemite or later) is required if you want to develop for iOS.</span></span> <span data-ttu-id="4d95d-172">Несмотря на то, что на компьютере Windows для создания кода и управления им используется Visual Studio с расширением Xamarin, для создания и подписи кода iOS на компьютере Mac необходимо установить агент Xamarin.</span><span class="sxs-lookup"><span data-stu-id="4d95d-172">Although we use Visual Studio with Xamarin on Windows to develop and manage all the code, Xamarin uses an agent installed on a Mac in order to build and sign the iOS code.</span></span>

![Разработка в среде Windows и выполнение сборки в среде Mac](./media/iot-solution-build-system/image1.png)

<span data-ttu-id="4d95d-174">(В качестве альтернативы для разработки кроссплатформенных приложений можно использовать Xamarin Studio непосредственно на компьютере Mac.)</span><span class="sxs-lookup"><span data-stu-id="4d95d-174">(As an alternative, you can use Xamarin Studio directly on the Mac to develop cross-platform apps.)</span></span>

<span data-ttu-id="4d95d-175">Если iOS не будет использоваться в качестве целевой платформы, нет необходимости в компьютере Mac.</span><span class="sxs-lookup"><span data-stu-id="4d95d-175">You don't need the Mac if you don't want to include iOS as a target platform.</span></span>

<span data-ttu-id="4d95d-176">Установка:</span><span class="sxs-lookup"><span data-stu-id="4d95d-176">Install:</span></span>

* <span data-ttu-id="4d95d-177">[Xamarin Studio для iOS](https://developer.xamarin.com/guides/ios/getting_started/installation/mac/).</span><span class="sxs-lookup"><span data-stu-id="4d95d-177">[Xamarin Studio for iOS](https://developer.xamarin.com/guides/ios/getting_started/installation/mac/).</span></span> <span data-ttu-id="4d95d-178">Можно также установить Visual Studio и Xamarin на компьютере Mac с виртуальной машиной Windows.</span><span class="sxs-lookup"><span data-stu-id="4d95d-178">You can also set up Visual Studio and Xamarin on a Mac that's running a Windows virtual machine.</span></span> <span data-ttu-id="4d95d-179">Дополнительные сведения см. в статье [Программа установки, установка и проверки для пользователей Mac](https://msdn.microsoft.com/library/mt488770.aspx) на портале MSDN.</span><span class="sxs-lookup"><span data-stu-id="4d95d-179">See [Setup, install, and verifications for Mac users](https://msdn.microsoft.com/library/mt488770.aspx) on MSDN.</span></span>
* <span data-ttu-id="4d95d-180">[Средства разработки Azure](https://azure.microsoft.com/downloads/) (необязательно).</span><span class="sxs-lookup"><span data-stu-id="4d95d-180">[Azure development tools](https://azure.microsoft.com/downloads/) (optional).</span></span>

<span data-ttu-id="4d95d-181">Настройте удаленный вход на компьютере Mac.</span><span class="sxs-lookup"><span data-stu-id="4d95d-181">Enable remote login on the Mac.</span></span> <span data-ttu-id="4d95d-182">Откройте **Системные настройки** > **Общий доступ** и установите флажок **Удаленный вход**.</span><span class="sxs-lookup"><span data-stu-id="4d95d-182">Open **System Preferences** > **Sharing**, and then select **Remote Login**.</span></span>

<span data-ttu-id="4d95d-183">При открытии проекта iOS в Visual Studio на компьютере Windows подключаемый модуль Xamarin запросит ввод идентификатора Mac.</span><span class="sxs-lookup"><span data-stu-id="4d95d-183">When you open an iOS project in Visual Studio on Windows, the Xamarin plug-in will prompt you for the ID of the Mac.</span></span>

## <a name="fetch-the-github-repository"></a><span data-ttu-id="4d95d-184">Получение репозитория GitHub</span><span class="sxs-lookup"><span data-stu-id="4d95d-184">Fetch the GitHub repository</span></span>
<span data-ttu-id="4d95d-185">Получите локальную копию [репозитория MyDriving из GitHub](https://github.com/Azure-Samples/MyDriving) , нажав кнопку **Download ZIP** (Скачать ZIP-файл) на GitHub, в Visual Studio или в другом клиенте Git.</span><span class="sxs-lookup"><span data-stu-id="4d95d-185">Fetch a local copy of [the GitHub MyDriving repository](https://github.com/Azure-Samples/MyDriving) by using the **Download ZIP** button in GitHub, Visual Studio, or another Git client.</span></span>

<span data-ttu-id="4d95d-186">Распакуйте файл в расположение с коротким путем, например C:\\code.</span><span class="sxs-lookup"><span data-stu-id="4d95d-186">Unzip the file to a folder with a short path name, such as C:\\code.</span></span>

<span data-ttu-id="4d95d-187">Кроме того, если вы хотите следить за обновлениями кода или принимать участие в его разработке, клонируйте репозиторий, используя следующую команду:</span><span class="sxs-lookup"><span data-stu-id="4d95d-187">Alternatively, if you want to keep up to date with or contribute to our code, clone the repository as follows:</span></span>

<span data-ttu-id="4d95d-188">**git clone https://github.com/Azure-Samples/MyDriving.git**</span><span class="sxs-lookup"><span data-stu-id="4d95d-188">**git clone https://github.com/Azure-Samples/MyDriving.git**</span></span>

## <a name="get-a-bing-maps-api-key"></a><span data-ttu-id="4d95d-189">Получение ключа API для Карт Bing</span><span class="sxs-lookup"><span data-stu-id="4d95d-189">Get a Bing maps API key</span></span>
<span data-ttu-id="4d95d-190">[Зарегистрируйтесь для получения ключа API для Карт Bing](https://msdn.microsoft.com/library/ff428642.aspx).</span><span class="sxs-lookup"><span data-stu-id="4d95d-190">[Register for a Bing Maps API key](https://msdn.microsoft.com/library/ff428642.aspx).</span></span>

<span data-ttu-id="4d95d-191">Его нужно указать в строке 22 в `src/MobileApps/MyDriving/MyDriving.Utils/Logger.cs`.</span><span class="sxs-lookup"><span data-stu-id="4d95d-191">You need to replace this in line 22 in `src/MobileApps/MyDriving/MyDriving.Utils/Logger.cs`.</span></span>

## <a name="build-the-demo-app"></a><span data-ttu-id="4d95d-192">Создание демонстрационного приложения</span><span class="sxs-lookup"><span data-stu-id="4d95d-192">Build the demo app</span></span>
<span data-ttu-id="4d95d-193">Откройте следующие решения в Visual Studio:</span><span class="sxs-lookup"><span data-stu-id="4d95d-193">Open these solutions in Visual Studio:</span></span>

* <span data-ttu-id="4d95d-194">src\MobileApps\MyDriving.sln;</span><span class="sxs-lookup"><span data-stu-id="4d95d-194">src\MobileApps\MyDriving.sln</span></span>
* <span data-ttu-id="4d95d-195">src\MobileAppService\MyDrivingService.sln;</span><span class="sxs-lookup"><span data-stu-id="4d95d-195">src\MobileAppService\MyDrivingService.sln</span></span>
* <span data-ttu-id="4d95d-196">src\Extensions\ServiceFabric\VINLookUpApplication\VINLookUpApplication.sln.</span><span class="sxs-lookup"><span data-stu-id="4d95d-196">src\Extensions\ServiceFabric\VINLookUpApplication\VINLookUpApplication.sln</span></span>

<span data-ttu-id="4d95d-197">При этом вам понадобится сделать следующее:</span><span class="sxs-lookup"><span data-stu-id="4d95d-197">You'll get prompts to:</span></span>

* <span data-ttu-id="4d95d-198">Подтвердить доверие некоторым потенциально ненадежным проектам.</span><span class="sxs-lookup"><span data-stu-id="4d95d-198">Trust some potentially untrustworthy projects.</span></span> <span data-ttu-id="4d95d-199">Откройте их, если вы хотите продолжить.</span><span class="sxs-lookup"><span data-stu-id="4d95d-199">Choose to open them if you want to go ahead.</span></span>
* <span data-ttu-id="4d95d-200">Задать режим разработчика, если вы работаете на новом компьютере Windows 10.</span><span class="sxs-lookup"><span data-stu-id="4d95d-200">Set Developer mode if you're working on a fresh Windows 10 machine.</span></span>
* <span data-ttu-id="4d95d-201">Ввести учетные данные Xamarin.</span><span class="sxs-lookup"><span data-stu-id="4d95d-201">Provide your Xamarin credentials.</span></span>
* <span data-ttu-id="4d95d-202">Подключиться к компьютеру Mac с Xamarin.</span><span class="sxs-lookup"><span data-stu-id="4d95d-202">Connect to the Xamarin Mac.</span></span> <span data-ttu-id="4d95d-203">Если у вас нет компьютера Mac, щелкните правой кнопкой мыши проект iOS в Visual Studio и выберите **Выгрузить проект**.</span><span class="sxs-lookup"><span data-stu-id="4d95d-203">If you don't have a Mac, right-click the iOS project in Visual Studio, and then select **Unload project**.</span></span>

<span data-ttu-id="4d95d-204">Повторно создайте решение.</span><span class="sxs-lookup"><span data-stu-id="4d95d-204">Rebuild the solution.</span></span>

<span data-ttu-id="4d95d-205">В случае проблем при сборке попробуйте применить решения для обеспечения совместимости, которые мы нашли.</span><span class="sxs-lookup"><span data-stu-id="4d95d-205">If you have trouble building, try the solutions to quirks that we've found:</span></span>

* <span data-ttu-id="4d95d-206">*Проект VINLookupApplication не загружается*. Убедитесь, что [пакет SDK Azure для Visual Studio](https://www.visualstudio.com/vs/azure-tools/) установлен.</span><span class="sxs-lookup"><span data-stu-id="4d95d-206">*VINLookupApplication project doesn't load*: Be sure that you installed the [Azure SDK for Visual Studio](https://www.visualstudio.com/vs/azure-tools/).</span></span>
* <span data-ttu-id="4d95d-207">*Не удается создать проект Service Fabric*. Сначала выполните сборку проектов интерфейсов и убедитесь, что пакет SDK для Service Fabric установлен.</span><span class="sxs-lookup"><span data-stu-id="4d95d-207">*Service Fabric project doesn't build*: Build the interface projects first, and be sure that you installed the Service Fabric SDK.</span></span>
* <span data-ttu-id="4d95d-208">*Не удается выполнить сборку приложения Android*.</span><span class="sxs-lookup"><span data-stu-id="4d95d-208">*Android app doesn't build*:</span></span>
  
  * <span data-ttu-id="4d95d-209">Щелкните **Сервис** > **Android** > **Диспетчер пакетов SDK для Android** и убедитесь, что Android 6 (API 23) и платформа SDK установлены.</span><span class="sxs-lookup"><span data-stu-id="4d95d-209">Open **Tools** > **Android** > **Android SDK Manager**, and ensure that Android 6 (API 23)/SDK Platform is installed.</span></span>
  * <span data-ttu-id="4d95d-210">Удалите следующий каталог, а затем повторите сборку:</span><span class="sxs-lookup"><span data-stu-id="4d95d-210">Delete this directory, and then rebuild:</span></span><br/>
    `%LocalAppData%\Xamarin\zips`

## <a name="get-to-know-the-code"></a><span data-ttu-id="4d95d-211">Компоненты кода</span><span class="sxs-lookup"><span data-stu-id="4d95d-211">Get to know the code</span></span>
<span data-ttu-id="4d95d-212">В решении вы увидите следующие компоненты:</span><span class="sxs-lookup"><span data-stu-id="4d95d-212">In the solution, you'll find:</span></span>

* <span data-ttu-id="4d95d-213">расширения Azure: Service Fabric;</span><span class="sxs-lookup"><span data-stu-id="4d95d-213">Azure extensions: Service Fabric.</span></span>
* <span data-ttu-id="4d95d-214">Azure HDInsight: сценарии для обработки данных поездок в Azure;</span><span class="sxs-lookup"><span data-stu-id="4d95d-214">Azure HDInsight: Scripts for processing trip data in Azure.</span></span>
* <span data-ttu-id="4d95d-215">мобильные приложения: приложения для устройств;</span><span class="sxs-lookup"><span data-stu-id="4d95d-215">Mobile Apps: The device apps.</span></span>
* <span data-ttu-id="4d95d-216">MobileAppsService и MyDrivingService: серверная веб-служба;</span><span class="sxs-lookup"><span data-stu-id="4d95d-216">MobileAppsService/MyDrivingService: The web back end.</span></span>
* <span data-ttu-id="4d95d-217">Power BI: определение отчета Power BI.</span><span class="sxs-lookup"><span data-stu-id="4d95d-217">Power BI: The report definition.</span></span>
* <span data-ttu-id="4d95d-218">Scripts:</span><span class="sxs-lookup"><span data-stu-id="4d95d-218">Scripts:</span></span>
  
  * <span data-ttu-id="4d95d-219">Resource Manager: шаблоны для создания ресурсов Azure;</span><span class="sxs-lookup"><span data-stu-id="4d95d-219">Resource Manager: Templates to build the Azure resources.</span></span>
  * <span data-ttu-id="4d95d-220">PowerShell: сценарии для запуска шаблонов Resource Manager;</span><span class="sxs-lookup"><span data-stu-id="4d95d-220">PowerShell: Scripts to run the Resource Manager templates.</span></span>
  * <span data-ttu-id="4d95d-221">База данных SQL: базы данных отладки;</span><span class="sxs-lookup"><span data-stu-id="4d95d-221">Azure SQL Database: Debugging databases.</span></span>
* <span data-ttu-id="4d95d-222">База данных SQL: CreateTables — определения схем;</span><span class="sxs-lookup"><span data-stu-id="4d95d-222">SQL Database: CreateTables: schema definitions.</span></span>
* <span data-ttu-id="4d95d-223">Azure StreamingAnalytics: запросы, которые преобразовывают входящий поток данных.</span><span class="sxs-lookup"><span data-stu-id="4d95d-223">Azure Stream Analytics: Queries that transform the incoming data stream.</span></span>

## <a name="run-the-apps-in-development-mode"></a><span data-ttu-id="4d95d-224">Запуск приложений в режиме разработки</span><span class="sxs-lookup"><span data-stu-id="4d95d-224">Run the apps in development mode</span></span>
<span data-ttu-id="4d95d-225">Выполните действие для запуска приложений в соответствии с устройством, которое вы используете.</span><span class="sxs-lookup"><span data-stu-id="4d95d-225">Take action to run the apps, based on the device that you're using:</span></span>

* <span data-ttu-id="4d95d-226">Серверная часть: установите MyDrivingService в качестве запускаемого проекта и нажмите клавишу F5, чтобы запустить серверную веб-службу.</span><span class="sxs-lookup"><span data-stu-id="4d95d-226">Back end: Set MyDrivingService as the startup project, and press F5 to run the back-end web service.</span></span> <span data-ttu-id="4d95d-227">После этого в браузере откроется список интерфейсов API.</span><span class="sxs-lookup"><span data-stu-id="4d95d-227">It will open a browser view of the API listing.</span></span>
* <span data-ttu-id="4d95d-228">Мобильные клиенты: [мобильные приложения разрабатываются в Xamarin](https://developer.xamarin.com/guides/cross-platform/deployment,_testing,_and_metrics/debugging_with_xamarin/).</span><span class="sxs-lookup"><span data-stu-id="4d95d-228">Mobile clients: The [mobile apps are developed in Xamarin](https://developer.xamarin.com/guides/cross-platform/deployment,_testing,_and_metrics/debugging_with_xamarin/).</span></span>
  
  * <span data-ttu-id="4d95d-229">Android: чтобы узнать больше, ознакомьтесь с [отладкой приложений Android в Xamarin](http://developer.xamarin.com/guides/android/deployment,_testing,_and_metrics/debugging_with_xamarin_android/).</span><span class="sxs-lookup"><span data-stu-id="4d95d-229">Android: For details, see [Debugging Android in Xamarin](http://developer.xamarin.com/guides/android/deployment,_testing,_and_metrics/debugging_with_xamarin_android/).</span></span>
  * <span data-ttu-id="4d95d-230">iOS: чтобы узнать больше, ознакомьтесь с [отладкой в iOS](http://developer.xamarin.com/guides/ios/deployment,_testing,_and_metrics/debugging_in_xamarin_ios/).</span><span class="sxs-lookup"><span data-stu-id="4d95d-230">iOS: For details, see [Debugging in iOS](http://developer.xamarin.com/guides/ios/deployment,_testing,_and_metrics/debugging_in_xamarin_ios/).</span></span>
  * <span data-ttu-id="4d95d-231">Windows Phone: чтобы узнать больше, ознакомьтесь с разделом [Xamarin + Universal Windows Platform](https://developer.xamarin.com/guides/cross-platform/windows/phone/)(Xamarin и универсальная платформа Windows).</span><span class="sxs-lookup"><span data-stu-id="4d95d-231">Windows Phone: For details, see [Xamarin + Windows Phone](https://developer.xamarin.com/guides/cross-platform/windows/phone/).</span></span>

## <a name="upload-the-mobile-app-to-hockeyapp"></a><span data-ttu-id="4d95d-232">Передача мобильного приложения в HockeyApp</span><span class="sxs-lookup"><span data-stu-id="4d95d-232">Upload the mobile app to HockeyApp</span></span>
<span data-ttu-id="4d95d-233">HockeyApp управляет распространением приложений Android, iOS или для Windows среди тестовых пользователей, уведомляя их о новых выпусках.</span><span class="sxs-lookup"><span data-stu-id="4d95d-233">HockeyApp manages the distribution of your Android, iOS, or Windows app to test users, notifying users of new releases.</span></span> <span data-ttu-id="4d95d-234">Кроме того, эта служба собирает отчеты о сбоях, отзывы пользователей со снимками экрана, а также метрики использования.</span><span class="sxs-lookup"><span data-stu-id="4d95d-234">It also collects useful crash reports, user feedback with screenshots, and usage metrics.</span></span>

<span data-ttu-id="4d95d-235">[Сначала передайте](http://support.hockeyapp.net/kb/app-management-2/how-to-create-a-new-app) приложение сборки.</span><span class="sxs-lookup"><span data-stu-id="4d95d-235">[Start by uploading](http://support.hockeyapp.net/kb/app-management-2/how-to-create-a-new-app) your build app.</span></span> <span data-ttu-id="4d95d-236">Войдите в службу [HockeyApp](https://rink.hockeyapp.net) на компьютере для разработки.</span><span class="sxs-lookup"><span data-stu-id="4d95d-236">Then, sign in to [HockeyApp](https://rink.hockeyapp.net) from your development machine.</span></span> <span data-ttu-id="4d95d-237">На панели мониторинга разработчика щелкните **New App**(Создать приложение) и перетащите файлы сборки в окно.</span><span class="sxs-lookup"><span data-stu-id="4d95d-237">On the developer dashboard, click **New App**, and then drag the built files onto the window.</span></span> <span data-ttu-id="4d95d-238">(Позже в службе сборки можно настроить автоматическое выполнение этой задачи.)</span><span class="sxs-lookup"><span data-stu-id="4d95d-238">(Later, you can automate your build service to do this.)</span></span>

<span data-ttu-id="4d95d-239">Вы перейдете на панель мониторинга приложения.</span><span class="sxs-lookup"><span data-stu-id="4d95d-239">Now, you're in your app dashboard.</span></span>

![Вкладка "Обзор" на панели мониторинга приложения](./media/iot-solution-build-system/image2.png)

<span data-ttu-id="4d95d-241">Повторите этот процесс для каждой платформы, на которой работает приложение.</span><span class="sxs-lookup"><span data-stu-id="4d95d-241">Repeat the process for each platform that your app runs on.</span></span> <span data-ttu-id="4d95d-242">После этого вы можете сделать следующее:</span><span class="sxs-lookup"><span data-stu-id="4d95d-242">Then, you can do the following:</span></span>

* <span data-ttu-id="4d95d-243">Используйте значение параметра [App Id](http://support.hockeyapp.net/kb/app-management-2/how-to-find-the-app-id) (Идентификатор приложения) на панели мониторинга, чтобы получать данные о сбоях и отзывы о своем приложении.</span><span class="sxs-lookup"><span data-stu-id="4d95d-243">Use the [app ID](http://support.hockeyapp.net/kb/app-management-2/how-to-find-the-app-id) from the dashboard to send crash data and feedback from your app.</span></span> <span data-ttu-id="4d95d-244">В MyDriving обновите идентификаторы в файле src/MobileApps/MyDriving/MyDriving.Utils/Logger.cs.</span><span class="sxs-lookup"><span data-stu-id="4d95d-244">In MyDriving, update the IDs in src/MobileApps/MyDriving/MyDriving.Utils/Logger.cs.</span></span>
* <span data-ttu-id="4d95d-245">[Пригласите тестовых пользователей](http://support.hockeyapp.net/kb/app-management-2/how-to-invite-beta-testers).</span><span class="sxs-lookup"><span data-stu-id="4d95d-245">[Invite test users](http://support.hockeyapp.net/kb/app-management-2/how-to-invite-beta-testers).</span></span> <span data-ttu-id="4d95d-246">Для этого им нужно отправить URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="4d95d-246">You get a URL to recruit testers users.</span></span> <span data-ttu-id="4d95d-247">Они смогут зарегистрироваться в вашей группе, скачать приложение и отправить отзыв.</span><span class="sxs-lookup"><span data-stu-id="4d95d-247">They'll be able to sign up for your team, download the app, and send you feedback.</span></span>
* <span data-ttu-id="4d95d-248">Если вам нужна более открытая бета-версия, задайте общее распространение.</span><span class="sxs-lookup"><span data-stu-id="4d95d-248">If you'd prefer a more open beta release, set the distribution to public.</span></span> <span data-ttu-id="4d95d-249">Щелкните **Manage App**(Управление приложением) > **Distribution**(Распространение) > **Download = Public** (Общедоступное скачивание).</span><span class="sxs-lookup"><span data-stu-id="4d95d-249">Click **Manage App** > **Distribution** > **Download = Public**.</span></span> <span data-ttu-id="4d95d-250">Теперь все пользователи могут скачать приложение и отправить отзыв о нем. Если вы опубликуете новую версию, они увидят соответствующее уведомление.</span><span class="sxs-lookup"><span data-stu-id="4d95d-250">Now anyone can download your app and send you feedback, and they'll see a notification when you post a new version.</span></span> <span data-ttu-id="4d95d-251">Кроме того, они также могут отправить вам отчеты о сбоях.</span><span class="sxs-lookup"><span data-stu-id="4d95d-251">You might get some crash reports from them too.</span></span>
  
   ![Группы на панели мониторинга](./media/iot-solution-build-system/image3.png)
* <span data-ttu-id="4d95d-253">[Свяжите отчеты о сбоях с Visual Studio Team Services](http://support.hockeyapp.net/kb/third-party-bug-trackers-services-and-webhooks/how-to-use-hockeyapp-with-visual-studio-team-services-vsts-or-team-foundation-server-tfs).</span><span class="sxs-lookup"><span data-stu-id="4d95d-253">[Link crash reports to Visual Studio Team Services](http://support.hockeyapp.net/kb/third-party-bug-trackers-services-and-webhooks/how-to-use-hockeyapp-with-visual-studio-team-services-vsts-or-team-foundation-server-tfs).</span></span> <span data-ttu-id="4d95d-254">Щелкните **Manage App**(Управление приложением) > **Visual Studio Team Services**.</span><span class="sxs-lookup"><span data-stu-id="4d95d-254">Click **Manage App** > **Visual Studio Team Services**.</span></span> <span data-ttu-id="4d95d-255">Служба HockeyApp может автоматически создавать рабочие элементы в Team Services при получении отчетов о сбоях или отзывов.</span><span class="sxs-lookup"><span data-stu-id="4d95d-255">HockeyApp can automatically create work items in Team Services when there are crash reports or when feedback is received.</span></span>

<span data-ttu-id="4d95d-256">Прочтите дополнительные сведения на [сайте HockeyApp](https://hockeyapp.net).</span><span class="sxs-lookup"><span data-stu-id="4d95d-256">Read more at the [HockeyApp site](https://hockeyapp.net).</span></span>

## <a name="test-the-mobile-app-on-xamarin-test-cloud"></a><span data-ttu-id="4d95d-257">Тестирование мобильного приложения в тестовом облаке Xamarin</span><span class="sxs-lookup"><span data-stu-id="4d95d-257">Test the mobile app on Xamarin Test Cloud</span></span>
<span data-ttu-id="4d95d-258">[Тестовое облако Xamarin](https://developer.xamarin.com/guides/testcloud/introduction-to-test-cloud/) позволяет автоматизировать тестирование пользовательского интерфейса на реальных устройствах в облаке.</span><span class="sxs-lookup"><span data-stu-id="4d95d-258">[Xamarin Test Cloud](https://developer.xamarin.com/guides/testcloud/introduction-to-test-cloud/) automates UI testing on real devices in the cloud.</span></span> <span data-ttu-id="4d95d-259">При этом вы используете платформу NUnit, чтобы написать тесты, которые запускают ваше приложение через пользовательский интерфейс.</span><span class="sxs-lookup"><span data-stu-id="4d95d-259">By using the NUnit framework, you write tests that run your app through the user interface.</span></span>

<span data-ttu-id="4d95d-260">Чтобы использовать Xamarin, внедрите пакет SDK [Xamarin.UITests](https://developer.xamarin.com/guides/testcloud/uitest/intro-to-uitest/) в приложение. Он поставляется как пакет NuGet.</span><span class="sxs-lookup"><span data-stu-id="4d95d-260">To use Xamarin, you incorporate the [Xamarin.UITests](https://developer.xamarin.com/guides/testcloud/uitest/intro-to-uitest/) SDK into your app, which comes as a NuGet package.</span></span> <span data-ttu-id="4d95d-261">Этот пакет включен в состав демонстрационного приложения и новых создаваемых проектов тестирования с шаблонами Xamarin.</span><span class="sxs-lookup"><span data-stu-id="4d95d-261">You'll find it in the demo app, and it's included when you create new test projects with the Xamarin templates.</span></span>

![Где в интерфейсе найти кроссплатформенный пакет SDK](./media/iot-solution-build-system/image4.png)

<span data-ttu-id="4d95d-263">Пример тестового проекта включен в состав приложения в репозитории.</span><span class="sxs-lookup"><span data-stu-id="4d95d-263">An example test project is included with the app in the repository.</span></span> <span data-ttu-id="4d95d-264">Ищите его в каталоге [src](https://github.com/Azure-Samples/MyDriving/tree/master/src)/MobileApps/[MyDriving](https://github.com/Azure-Samples/MyDriving/tree/master/src/MobileApps/MyDriving)/MyDriving.UITests/ в [MyDriving](https://github.com/Azure-Samples/MyDriving/tree/master/src/MobileAppService).</span><span class="sxs-lookup"><span data-stu-id="4d95d-264">In [MyDriving](https://github.com/Azure-Samples/MyDriving/tree/master/src/MobileAppService), look under [src](https://github.com/Azure-Samples/MyDriving/tree/master/src)/MobileApps/[MyDriving](https://github.com/Azure-Samples/MyDriving/tree/master/src/MobileApps/MyDriving)/MyDriving.UITests/.</span></span>

<span data-ttu-id="4d95d-265">При использовании сборки Visual Studio Team Services можно написать модульные тесты пользовательского интерфейса Xamarin и запустить их как часть этой сборки.</span><span class="sxs-lookup"><span data-stu-id="4d95d-265">If you use a Visual Studio Team Services build, it's easy to write Xamarin UI unit tests and run them as part of your build.</span></span>

## <a name="deploy-azure-services"></a><span data-ttu-id="4d95d-266">Развертывание служб Azure</span><span class="sxs-lookup"><span data-stu-id="4d95d-266">Deploy Azure services</span></span>
<span data-ttu-id="4d95d-267">Подробные указания по автоматическому развертыванию служб Azure и служб сборки Team Services см. в файле **scripts/README.md**.</span><span class="sxs-lookup"><span data-stu-id="4d95d-267">To perform an automatic deployment of Azure services and Team Services build services, refer to the detailed instructions in **scripts/README.md**.</span></span>

<span data-ttu-id="4d95d-268">Microsoft Azure предоставляет множество различных служб, предназначенных для создания облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="4d95d-268">Microsoft Azure provides a wealth of different services that you can use to build cloud applications.</span></span> <span data-ttu-id="4d95d-269">Несмотря на то, что многие из них можно использовать по отдельности (например, службу приложений и веб-приложения), они более эффективны, если их объединить в одну интегрированную систему, например такую, которая используется в MyDriving.</span><span class="sxs-lookup"><span data-stu-id="4d95d-269">Although many can be used individually (such as App Service/Web Apps), they're at their best when they're interconnected to form an integrated system like that we use in MyDriving.</span></span>

<span data-ttu-id="4d95d-270">Можно создать службы Azure и установить связи между ними вручную, но гораздо быстрее и надежнее использовать шаблоны Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="4d95d-270">It's possible to create and interconnect Azure services manually, but it's much quicker and more reliable to use Azure Resource Manager templates.</span></span> <span data-ttu-id="4d95d-271">[Resource Manager](../azure-resource-manager/resource-group-overview.md) автоматизирует развертывание ресурсов решения и устанавливает между ними взаимосвязи.</span><span class="sxs-lookup"><span data-stu-id="4d95d-271">[Resource Manager](../azure-resource-manager/resource-group-overview.md) automates the deployment of a solution's resources and making the interconnections between them.</span></span>

<span data-ttu-id="4d95d-272">Шаблон для системы MyDriving находится в репозитории GitHub в разделе [scripts/ARM](https://github.com/Azure-Samples/MyDriving/tree/master/scripts/ARM).</span><span class="sxs-lookup"><span data-stu-id="4d95d-272">You'll find the template for the MyDriving system in the GitHub repository under [scripts/ARM](https://github.com/Azure-Samples/MyDriving/tree/master/scripts/ARM).</span></span> <span data-ttu-id="4d95d-273">Он обеспечивает точное комплексное представление взаимосвязи различных служб в архитектуре.</span><span class="sxs-lookup"><span data-stu-id="4d95d-273">It provides a comprehensive and concise view of how the different services in our architecture are interconnected.</span></span> <span data-ttu-id="4d95d-274">Все это подробно описано в [справочном руководстве по MyDriving](http://aka.ms/mydrivingdocs). Тем не менее в самом шаблоне также содержится много полезных сведений.</span><span class="sxs-lookup"><span data-stu-id="4d95d-274">We explain all these in detail in the [MyDriving Reference Guide](http://aka.ms/mydrivingdocs), but you can learn a lot just by reading through the template itself.</span></span>

> [!NOTE]
> <span data-ttu-id="4d95d-275">Большинство служб Azure платные. Их тариф зависит от ценовой категории.</span><span class="sxs-lookup"><span data-stu-id="4d95d-275">Most Azure services have an associated cost, depending on the pricing tier.</span></span> <span data-ttu-id="4d95d-276">Если вы только начинаете знакомство с Azure, вы можете [опробовать возможности Azure бесплатно](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="4d95d-276">If you're new to Azure, you can [try it out for free](https://azure.microsoft.com/free/).</span></span> <span data-ttu-id="4d95d-277">Однако если вы не планируете использовать определенные компоненты в системе MyDriving, удалите их, иначе с вас будет взиматься плата.</span><span class="sxs-lookup"><span data-stu-id="4d95d-277">However, if you don't plan to use certain components in the MyDriving system, be sure to remove them to avoid incurring costs.</span></span> <span data-ttu-id="4d95d-278">В разделе "Оценка эксплуатационных расходов" далее в этой статье представлена сводка типичных расходов на службы.</span><span class="sxs-lookup"><span data-stu-id="4d95d-278">The "Estimate operational costs" section later in this article provides a summary of typical service expenses.</span></span>
> 
> 

### <a name="edit-the-template"></a><span data-ttu-id="4d95d-279">Изменение шаблона</span><span class="sxs-lookup"><span data-stu-id="4d95d-279">Edit the template</span></span>
<span data-ttu-id="4d95d-280">Прежде чем приступить к настройке развертывания, например удалить ненужные компоненты или добавить дополнительные компоненты, создайте копии файлов scenario\_complete.params.json и scenario\_complete.json, в которые необходимо внести изменения.</span><span class="sxs-lookup"><span data-stu-id="4d95d-280">To customize your deployment, perhaps to remove unneeded components or to add others, first make a copies of scenario\_complete.params.json and scenario\_complete.json in which to make changes.</span></span>

<span data-ttu-id="4d95d-281">В файле scenario\_complete.params.json можно переопределить различные значения по умолчанию, такие как SKU службы или тип репликации хранилища, как описано в таблице ниже.</span><span class="sxs-lookup"><span data-stu-id="4d95d-281">You can use the scenario\_complete.params.json file to override various default values, such as the service SKU or the storage replication type, as described in the following table.</span></span> <span data-ttu-id="4d95d-282">Значения по умолчанию соответствуют вариантам с наименьшей стоимостью.</span><span class="sxs-lookup"><span data-stu-id="4d95d-282">The default values select the lowest-cost options.</span></span>

| <span data-ttu-id="4d95d-283">**Параметр**</span><span class="sxs-lookup"><span data-stu-id="4d95d-283">**Parameter**</span></span> | <span data-ttu-id="4d95d-284">**Описание**</span><span class="sxs-lookup"><span data-stu-id="4d95d-284">**Description**</span></span> | <span data-ttu-id="4d95d-285">**Значение по умолчанию**</span><span class="sxs-lookup"><span data-stu-id="4d95d-285">**Default value**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4d95d-286">SKU Центра Интернета вещей</span><span class="sxs-lookup"><span data-stu-id="4d95d-286">IoT Hub SKU</span></span> |<span data-ttu-id="4d95d-287">Уровень службы Центра Интернета вещей Azure</span><span class="sxs-lookup"><span data-stu-id="4d95d-287">Tier for Azure IoT Hub service</span></span> |<span data-ttu-id="4d95d-288">F1</span><span class="sxs-lookup"><span data-stu-id="4d95d-288">F1</span></span> |
| <span data-ttu-id="4d95d-289">Storage Account Type</span><span class="sxs-lookup"><span data-stu-id="4d95d-289">Storage Account Type</span></span> |<span data-ttu-id="4d95d-290">Тип репликации хранилища</span><span class="sxs-lookup"><span data-stu-id="4d95d-290">Storage replication type</span></span> |<span data-ttu-id="4d95d-291">Standard LRS</span><span class="sxs-lookup"><span data-stu-id="4d95d-291">Standard LRS</span></span> |
| <span data-ttu-id="4d95d-292">SQL Service Objective</span><span class="sxs-lookup"><span data-stu-id="4d95d-292">SQL Service Objective</span></span> |<span data-ttu-id="4d95d-293">Использование слотов выдачи</span><span class="sxs-lookup"><span data-stu-id="4d95d-293">Concurrency slot consumption</span></span> |<span data-ttu-id="4d95d-294">DW100</span><span class="sxs-lookup"><span data-stu-id="4d95d-294">DW100</span></span> |
| <span data-ttu-id="4d95d-295">Hosting Plan SKU</span><span class="sxs-lookup"><span data-stu-id="4d95d-295">Hosting Plan SKU</span></span> |<span data-ttu-id="4d95d-296">План обслуживания службы приложений</span><span class="sxs-lookup"><span data-stu-id="4d95d-296">Service plan for App Service</span></span> |<span data-ttu-id="4d95d-297">F1</span><span class="sxs-lookup"><span data-stu-id="4d95d-297">F1</span></span> |

<span data-ttu-id="4d95d-298">В файле scenario\_complete.json сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="4d95d-298">In scenario\_complete.json:</span></span>

* <span data-ttu-id="4d95d-299">Найдите значение baseName и измените его на имя, которое вы хотите использовать.</span><span class="sxs-lookup"><span data-stu-id="4d95d-299">Search for "baseName" and change it to a name that you prefer.</span></span>
* <span data-ttu-id="4d95d-300">Найдите значения Create.</span><span class="sxs-lookup"><span data-stu-id="4d95d-300">Search for "Create".</span></span> <span data-ttu-id="4d95d-301">Каждый такой раздел создает ресурс.</span><span class="sxs-lookup"><span data-stu-id="4d95d-301">Each of these sections creates a resource.</span></span>
* <span data-ttu-id="4d95d-302">Задайте подходящие значения для параметров sqlServerAdminLogin и sqlServerAdminPassword.</span><span class="sxs-lookup"><span data-stu-id="4d95d-302">Set sqlServerAdminLogin and sqlServerAdminPassword to suitable values.</span></span>
* <span data-ttu-id="4d95d-303">Прежде чем удалить раздел, который создает ресурс, проверьте, нет ли в нем зависимостей. Для этого просмотрите, не указано ли его имя еще где-либо в файле.</span><span class="sxs-lookup"><span data-stu-id="4d95d-303">Before you delete a section that creates a resource, check whether it has dependents by searching for its name elsewhere in the file.</span></span> <span data-ttu-id="4d95d-304">Обратите внимание, что каждый раздел, который создает службу, содержит раздел *dependsOn*, где перечислены ее зависимости.</span><span class="sxs-lookup"><span data-stu-id="4d95d-304">Note that each section that creates a service includes a *dependsOn* section that lists its dependencies.</span></span>

<span data-ttu-id="4d95d-305">Вот что настраивает шаблон.</span><span class="sxs-lookup"><span data-stu-id="4d95d-305">Here's what the template configures.</span></span> <span data-ttu-id="4d95d-306">Дополнительные сведения см. в [справочном руководстве](http://aka.ms/mydrivingdocs).</span><span class="sxs-lookup"><span data-stu-id="4d95d-306">Details are in the [Reference Guide](http://aka.ms/mydrivingdocs).</span></span>

| <span data-ttu-id="4d95d-307">**Служба**</span><span class="sxs-lookup"><span data-stu-id="4d95d-307">**Service**</span></span> | <span data-ttu-id="4d95d-308">**Описание и объяснение**</span><span class="sxs-lookup"><span data-stu-id="4d95d-308">**Description and details**</span></span> |
| --- | --- |
| <span data-ttu-id="4d95d-309">учетные записи хранения;</span><span class="sxs-lookup"><span data-stu-id="4d95d-309">Storage accounts</span></span> |<span data-ttu-id="4d95d-310">Этот шаблон создает три учетные записи:</span><span class="sxs-lookup"><span data-stu-id="4d95d-310">The template creates three accounts:</span></span> |
| <span data-ttu-id="4d95d-311">— базы данных SQL, которая получает сводные данные телеметрии из Stream Analytics и выполняет роль резервного хранилища для таблиц службы приложений Azure, которые предоставляют эти данные через конечные точки API;</span><span class="sxs-lookup"><span data-stu-id="4d95d-311">-   A SQL database that receives aggregated telemetry from Stream Analytics, and serves as the backing store for Azure App Service tables that expose this data through API endpoints.</span></span> | |
| <span data-ttu-id="4d95d-312">— хранилища BLOB-объектов, которое накапливает архивные данные, обрабатываемые HDInisight, из другого задания Stream Analytics;</span><span class="sxs-lookup"><span data-stu-id="4d95d-312">-   Blob storage that accumulates historical data from another Stream Analytics job, to be processed by HDInsight.</span></span> | |
| <span data-ttu-id="4d95d-313">— базы данных SQL, которая получает обработанные HDInsight данные для использования с Power BI.</span><span class="sxs-lookup"><span data-stu-id="4d95d-313">-   A SQL database that receives results processed by HDInsight for use with Power BI.</span></span> | |
| <span data-ttu-id="4d95d-314">Центр Интернета вещей Azure</span><span class="sxs-lookup"><span data-stu-id="4d95d-314">Azure IoT Hub</span></span> |<span data-ttu-id="4d95d-315">Эта служба устанавливает двустороннюю связь с каждым подключенным устройством.</span><span class="sxs-lookup"><span data-stu-id="4d95d-315">Establishes a two-way connection to each connected device.</span></span> <span data-ttu-id="4d95d-316">Мобильное приложение в решении MyDriving действует как магистральный шлюз для отправки данных в Центр Интернета вещей Azure.</span><span class="sxs-lookup"><span data-stu-id="4d95d-316">In the MyDriving solution, the mobile app acts as a field gateway to send data to Azure IoT Hub.</span></span> <span data-ttu-id="4d95d-317">В этом случае Центр Интернета вещей Azure выступает в качестве источника входных данных для Stream Analytics.</span><span class="sxs-lookup"><span data-stu-id="4d95d-317">Azure IoT Hub then serves as an input to Stream Analytics.</span></span> |
| <span data-ttu-id="4d95d-318">Концентраторы событий Azure</span><span class="sxs-lookup"><span data-stu-id="4d95d-318">Azure Event Hubs</span></span> |<span data-ttu-id="4d95d-319">Сюда поступают выходные данные задания Stream Analytics и помещаются в очередь для расширений, созданных в Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="4d95d-319">An output for a Stream Analytics job that queues the output to extensions that are created with Azure Service Fabric.</span></span> |
| <span data-ttu-id="4d95d-320">Хранилище данных SQL Azure</span><span class="sxs-lookup"><span data-stu-id="4d95d-320">Azure SQL Data Warehouse</span></span> | |
| <span data-ttu-id="4d95d-321">Задания Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="4d95d-321">Stream Analytics jobs</span></span> |<span data-ttu-id="4d95d-322">Эти задания соединяют входные и выходные данные с запросом, который используется для объединения данных реального времени и архивных данных для API службы приложений, машинного обучения Azure, расширений и Power BI.</span><span class="sxs-lookup"><span data-stu-id="4d95d-322">Connect inputs and outputs with a query, which is used to aggregate both real-time and historical data for the App Service APIs, Azure Machine Learning, extensions, and Power BI.</span></span> |
| <span data-ttu-id="4d95d-323">Рабочая область машинного обучения</span><span class="sxs-lookup"><span data-stu-id="4d95d-323">Machine Learning workspace</span></span> |<span data-ttu-id="4d95d-324">Включает в себя эксперименты, код R и службу API.</span><span class="sxs-lookup"><span data-stu-id="4d95d-324">Includes experiments, R code, and API service.</span></span> |
| <span data-ttu-id="4d95d-325">Фабрика данных Azure</span><span class="sxs-lookup"><span data-stu-id="4d95d-325">Azure Data Factory</span></span> |<span data-ttu-id="4d95d-326">Эта служба используется для планового повторного обучения механизма машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="4d95d-326">Scheduled Machine Learning retraining.</span></span> |
| <span data-ttu-id="4d95d-327">План размещения Service Fabric</span><span class="sxs-lookup"><span data-stu-id="4d95d-327">Service Fabric hosting plan</span></span> |<span data-ttu-id="4d95d-328">Это план для расширений.</span><span class="sxs-lookup"><span data-stu-id="4d95d-328">For extensions.</span></span> |
| <span data-ttu-id="4d95d-329">Служба приложений (мобильное приложение)</span><span class="sxs-lookup"><span data-stu-id="4d95d-329">App Service (“Mobile App”)</span></span> |<span data-ttu-id="4d95d-330">Эта служба размещает проект API мобильных приложений, который предоставляет конечные точки для мобильного приложения.</span><span class="sxs-lookup"><span data-stu-id="4d95d-330">Hosts the Mobile Apps API project that provides endpoints for the mobile app.</span></span> <span data-ttu-id="4d95d-331">Код API необходимо развернуть в службе приложений из Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4d95d-331">The API code must be deployed to App Service from Visual Studio.</span></span> |
| <span data-ttu-id="4d95d-332">Правила оповещения</span><span class="sxs-lookup"><span data-stu-id="4d95d-332">Alert rules</span></span> |<span data-ttu-id="4d95d-333">Эти правила можно настроить таким образом, чтобы в случае упоминания сбоев в ответах приложений вам отправлялось электронное сообщение.</span><span class="sxs-lookup"><span data-stu-id="4d95d-333">Sends you email if the app responses indicate failures.</span></span> |
| <span data-ttu-id="4d95d-334">Application Insights</span><span class="sxs-lookup"><span data-stu-id="4d95d-334">Application Insights</span></span> |<span data-ttu-id="4d95d-335">Эта служба предназначена для мониторинга производительности API в службе приложений.</span><span class="sxs-lookup"><span data-stu-id="4d95d-335">For monitoring performance of the APIs in App Service.</span></span> <span data-ttu-id="4d95d-336">Для этого необходимо настроить подключение в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4d95d-336">You have to configure the connection in Visual Studio.</span></span> |
| <span data-ttu-id="4d95d-337">Хранилище ключей Azure</span><span class="sxs-lookup"><span data-stu-id="4d95d-337">Azure Key Vault</span></span> |<span data-ttu-id="4d95d-338">В этом хранилище содержится сертификат кластера веб-службы.</span><span class="sxs-lookup"><span data-stu-id="4d95d-338">For saving the web service cluster certificate.</span></span> |

### <a name="run-the-template"></a><span data-ttu-id="4d95d-339">Запуск шаблона</span><span class="sxs-lookup"><span data-stu-id="4d95d-339">Run the template</span></span>
<span data-ttu-id="4d95d-340">Подробные указания по запуску шаблона см. в файле **scripts/README.md**.</span><span class="sxs-lookup"><span data-stu-id="4d95d-340">In **scripts/README.md**, there are detailed instructions for running the template.</span></span>

<span data-ttu-id="4d95d-341">Чтобы подготовить все эти службы в собственной учетной записи Azure при помощи сценария, выполните одно из следующих действий.</span><span class="sxs-lookup"><span data-stu-id="4d95d-341">To provision all these services in your own Azure account by using the script, do one of the following:</span></span>

* <span data-ttu-id="4d95d-342">Используйте PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4d95d-342">Use PowerShell:</span></span>
  
  ```
  
  cd scripts/PowerShell;
  deploy.ps1 *location* *resourceGroupName*
  ```
  
  * <span data-ttu-id="4d95d-343">*location* — это [расположение Azure](https://azure.microsoft.com/regions/), например `North Europe` или `West US`.</span><span class="sxs-lookup"><span data-stu-id="4d95d-343">*location* is the [Azure location](https://azure.microsoft.com/regions/), such as `North Europe` or `West US`.</span></span> <span data-ttu-id="4d95d-344">Список доступных расположений можно найти с помощью команды `Get-AzureLocation` .</span><span class="sxs-lookup"><span data-stu-id="4d95d-344">Use `Get-AzureLocation` to find a list of available locations.</span></span>
  * <span data-ttu-id="4d95d-345">*resourceGroupName* — имя группы, которой будут принадлежать все ресурсы.</span><span class="sxs-lookup"><span data-stu-id="4d95d-345">*resourceGroupName* is the name that you want to give to the group that all the resources will belong to.</span></span> <span data-ttu-id="4d95d-346">По завершении работы с ресурсами вы сможете удалить их вместе с группой в рамках одной операции.</span><span class="sxs-lookup"><span data-stu-id="4d95d-346">When you're finished with the resources, you can delete them all together by deleting this group.</span></span>
* <span data-ttu-id="4d95d-347">Запустите DeploymentScripts/Bash/deploy.sh с помощью Bash.</span><span class="sxs-lookup"><span data-stu-id="4d95d-347">Run DeploymentScripts/Bash/deploy.sh with Bash.</span></span>
* <span data-ttu-id="4d95d-348">Откройте решение Visual Studio DeploymentScripts/VS/DeployARM.sln и выполните его сборку.</span><span class="sxs-lookup"><span data-stu-id="4d95d-348">Open and build the Visual Studio solution DeploymentScripts/VS/DeployARM.sln.</span></span>

<span data-ttu-id="4d95d-349">Обратите внимание, что каждый раз при выполнении шаблона создается набор ресурсов с новыми именами.</span><span class="sxs-lookup"><span data-stu-id="4d95d-349">Note that each time the template is run, it creates a new set of resources with new names.</span></span> <span data-ttu-id="4d95d-350">Чтобы удалить эти ресурсы, перейдите на портал и удалите группу ресурсов.</span><span class="sxs-lookup"><span data-stu-id="4d95d-350">To delete the resources, go to the portal and delete the resource group.</span></span>

<span data-ttu-id="4d95d-351">Если скрипт по какой-либо причине завершится ошибкой, перезапустите его.</span><span class="sxs-lookup"><span data-stu-id="4d95d-351">If the script fails for any reason, you can re-run it.</span></span>

<span data-ttu-id="4d95d-352">С помощью скрипта можно настроить непрерывную интеграцию в Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="4d95d-352">The script gives you the option of configuring continuous integration in Visual Studio Team Services.</span></span> <span data-ttu-id="4d95d-353">Если вы установили проект Team Services, у вас будет URL-адрес https://yourAccountName.visualstudio.com.</span><span class="sxs-lookup"><span data-stu-id="4d95d-353">If you have set up a Team Services project, you'll have a URL: https://yourAccountName.visualstudio.com.</span></span> <span data-ttu-id="4d95d-354">Введите полный URL-адрес при запросе.</span><span class="sxs-lookup"><span data-stu-id="4d95d-354">Enter the complete URL when you're asked.</span></span> <span data-ttu-id="4d95d-355">Проекту Team Services можно присвоить как новое, так и существующее имя.</span><span class="sxs-lookup"><span data-stu-id="4d95d-355">You can give it a new or existing name for a Team Services project.</span></span>

## <a name="set-up-build-and-test-definitions-in-visual-studio-team-services"></a><span data-ttu-id="4d95d-356">Настройка определений сборки и тестирования в Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="4d95d-356">Set up build and test definitions in Visual Studio Team Services</span></span>
<span data-ttu-id="4d95d-357">В рамках это проекта Team Services главным образом используется из-за своих функций создания и тестирования.</span><span class="sxs-lookup"><span data-stu-id="4d95d-357">We use Team Services on this project mostly for its build and test features.</span></span> <span data-ttu-id="4d95d-358">Но эта среда также предоставляет такие возможности для совместной работы, как управление задачами с помощью канбан-досок, функция проверки кода, интегрированная с задачами и системой управления версиями, а также условные сборки.</span><span class="sxs-lookup"><span data-stu-id="4d95d-358">But, it also provides excellent collaboration support, such as task management with Kanban boards, code review integrated with tasks and source control, and gated builds.</span></span> <span data-ttu-id="4d95d-359">Кроме того, службы Team Services поддерживают интеграцию с другими инструментами, например GitHub, Xamarin, HockeyApp и, конечно же, Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4d95d-359">It integrates well with other tools such as GitHub, Xamarin, HockeyApp, and of course, Visual Studio.</span></span> <span data-ttu-id="4d95d-360">К ней можно получить доступ через веб-интерфейс или Visual Studio (как вам удобнее в определенный момент).</span><span class="sxs-lookup"><span data-stu-id="4d95d-360">You can access it through the web interface or through Visual Studio, whichever is more convenient at any moment.</span></span>

<span data-ttu-id="4d95d-361">На этапе создания определений сборки и выпуска используются разнообразные подключаемые службы, доступные в [Marketplace](https://marketplace.visualstudio.com/VSTS)для Team Services.</span><span class="sxs-lookup"><span data-stu-id="4d95d-361">The steps in the build and release definitions use a variety of plug-in services that are available in the Team Services [Marketplace](https://marketplace.visualstudio.com/VSTS).</span></span> <span data-ttu-id="4d95d-362">Помимо основных служебных программ для использования командной строки и копирования файлов, доступны службы, которые вызывают сборки Xamarin, Android и других поставщиков, а также подключаются к HockeyApp.</span><span class="sxs-lookup"><span data-stu-id="4d95d-362">In addition to basic utilities to run command lines or copy files, there are services that invoke builds by Xamarin, Android, and other vendors, and that connect to HockeyApp.</span></span>

![Параметры сборки в Team Services](./media/iot-solution-build-system/image5.png)

### <a name="build-definitions"></a><span data-ttu-id="4d95d-364">Определения сборки</span><span class="sxs-lookup"><span data-stu-id="4d95d-364">Build definitions</span></span>
<span data-ttu-id="4d95d-365">У нас есть определения сборки для каждой из основных целей.</span><span class="sxs-lookup"><span data-stu-id="4d95d-365">We have build definitions for each of the main targets.</span></span> <span data-ttu-id="4d95d-366">У нас также есть отклонения для тестирования компонентов и регрессионного тестирования.</span><span class="sxs-lookup"><span data-stu-id="4d95d-366">We also have variations for feature and regression testing.</span></span> <span data-ttu-id="4d95d-367">Таким образом, мы имеем:</span><span class="sxs-lookup"><span data-stu-id="4d95d-367">That gives us:</span></span>

* <span data-ttu-id="4d95d-368">MyDriving.Services (серверное веб-приложение для мобильного приложения);</span><span class="sxs-lookup"><span data-stu-id="4d95d-368">MyDriving.Services (the back-end web app for the mobile app)</span></span>
* <span data-ttu-id="4d95d-369">MyDriving.Xamarin.Android:</span><span class="sxs-lookup"><span data-stu-id="4d95d-369">MyDriving.Xamarin.Android</span></span>
  
  * <span data-ttu-id="4d95d-370">MyDriving.Xamarin.Android-Feature;</span><span class="sxs-lookup"><span data-stu-id="4d95d-370">MyDriving.Xamarin.Android-Feature</span></span>
  * <span data-ttu-id="4d95d-371">MyDriving.Xamarin.Android-Regression.</span><span class="sxs-lookup"><span data-stu-id="4d95d-371">MyDriving.Xamarin.Android-Regression</span></span>
* <span data-ttu-id="4d95d-372">MyDriving.Xamarin.iOS:</span><span class="sxs-lookup"><span data-stu-id="4d95d-372">MyDriving.Xamarin.iOS</span></span>
  
  * <span data-ttu-id="4d95d-373">MyDriving.Xamarin.iOS-Feature;</span><span class="sxs-lookup"><span data-stu-id="4d95d-373">MyDriving.Xamarin.iOS-Feature</span></span>
  * <span data-ttu-id="4d95d-374">MyDriving.Xamarin.iOS-Regression.</span><span class="sxs-lookup"><span data-stu-id="4d95d-374">MyDriving.Xamarin.iOS-Regression</span></span>
* <span data-ttu-id="4d95d-375">MyDriving.Xamarin.UWP:</span><span class="sxs-lookup"><span data-stu-id="4d95d-375">MyDriving.Xamarin.UWP</span></span>
  
  * <span data-ttu-id="4d95d-376">MyDriving.Xamarin.UWP-Feature;</span><span class="sxs-lookup"><span data-stu-id="4d95d-376">MyDriving.Xamarin.UWP-Feature</span></span>
  * <span data-ttu-id="4d95d-377">MyDriving.Xamarin.UWP-Regression.</span><span class="sxs-lookup"><span data-stu-id="4d95d-377">MyDriving.Xamarin.UWP-Regression</span></span>

<span data-ttu-id="4d95d-378">Полное описание нашей конфигурации см. в разделе 4.7 о настройке сборки и выпуска [справочного руководства по MyDriving](http://aka.ms/mydrivingdocs).</span><span class="sxs-lookup"><span data-stu-id="4d95d-378">If you want to see the full details of our configuration, see section 4.7 of the [MyDriving Reference Guide](http://aka.ms/mydrivingdocs), "Build and Release Configuration."</span></span> <span data-ttu-id="4d95d-379">Там представлены общие шаги настройки.</span><span class="sxs-lookup"><span data-stu-id="4d95d-379">They follow the same general pattern.</span></span> <span data-ttu-id="4d95d-380">Сценарий:</span><span class="sxs-lookup"><span data-stu-id="4d95d-380">The script:</span></span>

1. <span data-ttu-id="4d95d-381">Восстанавливает пакет NuGet.</span><span class="sxs-lookup"><span data-stu-id="4d95d-381">Restores the NuGet package.</span></span> <span data-ttu-id="4d95d-382">Мы не храним скомпилированный код в репозитории, поэтому в начале каждой сборки необходимо восстановить требуемые пакеты NuGet.</span><span class="sxs-lookup"><span data-stu-id="4d95d-382">We don't keep compiled code in the repository, so the first steps of each build are to restore the required NuGet packages.</span></span>
2. <span data-ttu-id="4d95d-383">Активирует лицензию.</span><span class="sxs-lookup"><span data-stu-id="4d95d-383">Activates the license.</span></span> <span data-ttu-id="4d95d-384">Сборка выполняется в облаке, поэтому нам нужно активировать лицензию (в частности, для службы сборки Xamarin) на текущем компьютере сборки.</span><span class="sxs-lookup"><span data-stu-id="4d95d-384">The build is performed in the cloud, so where we need a license--in particular, for the Xamarin build service--we have to activate our license on the current build machine.</span></span> <span data-ttu-id="4d95d-385">Затем мы сразу же деактивируем лицензию, чтобы ее можно было использовать на другом компьютере.</span><span class="sxs-lookup"><span data-stu-id="4d95d-385">Then, we deactivate it immediately afterward, to allow it to be used on another machine.</span></span>
3. <span data-ttu-id="4d95d-386">Выполняет сборку с использованием соответствующей службы.</span><span class="sxs-lookup"><span data-stu-id="4d95d-386">Builds by using the appropriate service.</span></span> <span data-ttu-id="4d95d-387">Мы используем сборки Xamarin для мобильных приложений и сборки Visual Studio для серверной веб-службы.</span><span class="sxs-lookup"><span data-stu-id="4d95d-387">We use Xamarin builds for the mobile apps, and Visual Studio builds for the back-end web service.</span></span>
4. <span data-ttu-id="4d95d-388">Выполняет сборку тестов.</span><span class="sxs-lookup"><span data-stu-id="4d95d-388">Builds tests.</span></span>
5. <span data-ttu-id="4d95d-389">Выполняет тесты</span><span class="sxs-lookup"><span data-stu-id="4d95d-389">Runs tests.</span></span> <span data-ttu-id="4d95d-390">Мы выполним тесты мобильного приложения в тестовом облаке Xamarin.</span><span class="sxs-lookup"><span data-stu-id="4d95d-390">We run the mobile app tests in Xamarin Test Cloud.</span></span>
6. <span data-ttu-id="4d95d-391">Публикует результат выполнения в расположении сброса.</span><span class="sxs-lookup"><span data-stu-id="4d95d-391">Publishes the build result to the drop location.</span></span>

<span data-ttu-id="4d95d-392">Для триггера основных сборок задается непрерывная интеграция.</span><span class="sxs-lookup"><span data-stu-id="4d95d-392">The trigger for the main builds is set to continuous integration.</span></span> <span data-ttu-id="4d95d-393">То есть сборка выполняется каждый раз при записи после изменения кода главной ветви.</span><span class="sxs-lookup"><span data-stu-id="4d95d-393">That is, the build is run every time code is checked in to the master branch.</span></span>

![Интерфейс, в котором устанавливается триггер непрерывной интеграции](./media/iot-solution-build-system/image6.png)

### <a name="release-definitions"></a><span data-ttu-id="4d95d-395">Определения выпуска</span><span class="sxs-lookup"><span data-stu-id="4d95d-395">Release definitions</span></span>
<span data-ttu-id="4d95d-396">Определения выпуска настраиваются практически таким же образом.</span><span class="sxs-lookup"><span data-stu-id="4d95d-396">Release definitions are set up in much the same way.</span></span>

<span data-ttu-id="4d95d-397">Для веб-службы мы задаем развертывание в качестве веб-приложения Azure:</span><span class="sxs-lookup"><span data-stu-id="4d95d-397">For the web service, we set up deployment as an Azure web app:</span></span>

![Интерфейс для настройки развертывания в виде веб-приложения Azure](./media/iot-solution-build-system/image7.png)

<span data-ttu-id="4d95d-399">И мы задаем для триггера выпуска непрерывное развертывание.</span><span class="sxs-lookup"><span data-stu-id="4d95d-399">And we set the release trigger to continuous deployment.</span></span> <span data-ttu-id="4d95d-400">То есть за каждой записью после изменения и успешными результатами сборки следует обновление веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="4d95d-400">That is, every check-in followed by a successful build results in an update to the web app.</span></span>

![Интерфейс для настройки триггер выпуска для непрерывного развертывания](./media/iot-solution-build-system/image8.png)

<span data-ttu-id="4d95d-402">Для мобильных приложений необходимо задать развертывание в HockeyApp.</span><span class="sxs-lookup"><span data-stu-id="4d95d-402">For mobile apps, we deploy to HockeyApp:</span></span>

![Интерфейс для развертывания мобильного приложения в HockeyApp](./media/iot-solution-build-system/image9.png)

## <a name="explore-telemetry-by-using-application-insights"></a><span data-ttu-id="4d95d-404">Просмотр данных телеметрии с помощью Application Insights</span><span class="sxs-lookup"><span data-stu-id="4d95d-404">Explore telemetry by using Application Insights</span></span>
<span data-ttu-id="4d95d-405">[Application Insights](../application-insights/app-insights-overview.md) собирает данные телеметрии о производительности и использовании веб-служб.</span><span class="sxs-lookup"><span data-stu-id="4d95d-405">[Application Insights](../application-insights/app-insights-overview.md) collects telemetry about the performance and usage of your web services.</span></span> <span data-ttu-id="4d95d-406">Пакет SDK для Application Insights отправляет данные телеметрии из службы в ресурс Application Insights в Azure.</span><span class="sxs-lookup"><span data-stu-id="4d95d-406">The Application Insights SDK sends telemetry from the service to the Application Insights resource in Azure.</span></span>

<span data-ttu-id="4d95d-407">Перейдите к ресурсу Application Insights, настроенному с помощью шаблона.</span><span class="sxs-lookup"><span data-stu-id="4d95d-407">Browse to the Application Insights resource that the template set up.</span></span> <span data-ttu-id="4d95d-408">Там можно просматривать диаграммы производительности [проекта службы мобильных приложений](https://github.com/Azure-Samples/MyDriving/tree/master/src/MobileAppService).</span><span class="sxs-lookup"><span data-stu-id="4d95d-408">There, you can explore charts of the performance of your [Mobile App Service project](https://github.com/Azure-Samples/MyDriving/tree/master/src/MobileAppService).</span></span> <span data-ttu-id="4d95d-409">На них отображено число запросов к серверу и время ответа сервера, а также число сбоев и исключений.</span><span class="sxs-lookup"><span data-stu-id="4d95d-409">They show server requests and response times, failures, and exception counts.</span></span> <span data-ttu-id="4d95d-410">Кроме того, также доступны диаграммы времени отклика зависимостей, то есть вызовов к базе данных и интерфейсам REST API, например машинного обучения.</span><span class="sxs-lookup"><span data-stu-id="4d95d-410">There are also charts of dependency response times--that is, calls to the database and to REST APIs such as Machine Learning.</span></span> <span data-ttu-id="4d95d-411">Если у вас возникнут какие-либо проблемы с производительностью, вы сможете узнать, с каким компонентом системы они связаны.</span><span class="sxs-lookup"><span data-stu-id="4d95d-411">If there are any performance problems, you'll be able to see what piece of your system is causing them.</span></span>

![Пример диаграммы производительности](./media/iot-solution-build-system/image11.png)

<span data-ttu-id="4d95d-413">Для веб-службы, которая настроена вручную, можно с легкостью получить такие же диаграммы.</span><span class="sxs-lookup"><span data-stu-id="4d95d-413">If you have a web service that you set up by hand, it's easy to get the same charts.</span></span> <span data-ttu-id="4d95d-414">В колонке веб-службы щелкните **Сервис** > **Расширения** > **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="4d95d-414">On the web service blade, click **Tools** > **Extensions** > **Add**.</span></span> <span data-ttu-id="4d95d-415">Выберите **Application Insights**.</span><span class="sxs-lookup"><span data-stu-id="4d95d-415">Select **Application Insights**.</span></span>

![Интерфейс для выбора Application Insights для получения диаграмм](./media/iot-solution-build-system/image12.png)

<span data-ttu-id="4d95d-417">В основе этой функции лежит инструментирование приложения с помощью пакета SDK для Application Insights.</span><span class="sxs-lookup"><span data-stu-id="4d95d-417">The feature works by instrumenting your application with the Application Insights SDK.</span></span>

<span data-ttu-id="4d95d-418">Чтобы добавить пользовательскую телеметрию (или инструментировать приложение, запущенное вне Azure), во время разработки нужно [добавить пакет SDK для Application Insights](../application-insights/app-insights-asp-net.md) .</span><span class="sxs-lookup"><span data-stu-id="4d95d-418">You can add custom telemetry (or instrument an application that's running somewhere outside Azure) by [adding the Application Insights SDK](../application-insights/app-insights-asp-net.md) at development time.</span></span> <span data-ttu-id="4d95d-419">Это позволяет вести журнал показателей, которые зависят от приложения, например среднее или общее расстояние поездки.</span><span class="sxs-lookup"><span data-stu-id="4d95d-419">This is useful to log metrics that depend on the application, such as users' average trip length or total mileage.</span></span> <span data-ttu-id="4d95d-420">В Visual Studio щелкните правой кнопкой мыши проект и выберите пункт **Добавление Application Insights**.</span><span class="sxs-lookup"><span data-stu-id="4d95d-420">In Visual Studio, right-click the project, and then select **Add Application Insights**.</span></span>

![Интерфейс для выбора элемента "Добавление Application Insights" для добавления пользовательской телеметрии](./media/iot-solution-build-system/image10.png)

<span data-ttu-id="4d95d-422">Application Insights будет отправлять оповещения по электронной почте при обнаружении необычного числа ответов о сбое.</span><span class="sxs-lookup"><span data-stu-id="4d95d-422">Application Insights will send alert emails if it sees unusual numbers of failure responses.</span></span> <span data-ttu-id="4d95d-423">Можно также настроить собственные оповещения о различных метриках, например, о времени отклика.</span><span class="sxs-lookup"><span data-stu-id="4d95d-423">You can also set up your own alerts on various metrics, such as response times.</span></span>

<span data-ttu-id="4d95d-424">Чтобы гарантировать, что веб-служба всегда будет запущена и работоспособна, можно настроить [тесты доступности](../application-insights/app-insights-monitor-web-app-availability.md).</span><span class="sxs-lookup"><span data-stu-id="4d95d-424">Just to be sure that your web service is always up and running, you can set up [availability tests](../application-insights/app-insights-monitor-web-app-availability.md).</span></span> <span data-ttu-id="4d95d-425">Эти тесты каждые 15 минут проверяют связь с сайтом из различных расположений по всему миру.</span><span class="sxs-lookup"><span data-stu-id="4d95d-425">These tests ping your site from various locations around the world every 15 minutes.</span></span> <span data-ttu-id="4d95d-426">Опять же, в случае возникновения каких-либо проблем вы получите электронное сообщение.</span><span class="sxs-lookup"><span data-stu-id="4d95d-426">Again, you'll get an email if there seems to be a problem.</span></span>

## <a name="estimate-operational-costs"></a><span data-ttu-id="4d95d-427">Оценка эксплуатационных расходов</span><span class="sxs-lookup"><span data-stu-id="4d95d-427">Estimate operational costs</span></span>
<span data-ttu-id="4d95d-428">Работа такого приложения при небольшом масштабе обходится достаточно дешево.</span><span class="sxs-lookup"><span data-stu-id="4d95d-428">It's remarkably inexpensive to run an app like this one at small scale.</span></span> <span data-ttu-id="4d95d-429">Для многих служб предусмотрены бесплатные начальные уровни, поэтому разработка и использование приложения в небольшом масштабе не влечет существенных затрат.</span><span class="sxs-lookup"><span data-stu-id="4d95d-429">Many of the services have free entry-level tiers, so that development and small-scale operation cost very little.</span></span> <span data-ttu-id="4d95d-430">К тому же в приложениях необязательно использовать все возможности, демонстрируемые в MyDriving.</span><span class="sxs-lookup"><span data-stu-id="4d95d-430">And of course, your own apps don't have to use all the features demonstrated in MyDriving.</span></span>

<span data-ttu-id="4d95d-431">Ниже приведена приблизительная оценка затрат на настройку параметров разработки для MyDriving.</span><span class="sxs-lookup"><span data-stu-id="4d95d-431">Here's a rough estimate of our costs in setting up the development configuration for MyDriving.</span></span> <span data-ttu-id="4d95d-432">Мы также отметим некоторые альтернативные варианты, которые мы *не* использовали.</span><span class="sxs-lookup"><span data-stu-id="4d95d-432">We also note some alternatives that we did *not* use.</span></span> <span data-ttu-id="4d95d-433">Эти сведения могут быть полезны при оценке своих собственных затрат.</span><span class="sxs-lookup"><span data-stu-id="4d95d-433">This information might be helpful as you estimate your own costs.</span></span>

<span data-ttu-id="4d95d-434">Предполагается следующий сценарий:</span><span class="sxs-lookup"><span data-stu-id="4d95d-434">We assume:</span></span>

* <span data-ttu-id="4d95d-435">группа максимум из пяти человек (а также наблюдающие заинтересованные лица);</span><span class="sxs-lookup"><span data-stu-id="4d95d-435">A team of no more than five (plus observing stakeholders).</span></span>
* <span data-ttu-id="4d95d-436">приложение будет работать примерно месяц;</span><span class="sxs-lookup"><span data-stu-id="4d95d-436">Running for about a month.</span></span>
* <span data-ttu-id="4d95d-437">100 пользователей с четырьмя поездками в день.</span><span class="sxs-lookup"><span data-stu-id="4d95d-437">100 users with four trips per day.</span></span>

> [!NOTE]
> <span data-ttu-id="4d95d-438">Если вы новичок в Azure, то можете воспользоваться [бесплатной учетной записью](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="4d95d-438">If you're new to Azure, there's a [free account](https://azure.microsoft.com/free/).</span></span>
> 
> 

| <span data-ttu-id="4d95d-439">**Служба или компонент**</span><span class="sxs-lookup"><span data-stu-id="4d95d-439">**Service/component**</span></span> | <span data-ttu-id="4d95d-440">**Примечания**</span><span class="sxs-lookup"><span data-stu-id="4d95d-440">**Notes**</span></span> | <span data-ttu-id="4d95d-441">**Стоимость в месяц**</span><span class="sxs-lookup"><span data-stu-id="4d95d-441">**Cost/month**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4d95d-442">[Выпуск Visual Studio Community 2015](https://www.visualstudio.com/products/visual-studio-community-vs) с [Xamarin](https://visualstudiogallery.msdn.microsoft.com/dcd5b7bd-48f0-4245-80b6-002d22ea6eee)</span><span class="sxs-lookup"><span data-stu-id="4d95d-442">[Visual Studio 2015 Community](https://www.visualstudio.com/products/visual-studio-community-vs) with [Xamarin](https://visualstudiogallery.msdn.microsoft.com/dcd5b7bd-48f0-4245-80b6-002d22ea6eee)</span></span> <br/><span data-ttu-id="4d95d-443">Кроссплатформенная среда разработки.</span><span class="sxs-lookup"><span data-stu-id="4d95d-443">Cross-platform dev environment</span></span> |<span data-ttu-id="4d95d-444">Visual Studio Community.</span><span class="sxs-lookup"><span data-stu-id="4d95d-444">Visual Studio Community.</span></span> <span data-ttu-id="4d95d-445">(Для разработки кроссплатформенной среды с единой базой кода требуется [Visual Studio Professional](https://www.visualstudio.com/vs-2015-product-editions) для [Xamarin.Forms](https://xamarin.com/forms).)</span><span class="sxs-lookup"><span data-stu-id="4d95d-445">(Need [Visual Studio Professional](https://www.visualstudio.com/vs-2015-product-editions) for [Xamarin.Forms](https://xamarin.com/forms), to design cross-platform from a single code base.)</span></span> |<span data-ttu-id="4d95d-446">0 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-446">$0</span></span> |
| [<span data-ttu-id="4d95d-447">Центр Интернета вещей</span><span class="sxs-lookup"><span data-stu-id="4d95d-447">Azure IoT Hub</span></span>](https://azure.microsoft.com/pricing/details/iot-hub/) <br/><span data-ttu-id="4d95d-448">Двунаправленное подключение данных к устройствам.</span><span class="sxs-lookup"><span data-stu-id="4d95d-448">Two-way data connection to devices</span></span> |<span data-ttu-id="4d95d-449">8000 сообщений плюс 0,5 КБ данных на сообщение — бесплатно.</span><span class="sxs-lookup"><span data-stu-id="4d95d-449">8,000 messages + 0.5 KB/message free.</span></span> |<span data-ttu-id="4d95d-450">0 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-450">$0</span></span> |
| [<span data-ttu-id="4d95d-451">Stream Analytics</span><span class="sxs-lookup"><span data-stu-id="4d95d-451">Stream Analytics</span></span>](https://azure.microsoft.com/pricing/details/stream-analytics/)  <br/>   <span data-ttu-id="4d95d-452">Обработка большого объема потоковых данных.</span><span class="sxs-lookup"><span data-stu-id="4d95d-452">High-volume stream data processing</span></span> |<span data-ttu-id="4d95d-453">Если включена, взимается 0,031 долл. США за единицу потоковой передачи в час.</span><span class="sxs-lookup"><span data-stu-id="4d95d-453">Charge of $0.031 per streaming unit per hour, while enabled.</span></span> <span data-ttu-id="4d95d-454">Вы сами выбираете число единиц потоковой передачи. Можно выбрать дополнительные единицы для увеличения масштаба.</span><span class="sxs-lookup"><span data-stu-id="4d95d-454">You choose the number of streaming units that you want; more to scale up.</span></span> |<span data-ttu-id="4d95d-455">23 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-455">$23</span></span> |
| [<span data-ttu-id="4d95d-456">Машинное обучение</span><span class="sxs-lookup"><span data-stu-id="4d95d-456">Machine Learning</span></span>](https://azure.microsoft.com/documentation/services/machine-learning/)<br/> <span data-ttu-id="4d95d-457">Адаптивные ответы.</span><span class="sxs-lookup"><span data-stu-id="4d95d-457">Adaptive responses</span></span> |<span data-ttu-id="4d95d-458">10 долл. США за рабочее место в месяц.</span><span class="sxs-lookup"><span data-stu-id="4d95d-458">$10/seat/month.</span></span> <br/>                                                                                                                                                                                 <span data-ttu-id="4d95d-459">+3 часа эксперимента \* 1 долл. США за час эксперимента.</span><span class="sxs-lookup"><span data-stu-id="4d95d-459">+ 3-hour experiment \* $1 / experiment hour.</span></span> <br/>                                                                                                                                                           <span data-ttu-id="4d95d-460">+3,5 часа процессорного времени API \* 2 долл. США за час рабочего ЦП.</span><span class="sxs-lookup"><span data-stu-id="4d95d-460">+ 3.5-hour API CPU \* $2 / production CPU hour.</span></span> <br/>                                                                                                                                                          <span data-ttu-id="4d95d-461">Во времени ЦП API учитываются затраты 5 минут в день на повторное обучение, однако это значение будет увеличиваться по мере роста объема входных данных.</span><span class="sxs-lookup"><span data-stu-id="4d95d-461">API CPU time assumes 5 min/day retraining, though this would rise with more input data.</span></span>                   <br/>                                                                                                                                                                     <span data-ttu-id="4d95d-462">+2 минуты в день на оценку для обработки 400 поездок в день.</span><span class="sxs-lookup"><span data-stu-id="4d95d-462">+ 2 min/day scoring to process 400 trips/day.</span></span> |<span data-ttu-id="4d95d-463">20 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-463">$20</span></span> |
| [<span data-ttu-id="4d95d-464">Служба приложений</span><span class="sxs-lookup"><span data-stu-id="4d95d-464">App Service</span></span>](https://azure.microsoft.com/pricing/details/app-service/)  <br/> <span data-ttu-id="4d95d-465">Размещение серверной части мобильной службы.</span><span class="sxs-lookup"><span data-stu-id="4d95d-465">Host for mobile back end</span></span> |<span data-ttu-id="4d95d-466">Уровень B1 — рабочие веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="4d95d-466">Tier B1--production web apps.</span></span> |<span data-ttu-id="4d95d-467">56 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-467">$56</span></span> |
| [<span data-ttu-id="4d95d-468">Visual Studio Team Services </span><span class="sxs-lookup"><span data-stu-id="4d95d-468">Visual Studio Team Services </span></span>](https://azure.microsoft.com/pricing/details/visual-studio-team-services/)  <br/> <span data-ttu-id="4d95d-469">Сборка, модульное тестирование и управление выпусками, управление задачами.</span><span class="sxs-lookup"><span data-stu-id="4d95d-469">Build, unit test, and release management; task management</span></span> |<span data-ttu-id="4d95d-470">Частные агенты, пять пользователей.</span><span class="sxs-lookup"><span data-stu-id="4d95d-470">Private agents, five users.</span></span> |<span data-ttu-id="4d95d-471">0 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-471">$0</span></span> |
| [<span data-ttu-id="4d95d-472">Application Insights</span><span class="sxs-lookup"><span data-stu-id="4d95d-472">Application Insights</span></span>](https://azure.microsoft.com/pricing/details/application-insights/) <br/><span data-ttu-id="4d95d-473">Мониторинг производительности и использования веб-служб и сайтов.</span><span class="sxs-lookup"><span data-stu-id="4d95d-473">Monitoring of performance and usage of web services and sites</span></span> |<span data-ttu-id="4d95d-474">Уровень "Бесплатный".</span><span class="sxs-lookup"><span data-stu-id="4d95d-474">Free tier.</span></span> |<span data-ttu-id="4d95d-475">0 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-475">$0</span></span> |
| [<span data-ttu-id="4d95d-476">HockeyApp</span><span class="sxs-lookup"><span data-stu-id="4d95d-476">HockeyApp</span></span>](http://hockeyapp.net/pricing/) <br/> <span data-ttu-id="4d95d-477">Распространение бета-версий приложений, а также сбор отзывов и данных об использовании и сбоях.</span><span class="sxs-lookup"><span data-stu-id="4d95d-477">Distribution of beta apps, plus collection of feedback, usage, and crash data</span></span> |<span data-ttu-id="4d95d-478">Два бесплатных приложения для новых пользователей.</span><span class="sxs-lookup"><span data-stu-id="4d95d-478">Two free apps for new users.</span></span><br/> <span data-ttu-id="4d95d-479">Затем 30 долл. США в месяц.</span><span class="sxs-lookup"><span data-stu-id="4d95d-479">$30/month thereafter.</span></span> |<span data-ttu-id="4d95d-480">0 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-480">$0</span></span> |
| [<span data-ttu-id="4d95d-481">Xamarin</span><span class="sxs-lookup"><span data-stu-id="4d95d-481">Xamarin</span></span>](https://store.xamarin.com/)<br/> <span data-ttu-id="4d95d-482">Программирование для универсальной платформы, подходящей для нескольких устройств.</span><span class="sxs-lookup"><span data-stu-id="4d95d-482">Code on a uniform platform for multiple devices</span></span> |<span data-ttu-id="4d95d-483">Бесплатная пробная версия.</span><span class="sxs-lookup"><span data-stu-id="4d95d-483">Free trial.</span></span> <br/><span data-ttu-id="4d95d-484">Затем 25 долл. США в месяц.</span><span class="sxs-lookup"><span data-stu-id="4d95d-484">$25/month thereafter.</span></span> |<span data-ttu-id="4d95d-485">0 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-485">$0</span></span> |
| <span data-ttu-id="4d95d-486">[База данных SQL](https://azure.microsoft.com/pricing/details/sql-database/) для службы приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="4d95d-486">[SQL Database](https://azure.microsoft.com/pricing/details/sql-database/) for Azure App Service</span></span> |<span data-ttu-id="4d95d-487">Уровень "Базовый"; модель отдельных баз данных.</span><span class="sxs-lookup"><span data-stu-id="4d95d-487">Basic tier; single database model.</span></span> |<span data-ttu-id="4d95d-488">5 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-488">$5</span></span> |
| <span data-ttu-id="4d95d-489">[Service Fabric](https://azure.microsoft.com/pricing/details/service-fabric/) (необязательно)</span><span class="sxs-lookup"><span data-stu-id="4d95d-489">[Service Fabric](https://azure.microsoft.com/pricing/details/service-fabric/) (optional)</span></span> |<span data-ttu-id="4d95d-490">Запуск локального кластера.</span><span class="sxs-lookup"><span data-stu-id="4d95d-490">Run a local cluster.</span></span> |<span data-ttu-id="4d95d-491">0 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-491">$0</span></span> |
| [<span data-ttu-id="4d95d-492">Power BI</span><span class="sxs-lookup"><span data-stu-id="4d95d-492">Power BI</span></span>](https://powerbi.microsoft.com/pricing/)<br/> <span data-ttu-id="4d95d-493">Универсальное средство отображения и исследования потоковых и статических данных.</span><span class="sxs-lookup"><span data-stu-id="4d95d-493">Versatile displays and investigation of streamed and static data</span></span> |<span data-ttu-id="4d95d-494">Уровень "Бесплатный": 1 ГБ, 10 000 строк в час, ежедневное обновление.</span><span class="sxs-lookup"><span data-stu-id="4d95d-494">Free tier: 1 GB, 10,000 rows/hour, daily refresh.</span></span> <br/> <span data-ttu-id="4d95d-495">10 долл. США за пользователя в месяц: [более высокие лимиты](https://powerbi.microsoft.com/documentation/powerbi-power-bi-pro-content-what-is-it/), дополнительные варианты подключения, совместная работа.</span><span class="sxs-lookup"><span data-stu-id="4d95d-495">$10/user/month for [higher limits](https://powerbi.microsoft.com/documentation/powerbi-power-bi-pro-content-what-is-it/), more connection options, collaboration.</span></span> |<span data-ttu-id="4d95d-496">0 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-496">$0</span></span> |
| [<span data-ttu-id="4d95d-497">Хранилище</span><span class="sxs-lookup"><span data-stu-id="4d95d-497">Storage</span></span>](https://azure.microsoft.com/pricing/details/storage/) |<span data-ttu-id="4d95d-498">Локально избыточное хранилище &lt; 100 ГБ по 0,024 долл. США за 1 ГБ.</span><span class="sxs-lookup"><span data-stu-id="4d95d-498">L (locally redundant) &lt; 100 G $0.024/GB.</span></span> |<span data-ttu-id="4d95d-499">3 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-499">$3</span></span> |
| [<span data-ttu-id="4d95d-500">Фабрика данных</span><span class="sxs-lookup"><span data-stu-id="4d95d-500">Data Factory</span></span>](https://azure.microsoft.com/pricing/details/data-factory/) |<span data-ttu-id="4d95d-501">0,60 долл. США за действие\* (8–5 FOC).</span><span class="sxs-lookup"><span data-stu-id="4d95d-501">$0.60 per activity \* (8 - 5 FOC).</span></span> |<span data-ttu-id="4d95d-502">2 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-502">$2</span></span> |
| [<span data-ttu-id="4d95d-503">HDInsight</span><span class="sxs-lookup"><span data-stu-id="4d95d-503">HDInsight</span></span>](https://azure.microsoft.com/pricing/details/hdinsight/) <br/>  <span data-ttu-id="4d95d-504">Кластер по требованию для ежедневного повторного обучения.</span><span class="sxs-lookup"><span data-stu-id="4d95d-504">On-demand cluster for daily retraining</span></span> |<span data-ttu-id="4d95d-505">Три узла A3 за 0,32 долл. США в час ежедневно * 31 день.</span><span class="sxs-lookup"><span data-stu-id="4d95d-505">Three A3 nodes at $0.32/hour for 1 hour daily * 31 days.</span></span> |<span data-ttu-id="4d95d-506">30 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-506">$30</span></span> |
| [<span data-ttu-id="4d95d-507">Концентраторы событий</span><span class="sxs-lookup"><span data-stu-id="4d95d-507">Event Hubs</span></span>](https://azure.microsoft.com/pricing/details/event-hubs/) |<span data-ttu-id="4d95d-508">Уровень "Базовый", 11 долл. США в месяц за единицу пропускной способности плюс 0,028 долл. США за входящие данные.</span><span class="sxs-lookup"><span data-stu-id="4d95d-508">Basic with $11/month throughput unit + $0.028 ingress.</span></span> |<span data-ttu-id="4d95d-509">11 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-509">$11</span></span> |
| <span data-ttu-id="4d95d-510">Аппаратный ключ OBD</span><span class="sxs-lookup"><span data-stu-id="4d95d-510">OBD dongle</span></span> | |<span data-ttu-id="4d95d-511">12 долл. США</span><span class="sxs-lookup"><span data-stu-id="4d95d-511">$12</span></span> |
| <span data-ttu-id="4d95d-512">**Всего**</span><span class="sxs-lookup"><span data-stu-id="4d95d-512">**Total**</span></span> | |<span data-ttu-id="4d95d-513">**157 долл. США**</span><span class="sxs-lookup"><span data-stu-id="4d95d-513">**$157**</span></span> |

<span data-ttu-id="4d95d-514">Дополнительные сведения можно найти в разделе </span><span class="sxs-lookup"><span data-stu-id="4d95d-514">For more information, see:</span></span>

* <span data-ttu-id="4d95d-515">Сводка по [квотам и ограничениям службы Azure](../azure-subscription-service-limits.md#iot-hub-limits)</span><span class="sxs-lookup"><span data-stu-id="4d95d-515">Summary of [Azure service quotas and limits](../azure-subscription-service-limits.md#iot-hub-limits)</span></span>
* <span data-ttu-id="4d95d-516">[Калькулятор стоимости](https://azure.microsoft.com/pricing/calculator/)</span><span class="sxs-lookup"><span data-stu-id="4d95d-516">Azure [pricing calculator](https://azure.microsoft.com/pricing/calculator/)</span></span>

## <a name="send-us-your-feedback"></a><span data-ttu-id="4d95d-517">Отправка отзывов</span><span class="sxs-lookup"><span data-stu-id="4d95d-517">Send us your feedback</span></span>
<span data-ttu-id="4d95d-518">Мы создали MyDriving, чтобы помочь вам ускорить начало работы с системами IoT, и непременно хотим узнать о ваших впечатлениях о работе этого решения.</span><span class="sxs-lookup"><span data-stu-id="4d95d-518">Because we created MyDriving to help jumpstart your own IoT systems, we certainly want to hear from you about how well it works.</span></span> <span data-ttu-id="4d95d-519">Сообщите нам, если во время использования приложения вы столкнулись с такими ситуациями.</span><span class="sxs-lookup"><span data-stu-id="4d95d-519">Let us know if:</span></span>

* <span data-ttu-id="4d95d-520">Возникли неполадки или проблемы.</span><span class="sxs-lookup"><span data-stu-id="4d95d-520">You run into difficulties or challenges.</span></span>
* <span data-ttu-id="4d95d-521">У вас есть дополнительные замечания, которые помогут лучше адаптировать приложение для вашего сценария.</span><span class="sxs-lookup"><span data-stu-id="4d95d-521">There is an extension point that would make it more suitable to your scenario.</span></span>
* <span data-ttu-id="4d95d-522">Вы нашли более эффективный способ выполнения определенных требований.</span><span class="sxs-lookup"><span data-stu-id="4d95d-522">You find a more efficient way to accomplish certain needs.</span></span>
* <span data-ttu-id="4d95d-523">У вас есть предложения по улучшению MyDriving или этой документации.</span><span class="sxs-lookup"><span data-stu-id="4d95d-523">You have any other suggestions for improving MyDriving or this documentation.</span></span>

<span data-ttu-id="4d95d-524">Чтобы отправить отзыв, отправьте заявку на GitHub или оставьте комментарий ниже (на странице с английской версией статьи).</span><span class="sxs-lookup"><span data-stu-id="4d95d-524">To give feedback, file an [issue on GitHub] or leave a comment below (en-us edition).</span></span>

<span data-ttu-id="4d95d-525">Мы будем рады узнать о ваших впечатлениях!</span><span class="sxs-lookup"><span data-stu-id="4d95d-525">We look forward to hearing from you!</span></span>

## <a name="next-steps"></a><span data-ttu-id="4d95d-526">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="4d95d-526">Next steps</span></span>
<span data-ttu-id="4d95d-527">Рекомендуется ознакомиться со [справочным руководством по MyDriving](http://aka.ms/mydrivingdocs), в котором содержится подробное описание архитектуры системы и ее компонентов.</span><span class="sxs-lookup"><span data-stu-id="4d95d-527">We recommend the [MyDriving Reference Guide](http://aka.ms/mydrivingdocs), which is a comprehensive description of the design of the system and its components.</span></span>

