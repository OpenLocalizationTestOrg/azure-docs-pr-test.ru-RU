---
title: "Архитектура безопасности Интернета вещей | Документация Майкрософт"
description: "Рекомендации и советы по архитектуре безопасности IoT"
services: 
suite: iot-suite
documentationcenter: 
author: YuriDio
manager: timlt
editor: 
ms.assetid: 18ed3eb0-9406-44e1-8a3a-93dc6726c7ac
ms.service: iot-suite
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/03/2017
ms.author: yurid
ms.openlocfilehash: 2482dade7d17d05b2fc90fbf22b0466227a5983b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="internet-of-things-security-architecture"></a><span data-ttu-id="f3838-103">Архитектура безопасности "Интернета вещей"</span><span class="sxs-lookup"><span data-stu-id="f3838-103">Internet of Things security architecture</span></span>
<span data-ttu-id="f3838-104">При разработке системы важно знать угрозы, которым она может подвергаться, а по завершении разработки и создания архитектуры предусмотреть надлежащие средства ее защиты.</span><span class="sxs-lookup"><span data-stu-id="f3838-104">When designing a system, it is important to understand the potential threats to that system, and add appropriate defenses accordingly, as the system is designed and architected.</span></span> <span data-ttu-id="f3838-105">Особенно важно спланировать стратегию безопасности в самом начале разработки продукта, ведь зная, как злоумышленники могут скомпрометировать систему, можно изначально устранить соответствующие риски.</span><span class="sxs-lookup"><span data-stu-id="f3838-105">It is particularly important to design the product from the start with security in mind because understanding how an attacker might be able to compromise a system helps make sure appropriate mitigations are in place from the beginning.</span></span> 

## <a name="security-starts-with-a-threat-model"></a><span data-ttu-id="f3838-106">Обеспечение безопасности начинается с рассмотрения модели рисков</span><span class="sxs-lookup"><span data-stu-id="f3838-106">Security starts with a threat model</span></span>
<span data-ttu-id="f3838-107">Корпорация Майкрософт уже давно использует модели рисков для своих продуктов и сделала процесс моделирования рисков доступным для всех.</span><span class="sxs-lookup"><span data-stu-id="f3838-107">Microsoft has long used threat models for its products and has made the company’s threat modeling process publically available.</span></span> <span data-ttu-id="f3838-108">Опыт корпорации показывает, что кроме быстрого выяснения того, какие угрозы самые серьезные, моделирование предоставляет неожиданные преимущества.</span><span class="sxs-lookup"><span data-stu-id="f3838-108">The company experience demonstrates that the modeling has unexpected benefits beyond the immediate understanding of what threats are the most concerning.</span></span> <span data-ttu-id="f3838-109">Например, таким образом можно обсудить угрозы с пользователями не из команды разработки, чтобы почерпнуть новые идеи и улучшить продукт.</span><span class="sxs-lookup"><span data-stu-id="f3838-109">For example, it also creates an avenue for an open discussion with others outside the development team, which can lead to new ideas and improvements in the product.</span></span>

<span data-ttu-id="f3838-110">Цель моделирования — понять, как злоумышленники могут скомпрометировать систему, и обеспечить надлежащее устранение рисков.</span><span class="sxs-lookup"><span data-stu-id="f3838-110">The objective of threat modeling is to understand how an attacker might be able to compromise a system and then make sure appropriate mitigations are in place.</span></span> <span data-ttu-id="f3838-111">Благодаря моделированию рисков команда разработчиков находит способы устранения рисков во время разработки системы, чтобы их не пришлось искать после ее развертывания.</span><span class="sxs-lookup"><span data-stu-id="f3838-111">Threat modeling forces the design team to consider mitigations as the system is designed rather than after a system is deployed.</span></span> <span data-ttu-id="f3838-112">Это крайне важно, так как модернизация средств безопасности для множества устройств в отрасли нецелесообразна, может влечь ошибки и сопровождаться риском для клиентов.</span><span class="sxs-lookup"><span data-stu-id="f3838-112">This fact is critically important, because retrofitting security defenses to a myriad of devices in the field is infeasible, error prone and will leave customers at risk.</span></span>

<span data-ttu-id="f3838-113">Многие команды удачно устанавливают функциональные требования к системе, что предоставляет преимущества клиентам.</span><span class="sxs-lookup"><span data-stu-id="f3838-113">Many development teams do an excellent job capturing the functional requirements for the system that benefit customers.</span></span> <span data-ttu-id="f3838-114">Тем не менее, есть более сложная задача — найти в системе неочевидные уязвимости, которыми могут воспользоваться.</span><span class="sxs-lookup"><span data-stu-id="f3838-114">However, identifying non-obvious ways that someone might misuse the system is more challenging.</span></span> <span data-ttu-id="f3838-115">Моделирование рисков помогает командам разработки понять, что может сделать злоумышленник и почему.</span><span class="sxs-lookup"><span data-stu-id="f3838-115">Threat modeling can help development teams understand what an attacker might do and why.</span></span> <span data-ttu-id="f3838-116">В рамках этого структурированного процесса они обсуждают решения по проектированию среды безопасности в системе, а также вносят изменения в архитектуру, связанные с безопасностью.</span><span class="sxs-lookup"><span data-stu-id="f3838-116">Threat modeling is a structured process that creates a discussion about the security design decisions in the system, as well as changes to the design that are made along the way that impact security.</span></span> <span data-ttu-id="f3838-117">Хотя модель рисков представляет собой всего лишь документ, это идеальный способ обеспечить непрерывную передачу знаний и использование полученного опыта, позволяющий новым командам быстро войти в курс дела.</span><span class="sxs-lookup"><span data-stu-id="f3838-117">While a threat model is simply a document, this documentation also represents an ideal way to ensure continuity of knowledge, retention of lessons learned, and help new team onboard rapidly.</span></span> <span data-ttu-id="f3838-118">Наконец, моделирование рисков позволяет учесть другие аспекты безопасности, например обязательства в отношении безопасности перед клиентами.</span><span class="sxs-lookup"><span data-stu-id="f3838-118">Finally, an outcome of threat modeling is to enable you to consider other aspects of security, such as what security commitments you wish to provide to your customers.</span></span> <span data-ttu-id="f3838-119">В сочетании с моделированием рисков эти обязательства обеспечат осведомленность устройства при тестировании решения "Интернета вещей" (IoT).</span><span class="sxs-lookup"><span data-stu-id="f3838-119">These commitments in conjunction with threat modeling will inform and drive testing of your Internet of Things (IoT) solution.</span></span>

### <a name="when-to-threat-model"></a><span data-ttu-id="f3838-120">Когда моделировать риски</span><span class="sxs-lookup"><span data-stu-id="f3838-120">When to threat model</span></span>
<span data-ttu-id="f3838-121">[Моделирование рисков](http://www.microsoft.com/security/sdl/adopt/threatmodeling.aspx) — очень ценное преимущество, если его использовать на этапе разработки.</span><span class="sxs-lookup"><span data-stu-id="f3838-121">[Threat modeling](http://www.microsoft.com/security/sdl/adopt/threatmodeling.aspx) offers the greatest value if it is incorporated into the design phase.</span></span> <span data-ttu-id="f3838-122">При разработке доступны более гибкие возможности внесения изменений для устранения угроз.</span><span class="sxs-lookup"><span data-stu-id="f3838-122">When you are designing, you have the greatest flexibility to make changes to eliminate threats.</span></span> <span data-ttu-id="f3838-123">Таким образом можно изначально устранить угрозы.</span><span class="sxs-lookup"><span data-stu-id="f3838-123">Eliminating threats by design is the desired outcome.</span></span> <span data-ttu-id="f3838-124">Это гораздо проще, чем добавлять средства устранения рисков, тестировать их и поддерживать их актуальность. Кроме того, не всегда возможно все это сделать.</span><span class="sxs-lookup"><span data-stu-id="f3838-124">It is much easier than adding mitigations, testing them, and ensuring they remain current and moreover, such elimination is not always possible.</span></span> <span data-ttu-id="f3838-125">По мере развития продукта становится все труднее устранять угрозы. В свою очередь, это требует больше работы и более жестких компромиссов, чем моделирование рисков на раннем этапе разработки.</span><span class="sxs-lookup"><span data-stu-id="f3838-125">It becomes harder to eliminate threats as a product becomes more mature, and in turn will ultimately require more work and a lot harder tradeoffs than threat modeling early on in the development.</span></span>

### <a name="what-to-threat-model"></a><span data-ttu-id="f3838-126">Для каких направлений моделировать риски</span><span class="sxs-lookup"><span data-stu-id="f3838-126">What to threat model</span></span>
<span data-ttu-id="f3838-127">Моделировать риски следует для всего решения, сосредотачиваясь на следующих функциях:</span><span class="sxs-lookup"><span data-stu-id="f3838-127">You should thread model the solution as a whole and also focus in the following areas:</span></span>

* <span data-ttu-id="f3838-128">обеспечение безопасности и конфиденциальности;</span><span class="sxs-lookup"><span data-stu-id="f3838-128">The security and privacy features</span></span>
* <span data-ttu-id="f3838-129">функции, сбой которых влияет на безопасность;</span><span class="sxs-lookup"><span data-stu-id="f3838-129">The features whose failures are security relevant</span></span>
* <span data-ttu-id="f3838-130">функции, работа которых связана с границей доверия.</span><span class="sxs-lookup"><span data-stu-id="f3838-130">The features that touch a trust boundary</span></span> 

### <a name="who-threat-models"></a><span data-ttu-id="f3838-131">Кому следует моделировать риски</span><span class="sxs-lookup"><span data-stu-id="f3838-131">Who threat models</span></span>
<span data-ttu-id="f3838-132">Моделирование рисков — такой же процесс, как и все остальные.</span><span class="sxs-lookup"><span data-stu-id="f3838-132">Threat modeling is a process like any other.</span></span>  <span data-ttu-id="f3838-133">Документ модели рисков следует использовать как обычный компонент решения и проверять его соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="f3838-133">It is a good idea to treat the threat model document like any other component of the solution and validate it.</span></span> <span data-ttu-id="f3838-134">Многие команды удачно устанавливают функциональные требования к системе, что предоставляет преимущества клиентам.</span><span class="sxs-lookup"><span data-stu-id="f3838-134">Many development teams do an excellent job capturing the functional requirements for the system that benefit customers.</span></span> <span data-ttu-id="f3838-135">Тем не менее, есть более сложная задача — найти в системе неочевидные уязвимости, которыми могут воспользоваться.</span><span class="sxs-lookup"><span data-stu-id="f3838-135">However, identifying non-obvious ways that someone might misuse the system is more challenging.</span></span> <span data-ttu-id="f3838-136">Моделирование рисков помогает командам разработки понять, что может сделать злоумышленник и почему.</span><span class="sxs-lookup"><span data-stu-id="f3838-136">Threat modeling can help development teams understand what an attacker might do and why.</span></span>

### <a name="how-to-threat-model"></a><span data-ttu-id="f3838-137">Как моделировать риски</span><span class="sxs-lookup"><span data-stu-id="f3838-137">How to threat model</span></span>
<span data-ttu-id="f3838-138">Моделирование рисков предусматривает следующие четыре этапа:</span><span class="sxs-lookup"><span data-stu-id="f3838-138">The threat modeling process is composed of four steps; the steps are:</span></span>

* <span data-ttu-id="f3838-139">моделирование применения;</span><span class="sxs-lookup"><span data-stu-id="f3838-139">Model the application</span></span>
* <span data-ttu-id="f3838-140">создание списка угроз;</span><span class="sxs-lookup"><span data-stu-id="f3838-140">Enumerate Threats</span></span>
* <span data-ttu-id="f3838-141">устранение рисков;</span><span class="sxs-lookup"><span data-stu-id="f3838-141">Mitigate threats</span></span>
* <span data-ttu-id="f3838-142">проверка устранения рисков.</span><span class="sxs-lookup"><span data-stu-id="f3838-142">Validate the mitigations</span></span>

#### <a name="the-process-steps"></a><span data-ttu-id="f3838-143">Шаги моделирования</span><span class="sxs-lookup"><span data-stu-id="f3838-143">The process steps</span></span>
<span data-ttu-id="f3838-144">При построении модели рисков следует руководствоваться следующими рекомендациями:</span><span class="sxs-lookup"><span data-stu-id="f3838-144">Three rules of thumb to keep in mind when building a threat model:</span></span>

1. <span data-ttu-id="f3838-145">Создайте схему на основе эталонной архитектуры.</span><span class="sxs-lookup"><span data-stu-id="f3838-145">Create a diagram out of reference architecture.</span></span> 
2. <span data-ttu-id="f3838-146">Начните с обзора.</span><span class="sxs-lookup"><span data-stu-id="f3838-146">Start breadth-first.</span></span> <span data-ttu-id="f3838-147">Прежде чем углубиться в процесс, получите сведения о системе и сформируйте общее представление.</span><span class="sxs-lookup"><span data-stu-id="f3838-147">Get an overview, and understand the system as a whole, before deep-diving.</span></span>  <span data-ttu-id="f3838-148">Таким образом вы сможете сосредоточиться на нужных аспектах.</span><span class="sxs-lookup"><span data-stu-id="f3838-148">This helps ensure that you deep-dive in the right places.</span></span>
3. <span data-ttu-id="f3838-149">Не процесс должен управлять вами, а вы процессом.</span><span class="sxs-lookup"><span data-stu-id="f3838-149">Drive the process, don’t let the process drive you.</span></span> <span data-ttu-id="f3838-150">Если вы обнаружили проблему на этапе моделирования и хотите изучить ее, сразу же приступайте.</span><span class="sxs-lookup"><span data-stu-id="f3838-150">If you find an issue in the modeling phase and want to explore it, go for it!</span></span>  <span data-ttu-id="f3838-151">(Не нужно строго придерживаться этих рекомендаций.)</span><span class="sxs-lookup"><span data-stu-id="f3838-151">Don’t feel you need to follow these steps slavishly.</span></span>  

#### <a name="threats"></a><span data-ttu-id="f3838-152">Риски</span><span class="sxs-lookup"><span data-stu-id="f3838-152">Threats</span></span>
<span data-ttu-id="f3838-153">Модель рисков предусматривает следующие четыре основных элемента:</span><span class="sxs-lookup"><span data-stu-id="f3838-153">The four core elements of a threat model are:</span></span>

* <span data-ttu-id="f3838-154">процессы (веб-служб, служб Win32, управляющих программ *nix и т. д.). Обратите внимание, что некоторые сложные сущности (например, полевые шлюзы и датчики) могут быть абстрагированы в качестве процессов, если в соответствующих областях невозможна техническая детализация.</span><span class="sxs-lookup"><span data-stu-id="f3838-154">Processes (web services, Win32 services, *nix daemons, etc. Note that some complex entities (for example field gateways and sensors) can be abstracted as a process when a technical drill-down in these areas is not possible.</span></span>
* <span data-ttu-id="f3838-155">хранилища данных (любые места хранения данных, например файлы конфигурации или базы данных);</span><span class="sxs-lookup"><span data-stu-id="f3838-155">Data stores (anywhere data is stored, such as a configuration file or database)</span></span>
* <span data-ttu-id="f3838-156">потоки данных (в которых данные перемещаются между другими элементами приложения);</span><span class="sxs-lookup"><span data-stu-id="f3838-156">Data flow (where data moves between other elements in the application)</span></span>
* <span data-ttu-id="f3838-157">внешние сущности (любые элементы, которые взаимодействуют с системой, но не под управлением приложения, к примеру пользователи и вспомогательные веб-каналы).</span><span class="sxs-lookup"><span data-stu-id="f3838-157">External Entities (anything that interacts with the system, but is not under the control of the application, examples include users and satellite feeds)</span></span>

<span data-ttu-id="f3838-158">Все элементы в схеме архитектуры подвержены различным угрозам. В этой статье мы будем использовать для них обозначение STRIDE (спуфинг, незаконное изменение, отказ, раскрытие информации, отказ в обслуживании и несанкционированное повышение привилегий).</span><span class="sxs-lookup"><span data-stu-id="f3838-158">All elements in the architectural diagram are subject to various threats; we will use the STRIDE mnemonic.</span></span> <span data-ttu-id="f3838-159">Дополнительные сведения об элементах STRIDE см. в статье [Threat Modeling Again, STRIDE](https://blogs.msdn.microsoft.com/larryosterman/2007/09/04/threat-modeling-again-stride/) (Дополнительные сведения о моделировании рисков. STRIDE).</span><span class="sxs-lookup"><span data-stu-id="f3838-159">Read [Threat Modeling Again, STRIDE](https://blogs.msdn.microsoft.com/larryosterman/2007/09/04/threat-modeling-again-stride/) to know more about the STRIDE elements.</span></span>

<span data-ttu-id="f3838-160">Различные элементы схемы приложения подвержены разным угрозам STRIDE:</span><span class="sxs-lookup"><span data-stu-id="f3838-160">Different elements of the application diagram are subject to certain STRIDE threats:</span></span>

* <span data-ttu-id="f3838-161">процессы подвержены угрозам STRIDE;</span><span class="sxs-lookup"><span data-stu-id="f3838-161">Processes are subject to STRIDE</span></span>
* <span data-ttu-id="f3838-162">потоки данных — угрозам TID;</span><span class="sxs-lookup"><span data-stu-id="f3838-162">Data flows are subject to TID</span></span>
* <span data-ttu-id="f3838-163">хранилища данных подвержены угрозам TID, а иногда и R, если данные хранятся в файлах журналов;</span><span class="sxs-lookup"><span data-stu-id="f3838-163">Data stores are subject to TID, and sometimes R, if the data stores are log files.</span></span>
* <span data-ttu-id="f3838-164">внешние сущности подвержены угрозам SRD.</span><span class="sxs-lookup"><span data-stu-id="f3838-164">External entities are subject to SRD</span></span>

## <a name="security-in-iot"></a><span data-ttu-id="f3838-165">Безопасность в IoT</span><span class="sxs-lookup"><span data-stu-id="f3838-165">Security in IoT</span></span>
<span data-ttu-id="f3838-166">Перед подключенными специализированными устройствами открывается большое количество возможных зон и шаблонов взаимодействия, которые необходимо учесть при создании инфраструктуры безопасности цифрового доступа к этим устройствам.</span><span class="sxs-lookup"><span data-stu-id="f3838-166">Connected special-purpose devices have a significant number of potential interaction surface areas and interaction patterns, all of which must be considered to provide a framework for securing digital access to those devices.</span></span> <span data-ttu-id="f3838-167">Здесь термин "цифровой доступ" используется, чтобы отличить соответствующие операции от тех, которые выполняются при прямом взаимодействии с устройством, когда безопасность обеспечивается за счет физического контроля доступа.</span><span class="sxs-lookup"><span data-stu-id="f3838-167">The term “digital access” is used here to distinguish from any operations that are carried out through direct device interaction where access security is provided through physical access control.</span></span> <span data-ttu-id="f3838-168">Например, устройство находится в комнате, дверь которой закрыта на замок.</span><span class="sxs-lookup"><span data-stu-id="f3838-168">For example, putting the device into a room with a lock on the door.</span></span> <span data-ttu-id="f3838-169">Хотя физический доступ нельзя запретить с помощью программного обеспечения и оборудования, можно предпринять меры, чтобы предотвратить такой доступ и уменьшить вероятность вмешательства в интерфейс системы.</span><span class="sxs-lookup"><span data-stu-id="f3838-169">While physical access cannot be denied using software and hardware, measures can be taken to prevent physical access from leading to system interference.</span></span> 

<span data-ttu-id="f3838-170">Исследуя шаблоны взаимодействия, мы уделим одинаковое внимание контролю устройства и данным устройства.</span><span class="sxs-lookup"><span data-stu-id="f3838-170">As we explore the interaction patterns, we will look at “device control” and “device data” with the same level of attention.</span></span> <span data-ttu-id="f3838-171">Контроль устройства можно классифицировать как ввод любых сведений, предоставленных устройству любой стороной, чтобы изменить его поведение или повлиять на него, а именно на его состояние или состояние его среды.</span><span class="sxs-lookup"><span data-stu-id="f3838-171">“Device control” can be classified as any information that is provided to a device by any party with the goal of changing or influencing its behavior towards its state or the state of its environment.</span></span> <span data-ttu-id="f3838-172">Данные устройства можно классифицировать как любые сведения о его состоянии и наблюдаемом состоянии его среды, которые устройство предоставляет другой стороне.</span><span class="sxs-lookup"><span data-stu-id="f3838-172">“Device data” can be classified as any information that a device emits to any other party about its state and the observed state of its environment.</span></span>

<span data-ttu-id="f3838-173">Чтобы оптимально использовать рекомендации по обеспечению безопасности, советуем разделить типичную архитектуру IoT на несколько компонентов или зон в рамках моделирования рисков.</span><span class="sxs-lookup"><span data-stu-id="f3838-173">In order to optimize security best practices, it is recommended that a typical IoT architecture be divided into several component/zones as part of the threat modeling exercise.</span></span> <span data-ttu-id="f3838-174">Эти зоны подробно описаны в этом разделе и включают в себя:</span><span class="sxs-lookup"><span data-stu-id="f3838-174">These zones are described fully throughout this section and include:</span></span>

* <span data-ttu-id="f3838-175">устройство;</span><span class="sxs-lookup"><span data-stu-id="f3838-175">Device,</span></span>
* <span data-ttu-id="f3838-176">полевой шлюз;</span><span class="sxs-lookup"><span data-stu-id="f3838-176">Field Gateway,</span></span>
* <span data-ttu-id="f3838-177">облачные шлюзы;</span><span class="sxs-lookup"><span data-stu-id="f3838-177">Cloud gateways, and</span></span>
* <span data-ttu-id="f3838-178">утверждения.</span><span class="sxs-lookup"><span data-stu-id="f3838-178">Services.</span></span>

<span data-ttu-id="f3838-179">Разделение на зоны — всеобъемлющий способ сегментации решения. Зачастую в каждой зоне содержатся отдельные данные, а также есть требования к проверке подлинности и авторизации.</span><span class="sxs-lookup"><span data-stu-id="f3838-179">Zones are broad way to segment a solution; each zone often has its own data and authentication and authorization requirements.</span></span> <span data-ttu-id="f3838-180">С помощью зоны можно изолировать повреждение и ограничить влияние зон с низким уровнем доверия на те, уровень доверия к которым выше.</span><span class="sxs-lookup"><span data-stu-id="f3838-180">Zones can also be used to isolation damage and restrict the impact of low trust zones on higher trust zones.</span></span>

<span data-ttu-id="f3838-181">Зоны разделяются границами доверия. На схеме ниже они обозначены красной пунктирной линией.</span><span class="sxs-lookup"><span data-stu-id="f3838-181">Each zone is separated by a Trust Boundary, which is noted as the dotted red line in the diagram below.</span></span> <span data-ttu-id="f3838-182">Здесь изображен переход сведений или данных из одного источника в другой.</span><span class="sxs-lookup"><span data-stu-id="f3838-182">It represents a transition of data/information from one source to another.</span></span> <span data-ttu-id="f3838-183">Во время этого перехода данные могут подвергаться различным угрозам STRIDE.</span><span class="sxs-lookup"><span data-stu-id="f3838-183">During this transition, the data/information could be subject to Spoofing, Tampering, Repudiation, Information Disclosure, Denial of Service and Elevation of Privilege (STRIDE).</span></span>

![Зоны безопасности IoT](media/iot-security-architecture/iot-security-architecture-fig1.png) 

<span data-ttu-id="f3838-185">Компоненты в пределах каждой границы также подвержены угрозам STRIDE, что позволяет получить всеобъемлющую модель рисков для решения.</span><span class="sxs-lookup"><span data-stu-id="f3838-185">The components depicted within each boundary are also subjected to STRIDE, enabling a full 360 threat modeling view of the solution.</span></span> <span data-ttu-id="f3838-186">В следующих подразделах содержатся детальные сведения о каждом из компонентов, соответствующие проблемы безопасности, а также решения по их устранению.</span><span class="sxs-lookup"><span data-stu-id="f3838-186">The sections below elaborate on each of the components and specific security concerns and solutions that should be put into place.</span></span>

<span data-ttu-id="f3838-187">В последующих разделах мы обсудим стандартные компоненты, которые, как правило, находятся в этих зонах.</span><span class="sxs-lookup"><span data-stu-id="f3838-187">The sections that follow will discuss standard components typically found in these zones.</span></span>

### <a name="the-device-zone"></a><span data-ttu-id="f3838-188">Зона устройства</span><span class="sxs-lookup"><span data-stu-id="f3838-188">The Device Zone</span></span>
<span data-ttu-id="f3838-189">Среда устройства — это физическое пространство вокруг устройства, в пределах которого к нему можно получить физический доступ и/или цифровой доступ через одноранговую локальную сеть.</span><span class="sxs-lookup"><span data-stu-id="f3838-189">The device environment is the immediate physical space around the device where physical access and/or “local network” peer-to-peer digital access to the device is feasible.</span></span> <span data-ttu-id="f3838-190">Под локальной сетью подразумевается уникально идентифицируемая изолированная от общего доступа из Интернета сеть, к которой можно установить сетевой мост. Ею может быть любая технология беспроводной радиосвязи ближнего действия, позволяющая осуществлять одноранговый обмен данными между устройствами.</span><span class="sxs-lookup"><span data-stu-id="f3838-190">A “local network” is assumed to be a network that is distinct and insulated from – but potentially bridged to – the public Internet, and includes any short-range wireless radio technology that permits peer-to-peer communication of devices.</span></span> <span data-ttu-id="f3838-191">Ею *не* может быть технология сетевой виртуализации, которая создает иллюзию локальной сети, или общедоступные операторские сети, в которых для однорангового обмена данными требуются два устройства, взаимодействующие в пространстве общедоступной сети.</span><span class="sxs-lookup"><span data-stu-id="f3838-191">It does *not* include any network virtualization technology creating the illusion of such a local network and it does also not include public operator networks that require any two devices to communicate across public network space if they were to enter a peer-to-peer communication relationship.</span></span>

### <a name="the-field-gateway-zone"></a><span data-ttu-id="f3838-192">Зона полевого шлюза</span><span class="sxs-lookup"><span data-stu-id="f3838-192">The Field Gateway Zone</span></span>
<span data-ttu-id="f3838-193">Полевой шлюз — это устройство, программное обеспечение или серверное программное обеспечение общего назначения, которое служит средством реализации обмена данными, а также, по возможности, системой управления устройствами и центром обработки данных, получаемых от устройств.</span><span class="sxs-lookup"><span data-stu-id="f3838-193">Field gateway is a device/appliance or some general-purpose server computer software that acts as communication enabler and, potentially, as a device control system and device data processing hub.</span></span> <span data-ttu-id="f3838-194">В зоне полевого шлюза находится сам полевой шлюз и все подключенные к нему устройства.</span><span class="sxs-lookup"><span data-stu-id="f3838-194">The field gateway zone includes the field gateway itself and all devices that are attached to it.</span></span> <span data-ttu-id="f3838-195">Как подразумевает название, полевые шлюзы не используют выделенные средства обработки данных. Обычно они привязаны к расположению, могут подвергаться физическим атакам, а их оперативная избыточность ограничена.</span><span class="sxs-lookup"><span data-stu-id="f3838-195">As the name implies, field gateways act outside dedicated data processing facilities, are usually location bound, are potentially subject to physical intrusion, and will have limited operational redundancy.</span></span> <span data-ttu-id="f3838-196">Проще говоря, полевой шлюз — обычно именно тот объект, на который могут повлиять или который могут атаковать, так как известны его функции.</span><span class="sxs-lookup"><span data-stu-id="f3838-196">All to say that a field gateway is commonly a thing one can touch and sabotage while knowing what its function is.</span></span> 

<span data-ttu-id="f3838-197">Полевой шлюз отличается от обычного маршрутизатора трафика тем, что ему отведена активная роль в управлении доступом и передачей информации. Это значит, что он является ориентированным на приложения объектом, а также терминалом сетевых подключений или сеансов.</span><span class="sxs-lookup"><span data-stu-id="f3838-197">A field gateway is different from a mere traffic router in that it has had an active role in managing access and information flow, meaning it is an application addressed entity and network connection or session terminal.</span></span> <span data-ttu-id="f3838-198">Устройства преобразования сетевых адресов и брандмауэры, напротив, не могут считаться полевыми шлюзами, так как они не являются явными терминалами подключений или сеансов. Они просто маршрутизируют (или блокируют) подключения или сеансы, которые осуществляются через них.</span><span class="sxs-lookup"><span data-stu-id="f3838-198">An NAT device or firewall, in contrast, does not qualify as field gateways since they are not explicit connection or session terminals, but rather a route (or block) connections or sessions made through them.</span></span> <span data-ttu-id="f3838-199">У полевого шлюза есть две отдельные контактные зоны.</span><span class="sxs-lookup"><span data-stu-id="f3838-199">The field gateway has two distinct surface areas.</span></span> <span data-ttu-id="f3838-200">Одна из них представляет собой внутреннюю часть зоны и взаимодействует с устройствами, подключенными к шлюзу. Другая же представляет собой границу зоны и взаимодействует со всеми сторонними подключениями.</span><span class="sxs-lookup"><span data-stu-id="f3838-200">One faces the devices that are attached to it and represents the inside of the zone, and the other faces all external parties and is the edge of the zone.</span></span>   

### <a name="the-cloud-gateway-zone"></a><span data-ttu-id="f3838-201">Зона облачного шлюза</span><span class="sxs-lookup"><span data-stu-id="f3838-201">The cloud gateway zone</span></span>
<span data-ttu-id="f3838-202">Облачный шлюз — это система, которая обеспечивает удаленный обмен данными между устройствами или полевыми шлюзами из нескольких различных сайтов через пространство общедоступной сети. Обычно данные передаются в облачную систему управления и анализа данных или федерацию таких систем.</span><span class="sxs-lookup"><span data-stu-id="f3838-202">Cloud gateway is a system that enables remote communication from and to devices or field gateways from several different sites across public network space, typically towards a cloud-based control and data analysis system, a federation of such systems.</span></span> <span data-ttu-id="f3838-203">В некоторых случаях облачный шлюз позволяет немедленно получить доступ к специализированным устройствам с помощью таких терминалов, как планшеты или телефоны.</span><span class="sxs-lookup"><span data-stu-id="f3838-203">In some cases, a cloud gateway may immediately facilitate access to special-purpose devices from terminals such as tablets or phones.</span></span> <span data-ttu-id="f3838-204">В этом контексте облако — выделенная система обработки данных, непривязанная к тому же сайту, что подключенные устройства или полевые шлюзы.</span><span class="sxs-lookup"><span data-stu-id="f3838-204">In the context discussed here, “cloud” is meant to refer to a dedicated data processing system that is not bound to the same site as the attached devices or field gateways.</span></span> <span data-ttu-id="f3838-205">Кроме того, в зоне облака операционные меры предотвращают целевой физический доступ и не всегда доступны в инфраструктуре общедоступного облака.</span><span class="sxs-lookup"><span data-stu-id="f3838-205">Also in a Cloud Zone, operational measures prevent targeted physical access and are not necessarily exposed to a “public cloud” infrastructure.</span></span>  

<span data-ttu-id="f3838-206">Облачный шлюз можно сопоставить с наложением виртуализации сети, чтобы изолировать трафик этого шлюза и всех устройств или полевых шлюзов, подключенных к нему, от сетевого трафика.</span><span class="sxs-lookup"><span data-stu-id="f3838-206">A cloud gateway may potentially be mapped into a network virtualization overlay to insulate the cloud gateway and all of its attached devices or field gateways from any other network traffic.</span></span> <span data-ttu-id="f3838-207">Сам облачный шлюз не является ни системой управления устройствами, ни средством обработки или хранения данных устройств. Эти средства только взаимодействуют с ним.</span><span class="sxs-lookup"><span data-stu-id="f3838-207">The cloud gateway itself is neither a device control system nor a processing or storage facility for device data; those facilities interface with the cloud gateway.</span></span> <span data-ttu-id="f3838-208">Зона облачного шлюза включает в себя сам облачный шлюз и все полевые шлюзы и устройства, прямо или опосредованно подключенные к нему.</span><span class="sxs-lookup"><span data-stu-id="f3838-208">The cloud gateway zone includes the cloud gateway itself along with all field gateways and devices directly or indirectly attached to it.</span></span> <span data-ttu-id="f3838-209">Граница зоны — это отдельная контактная зона, через которую взаимодействуют все внешние стороны.</span><span class="sxs-lookup"><span data-stu-id="f3838-209">The edge of the zone is a distinct surface area where all external parties communicate through.</span></span>

### <a name="the-services-zone"></a><span data-ttu-id="f3838-210">Зоны служб</span><span class="sxs-lookup"><span data-stu-id="f3838-210">The services zone</span></span>
<span data-ttu-id="f3838-211">В этом контексте служба — это любой программный компонент или модуль, который взаимодействует с устройствами через полевой или облачный шлюз, чтобы собирать и анализировать данные, а также обеспечивать управление и контроль.</span><span class="sxs-lookup"><span data-stu-id="f3838-211">A “service” is defined for this context as any software component or module that is interfacing with devices through a field- or cloud gateway for data collection and analysis, as well as for command and control.</span></span>  <span data-ttu-id="f3838-212">Службы представляют собой посредников.</span><span class="sxs-lookup"><span data-stu-id="f3838-212">Services are mediators.</span></span> <span data-ttu-id="f3838-213">Они используют свои удостоверения, чтобы взаимодействовать со шлюзами и другими подсистемами, хранят и анализируют данные, автономно выполняют команды на устройствах на основе анализа данных или расписаний, а также предоставляют авторизованным пользователям сведения и возможности управления.</span><span class="sxs-lookup"><span data-stu-id="f3838-213">They act under their identity towards gateways and other subsystems, store and analyze data, autonomously issue commands to devices based on data insights or schedules and expose information and control capabilities to authorized end users.</span></span>

### <a name="information-devices-vs-special-purpose-devices"></a><span data-ttu-id="f3838-214">Информационные и специализированные устройства</span><span class="sxs-lookup"><span data-stu-id="f3838-214">Information-devices vs. special-purpose devices</span></span>
<span data-ttu-id="f3838-215">ПК, телефоны и планшеты — преимущественно интерактивные информационные устройства.</span><span class="sxs-lookup"><span data-stu-id="f3838-215">PCs, phones, and tablets are primarily interactive information devices.</span></span> <span data-ttu-id="f3838-216">Телефоны и планшеты явно оптимизированы для увеличения времени работы от батареи.</span><span class="sxs-lookup"><span data-stu-id="f3838-216">Phones and tablets are explicitly optimized around maximizing battery lifetime.</span></span> <span data-ttu-id="f3838-217">Они частично переходят в спящий режим, если человек не использует устройство или такие функции, как воспроизведение музыки или навигация.</span><span class="sxs-lookup"><span data-stu-id="f3838-217">They preferably turn off partially when not immediately interacting with a person, or when not providing services like playing music or guiding their owner to a particular location.</span></span> <span data-ttu-id="f3838-218">С точки зрения системы люди используют эти информационно-технологические устройства преимущественно в качестве прокси.</span><span class="sxs-lookup"><span data-stu-id="f3838-218">From a systems perspective, these information technology devices are mainly acting as proxies towards people.</span></span> <span data-ttu-id="f3838-219">Они являются воздействующими устройствами, предлагающими действия, и датчиками, которые собирают входные данные.</span><span class="sxs-lookup"><span data-stu-id="f3838-219">They are “people actuators” suggesting actions and “people sensors” collecting input.</span></span> 

<span data-ttu-id="f3838-220">Специализированные устройства (простые датчики температуры или сложные фабричные изделия), состоящие из тысяч компонентов, носят совершенно иной характер.</span><span class="sxs-lookup"><span data-stu-id="f3838-220">Special-purpose devices, from simple temperature sensors to complex factory production lines with thousands of components inside them, are different.</span></span> <span data-ttu-id="f3838-221">Это устройства более узкого предназначения, и даже при наличии пользовательского интерфейса они больше ориентированы на взаимодействие с физическими ресурсами или интеграцию в них.</span><span class="sxs-lookup"><span data-stu-id="f3838-221">These devices are much more scoped in purpose and even if they provide some user interface, they are largely scoped to interfacing with or be integrated into assets in the physical world.</span></span> <span data-ttu-id="f3838-222">Они измеряют данные окружающей среды и создают отчеты о них, включают клапаны, контролируют работу сервосистемы, подают звуковые сигналы, переключают индикаторы и выполняют множество других задач.</span><span class="sxs-lookup"><span data-stu-id="f3838-222">They measure and report environmental circumstances, turn valves, control servos, sound alarms, switch lights, and do many other tasks.</span></span> <span data-ttu-id="f3838-223">Они позволяют делать ту работу, для которой информационные устройства слишком дорогие, большие, непрочные или не предоставляют необходимые функции.</span><span class="sxs-lookup"><span data-stu-id="f3838-223">They help to do work for which an information device is either too generic, too expensive, too big, or too brittle.</span></span> <span data-ttu-id="f3838-224">Конкретные цели применения позволяют сразу же определить их техническую структуру, а доступный бюджет — объем работы и запланированное время эксплуатации.</span><span class="sxs-lookup"><span data-stu-id="f3838-224">The concrete purpose immediately dictates their technical design as well the available monetary budget for their production and scheduled lifetime operation.</span></span> <span data-ttu-id="f3838-225">Вместе эти два ключевых фактора ограничивают занимаемое место и бюджет на потребляемую энергию, а поэтому уменьшают возможности хранения, вычисления и обеспечения безопасности.</span><span class="sxs-lookup"><span data-stu-id="f3838-225">The combination of these two key factors constrains the available operational energy budget, physical footprint, and thus available storage, compute, and security capabilities.</span></span>  

<span data-ttu-id="f3838-226">Проблема с автоматически или удаленно управляемыми устройствами, например физический дефект или ошибка в логике управления, может повлечь преднамеренное несанкционированное вторжение и изменение.</span><span class="sxs-lookup"><span data-stu-id="f3838-226">If something “goes wrong” with automated or remote controllable devices, for example, physical defects or control logic defects to willful unauthorized intrusion and manipulation.</span></span> <span data-ttu-id="f3838-227">Это может уничтожить партии изделий, вызвать разграбление здания или пожар, а для людей — травмы или даже смерть.</span><span class="sxs-lookup"><span data-stu-id="f3838-227">The production lots may be destroyed, buildings may be looted or burned down, and people may be injured or even die.</span></span> <span data-ttu-id="f3838-228">Конечно, этот тип ущерба кардинально отличается от превышения лимита на украденной кредитной карте.</span><span class="sxs-lookup"><span data-stu-id="f3838-228">This is, of course, a whole different class of damage than someone maxing out a stolen credit card's limit.</span></span> <span data-ttu-id="f3838-229">Средства безопасности устройств управления, а также для датчиков, которые могут инициировать команды управления, должны быть лучше, чем в любом коммерческом или банковском сценарии.</span><span class="sxs-lookup"><span data-stu-id="f3838-229">The security bar for devices that make things move, and also for sensor data that eventually results in commands that cause things to move, must be higher than in any e-commerce or banking scenario.</span></span> 

### <a name="device-control-and-device-data-interactions"></a><span data-ttu-id="f3838-230">Взаимодействие контроля устройства и данных устройства</span><span class="sxs-lookup"><span data-stu-id="f3838-230">Device control and device data interactions</span></span>
<span data-ttu-id="f3838-231">Перед подключенными специализированными устройствами открывается большое количество возможных зон и шаблонов взаимодействия, которые необходимо учесть при создании инфраструктуры безопасности цифрового доступа к этим устройствам.</span><span class="sxs-lookup"><span data-stu-id="f3838-231">Connected special-purpose devices have a significant number of potential interaction surface areas and interaction patterns, all of which must be considered to provide a framework for securing digital access to those devices.</span></span> <span data-ttu-id="f3838-232">Здесь термин "цифровой доступ" используется, чтобы отличить соответствующие операции от тех, которые выполняются при прямом взаимодействии с устройством, когда безопасность обеспечивается за счет физического контроля доступа.</span><span class="sxs-lookup"><span data-stu-id="f3838-232">The term “digital access” is used here to distinguish from any operations that are carried out through direct device interaction where access security is provided through physical access control.</span></span> <span data-ttu-id="f3838-233">Например, устройство находится в комнате, дверь которой закрыта на замок.</span><span class="sxs-lookup"><span data-stu-id="f3838-233">For example, putting the device into a room with a lock on the door.</span></span> <span data-ttu-id="f3838-234">Хотя физический доступ нельзя запретить с помощью программного обеспечения и оборудования, можно предпринять меры, чтобы предотвратить такой доступ и уменьшить вероятность вмешательства в интерфейс системы.</span><span class="sxs-lookup"><span data-stu-id="f3838-234">While physical access cannot be denied using software and hardware, measures can be taken to prevent physical access from leading to system interference.</span></span> 

<span data-ttu-id="f3838-235">Исследуя шаблоны взаимодействия, в рамках моделирования мы уделяли одинаковое внимание контролю устройства и данным устройства.</span><span class="sxs-lookup"><span data-stu-id="f3838-235">As we explore the interaction patterns, we will look at “device control” and “device data” with the same level of attention while threat modeling.</span></span> <span data-ttu-id="f3838-236">Контроль устройства можно классифицировать как ввод любых сведений, предоставленных устройству любой стороной, чтобы изменить его поведение или повлиять на него, а именно на его состояние или состояние его среды.</span><span class="sxs-lookup"><span data-stu-id="f3838-236">“Device control” can be classified as any information that is provided to a device by any party with the goal of changing or influencing its behavior towards its state or the state of its environment.</span></span> <span data-ttu-id="f3838-237">Данные устройства можно классифицировать как любые сведения о его состоянии и наблюдаемом состоянии его среды, которые устройство предоставляет другой стороне.</span><span class="sxs-lookup"><span data-stu-id="f3838-237">“Device data” can be classified as any information that a device emits to any other party about its state and the observed state of its environment.</span></span> 

## <a name="threat-modeling-the-azure-iot-reference-architecture"></a><span data-ttu-id="f3838-238">Моделирование рисков эталонной архитектуры Azure IoT</span><span class="sxs-lookup"><span data-stu-id="f3838-238">Threat modeling the Azure IoT reference architecture</span></span>
<span data-ttu-id="f3838-239">Корпорация Майкрософт использует вышеуказанную платформу, чтобы создавать модели рисков для Azure IoT.</span><span class="sxs-lookup"><span data-stu-id="f3838-239">Microsoft uses the framework outlined above to do threat modeling for Azure IoT.</span></span> <span data-ttu-id="f3838-240">В разделе ниже мы используем конкретный пример эталонной архитектуры Azure IoT, чтобы показать, как продумать моделирование рисков для Интернета вещей, а также устранить найденные угрозы.</span><span class="sxs-lookup"><span data-stu-id="f3838-240">In the section below we therefore use the concrete example of Azure IoT Reference Architecture to demonstrate how to think about threat modeling for IoT and how to address the threats identified.</span></span> <span data-ttu-id="f3838-241">В нашем сценарии мы выявили четыре основных области, на которых следует сосредоточиться:</span><span class="sxs-lookup"><span data-stu-id="f3838-241">In our case we identified four main areas of focus:</span></span>

* <span data-ttu-id="f3838-242">устройства и источники данных;</span><span class="sxs-lookup"><span data-stu-id="f3838-242">Devices and Data Sources,</span></span>
* <span data-ttu-id="f3838-243">передача данных;</span><span class="sxs-lookup"><span data-stu-id="f3838-243">Data Transport,</span></span>
* <span data-ttu-id="f3838-244">обработка устройств и событий;</span><span class="sxs-lookup"><span data-stu-id="f3838-244">Device and Event Processing, and</span></span>
* <span data-ttu-id="f3838-245">Уровень представления</span><span class="sxs-lookup"><span data-stu-id="f3838-245">Presentation</span></span>

![Моделирование рисков для Azure IoT](media/iot-security-architecture/iot-security-architecture-fig2.png) 

<span data-ttu-id="f3838-247">На рисунке ниже показано упрощенное представление архитектуры IoT Microsoft со схемой потоков данных, моделью, которая используется в средстве Майкрософт для моделирования рисков (Microsoft Threat Modeling Tool).</span><span class="sxs-lookup"><span data-stu-id="f3838-247">The diagram below provides a simplified view of Microsoft’s IoT Architecture using a Data Flow Diagram model that is used by the Microsoft Threat Modeling Tool:</span></span>

![Моделирование рисков для Azure IoT с помощью средства Microsoft Threat Modeling Tool](media/iot-security-architecture/iot-security-architecture-fig3.png)

<span data-ttu-id="f3838-249">Следует отметить, что в этой архитектуре разделены возможности шлюза и устройств.</span><span class="sxs-lookup"><span data-stu-id="f3838-249">It is important to note that the architecture separates the device and gateway capabilities.</span></span> <span data-ttu-id="f3838-250">Так пользователь может использовать устройства шлюзов более безопасно: они способны взаимодействовать с облачным шлюзом, используя протоколы безопасности. Обычно это требует больше ресурсов обработки, чем может предоставить собственное устройство, например термостат.</span><span class="sxs-lookup"><span data-stu-id="f3838-250">This allows the user to leverage gateway devices that are more secure: they are capable of communicating with the cloud gateway using secure protocols, which typically requires greater processing overhead that a native device  - such as a thermostat - could provide on its own.</span></span> <span data-ttu-id="f3838-251">Предполагается, что в зоне служб Azure облачный шлюз представлен службой центра IoT Azure.</span><span class="sxs-lookup"><span data-stu-id="f3838-251">In the Azure services zone, we assume that the Cloud Gateway is represented by the Azure IoT Hub service.</span></span>

### <a name="device-and-data-sourcesdata-transport"></a><span data-ttu-id="f3838-252">Устройства, источники данных и передача данных</span><span class="sxs-lookup"><span data-stu-id="f3838-252">Device and data sources/data transport</span></span>
<span data-ttu-id="f3838-253">В этом подразделе подробно рассматривается моделирование рисков вышеописанной архитектуры и приведены общие сведения о том, как устранить некоторые характерные проблемы.</span><span class="sxs-lookup"><span data-stu-id="f3838-253">This section explores the architecture outlined above through the lens of threat modeling and gives an overview of how we are addressing some of the inherent concerns.</span></span> <span data-ttu-id="f3838-254">Мы рассмотрим следующие основные элементы модели рисков:</span><span class="sxs-lookup"><span data-stu-id="f3838-254">We will focus on the core elements of a threat model:</span></span>

* <span data-ttu-id="f3838-255">процессы (подконтрольные и внешние);</span><span class="sxs-lookup"><span data-stu-id="f3838-255">Processes (those under our control and external items)</span></span>
* <span data-ttu-id="f3838-256">взаимодействие (или потоки данных);</span><span class="sxs-lookup"><span data-stu-id="f3838-256">Communication (also called data flows)</span></span>
* <span data-ttu-id="f3838-257">хранение (или хранилища данных).</span><span class="sxs-lookup"><span data-stu-id="f3838-257">Storage (also called data stores)</span></span>

#### <a name="processes"></a><span data-ttu-id="f3838-258">Процессы</span><span class="sxs-lookup"><span data-stu-id="f3838-258">Processes</span></span>
<span data-ttu-id="f3838-259">Для каждой из категорий архитектуры Azure IoT мы попытаемся устранить различные риски на разных этапах существования данных: в процессах, при взаимодействии и хранении.</span><span class="sxs-lookup"><span data-stu-id="f3838-259">In each of the categories outlined in the Azure IoT architecture, we try to mitigate a number of different threats across the different stages data/information exists in: process, communication, and storage.</span></span> <span data-ttu-id="f3838-260">Ниже приведен обзор самых распространенных рисков для категории процессов и описание лучших способов того, как их устранить:</span><span class="sxs-lookup"><span data-stu-id="f3838-260">Below we give an overview of the most common ones for the “process” category, followed by an overview of how these could be best mitigated:</span></span> 

<span data-ttu-id="f3838-261">**Спуфинг (Spoofing, далее "S").** Злоумышленник может извлечь материал криптографического ключа из программного обеспечения или оборудования устройства, а затем получить доступ к системе с помощью другого физического или виртуального устройства, используя удостоверение устройства, с которого был украден материал.</span><span class="sxs-lookup"><span data-stu-id="f3838-261">**Spoofing (S)**: An attacker may extract cryptographic key material from a device, either at the software or hardware level, and subsequently access the system with a different physical or virtual device under the identity of the device the key material has been taken from.</span></span> <span data-ttu-id="f3838-262">Хороший пример: с помощью пультов дистанционного управления можно включить любой телевизор, поэтому их часто используют, чтобы подшутить над кем-то.</span><span class="sxs-lookup"><span data-stu-id="f3838-262">A good illustration is remote controls that can turn any TV and that are popular prankster tools.</span></span>

<span data-ttu-id="f3838-263">**Отказ в обслуживании (Denial of Service, далее "D").** Устройство может быть распознано как неработоспособное или неспособное обмениваться данными из-за радиочастотных помех или потому, что обрезаны провода.</span><span class="sxs-lookup"><span data-stu-id="f3838-263">**Denial of Service (D)**: A device can be rendered incapable of functioning or communicating by interfering with radio frequencies or cutting wires.</span></span> <span data-ttu-id="f3838-264">Например, камера видеонаблюдения, питание или сетевое подключение которой преднамеренно вывели из строя, не будет передавать данные.</span><span class="sxs-lookup"><span data-stu-id="f3838-264">For example, a surveillance camera that had its power or network connection intentionally knocked out will not report data, at all.</span></span>

<span data-ttu-id="f3838-265">**Незаконное изменение (Tampering, далее "T").** Злоумышленник может частично или полностью заменить программное обеспечение, которое работает на устройстве, чтобы другое ПО могло использовать удостоверение подлинности устройства, если материал ключа или средства шифрования, в которых есть материалы ключей, доступны несанкционированной программе.</span><span class="sxs-lookup"><span data-stu-id="f3838-265">**Tampering (T)**: An attacker may partially or wholly replace the software running on the device, potentially allowing the replaced software to leverage the genuine identity of the device if the key material or the cryptographic facilities holding key materials were available to the illicit program.</span></span> <span data-ttu-id="f3838-266">Например, злоумышленник может использовать полученный материал ключа, чтобы перехватить или изъять данные с устройства во время передачи и заменить их ложными данными, для проверки подлинности которых использовался украденный материал ключа.</span><span class="sxs-lookup"><span data-stu-id="f3838-266">For example, an attacker may leverage extracted key material to intercept and suppress data from the device on the communication path and replace it with false data that is authenticated with the stolen key material.</span></span>

<span data-ttu-id="f3838-267">**Раскрытие информации (Information Disclosure, далее "I").** Если на устройстве работает измененное программное обеспечение, из него возможна утечка данных посторонним лицам.</span><span class="sxs-lookup"><span data-stu-id="f3838-267">**Information Disclosure (I)**: If the device is running manipulated software, such manipulated software could potentially leak data to unauthorized parties.</span></span> <span data-ttu-id="f3838-268">Например, злоумышленник может использовать полученный материал ключа, чтобы вмешаться в обмен данными между устройством и контроллером, полевым или облачным шлюзом, а затем получать сведения.</span><span class="sxs-lookup"><span data-stu-id="f3838-268">For example, an attacker may leverage extracted key material to inject itself into the communication path between the device and a controller or field gateway or cloud gateway to siphon off information.</span></span>

<span data-ttu-id="f3838-269">**Несанкционированное повышение привилегий (Information Disclosure, далее "E").** Устройство, которое выполняет определенную функцию, используют для принудительного выполнения других действий.</span><span class="sxs-lookup"><span data-stu-id="f3838-269">**Elevation of Privilege (E)**: A device that does specific function can be forced to do something else.</span></span> <span data-ttu-id="f3838-270">Например, клапан, запрограммированный открываться наполовину, могут настроить открываться полностью.</span><span class="sxs-lookup"><span data-stu-id="f3838-270">For example, a valve that is programmed to open half way can be tricked to open all the way.</span></span>

| <span data-ttu-id="f3838-271">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="f3838-271">**Component**</span></span> | <span data-ttu-id="f3838-272">**Угроза**</span><span class="sxs-lookup"><span data-stu-id="f3838-272">**Threat**</span></span> | <span data-ttu-id="f3838-273">**Предотвращение**</span><span class="sxs-lookup"><span data-stu-id="f3838-273">**Mitigation**</span></span> | <span data-ttu-id="f3838-274">**Риск**</span><span class="sxs-lookup"><span data-stu-id="f3838-274">**Risk**</span></span> | <span data-ttu-id="f3838-275">**Реализация**</span><span class="sxs-lookup"><span data-stu-id="f3838-275">**Implementation**</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="f3838-276">Устройство</span><span class="sxs-lookup"><span data-stu-id="f3838-276">Device</span></span> |<span data-ttu-id="f3838-277">S</span><span class="sxs-lookup"><span data-stu-id="f3838-277">S</span></span> |<span data-ttu-id="f3838-278">Назначить устройству удостоверение и проверять его подлинность</span><span class="sxs-lookup"><span data-stu-id="f3838-278">Assigning identity to the device and authenticating the device</span></span> |<span data-ttu-id="f3838-279">Замена устройства или его части другим устройством.</span><span class="sxs-lookup"><span data-stu-id="f3838-279">Replacing device or part of the device with some other device.</span></span> <span data-ttu-id="f3838-280">Как узнать, какое из устройств подлинное?</span><span class="sxs-lookup"><span data-stu-id="f3838-280">How do we know we are talking to the right device?</span></span> |<span data-ttu-id="f3838-281">Проверка подлинности устройства с использованием протокола TLS или IPSec.</span><span class="sxs-lookup"><span data-stu-id="f3838-281">Authenticating the device, using Transport Layer Security (TLS) or IPSec.</span></span> <span data-ttu-id="f3838-282">Инфраструктура должна поддерживать общие ключи для тех устройств, которые не выполняют полное асимметричное шифрование.</span><span class="sxs-lookup"><span data-stu-id="f3838-282">Infrastructure should support using pre-shared key (PSK) on those devices that cannot handle full asymmetric cryptography.</span></span> <span data-ttu-id="f3838-283">Использование Azure AD, [OAuth](http://www.rfc-editor.org/in-notes/internet-drafts/draft-ietf-ace-oauth-authz-01.txt)</span><span class="sxs-lookup"><span data-stu-id="f3838-283">Leverage Azure AD, [OAuth](http://www.rfc-editor.org/in-notes/internet-drafts/draft-ietf-ace-oauth-authz-01.txt)</span></span> |
| <span data-ttu-id="f3838-284">TRID</span><span class="sxs-lookup"><span data-stu-id="f3838-284">TRID</span></span> |<span data-ttu-id="f3838-285">Применить механизмы защиты от незаконного изменения на устройстве, чтобы сделать невозможным извлечение из него ключей и других криптографических материалов</span><span class="sxs-lookup"><span data-stu-id="f3838-285">Apply tamperproof mechanisms to the device for example by making it very hard to impossible to extract keys and other cryptographic material from the device.</span></span> |<span data-ttu-id="f3838-286">Кто-то может незаконно изменить устройство (физически вмешаться).</span><span class="sxs-lookup"><span data-stu-id="f3838-286">The risk is if someone is tampering the device (physical interference).</span></span> <span data-ttu-id="f3838-287">Нужно убедиться, что устройство не изменили незаконным образом</span><span class="sxs-lookup"><span data-stu-id="f3838-287">How are we sure, that device has not tampered with.</span></span> |<span data-ttu-id="f3838-288">Устранить риски эффективнее всего позволяет доверенный платформенный модуль. Он позволяет хранить ключи на специальной встроенной схеме, из которой нельзя считать ключи, но их можно использовать только в криптографических операциях, предусматривающих использование ключей без раскрытия.</span><span class="sxs-lookup"><span data-stu-id="f3838-288">The most effective mitigation is a trusted platform module (TPM) capability that allows storing keys in special on-chip circuitry from which the keys cannot be read, but can only be used for cryptographic operations that use the key but never disclose the key.</span></span> <span data-ttu-id="f3838-289">Шифрование памяти устройства.</span><span class="sxs-lookup"><span data-stu-id="f3838-289">Memory encryption of the device.</span></span> <span data-ttu-id="f3838-290">Управление ключами устройства.</span><span class="sxs-lookup"><span data-stu-id="f3838-290">Key management for the device.</span></span> <span data-ttu-id="f3838-291">Подписывание кода</span><span class="sxs-lookup"><span data-stu-id="f3838-291">Signing the code.</span></span> | |
| <span data-ttu-id="f3838-292">E</span><span class="sxs-lookup"><span data-stu-id="f3838-292">E</span></span> |<span data-ttu-id="f3838-293">Обеспечить контроль доступа к устройству.</span><span class="sxs-lookup"><span data-stu-id="f3838-293">Having access control of the device.</span></span> <span data-ttu-id="f3838-294">Применить схему авторизации</span><span class="sxs-lookup"><span data-stu-id="f3838-294">Authorization scheme.</span></span> |<span data-ttu-id="f3838-295">Если устройство позволяет выполнять отдельные действия с помощью команд из внешнего источника или даже со скомпрометированного датчика, при атаке оно позволит выполнять операции, которые недоступны при других обстоятельствах</span><span class="sxs-lookup"><span data-stu-id="f3838-295">If the device allows for individual actions to be performed based on commands from an outside source, or even compromised sensors, it will allow the attack to perform operations not otherwise accessible.</span></span> |<span data-ttu-id="f3838-296">Реализация схемы авторизации для устройства</span><span class="sxs-lookup"><span data-stu-id="f3838-296">Having authorization scheme for the device</span></span> | |
| <span data-ttu-id="f3838-297">Полевой шлюз</span><span class="sxs-lookup"><span data-stu-id="f3838-297">Field Gateway</span></span> |<span data-ttu-id="f3838-298">S</span><span class="sxs-lookup"><span data-stu-id="f3838-298">S</span></span> |<span data-ttu-id="f3838-299">Обеспечить аутентификацию полевого шлюза при доступе к облачному шлюзу (на основе сертификатов, общих ключей, утверждений и т. д.)</span><span class="sxs-lookup"><span data-stu-id="f3838-299">Authenticating the Field gateway to Cloud Gateway (cert based, PSK, Claim based,..)</span></span> |<span data-ttu-id="f3838-300">Если кто-то может подделать данные полевого шлюза, он сможет выдавать свое устройство за любое другое</span><span class="sxs-lookup"><span data-stu-id="f3838-300">If someone can spoof Field Gateway, then it can present itself as any device.</span></span> |<span data-ttu-id="f3838-301">TLS RSA/PSK, IPSec, [RFC 4279](https://tools.ietf.org/html/rfc4279).</span><span class="sxs-lookup"><span data-stu-id="f3838-301">TLS RSA/PSK, IPSec, [RFC 4279](https://tools.ietf.org/html/rfc4279).</span></span> <span data-ttu-id="f3838-302">В отношении тех же основных проблем хранения и обеспечения соответствия устройств в целом лучшее решение — использовать доверенный платформенный модуль.</span><span class="sxs-lookup"><span data-stu-id="f3838-302">All the same key storage and attestation concerns of devices in general – best case is use TPM.</span></span> <span data-ttu-id="f3838-303">Использование расширения 6LowPAN для IPSec, чтобы обеспечить поддержку сетей беспроводных датчиков</span><span class="sxs-lookup"><span data-stu-id="f3838-303">6LowPAN extension for IPSec to support Wireless Sensor Networks (WSN).</span></span> |
| <span data-ttu-id="f3838-304">TRID</span><span class="sxs-lookup"><span data-stu-id="f3838-304">TRID</span></span> |<span data-ttu-id="f3838-305">Защитить полевой шлюз от незаконного изменения (с помощью доверенного платформенного модуля)</span><span class="sxs-lookup"><span data-stu-id="f3838-305">Protect the Field Gateway against tampering (TPM?)</span></span> |<span data-ttu-id="f3838-306">Если спуфингу, направленному на полевой шлюз, подвергнется облачный шлюз, это может повлечь раскрытие информации и незаконное изменение данных</span><span class="sxs-lookup"><span data-stu-id="f3838-306">Spoofing attacks that trick the cloud gateway thinking it is talking to field gateway could result in information disclosure and data tampering</span></span> |<span data-ttu-id="f3838-307">Шифрование памяти, доверенные платформенные модули, проверка подлинности</span><span class="sxs-lookup"><span data-stu-id="f3838-307">Memory encryption, TPM’s, authentication.</span></span> | |
| <span data-ttu-id="f3838-308">E</span><span class="sxs-lookup"><span data-stu-id="f3838-308">E</span></span> |<span data-ttu-id="f3838-309">Реализовать механизм контроля доступа для полевого шлюза</span><span class="sxs-lookup"><span data-stu-id="f3838-309">Access control mechanism for Field Gateway</span></span> | | | |

<span data-ttu-id="f3838-310">Ниже приведены некоторые примеры угроз, которые могут быть в этой категории.</span><span class="sxs-lookup"><span data-stu-id="f3838-310">Here are some examples of threats in this category:</span></span>

<span data-ttu-id="f3838-311">Спуфинг. Злоумышленник может извлечь материал криптографического ключа из устройства, оборудования или программного обеспечения, а затем получить доступ к системе с помощью другого физического или виртуального устройства, используя удостоверение устройства, с которого украл материал.</span><span class="sxs-lookup"><span data-stu-id="f3838-311">Spoofing: An attacker may extract cryptographic key material from a device, either at the software or hardware level, and subsequently access the system with a different physical or virtual device under the identity of the device the key material has been taken from.</span></span>

<span data-ttu-id="f3838-312">**Отказ в обслуживании.** Устройство может быть распознано как неработоспособное или неспособное обмениваться данными из-за радиочастотных помех или потому, что обрезаны провода.</span><span class="sxs-lookup"><span data-stu-id="f3838-312">**Denial of Service**: A device can be rendered incapable of functioning or communicating by interfering with radio frequencies or cutting wires.</span></span> <span data-ttu-id="f3838-313">Например, камера видеонаблюдения, питание или сетевое подключение которой преднамеренно вывели из строя, не будет передавать данные.</span><span class="sxs-lookup"><span data-stu-id="f3838-313">For example, a surveillance camera that had its power or network connection intentionally knocked out will not report data, at all.</span></span>

<span data-ttu-id="f3838-314">**Незаконное изменение.** Злоумышленник может частично или полностью заменить программное обеспечение, которое работает на устройстве, чтобы ПО могло использовать удостоверение подлинности устройства, если материал ключа или средства шифрования, в которых есть материалы ключей, доступны несанкционированной программе.</span><span class="sxs-lookup"><span data-stu-id="f3838-314">**Tampering**: An attacker may partially or wholly replace the software running on the device, potentially allowing the replaced software to leverage the genuine identity of the device if the key material or the cryptographic facilities holding key materials were available to the illicit program.</span></span>

<span data-ttu-id="f3838-315">**Незаконное изменение.** Чтобы камера видеонаблюдения не засняла злоумышленника, он может настроить в качестве показываемой картинки фотографию пустого коридора.</span><span class="sxs-lookup"><span data-stu-id="f3838-315">**Tampering**: A surveillance camera that’s showing a visible-spectrum picture of an empty hallway could be aimed at a photograph of such a hallway.</span></span> <span data-ttu-id="f3838-316">Дымовой или пожарный датчик может передать данные о возгорании, если кто-то держит возле него включенную зажигалку.</span><span class="sxs-lookup"><span data-stu-id="f3838-316">A smoke or fire sensor could be reporting someone holding a lighter under it.</span></span> <span data-ttu-id="f3838-317">В обоих случаях устройства полностью технически исправны, но будут сообщать системе сведения, полученные в результате изменений.</span><span class="sxs-lookup"><span data-stu-id="f3838-317">In either case, the device may be technically fully trustworthy towards the system, but it will report manipulated information.</span></span>

<span data-ttu-id="f3838-318">**Незаконное изменение.** Злоумышленник может использовать полученный материал ключа, чтобы перехватить или изъять данные с устройства во время передачи и заменить их на ложные данные, а значит аутентифицироваться, используя украденный материал ключа.</span><span class="sxs-lookup"><span data-stu-id="f3838-318">**Tampering**: An attacker may leverage extracted key material to intercept and suppress data from the device on the communication path and replace it with false data that is authenticated with the stolen key material.</span></span>

<span data-ttu-id="f3838-319">**Незаконное изменение.** Злоумышленник может частично или полностью заменить программное обеспечение, которое работает на устройстве, чтобы ПО могло использовать удостоверение подлинности данного устройства, если материал ключа или средства шифрования, в которых есть материалы ключей, доступны несанкционированной программе.</span><span class="sxs-lookup"><span data-stu-id="f3838-319">**Tampering**: An attacker may partially or completely replace the software running on the device, potentially allowing the replaced software to leverage the genuine identity of the device if the key material or the cryptographic facilities holding key materials were available to the illicit program.</span></span>

<span data-ttu-id="f3838-320">**Раскрытие информации.** Если на устройстве работает измененное программное обеспечение, из него возможна утечка данных посторонним лицам.</span><span class="sxs-lookup"><span data-stu-id="f3838-320">**Information Disclosure**: If the device is running manipulated software, such manipulated software could potentially leak data to unauthorized parties.</span></span>

<span data-ttu-id="f3838-321">**Раскрытие информации.** Злоумышленник может использовать полученный материал ключа, чтобы вмешаться в обмен данными между устройством и контроллером, полевым или облачным шлюзом, а затем получать сведения.</span><span class="sxs-lookup"><span data-stu-id="f3838-321">**Information Disclosure**: An attacker may leverage extracted key material to inject itself into the communication path between the device and a controller or field gateway or cloud gateway to siphon off information.</span></span>

<span data-ttu-id="f3838-322">**Отказ в обслуживании.** Устройство может быть отключено или включено в режиме, в котором невозможно поддерживать связь (это могут делать преднамеренно со многими производственными установками).</span><span class="sxs-lookup"><span data-stu-id="f3838-322">**Denial of Service**: The device can be turned off or turned into a mode where communication is not possible (which is intentional in many industrial machines).</span></span>

<span data-ttu-id="f3838-323">**Незаконное изменение.** Для устройства могут настроить другое неизвестное системе управления состояние (параметры, которые не относятся к эталонным), из-за чего устройство будет передавать данные, которые можно неправильно интерпретировать.</span><span class="sxs-lookup"><span data-stu-id="f3838-323">**Tampering**: The device can be reconfigured to operate in a state unknown to the control system (outside of known calibration parameters) and thus provide data that can be misinterpreted</span></span>

<span data-ttu-id="f3838-324">**Несанкционированное повышение привилегий.** Это случай, когда устройство, которое выполняет определенную функцию, используют для принудительного выполнения других действий.</span><span class="sxs-lookup"><span data-stu-id="f3838-324">**Elevation of Privilege**: A device that does specific function can be forced to do something else.</span></span> <span data-ttu-id="f3838-325">Например, клапан, запрограммированный открываться наполовину, могут настроить открываться полностью.</span><span class="sxs-lookup"><span data-stu-id="f3838-325">For example, a valve that is programmed to open half way can be tricked to open all the way.</span></span>

<span data-ttu-id="f3838-326">**Отказ в обслуживании.** Устройство могут перевести в состояние, при котором невозможно поддерживать связь.</span><span class="sxs-lookup"><span data-stu-id="f3838-326">**Denial of Service**: The device can be turned into a state where communication is not possible.</span></span>

<span data-ttu-id="f3838-327">**Незаконное изменение.** Для устройства могут настроить другое неизвестное системе управления состояние (параметры, которые не относятся к эталонным), из-за чего устройство будет передавать данные, которые можно неправильно интерпретировать.</span><span class="sxs-lookup"><span data-stu-id="f3838-327">**Tampering**: The device can be reconfigured to operate in a state unknown to the control system (outside of known calibration parameters) and thus provide data that can be misinterpreted.</span></span>

<span data-ttu-id="f3838-328">**Спуфинг, незаконное изменение данных и отказ.** При отсутствии защиты (она редко используется в потребительских пультах дистанционного управления) злоумышленник может анонимно изменять состояние устройства.</span><span class="sxs-lookup"><span data-stu-id="f3838-328">**Spoofing/Tampering/Repudiation**: If not secured (which is rarely the case with consumer remote controls) an attacker can manipulate the state of a device anonymously.</span></span> <span data-ttu-id="f3838-329">Хороший пример: с помощью пультов дистанционного управления можно включить любой телевизор, поэтому их часто используют, чтобы подшутить над кем-то.</span><span class="sxs-lookup"><span data-stu-id="f3838-329">A good illustration is remote controls that can turn any TV and that are popular prankster tools.</span></span>

#### <a name="communication"></a><span data-ttu-id="f3838-330">Обмен данными</span><span class="sxs-lookup"><span data-stu-id="f3838-330">Communication</span></span>
<span data-ttu-id="f3838-331">Здесь описаны угрозы, связанные с путем обмена данными между устройствами, устройствами и полевыми или облачными шлюзами.</span><span class="sxs-lookup"><span data-stu-id="f3838-331">Threats around communication path between devices, devices and field gateways and device and cloud gateway.</span></span> <span data-ttu-id="f3838-332">В таблице ниже приведены некоторые рекомендации по использованию открытых портов устройств и VPN:</span><span class="sxs-lookup"><span data-stu-id="f3838-332">The table below has some guidance around open sockets on the device/VPN:</span></span>

| <span data-ttu-id="f3838-333">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="f3838-333">**Component**</span></span> | <span data-ttu-id="f3838-334">**Угроза**</span><span class="sxs-lookup"><span data-stu-id="f3838-334">**Threat**</span></span> | <span data-ttu-id="f3838-335">**Предотвращение**</span><span class="sxs-lookup"><span data-stu-id="f3838-335">**Mitigation**</span></span> | <span data-ttu-id="f3838-336">**Риск**</span><span class="sxs-lookup"><span data-stu-id="f3838-336">**Risk**</span></span> | <span data-ttu-id="f3838-337">**Реализация**</span><span class="sxs-lookup"><span data-stu-id="f3838-337">**Implementation**</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="f3838-338">Устройство, центр IoT</span><span class="sxs-lookup"><span data-stu-id="f3838-338">Device IoT Hub</span></span> |<span data-ttu-id="f3838-339">TID</span><span class="sxs-lookup"><span data-stu-id="f3838-339">TID</span></span> |<span data-ttu-id="f3838-340">(От D) использовать TLS (для общих ключей или RSA), чтобы шифровать трафик</span><span class="sxs-lookup"><span data-stu-id="f3838-340">(D)TLS (PSK/RSA) to encrypt the traffic</span></span> |<span data-ttu-id="f3838-341">Перехват данных обмена между устройством и шлюзом или вмешательство в обмен</span><span class="sxs-lookup"><span data-stu-id="f3838-341">Eavesdropping or interfering the communication between the device and the gateway</span></span> |<span data-ttu-id="f3838-342">Обеспечение безопасности на уровне протокола.</span><span class="sxs-lookup"><span data-stu-id="f3838-342">Security on the protocol level.</span></span> <span data-ttu-id="f3838-343">При использовании пользовательских протоколов нужно выяснить, как обеспечить соответствующую защиту.</span><span class="sxs-lookup"><span data-stu-id="f3838-343">With custom protocols, we need to figure out how to protect them.</span></span> <span data-ttu-id="f3838-344">В большинстве случаев устройство отправляет данные в центр IoT (инициирует подключение)</span><span class="sxs-lookup"><span data-stu-id="f3838-344">In most cases, the communication takes place from the device to the IoT Hub (device initiates the connection).</span></span> |
| <span data-ttu-id="f3838-345">Устройство, устройство</span><span class="sxs-lookup"><span data-stu-id="f3838-345">Device Device</span></span> |<span data-ttu-id="f3838-346">TID</span><span class="sxs-lookup"><span data-stu-id="f3838-346">TID</span></span> |<span data-ttu-id="f3838-347">(От D) использовать TLS (для общих ключей или RSA), чтобы шифровать трафик</span><span class="sxs-lookup"><span data-stu-id="f3838-347">(D)TLS (PSK/RSA) to encrypt the traffic.</span></span> |<span data-ttu-id="f3838-348">Считывание данных при их передаче между устройствами.</span><span class="sxs-lookup"><span data-stu-id="f3838-348">Reading data in transit between devices.</span></span> <span data-ttu-id="f3838-349">Незаконное изменение данных.</span><span class="sxs-lookup"><span data-stu-id="f3838-349">Tampering with the data.</span></span> <span data-ttu-id="f3838-350">Перегрузка устройства новыми подключениями</span><span class="sxs-lookup"><span data-stu-id="f3838-350">Overloading the device with new connections</span></span> |<span data-ttu-id="f3838-351">Обеспечение безопасности на уровне протокола (HTTP, HTTPS, AMQP, MQTT или CoAP).</span><span class="sxs-lookup"><span data-stu-id="f3838-351">Security on the protocol level (MQTT/AMQP/HTTP/CoAP.</span></span> <span data-ttu-id="f3838-352">При использовании пользовательских протоколов нужно выяснить, как обеспечить соответствующую защиту.</span><span class="sxs-lookup"><span data-stu-id="f3838-352">With custom protocols, we need to figure out how to protect them.</span></span> <span data-ttu-id="f3838-353">Чтобы устранить риск атаки типа "отказ в обслуживании", нужно устанавливать одноранговые подключения устройств через полевой или облачный шлюз, чтобы они работали в качестве клиентов по отношению к сети.</span><span class="sxs-lookup"><span data-stu-id="f3838-353">The mitigation for the DoS threat is to peer devices through a cloud or field gateway and have them only act as clients towards the network.</span></span> <span data-ttu-id="f3838-354">Пиринг может повлечь создание прямого подключения между одноранговыми узлами через шлюз</span><span class="sxs-lookup"><span data-stu-id="f3838-354">The peering may result in a direct connection between the peers after having been brokered by the gateway</span></span> |
| <span data-ttu-id="f3838-355">Внешняя сущность, устройство</span><span class="sxs-lookup"><span data-stu-id="f3838-355">External Entity Device</span></span> |<span data-ttu-id="f3838-356">TID</span><span class="sxs-lookup"><span data-stu-id="f3838-356">TID</span></span> |<span data-ttu-id="f3838-357">Надежное подключение внешней сущности к устройству</span><span class="sxs-lookup"><span data-stu-id="f3838-357">Strong pairing of the external entity to the device</span></span> |<span data-ttu-id="f3838-358">Перехват подключения к устройству.</span><span class="sxs-lookup"><span data-stu-id="f3838-358">Eavesdropping the connection to the device.</span></span> <span data-ttu-id="f3838-359">Вмешательство в обмен данными с устройством</span><span class="sxs-lookup"><span data-stu-id="f3838-359">Interfering the communication with the device</span></span> |<span data-ttu-id="f3838-360">Обеспечить безопасное подключение внешней сущности к устройству, используя технологию Bluetooth с низким энергопотреблением или NFC.</span><span class="sxs-lookup"><span data-stu-id="f3838-360">Securely pairing the external entity to the device NFC/Bluetooth LE.</span></span> <span data-ttu-id="f3838-361">Обеспечить контроль рабочей панели устройства (физический)</span><span class="sxs-lookup"><span data-stu-id="f3838-361">Controlling the operational panel of the device (Physical)</span></span> |
| <span data-ttu-id="f3838-362">Полевой шлюз, облачный шлюз</span><span class="sxs-lookup"><span data-stu-id="f3838-362">Field Gateway Cloud Gateway</span></span> |<span data-ttu-id="f3838-363">TID</span><span class="sxs-lookup"><span data-stu-id="f3838-363">TID</span></span> |<span data-ttu-id="f3838-364">Использовать TLS (для общих ключей или RSA), чтобы шифровать трафик</span><span class="sxs-lookup"><span data-stu-id="f3838-364">TLS (PSK/RSA) to encrypt the traffic.</span></span> |<span data-ttu-id="f3838-365">Перехват данных обмена между устройством и шлюзом или вмешательство в обмен</span><span class="sxs-lookup"><span data-stu-id="f3838-365">Eavesdropping or interfering the communication between the device and the gateway</span></span> |<span data-ttu-id="f3838-366">Обеспечение безопасности на уровне протокола (HTTP, HTTPS, AMQP, MQTT или CoAP).</span><span class="sxs-lookup"><span data-stu-id="f3838-366">Security on the protocol level (MQTT/AMQP/HTTP/CoAP).</span></span> <span data-ttu-id="f3838-367">При использовании пользовательских протоколов нужно выяснить, как обеспечить соответствующую защиту.</span><span class="sxs-lookup"><span data-stu-id="f3838-367">With custom protocols, we need to figure out how to protect them.</span></span> |
| <span data-ttu-id="f3838-368">Устройство, облачный шлюз</span><span class="sxs-lookup"><span data-stu-id="f3838-368">Device Cloud Gateway</span></span> |<span data-ttu-id="f3838-369">TID</span><span class="sxs-lookup"><span data-stu-id="f3838-369">TID</span></span> |<span data-ttu-id="f3838-370">Использовать TLS (для общих ключей или RSA), чтобы шифровать трафик</span><span class="sxs-lookup"><span data-stu-id="f3838-370">TLS (PSK/RSA) to encrypt the traffic.</span></span> |<span data-ttu-id="f3838-371">Перехват данных обмена между устройством и шлюзом или вмешательство в обмен</span><span class="sxs-lookup"><span data-stu-id="f3838-371">Eavesdropping or interfering the communication between the device and the gateway</span></span> |<span data-ttu-id="f3838-372">Обеспечение безопасности на уровне протокола (HTTP, HTTPS, AMQP, MQTT или CoAP).</span><span class="sxs-lookup"><span data-stu-id="f3838-372">Security on the protocol level (MQTT/AMQP/HTTP/CoAP).</span></span> <span data-ttu-id="f3838-373">При использовании пользовательских протоколов нужно выяснить, как обеспечить соответствующую защиту.</span><span class="sxs-lookup"><span data-stu-id="f3838-373">With custom protocols, we need to figure out how to protect them.</span></span> |

<span data-ttu-id="f3838-374">Ниже приведены некоторые примеры угроз, которые могут быть в этой категории.</span><span class="sxs-lookup"><span data-stu-id="f3838-374">Here are some examples of threats in this category:</span></span>

<span data-ttu-id="f3838-375">**Отказ в обслуживании.** Устройства с ограниченными функциями обычно подвержены угрозе атаки типа "отказ в обслуживании", если активно прослушивают входящие подключения или нежелательные датаграммы в сети, так как злоумышленник может открыть много параллельных подключений, не обслуживать их либо обслуживать их очень медленно или устройство может быть перегружено нежелательным трафиком.</span><span class="sxs-lookup"><span data-stu-id="f3838-375">**Denial of Service**: Constrained devices are generally under DoS threat when they actively listen for inbound connections or unsolicited datagrams on a network, because an attacker can open many connections in parallel and not service them or service them very slowly, or the device can be flooded with unsolicited traffic.</span></span> <span data-ttu-id="f3838-376">В обоих случаях сеть может распознать устройство как неработоспособное.</span><span class="sxs-lookup"><span data-stu-id="f3838-376">In both cases, the device can effectively be rendered inoperable on the network.</span></span>

<span data-ttu-id="f3838-377">**Спуфинг, раскрытие информации.** Устройства с ограниченными функциями и специализированные устройства часто используют общие средства защиты, такие как пароль или ПИН-код, или полностью полагаются на доверенную сеть. Это значит, что они будут предоставлять доступ к сведениям устройств в той же сети, которая зачастую защищена только общим ключом.</span><span class="sxs-lookup"><span data-stu-id="f3838-377">**Spoofing, Information Disclosure**: Constrained devices and special-purpose devices often have one-for-all security facilities like password or PIN protection, or they wholly rely on trusting the network, meaning they will grant access to information when a device is on the same network, and that network is often only protected by a shared key.</span></span> <span data-ttu-id="f3838-378">Следовательно, при раскрытии общего секрета устройства или сети можно будет управлять этим устройством или просматривать данные, которые оно отправляет.</span><span class="sxs-lookup"><span data-stu-id="f3838-378">That means that when the shared secret to device or network is disclosed, it is possible to control the device or observe data emitted from the device.</span></span>  

<span data-ttu-id="f3838-379">**Спуфинг.** Злоумышленник может перехватить сигнал вещания, частично переопределить его данные или выдать себя за отправителя (вмешаться).</span><span class="sxs-lookup"><span data-stu-id="f3838-379">**Spoofing**: an attacker may intercept or partially override the broadcast and spoof the originator (man in the middle)</span></span>

<span data-ttu-id="f3838-380">**Незаконное изменение.** Злоумышленник может перехватить сигнал вещания, частично переопределить его данные и отправить ложные сведения.</span><span class="sxs-lookup"><span data-stu-id="f3838-380">**Tampering**: an attacker may intercept or partially override the broadcast and send false information</span></span> 

<span data-ttu-id="f3838-381">**Раскрытие информации.** Злоумышленник может перехватывать сигнал вещания и получить сведения без авторизации. **Отказ в обслуживании.** Злоумышленник может перехватить сигнал вещания и отказать в распространении информации.</span><span class="sxs-lookup"><span data-stu-id="f3838-381">**Information Disclosure:** an attacker may eavesdrop on a broadcast and obtain information without authorization **Denial of Service:** an attacker may jam the broadcast signal and deny information distribution</span></span>

#### <a name="storage"></a><span data-ttu-id="f3838-382">Хранилище</span><span class="sxs-lookup"><span data-stu-id="f3838-382">Storage</span></span>
<span data-ttu-id="f3838-383">У каждого устройства и полевого шлюза есть определенная форма хранилища (место временного хранения очередей данных или образов операционных систем).</span><span class="sxs-lookup"><span data-stu-id="f3838-383">Every device and field gateway has some form of storage (temporary for queuing the data, operating system (OS) image storage).</span></span>

| <span data-ttu-id="f3838-384">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="f3838-384">**Component**</span></span> | <span data-ttu-id="f3838-385">**Угроза**</span><span class="sxs-lookup"><span data-stu-id="f3838-385">**Threat**</span></span> | <span data-ttu-id="f3838-386">**Предотвращение**</span><span class="sxs-lookup"><span data-stu-id="f3838-386">**Mitigation**</span></span> | <span data-ttu-id="f3838-387">**Риск**</span><span class="sxs-lookup"><span data-stu-id="f3838-387">**Risk**</span></span> | <span data-ttu-id="f3838-388">**Реализация**</span><span class="sxs-lookup"><span data-stu-id="f3838-388">**Implementation**</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="f3838-389">Хранилище устройства</span><span class="sxs-lookup"><span data-stu-id="f3838-389">Device storage</span></span> |<span data-ttu-id="f3838-390">TRID</span><span class="sxs-lookup"><span data-stu-id="f3838-390">TRID</span></span> |<span data-ttu-id="f3838-391">Шифрование хранилища, подписывание журналов</span><span class="sxs-lookup"><span data-stu-id="f3838-391">Storage encryption, signing the logs</span></span> |<span data-ttu-id="f3838-392">Чтение (личных) данных из хранилища, незаконное изменение данных телеметрии.</span><span class="sxs-lookup"><span data-stu-id="f3838-392">Reading data from the storage (PII data), tampering with telemetry data.</span></span> <span data-ttu-id="f3838-393">Незаконное изменение данных управления командами, которые находятся в очереди или кэше.</span><span class="sxs-lookup"><span data-stu-id="f3838-393">Tampering with queued or cached command control data.</span></span> <span data-ttu-id="f3838-394">Незаконное изменение пакетов обновления конфигурации или встроенного ПО, которые есть в локальной очереди или локальном кэше, может повлечь компрометацию операционной системы или ее компонентов.</span><span class="sxs-lookup"><span data-stu-id="f3838-394">Tampering with configuration or firmware update packages while cached or queued locally can lead to OS and/or system components being compromised</span></span> |<span data-ttu-id="f3838-395">Шифрование, использование кода проверки подлинности сообщения или цифровых подписей.</span><span class="sxs-lookup"><span data-stu-id="f3838-395">Encryption, message authentication code (MAC) or digital signature.</span></span> <span data-ttu-id="f3838-396">Обеспечение строгого контроля доступа к ресурсам с помощью списков управления доступом (ACL) или разрешений</span><span class="sxs-lookup"><span data-stu-id="f3838-396">Where possible, strong access control through resource access control lists (ACLs) or permissions.</span></span> |
| <span data-ttu-id="f3838-397">Образ ОС устройства</span><span class="sxs-lookup"><span data-stu-id="f3838-397">Device OS image</span></span> |<span data-ttu-id="f3838-398">TRID</span><span class="sxs-lookup"><span data-stu-id="f3838-398">TRID</span></span> | |<span data-ttu-id="f3838-399">Незаконное изменение ОС или замена ее компонентов</span><span class="sxs-lookup"><span data-stu-id="f3838-399">Tampering with OS /replacing the OS components</span></span> |<span data-ttu-id="f3838-400">Секционирование ОС только для чтения, подписывание образов ОС, шифрование</span><span class="sxs-lookup"><span data-stu-id="f3838-400">Read-only OS partition, signed OS image, Encryption</span></span> |
| <span data-ttu-id="f3838-401">Хранилище полевого шлюза (для хранения очередей данных)</span><span class="sxs-lookup"><span data-stu-id="f3838-401">Field Gateway storage (queuing the data)</span></span> |<span data-ttu-id="f3838-402">TRID</span><span class="sxs-lookup"><span data-stu-id="f3838-402">TRID</span></span> |<span data-ttu-id="f3838-403">Шифрование хранилища, подписывание журналов</span><span class="sxs-lookup"><span data-stu-id="f3838-403">Storage encryption, signing the logs</span></span> |<span data-ttu-id="f3838-404">Чтение (личных) данных из хранилища, незаконное изменение данных телеметрии, а также данных управления командами, которые находятся в очереди или кэше.</span><span class="sxs-lookup"><span data-stu-id="f3838-404">Reading data from the storage (PII data), tampering with telemetry data, tampering with queued or cached command control data.</span></span> <span data-ttu-id="f3838-405">Незаконное изменение пакетов обновления конфигурации или встроенного ПО (предназначенных для устройств или полевого шлюза), которые есть в локальной очереди или локальном кэше, может повлечь компрометацию операционной системы или ее компонентов.</span><span class="sxs-lookup"><span data-stu-id="f3838-405">Tampering with configuration or firmware update packages (destined for devices or field gateway) while cached or queued locally can lead to OS and/or system components being compromised</span></span> |<span data-ttu-id="f3838-406">BitLocker</span><span class="sxs-lookup"><span data-stu-id="f3838-406">BitLocker</span></span> |
| <span data-ttu-id="f3838-407">Образ ОС полевого шлюза</span><span class="sxs-lookup"><span data-stu-id="f3838-407">Field Gateway OS image</span></span> |<span data-ttu-id="f3838-408">TRID</span><span class="sxs-lookup"><span data-stu-id="f3838-408">TRID</span></span> | |<span data-ttu-id="f3838-409">Незаконное изменение ОС или замена ее компонентов</span><span class="sxs-lookup"><span data-stu-id="f3838-409">Tampering with OS /replacing the OS components</span></span> |<span data-ttu-id="f3838-410">Секционирование ОС только для чтения, подписывание образов ОС, шифрование</span><span class="sxs-lookup"><span data-stu-id="f3838-410">Read-only OS partition, signed OS image, Encryption</span></span> |

### <a name="device-and-event-processingcloud-gateway-zone"></a><span data-ttu-id="f3838-411">Обработка устройств и событий. Зона облачного шлюза</span><span class="sxs-lookup"><span data-stu-id="f3838-411">Device and event processing/cloud gateway zone</span></span>
<span data-ttu-id="f3838-412">Облачный шлюз — это система, которая обеспечивает удаленный обмен данными между устройствами или полевыми шлюзами поля из нескольких различных сайтов через пространство общедоступной сети. Обычно данные передаются в облачную систему управления и анализа данных или федерацию таких систем.</span><span class="sxs-lookup"><span data-stu-id="f3838-412">A cloud gateway is system that enables remote communication from and to devices or field gateways from several different sites across public network space, typically towards a cloud-based control and data analysis system, a federation of such systems.</span></span> <span data-ttu-id="f3838-413">В некоторых случаях облачный шлюз позволяет немедленно получить доступ к специализированным устройствам с помощью таких терминалов, как планшеты или телефоны.</span><span class="sxs-lookup"><span data-stu-id="f3838-413">In some cases, a cloud gateway may immediately facilitate access to special-purpose devices from terminals such as tablets or phones.</span></span> <span data-ttu-id="f3838-414">В этом контексте под облаком подразумевается выделенная система обработки данных, непривязанная к тому же сайту, что подключенные устройства или полевые шлюзы. В облаке операционные измерения предотвращают целевой физический доступ и не всегда доступны в инфраструктуре общедоступного облака.</span><span class="sxs-lookup"><span data-stu-id="f3838-414">In the context discussed here, “cloud” is meant to refer to a dedicated data processing system that is not bound to the same site as the attached devices or field gateways, and where operational measures prevent targeted physical access but is not necessarily to a “public cloud” infrastructure.</span></span>  <span data-ttu-id="f3838-415">Облачный шлюз можно сопоставить с наложением виртуализации сети, чтобы изолировать трафик этого шлюза и всех устройств или полевых шлюзов, подключенных к нему, от сетевого трафика.</span><span class="sxs-lookup"><span data-stu-id="f3838-415">A cloud gateway may potentially be mapped into a network virtualization overlay to insulate the cloud gateway and all of its attached devices or field gateways from any other network traffic.</span></span> <span data-ttu-id="f3838-416">Сам облачный шлюз не является ни системой управления устройствами, ни средством обработки или хранения данных устройств. Эти средства только взаимодействуют с ним.</span><span class="sxs-lookup"><span data-stu-id="f3838-416">The cloud gateway itself is neither a device control system nor a processing or storage facility for device data; those facilities interface with the cloud gateway.</span></span> <span data-ttu-id="f3838-417">Зона облачного шлюза включает в себя сам облачный шлюз и все полевые шлюзы и устройства, прямо или опосредованно подключенные к нему.</span><span class="sxs-lookup"><span data-stu-id="f3838-417">The cloud gateway zone includes the cloud gateway itself along with all field gateways and devices directly or indirectly attached to it.</span></span>

<span data-ttu-id="f3838-418">Облачный шлюз — в большей степени компонент программного обеспечения, разрабатываемый пользователями, который работает в качестве службы и предоставляет конечные точки для подключения устройств и полевого шлюза.</span><span class="sxs-lookup"><span data-stu-id="f3838-418">Cloud gateway is mostly custom built piece of software running as a service with exposed endpoints to which field gateway and devices connect.</span></span> <span data-ttu-id="f3838-419">Следовательно, при его разработке нужно спланировать систему безопасности.</span><span class="sxs-lookup"><span data-stu-id="f3838-419">As such it must be designed with security in mind.</span></span> <span data-ttu-id="f3838-420">При разработке и создании этой службы следуйте соответствующей процедуре для [SDL](http://www.microsoft.com/sdl).</span><span class="sxs-lookup"><span data-stu-id="f3838-420">Please follow [SDL](http://www.microsoft.com/sdl) process for designing and building this service.</span></span> 

#### <a name="services-zone"></a><span data-ttu-id="f3838-421">Зона служб</span><span class="sxs-lookup"><span data-stu-id="f3838-421">Services zone</span></span>
<span data-ttu-id="f3838-422">Система контроля (или контроллер) — это программное решение, которое взаимодействует с устройством, полевым или облачным шлюзом, чтобы контролировать одно или несколько устройств, собирать, хранить и/или анализировать их данные. Оно позволяет использовать результаты, чтобы сформировать представление, или для дальнейшего контроля.</span><span class="sxs-lookup"><span data-stu-id="f3838-422">A control system (or controller) is a software solution that interfaces with a device, or a field gateway, or cloud gateway for the purpose of controlling one or multiple devices and/or to collect and/or store and/or analyze device data for presentation, or subsequent control purposes.</span></span> <span data-ttu-id="f3838-423">Это единственная сущность в этом обсуждении, которая позволяет немедленно получить доступ для взаимодействия с пользователями.</span><span class="sxs-lookup"><span data-stu-id="f3838-423">Control systems are the only entities in the scope of this discussion that may immediately facilitate interaction with people.</span></span> <span data-ttu-id="f3838-424">Исключение представляют промежуточные физические зоны контроля на устройствах, такие как выключатели. Они позволяют выключать устройства, а также изменять свойства. Другого такого функционального устройства, к которому можно получить цифровой доступ, нет.</span><span class="sxs-lookup"><span data-stu-id="f3838-424">The exception is intermediate physical control surfaces on devices, like a switch that allows a person to turn the device off or change other properties, and for which there is no functional equivalent that can be accessed digitally.</span></span> 

<span data-ttu-id="f3838-425">Промежуточные физические зоны контроля — это области, в которых логики регулирования ограничивают функции физической зоны контроля, чтобы предотвратить удаленное управление эквивалентными функциями или конфликты удаленного ввода. Эти промежуточные зоны по сути подключаются к локальной системе управления, которая использует те же базовые функции, что и любая другая система удаленного управления, к которой устройство может быть подключено параллельно.</span><span class="sxs-lookup"><span data-stu-id="f3838-425">Intermediate physical control surfaces are those where any sort of governing logic constrains the function of the physical control surface such that an equivalent function can be initiated remotely or input conflicts with remote input can be avoided – such intermediated control surfaces are conceptually attached to a local control system that leverages the same underlying functionality as any other remote control system that the device may be attached to in parallel.</span></span> <span data-ttu-id="f3838-426">Дополнительные сведения о самых распространенных угрозах безопасности облачных вычислений см. на странице [Cloud Security Alliance (CSA)](https://cloudsecurityalliance.org/research/top-threats/).</span><span class="sxs-lookup"><span data-stu-id="f3838-426">Top threats to the cloud computing can be read at [Cloud Security Alliance (CSA)](https://cloudsecurityalliance.org/research/top-threats/) page.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="f3838-427">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="f3838-427">Additional resources</span></span>
<span data-ttu-id="f3838-428">Дополнительные сведения см. в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="f3838-428">Refer to the following articles for additional information:</span></span>

* [<span data-ttu-id="f3838-429">Средство моделирования угроз SDL</span><span class="sxs-lookup"><span data-stu-id="f3838-429">SDL Threat Modeling Tool</span></span>](https://www.microsoft.com/sdl/adopt/threatmodeling.aspx)
* [<span data-ttu-id="f3838-430">Эталонная архитектура Центра интернета вещей Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="f3838-430">Microsoft Azure IoT reference architecture</span></span>](https://azure.microsoft.com/updates/microsoft-azure-iot-reference-architecture-available/)

## <a name="see-also"></a><span data-ttu-id="f3838-431">См. также</span><span class="sxs-lookup"><span data-stu-id="f3838-431">See also</span></span>
<span data-ttu-id="f3838-432">Дополнительные сведения о безопасности решения Центра Интернета вещей см. в статье [Защита развертывания IoT][lnk-security-deployment].</span><span class="sxs-lookup"><span data-stu-id="f3838-432">To learn more about securing your IoT solution, see [Secure your IoT deployment][lnk-security-deployment].</span></span>

<span data-ttu-id="f3838-433">Вы также можете ознакомиться с другими функциями и возможностями предварительно настроенных решений IoT Suite.</span><span class="sxs-lookup"><span data-stu-id="f3838-433">You can also explore some of the other features and capabilities of the IoT Suite preconfigured solutions:</span></span>

* <span data-ttu-id="f3838-434">[Обзор предварительно настроенного решения прогнозируемого обслуживания][lnk-predictive-overview]</span><span class="sxs-lookup"><span data-stu-id="f3838-434">[Predictive maintenance preconfigured solution overview][lnk-predictive-overview]</span></span>
* <span data-ttu-id="f3838-435">[Часто задаваемые вопросы об IoT Suite][lnk-faq]</span><span class="sxs-lookup"><span data-stu-id="f3838-435">[Frequently asked questions for IoT Suite][lnk-faq]</span></span>

<span data-ttu-id="f3838-436">Сведения о безопасности Центра Интернета вещей см. в статье [Управление доступом к Центру Интернета вещей][lnk-devguide-security] в руководстве для разработчиков.</span><span class="sxs-lookup"><span data-stu-id="f3838-436">You can read about IoT Hub security in [Control access to IoT Hub][lnk-devguide-security] in the IoT Hub developer guide.</span></span>

[lnk-predictive-overview]: iot-suite-predictive-overview.md
[lnk-faq]: iot-suite-faq.md

[lnk-security-deployment]: iot-suite-security-deployment.md
[lnk-devguide-security]: ../iot-hub/iot-hub-devguide-security.md