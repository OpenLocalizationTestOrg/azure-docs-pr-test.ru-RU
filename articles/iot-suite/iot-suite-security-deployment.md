---
title: "aaaSecure Интернета вещей развертывание | Документы Microsoft"
description: "Это статье сведения как toosecure IoT развертывания"
services: 
suite: iot-suite
documentationcenter: 
author: YuriDio
manager: timlt
editor: 
ms.assetid: 95c23341-16b0-4954-b3f2-d2e82ab7b367
ms.service: iot-suite
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/24/2017
ms.author: yurid
ms.openlocfilehash: befba8f2009279c2217dcd3496d529139134ec01
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="secure-your-iot-deployment"></a>Защита развертывания IoT
Эта статья содержит hello следующий уровень детализации для обеспечения безопасности hello инфраструктуры на основе Azure IoT Интернета вещей (IoT). Приводятся ссылки на tooimplementation сведениям по настройке и развертыванию каждого компонента. Кроме того, в статье представлены сравнения различных конкурирующих методов и рекомендации по их выбору.

Обеспечение безопасности развертывания Azure IoT hello можно разделить на следующие три области безопасности hello:

* **Безопасность устройств**: обеспечение безопасности устройств IoT hello при его развертывании в hello подстановки.
* **Безопасность подключения**: все данные, передаваемые между устройствами IoT hello и центр IoT является конфиденциальным и от взлома.
* **Облако безопасности**: позволяя данных toosecure время прохождения и хранится в облаке hello.

![Три области безопасности][img-overview]

## <a name="secure-device-provisioning-and-authentication"></a>Безопасная подготовка и проверка подлинности устройств
Hello Azure IoT Suite защищает устройствами IoT путем hello, следующие два метода:

* С помощью ключа уникальный идентификатор (маркеров безопасности) для каждого устройства, который может использоваться toocommunicate hello устройства с hello центр IoT.
* С помощью устройства [сертификат X.509] [ lnk-x509] и закрытым ключом, что означает tooauthenticate hello устройства toohello центр IoT. Этот метод проверки подлинности гарантирует, что hello закрытый ключ на устройстве hello известен за пределами hello устройства в любое время, обеспечивая более высокий уровень безопасности.

метод токена безопасности Hello обеспечивает проверку подлинности для каждого вызова tooIoT устройства hello концентратора, связав hello вызовов tooeach симметричного ключа. Проверка подлинности на основе сертификатов X.509 разрешает проверку подлинности устройства IoT на уровне физической hello как часть установление соединения hello TLS. без проверки подлинности X.509 hello, что является менее безопасный шаблон можно использовать метод безопасности токены Hello. Hello Выбор между hello двух методов в первую очередь, зависит, как обеспечить безопасность hello требуется проверка подлинности устройства toobe и доступность безопасного хранения на устройстве hello (toostore Здравствуйте, закрытый ключ безопасной).

## <a name="iot-hub-security-tokens"></a>Маркеры безопасности центра IoT
Центр IoT использует безопасность токены tooauthenticate устройств и служб tooavoid отправку ключей hello сети. Кроме того, маркеры безопасности ограничены по времени и области действия. Пакеты SDK для Центра Интернета вещей Azure автоматически создают маркеры без специальной настройки. Однако некоторые сценарии требуют toogenerate пользователя hello и использование маркеров безопасности напрямую. К ним относятся hello прямое использование рабочих областей MQTT, AMQP или HTTP hello или hello реализацию шаблона службы маркеров hello.

Можно найти дополнительные сведения о структуре hello hello маркера безопасности и их использование в hello в следующих статьях:

* [Структура маркера безопасности][lnk-security-tokens]
* [Использование маркеров SAS в клиенте устройства][lnk-sas-tokens]

Каждый центр IoT имеет [реестра удостоверений] [ lnk-identity-registry] , может быть ресурсы на устройство используется toocreate hello службы, таких как очереди, содержащей перераспределяет сообщения облака на устройство и toohello tooallow доступа конечные точки, ориентированных на устройстве. Hello реестра удостоверений центра IoT обеспечивает безопасное хранение удостоверения устройства и ключи безопасности для решения. Можно добавить отдельные или удостоверения устройства tooan разрешить список или список блокировок, включение полный контроль над доступа к устройству. Hello следующие статьи содержат дополнительные сведения в структуру hello реестра удостоверений hello и поддерживаемые операции.

[Центр Интернета вещей поддерживает такие протоколы, как MQTT, AMQP и HTTP][lnk-protocols]. Каждый из этих протоколов используются токены безопасности от tooIoT устройств IoT hello концентратора по-разному:

* AMQP: Обычный текст и на основе утверждений AMQP безопасности SASL ({policyName}@sas.root. {} iothubName} в случае hello токенов уровня концентратора IoT; {deviceId} в случае маркеры уровня устройства).
* MQTT: Пакет использует {deviceId} ПОДКЛЮЧИТЬСЯ как hello {ClientId}, {IoThubhostname} / {deviceId} в hello **Username** поля и подписанный URL-адрес токена в hello **пароль** поля.
* HTTP: Допустимый токен находится в заголовке запроса authorization hello.

Центр IoT удостоверение реестра можно tooconfigure используемые учетные данные безопасности на устройство и контроль доступа. Если в решение Интернета вещей уже вложены значительные средства для реализации [настраиваемого реестра удостоверений устройств и (или) схемы аутентификации][lnk-custom-auth], то с помощью службы маркеров его можно интегрировать в существующую инфраструктуру, использующую Центр Интернета вещей.

### <a name="x509-certificate-based-device-authentication"></a>Аутентификация устройств на основе сертификатов X.509
Здравствуйте, использование [сертификата X.509 на основе устройств] [ lnk-protocols] и его связанные открытые и закрытые пары ключей позволяет дополнительная проверка подлинности на уровне физической hello. закрытый ключ Hello безопасно хранятся на устройстве hello и не может быть найдена за пределами hello устройства. сертификат X.509 Hello содержит информацию об устройстве hello, такие как идентификатор устройства и другие организации сведения. Подпись сертификата hello создается с помощью закрытого ключа hello.

Ниже приведена общая последовательность подготовки устройства:

* Свяжите идентификатор tooa физическое устройство — удостоверения устройства и/или во время устройство производства или commissioning устройства toohello связанного сертификата X.509.
* Создайте соответствующую запись удостоверения в центр IoT — удостоверения устройства и устройства, связанные данные в hello реестра удостоверений центр IoT.
* Безопасное хранение отпечатка сертификата X.509 в реестре устройств Центра Интернета вещей.

### <a name="root-certificate-on-device"></a>Корневой сертификат на устройстве
При создании безопасного подключения TLS с центром IoT, устройств IoT hello выполняет проверку подлинности с помощью корневой сертификат, который входит в пакет SDK устройства hello центр IoT. Для пакета SDK клиента hello C hello сертификат находится в папке hello»\\c\\сертификатов» в корне hello hello репозитория. Хотя эти корневые сертификаты действуют продолжительное время, срок их действия может истечь или они могут быть отозваны. Если нет возможности обновления hello сертификата на устройстве hello hello, что устройство может оказаться невозможным toosubsequently подключиться toohello центр IoT (или облачной службы). Наличие означает tooupdate hello корневой сертификат после развертывания устройств IoT hello, фактически снизить эту угрозу.

## <a name="securing-hello-connection"></a>Обеспечение безопасности соединений hello
Интернет между устройствами IoT hello и центр IoT обеспечивается с использованием стандарта hello Transport Layer Security (TLS). Azure IoT поддерживает протоколы [TLS 1.2][lnk-tls12], TLS 1.1 и TLS 1.0 (в указанном порядке приоритетности). Поддержка TLS 1.0 предоставляется только для обеспечения обратной совместимости. Рекомендуется toouse TLS 1.2, так как он обеспечивает hello большинство безопасность.

Azure IoT Suite поддерживает hello следующие комплекты шифров в указанном порядке.

| Комплект шифров | Длина |
| --- | --- |
| TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (эквивалент 7680-разрядного алгоритма RSA) FS |256 |
| TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (эквивалент 3072-разрядного алгоритма RSA) FS |128 |
| TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (эквивалент 7680-разрядного алгоритма RSA) FS |256 |
| TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (эквивалент 3072-разрядного алгоритма RSA) FS |128 |
| TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d) |256 |
| TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c) |128 |
| TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d) |256 |
| TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c) |128 |
| TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35) |256 |
| TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f) |128 |
| TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa) |112 |

## <a name="securing-hello-cloud"></a>Защита облака hello
Центр Интернета вещей Azure дает возможность определить [политики контроля доступа][lnk-protocols] для каждого ключа безопасности. Она использует следующий набор разрешений toogrant доступа tooeach конечных точек центра IoT hello. Разрешения ограничивают tooan hello доступа центра IoT на основании функциональные возможности.

* **RegistryRead**. Предоставляет доступ на чтение toohello удостоверение реестра. Дополнительные сведения см. в разделе о [реестре удостоверений][lnk-identity-registry].
* **RegistryReadWrite**. Предоставление доступа чтения и записи toohello реестра удостоверений. Дополнительные сведения см. в разделе о [реестре удостоверений][lnk-identity-registry].
* **ServiceConnect**. Предоставляет доступ к связи с выходом службы toocloud и мониторинг конечных точек. Например, он предоставляет разрешение tooback окончания облака сообщения из устройства в облако tooreceive служб, отправлять сообщения облака на устройство и получения соответствующего доставки подтверждений hello.
* **DeviceConnect**. Предоставляет доступ к стороне toodevice конечных точек. Например он предоставляет разрешение сообщения из устройства в облако toosend и получать сообщения облака на устройство. Это разрешение используют устройства.

Существует два способа tooobtain **DeviceConnect** разрешений с центром IoT с [маркеры безопасности][lnk-sas-tokens]: с помощью ключа удостоверения устройства или ключ общего доступа. Кроме того, он является важным toonote, предоставленного доступны с устройств все функциональные возможности конструктора для конечных точек с префиксом `/devices/{deviceId}`.

[Компоненты службы можно создавать только маркеры безопасности] [ lnk-service-tokens] с помощью политики общего доступа предоставление hello соответствующие разрешения.

Центр IoT Azure и других служб, которые могут быть частью решения hello позволяет осуществлять управление пользователями с помощью hello Azure Active Directory.

Данные, принимаемые Центром Интернета вещей Azure, могут использоваться различными службами, в том числе службой Azure Stream Analytics, хранилищем BLOB-объектов и т. д. Эти службы предоставляют доступ к управлению. Ниже приведены дополнительные сведения об этих службах и доступных вариантах.

* [Azure Cosmos DB][lnk-docdb]: масштабируемой, полностью индексируются базы данных службы для частично структурированных данных, который управляет метаданными для устройств hello приступить к подготовке, такие как атрибуты, конфигурации и параметров безопасности. Cosmos DB обеспечивает высокую производительность и пропускную способность при обработке, схемонезависимое индексирование данных, а также полнофункциональный интерфейс SQL-запросов.
* [Azure Stream Analytics][lnk-asa]: в режиме реального времени обработки в облаке hello, который позволяет вам toorapidly потоков, разработке и развертывании недорогое решение toouncover в режиме реального времени по аналитике из устройств, датчиков, инфраструктуры и приложений. Hello данных от этой службы, полностью управляются можно масштабировать tooany тома по-прежнему достижением высокой пропускной способности, небольших задержек и устойчивости.
* [Службы приложений Azure][lnk-appservices]: облачной платформы toobuild мощные веб- и мобильных приложений, подключающихся toodata в любом месте; в облаке hello или в локальной среде. Создавайте привлекательные мобильные приложения для iOS, Android и Windows. Интеграция с программное обеспечение как услуга (SaaS) и корпоративных приложений с помощью toodozens out of box подключения облачных служб и корпоративных приложений. Код в избранные языка и IDE (.NET, Node.js, PHP, Python или Java) toobuild веб-приложений и быстрее, чем когда-либо API-интерфейсы.
* [Логика приложения][lnk-logicapps]: hello логику приложения службы приложений Azure позволяет интегрировать IoT решения tooyour имеющиеся бизнес-системы и автоматизации бизнес-процессов. Логика приложения позволяет toodesign разработчики рабочих процессов, которые запускаются с триггера, а затем выполняют ряд шагов, правила и действия, использующие toointegrate мощные соединители с бизнес-процессов. Логика приложения обеспечивает подключение out of box tooa огромное экосистема SaaS, облачную и локальных приложений.
* [Хранилище больших двоичных объектов][lnk-blob]: надежная и экономически облачного хранилища для данных hello отправку toohello облачных устройств.

## <a name="conclusion"></a>Заключение
В этой статье приведены общие сведения на уровне реализации о проектировании и развертывании инфраструктуры IoT с помощью Azure IoT. Настройка каждого компонента toobe безопасного является ключ в защите hello общую инфраструктуру IoT. Hello проектных решений, доступных в Azure IoT обеспечения некоторого уровня гибкость и удобство выбора; Однако каждый вариант может повлиять на безопасность. Рекомендуется использовать каждый из этих вариантов, предварительно оценив затраты и риски.

## <a name="see-also"></a>См. также
Можно также изучить некоторые hello и другие возможности hello IoT Suite предварительно настроенных решений:

* [Обзор предварительно настроенного решения прогнозируемого обслуживания][lnk-predictive-overview]
* [Часто задаваемые вопросы об IoT Suite][lnk-faq]

Вы найдете сведения о безопасности центр IoT в [tooIoT управления доступом концентратора] [ lnk-devguide-security] в hello руководстве разработчика центр IoT.


[img-overview]: media/iot-suite-security-deployment/overview.png

[lnk-security-tokens]: ../iot-hub/iot-hub-devguide-security.md#security-token-structure
[lnk-sas-tokens]: ../iot-hub/iot-hub-devguide-security.md#use-sas-tokens-in-a-device-app
[lnk-identity-registry]: ../iot-hub/iot-hub-devguide-identity-registry.md
[lnk-protocols]: ../iot-hub/iot-hub-devguide-security.md
[lnk-custom-auth]: ../iot-hub/iot-hub-devguide-security.md#custom-device-authentication
[lnk-x509]: http://www.itu.int/rec/T-REC-X.509-201210-I/en
[lnk-tls12]: https://tools.ietf.org/html/rfc5246
[lnk-service-tokens]: ../iot-hub/iot-hub-devguide-security.md#use-security-tokens-from-service-components
[lnk-docdb]: https://azure.microsoft.com/services/documentdb/
[lnk-asa]: https://azure.microsoft.com/services/stream-analytics/
[lnk-appservices]: https://azure.microsoft.com/services/app-service/
[lnk-logicapps]: https://azure.microsoft.com/services/app-service/logic/
[lnk-blob]: https://azure.microsoft.com/services/storage/

[lnk-predictive-overview]: iot-suite-predictive-overview.md
[lnk-faq]: iot-suite-faq.md
[lnk-devguide-security]: ../iot-hub/iot-hub-devguide-security.md
