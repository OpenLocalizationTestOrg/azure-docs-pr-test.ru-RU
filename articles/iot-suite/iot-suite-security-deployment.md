---
title: "aaaSecure Интернета вещей развертывание | Документы Microsoft"
description: "Это статье сведения как toosecure IoT развертывания"
services: 
suite: iot-suite
documentationcenter: 
author: YuriDio
manager: timlt
editor: 
ms.assetid: 95c23341-16b0-4954-b3f2-d2e82ab7b367
ms.service: iot-suite
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/24/2017
ms.author: yurid
ms.openlocfilehash: befba8f2009279c2217dcd3496d529139134ec01
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="secure-your-iot-deployment"></a><span data-ttu-id="d2bd5-103">Защита развертывания IoT</span><span class="sxs-lookup"><span data-stu-id="d2bd5-103">Secure your IoT deployment</span></span>
<span data-ttu-id="d2bd5-104">Эта статья содержит hello следующий уровень детализации для обеспечения безопасности hello инфраструктуры на основе Azure IoT Интернета вещей (IoT).</span><span class="sxs-lookup"><span data-stu-id="d2bd5-104">This article provides hello next level of detail for securing hello Azure IoT-based Internet of Things (IoT) infrastructure.</span></span> <span data-ttu-id="d2bd5-105">Приводятся ссылки на tooimplementation сведениям по настройке и развертыванию каждого компонента.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-105">It links tooimplementation level details for configuring and deploying each component.</span></span> <span data-ttu-id="d2bd5-106">Кроме того, в статье представлены сравнения различных конкурирующих методов и рекомендации по их выбору.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-106">It also provides comparisons and choices between various competing methods.</span></span>

<span data-ttu-id="d2bd5-107">Обеспечение безопасности развертывания Azure IoT hello можно разделить на следующие три области безопасности hello:</span><span class="sxs-lookup"><span data-stu-id="d2bd5-107">Securing hello Azure IoT deployment can be divided into hello following three security areas:</span></span>

* <span data-ttu-id="d2bd5-108">**Безопасность устройств**: обеспечение безопасности устройств IoT hello при его развертывании в hello подстановки.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-108">**Device Security**: Securing hello IoT device while it is deployed in hello wild.</span></span>
* <span data-ttu-id="d2bd5-109">**Безопасность подключения**: все данные, передаваемые между устройствами IoT hello и центр IoT является конфиденциальным и от взлома.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-109">**Connection Security**: Ensuring all data transmitted between hello IoT device and IoT Hub is confidential and tamper-proof.</span></span>
* <span data-ttu-id="d2bd5-110">**Облако безопасности**: позволяя данных toosecure время прохождения и хранится в облаке hello.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-110">**Cloud Security**: Providing a means toosecure data while it moves through, and is stored in hello cloud.</span></span>

![Три области безопасности][img-overview]

## <a name="secure-device-provisioning-and-authentication"></a><span data-ttu-id="d2bd5-112">Безопасная подготовка и проверка подлинности устройств</span><span class="sxs-lookup"><span data-stu-id="d2bd5-112">Secure device provisioning and authentication</span></span>
<span data-ttu-id="d2bd5-113">Hello Azure IoT Suite защищает устройствами IoT путем hello, следующие два метода:</span><span class="sxs-lookup"><span data-stu-id="d2bd5-113">hello Azure IoT Suite secures IoT devices by hello following two methods:</span></span>

* <span data-ttu-id="d2bd5-114">С помощью ключа уникальный идентификатор (маркеров безопасности) для каждого устройства, который может использоваться toocommunicate hello устройства с hello центр IoT.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-114">By providing a unique identity key (security tokens) for each device, which can be used by hello device toocommunicate with hello IoT Hub.</span></span>
* <span data-ttu-id="d2bd5-115">С помощью устройства [сертификат X.509] [ lnk-x509] и закрытым ключом, что означает tooauthenticate hello устройства toohello центр IoT.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-115">By using an on-device [X.509 certificate][lnk-x509] and private key as a means tooauthenticate hello device toohello IoT Hub.</span></span> <span data-ttu-id="d2bd5-116">Этот метод проверки подлинности гарантирует, что hello закрытый ключ на устройстве hello известен за пределами hello устройства в любое время, обеспечивая более высокий уровень безопасности.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-116">This authentication method ensures that hello private key on hello device is not known outside hello device at any time, providing a higher level of security.</span></span>

<span data-ttu-id="d2bd5-117">метод токена безопасности Hello обеспечивает проверку подлинности для каждого вызова tooIoT устройства hello концентратора, связав hello вызовов tooeach симметричного ключа.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-117">hello security token method provides authentication for each call made by hello device tooIoT Hub by associating hello symmetric key tooeach call.</span></span> <span data-ttu-id="d2bd5-118">Проверка подлинности на основе сертификатов X.509 разрешает проверку подлинности устройства IoT на уровне физической hello как часть установление соединения hello TLS.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-118">X.509-based authentication allows authentication of an IoT device at hello physical layer as part of hello TLS connection establishment.</span></span> <span data-ttu-id="d2bd5-119">без проверки подлинности X.509 hello, что является менее безопасный шаблон можно использовать метод безопасности токены Hello.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-119">hello security-token-based method can be used without hello X.509 authentication which is a less secure pattern.</span></span> <span data-ttu-id="d2bd5-120">Hello Выбор между hello двух методов в первую очередь, зависит, как обеспечить безопасность hello требуется проверка подлинности устройства toobe и доступность безопасного хранения на устройстве hello (toostore Здравствуйте, закрытый ключ безопасной).</span><span class="sxs-lookup"><span data-stu-id="d2bd5-120">hello choice between hello two methods is primarily dictated by how secure hello device authentication needs toobe, and availability of secure storage on hello device (toostore hello private key securely).</span></span>

## <a name="iot-hub-security-tokens"></a><span data-ttu-id="d2bd5-121">Маркеры безопасности центра IoT</span><span class="sxs-lookup"><span data-stu-id="d2bd5-121">IoT Hub security tokens</span></span>
<span data-ttu-id="d2bd5-122">Центр IoT использует безопасность токены tooauthenticate устройств и служб tooavoid отправку ключей hello сети.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-122">IoT Hub uses security tokens tooauthenticate devices and services tooavoid sending keys on hello network.</span></span> <span data-ttu-id="d2bd5-123">Кроме того, маркеры безопасности ограничены по времени и области действия.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-123">Additionally, security tokens are limited in time validity and scope.</span></span> <span data-ttu-id="d2bd5-124">Пакеты SDK для Центра Интернета вещей Azure автоматически создают маркеры без специальной настройки.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-124">Azure IoT SDKs automatically generate tokens without requiring any special configuration.</span></span> <span data-ttu-id="d2bd5-125">Однако некоторые сценарии требуют toogenerate пользователя hello и использование маркеров безопасности напрямую.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-125">Some scenarios, however, require hello user toogenerate and use security tokens directly.</span></span> <span data-ttu-id="d2bd5-126">К ним относятся hello прямое использование рабочих областей MQTT, AMQP или HTTP hello или hello реализацию шаблона службы маркеров hello.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-126">These include hello direct use of hello MQTT, AMQP, or HTTP surfaces, or hello implementation of hello token service pattern.</span></span>

<span data-ttu-id="d2bd5-127">Можно найти дополнительные сведения о структуре hello hello маркера безопасности и их использование в hello в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="d2bd5-127">More details on hello structure of hello security token and its usage can be found in hello following articles:</span></span>

* <span data-ttu-id="d2bd5-128">[Структура маркера безопасности][lnk-security-tokens]</span><span class="sxs-lookup"><span data-stu-id="d2bd5-128">[Security token structure][lnk-security-tokens]</span></span>
* <span data-ttu-id="d2bd5-129">[Использование маркеров SAS в клиенте устройства][lnk-sas-tokens]</span><span class="sxs-lookup"><span data-stu-id="d2bd5-129">[Using SAS tokens as a device][lnk-sas-tokens]</span></span>

<span data-ttu-id="d2bd5-130">Каждый центр IoT имеет [реестра удостоверений] [ lnk-identity-registry] , может быть ресурсы на устройство используется toocreate hello службы, таких как очереди, содержащей перераспределяет сообщения облака на устройство и toohello tooallow доступа конечные точки, ориентированных на устройстве.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-130">Each IoT Hub has an [identity registry][lnk-identity-registry] that can be used toocreate per-device resources in hello service, such as a queue that contains in-flight cloud-to-device messages, and tooallow access toohello device-facing endpoints.</span></span> <span data-ttu-id="d2bd5-131">Hello реестра удостоверений центра IoT обеспечивает безопасное хранение удостоверения устройства и ключи безопасности для решения.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-131">hello IoT Hub identity registry provides secure storage of device identities and security keys for a solution.</span></span> <span data-ttu-id="d2bd5-132">Можно добавить отдельные или удостоверения устройства tooan разрешить список или список блокировок, включение полный контроль над доступа к устройству.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-132">Individual or groups of device identities can be added tooan allow list, or a block list, enabling complete control over device access.</span></span> <span data-ttu-id="d2bd5-133">Hello следующие статьи содержат дополнительные сведения в структуру hello реестра удостоверений hello и поддерживаемые операции.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-133">hello following articles provide more details on hello structure of hello identity registry and supported operations.</span></span>

<span data-ttu-id="d2bd5-134">[Центр Интернета вещей поддерживает такие протоколы, как MQTT, AMQP и HTTP][lnk-protocols].</span><span class="sxs-lookup"><span data-stu-id="d2bd5-134">[IoT Hub supports protocols such as MQTT, AMQP, and HTTP][lnk-protocols].</span></span> <span data-ttu-id="d2bd5-135">Каждый из этих протоколов используются токены безопасности от tooIoT устройств IoT hello концентратора по-разному:</span><span class="sxs-lookup"><span data-stu-id="d2bd5-135">Each of these protocols use security tokens from hello IoT device tooIoT Hub differently:</span></span>

* <span data-ttu-id="d2bd5-136">AMQP: Обычный текст и на основе утверждений AMQP безопасности SASL ({policyName}@sas.root. {} iothubName} в случае hello токенов уровня концентратора IoT; {deviceId} в случае маркеры уровня устройства).</span><span class="sxs-lookup"><span data-stu-id="d2bd5-136">AMQP: SASL PLAIN and AMQP Claims-based security ({policyName}@sas.root.{iothubName} in hello case of IoT hub-level tokens; {deviceId} in case of device-scoped tokens).</span></span>
* <span data-ttu-id="d2bd5-137">MQTT: Пакет использует {deviceId} ПОДКЛЮЧИТЬСЯ как hello {ClientId}, {IoThubhostname} / {deviceId} в hello **Username** поля и подписанный URL-адрес токена в hello **пароль** поля.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-137">MQTT: CONNECT packet uses {deviceId} as hello {ClientId}, {IoThubhostname}/{deviceId} in hello **Username** field and a SAS token in hello **Password** field.</span></span>
* <span data-ttu-id="d2bd5-138">HTTP: Допустимый токен находится в заголовке запроса authorization hello.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-138">HTTP: Valid token is in hello authorization request header.</span></span>

<span data-ttu-id="d2bd5-139">Центр IoT удостоверение реестра можно tooconfigure используемые учетные данные безопасности на устройство и контроль доступа.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-139">IoT Hub identity registry can be used tooconfigure per-device security credentials and access control.</span></span> <span data-ttu-id="d2bd5-140">Если в решение Интернета вещей уже вложены значительные средства для реализации [настраиваемого реестра удостоверений устройств и (или) схемы аутентификации][lnk-custom-auth], то с помощью службы маркеров его можно интегрировать в существующую инфраструктуру, использующую Центр Интернета вещей.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-140">However, if an IoT solution already has a significant investment in a [custom device identity registry and/or authentication scheme][lnk-custom-auth], it can be integrated into an existing infrastructure with IoT Hub by creating a token service.</span></span>

### <a name="x509-certificate-based-device-authentication"></a><span data-ttu-id="d2bd5-141">Аутентификация устройств на основе сертификатов X.509</span><span class="sxs-lookup"><span data-stu-id="d2bd5-141">X.509 certificate-based device authentication</span></span>
<span data-ttu-id="d2bd5-142">Здравствуйте, использование [сертификата X.509 на основе устройств] [ lnk-protocols] и его связанные открытые и закрытые пары ключей позволяет дополнительная проверка подлинности на уровне физической hello.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-142">hello use of a [device-based X.509 certificate][lnk-protocols] and its associated private and public key pair allows additional authentication at hello physical layer.</span></span> <span data-ttu-id="d2bd5-143">закрытый ключ Hello безопасно хранятся на устройстве hello и не может быть найдена за пределами hello устройства.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-143">hello private key is stored securely in hello device and is not discoverable outside hello device.</span></span> <span data-ttu-id="d2bd5-144">сертификат X.509 Hello содержит информацию об устройстве hello, такие как идентификатор устройства и другие организации сведения.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-144">hello X.509 certificate contains information about hello device, such as device ID, and other organizational details.</span></span> <span data-ttu-id="d2bd5-145">Подпись сертификата hello создается с помощью закрытого ключа hello.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-145">A signature of hello certificate is generated by using hello private key.</span></span>

<span data-ttu-id="d2bd5-146">Ниже приведена общая последовательность подготовки устройства:</span><span class="sxs-lookup"><span data-stu-id="d2bd5-146">High-level device provisioning flow:</span></span>

* <span data-ttu-id="d2bd5-147">Свяжите идентификатор tooa физическое устройство — удостоверения устройства и/или во время устройство производства или commissioning устройства toohello связанного сертификата X.509.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-147">Associate an identifier tooa physical device – device identity and/or X.509 certificate associated toohello device during device manufacturing or commissioning.</span></span>
* <span data-ttu-id="d2bd5-148">Создайте соответствующую запись удостоверения в центр IoT — удостоверения устройства и устройства, связанные данные в hello реестра удостоверений центр IoT.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-148">Create a corresponding identity entry in IoT Hub – device identity and associated device information in hello IoT Hub identity registry.</span></span>
* <span data-ttu-id="d2bd5-149">Безопасное хранение отпечатка сертификата X.509 в реестре устройств Центра Интернета вещей.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-149">Securely store X.509 certificate thumbprint in IoT Hub identity registry.</span></span>

### <a name="root-certificate-on-device"></a><span data-ttu-id="d2bd5-150">Корневой сертификат на устройстве</span><span class="sxs-lookup"><span data-stu-id="d2bd5-150">Root certificate on device</span></span>
<span data-ttu-id="d2bd5-151">При создании безопасного подключения TLS с центром IoT, устройств IoT hello выполняет проверку подлинности с помощью корневой сертификат, который входит в пакет SDK устройства hello центр IoT.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-151">While establishing a secure TLS connection with IoT Hub, hello IoT device authenticates IoT Hub using a root certificate which is part of hello device SDK.</span></span> <span data-ttu-id="d2bd5-152">Для пакета SDK клиента hello C hello сертификат находится в папке hello»\\c\\сертификатов» в корне hello hello репозитория.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-152">For hello C client SDK hello certificate is located under hello folder "\\c\\certs" under hello root of hello repo.</span></span> <span data-ttu-id="d2bd5-153">Хотя эти корневые сертификаты действуют продолжительное время, срок их действия может истечь или они могут быть отозваны.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-153">Though these root certificates are long-lived, they still may expire or be revoked.</span></span> <span data-ttu-id="d2bd5-154">Если нет возможности обновления hello сертификата на устройстве hello hello, что устройство может оказаться невозможным toosubsequently подключиться toohello центр IoT (или облачной службы).</span><span class="sxs-lookup"><span data-stu-id="d2bd5-154">If there is no way of updating hello certificate on hello device, hello device may not be able toosubsequently connect toohello IoT Hub (or any other cloud service).</span></span> <span data-ttu-id="d2bd5-155">Наличие означает tooupdate hello корневой сертификат после развертывания устройств IoT hello, фактически снизить эту угрозу.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-155">Having a means tooupdate hello root certificate once hello IoT device is deployed will effectively mitigate this risk.</span></span>

## <a name="securing-hello-connection"></a><span data-ttu-id="d2bd5-156">Обеспечение безопасности соединений hello</span><span class="sxs-lookup"><span data-stu-id="d2bd5-156">Securing hello connection</span></span>
<span data-ttu-id="d2bd5-157">Интернет между устройствами IoT hello и центр IoT обеспечивается с использованием стандарта hello Transport Layer Security (TLS).</span><span class="sxs-lookup"><span data-stu-id="d2bd5-157">Internet connection between hello IoT device and IoT Hub is secured using hello Transport Layer Security (TLS) standard.</span></span> <span data-ttu-id="d2bd5-158">Azure IoT поддерживает протоколы [TLS 1.2][lnk-tls12], TLS 1.1 и TLS 1.0 (в указанном порядке приоритетности).</span><span class="sxs-lookup"><span data-stu-id="d2bd5-158">Azure IoT supports [TLS 1.2][lnk-tls12], TLS 1.1 and TLS 1.0, in this order.</span></span> <span data-ttu-id="d2bd5-159">Поддержка TLS 1.0 предоставляется только для обеспечения обратной совместимости.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-159">Support for TLS 1.0 is provided for backward compatibility only.</span></span> <span data-ttu-id="d2bd5-160">Рекомендуется toouse TLS 1.2, так как он обеспечивает hello большинство безопасность.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-160">It is recommended toouse TLS 1.2 since it provides hello most security.</span></span>

<span data-ttu-id="d2bd5-161">Azure IoT Suite поддерживает hello следующие комплекты шифров в указанном порядке.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-161">Azure IoT Suite supports hello following Cipher Suites, in this order.</span></span>

| <span data-ttu-id="d2bd5-162">Комплект шифров</span><span class="sxs-lookup"><span data-stu-id="d2bd5-162">Cipher Suite</span></span> | <span data-ttu-id="d2bd5-163">Длина</span><span class="sxs-lookup"><span data-stu-id="d2bd5-163">Length</span></span> |
| --- | --- |
| <span data-ttu-id="d2bd5-164">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (эквивалент</span><span class="sxs-lookup"><span data-stu-id="d2bd5-164">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="d2bd5-165">7680-разрядного алгоритма RSA) FS</span><span class="sxs-lookup"><span data-stu-id="d2bd5-165">7680 bits RSA) FS</span></span> |<span data-ttu-id="d2bd5-166">256</span><span class="sxs-lookup"><span data-stu-id="d2bd5-166">256</span></span> |
| <span data-ttu-id="d2bd5-167">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (эквивалент</span><span class="sxs-lookup"><span data-stu-id="d2bd5-167">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="d2bd5-168">3072-разрядного алгоритма RSA) FS</span><span class="sxs-lookup"><span data-stu-id="d2bd5-168">3072 bits RSA) FS</span></span> |<span data-ttu-id="d2bd5-169">128</span><span class="sxs-lookup"><span data-stu-id="d2bd5-169">128</span></span> |
| <span data-ttu-id="d2bd5-170">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (эквивалент</span><span class="sxs-lookup"><span data-stu-id="d2bd5-170">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="d2bd5-171">7680-разрядного алгоритма RSA) FS</span><span class="sxs-lookup"><span data-stu-id="d2bd5-171">7680 bits RSA) FS</span></span> |<span data-ttu-id="d2bd5-172">256</span><span class="sxs-lookup"><span data-stu-id="d2bd5-172">256</span></span> |
| <span data-ttu-id="d2bd5-173">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (эквивалент</span><span class="sxs-lookup"><span data-stu-id="d2bd5-173">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="d2bd5-174">3072-разрядного алгоритма RSA) FS</span><span class="sxs-lookup"><span data-stu-id="d2bd5-174">3072 bits RSA) FS</span></span> |<span data-ttu-id="d2bd5-175">128</span><span class="sxs-lookup"><span data-stu-id="d2bd5-175">128</span></span> |
| <span data-ttu-id="d2bd5-176">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span><span class="sxs-lookup"><span data-stu-id="d2bd5-176">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span></span> |<span data-ttu-id="d2bd5-177">256</span><span class="sxs-lookup"><span data-stu-id="d2bd5-177">256</span></span> |
| <span data-ttu-id="d2bd5-178">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span><span class="sxs-lookup"><span data-stu-id="d2bd5-178">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span></span> |<span data-ttu-id="d2bd5-179">128</span><span class="sxs-lookup"><span data-stu-id="d2bd5-179">128</span></span> |
| <span data-ttu-id="d2bd5-180">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span><span class="sxs-lookup"><span data-stu-id="d2bd5-180">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span></span> |<span data-ttu-id="d2bd5-181">256</span><span class="sxs-lookup"><span data-stu-id="d2bd5-181">256</span></span> |
| <span data-ttu-id="d2bd5-182">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span><span class="sxs-lookup"><span data-stu-id="d2bd5-182">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span></span> |<span data-ttu-id="d2bd5-183">128</span><span class="sxs-lookup"><span data-stu-id="d2bd5-183">128</span></span> |
| <span data-ttu-id="d2bd5-184">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span><span class="sxs-lookup"><span data-stu-id="d2bd5-184">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span></span> |<span data-ttu-id="d2bd5-185">256</span><span class="sxs-lookup"><span data-stu-id="d2bd5-185">256</span></span> |
| <span data-ttu-id="d2bd5-186">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span><span class="sxs-lookup"><span data-stu-id="d2bd5-186">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span></span> |<span data-ttu-id="d2bd5-187">128</span><span class="sxs-lookup"><span data-stu-id="d2bd5-187">128</span></span> |
| <span data-ttu-id="d2bd5-188">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span><span class="sxs-lookup"><span data-stu-id="d2bd5-188">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span></span> |<span data-ttu-id="d2bd5-189">112</span><span class="sxs-lookup"><span data-stu-id="d2bd5-189">112</span></span> |

## <a name="securing-hello-cloud"></a><span data-ttu-id="d2bd5-190">Защита облака hello</span><span class="sxs-lookup"><span data-stu-id="d2bd5-190">Securing hello cloud</span></span>
<span data-ttu-id="d2bd5-191">Центр Интернета вещей Azure дает возможность определить [политики контроля доступа][lnk-protocols] для каждого ключа безопасности.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-191">Azure IoT Hub allows definition of [access control policies][lnk-protocols] for each security key.</span></span> <span data-ttu-id="d2bd5-192">Она использует следующий набор разрешений toogrant доступа tooeach конечных точек центра IoT hello.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-192">It uses hello following set of permissions toogrant access tooeach of IoT Hub's endpoints.</span></span> <span data-ttu-id="d2bd5-193">Разрешения ограничивают tooan hello доступа центра IoT на основании функциональные возможности.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-193">Permissions limit hello access tooan IoT Hub based on functionality.</span></span>

* <span data-ttu-id="d2bd5-194">**RegistryRead**.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-194">**RegistryRead**.</span></span> <span data-ttu-id="d2bd5-195">Предоставляет доступ на чтение toohello удостоверение реестра.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-195">Grants read access toohello identity registry.</span></span> <span data-ttu-id="d2bd5-196">Дополнительные сведения см. в разделе о [реестре удостоверений][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="d2bd5-196">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="d2bd5-197">**RegistryReadWrite**.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-197">**RegistryReadWrite**.</span></span> <span data-ttu-id="d2bd5-198">Предоставление доступа чтения и записи toohello реестра удостоверений.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-198">Grants read and write access toohello identity registry.</span></span> <span data-ttu-id="d2bd5-199">Дополнительные сведения см. в разделе о [реестре удостоверений][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="d2bd5-199">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="d2bd5-200">**ServiceConnect**.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-200">**ServiceConnect**.</span></span> <span data-ttu-id="d2bd5-201">Предоставляет доступ к связи с выходом службы toocloud и мониторинг конечных точек.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-201">Grants access toocloud service-facing communication and monitoring endpoints.</span></span> <span data-ttu-id="d2bd5-202">Например, он предоставляет разрешение tooback окончания облака сообщения из устройства в облако tooreceive служб, отправлять сообщения облака на устройство и получения соответствующего доставки подтверждений hello.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-202">For example, it grants permission tooback-end cloud services tooreceive device-to-cloud messages, send cloud-to-device messages, and retrieve hello corresponding delivery acknowledgments.</span></span>
* <span data-ttu-id="d2bd5-203">**DeviceConnect**.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-203">**DeviceConnect**.</span></span> <span data-ttu-id="d2bd5-204">Предоставляет доступ к стороне toodevice конечных точек.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-204">Grants access toodevice-facing endpoints.</span></span> <span data-ttu-id="d2bd5-205">Например он предоставляет разрешение сообщения из устройства в облако toosend и получать сообщения облака на устройство.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-205">For example, it grants permission toosend device-to-cloud messages and receive cloud-to-device messages.</span></span> <span data-ttu-id="d2bd5-206">Это разрешение используют устройства.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-206">This permission is used by devices.</span></span>

<span data-ttu-id="d2bd5-207">Существует два способа tooobtain **DeviceConnect** разрешений с центром IoT с [маркеры безопасности][lnk-sas-tokens]: с помощью ключа удостоверения устройства или ключ общего доступа.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-207">There are two ways tooobtain **DeviceConnect** permissions with IoT Hub with [security tokens][lnk-sas-tokens]: using a device identity key, or a shared access key.</span></span> <span data-ttu-id="d2bd5-208">Кроме того, он является важным toonote, предоставленного доступны с устройств все функциональные возможности конструктора для конечных точек с префиксом `/devices/{deviceId}`.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-208">Moreover, it is important toonote that all functionality accessible from devices is exposed by design on endpoints with prefix `/devices/{deviceId}`.</span></span>

<span data-ttu-id="d2bd5-209">[Компоненты службы можно создавать только маркеры безопасности] [ lnk-service-tokens] с помощью политики общего доступа предоставление hello соответствующие разрешения.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-209">[Service components can only generate security tokens][lnk-service-tokens] using shared access policies granting hello appropriate permissions.</span></span>

<span data-ttu-id="d2bd5-210">Центр IoT Azure и других служб, которые могут быть частью решения hello позволяет осуществлять управление пользователями с помощью hello Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-210">Azure IoT Hub and other services which may be part of hello solution allow management of users using hello Azure Active Directory.</span></span>

<span data-ttu-id="d2bd5-211">Данные, принимаемые Центром Интернета вещей Azure, могут использоваться различными службами, в том числе службой Azure Stream Analytics, хранилищем BLOB-объектов и т. д.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-211">Data ingested by Azure IoT Hub can be consumed by a variety of services such as Azure Stream Analytics and Azure blob storage.</span></span> <span data-ttu-id="d2bd5-212">Эти службы предоставляют доступ к управлению.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-212">These services allow management access.</span></span> <span data-ttu-id="d2bd5-213">Ниже приведены дополнительные сведения об этих службах и доступных вариантах.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-213">Read more about these services and available options below:</span></span>

* <span data-ttu-id="d2bd5-214">[Azure Cosmos DB][lnk-docdb]: масштабируемой, полностью индексируются базы данных службы для частично структурированных данных, который управляет метаданными для устройств hello приступить к подготовке, такие как атрибуты, конфигурации и параметров безопасности.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-214">[Azure Cosmos DB][lnk-docdb]: A scalable, fully-indexed database service for semi-structured data that manages metadata for hello devices you provision, such as attributes, configuration, and security properties.</span></span> <span data-ttu-id="d2bd5-215">Cosmos DB обеспечивает высокую производительность и пропускную способность при обработке, схемонезависимое индексирование данных, а также полнофункциональный интерфейс SQL-запросов.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-215">Cosmos DB offers high-performance and high-throughput processing, schema-agnostic indexing of data, and a rich SQL query interface.</span></span>
* <span data-ttu-id="d2bd5-216">[Azure Stream Analytics][lnk-asa]: в режиме реального времени обработки в облаке hello, который позволяет вам toorapidly потоков, разработке и развертывании недорогое решение toouncover в режиме реального времени по аналитике из устройств, датчиков, инфраструктуры и приложений.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-216">[Azure Stream Analytics][lnk-asa]: Real-time stream processing in hello cloud that enables you toorapidly develop and deploy a low-cost analytics solution toouncover real-time insights from devices, sensors, infrastructure, and applications.</span></span> <span data-ttu-id="d2bd5-217">Hello данных от этой службы, полностью управляются можно масштабировать tooany тома по-прежнему достижением высокой пропускной способности, небольших задержек и устойчивости.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-217">hello data from this fully-managed service can scale tooany volume while still achieving high throughput, low latency, and resiliency.</span></span>
* <span data-ttu-id="d2bd5-218">[Службы приложений Azure][lnk-appservices]: облачной платформы toobuild мощные веб- и мобильных приложений, подключающихся toodata в любом месте; в облаке hello или в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-218">[Azure App Services][lnk-appservices]: A cloud platform toobuild powerful web and mobile apps that connect toodata anywhere; in hello cloud or on-premises.</span></span> <span data-ttu-id="d2bd5-219">Создавайте привлекательные мобильные приложения для iOS, Android и Windows.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-219">Build engaging mobile apps for iOS, Android, and Windows.</span></span> <span data-ttu-id="d2bd5-220">Интеграция с программное обеспечение как услуга (SaaS) и корпоративных приложений с помощью toodozens out of box подключения облачных служб и корпоративных приложений.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-220">Integrate with your Software as a Service (SaaS) and enterprise applications with out-of-the-box connectivity toodozens of cloud-based services and enterprise applications.</span></span> <span data-ttu-id="d2bd5-221">Код в избранные языка и IDE (.NET, Node.js, PHP, Python или Java) toobuild веб-приложений и быстрее, чем когда-либо API-интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-221">Code in your favorite language and IDE (.NET, Node.js, PHP, Python, or Java) toobuild web apps and APIs faster than ever.</span></span>
* <span data-ttu-id="d2bd5-222">[Логика приложения][lnk-logicapps]: hello логику приложения службы приложений Azure позволяет интегрировать IoT решения tooyour имеющиеся бизнес-системы и автоматизации бизнес-процессов.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-222">[Logic Apps][lnk-logicapps]: hello Logic Apps feature of Azure App Service helps integrate your IoT solution tooyour existing line-of-business systems and automate workflow processes.</span></span> <span data-ttu-id="d2bd5-223">Логика приложения позволяет toodesign разработчики рабочих процессов, которые запускаются с триггера, а затем выполняют ряд шагов, правила и действия, использующие toointegrate мощные соединители с бизнес-процессов.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-223">Logic Apps enables developers toodesign workflows that start from a trigger and then execute a series of steps—rules and actions that use powerful connectors toointegrate with your business processes.</span></span> <span data-ttu-id="d2bd5-224">Логика приложения обеспечивает подключение out of box tooa огромное экосистема SaaS, облачную и локальных приложений.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-224">Logic Apps offers out-of-the-box connectivity tooa vast ecosystem of SaaS, cloud-based, and on-premises applications.</span></span>
* <span data-ttu-id="d2bd5-225">[Хранилище больших двоичных объектов][lnk-blob]: надежная и экономически облачного хранилища для данных hello отправку toohello облачных устройств.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-225">[Azure blob storage][lnk-blob]: Reliable, economical cloud storage for hello data that your devices send toohello cloud.</span></span>

## <a name="conclusion"></a><span data-ttu-id="d2bd5-226">Заключение</span><span class="sxs-lookup"><span data-stu-id="d2bd5-226">Conclusion</span></span>
<span data-ttu-id="d2bd5-227">В этой статье приведены общие сведения на уровне реализации о проектировании и развертывании инфраструктуры IoT с помощью Azure IoT.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-227">This article provides overview of implementation level details for designing and deploying an IoT infrastructure using Azure IoT.</span></span> <span data-ttu-id="d2bd5-228">Настройка каждого компонента toobe безопасного является ключ в защите hello общую инфраструктуру IoT.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-228">Configuring each component toobe secure is key in securing hello overall IoT infrastructure.</span></span> <span data-ttu-id="d2bd5-229">Hello проектных решений, доступных в Azure IoT обеспечения некоторого уровня гибкость и удобство выбора; Однако каждый вариант может повлиять на безопасность.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-229">hello design choices available in Azure IoT provide some level of flexibility and choice; however, each choice may have security implications.</span></span> <span data-ttu-id="d2bd5-230">Рекомендуется использовать каждый из этих вариантов, предварительно оценив затраты и риски.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-230">It is recommended that each of these choices be evaluated through a risk/cost assessment.</span></span>

## <a name="see-also"></a><span data-ttu-id="d2bd5-231">См. также</span><span class="sxs-lookup"><span data-stu-id="d2bd5-231">See also</span></span>
<span data-ttu-id="d2bd5-232">Можно также изучить некоторые hello и другие возможности hello IoT Suite предварительно настроенных решений:</span><span class="sxs-lookup"><span data-stu-id="d2bd5-232">You can also explore some of hello other features and capabilities of hello IoT Suite preconfigured solutions:</span></span>

* <span data-ttu-id="d2bd5-233">[Обзор предварительно настроенного решения прогнозируемого обслуживания][lnk-predictive-overview]</span><span class="sxs-lookup"><span data-stu-id="d2bd5-233">[Predictive maintenance preconfigured solution overview][lnk-predictive-overview]</span></span>
* <span data-ttu-id="d2bd5-234">[Часто задаваемые вопросы об IoT Suite][lnk-faq]</span><span class="sxs-lookup"><span data-stu-id="d2bd5-234">[Frequently asked questions for IoT Suite][lnk-faq]</span></span>

<span data-ttu-id="d2bd5-235">Вы найдете сведения о безопасности центр IoT в [tooIoT управления доступом концентратора] [ lnk-devguide-security] в hello руководстве разработчика центр IoT.</span><span class="sxs-lookup"><span data-stu-id="d2bd5-235">You can read about IoT Hub security in [Control access tooIoT Hub][lnk-devguide-security] in hello IoT Hub developer guide.</span></span>


[img-overview]: media/iot-suite-security-deployment/overview.png

[lnk-security-tokens]: ../iot-hub/iot-hub-devguide-security.md#security-token-structure
[lnk-sas-tokens]: ../iot-hub/iot-hub-devguide-security.md#use-sas-tokens-in-a-device-app
[lnk-identity-registry]: ../iot-hub/iot-hub-devguide-identity-registry.md
[lnk-protocols]: ../iot-hub/iot-hub-devguide-security.md
[lnk-custom-auth]: ../iot-hub/iot-hub-devguide-security.md#custom-device-authentication
[lnk-x509]: http://www.itu.int/rec/T-REC-X.509-201210-I/en
[lnk-tls12]: https://tools.ietf.org/html/rfc5246
[lnk-service-tokens]: ../iot-hub/iot-hub-devguide-security.md#use-security-tokens-from-service-components
[lnk-docdb]: https://azure.microsoft.com/services/documentdb/
[lnk-asa]: https://azure.microsoft.com/services/stream-analytics/
[lnk-appservices]: https://azure.microsoft.com/services/app-service/
[lnk-logicapps]: https://azure.microsoft.com/services/app-service/logic/
[lnk-blob]: https://azure.microsoft.com/services/storage/

[lnk-predictive-overview]: iot-suite-predictive-overview.md
[lnk-faq]: iot-suite-faq.md
[lnk-devguide-security]: ../iot-hub/iot-hub-devguide-security.md
