---
title: "Безопасное развертывание Интернета вещей | Документация Майкрософт"
description: "В этой статье описано, как обеспечить безопасность развертывания IoT."
services: 
suite: iot-suite
documentationcenter: 
author: YuriDio
manager: timlt
editor: 
ms.assetid: 95c23341-16b0-4954-b3f2-d2e82ab7b367
ms.service: iot-suite
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/24/2017
ms.author: yurid
ms.openlocfilehash: d752dd13b138cdae80dac5c0b2f84a19fe0aa670
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="secure-your-iot-deployment"></a><span data-ttu-id="bb0df-103">Защита развертывания IoT</span><span class="sxs-lookup"><span data-stu-id="bb0df-103">Secure your IoT deployment</span></span>
<span data-ttu-id="bb0df-104">В этой статье более подробно рассматривается защита инфраструктуры "Интернета вещей" (IoT) на основе Azure IoT.</span><span class="sxs-lookup"><span data-stu-id="bb0df-104">This article provides the next level of detail for securing the Azure IoT-based Internet of Things (IoT) infrastructure.</span></span> <span data-ttu-id="bb0df-105">Она содержит ссылки на сведения о настройке и развертывании каждого компонента на уровне реализации.</span><span class="sxs-lookup"><span data-stu-id="bb0df-105">It links to implementation level details for configuring and deploying each component.</span></span> <span data-ttu-id="bb0df-106">Кроме того, в статье представлены сравнения различных конкурирующих методов и рекомендации по их выбору.</span><span class="sxs-lookup"><span data-stu-id="bb0df-106">It also provides comparisons and choices between various competing methods.</span></span>

<span data-ttu-id="bb0df-107">Обеспечение безопасности развертывания Azure IoT можно разделить на следующие три области безопасности.</span><span class="sxs-lookup"><span data-stu-id="bb0df-107">Securing the Azure IoT deployment can be divided into the following three security areas:</span></span>

* <span data-ttu-id="bb0df-108">**Безопасность устройства**: защита устройства IoT при его развертывании на практике.</span><span class="sxs-lookup"><span data-stu-id="bb0df-108">**Device Security**: Securing the IoT device while it is deployed in the wild.</span></span>
* <span data-ttu-id="bb0df-109">**Безопасность подключения**: обеспечение конфиденциальности и защиты от несанкционированного изменения всех данных, передаваемых между устройством IoT и центром IoT.</span><span class="sxs-lookup"><span data-stu-id="bb0df-109">**Connection Security**: Ensuring all data transmitted between the IoT device and IoT Hub is confidential and tamper-proof.</span></span>
* <span data-ttu-id="bb0df-110">**Безопасность в облаке**: предоставление средств для защиты данных, перемещаемых и хранимых в облаке.</span><span class="sxs-lookup"><span data-stu-id="bb0df-110">**Cloud Security**: Providing a means to secure data while it moves through, and is stored in the cloud.</span></span>

![Три области безопасности][img-overview]

## <a name="secure-device-provisioning-and-authentication"></a><span data-ttu-id="bb0df-112">Безопасная подготовка и проверка подлинности устройств</span><span class="sxs-lookup"><span data-stu-id="bb0df-112">Secure device provisioning and authentication</span></span>
<span data-ttu-id="bb0df-113">Azure IoT Suite позволяет защитить устройства IoT следующими двумя методами:</span><span class="sxs-lookup"><span data-stu-id="bb0df-113">The Azure IoT Suite secures IoT devices by the following two methods:</span></span>

* <span data-ttu-id="bb0df-114">предоставляя уникальный ключ удостоверения (маркеры безопасности) для каждого устройства, который может использоваться им для взаимодействия с центром IoT;</span><span class="sxs-lookup"><span data-stu-id="bb0df-114">By providing a unique identity key (security tokens) for each device, which can be used by the device to communicate with the IoT Hub.</span></span>
* <span data-ttu-id="bb0df-115">используя [сертификат X.509][lnk-x509] и закрытый ключ на устройстве для аутентификации устройства в Центре Интернета вещей.</span><span class="sxs-lookup"><span data-stu-id="bb0df-115">By using an on-device [X.509 certificate][lnk-x509] and private key as a means to authenticate the device to the IoT Hub.</span></span> <span data-ttu-id="bb0df-116">Этот метод аутентификации гарантирует, что закрытый ключ на устройстве никогда не будет известен вне этого устройства, что позволяет повысить уровень безопасности.</span><span class="sxs-lookup"><span data-stu-id="bb0df-116">This authentication method ensures that the private key on the device is not known outside the device at any time, providing a higher level of security.</span></span>

<span data-ttu-id="bb0df-117">Метод маркеров безопасности обеспечивает аутентификацию каждого вызова центра IoT, отправленного устройством, за счет привязывания симметричного ключа к каждому вызову.</span><span class="sxs-lookup"><span data-stu-id="bb0df-117">The security token method provides authentication for each call made by the device to IoT Hub by associating the symmetric key to each call.</span></span> <span data-ttu-id="bb0df-118">Применение сертификатов X.509 позволяет аутентифицировать устройства IoT на физическом уровне при установлении подключения TLS.</span><span class="sxs-lookup"><span data-stu-id="bb0df-118">X.509-based authentication allows authentication of an IoT device at the physical layer as part of the TLS connection establishment.</span></span> <span data-ttu-id="bb0df-119">Метод на основе маркеров безопасности можно использовать без аутентификации на основе сертификатов X.509, являющейся менее защищенной схемой.</span><span class="sxs-lookup"><span data-stu-id="bb0df-119">The security-token-based method can be used without the X.509 authentication which is a less secure pattern.</span></span> <span data-ttu-id="bb0df-120">Выбор между этими двумя методами в основном определяется требованиями к безопасности аутентификации устройств и наличием защищенного хранилища на устройстве (для безопасного хранения закрытого ключа).</span><span class="sxs-lookup"><span data-stu-id="bb0df-120">The choice between the two methods is primarily dictated by how secure the device authentication needs to be, and availability of secure storage on the device (to store the private key securely).</span></span>

## <a name="iot-hub-security-tokens"></a><span data-ttu-id="bb0df-121">Маркеры безопасности центра IoT</span><span class="sxs-lookup"><span data-stu-id="bb0df-121">IoT Hub security tokens</span></span>
<span data-ttu-id="bb0df-122">Центр IoT использует маркеры безопасности для аутентификации устройств и служб, чтобы избежать отправки ключей по сети.</span><span class="sxs-lookup"><span data-stu-id="bb0df-122">IoT Hub uses security tokens to authenticate devices and services to avoid sending keys on the network.</span></span> <span data-ttu-id="bb0df-123">Кроме того, маркеры безопасности ограничены по времени и области действия.</span><span class="sxs-lookup"><span data-stu-id="bb0df-123">Additionally, security tokens are limited in time validity and scope.</span></span> <span data-ttu-id="bb0df-124">Пакеты SDK для Центра Интернета вещей Azure автоматически создают маркеры без специальной настройки.</span><span class="sxs-lookup"><span data-stu-id="bb0df-124">Azure IoT SDKs automatically generate tokens without requiring any special configuration.</span></span> <span data-ttu-id="bb0df-125">Однако в некоторых случаях требуется, чтобы пользователь напрямую создал и использовал маркеры.</span><span class="sxs-lookup"><span data-stu-id="bb0df-125">Some scenarios, however, require the user to generate and use security tokens directly.</span></span> <span data-ttu-id="bb0df-126">В их число входит непосредственное использование поверхностей MQTT, AMQP или HTTP либо реализация схемы службы маркеров.</span><span class="sxs-lookup"><span data-stu-id="bb0df-126">These include the direct use of the MQTT, AMQP, or HTTP surfaces, or the implementation of the token service pattern.</span></span>

<span data-ttu-id="bb0df-127">Дополнительные сведения о структуре маркера безопасности и его использовании можно найти в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="bb0df-127">More details on the structure of the security token and its usage can be found in the following articles:</span></span>

* <span data-ttu-id="bb0df-128">[Структура маркера безопасности][lnk-security-tokens]</span><span class="sxs-lookup"><span data-stu-id="bb0df-128">[Security token structure][lnk-security-tokens]</span></span>
* <span data-ttu-id="bb0df-129">[Использование маркеров SAS в клиенте устройства][lnk-sas-tokens]</span><span class="sxs-lookup"><span data-stu-id="bb0df-129">[Using SAS tokens as a device][lnk-sas-tokens]</span></span>

<span data-ttu-id="bb0df-130">В каждом Центре Интернета вещей есть [реестр удостоверений][lnk-identity-registry], который можно использовать для создания в службе уникальных ресурсов для каждого устройства (например, очереди с сообщениями, отправляемыми из облака на устройство) и предоставления доступа к конечным точкам для устройств.</span><span class="sxs-lookup"><span data-stu-id="bb0df-130">Each IoT Hub has an [identity registry][lnk-identity-registry] that can be used to create per-device resources in the service, such as a queue that contains in-flight cloud-to-device messages, and to allow access to the device-facing endpoints.</span></span> <span data-ttu-id="bb0df-131">Реестр удостоверений центра IoT обеспечивает безопасное хранение удостоверений устройств и ключей безопасности для решения.</span><span class="sxs-lookup"><span data-stu-id="bb0df-131">The IoT Hub identity registry provides secure storage of device identities and security keys for a solution.</span></span> <span data-ttu-id="bb0df-132">Отдельные удостоверения устройств или группы удостоверений можно включать в список разрешений или блокировок, обеспечивая таким образом полный контроль над доступом к устройству.</span><span class="sxs-lookup"><span data-stu-id="bb0df-132">Individual or groups of device identities can be added to an allow list, or a block list, enabling complete control over device access.</span></span> <span data-ttu-id="bb0df-133">В приведенных ниже статьях представлены сведения о структуре реестра удостоверений и поддерживаемых им операциях.</span><span class="sxs-lookup"><span data-stu-id="bb0df-133">The following articles provide more details on the structure of the identity registry and supported operations.</span></span>

<span data-ttu-id="bb0df-134">[Центр Интернета вещей поддерживает такие протоколы, как MQTT, AMQP и HTTP][lnk-protocols].</span><span class="sxs-lookup"><span data-stu-id="bb0df-134">[IoT Hub supports protocols such as MQTT, AMQP, and HTTP][lnk-protocols].</span></span> <span data-ttu-id="bb0df-135">Каждый из этих протоколов по-разному используют маркеры безопасности, передаваемые из устройства IoT в центр IoT:</span><span class="sxs-lookup"><span data-stu-id="bb0df-135">Each of these protocols use security tokens from the IoT device to IoT Hub differently:</span></span>

* <span data-ttu-id="bb0df-136">AMQP: применяется защита на основе утверждений SASL PLAIN и AMQP ({имя_политики}@sas.root.{имя_Центра_Интернета_вещей} в случае использования маркеров уровня Центра Интернета вещей; {ИД_устройства} в случае маркеров уровня устройства).</span><span class="sxs-lookup"><span data-stu-id="bb0df-136">AMQP: SASL PLAIN and AMQP Claims-based security ({policyName}@sas.root.{iothubName} in the case of IoT hub-level tokens; {deviceId} in case of device-scoped tokens).</span></span>
* <span data-ttu-id="bb0df-137">MQTT: пакет CONNECT использует {ИД_устройства} в качестве значений {ИД_клиента}, {имя_Центра_Интернета_вещей}/{ИД_устройства} в поле **Имя пользователя** и маркер SAS в поле **Пароль**.</span><span class="sxs-lookup"><span data-stu-id="bb0df-137">MQTT: CONNECT packet uses {deviceId} as the {ClientId}, {IoThubhostname}/{deviceId} in the **Username** field and a SAS token in the **Password** field.</span></span>
* <span data-ttu-id="bb0df-138">HTTP: действительный маркер находится в заголовке запроса авторизации.</span><span class="sxs-lookup"><span data-stu-id="bb0df-138">HTTP: Valid token is in the authorization request header.</span></span>

<span data-ttu-id="bb0df-139">С помощью реестра удостоверений Центра Интернета вещей можно настроить контроль доступа и учетные данные безопасности для каждого устройства.</span><span class="sxs-lookup"><span data-stu-id="bb0df-139">IoT Hub identity registry can be used to configure per-device security credentials and access control.</span></span> <span data-ttu-id="bb0df-140">Если в решение Интернета вещей уже вложены значительные средства для реализации [настраиваемого реестра удостоверений устройств и (или) схемы аутентификации][lnk-custom-auth], то с помощью службы маркеров его можно интегрировать в существующую инфраструктуру, использующую Центр Интернета вещей.</span><span class="sxs-lookup"><span data-stu-id="bb0df-140">However, if an IoT solution already has a significant investment in a [custom device identity registry and/or authentication scheme][lnk-custom-auth], it can be integrated into an existing infrastructure with IoT Hub by creating a token service.</span></span>

### <a name="x509-certificate-based-device-authentication"></a><span data-ttu-id="bb0df-141">Аутентификация устройств на основе сертификатов X.509</span><span class="sxs-lookup"><span data-stu-id="bb0df-141">X.509 certificate-based device authentication</span></span>
<span data-ttu-id="bb0df-142">Использование [сертификатов X.509 на устройствах][lnk-protocols] и связанных с ними пар закрытого и открытого ключей позволяет реализовать дополнительную аутентификацию на физическом уровне.</span><span class="sxs-lookup"><span data-stu-id="bb0df-142">The use of a [device-based X.509 certificate][lnk-protocols] and its associated private and public key pair allows additional authentication at the physical layer.</span></span> <span data-ttu-id="bb0df-143">Закрытый ключ безопасно хранится на устройстве и не может быть обнаружен за его пределами.</span><span class="sxs-lookup"><span data-stu-id="bb0df-143">The private key is stored securely in the device and is not discoverable outside the device.</span></span> <span data-ttu-id="bb0df-144">Сертификат X.509 содержит сведения об устройстве, например идентификатор устройства и другие организационные сведения.</span><span class="sxs-lookup"><span data-stu-id="bb0df-144">The X.509 certificate contains information about the device, such as device ID, and other organizational details.</span></span> <span data-ttu-id="bb0df-145">Закрытый ключ используется для создания подписи сертификата.</span><span class="sxs-lookup"><span data-stu-id="bb0df-145">A signature of the certificate is generated by using the private key.</span></span>

<span data-ttu-id="bb0df-146">Ниже приведена общая последовательность подготовки устройства:</span><span class="sxs-lookup"><span data-stu-id="bb0df-146">High-level device provisioning flow:</span></span>

* <span data-ttu-id="bb0df-147">Привязка идентификатора к физическому устройству. Это может быть удостоверение устройства или сертификат X.509, привязанный к устройству во время его производства или введения в эксплуатацию.</span><span class="sxs-lookup"><span data-stu-id="bb0df-147">Associate an identifier to a physical device – device identity and/or X.509 certificate associated to the device during device manufacturing or commissioning.</span></span>
* <span data-ttu-id="bb0df-148">Создание соответствующей записи в реестре удостоверений Центра Интернета вещей, содержащей удостоверение устройства и сведения об устройстве.</span><span class="sxs-lookup"><span data-stu-id="bb0df-148">Create a corresponding identity entry in IoT Hub – device identity and associated device information in the IoT Hub identity registry.</span></span>
* <span data-ttu-id="bb0df-149">Безопасное хранение отпечатка сертификата X.509 в реестре устройств Центра Интернета вещей.</span><span class="sxs-lookup"><span data-stu-id="bb0df-149">Securely store X.509 certificate thumbprint in IoT Hub identity registry.</span></span>

### <a name="root-certificate-on-device"></a><span data-ttu-id="bb0df-150">Корневой сертификат на устройстве</span><span class="sxs-lookup"><span data-stu-id="bb0df-150">Root certificate on device</span></span>
<span data-ttu-id="bb0df-151">Во время установления безопасного подключения TLS к центру IoT устройство IoT аутентифицирует центр IoT с помощью корневого сертификата, который является частью пакета SDK для устройств.</span><span class="sxs-lookup"><span data-stu-id="bb0df-151">While establishing a secure TLS connection with IoT Hub, the IoT device authenticates IoT Hub using a root certificate which is part of the device SDK.</span></span> <span data-ttu-id="bb0df-152">Сертификат клиентского пакета SDK для C находится в папке \\c\\certs в корне репозитория.</span><span class="sxs-lookup"><span data-stu-id="bb0df-152">For the C client SDK the certificate is located under the folder "\\c\\certs" under the root of the repo.</span></span> <span data-ttu-id="bb0df-153">Хотя эти корневые сертификаты действуют продолжительное время, срок их действия может истечь или они могут быть отозваны.</span><span class="sxs-lookup"><span data-stu-id="bb0df-153">Though these root certificates are long-lived, they still may expire or be revoked.</span></span> <span data-ttu-id="bb0df-154">Если нет возможности обновить сертификат на устройстве, вследствие этого устройство не сможет подключиться к центру IoT (или другой облачной службе).</span><span class="sxs-lookup"><span data-stu-id="bb0df-154">If there is no way of updating the certificate on the device, the device may not be able to subsequently connect to the IoT Hub (or any other cloud service).</span></span> <span data-ttu-id="bb0df-155">Наличие средств обновления корневого сертификата после развертывания устройства IoT позволит эффективно уменьшить этот риск.</span><span class="sxs-lookup"><span data-stu-id="bb0df-155">Having a means to update the root certificate once the IoT device is deployed will effectively mitigate this risk.</span></span>

## <a name="securing-the-connection"></a><span data-ttu-id="bb0df-156">Защита подключения</span><span class="sxs-lookup"><span data-stu-id="bb0df-156">Securing the connection</span></span>
<span data-ttu-id="bb0df-157">Подключение через Интернет между устройством IoT и центром IoT защищается с помощью протокола TLS.</span><span class="sxs-lookup"><span data-stu-id="bb0df-157">Internet connection between the IoT device and IoT Hub is secured using the Transport Layer Security (TLS) standard.</span></span> <span data-ttu-id="bb0df-158">Azure IoT поддерживает протоколы [TLS 1.2][lnk-tls12], TLS 1.1 и TLS 1.0 (в указанном порядке приоритетности).</span><span class="sxs-lookup"><span data-stu-id="bb0df-158">Azure IoT supports [TLS 1.2][lnk-tls12], TLS 1.1 and TLS 1.0, in this order.</span></span> <span data-ttu-id="bb0df-159">Поддержка TLS 1.0 предоставляется только для обеспечения обратной совместимости.</span><span class="sxs-lookup"><span data-stu-id="bb0df-159">Support for TLS 1.0 is provided for backward compatibility only.</span></span> <span data-ttu-id="bb0df-160">Рекомендуется использовать протокол TLS 1.2, так как он обеспечивает наиболее надежную защиту.</span><span class="sxs-lookup"><span data-stu-id="bb0df-160">It is recommended to use TLS 1.2 since it provides the most security.</span></span>

<span data-ttu-id="bb0df-161">Azure IoT Suite поддерживает приведенные ниже комплекты шифров в указанном порядке.</span><span class="sxs-lookup"><span data-stu-id="bb0df-161">Azure IoT Suite supports the following Cipher Suites, in this order.</span></span>

| <span data-ttu-id="bb0df-162">Комплект шифров</span><span class="sxs-lookup"><span data-stu-id="bb0df-162">Cipher Suite</span></span> | <span data-ttu-id="bb0df-163">Длина</span><span class="sxs-lookup"><span data-stu-id="bb0df-163">Length</span></span> |
| --- | --- |
| <span data-ttu-id="bb0df-164">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (эквивалент</span><span class="sxs-lookup"><span data-stu-id="bb0df-164">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="bb0df-165">7680-разрядного алгоритма RSA) FS</span><span class="sxs-lookup"><span data-stu-id="bb0df-165">7680 bits RSA) FS</span></span> |<span data-ttu-id="bb0df-166">256</span><span class="sxs-lookup"><span data-stu-id="bb0df-166">256</span></span> |
| <span data-ttu-id="bb0df-167">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (эквивалент</span><span class="sxs-lookup"><span data-stu-id="bb0df-167">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="bb0df-168">3072-разрядного алгоритма RSA) FS</span><span class="sxs-lookup"><span data-stu-id="bb0df-168">3072 bits RSA) FS</span></span> |<span data-ttu-id="bb0df-169">128</span><span class="sxs-lookup"><span data-stu-id="bb0df-169">128</span></span> |
| <span data-ttu-id="bb0df-170">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (эквивалент</span><span class="sxs-lookup"><span data-stu-id="bb0df-170">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="bb0df-171">7680-разрядного алгоритма RSA) FS</span><span class="sxs-lookup"><span data-stu-id="bb0df-171">7680 bits RSA) FS</span></span> |<span data-ttu-id="bb0df-172">256</span><span class="sxs-lookup"><span data-stu-id="bb0df-172">256</span></span> |
| <span data-ttu-id="bb0df-173">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (эквивалент</span><span class="sxs-lookup"><span data-stu-id="bb0df-173">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="bb0df-174">3072-разрядного алгоритма RSA) FS</span><span class="sxs-lookup"><span data-stu-id="bb0df-174">3072 bits RSA) FS</span></span> |<span data-ttu-id="bb0df-175">128</span><span class="sxs-lookup"><span data-stu-id="bb0df-175">128</span></span> |
| <span data-ttu-id="bb0df-176">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span><span class="sxs-lookup"><span data-stu-id="bb0df-176">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span></span> |<span data-ttu-id="bb0df-177">256</span><span class="sxs-lookup"><span data-stu-id="bb0df-177">256</span></span> |
| <span data-ttu-id="bb0df-178">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span><span class="sxs-lookup"><span data-stu-id="bb0df-178">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span></span> |<span data-ttu-id="bb0df-179">128</span><span class="sxs-lookup"><span data-stu-id="bb0df-179">128</span></span> |
| <span data-ttu-id="bb0df-180">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span><span class="sxs-lookup"><span data-stu-id="bb0df-180">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span></span> |<span data-ttu-id="bb0df-181">256</span><span class="sxs-lookup"><span data-stu-id="bb0df-181">256</span></span> |
| <span data-ttu-id="bb0df-182">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span><span class="sxs-lookup"><span data-stu-id="bb0df-182">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span></span> |<span data-ttu-id="bb0df-183">128</span><span class="sxs-lookup"><span data-stu-id="bb0df-183">128</span></span> |
| <span data-ttu-id="bb0df-184">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span><span class="sxs-lookup"><span data-stu-id="bb0df-184">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span></span> |<span data-ttu-id="bb0df-185">256</span><span class="sxs-lookup"><span data-stu-id="bb0df-185">256</span></span> |
| <span data-ttu-id="bb0df-186">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span><span class="sxs-lookup"><span data-stu-id="bb0df-186">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span></span> |<span data-ttu-id="bb0df-187">128</span><span class="sxs-lookup"><span data-stu-id="bb0df-187">128</span></span> |
| <span data-ttu-id="bb0df-188">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span><span class="sxs-lookup"><span data-stu-id="bb0df-188">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span></span> |<span data-ttu-id="bb0df-189">112</span><span class="sxs-lookup"><span data-stu-id="bb0df-189">112</span></span> |

## <a name="securing-the-cloud"></a><span data-ttu-id="bb0df-190">Защита облака</span><span class="sxs-lookup"><span data-stu-id="bb0df-190">Securing the cloud</span></span>
<span data-ttu-id="bb0df-191">Центр Интернета вещей Azure дает возможность определить [политики контроля доступа][lnk-protocols] для каждого ключа безопасности.</span><span class="sxs-lookup"><span data-stu-id="bb0df-191">Azure IoT Hub allows definition of [access control policies][lnk-protocols] for each security key.</span></span> <span data-ttu-id="bb0df-192">В нем используется приведенный ниже набор разрешений для предоставления доступа к каждой из конечных точек центра IoT.</span><span class="sxs-lookup"><span data-stu-id="bb0df-192">It uses the following set of permissions to grant access to each of IoT Hub's endpoints.</span></span> <span data-ttu-id="bb0df-193">Разрешения ограничивают доступ к центру IoT на основе функций.</span><span class="sxs-lookup"><span data-stu-id="bb0df-193">Permissions limit the access to an IoT Hub based on functionality.</span></span>

* <span data-ttu-id="bb0df-194">**RegistryRead**.</span><span class="sxs-lookup"><span data-stu-id="bb0df-194">**RegistryRead**.</span></span> <span data-ttu-id="bb0df-195">Предоставляет доступ на чтение к реестру удостоверений.</span><span class="sxs-lookup"><span data-stu-id="bb0df-195">Grants read access to the identity registry.</span></span> <span data-ttu-id="bb0df-196">Дополнительные сведения см. в разделе о [реестре удостоверений][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="bb0df-196">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="bb0df-197">**RegistryReadWrite**.</span><span class="sxs-lookup"><span data-stu-id="bb0df-197">**RegistryReadWrite**.</span></span> <span data-ttu-id="bb0df-198">Предоставляет доступ на чтение и запись к реестру удостоверений.</span><span class="sxs-lookup"><span data-stu-id="bb0df-198">Grants read and write access to the identity registry.</span></span> <span data-ttu-id="bb0df-199">Дополнительные сведения см. в разделе о [реестре удостоверений][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="bb0df-199">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="bb0df-200">**ServiceConnect**.</span><span class="sxs-lookup"><span data-stu-id="bb0df-200">**ServiceConnect**.</span></span> <span data-ttu-id="bb0df-201">Предоставляет доступ к конечным точкам обмена данными и мониторинга, обращенным к облачной службе.</span><span class="sxs-lookup"><span data-stu-id="bb0df-201">Grants access to cloud service-facing communication and monitoring endpoints.</span></span> <span data-ttu-id="bb0df-202">Например, это разрешение позволяет серверным облачным службам получать сообщения с устройств, отправлять сообщения в устройства и получать соответствующие уведомления о доставке.</span><span class="sxs-lookup"><span data-stu-id="bb0df-202">For example, it grants permission to back-end cloud services to receive device-to-cloud messages, send cloud-to-device messages, and retrieve the corresponding delivery acknowledgments.</span></span>
* <span data-ttu-id="bb0df-203">**DeviceConnect**.</span><span class="sxs-lookup"><span data-stu-id="bb0df-203">**DeviceConnect**.</span></span> <span data-ttu-id="bb0df-204">Предоставляет доступ к конечным точкам для устройств.</span><span class="sxs-lookup"><span data-stu-id="bb0df-204">Grants access to device-facing endpoints.</span></span> <span data-ttu-id="bb0df-205">Например, это разрешение позволяет отправлять сообщения с устройства в облако и получать сообщения, отправленные из облака на устройство.</span><span class="sxs-lookup"><span data-stu-id="bb0df-205">For example, it grants permission to send device-to-cloud messages and receive cloud-to-device messages.</span></span> <span data-ttu-id="bb0df-206">Это разрешение используют устройства.</span><span class="sxs-lookup"><span data-stu-id="bb0df-206">This permission is used by devices.</span></span>

<span data-ttu-id="bb0df-207">Существует два способа получения разрешений **DeviceConnect** для Центра Интернета вещей с использованием [маркеров безопасности][lnk-sas-tokens]: с помощью ключа удостоверения устройства или общего ключа доступа.</span><span class="sxs-lookup"><span data-stu-id="bb0df-207">There are two ways to obtain **DeviceConnect** permissions with IoT Hub with [security tokens][lnk-sas-tokens]: using a device identity key, or a shared access key.</span></span> <span data-ttu-id="bb0df-208">Кроме того, следует отметить, что все функциональные возможности, доступные с устройств, намеренно предоставляются в конечных точках с префиксом `/devices/{deviceId}`.</span><span class="sxs-lookup"><span data-stu-id="bb0df-208">Moreover, it is important to note that all functionality accessible from devices is exposed by design on endpoints with prefix `/devices/{deviceId}`.</span></span>

<span data-ttu-id="bb0df-209">[Компоненты службы могут создавать маркеры безопасности только][lnk-service-tokens] с помощью политик общего доступа, предоставляющих соответствующие разрешения.</span><span class="sxs-lookup"><span data-stu-id="bb0df-209">[Service components can only generate security tokens][lnk-service-tokens] using shared access policies granting the appropriate permissions.</span></span>

<span data-ttu-id="bb0df-210">Центр IoT Azure и другие службы, которые могут быть частью решения, обеспечивают управление пользователями с помощью Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bb0df-210">Azure IoT Hub and other services which may be part of the solution allow management of users using the Azure Active Directory.</span></span>

<span data-ttu-id="bb0df-211">Данные, принимаемые Центром Интернета вещей Azure, могут использоваться различными службами, в том числе службой Azure Stream Analytics, хранилищем BLOB-объектов и т. д.</span><span class="sxs-lookup"><span data-stu-id="bb0df-211">Data ingested by Azure IoT Hub can be consumed by a variety of services such as Azure Stream Analytics and Azure blob storage.</span></span> <span data-ttu-id="bb0df-212">Эти службы предоставляют доступ к управлению.</span><span class="sxs-lookup"><span data-stu-id="bb0df-212">These services allow management access.</span></span> <span data-ttu-id="bb0df-213">Ниже приведены дополнительные сведения об этих службах и доступных вариантах.</span><span class="sxs-lookup"><span data-stu-id="bb0df-213">Read more about these services and available options below:</span></span>

* <span data-ttu-id="bb0df-214">[Azure Cosmos DB][lnk-docdb] — служба масштабируемых и полностью индексированных баз данных для частично структурированных данных, которая управляет метаданными для подготавливаемых устройств: атрибутами, конфигурацией и параметрами безопасности.</span><span class="sxs-lookup"><span data-stu-id="bb0df-214">[Azure Cosmos DB][lnk-docdb]: A scalable, fully-indexed database service for semi-structured data that manages metadata for the devices you provision, such as attributes, configuration, and security properties.</span></span> <span data-ttu-id="bb0df-215">Cosmos DB обеспечивает высокую производительность и пропускную способность при обработке, схемонезависимое индексирование данных, а также полнофункциональный интерфейс SQL-запросов.</span><span class="sxs-lookup"><span data-stu-id="bb0df-215">Cosmos DB offers high-performance and high-throughput processing, schema-agnostic indexing of data, and a rich SQL query interface.</span></span>
* <span data-ttu-id="bb0df-216">[Azure Stream Analytics][lnk-asa] — потоковая обработка в режиме реального времени обеспечивает быстрое развертывание и внедрение бюджетных аналитических решений для анализа актуальных данных, передаваемых устройствами, датчиками, инфраструктурой и приложениями.</span><span class="sxs-lookup"><span data-stu-id="bb0df-216">[Azure Stream Analytics][lnk-asa]: Real-time stream processing in the cloud that enables you to rapidly develop and deploy a low-cost analytics solution to uncover real-time insights from devices, sensors, infrastructure, and applications.</span></span> <span data-ttu-id="bb0df-217">Данные, поступающие из этой полностью управляемой службы, можно масштабировать до любого объема, поддерживая высокую пропускную способность, небольшую задержку и устойчивость.</span><span class="sxs-lookup"><span data-stu-id="bb0df-217">The data from this fully-managed service can scale to any volume while still achieving high throughput, low latency, and resiliency.</span></span>
* <span data-ttu-id="bb0df-218">[Служба приложений Azure][lnk-appservices] — облачная платформа, предназначенная для создания мощных мобильных приложений и веб-приложений, которые могут подключаться к данным в любом расположении, в облаке или локально.</span><span class="sxs-lookup"><span data-stu-id="bb0df-218">[Azure App Services][lnk-appservices]: A cloud platform to build powerful web and mobile apps that connect to data anywhere; in the cloud or on-premises.</span></span> <span data-ttu-id="bb0df-219">Создавайте привлекательные мобильные приложения для iOS, Android и Windows.</span><span class="sxs-lookup"><span data-stu-id="bb0df-219">Build engaging mobile apps for iOS, Android, and Windows.</span></span> <span data-ttu-id="bb0df-220">Выполняйте интеграцию с приложениями SaaS (приложения как услуга) и корпоративными приложениями со встроенной возможностью подключения при запуске к десяткам разных облачных служб и корпоративных приложений.</span><span class="sxs-lookup"><span data-stu-id="bb0df-220">Integrate with your Software as a Service (SaaS) and enterprise applications with out-of-the-box connectivity to dozens of cloud-based services and enterprise applications.</span></span> <span data-ttu-id="bb0df-221">Программируйте на предпочитаемом языке в интегрированной среде разработки (.NET, NodeJS, PHP, Python или Java), чтобы создавать веб-приложения и интерфейсы API еще быстрее.</span><span class="sxs-lookup"><span data-stu-id="bb0df-221">Code in your favorite language and IDE (.NET, Node.js, PHP, Python, or Java) to build web apps and APIs faster than ever.</span></span>
* <span data-ttu-id="bb0df-222">[Logic Apps][lnk-logicapps] — этот компонент службы приложений Azure позволяет интегрировать решения Интернета вещей в существующие бизнес-системы для автоматизации рабочих процессов.</span><span class="sxs-lookup"><span data-stu-id="bb0df-222">[Logic Apps][lnk-logicapps]: The Logic Apps feature of Azure App Service helps integrate your IoT solution to your existing line-of-business systems and automate workflow processes.</span></span> <span data-ttu-id="bb0df-223">Приложения логики позволяют разработчикам проектировать запускаемые с помощью триггера рабочие процессы, а затем выполнять ряд действий (включая правила), в ходе которых используются мощные соединители для интеграции с бизнес-процессами.</span><span class="sxs-lookup"><span data-stu-id="bb0df-223">Logic Apps enables developers to design workflows that start from a trigger and then execute a series of steps—rules and actions that use powerful connectors to integrate with your business processes.</span></span> <span data-ttu-id="bb0df-224">В приложениях логики реализована встроенная возможность подключения к обширной экосистеме SaaS, включающей облачные и локальные приложения.</span><span class="sxs-lookup"><span data-stu-id="bb0df-224">Logic Apps offers out-of-the-box connectivity to a vast ecosystem of SaaS, cloud-based, and on-premises applications.</span></span>
* <span data-ttu-id="bb0df-225">[Хранилище BLOB-объектов Azure][lnk-blob] — надежное и экономичное облачное хранилище для данных, отправляемых устройствами в облако.</span><span class="sxs-lookup"><span data-stu-id="bb0df-225">[Azure blob storage][lnk-blob]: Reliable, economical cloud storage for the data that your devices send to the cloud.</span></span>

## <a name="conclusion"></a><span data-ttu-id="bb0df-226">Заключение</span><span class="sxs-lookup"><span data-stu-id="bb0df-226">Conclusion</span></span>
<span data-ttu-id="bb0df-227">В этой статье приведены общие сведения на уровне реализации о проектировании и развертывании инфраструктуры IoT с помощью Azure IoT.</span><span class="sxs-lookup"><span data-stu-id="bb0df-227">This article provides overview of implementation level details for designing and deploying an IoT infrastructure using Azure IoT.</span></span> <span data-ttu-id="bb0df-228">Настройка каждого компонента, позволяющая обеспечить его безопасность, является ключом к защите всей инфраструктуры IoT.</span><span class="sxs-lookup"><span data-stu-id="bb0df-228">Configuring each component to be secure is key in securing the overall IoT infrastructure.</span></span> <span data-ttu-id="bb0df-229">Варианты проектирования, доступные в Azure IoT, обеспечивают определенный уровень гибкости и выбора, однако каждый из них может влиять на безопасность.</span><span class="sxs-lookup"><span data-stu-id="bb0df-229">The design choices available in Azure IoT provide some level of flexibility and choice; however, each choice may have security implications.</span></span> <span data-ttu-id="bb0df-230">Рекомендуется использовать каждый из этих вариантов, предварительно оценив затраты и риски.</span><span class="sxs-lookup"><span data-stu-id="bb0df-230">It is recommended that each of these choices be evaluated through a risk/cost assessment.</span></span>

## <a name="see-also"></a><span data-ttu-id="bb0df-231">См. также</span><span class="sxs-lookup"><span data-stu-id="bb0df-231">See also</span></span>
<span data-ttu-id="bb0df-232">Вы также можете ознакомиться с другими функциями и возможностями предварительно настроенных решений IoT Suite.</span><span class="sxs-lookup"><span data-stu-id="bb0df-232">You can also explore some of the other features and capabilities of the IoT Suite preconfigured solutions:</span></span>

* <span data-ttu-id="bb0df-233">[Обзор предварительно настроенного решения прогнозируемого обслуживания][lnk-predictive-overview]</span><span class="sxs-lookup"><span data-stu-id="bb0df-233">[Predictive maintenance preconfigured solution overview][lnk-predictive-overview]</span></span>
* <span data-ttu-id="bb0df-234">[Часто задаваемые вопросы об IoT Suite][lnk-faq]</span><span class="sxs-lookup"><span data-stu-id="bb0df-234">[Frequently asked questions for IoT Suite][lnk-faq]</span></span>

<span data-ttu-id="bb0df-235">Сведения о безопасности Центра Интернета вещей см. в статье [Управление доступом к Центру Интернета вещей][lnk-devguide-security] в руководстве для разработчиков.</span><span class="sxs-lookup"><span data-stu-id="bb0df-235">You can read about IoT Hub security in [Control access to IoT Hub][lnk-devguide-security] in the IoT Hub developer guide.</span></span>


[img-overview]: media/iot-suite-security-deployment/overview.png

[lnk-security-tokens]: ../iot-hub/iot-hub-devguide-security.md#security-token-structure
[lnk-sas-tokens]: ../iot-hub/iot-hub-devguide-security.md#use-sas-tokens-in-a-device-app
[lnk-identity-registry]: ../iot-hub/iot-hub-devguide-identity-registry.md
[lnk-protocols]: ../iot-hub/iot-hub-devguide-security.md
[lnk-custom-auth]: ../iot-hub/iot-hub-devguide-security.md#custom-device-authentication
[lnk-x509]: http://www.itu.int/rec/T-REC-X.509-201210-I/en
[lnk-tls12]: https://tools.ietf.org/html/rfc5246
[lnk-service-tokens]: ../iot-hub/iot-hub-devguide-security.md#use-security-tokens-from-service-components
[lnk-docdb]: https://azure.microsoft.com/services/documentdb/
[lnk-asa]: https://azure.microsoft.com/services/stream-analytics/
[lnk-appservices]: https://azure.microsoft.com/services/app-service/
[lnk-logicapps]: https://azure.microsoft.com/services/app-service/logic/
[lnk-blob]: https://azure.microsoft.com/services/storage/

[lnk-predictive-overview]: iot-suite-predictive-overview.md
[lnk-faq]: iot-suite-faq.md
[lnk-devguide-security]: ../iot-hub/iot-hub-devguide-security.md
