# <a name="call-the-microsoft-graph-api-from-a-windows-desktop-app"></a>Вызов API Microsoft Graph из классического приложения для Windows

В этом руководстве показано, как собственное приложение .NET рабочего стола Windows (XAML) можно получить маркер доступа и вызвать Microsoft Graph API или другие API, которые требуются токены доступа из Azure Active Directory v2 конечной точки.

После завершения программы передач приложения смогут вызывать защищенный API, который использует личные учетные записи (в том числе outlook.com, live.com и другие). Приложение будет также использовать рабочие и школьные учетные записи из любого компании или организации, которая использует Azure Active Directory.  

> [!NOTE] 
> Руководство по требуется Visual Studio 2015 с обновлением 3 или Visual Studio 2017 г.  У вас нет одну из этих версий? [Для бесплатной загрузки Visual Studio 2017 г](https://www.visualstudio.com/downloads/).

## <a name="how-this-guide-works"></a>Принцип работы с руководством

![Принцип работы с руководством](./media/active-directory-develop-guidedsetup-windesktop-intro/windesktophowitworks.png)

Образец приложения, созданного с помощью этого руководства позволяет приложения рабочего стола Windows, которое запрашивает Microsoft Graph API или веб-API, принимающий токены из Azure Active Directory v2 конечной точки. Для этого сценария добавьте токен на HTTP-запросы через заголовок авторизации. Библиотека проверки подлинности Microsoft (MSAL) обрабатывает получение токена и обновления.

## <a name="handling-token-acquisition-for-accessing-protected-web-apis"></a>Обработка получения маркера для доступа к защищенным веб-интерфейсам API

После проверки подлинности пользователя приложение образец получает маркер, который может использоваться для запроса Microsoft Graph API или веб-API, защищенные Azure Active Directory v2.

API-интерфейсы, такие как Microsoft Graph требуется маркер, чтобы разрешить доступ к определенным ресурсам. Например маркер является обязательным на чтение профиля пользователя, доступ к календарю пользователя или отправить по электронной почте. Приложения могут запрашивать маркер доступа с помощью MSAL доступ к этим ресурсам, указав области API. Затем этот маркер доступа добавляется в заголовок авторизации HTTP для каждого вызова, который выполняется защищенному ресурсу. 

MSAL управляет кэширование и обновление, маркеры доступа, поэтому приложения не требуется.

## <a name="nuget-packages"></a>Пакеты NuGet

В этом руководстве используются следующие пакеты NuGet:

|Библиотека|ОПИСАНИЕ|
|---|---|
|[Microsoft.Identity.Client](https://www.nuget.org/packages/Microsoft.Identity.Client)|Библиотека проверки подлинности Майкрософт (MSAL)|

