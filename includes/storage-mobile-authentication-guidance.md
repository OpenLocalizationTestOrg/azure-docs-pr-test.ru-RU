## <a name="configure-your-application-to-access-azure-storage"></a>Настройка приложения для доступа к хранилищу Azure
Существует два способа проверки подлинности приложения при получении доступа к службам хранения:

* Общий ключ — следует использовать только для тестирования.
* Подписанный URL-адрес (SAS) — используется для рабочих приложений.

### <a name="shared-key"></a>Общий ключ
Проверка подлинности с помощью общего ключа означает, что приложение будет использовать имя и ключ учетной записи для доступа к службам хранилища. Чтобы быстро показать, как использовать эту библиотеку, в данном руководстве по началу работы мы используем аутентификацию с общим ключом.

> [!WARNING] 
> **Аутентификацию с общим ключом следует использовать только для тестирования!** Имя и ключ учетной записи, которые предоставляют полный доступ на чтение и запись к связанной учетной записи хранения, будут переданы каждому пользователю, который загружает ваше приложение. Такой подход **не** рекомендуется ввиду возможности компрометации ключа ненадежными клиентами.
> 
> 

При использовании аутентификации с общим ключом вам нужно создать [строку подключения](../articles/storage/common/storage-configure-connection-string.md). Строка подключения состоит из следующих элементов:  

* **DefaultEndpointsProtocol** — можно выбрать HTTP или HTTPS. Настоятельно рекомендуется использовать протокол HTTPS.
* **AccountName** — имя вашей учетной записи хранения.
* **AccountKey** — чтобы получить это значение, на [портале Azure](https://portal.azure.com) перейдите к своей учетной записи хранения и щелкните значок **Ключи**.
* (Необязательно) **EndpointSuffix** — это значение используется для служб хранилища в регионах с разными суффиксами конечных точек, например Azure China или Azure Governance.

Ниже приведен пример строки подключения, использующей аутентификацию с общим ключом.

`"DefaultEndpointsProtocol=https;AccountName=your_account_name_here;AccountKey=your_account_key_here"`

### <a name="shared-access-signatures-sas"></a>Подписанный URL-адрес (SAS)
В мобильном приложении аутентифицировать запрос клиента к службе хранилища Azure рекомендуется с помощью подписанного URL-адреса (SAS). SAS позволяет предоставлять клиенту доступ к ресурсу на указанный период времени и с указанным набором разрешений.
В качестве владельца учетной записи хранения вам понадобится создать SAS для использования мобильными клиентами. Для этого вам, скорее всего, нужно будет написать отдельную службу, которая создаст SAS и распространит ее между клиентами. Чтобы создать SAS в целях тестирования, можно использовать [Обозреватель службы хранилища Microsoft Azure](http://storageexplorer.com) или [портал Azure](https://portal.azure.com). При создании SAS можно указать не только интервал времени, в течение которого SAS будет действительным, но и разрешения, которые SAS предоставляет клиенту.

В приведенном ниже примере показано, как в целях тестирования использовать Microsoft Azure Storage Explorer, чтобы создать SAS.

1. Если это еще не сделано, [установите Microsoft Azure Storage Explorer](http://storageexplorer.com)
2. Подключитесь к своей подписке.
3. Щелкните в свою учетную запись хранилища и перейдите на вкладку "Действия" в нижнем левом углу. Щелкните "Get Shared Access Signature" (Получить подписанный URL-адрес), чтобы создать строку подключения для SAS.
4. Ниже приведен пример строки подключения SAS, которая предоставляет разрешения на чтение и запись на уровне службы, контейнера и объекта для службы BLOB-объектов учетной записи хранения.
   
   `"SharedAccessSignature=sv=2015-04-05&ss=b&srt=sco&sp=rw&se=2016-07-21T18%3A00%3A00Z&sig=3ABdLOJZosCp0o491T%2BqZGKIhafF1nlM3MzESDDD3Gg%3D;BlobEndpoint=https://youraccount.blob.core.windows.net"`

Как видите, при использовании SAS в приложении вам не нужно предоставлять ключ учетной записи. Дополнительные сведения и рекомендации по использованию SAS см. в статье [о подписанных URL-адресах и общих сведениях о модели SAS](../articles/storage/common/storage-dotnet-shared-access-signature-part-1.md).

