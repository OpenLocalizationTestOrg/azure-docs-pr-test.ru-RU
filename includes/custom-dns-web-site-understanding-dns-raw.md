Служба доменных имен (DNS) используется для поиска ресурсов в Интернете. Например, при вводе адреса веб-приложения в браузере или при щелчке ссылки на веб-странице DNS используется для перевода домена в IP-адрес. Этот IP-адрес является как бы почтовым адресом, однако он не очень понятен для человека. Так, гораздо легче запомнить DNS-имя, например **contoso.com** , чем запоминать IP-адрес, такой как 192.168.1.88 или 2001:0:4137:1f67:24a2:3888:9cce:fea3.

DNS основана на *записях*. Записи связывают конкретное *имя*, например **contoso.com**, либо с IP-адресом, либо с другим DNS-именем. Если приложение, такое как веб-браузер, выполняет поиск имени в DNS, оно находит соответствующую запись и использует указанные в ней элементы в качестве адреса. Если указываемое значение является IP-адресом, браузер будет использовать это значение. Если указывается другое DNS-имя, приложение должно выполнить разрешение еще раз. В конечном счете конечным элементом всех разрешений имен будет являться IP-адрес.

При создании веб-приложения в службе приложений DNS-имя автоматически назначается веб-приложению. Это имя имеет форму **&lt;имя_приложения&gt;.azurewebsites.net**. Есть также виртуальный IP-адрес для использования при создании DNS-записей. Таким образом, можно создать записи, указывающие либо на **.azurewebsites.net**, либо на IP-адрес.

> [!NOTE]
> IP-адрес веб-приложения изменится, если удалить и заново создать это веб-приложение или изменить режим плана службы приложений на **Бесплатный**, после того как он был установлен как **Базовый**, **Общий** или **Стандартный**.
> 
> 

Существует несколько типов записей, каждый из которых имеет собственные функции и ограничения, но применительно к веб-приложениям нас интересуют только два типа записей: *A* и *CNAME*.

### <a name="address-record-a-record"></a>Запись адреса (запись A)
Запись A сопоставляет домен, например **contoso.com** или **www.contoso.com**, или *домен с подстановочными знаками*, такой как **\*.contoso.com**, с IP-адресом. В случае веб-приложения в службе приложений это либо виртуальный IP-адрес службы, либо конкретный IP-адрес, который был приобретен для веб-приложения.

Имеются следующие основные преимущества записи A над записью CNAME:

* Можно сопоставить корневой домен, такой как **contoso.com** , IP-адресу; многие регистраторы разрешают это только с помощью записей A
* Можно иметь одну запись, использующую подстановочные знаки, например **\*.contoso.com**, которая будет обрабатывать запросы для нескольких поддоменов, таких как **mail.contoso.com**, **blogs.contoso.com** или **www.contoso.com**.

> [!NOTE]
> Поскольку запись А сопоставляется со статическим IP-адресом, она не может автоматически разрешаться в IP-адрес вашего веб-приложения. IP-адрес для использования с записями А предоставляется при настройке параметров имени личного домена для веб-приложения; однако это значение может измениться, если удалить и заново создать веб-приложение или изменить режим плана службы приложений снова на **Free**.
> 
> 

### <a name="alias-record-cname-record"></a>Запись псевдонима (запись CNAME)
Запись CNAME сопоставляет *конкретное* DNS-имя, такое как **mail.contoso.com** или **www.contoso.com**, с другим (каноническим) именем домена. В случае с веб-приложениями службы приложений каноническим именем домена является имя домена **&lt;имя_веб-приложения>.azurewebsites.net** вашего веб-приложения. После того как запись CNAME создана, она создает псевдоним для имени домена **&lt;имя_веб-приложения>.azurewebsites.net**. Запись CNAME будет автоматически разрешаться в IP-адрес имени вашего домена **&lt;имя_веб-приложения>.azurewebsites.net**, поэтому при изменении IP-адреса веб-приложения не нужно предпринимать никаких действий.

> [!NOTE]
> Только некоторые регистраторы доменов позволяют при использовании записи CNAME сопоставлять поддомены, такие как **www.contoso.com**, а не корневые имена, такие как **contoso.com**. Дополнительные сведения о записи CNAME см. в документации вашего регистратора, <a href="http://en.wikipedia.org/wiki/CNAME_record">статье в Википедии о записи CNAME</a> или в документе <a href="http://tools.ietf.org/html/rfc1035">Доменные имена IETF — реализация и спецификация</a>.
> 
> 

### <a name="web-app-dns-specifics"></a>Особенности DNS веб-приложений
Для использования записи A с веб-приложениями необходимо сначала создать одну из следующих записей типа TXT.

* **Для корневого домена** — запись DNS типа TXT **@** для **&lt;имя_веб-приложения&gt;.azurewebsites.net**.
* **Для конкретного поддомена** — DNS-имя **&lt;поддомен>** для **&lt;имя_веб-приложения&gt;.azurewebsites.net**. Например, **blogs**, если запись A предназначена для **blogs.contoso.com**.
* **Для поддоменов с подстановочными знаками** — запись DNS типа TXT ***** для **&lt;имя_веб-приложения&gt;.azurewebsites.net**.

Эта запись типа TXT используется для проверки того, что вы являетесь владельцем домена, который пытаетесь использовать. Она создается в дополнение к записи A, указывающей на виртуальный IP-адрес вашего веб-приложения.

Можно найти IP-адрес и имена **.azurewebsites.net** для своего веб-приложения, выполнив следующие действия.

1. В браузере откройте [портал Azure](https://portal.azure.com).
2. В колонке **Веб-приложения** щелкните имя веб-приложения и выберите **Личные домены** в нижней части страницы.
   
    ![](./media/custom-dns-web-site/dncmntask-cname-6.png)
3. В колонке **Личные домены** вы увидите виртуальный IP-адрес. Сохраните эти сведения, так как они будут использоваться при создании записей DNS.
   
    ![](./media/custom-dns-web-site/virtual-ip-address.png)
   
   > [!NOTE]
   > Вы не можете использовать имена личных доменов в веб-приложении уровня **Бесплатный**. Необходимо обновить план службы приложений до уровня **Общий**, **Базовый**, **Стандартный** или **Премиум**. Дополнительные сведения о ценовых категориях плана службы приложений, включая сведения о способах изменения ценовой категории веб-приложения, см. в статье [Увеличение масштаба приложения в Azure](../articles/app-service-web/web-sites-scale.md).
   > 
   > 

