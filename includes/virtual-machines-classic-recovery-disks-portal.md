<span data-ttu-id="a4794-101">Если виртуальной машины (VM) в Azure, возникает ошибка загрузки или диск, может потребоваться tooperform действия на виртуальном жестком диске hello сам по устранению неполадок.</span><span class="sxs-lookup"><span data-stu-id="a4794-101">If your virtual machine (VM) in Azure encounters a boot or disk error, you may need tooperform troubleshooting steps on hello virtual hard disk itself.</span></span> <span data-ttu-id="a4794-102">Распространенным примером будет обновление отказавшего приложения, которое запрещает загрузку успешно hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a4794-102">A common example would be a failed application update that prevents hello VM from booting successfully.</span></span> <span data-ttu-id="a4794-103">В этой статье описывается как toouse Azure портала tooconnect toofix вашего виртуального жесткого диска для виртуальной Машины tooanother все ошибки и заново создайте исходной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a4794-103">This article describes how toouse Azure portal tooconnect your virtual hard disk tooanother VM toofix any errors and then re-create your original VM.</span></span>

## <a name="recovery-process-overview"></a><span data-ttu-id="a4794-104">Обзор процесса восстановления</span><span class="sxs-lookup"><span data-stu-id="a4794-104">Recovery process overview</span></span>
<span data-ttu-id="a4794-105">Поиск и устранение неполадок Hello выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="a4794-105">hello troubleshooting process is as follows:</span></span>

1. <span data-ttu-id="a4794-106">Удалить hello виртуальной Машины, возникнут проблемы, но сохранить hello виртуальных жестких дисков.</span><span class="sxs-lookup"><span data-stu-id="a4794-106">Delete hello VM that's encountering issues, but retain hello virtual hard disks.</span></span>
2. <span data-ttu-id="a4794-107">Присоедините и подключите tooanother hello виртуальный жесткий диск виртуальной Машины для устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="a4794-107">Attach and mount hello virtual hard disk tooanother VM for troubleshooting.</span></span>
3. <span data-ttu-id="a4794-108">Подключите toohello Устранение неполадок виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a4794-108">Connect toohello troubleshooting VM.</span></span> <span data-ttu-id="a4794-109">Изменение файлов или запустить средства toofix ошибки на hello исходный виртуальный жесткий диск.</span><span class="sxs-lookup"><span data-stu-id="a4794-109">Edit files or run tools toofix errors on hello original virtual hard disk.</span></span>
4. <span data-ttu-id="a4794-110">Отключите образ и отсоединить виртуальный жесткий диск hello из hello, устранение неполадок виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a4794-110">Unmount and detach hello virtual hard disk from hello troubleshooting VM.</span></span>
5. <span data-ttu-id="a4794-111">Создайте виртуальную Машину с помощью hello исходный виртуальный жесткий диск.</span><span class="sxs-lookup"><span data-stu-id="a4794-111">Create a VM by using hello original virtual hard disk.</span></span>

## <a name="delete-hello-original-vm"></a><span data-ttu-id="a4794-112">Удалить hello исходной виртуальной Машины</span><span class="sxs-lookup"><span data-stu-id="a4794-112">Delete hello original VM</span></span>
<span data-ttu-id="a4794-113">Виртуальные жесткие диски и виртуальные машины — это разные ресурсы в Azure.</span><span class="sxs-lookup"><span data-stu-id="a4794-113">Virtual hard disks and VMs are two distinct resources in Azure.</span></span> <span data-ttu-id="a4794-114">Виртуальный жесткий диск является местом hello операционной системы, приложения и конфигурации.</span><span class="sxs-lookup"><span data-stu-id="a4794-114">A virtual hard disk is where hello operating system, applications, and configurations are stored.</span></span> <span data-ttu-id="a4794-115">Hello виртуальной Машины — точно так же метаданные, определяющий hello размер или расположение и который ссылается на ресурсы, такие как виртуальный жесткий диск или виртуальный сетевой адаптер (NIC).</span><span class="sxs-lookup"><span data-stu-id="a4794-115">hello VM is just metadata that defines hello size or location and that references resources such as a virtual hard disk or virtual network interface card (NIC).</span></span> <span data-ttu-id="a4794-116">Каждый виртуальный жесткий диск получает аренду назначен при нем tooa подключенных виртуальных Машин.</span><span class="sxs-lookup"><span data-stu-id="a4794-116">Each virtual hard disk gets a lease assigned when that disk is attached tooa VM.</span></span> <span data-ttu-id="a4794-117">Несмотря на то, что диски с данными может быть присоединенные и отсоединенные даже в том случае, когда выполняется hello виртуальной Машины, диска ОС hello отключить невозможно, пока удаляется hello ресурса виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a4794-117">Although data disks can be attached and detached even while hello VM is running, hello OS disk cannot be detached unless hello VM resource is deleted.</span></span> <span data-ttu-id="a4794-118">Аренда Hello продолжается tooa диск tooassociate hello ОС виртуальной Машины даже в том случае, если этой виртуальной Машины находится в состоянии остановки и освобождается.</span><span class="sxs-lookup"><span data-stu-id="a4794-118">hello lease continues tooassociate hello OS disk tooa VM even when that VM is in a stopped and deallocated state.</span></span>

<span data-ttu-id="a4794-119">Здравствуйте, первый шаг toorecovering ВМ — toodelete hello ВМ сам ресурс.</span><span class="sxs-lookup"><span data-stu-id="a4794-119">hello first step toorecovering your VM is toodelete hello VM resource itself.</span></span> <span data-ttu-id="a4794-120">Удаление hello ВМ оставляет hello виртуальных жестких дисков в вашей учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="a4794-120">Deleting hello VM leaves hello virtual hard disks in your storage account.</span></span> <span data-ttu-id="a4794-121">После hello удаления виртуальной Машины можно присоединить ВМ tooanother tootroubleshoot для hello виртуального жесткого диска и устраните ошибки hello.</span><span class="sxs-lookup"><span data-stu-id="a4794-121">After hello VM is deleted, you can attach hello virtual hard disk tooanother VM tootroubleshoot and resolve hello errors.</span></span> 

1. <span data-ttu-id="a4794-122">Войдите в toohello [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a4794-122">Sign in toohello [Azure portal](https://portal.azure.com).</span></span> 
2. <span data-ttu-id="a4794-123">Hello в левой части hello меню **виртуальные машины (классические)**.</span><span class="sxs-lookup"><span data-stu-id="a4794-123">On hello menu on hello left side, click **Virtual Machines (classic)**.</span></span>
3. <span data-ttu-id="a4794-124">Выберите hello ВМ, имеющей hello проблему, щелкните **дисков**, а затем определите имя hello hello виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="a4794-124">Select hello VM that has hello problem, click **Disks**, and then identify hello name of hello virtual hard disk.</span></span> 
4. <span data-ttu-id="a4794-125">Выберите виртуальный жесткий диск ОС hello и проверьте hello **расположение** учетной записи хранилища tooidentify hello, содержащий этот виртуальный жесткий диск.</span><span class="sxs-lookup"><span data-stu-id="a4794-125">Select hello OS virtual hard disk and check hello **Location** tooidentify hello storage account that contains that virtual hard disk.</span></span> <span data-ttu-id="a4794-126">В следующем примере hello, hello строку непосредственно перед «. blob.core.windows.net» — имя учетной записи хранения hello.</span><span class="sxs-lookup"><span data-stu-id="a4794-126">In hello following example, hello string immediately before ".blob.core.windows.net" is hello storage account name.</span></span>

    ```
    https://portalvhds73fmhrw5xkp43.blob.core.windows.net/vhds/SCCM2012-2015-08-28.vhd
    ```

    ![изображение Hello о расположении Виртуальной машины](./media/virtual-machines-classic-recovery-disks-portal/vm-location.png)

5. <span data-ttu-id="a4794-128">Щелкните правой кнопкой мыши hello виртуальной Машины, а затем выберите **удалить**.</span><span class="sxs-lookup"><span data-stu-id="a4794-128">Right-click hello VM and then select **Delete**.</span></span> <span data-ttu-id="a4794-129">Убедитесь, что не выбран hello дисков при удалении hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a4794-129">Make sure that hello disks are not selected when you delete hello VM.</span></span>
6. <span data-ttu-id="a4794-130">Создайте новую виртуальную машину восстановления.</span><span class="sxs-lookup"><span data-stu-id="a4794-130">Create a new recovery VM.</span></span> <span data-ttu-id="a4794-131">Этой виртуальной Машины должны находиться в hello же регионе и группе ресурсов (облачная служба) как проблема hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a4794-131">This VM must be in hello same region and resource group (Cloud Service) as hello problem VM.</span></span>
7. <span data-ttu-id="a4794-132">Выберите виртуальную Машину восстановления hello, а затем выберите **дисков** > **присоединения существующего**.</span><span class="sxs-lookup"><span data-stu-id="a4794-132">Select hello recovery VM, and then select **Disks** > **Attach Existing**.</span></span>
8. <span data-ttu-id="a4794-133">tooselect существующего виртуального жесткого диска, нажмите кнопку **VHD-файл**:</span><span class="sxs-lookup"><span data-stu-id="a4794-133">tooselect your existing virtual hard disk, click **VHD File**:</span></span>

    ![Поиск существующего виртуального жесткого диска](./media/virtual-machines-classic-recovery-disks-portal/select-vhd-location.png)

9. <span data-ttu-id="a4794-135">Выберите учетную запись хранения hello > контейнера VHD > Здравствуйте, виртуальный жесткий диск, нажмите кнопку hello **выберите** кнопку tooconfirm вашему выбору.</span><span class="sxs-lookup"><span data-stu-id="a4794-135">Select hello storage account > VHD container > hello virtual hard disk, click hello **Select** button tooconfirm your choice.</span></span>

    ![Выбор существующего виртуального жесткого диска](./media/virtual-machines-classic-recovery-disks-portal/select-vhd.png)

10. <span data-ttu-id="a4794-137">С вашей выделены VHD, выберите **ОК** tooattach hello существующий виртуальный жесткий диск.</span><span class="sxs-lookup"><span data-stu-id="a4794-137">With your VHD now selected, select **OK** tooattach hello existing virtual hard disk.</span></span>
11. <span data-ttu-id="a4794-138">Через несколько секунд hello **дисков** области для вашей виртуальной Машины будут отображены подключен как диск данных существующего виртуального жесткого диска:</span><span class="sxs-lookup"><span data-stu-id="a4794-138">After a few seconds, hello **Disks** pane for your VM will display your existing virtual hard disk connected as a data disk:</span></span>

    ![Существующий виртуальный жесткий диск присоединен как диск данных](./media/virtual-machines-classic-recovery-disks-portal/attached-disk.png)

## <a name="fix-issues-on-hello-original-virtual-hard-disk"></a><span data-ttu-id="a4794-140">Устраните проблемы на hello исходный виртуальный жесткий диск</span><span class="sxs-lookup"><span data-stu-id="a4794-140">Fix issues on hello original virtual hard disk</span></span>
<span data-ttu-id="a4794-141">При монтировании hello существующий виртуальный жесткий диск теперь можно выполнять обслуживание и действия по устранению неполадок при необходимости.</span><span class="sxs-lookup"><span data-stu-id="a4794-141">When hello existing virtual hard disk is mounted, you can now perform any maintenance and troubleshooting steps as needed.</span></span> <span data-ttu-id="a4794-142">После разрешения проблемы hello продолжите hello следующие шаги.</span><span class="sxs-lookup"><span data-stu-id="a4794-142">Once you have addressed hello issues, continue with hello following steps.</span></span>

## <a name="unmount-and-detach-hello-original-virtual-hard-disk"></a><span data-ttu-id="a4794-143">Отключите образ и отсоединение hello исходный виртуальный жесткий диск</span><span class="sxs-lookup"><span data-stu-id="a4794-143">Unmount and detach hello original virtual hard disk</span></span>
<span data-ttu-id="a4794-144">Как только будут устранены все ошибки, отключите и отсоединение hello существующий виртуальный жесткий диск из виртуальной Машины по устранению неполадок.</span><span class="sxs-lookup"><span data-stu-id="a4794-144">Once any errors are resolved, unmount and detach hello existing virtual hard disk from your troubleshooting VM.</span></span> <span data-ttu-id="a4794-145">Нельзя использовать расположение виртуального жесткого диска, а также других виртуальных Машин до освобождения аренды hello, присоединяет toohello hello виртуального жесткого диска, устранение неполадок виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a4794-145">You cannot use your virtual hard disk together with any other VM until hello lease that attaches hello virtual hard disk toohello troubleshooting VM is released.</span></span>  

1. <span data-ttu-id="a4794-146">Войдите в toohello [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a4794-146">Sign in toohello [Azure portal](https://portal.azure.com).</span></span> 
2. <span data-ttu-id="a4794-147">Выберите меню в левой части hello hello **виртуальные машины (классические)**.</span><span class="sxs-lookup"><span data-stu-id="a4794-147">On hello menu on hello left side, select **Virtual Machines (classic)**.</span></span>
3. <span data-ttu-id="a4794-148">Найдите hello виртуальную Машину восстановления.</span><span class="sxs-lookup"><span data-stu-id="a4794-148">Locate hello recovery VM.</span></span> <span data-ttu-id="a4794-149">Выберите диски, щелкните правой кнопкой мыши диск hello, а затем выберите **отсоединения**.</span><span class="sxs-lookup"><span data-stu-id="a4794-149">Select Disks, right-click hello disk, and then select **Detach**.</span></span>

## <a name="create-a-vm-from-hello-original-hard-disk"></a><span data-ttu-id="a4794-150">Создайте виртуальную Машину из hello исходный жесткий диск</span><span class="sxs-lookup"><span data-stu-id="a4794-150">Create a VM from hello original hard disk</span></span>

<span data-ttu-id="a4794-151">использовать ВМ с исходного виртуального жесткого диска, toocreate [классический портал Azure](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="a4794-151">toocreate a VM from your original virtual hard disk, use [Azure classic portal](https://manage.windowsazure.com).</span></span>

1. <span data-ttu-id="a4794-152">Войдите на [классический портал Azure](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="a4794-152">Sign into [Azure classic portal](https://manage.windowsazure.com).</span></span>
2. <span data-ttu-id="a4794-153">Внизу hello hello портала выберите **New** > **вычислений** > **виртуальной машины** > **из коллекции** .</span><span class="sxs-lookup"><span data-stu-id="a4794-153">At hello bottom of hello portal, select **New** > **Compute** > **Virtual Machine** > **From Gallery**.</span></span>
3. <span data-ttu-id="a4794-154">В hello **Выбор изображения** выберите **Мои диски**, а затем выберите hello исходный виртуальный жесткий диск.</span><span class="sxs-lookup"><span data-stu-id="a4794-154">In hello **Choose an Image** section, select **My disks**, and then select hello original virtual hard disk.</span></span> <span data-ttu-id="a4794-155">Проверьте сведения о расположении hello.</span><span class="sxs-lookup"><span data-stu-id="a4794-155">Check hello location information.</span></span> <span data-ttu-id="a4794-156">Это hello регион, где должны быть развернуты hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a4794-156">This is hello region where hello VM must be deployed.</span></span> <span data-ttu-id="a4794-157">Нажмите кнопку Далее hello.</span><span class="sxs-lookup"><span data-stu-id="a4794-157">Select hello next button.</span></span>
4. <span data-ttu-id="a4794-158">В hello **конфигурации виртуальной машины** статьи, введите имя виртуальной Машины hello и выберите размер виртуальной Машины hello.</span><span class="sxs-lookup"><span data-stu-id="a4794-158">In hello **Virtual machine configuration** section, type hello VM name and select a size for hello VM.</span></span>
