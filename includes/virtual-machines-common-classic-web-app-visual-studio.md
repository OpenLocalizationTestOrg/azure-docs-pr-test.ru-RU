

<span data-ttu-id="c06b0-101">При создании проекта веб-приложения для Azure можно подготовить виртуальную машину в Azure.</span><span class="sxs-lookup"><span data-stu-id="c06b0-101">When you create a web application project for Azure, you can provision a virtual machine in Azure.</span></span> <span data-ttu-id="c06b0-102">Затем можно настроить эту виртуальную машину, добавив дополнительное программное обеспечение, или использовать ее для диагностики или отладки.</span><span class="sxs-lookup"><span data-stu-id="c06b0-102">You can then configure the virtual machine with additional software, or use the virtual machine for diagnostic or debugging purposes.</span></span>

<span data-ttu-id="c06b0-103">Чтобы создать виртуальную машину при создании веб-приложения, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="c06b0-103">To create a virtual machine when you create a web application, follow these steps:</span></span>

1. <span data-ttu-id="c06b0-104">В Visual Studio последовательно выберите **Файл** > **Создать** > **Проект** > **Интернет** и **Веб-приложение ASP.NET** (в узле **Visual C#** или **Visual Basic**).</span><span class="sxs-lookup"><span data-stu-id="c06b0-104">In Visual Studio, click **File** > **New** > **Project** > **Web**, and then choose **ASP.NET Web Application** (under the **Visual C#** or **Visual Basic** nodes).</span></span>
2. <span data-ttu-id="c06b0-105">В диалоговом окне **Новый проект ASP.NET** выберите нужный тип веб-приложения и в разделе Azure диалогового окна (в нижнем правом углу) установите флажок **Host in the cloud** (Разместить в облаке). В некоторых установках этот флажок имеет метку **Create remote resources** (Создать удаленные ресурсы).</span><span class="sxs-lookup"><span data-stu-id="c06b0-105">In the **New ASP.NET Project** dialog box, select the type of web application you want, and in the Azure section of the dialog box (in the lower-right corner), make sure that the **Host in the cloud** check box is selected (this check box is labeled **Create remote resources** in some installations).</span></span>
   
    ![][0]
3. <span data-ttu-id="c06b0-106">В данном случае в разделе Microsoft Azure в раскрывающемся списке выберите **Виртуальная машина (v1)**, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="c06b0-106">For this example, in the drop-down list under Microsoft Azure, choose **Virtual Machine (v1)**, and then click the **OK** button.</span></span>
4. <span data-ttu-id="c06b0-107">Войдите в Azure, если появится соответствующий запрос.</span><span class="sxs-lookup"><span data-stu-id="c06b0-107">Sign in to Azure if you're prompted.</span></span> <span data-ttu-id="c06b0-108">Откроется диалоговое окно **Создать виртуальную машину** .</span><span class="sxs-lookup"><span data-stu-id="c06b0-108">The **Create Virtual Machine** dialog box appears.</span></span>
   
    ![][2]
5. <span data-ttu-id="c06b0-109">В поле **DNS-имя** введите имя виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c06b0-109">In the **DNS name** box, enter a name for the virtual machine.</span></span> <span data-ttu-id="c06b0-110">Имя DNS должно быть уникальным в рамках Azure.</span><span class="sxs-lookup"><span data-stu-id="c06b0-110">The DNS name must be unique in Azure.</span></span> <span data-ttu-id="c06b0-111">Если указанное имя недоступно, появится красный восклицательный знак.</span><span class="sxs-lookup"><span data-stu-id="c06b0-111">If the name you entered isn't available, a red exclamation point appears.</span></span>
6. <span data-ttu-id="c06b0-112">В списке **Образ** выберите образ, из которого нужно создать виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="c06b0-112">In the **Image** list, choose the image you want to base the virtual machine on.</span></span> <span data-ttu-id="c06b0-113">Вы можете выбрать любой стандартный образ виртуальной машины Azure или свой собственный образ, который вы предварительно передали в Azure.</span><span class="sxs-lookup"><span data-stu-id="c06b0-113">You can choose any of the standard Azure virtual machine images or your image that you've uploaded to Azure.</span></span>
7. <span data-ttu-id="c06b0-114">Если не планируется установка другого веб-сервера, не снимайте флажок **Enable IIS and Web Deploy** (Включить IIS и веб-развертывание).</span><span class="sxs-lookup"><span data-stu-id="c06b0-114">Leave the **Enable IIS and Web Deploy** check box selected unless you plan to install a different web server.</span></span> <span data-ttu-id="c06b0-115">Если отключить веб-развертывание, то нельзя будет выполнять публикацию из Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="c06b0-115">You won't be able to publish from Visual Studio if you disable Web Deploy.</span></span> <span data-ttu-id="c06b0-116">Можно добавить IIS и веб-развертывание в любой упакованный образ Windows Server, включая собственные образы.</span><span class="sxs-lookup"><span data-stu-id="c06b0-116">You can add IIS and Web Deploy to any of the packaged Windows Server images, including your own custom images.</span></span>
8. <span data-ttu-id="c06b0-117">В поле **Размер** выберите размер виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c06b0-117">In the **Size** list, choose the size of the virtual machine.</span></span>
9. <span data-ttu-id="c06b0-118">Укажите учетные данные для входа на эту виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="c06b0-118">Specify the sign-in credentials for this virtual machine.</span></span> <span data-ttu-id="c06b0-119">Запишите их, поскольку они потребуются для доступа к этой машине через удаленный рабочий стол.</span><span class="sxs-lookup"><span data-stu-id="c06b0-119">Make a note of them, because you'll need them to access the machine through Remote Desktop.</span></span>
10. <span data-ttu-id="c06b0-120">В списке **Расположение** выберите регион, в котором будет размещена виртуальная машина.</span><span class="sxs-lookup"><span data-stu-id="c06b0-120">In the **Location** list, choose the region to host the virtual machine.</span></span>
11. <span data-ttu-id="c06b0-121">Нажмите кнопку **ОК**, после чего начнется создание виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c06b0-121">Click  the **OK** button to start creating the virtual machine.</span></span> <span data-ttu-id="c06b0-122">Ход выполнения операции можно отслеживать в окне **Вывод** .</span><span class="sxs-lookup"><span data-stu-id="c06b0-122">You can follow the progress of the operation in the **Output** window.</span></span>
    
    ![][3]
12. <span data-ttu-id="c06b0-123">Когда виртуальная машина подготавливается, создаются опубликованные скрипты в узле **PublishScripts** решения.</span><span class="sxs-lookup"><span data-stu-id="c06b0-123">When the virtual machine is provisioned, published scripts are created in a **PublishScripts** node in your solution.</span></span> <span data-ttu-id="c06b0-124">Опубликованный скрипт выполняется и подготавливает виртуальную машину в Azure.</span><span class="sxs-lookup"><span data-stu-id="c06b0-124">The published script runs and provisions a virtual machine in Azure.</span></span> <span data-ttu-id="c06b0-125">В окне **вывода** показывается состояние.</span><span class="sxs-lookup"><span data-stu-id="c06b0-125">The **Output** window shows the status.</span></span> <span data-ttu-id="c06b0-126">Для установки виртуальной машины скрипт выполняет следующие действия.</span><span class="sxs-lookup"><span data-stu-id="c06b0-126">The script performs the following actions to set up the virtual machine:</span></span>
    
    * <span data-ttu-id="c06b0-127">Создает виртуальную машину, если она не существует.</span><span class="sxs-lookup"><span data-stu-id="c06b0-127">Creates the virtual machine if it doesn't already exist.</span></span>
    * <span data-ttu-id="c06b0-128">Создает учетную запись хранения с именем, начинающимся на `devtest`, но только если такая учетная запись хранения еще не существует в указанном регионе.</span><span class="sxs-lookup"><span data-stu-id="c06b0-128">Creates a storage account with a name that begins with `devtest`, but only if there isn't already such a storage account in the specified region.</span></span>
    * <span data-ttu-id="c06b0-129">Создает облачную службу в качестве контейнера для виртуальной машины, а также создает веб-роль для веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="c06b0-129">Creates a cloud service as a container for the virtual machine, and creates a web role for the web application.</span></span>
    * <span data-ttu-id="c06b0-130">Настраивает на виртуальной машине веб-развертывание.</span><span class="sxs-lookup"><span data-stu-id="c06b0-130">Configures Web Deploy on the virtual machine.</span></span>
    * <span data-ttu-id="c06b0-131">Настраивает на виртуальной машине IIS и ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c06b0-131">Configures IIS and ASP.NET on the virtual machine.</span></span>
    
    ![][4]
13. <span data-ttu-id="c06b0-132">При необходимости можно подключиться к новой виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="c06b0-132">(Optional) You can connect to the new virtual machine.</span></span> <span data-ttu-id="c06b0-133">В **обозревателе сервера** разверните узел **Виртуальные машины**, выберите узел для созданной виртуальной машины, а затем в его контекстном меню выберите пункт **Connect with Remote Desktop** (Подключиться к удаленному рабочему столу).</span><span class="sxs-lookup"><span data-stu-id="c06b0-133">In **Server Explorer**, expand the **Virtual Machines** node, choose the node for the virtual machine you created, and on its shortcut menu, choose **Connect with Remote Desktop**.</span></span> <span data-ttu-id="c06b0-134">Кроем того, можно открыть **обозреватель облака**, выбрать в контекстном меню параметр **Открыть на портале** и подключиться к виртуальной машине через него.</span><span class="sxs-lookup"><span data-stu-id="c06b0-134">Alternatively, in **Cloud Explorer** you can choose **Open in Portal** on the shortcut menu and connect to the virtual machine there.</span></span>
    
    ![][5]

## <a name="next-steps"></a><span data-ttu-id="c06b0-135">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="c06b0-135">Next steps</span></span>
<span data-ttu-id="c06b0-136">Подробные сведения о том, как настроить созданные опубликованные скрипты, см. в статье [Использование скриптов Windows PowerShell для публикации в средах разработки и тестирования](http://msdn.microsoft.com/library/dn642480.aspx).</span><span class="sxs-lookup"><span data-stu-id="c06b0-136">If you want to customize the published scripts you created, read more in-depth information at [Using Windows PowerShell Scripts to Publish to Dev and Test Environments](http://msdn.microsoft.com/library/dn642480.aspx).</span></span>

[0]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_NewProject.PNG
[1]: ./media/dotnet-visual-studio-create-virtual-machine/CreateVM_SignIn.PNG
[2]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_CreateVM.PNG
[3]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_Provisioning.png
[4]: ./media/virtual-machines-common-classic-web-app-visual-studio/CreateVM_SolutionExplorer.png
[5]: ./media/virtual-machines-common-classic-web-app-visual-studio/VS_Create_VM_Connect.png
