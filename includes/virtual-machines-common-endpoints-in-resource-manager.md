<span data-ttu-id="51d4a-101">конечные точки tooAzure подход Hello немного по-разному работает модели развертывания hello классический и диспетчер ресурсов.</span><span class="sxs-lookup"><span data-stu-id="51d4a-101">hello approach tooAzure endpoints works a little differently between hello Classic and Resource Manager deployment models.</span></span> <span data-ttu-id="51d4a-102">В модели развертывания диспетчера ресурсов hello теперь у вас есть сети hello гибкость toocreate фильтры, управляющие hello поток трафика и из него виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="51d4a-102">In hello Resource Manager deployment model, you now have hello flexibility toocreate network filters that control hello flow of traffic in and out of your VMs.</span></span> <span data-ttu-id="51d4a-103">Эти фильтры позволяют toocreate сложных сетевых сред помимо простого конечную точку как hello классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="51d4a-103">These filters allow you toocreate complex networking environments beyond a simple endpoint as in hello Classic deployment model.</span></span> <span data-ttu-id="51d4a-104">Эта статья содержит общие сведения о группах безопасности сети, об их отличии от конечных точек в классической модели и о создании правил фильтрации, а также примеры сценариев развертывания.</span><span class="sxs-lookup"><span data-stu-id="51d4a-104">This article provides an overview of Network Security Groups and how they differ from using Classic endpoints, creating these filtering rules, and sample deployment scenarios.</span></span>

## <a name="overview-of-resource-manager-deployments"></a><span data-ttu-id="51d4a-105">Обзор развертываний в рамках модели Resource Manager</span><span class="sxs-lookup"><span data-stu-id="51d4a-105">Overview of Resource Manager deployments</span></span>
<span data-ttu-id="51d4a-106">Конечные точки в hello классической модели развертывания заменяются сетевых групп безопасности и список управления Доступом правил управления доступом.</span><span class="sxs-lookup"><span data-stu-id="51d4a-106">Endpoints in hello Classic deployment model are replaced by Network Security Groups and access control list (ACL) rules.</span></span> <span data-ttu-id="51d4a-107">Ниже перечислены быстрые действия для реализации правил ACL группы безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="51d4a-107">Quick steps for implementing Network Security Group ACL rules are:</span></span>

* <span data-ttu-id="51d4a-108">Создайте группу безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="51d4a-108">Create a Network Security Group.</span></span>
* <span data-ttu-id="51d4a-109">tooallow или запрещать трафик, определение правил ACL группы безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="51d4a-109">tooallow or deny traffic, define your Network Security Group ACL rules.</span></span>
* <span data-ttu-id="51d4a-110">Назначьте вашего сетевого интерфейса tooa группы безопасности сети или подсети виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="51d4a-110">Assign your Network Security Group tooa network interface or virtual network subnet.</span></span>

<span data-ttu-id="51d4a-111">Если Желательное tooalso выполнять перенаправление портов, нужно tooplace подсистемы балансировки нагрузки перед ВМ и использовать правила преобразования сетевых адресов.</span><span class="sxs-lookup"><span data-stu-id="51d4a-111">If you are wanting tooalso perform port-forwarding, you need tooplace a load balancer in front of your VM and use NAT rules.</span></span> <span data-ttu-id="51d4a-112">Ниже перечислены быстрые действия для реализации балансировщика нагрузки и правил NAT.</span><span class="sxs-lookup"><span data-stu-id="51d4a-112">Quick steps for implementing a load balancer and NAT rules would be as follows:</span></span>

* <span data-ttu-id="51d4a-113">Создание балансировщика нагрузки.</span><span class="sxs-lookup"><span data-stu-id="51d4a-113">Create a load balancer.</span></span>
* <span data-ttu-id="51d4a-114">Создание внутреннего пула и добавление toohello пул виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="51d4a-114">Create a backend pool and add your VMs toohello pool.</span></span>
* <span data-ttu-id="51d4a-115">Определите правила NAT для перенаправления портов необходимые hello.</span><span class="sxs-lookup"><span data-stu-id="51d4a-115">Define your NAT rules for hello required port forwarding.</span></span>
* <span data-ttu-id="51d4a-116">Назначьте правил NAT tooyour виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="51d4a-116">Assign your NAT rules tooyour VMs.</span></span>

## <a name="network-security-group-overview"></a><span data-ttu-id="51d4a-117">Обзор группы безопасности сети</span><span class="sxs-lookup"><span data-stu-id="51d4a-117">Network Security Group overview</span></span>
<span data-ttu-id="51d4a-118">Сетевые группы безопасности обеспечивают уровень безопасности за вас определенные порты tooallow и tooaccess подсетей виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="51d4a-118">Network Security Groups provide a layer of security for you tooallow specific ports and subnets tooaccess your VMs.</span></span> <span data-ttu-id="51d4a-119">Обычно всегда имеется группа безопасности сети, обеспечивая этот уровень безопасности между виртуальными машинами и hello за пределами системы.</span><span class="sxs-lookup"><span data-stu-id="51d4a-119">You typically always have a Network Security Group providing this layer of security between your VMs and hello outside world.</span></span> <span data-ttu-id="51d4a-120">Сетевые группы безопасности может быть применен tooa подсети виртуальной сети или определенных сетевых интерфейсов для виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="51d4a-120">Network Security Groups can be applied tooa virtual network subnet or a specific network interface for a VM.</span></span> <span data-ttu-id="51d4a-121">Вместо правил ACL для конечной точки вы создаете правила ACL для группы безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="51d4a-121">Rather than creating endpoint ACL rules, you now create Network Security Group ACL rules.</span></span> <span data-ttu-id="51d4a-122">Эти правила ACL обеспечивают гораздо больший контроль, чем просто создание конечной точки tooforward данный порт.</span><span class="sxs-lookup"><span data-stu-id="51d4a-122">These ACL rules provide much greater control than simply creating an endpoint tooforward a given port.</span></span> <span data-ttu-id="51d4a-123">Дополнительные сведения см. в статье [Фильтрация сетевого трафика с помощью групп безопасности сети](../articles/virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="51d4a-123">For more information, see [What is a Network Security Group?](../articles/virtual-network/virtual-networks-nsg.md)</span></span>

> [!TIP]
> <span data-ttu-id="51d4a-124">Можно назначить подсети toomultiple Сетевые группы безопасности или сетевые интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="51d4a-124">You can assign Network Security Groups toomultiple subnets or network interfaces.</span></span> <span data-ttu-id="51d4a-125">Здесь не действует сопоставление 1:1.</span><span class="sxs-lookup"><span data-stu-id="51d4a-125">There is no 1:1 mapping.</span></span> <span data-ttu-id="51d4a-126">Можно создать группу безопасности сети с помощью общего набора правил ACL и применить toomultiple подсети или сетевых интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="51d4a-126">You can create a Network Security Group with a common set of ACL rules and apply toomultiple subnets or network interfaces.</span></span> <span data-ttu-id="51d4a-127">Кроме того, группы безопасности сети может быть применен tooresources по подписке (на основе [управления доступом на основе ролей](../articles/active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="51d4a-127">Further, Network Security Group can be applied tooresources across your subscription (based on [Role Based Access Controls](../articles/active-directory/role-based-access-control-what-is.md).</span></span>

## <a name="load-balancers-overview"></a><span data-ttu-id="51d4a-128">Общие сведения о балансировщиках нагрузки</span><span class="sxs-lookup"><span data-stu-id="51d4a-128">Load Balancers overview</span></span>
<span data-ttu-id="51d4a-129">Hello классической модели развертывания Azure будет выполнять все hello сетевых адресов (NAT) и перенаправление в облачной службе для вас портов.</span><span class="sxs-lookup"><span data-stu-id="51d4a-129">In hello Classic deployment model, Azure would perform all hello Network Address Translation (NAT) and port forwarding on a Cloud Service for you.</span></span> <span data-ttu-id="51d4a-130">При создании конечной точки, следует указать tooexpose внешний порт hello вместе с toodirect трафик hello внутренний порт.</span><span class="sxs-lookup"><span data-stu-id="51d4a-130">When creating an endpoint, you would specify hello external port tooexpose along with hello internal port toodirect traffic to.</span></span> <span data-ttu-id="51d4a-131">Группы безопасности сети не выполняют это преобразование сетевых адресов и перенаправление портов самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="51d4a-131">Network Security Groups by themselves do not perform this same NAT and port forwarding.</span></span> 

<span data-ttu-id="51d4a-132">tooallow toocreate правила NAT для такой порт перенаправления, создании балансировки нагрузки Azure в группе ресурсов.</span><span class="sxs-lookup"><span data-stu-id="51d4a-132">tooallow you toocreate NAT rules for such port forwarding, create an Azure load balancer in your resource group.</span></span> <span data-ttu-id="51d4a-133">Еще раз, подсистемы балансировки нагрузки hello детальные достаточно tooonly применить toospecific виртуальные машины, при необходимости.</span><span class="sxs-lookup"><span data-stu-id="51d4a-133">Again, hello load balancer is granular enough tooonly apply toospecific VMs if needed.</span></span> <span data-ttu-id="51d4a-134">Hello Azure загрузить рабочих правил NAT подсистемы балансировки наряду с tooprovide правила ACL группы безопасности сети гораздо большую гибкость и управления, чем было достижимы с использованием конечных точек облачной службы.</span><span class="sxs-lookup"><span data-stu-id="51d4a-134">hello Azure load balancer NAT rules work alongside Network Security Group ACL rules tooprovide much more flexibility and control than was achievable using Cloud Service endpoints.</span></span> <span data-ttu-id="51d4a-135">Дополнительные сведения см. в разделе hello [Обзор балансировки нагрузки](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="51d4a-135">For more information, see hello [load balancer overview](../articles/load-balancer/load-balancer-overview.md).</span></span>

## <a name="network-security-group-acl-rules"></a><span data-ttu-id="51d4a-136">Правила ACL сетевой группы безопасности</span><span class="sxs-lookup"><span data-stu-id="51d4a-136">Network Security Group ACL rules</span></span>
<span data-ttu-id="51d4a-137">Правила ACL позволяют пропускать входящий и исходящий трафик виртуальных машин для конкретных портов, диапазонов портов или протоколов.</span><span class="sxs-lookup"><span data-stu-id="51d4a-137">ACL rules let you define what traffic can flow in and out of your VM based on specific ports, port ranges, or protocols.</span></span> <span data-ttu-id="51d4a-138">Правила назначаются виртуальные машины tooindividual или tooa подсети.</span><span class="sxs-lookup"><span data-stu-id="51d4a-138">Rules are assigned tooindividual VMs or tooa subnet.</span></span> <span data-ttu-id="51d4a-139">Следующий снимок экрана приветствия приведен пример правил ACL для общих веб-сервер.</span><span class="sxs-lookup"><span data-stu-id="51d4a-139">hello following screenshot is an example of ACL rules for a common webserver:</span></span>

![Список правил ACL группы безопасности сети](./media/virtual-machines-common-endpoints-in-resource-manager/example-acl-rules.png)

<span data-ttu-id="51d4a-141">ACL правила применяются в зависимости от метрики приоритет, указываемое - высокое значение hello hello, более низкий приоритет hello hello.</span><span class="sxs-lookup"><span data-stu-id="51d4a-141">ACL rules are applied based on a priority metric that you specify - hello higher hello value, hello lower hello priority.</span></span> <span data-ttu-id="51d4a-142">Каждая группа безопасности сети имеет три значения по умолчанию правила, разработанные toohandle поток hello Azure сетевого трафика с явным `DenyAllInbound` в качестве окончательного правила hello.</span><span class="sxs-lookup"><span data-stu-id="51d4a-142">Every Network Security Group has three default rules that are designed toohandle hello flow of Azure networking traffic, with an explicit `DenyAllInbound` as hello final rule.</span></span> <span data-ttu-id="51d4a-143">Правила списка управления Доступом по умолчанию заданной toonot с низким приоритетом влияет на созданные правила.</span><span class="sxs-lookup"><span data-stu-id="51d4a-143">Default ACL rules are given a low priority toonot interfere with rules you create.</span></span>

## <a name="assigning-network-security-groups"></a><span data-ttu-id="51d4a-144">Назначение групп безопасности сети</span><span class="sxs-lookup"><span data-stu-id="51d4a-144">Assigning Network Security Groups</span></span>
<span data-ttu-id="51d4a-145">Можно назначить подсети tooa группы безопасности сети или сетевого интерфейса.</span><span class="sxs-lookup"><span data-stu-id="51d4a-145">You assign a Network Security Group tooa subnet or a network interface.</span></span> <span data-ttu-id="51d4a-146">Такой подход позволяет toobe уточнены при необходимости при применении к ACL правил tooonly определенную виртуальную Машину или Обеспечьте набору правил ACL, являются примененных tooall включается в подсеть виртуальных машин:</span><span class="sxs-lookup"><span data-stu-id="51d4a-146">This approach allows you toobe as granular as needed when applying your ACL rules tooonly a specific VM, or ensure a common set of ACL rules are applied tooall VMs part of a subnet:</span></span>

![Применить Nsg toonetwork интерфейсы или подсети](./media/virtual-machines-common-endpoints-in-resource-manager/apply-nsg-to-resources.png)

<span data-ttu-id="51d4a-148">поведение Hello hello сетевой группы безопасности не изменяется в зависимости от того, назначаемое tooa подсети или сетевого интерфейса.</span><span class="sxs-lookup"><span data-stu-id="51d4a-148">hello behavior of hello Network Security Group doesn't change depending on being assigned tooa subnet or a network interface.</span></span> <span data-ttu-id="51d4a-149">Типичный сценарий развертывания имеет hello группы безопасности сети назначен соответствия tooensure подсети tooa все подсети toothat подключенных виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="51d4a-149">A common deployment scenario has hello Network Security Group assigned tooa subnet tooensure compliance of all VMs attached toothat subnet.</span></span> <span data-ttu-id="51d4a-150">Дополнительные сведения см. в разделе [применения безопасности сети группирует tooresources](../articles/virtual-network/virtual-networks-nsg.md#associating-nsgs).</span><span class="sxs-lookup"><span data-stu-id="51d4a-150">For more information, see [applying Network Security groups tooresources](../articles/virtual-network/virtual-networks-nsg.md#associating-nsgs).</span></span>

## <a name="default-behavior-of-network-security-groups"></a><span data-ttu-id="51d4a-151">Стандартное поведение групп безопасности сети</span><span class="sxs-lookup"><span data-stu-id="51d4a-151">Default behavior of Network Security Groups</span></span>
<span data-ttu-id="51d4a-152">В зависимости от того, как и при создании вашей группе безопасности сети может создать правила по умолчанию для виртуальных машин Windows toopermit RDP-доступ через TCP-порт 3389.</span><span class="sxs-lookup"><span data-stu-id="51d4a-152">Depending on how and when you create your Network Security Group, default rules may be created for Windows VMs toopermit RDP access on TCP port 3389.</span></span> <span data-ttu-id="51d4a-153">Правила по умолчанию для виртуальных машин Linux разрешают доступ по протоколу SSH через TCP-порт 22.</span><span class="sxs-lookup"><span data-stu-id="51d4a-153">Default rules for Linux VMs permit SSH access on TCP port 22.</span></span> <span data-ttu-id="51d4a-154">Эти правила автоматического ACL, создаются в hello следующие условия:</span><span class="sxs-lookup"><span data-stu-id="51d4a-154">These automatic ACL rules are created under hello following conditions:</span></span>

* <span data-ttu-id="51d4a-155">При создании виртуальной Машины Windows через портал hello и принять toocreate действие по умолчанию hello сетевую группу безопасности, создается список управления Доступом правило tooallow TCP-порт 3389 (RDP).</span><span class="sxs-lookup"><span data-stu-id="51d4a-155">If you create a Windows VM through hello portal and accept hello default action toocreate a Network Security Group, an ACL rule tooallow TCP port 3389 (RDP) is created.</span></span>
* <span data-ttu-id="51d4a-156">При создании виртуальной Машины Linux через портал hello и принять toocreate действие по умолчанию hello сетевую группу безопасности, создается список управления Доступом правило tooallow TCP-порт 22 (SSH).</span><span class="sxs-lookup"><span data-stu-id="51d4a-156">If you create a Linux VM through hello portal and accept hello default action toocreate a Network Security Group, an ACL rule tooallow TCP port 22 (SSH) is created.</span></span>

<span data-ttu-id="51d4a-157">При других условиях эти стандартные правила ACL не создаются.</span><span class="sxs-lookup"><span data-stu-id="51d4a-157">Under all other conditions, these default ACL rules are not created.</span></span> <span data-ttu-id="51d4a-158">Не удается подключиться tooyour виртуальной Машины без создания hello соответствующие правила списка управления Доступом.</span><span class="sxs-lookup"><span data-stu-id="51d4a-158">You cannot connect tooyour VM without creating hello appropriate ACL rules.</span></span> <span data-ttu-id="51d4a-159">К таким условиям относятся следующие общие действия hello:</span><span class="sxs-lookup"><span data-stu-id="51d4a-159">These conditions include hello following common actions:</span></span>

* <span data-ttu-id="51d4a-160">Создание группы безопасности сети с помощью портала hello как отдельное действие toocreating hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="51d4a-160">Creating a Network Security Group through hello portal as a separate action toocreating hello VM.</span></span>
* <span data-ttu-id="51d4a-161">Создайте группу безопасности сети программным способом с помощью PowerShell, интерфейса командной строки Azure, интерфейсов REST API и т. д.</span><span class="sxs-lookup"><span data-stu-id="51d4a-161">Creating a Network Security Group programmatically through PowerShell, Azure CLI, Rest APIs, etc.</span></span>
* <span data-ttu-id="51d4a-162">Создание виртуальной Машины и присвоив его tooan существующие группы безопасности сети, не имеет hello определено соответствующее правило ACL.</span><span class="sxs-lookup"><span data-stu-id="51d4a-162">Creating a VM and assigning it tooan existing Network Security Group that does not already have hello appropriate ACL rule defined.</span></span>

<span data-ttu-id="51d4a-163">В предыдущих случаев все hello потребуется правил toocreate ACL для подключений удаленного управления, соответствующие hello tooallow виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="51d4a-163">In all hello preceding cases, you need toocreate ACL rules for your VM tooallow hello appropriate remote management connections.</span></span>

## <a name="default-behavior-of-a-vm-without-a-network-security-group"></a><span data-ttu-id="51d4a-164">Стандартное поведение виртуальной машины без группы безопасности сети</span><span class="sxs-lookup"><span data-stu-id="51d4a-164">Default behavior of a VM without a Network Security Group</span></span>
<span data-ttu-id="51d4a-165">Вы можете создать виртуальную машину, не создавая группу безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="51d4a-165">You can create a VM without creating a Network Security Group.</span></span> <span data-ttu-id="51d4a-166">В таких ситуациях вы можете подключиться tooyour виртуальной Машины с помощью протокола удаленного рабочего СТОЛА или SSH без создания правил ACL.</span><span class="sxs-lookup"><span data-stu-id="51d4a-166">In these situations, you can connect tooyour VM using RDP or SSH without creating any ACL rules.</span></span> <span data-ttu-id="51d4a-167">Точно так же, когда вы устанавливаете веб-службу на порт 80, эта служба автоматически становится доступна удаленно.</span><span class="sxs-lookup"><span data-stu-id="51d4a-167">Similarly, if you installed a web service on port 80, that service is automatically accessible remotely.</span></span> <span data-ttu-id="51d4a-168">Hello виртуальной Машины имеет открыть все порты.</span><span class="sxs-lookup"><span data-stu-id="51d4a-168">hello VM has all ports open.</span></span>

> [!NOTE]
> <span data-ttu-id="51d4a-169">Необходимо по-прежнему toohave открытый IP-адреса, назначенного tooa виртуальной Машины в порядке для любых удаленных соединений.</span><span class="sxs-lookup"><span data-stu-id="51d4a-169">You still need toohave a public IP address assigned tooa VM in order for any remote connections.</span></span> <span data-ttu-id="51d4a-170">Отсутствие группы безопасности сети для подсети или сетевого интерфейса hello не раскрывает hello ВМ tooany внешнего трафика.</span><span class="sxs-lookup"><span data-stu-id="51d4a-170">Not having a Network Security Group for hello subnet or network interface doesn't expose hello VM tooany external traffic.</span></span> <span data-ttu-id="51d4a-171">Действие по умолчанию Hello при создании виртуальной Машины через портал hello — toocreate новый общедоступный IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="51d4a-171">hello default action when creating a VM through hello portal is toocreate a new public IP.</span></span> <span data-ttu-id="51d4a-172">Если вы создаете виртуальную машину любым другим способом (например, с помощью PowerShell, интерфейса командной строки Azure или шаблона Resource Manager), общедоступный IP-адрес не будет создан автоматически, если вы не отправите явный запрос.</span><span class="sxs-lookup"><span data-stu-id="51d4a-172">For all other forms of creating a VM such as PowerShell, Azure CLI, or Resource Manager template, a public IP is not automatically created unless explicitly requested.</span></span> <span data-ttu-id="51d4a-173">Действие по умолчанию Hello через портал hello также является toocreate группы безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="51d4a-173">hello default action through hello portal is also toocreate a Network Security Group.</span></span> <span data-ttu-id="51d4a-174">Это действие выполняется, чтобы виртуальная машина не оставалась общедоступной без сетевой фильтрации.</span><span class="sxs-lookup"><span data-stu-id="51d4a-174">This default action means you shouldn't end up in a situation with an exposed VM that has no network filtering in place.</span></span>

## <a name="understanding-load-balancers-and-nat-rules"></a><span data-ttu-id="51d4a-175">Общее представление о балансировщиках нагрузки и правилах преобразования сетевых адресов</span><span class="sxs-lookup"><span data-stu-id="51d4a-175">Understanding Load Balancers and NAT rules</span></span>
<span data-ttu-id="51d4a-176">В hello классической модели развертывания можно создать конечные точки, также выполняется перенаправление портов.</span><span class="sxs-lookup"><span data-stu-id="51d4a-176">In hello Classic deployment model, you could create endpoints that also performed port forwarding.</span></span> <span data-ttu-id="51d4a-177">При создании виртуальной Машины в hello классической модели развертывания будет автоматически создается правила списков ACL для протокола удаленного рабочего СТОЛА или SSH.</span><span class="sxs-lookup"><span data-stu-id="51d4a-177">When you create a VM in hello Classic deployment model, ACL rules for RDP or SSH would be automatically created.</span></span> <span data-ttu-id="51d4a-178">Эти правила не приведет к TCP-порт 3389 или TCP-порт 22 соответственно toohello за пределами системы.</span><span class="sxs-lookup"><span data-stu-id="51d4a-178">These rules would not expose TCP port 3389 or TCP port 22 respectively toohello outside world.</span></span> <span data-ttu-id="51d4a-179">Вместо этого ценных TCP-порт будет предоставляться, сопоставляющий toohello соответствующий внутренний порт.</span><span class="sxs-lookup"><span data-stu-id="51d4a-179">Instead, a high-value TCP port would be exposed that maps toohello appropriate internal port.</span></span> <span data-ttu-id="51d4a-180">Можно также создать собственные правила ACL так же, как, например предоставлять доступ к веб-серверу TCP-порт 4280 toohello за пределами world.</span><span class="sxs-lookup"><span data-stu-id="51d4a-180">You could also create your own ACL rules in a similar manner, such as expose a webserver on TCP port 4280 toohello outside world.</span></span> <span data-ttu-id="51d4a-181">Можно просмотреть эти правила списка управления Доступом и сопоставления портов в следующий снимок экрана из классического портала hello hello:</span><span class="sxs-lookup"><span data-stu-id="51d4a-181">You can see these ACL rules and port mappings in hello following screenshot from hello Classic portal:</span></span>

![Перенаправление портов с использованием конечных точек в рамках классической модели](./media/virtual-machines-common-endpoints-in-resource-manager/classic-endpoints-port-forwarding.png)

<span data-ttu-id="51d4a-183">Если вы создали группы безопасности сети, эту функцию перенаправления портов выполняет балансировщик нагрузки.</span><span class="sxs-lookup"><span data-stu-id="51d4a-183">With Network Security Groups, that port-forwarding function is handled by a load balancer.</span></span> <span data-ttu-id="51d4a-184">Дополнительные сведения см. в статье о [балансировщиках нагрузки в Azure](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="51d4a-184">For more information, see [load balancers in Azure](../articles/load-balancer/load-balancer-overview.md).</span></span> <span data-ttu-id="51d4a-185">Hello ниже приведен пример балансировки нагрузки с NAT правило tooperform перенаправление портов TCP порт 4222 toohello внутренней TCP-порт 22 виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="51d4a-185">hello following example shows a load balancer with a NAT rule tooperform port-forwarding TCP port 4222 toohello internal TCP port 22 a VM:</span></span>

![Правила NAT балансировщика нагрузки для перенаправления портов](./media/virtual-machines-common-endpoints-in-resource-manager/load-balancer-nat-rules.png)

> [!NOTE]
> <span data-ttu-id="51d4a-187">При реализации балансировки нагрузки обычно не назначены hello самой ВМ общедоступный IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="51d4a-187">When you implement a load balancer, you typically don't assign hello VM itself a public IP address.</span></span> <span data-ttu-id="51d4a-188">Вместо этого Подсистема балансировки нагрузки hello имеет открытый tooit адрес, назначенный IP.</span><span class="sxs-lookup"><span data-stu-id="51d4a-188">Instead, hello load balancer has a public IP address assigned tooit.</span></span> <span data-ttu-id="51d4a-189">По-прежнему необходимо toocreate вашей группы безопасности сети и ACL правила toodefine hello поток трафика и из него ВМ.</span><span class="sxs-lookup"><span data-stu-id="51d4a-189">You still need toocreate your Network Security Group and ACL rules toodefine hello flow of traffic in and out of your VM.</span></span> <span data-ttu-id="51d4a-190">Hello правила NAT подсистемы балансировки нагрузки, просто toodefine, какие порты являются допустимыми подсистемы балансировки нагрузки hello и способ их получения распределения между серверной hello виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="51d4a-190">hello load balancer NAT rules are simply toodefine what ports are allowed through hello load balancer and how they get distributed across hello backend VMs.</span></span> <span data-ttu-id="51d4a-191">Таким образом необходимо toocreate правило NAT для tooflow трафика через hello балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="51d4a-191">As such, you need toocreate a NAT rule for traffic tooflow through hello load balancer.</span></span> <span data-ttu-id="51d4a-192">tooallow hello трафика tooreach hello виртуальной Машины, создайте правило ACL группы безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="51d4a-192">tooallow hello traffic tooreach hello VM, create a Network Security Group ACL rule.</span></span>
