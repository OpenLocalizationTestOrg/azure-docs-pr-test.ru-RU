### <a name="open-tcp-ports-in-hello-windows-firewall-for-hello-default-instance-of-hello-database-engine"></a><span data-ttu-id="708de-101">Откройте TCP-порты в брандмауэре Windows hello для экземпляра по умолчанию hello hello компонент Database Engine</span><span class="sxs-lookup"><span data-stu-id="708de-101">Open TCP ports in hello Windows firewall for hello default instance of hello Database Engine</span></span>
1. <span data-ttu-id="708de-102">Подключите toohello виртуальную машину с помощью удаленного рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="708de-102">Connect toohello virtual machine with Remote Desktop.</span></span> <span data-ttu-id="708de-103">Подробные инструкции по подключению toohello виртуальной Машины в разделе [открыть SQL виртуальной Машины с помощью удаленного рабочего стола](../articles/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-server-provision.md#open-the-vm-with-remote-desktop).</span><span class="sxs-lookup"><span data-stu-id="708de-103">For detailed instructions on connecting toohello VM, see [Open a SQL VM with Remote Desktop](../articles/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-server-provision.md#open-the-vm-with-remote-desktop).</span></span>
2. <span data-ttu-id="708de-104">После входа на начальный экран приветствия, введите **WF.msc**и нажмите клавишу ВВОД.</span><span class="sxs-lookup"><span data-stu-id="708de-104">Once logged in, at hello Start screen, type **WF.msc**, and then hit ENTER.</span></span>
   
    ![Запуск программы брандмауэра hello](./media/virtual-machines-sql-server-connection-steps/12Open-WF.png)
3. <span data-ttu-id="708de-106">В hello **брандмауэр Windows в режиме повышенной безопасности**в hello левой панели, щелкните правой кнопкой мыши **правила для входящих подключений**, а затем нажмите кнопку **новое правило** в области действий hello.</span><span class="sxs-lookup"><span data-stu-id="708de-106">In hello **Windows Firewall with Advanced Security**, in hello left pane, right-click **Inbound Rules**, and then click **New Rule** in hello action pane.</span></span>
   
    ![Создать правило](./media/virtual-machines-sql-server-connection-steps/13New-FW-Rule.png)
4. <span data-ttu-id="708de-108">В hello **правило мастера** диалогового **тип правила**выберите **порт**, а затем нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="708de-108">In hello **New Inbound Rule Wizard** dialog box, under **Rule Type**, select **Port**, and then click **Next**.</span></span>
5. <span data-ttu-id="708de-109">В hello **протокол и порты** диалоговое окно, по умолчанию hello **TCP**.</span><span class="sxs-lookup"><span data-stu-id="708de-109">In hello **Protocol and Ports** dialog, use hello default **TCP**.</span></span> <span data-ttu-id="708de-110">В hello **определенные локальные порты** поле, а затем тип hello номер_порта hello экземпляр компонента Database Engine hello (**1433** для экземпляра по умолчанию hello или выбор для hello частный порт конечной точки шаге hello).</span><span class="sxs-lookup"><span data-stu-id="708de-110">In hello **Specific local ports** box, then type hello port number of hello instance of hello Database Engine (**1433** for hello default instance or your choice for hello private port in hello endpoint step).</span></span>
   
    ![TCP-порт 1433](./media/virtual-machines-sql-server-connection-steps/14Port-1433.png)
6. <span data-ttu-id="708de-112">Щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="708de-112">Click **Next**.</span></span>
7. <span data-ttu-id="708de-113">В hello **действия** установите флажок **разрешить подключение hello**, а затем нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="708de-113">In hello **Action** dialog box, select **Allow hello connection**, and then click **Next**.</span></span>
   
    <span data-ttu-id="708de-114">**Примечание по безопасности:** при выборе **разрешить подключение hello безопасное** позволяет повысить уровень безопасности.</span><span class="sxs-lookup"><span data-stu-id="708de-114">**Security Note:** Selecting **Allow hello connection if it is secure** can provide additional security.</span></span> <span data-ttu-id="708de-115">Выберите этот параметр, если требуется tooconfigure другие параметры безопасности в вашей среде.</span><span class="sxs-lookup"><span data-stu-id="708de-115">Select this option if you want tooconfigure additional security options in your environment.</span></span>
   
    ![Разрешить подключения](./media/virtual-machines-sql-server-connection-steps/15Allow-Connection.png)
8. <span data-ttu-id="708de-117">В hello **профиль** выберите **открытый**, **закрытый**, и **домена**.</span><span class="sxs-lookup"><span data-stu-id="708de-117">In hello **Profile** dialog box, select **Public**, **Private**, and **Domain**.</span></span> <span data-ttu-id="708de-118">Нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="708de-118">Then click **Next**.</span></span>
   
    <span data-ttu-id="708de-119">**Примечание по безопасности:** при выборе **открытый** разрешает доступ через Интернет hello.</span><span class="sxs-lookup"><span data-stu-id="708de-119">**Security Note:**  Selecting **Public** allows access over hello internet.</span></span> <span data-ttu-id="708de-120">Во всех возможных случаях выбирайте более строгий профиль.</span><span class="sxs-lookup"><span data-stu-id="708de-120">Whenever possible, select a more restrictive profile.</span></span>
   
    ![Открытый профиль](./media/virtual-machines-sql-server-connection-steps/16Public-Private-Domain-Profile.png)
9. <span data-ttu-id="708de-122">В hello **имя** диалоговое окно, введите имя и описание для этого правила и нажмите кнопку **Готово**.</span><span class="sxs-lookup"><span data-stu-id="708de-122">In hello **Name** dialog box, type a name and description for this rule, and then click **Finish**.</span></span>
   
    ![Имя правила](./media/virtual-machines-sql-server-connection-steps/17Rule-Name.png)

<span data-ttu-id="708de-124">При необходимости откройте дополнительные порты для других компонентов.</span><span class="sxs-lookup"><span data-stu-id="708de-124">Open additional ports for other components as needed.</span></span> <span data-ttu-id="708de-125">Дополнительные сведения см. в разделе [Настройка брандмауэра Windows hello tooAllow доступа к SQL Server](http://msdn.microsoft.com/library/cc646023.aspx).</span><span class="sxs-lookup"><span data-stu-id="708de-125">For more information, see [Configuring hello Windows Firewall tooAllow SQL Server Access](http://msdn.microsoft.com/library/cc646023.aspx).</span></span>

### <a name="configure-sql-server-toolisten-on-hello-tcp-protocol"></a><span data-ttu-id="708de-126">Настройка SQL Server toolisten на hello протокола TCP</span><span class="sxs-lookup"><span data-stu-id="708de-126">Configure SQL Server toolisten on hello TCP protocol</span></span>

[!INCLUDE [Enable TCP](virtual-machines-sql-server-connection-tcp-protocol.md)]

### <a name="configure-sql-server-for-mixed-mode-authentication"></a><span data-ttu-id="708de-127">Настройка SQL Server на проверку подлинности в смешанном режиме</span><span class="sxs-lookup"><span data-stu-id="708de-127">Configure SQL Server for mixed mode authentication</span></span>
<span data-ttu-id="708de-128">без среды домена Hello SQL Server Database Engine не может использовать проверку подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="708de-128">hello SQL Server Database Engine cannot use Windows Authentication without domain environment.</span></span> <span data-ttu-id="708de-129">toohello tooconnect компонент Database Engine с другого компьютера настройте SQL Server для смешанного режима проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="708de-129">tooconnect toohello Database Engine from another computer, configure SQL Server for mixed mode authentication.</span></span> <span data-ttu-id="708de-130">Смешанный режим позволяет выполнять проверку подлинности SQL Server и проверку подлинности Windows.</span><span class="sxs-lookup"><span data-stu-id="708de-130">Mixed mode authentication allows both SQL Server Authentication and Windows Authentication.</span></span>

> [!NOTE]
> <span data-ttu-id="708de-131">Настройка аутентификации в смешанном режиме может быть необязательна, если вы настроили виртуальную сеть Azure с помощью настроенной доменной среды.</span><span class="sxs-lookup"><span data-stu-id="708de-131">Configuring mixed mode authentication might not be necessary if you have configured an Azure Virtual Network with a configured domain environment.</span></span>
> 
> 

1. <span data-ttu-id="708de-132">При подключенном toohello виртуальной машины на начальной странице hello, типа **SQL Server Management Studio** и щелкните значок выбранного hello.</span><span class="sxs-lookup"><span data-stu-id="708de-132">While connected toohello virtual machine, on hello Start page, type **SQL Server Management Studio** and click hello selected icon.</span></span>
   
    <span data-ttu-id="708de-133">Здравствуйте, первый раз при открытии среды Management Studio, его необходимо создать среду Management Studio hello пользователей.</span><span class="sxs-lookup"><span data-stu-id="708de-133">hello first time you open Management Studio it must create hello users Management Studio environment.</span></span> <span data-ttu-id="708de-134">Это может занять несколько минут.</span><span class="sxs-lookup"><span data-stu-id="708de-134">This may take a few moments.</span></span>
2. <span data-ttu-id="708de-135">Среда Management Studio предоставляет hello **подключения tooServer** диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="708de-135">Management Studio presents hello **Connect tooServer** dialog box.</span></span> <span data-ttu-id="708de-136">В hello **имя сервера** введите имя hello из виртуальной машины hello tooconnect toohello компонент Database Engine с hello обозревателя объектов (вместо hello имя виртуальной машины, можно также использовать **(local)** или один период как hello **имя сервера**).</span><span class="sxs-lookup"><span data-stu-id="708de-136">In hello **Server name** box, type hello name of hello virtual machine tooconnect toohello Database Engine  with hello Object Explorer (Instead of hello virtual machine name you can also use **(local)** or a single period as hello **Server name**).</span></span> <span data-ttu-id="708de-137">Выберите **проверки подлинности Windows**и оставить  ***your_VM_name*\your_local_administrator** в hello **имя пользователя** поле.</span><span class="sxs-lookup"><span data-stu-id="708de-137">Select **Windows Authentication**, and leave ***your_VM_name*\your_local_administrator** in hello **User name** box.</span></span> <span data-ttu-id="708de-138">Щелкните **Подключить**.</span><span class="sxs-lookup"><span data-stu-id="708de-138">Click **Connect**.</span></span>
   
    ![Подключение tooServer](./media/virtual-machines-sql-server-connection-steps/19Connect-to-Server.png)
3. <span data-ttu-id="708de-140">В SQL Server Management Studio обозревателе объектов щелкните правой кнопкой мыши имя hello hello экземпляра SQL Server (имя виртуальной машины hello) и нажмите кнопку **свойства**.</span><span class="sxs-lookup"><span data-stu-id="708de-140">In SQL Server Management Studio Object Explorer, right-click hello name of hello instance of SQL Server (hello virtual machine name), and then click **Properties**.</span></span>
   
    ![Свойства сервера](./media/virtual-machines-sql-server-connection-steps/20Server-Properties.png)
4. <span data-ttu-id="708de-142">На hello **безопасности** в разделе **проверки подлинности сервера**выберите **режим SQL Server и проверка подлинности Windows**, а затем нажмите кнопку **ОК** .</span><span class="sxs-lookup"><span data-stu-id="708de-142">On hello **Security** page, under **Server authentication**, select **SQL Server and Windows Authentication mode**, and then click **OK**.</span></span>
   
    ![Выберите режим проверки подлинности](./media/virtual-machines-sql-server-connection-steps/21Mixed-Mode.png)
5. <span data-ttu-id="708de-144">В SQL Server Management Studio диалоговое окно «hello», щелкните **ОК** tooacknowledge hello требование toorestart SQL Server.</span><span class="sxs-lookup"><span data-stu-id="708de-144">In hello SQL Server Management Studio dialog box, click **OK** tooacknowledge hello requirement toorestart SQL Server.</span></span>
6. <span data-ttu-id="708de-145">В обозревателе объектов щелкните сервер правой кнопкой мыши и выберите **Перезагрузить**.</span><span class="sxs-lookup"><span data-stu-id="708de-145">In Object Explorer, right-click your server, and then click **Restart**.</span></span> <span data-ttu-id="708de-146">(Если выполняется агент SQL Server, его также нужно перезапустить).</span><span class="sxs-lookup"><span data-stu-id="708de-146">(If SQL Server Agent is running, it must also be restarted.)</span></span>
   
    ![Перезагрузить](./media/virtual-machines-sql-server-connection-steps/22Restart2.png)
7. <span data-ttu-id="708de-148">В SQL Server Management Studio диалоговое окно «hello», щелкните **Да** tooagree, что требуется toorestart SQL Server.</span><span class="sxs-lookup"><span data-stu-id="708de-148">In hello SQL Server Management Studio dialog box, click **Yes** tooagree that you want toorestart SQL Server.</span></span>

### <a name="create-sql-server-authentication-logins"></a><span data-ttu-id="708de-149">Создание учетных записей проверки подлинности SQL Server</span><span class="sxs-lookup"><span data-stu-id="708de-149">Create SQL Server authentication logins</span></span>
<span data-ttu-id="708de-150">tooconnect toohello компонент Database Engine с другого компьютера, необходимо создать по крайней мере одно имя входа проверки подлинности SQL Server.</span><span class="sxs-lookup"><span data-stu-id="708de-150">tooconnect toohello Database Engine from another computer, you must create at least one SQL Server authentication login.</span></span>

1. <span data-ttu-id="708de-151">В SQL Server Management Studio обозревателе объектов разверните папку hello hello экземпляра сервера, в котором нужно создать имя входа hello toocreate.</span><span class="sxs-lookup"><span data-stu-id="708de-151">In SQL Server Management Studio Object Explorer, expand hello folder of hello server instance in which you want toocreate hello new login.</span></span>
2. <span data-ttu-id="708de-152">Щелкните правой кнопкой мыши hello **безопасности** папки, точки слишком**New**и выберите **входа...** .</span><span class="sxs-lookup"><span data-stu-id="708de-152">Right-click hello **Security** folder, point too**New**, and select **Login...**.</span></span>
   
    ![Новая учетная запись](./media/virtual-machines-sql-server-connection-steps/23New-Login.png)
3. <span data-ttu-id="708de-154">В hello **Создание имени входа** диалоговом на hello **Общие** введите имя нового пользователя hello hello в hello **имя входа** поле.</span><span class="sxs-lookup"><span data-stu-id="708de-154">In hello **Login - New** dialog box, on hello **General** page, enter hello name of hello new user in hello **Login name** box.</span></span>
4. <span data-ttu-id="708de-155">Выберите **Проверка подлинности SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="708de-155">Select **SQL Server authentication**.</span></span>
5. <span data-ttu-id="708de-156">В hello **пароль** введите пароль для нового пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="708de-156">In hello **Password** box, enter a password for hello new user.</span></span> <span data-ttu-id="708de-157">Введите пароль еще раз в hello **подтверждение пароля** поле.</span><span class="sxs-lookup"><span data-stu-id="708de-157">Enter that password again into hello **Confirm Password** box.</span></span>
6. <span data-ttu-id="708de-158">Выберите параметры применения пароля hello, необходимые (**требовать использование политики паролей**, **срока действия паролей**, и **потребовать смену пароля при следующем входе**).</span><span class="sxs-lookup"><span data-stu-id="708de-158">Select hello password enforcement options required (**Enforce password policy**, **Enforce password expiration**, and **User must change password at next login**).</span></span> <span data-ttu-id="708de-159">При использовании этого имени входа для себя toorequire изменения пароля при следующем входе hello не обязательно.</span><span class="sxs-lookup"><span data-stu-id="708de-159">If you are using this login for yourself, you do not need toorequire a password change at hello next login.</span></span>
7. <span data-ttu-id="708de-160">Из hello **база данных по умолчанию** выберите базу данных по умолчанию для имени входа hello.</span><span class="sxs-lookup"><span data-stu-id="708de-160">From hello **Default database** list, select a default database for hello login.</span></span> <span data-ttu-id="708de-161">**Главный** hello по умолчанию для этого параметра.</span><span class="sxs-lookup"><span data-stu-id="708de-161">**master** is hello default for this option.</span></span> <span data-ttu-id="708de-162">Если вы еще не создали пользовательскую базу данных, оставьте выбранным слишком**master**.</span><span class="sxs-lookup"><span data-stu-id="708de-162">If you have not yet created a user database, leave this set too**master**.</span></span>
   
    ![Свойства учетной записи](./media/virtual-machines-sql-server-connection-steps/24Test-Login.png)
8. <span data-ttu-id="708de-164">Если это hello первого входа в систему создаваемого можно toodesignate это имя входа от имени администратора SQL Server.</span><span class="sxs-lookup"><span data-stu-id="708de-164">If this is hello first login you are creating, you may want toodesignate this login as a SQL Server administrator.</span></span> <span data-ttu-id="708de-165">В этом случае на hello **ролей сервера** установите флажок **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="708de-165">If so, on hello **Server Roles** page, check **sysadmin**.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="708de-166">Члены фиксированной серверной роли sysadmin hello имеют полный контроль над hello компонента Database Engine.</span><span class="sxs-lookup"><span data-stu-id="708de-166">Members of hello sysadmin fixed server role have complete control of hello Database Engine.</span></span> <span data-ttu-id="708de-167">Количество представителей этой роли нужно ограничить.</span><span class="sxs-lookup"><span data-stu-id="708de-167">You should carefully restrict membership in this role.</span></span>
   > 
   > 
   
   ![sysadmin](./media/virtual-machines-sql-server-connection-steps/25sysadmin.png)
9. <span data-ttu-id="708de-169">Нажмите кнопку ОК.</span><span class="sxs-lookup"><span data-stu-id="708de-169">Click OK.</span></span>

<span data-ttu-id="708de-170">Более подробные сведения об учетных записях SQL Server см. в статье [Создание имени входа](http://msdn.microsoft.com/library/aa337562.aspx).</span><span class="sxs-lookup"><span data-stu-id="708de-170">For more information about SQL Server logins, see [Create a Login](http://msdn.microsoft.com/library/aa337562.aspx).</span></span>

