# <a name="cost-effective-standard-storage-and-unmanaged-and-managed-azure-vm-disks"></a>Экономичное хранилище класса Standard, а также управляемые и неуправляемые диски виртуальной машины Azure

Хранилище Azure класса Standard обеспечивает поддержку надежных экономически эффективных дисков для виртуальных машин, на которых выполняются рабочие нагрузки с большими задержками. Это хранилище также поддерживает хранение больших двоичных объектов, таблиц, очередей и файлов. Данные, переданные в хранилище класса Standard, хранятся на жестких дисках. Диски хранилища класса Standard можно использовать в сценариях разработки и тестирования, а также для менее важных рабочих нагрузок, а диски хранилища класса Premium — для критически важных рабочих приложений. Хранилище класса Standard доступно во всех регионах Azure. 

В этой статье представлены сведения об использовании хранилища уровня "Стандартный" для дисков виртуальной машины. Дополнительные сведения об использовании хранилища для хранения больших двоичных объектов, таблиц, очередей и файлов см. в статье [Введение в хранилище Microsoft Azure](../articles/storage/common/storage-introduction.md).

## <a name="disk-types"></a>Типы дисков

Существует два способа создания дисков класса Standard для виртуальных машин Azure.

С использованием **неуправляемых дисков**. Этот способ позволяет управлять учетными записями хранения, используемыми для хранения VHD-файлов, которые соответствуют дискам виртуальной машины. VHD-файлы хранятся в учетных записях хранения как страничные BLOB-объекты. Неуправляемые диски можно подключать к виртуальным машинам Azure любого размера, в том числе к виртуальным машинам, которые изначально используют хранилище класса Premium (например, виртуальные машины серий DSv2 и GS). К виртуальным машинам Azure можно подключить несколько дисков уровня "Стандартный", благодаря чему емкость виртуальной машины можно увеличить до 256 ТБ.

С использованием [**управляемых дисков Azure**](../articles/virtual-machines/windows/managed-disks-overview.md). Управление учетными записями хранения, используемыми для дисков виртуальной машины, выполняется за вас. Вы просто выбираете класс (Premium или Standard) и размер диска, а Azure самостоятельно создаст диск и будет управлять им. Вам не нужно беспокоиться о размещении дисков в нескольких учетных записях хранения для соблюдения границ масштабируемости учетных записей хранения. Azure берет это на себя.

Даже если можно использовать оба типа, мы рекомендуем выбрать управляемые диски, чтобы получить предоставляемые ими преимущества.

Чтобы приступить к работе с хранилищем Azure класса Standard, зайдите на [страницу бесплатной ознакомительной регистрации](https://azure.microsoft.com/pricing/free-trial/). 

Сведения о том, как создать виртуальную машину с управляемыми дисками, см. в следующих руководствах:

* [Создание виртуальной машины с помощью Resource Manager и PowerShell](../articles/virtual-machines/windows/quick-create-powershell.md)
* [Создание виртуальной машины Linux с помощью Azure CLI 2.0](../articles/virtual-machines/linux/quick-create-cli.md)

## <a name="standard-storage-features"></a>Возможности хранилища класса Standard 

Давайте ознакомимся с некоторыми возможностями хранилища уровня "Стандартный". Дополнительные сведения см. в статье [Введение в хранилище Microsoft Azure](../articles/storage/common/storage-introduction.md).

**Хранилище класса Standard** поддерживает диски, большие двоичные объекты, файлы, таблицы и очереди Azure. Чтобы использовать службы хранилища класса Standard, сначала [создайте учетную запись хранения Azure](../articles/storage/common/storage-create-storage-account.md#create-a-storage-account).

**Диски хранилища уровня "Стандартный"**. Диски хранилища уровня "Стандартный" можно подключить ко всем виртуальным машинам Azure, в том числе к виртуальным машинам, использующим хранилище класса Premium (например, виртуальные машины серий DSv2 и GS). Диск этого типа можно подключить только к одной виртуальной машине, но количество дисков, которое можно подключить, зависит от размера виртуальной машины. В приведенном ниже разделе "Целевые показатели масштабируемости и производительности" характеристики этих дисков описаны более подробно. 

**Страничный BLOB-объект класса Standard.** Эти объекты используются для хранения постоянных дисков виртуальных машин Azure. Доступ к ним можно получить непосредственно с помощью REST, как и к другим типам больших двоичных объектов Azure. [Страничные ВLOB-объекты](/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs) представляют собой коллекцию 512-байтовых страниц, оптимизированных для случайных операций чтения и записи. 

**Репликация хранилища.** В большинстве регионов данные учетной записи хранения класса Standard можно реплицировать локально или геореплицировать между несколькими центрами обработки данных. Доступно четыре типа репликации: локально избыточное хранилище (LRS), хранилище, избыточное в пределах зоны (ZRS), геоизбыточное хранилище (GRS) и геоизбыточное хранилище с доступом для чтения (RA-GRS). Сейчас управляемые диски в хранилище класса Standard поддерживают только локально избыточное хранилище. Дополнительные сведения см. в статье [Репликация службы хранилища Azure](../articles/storage/common/storage-redundancy.md).

## <a name="scalability-and-performance-targets"></a>Целевые показатели масштабируемости и производительности

В этом разделе мы опишем целевые показатели масштабируемости и производительности, которые необходимо учитывать при использовании хранилища уровня "Стандартный".

### <a name="account-limits--does-not-apply-to-managed-disks"></a>Ограничения учетной записи не применяются к управляемым дискам.

| **Ресурс** | **Ограничение по умолчанию** |
|--------------|-------------------|
| ТБ на учетную запись хранилища  | 500 TБ |
| Максимальная скорость входящих данных<sup>1</sup> на одну учетную запись хранения (регионы США) | 10 Гбит/c для хранилищ GRS и ZRS, 20 Гбит/c для хранилищ LRS |
| Максимальная скорость исходящих данных<sup>1</sup> на одну учетную запись хранения (регионы США) | 20 Гбит/с для хранилищ RA-GRS, GRS и ZRS, 30 Гбит/с для хранилищ LRS |
| Максимальная скорость входящих данных<sup>1</sup> на одну учетную запись хранения (европейский и азиатский регионы) | 5 Гбит/c для хранилищ GRS и ZRS, 10 Гбит/c для хранилищ LRS |
| Максимальная скорость исходящих данных<sup>1</sup> на одну учетную запись хранения (европейский и азиатский регионы) | 10 Гбит/с для хранилищ RA-GRS, GRS и ZRS, 15 Гбит/с для хранилищ LRS |
| Общая частота запросов (предполагается размер объекта в 1 КБ) для учетной записи хранения | До 20 000 операций ввода-вывода, объектов или сообщений в секунду |

<sup>1</sup> Под входящими данными подразумеваются все данные (запросы), отправляемые в учетную запись хранения, а под исходящими — все данные (ответы), получаемые из учетной записи хранения.

Дополнительные сведения см. в статье [Целевые показатели масштабируемости и производительности службы хранилища Azure](../articles/storage/common/storage-scalability-targets.md).

Если потребности вашего приложения превышают целевые показатели по масштабируемости для отдельной учетной записи хранилища, при создании приложения настройте его на использование нескольких учетных записей хранилища и распределите данные между этими учетными записями. При использовании управляемых дисков Azure секционированием и размещением данных управляет служба Azure.

### <a name="standard-disks-limits"></a>Предельные значения для дисков класса Standard

В отличие от дисков класса Premium количество операций ввода-вывода в секунду и пропускная способность дисков класса Standard не подготовлены. Производительность диска класса Standard зависит от размера виртуальной машины, к которой он подключен, а не от его размера. Вы можете повысить производительность в пределах значений, представленных в таблице ниже.

**Предельные значения для дисков класса Standard (управляемых и неуправляемых)**

| **Уровень виртуальной машины**            | **Виртуальная машина уровня Basic** | **Виртуальная машина уровня Standard** |
|------------------------|-------------------|----------------------|
| Максимальный размер диска          | 4095 ГБ           | 4095 ГБ              |
| Макс. количество операций ввода-вывода в секунду для блоков размером 8 КБ на диск | 300         | 500            |
| Макс. пропускная способность на диск | 60 МБ в секунду     | 60 МБ в секунду        |

Если для рабочей нагрузки требуется поддержка высокопроизводительного диска с низкими задержками, мы рекомендуем использовать хранилище класса Premium. Дополнительные сведения о преимуществах хранилища класса Premium см. в [этой статье](../articles/virtual-machines/windows/premium-storage.md). 

## <a name="snapshots-and-copy-blob"></a>Моментальные снимки и копирование больших двоичных объектов

В службе хранилища VHD-файл представляется в качестве страничного BLOB-объекта. Вы можете создать моментальные снимки страничных BLOB-объектов и копировать их в другое расположение, например в другую учетную запись хранения.

### <a name="unmanaged-disks"></a>Неуправляемые диски

Вы можете создать [добавочные моментальные снимки](../articles/virtual-machines/windows/incremental-snapshots.md) для неуправляемых дисков класса Standard таким же образом, как вы создаете моментальные снимки для хранилища класса Standard. Если исходный диск находится в учетной записи локально избыточного хранилища, мы рекомендуем создавать моментальные снимки, а затем копировать их в учетную запись геоизбыточного хранилища класса Standard. Дополнительные сведения см. в статье [Репликация службы хранилища Azure](../articles/storage/common/storage-redundancy.md).

Если диск подключен к виртуальной машине, определенные операции API запрещены. Например, на подключенном диске невозможно выполнить операцию [Copy Blob](/rest/api/storageservices/Copy-Blob) (копирования большого двоичного объекта). Вместо этого создайте сначала моментальный снимок большего двоичного объекта, используя метод REST API [Snapshot Blob](/rest/api/storageservices/Snapshot-Blob), а затем выполните операцию [Copy Blob](/rest/api/storageservices/Copy-Blob) с моментальным снимком, чтобы скопировать подключенный диск. Кроме того, вы можете отключить диск, а затем выполнить все необходимые операции.

Чтобы обеспечить поддержку геоизбыточных копий своих моментальных снимков, вы можете копировать моментальные снимки из учетной записи локально избыточного хранилища в учетную запись геоизбыточного хранилища класса Standard с помощью AzCopy или Copy Blob. Дополнительные сведения см. в статьях [Приступая к работе со служебной программой командной строки AzCopy](../articles/storage/common/storage-use-azcopy.md) и [Копирование большого двоичного объекта](/rest/api/storageservices/Copy-Blob).

Подробные сведения о выполнении операций REST со страничными BLOB-объектами в учетных записях хранения класса Standard см. в [документации по REST API служб хранилища Azure](/rest/api/storageservices/Azure-Storage-Services-REST-API-Reference).

### <a name="managed-disks"></a>Управляемые диски

Моментальный снимок для управляемого диска — это копия управляемого диска, предназначенная только для чтения и хранимая в качестве управляемого диска класса Standard. Сейчас управляемые диски не поддерживают добавочные моментальные снимки. Но это будет изменено в будущем.

Если управляемый диск подключен к виртуальной машине, определенные операции API запрещены. Например, пока диск подключен к виртуальной машине, вы не можете создать подписанный URL-адрес (SAS) для выполнения операции копирования. Вместо этого сначала создайте моментальный снимок диска, а затем копируйте его. Или отключите диск, а затем создайте подписанный URL-адрес (SAS).

## <a name="pricing-and-billing"></a>Цены и выставление счетов

При использовании хранилища класса Standard счета выставляются за следующее:

* размер данных и неуправляемых дисков хранилища класса Standard; 
* управляемые диски класса Standard;
* моментальные снимки хранилища класса Standard;
* Передача исходящих данных
* Транзакции

**Размер данных и неуправляемых дисков хранилища.** Для неуправляемых дисков и других данных (больших двоичных объектов, таблиц, очередей и файлов) плата начисляется только за объем используемого пространства. Например, если для виртуальной машины подготовлен страничный BLOB-объект емкостью 127 ГБ, а фактически используется только 10 ГБ, то счет выставляется только за используемое пространство. Мы поддерживаем хранилище уровня "Стандартный" размером до 8191 ГБ и неуправляемые диски уровня "Стандартный" размером до 4095 ГБ. 

**Управляемые диски.** Выставление счета за использование управляемых дисков зависит от размера подготовленного диска. Если вы подготовили диск емкостью 10 ГБ, а используете только 5 ГБ, плата по-прежнему будет взиматься за 10 ГБ.

**Моментальные снимки.** Счета за моментальные снимки дисков класса Standard выставляются с учетом дополнительной емкости, потребляемой моментальными снимками. Сведения о моментальных снимках см. в статье [Создание моментального снимка большого двоичного объекта](/rest/api/storageservices/Creating-a-Snapshot-of-a-Blob).

**Передача исходящих данных.** [Передача исходящих данных](https://azure.microsoft.com/pricing/details/data-transfers/) (данные, передаваемые из центров обработки данных Azure) учитывается при определении платы за используемую пропускную способность.

**Транзакция.** Для хранилища класса Standard служба Azure взимает по 0,0036 долл. США за каждые 100 000 транзакций. К транзакциям относятся операции чтения и записи в хранилище.

Подробные сведения о ценах на хранилище Standard, виртуальные машины и управляемые диски см. по следующим ссылкам:

* [Цены на хранилища Azure](https://azure.microsoft.com/pricing/details/storage/)
* [Виртуальные машины: цены](https://azure.microsoft.com/pricing/details/virtual-machines/)
* [Цены на управляемые диски](https://azure.microsoft.com/pricing/details/managed-disks)

## <a name="azure-backup-service-support"></a>Поддержка службы архивации Azure 

Виртуальные машины с неуправляемыми дисками можно архивировать с помощью службы архивации Azure. [Дополнительные сведения](../articles/backup/backup-azure-vms-first-look-arm.md).

Вы также можете использовать службу архивации Azure для управляемых дисков, чтобы создать задание архивации с учетом времени, политики хранения резервных копий и выполнять быстрое восстановление виртуальной машины. Дополнительные сведения см. в статье [Что такое служба архивации Azure?](../articles/backup/backup-introduction-to-azure-backup.md#using-managed-disk-vms-with-azure-backup)

## <a name="next-steps"></a>Дальнейшие действия

* [Введение в хранилище Azure](../articles/storage/common/storage-introduction.md)

* [создать учетную запись хранения;](../articles/storage/common/storage-create-storage-account.md)

* [Обзор управляемых дисков](../articles/virtual-machines/linux/managed-disks-overview.md)

* [Создание виртуальной машины с помощью Resource Manager и PowerShell](../articles/virtual-machines/windows/quick-create-powershell.md)

* [Создание виртуальной машины Linux с помощью Azure CLI 2.0](../articles/virtual-machines/linux/quick-create-cli.md)
