

В службах инфраструктуры Azure доступны два уровня балансировки нагрузки.

* **Уровень DNS**: балансировки нагрузки для трафика toodifferent облачных служб находятся в различных центрах обработки, toodifferent веб-сайты Azure находятся в разных центрах обработки данных или tooexternal конечные точки. Это делается с помощью диспетчера трафика Azure и метод балансировки нагрузки hello циклического перебора.
* **Сетевой уровень**: входящее Интернет трафика toodifferent виртуальных машин облачной службы балансировки нагрузки или балансировку нагрузки трафика между виртуальными машинами в облачной службе или виртуальной сети. Это делается с подсистемой балансировки нагрузки Azure hello.

## <a name="traffic-manager-load-balancing-for-cloud-services-and-websites"></a>Балансировка нагрузки диспетчером трафика для облачных служб и веб-сайтов
Диспетчер трафика позволяет распределение hello toocontrol tooendpoints трафика пользователя, который может включать облачных служб, веб-сайтов, внешние веб-сайты и другие профили диспетчера трафика. Диспетчер трафика работает путем применения tooDomain имен (DNS) интеллектуальной политики обработчик запросов для hello доменных имен Интернет-ресурсов. Облачные службы или веб-сайтов могут работать в разных центрах обработки данных по Здравствуй, мир.

Как конечные точки необходимо использовать REST или Windows PowerShell tooconfigure внешние конечные точки или профили диспетчера трафика.

Диспетчер трафика использует три балансировки нагрузки трафика toodistribute методов:

* **Переход на другой ресурс**: используйте этот метод при необходимости toouse основную конечную точку для всего трафика, но обеспечивать резервные копии на случай недоступности основного hello.
* **Производительность**: используйте этот метод, если конечные точки в разных географических регионах и требуется запрос «близко расположенные» endpoint hello toouse-клиенты с точки зрения hello наименьшую задержку.
* **Циклический перебор:** используйте этот метод при необходимости toodistribute нагрузку по нескольким облачных служб в hello же центре обработки данных или в нескольких облачных служб или веб-сайтов в разных центрах обработки данных.

Дополнительные сведения см. в статье [О методах балансировки нагрузки диспетчера трафика](../articles/traffic-manager/traffic-manager-routing-methods.md).

Следующая схема Hello показан пример hello циклического метода балансировки нагрузки для распределения трафика между разных облачных службах.

![loadbalancing](./media/virtual-machines-common-load-balance/TMSummary.png)

Hello базовый процесс выглядит hello следующее:

1. Интернет-клиент запрашивает домена имя соответствующей tooa веб-службы.
2. DNS пересылает hello имя запроса запроса tooTraffic диспетчера.
3. Диспетчер трафика выбирает hello Далее облачной службы в hello циклический перебор списка и отправляет обратно hello DNS-имя. Hello Интернет клиента DNS-сервер разрешает hello имя tooan IP-адрес и отправляет его toohello Интернет-клиента.
4. Hello Интернет-клиент соединяется с hello облачной службы, выбранной с помощью диспетчера трафика.

Дополнительные сведения см. в статье [Диспетчер трафика](../articles/traffic-manager/traffic-manager-overview.md).

## <a name="azure-load-balancing-for-virtual-machines"></a>Балансировка нагрузки Azure для виртуальных машин
Здравствуйте, виртуальных машин в одной облачной службе или виртуальной сети могут взаимодействовать друг с другом напрямую, используя их частные IP-адреса. Компьютеры и службы за пределами hello облачной службы или виртуальной сети могут взаимодействовать только с виртуальными машинами в облачной службе или виртуальной сети с настроенной конечной точки. Конечная точка — сопоставление общедоступный IP-адрес и порт toothat частный IP-адрес и порт виртуальной машины или веб-роли в облачной службе Azure.

случайным образом Hello подсистемы балансировки нагрузки Azure распределяет определенный тип входящего трафика на несколько виртуальных машин и служб в конфигурации, известный как набор с балансировкой нагрузки. Например можно распределить hello нагрузки трафика веб-запросов по нескольким веб-серверам или веб-ролей.

Hello следующая диаграмма показывает конечную точку с балансировкой нагрузки для стандартных (незашифрованные) веб-трафика, который разделяется между тремя виртуальными машинами для hello открытого и закрытого TCP-порт 80. Эти три виртуальные машины находятся в наборе балансировки нагрузки.

![loadbalancing](./media/virtual-machines-common-load-balance/LoadBalancing.png)

Дополнительные сведения см. в статье [Подсистема балансировки нагрузки Azure](../articles/load-balancer/load-balancer-overview.md). Hello шаги toocreate набор с балансировкой нагрузки, см. в разделе [настроить набор балансировки нагрузки](../articles/load-balancer/load-balancer-get-started-internet-arm-ps.md).

Azure также может распределять нагрузку внутри облачной службы или виртуальной сети. Это называется внутренней балансировки нагрузки и может использоваться в hello следующих способов:

* tooload нагрузку между серверами в разных уровнях многоуровневого приложения (например, между уровнями web и базы данных).
* tooload баланс бизнес-БИЗНЕС-приложения размещенного в Azure без дополнительной нагрузки балансировки оборудования или программного обеспечения.
* tooinclude локальных серверов в набор компьютеров, трафик которого будет осуществляться Балансировка hello.

Аналогичные tooAzure балансировки нагрузки, внутренней балансировки нагрузки можно добиться, настроив набор с внутренней балансировкой нагрузки.

Следующая схема Hello показан пример внутренней конечной с балансировкой нагрузки для бизнес-приложений, с которым среди трех виртуальных машин в виртуальной сети между организациями.

![loadbalancing](./media/virtual-machines-common-load-balance/LOBServers.png)

## <a name="load-balancer-considerations"></a>Особенности балансировщика нагрузки
Настройка балансировки нагрузки по умолчанию tootimeout простоя сеанс в 4 минуты. Если ваше приложение за подсистемой балансировки нагрузки оставляет подключение бездействия более 4 минут, которая не имеет конфигурацию Keep-Alive, hello соединения будут удалены. Вы можете изменить tooallow поведение подсистемы балансировки нагрузки hello [больше времени ожидания для балансировки нагрузки Azure](../articles/load-balancer/load-balancer-tcp-idle-timeout.md).

Другим аспектом является hello тип распределения, поддерживаемый подсистемой балансировки нагрузки Azure. Вы можете настроить сходство IP-адреса источника (IP-адрес источника, IP-адрес назначения) или протокол IP-адреса источника (IP-адрес источника, IP-адрес назначения и протокол). Дополнительные сведения см. в статье [Режим распределения балансировщика нагрузки (соответствие исходному IP-адресу)](../articles/load-balancer/load-balancer-distribution-mode.md).

## <a name="next-steps"></a>Дальнейшие действия
Hello шаги toocreate набор с балансировкой нагрузки, см. в разделе [настроить набор с внутренней балансировкой нагрузки](../articles/load-balancer/load-balancer-get-started-ilb-arm-ps.md).

Дополнительные сведения см. в статье [Внутренняя балансировка нагрузки](../articles/load-balancer/load-balancer-internal-overview.md).

