

<span data-ttu-id="e9a99-101">Расширения ВМ можно использовать в следующих целях.</span><span class="sxs-lookup"><span data-stu-id="e9a99-101">VM extensions can help you:</span></span>

* <span data-ttu-id="e9a99-102">Изменение функций безопасности и идентификации, в том числе сброс значений учетных записей и использование защиты от вредоносных программ.</span><span class="sxs-lookup"><span data-stu-id="e9a99-102">Modify security and identity features, such as resetting account values and using antimalware</span></span>
* <span data-ttu-id="e9a99-103">Запуск, остановка и настройка функций мониторинга и диагностики.</span><span class="sxs-lookup"><span data-stu-id="e9a99-103">Start, stop, or configure monitoring and diagnostics</span></span>
* <span data-ttu-id="e9a99-104">Сброс или установка функций подключения, например RDP и SSH.</span><span class="sxs-lookup"><span data-stu-id="e9a99-104">Reset or install connectivity features, such as RDP and SSH</span></span>
* <span data-ttu-id="e9a99-105">Диагностика и мониторинг виртуальных машин, а также управление ими.</span><span class="sxs-lookup"><span data-stu-id="e9a99-105">Diagnose, monitor, and manage your VMs</span></span>

<span data-ttu-id="e9a99-106">Также существует множество других функций.</span><span class="sxs-lookup"><span data-stu-id="e9a99-106">There are many other features as well.</span></span> <span data-ttu-id="e9a99-107">Новые функции расширений виртуальных машин выпускаются регулярно.</span><span class="sxs-lookup"><span data-stu-id="e9a99-107">New VM Extension features are released regularly.</span></span> <span data-ttu-id="e9a99-108">В этой статье описываются hello Azure VM агентов для Windows и Linux и их поддержка функциональности расширений ВМ.</span><span class="sxs-lookup"><span data-stu-id="e9a99-108">This article describes hello Azure VM Agents for Windows and Linux, and how they support VM Extension functionality.</span></span> <span data-ttu-id="e9a99-109">Список расширений виртуальных машин, в котором указаны категории компонентов, приводится в статье [Обзор расширений и компонентов виртуальной машины](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="e9a99-109">For a listing of VM Extensions by feature category, see [Azure VM Extensions and Features](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

## <a name="azure-vm-agents-for-windows-and-linux"></a><span data-ttu-id="e9a99-110">Агенты виртуальной машины Azure для Windows и Linux</span><span class="sxs-lookup"><span data-stu-id="e9a99-110">Azure VM Agents for Windows and Linux</span></span>
<span data-ttu-id="e9a99-111">Hello агент виртуальной машины Azure (агент ВМ) является защищенным, упрощенная процессом, который устанавливает, настраивает и удаление расширений ВМ на экземплярах виртуальных машин Azure.</span><span class="sxs-lookup"><span data-stu-id="e9a99-111">hello Azure Virtual Machines Agent (VM Agent) is a secured, light-weight process that installs, configures, and removes VM extensions on instances of Azure Virtual Machines.</span></span> <span data-ttu-id="e9a99-112">Агент виртуальной Машины Hello выступает в качестве hello защищенной локальной службы управления для виртуальной Машины Azure.</span><span class="sxs-lookup"><span data-stu-id="e9a99-112">hello VM Agent acts as hello secure local control service for your Azure VM.</span></span> <span data-ttu-id="e9a99-113">Hello расширения, которые Здравствуйте, агент загружает предоставляют tooincrease особенности производительность с помощью экземпляра hello.</span><span class="sxs-lookup"><span data-stu-id="e9a99-113">hello extensions that hello agent loads provide specific features tooincrease your productivity using hello instance.</span></span>

<span data-ttu-id="e9a99-114">Существует два агента виртуальной машины Azure: для виртуальных машин Windows и для виртуальных машин Linux.</span><span class="sxs-lookup"><span data-stu-id="e9a99-114">Two Azure VM Agents exist, one for Windows VMs and one for Linux VMs.</span></span>

<span data-ttu-id="e9a99-115">Если требуется одно или несколько расширений ВМ toouse экземпляр виртуальной машины hello экземпляр должен иметь установленного агента виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="e9a99-115">If you want a virtual machine instance toouse one or more VM extensions, hello instance must have an installed VM Agent.</span></span> <span data-ttu-id="e9a99-116">Образ виртуальной машины, созданные с помощью hello портал Azure и изображения из hello **Marketplace** автоматически устанавливает агент виртуальной Машины в процессе создания hello.</span><span class="sxs-lookup"><span data-stu-id="e9a99-116">A virtual machine image created by using hello Azure portal and an image from hello **Marketplace** automatically installs a VM Agent in hello creation process.</span></span> <span data-ttu-id="e9a99-117">Если экземпляр виртуальной машины отсутствует агент виртуальной Машины, можно установить hello агент виртуальной Машины после создания экземпляра виртуальной машины hello.</span><span class="sxs-lookup"><span data-stu-id="e9a99-117">If a virtual machine instance lacks a VM Agent, you can install hello VM Agent after hello virtual machine instance is created.</span></span> <span data-ttu-id="e9a99-118">Или можно установить агент hello в настраиваемом образе ВМ, который затем отправляется.</span><span class="sxs-lookup"><span data-stu-id="e9a99-118">Or, you can install hello agent in a custom VM image that you then upload.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e9a99-119">Агенты виртуальной машины представляют собой очень простые службы, обеспечивающие защищенное администрирование экземпляров виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="e9a99-119">These VM Agents are very light-weight, services that enable secured administration of virtual machine instances.</span></span> <span data-ttu-id="e9a99-120">Возможны случаи, в которых требуется отключить hello агент виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="e9a99-120">There might be cases in which you do not want hello VM Agent.</span></span> <span data-ttu-id="e9a99-121">В этом случае будет убедиться, что виртуальные машины toocreate, у которых нет hello агент виртуальной Машины с помощью hello Azure CLI или PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e9a99-121">If so, be sure toocreate VMs that do not have hello VM Agent installed using hello Azure CLI or PowerShell.</span></span> <span data-ttu-id="e9a99-122">Несмотря на то, что hello агент виртуальной Машины можно удалять физически, hello поведение расширений ВМ на экземпляре hello не определен.</span><span class="sxs-lookup"><span data-stu-id="e9a99-122">Although hello VM Agent can be removed physically, hello behavior of VM Extensions on hello instance is undefined.</span></span> <span data-ttu-id="e9a99-123">Таким образом, удаление установленного агента виртуальной машины не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="e9a99-123">As a result, removing an installed VM Agent is not supported.</span></span>
>

<span data-ttu-id="e9a99-124">в следующих ситуациях hello включен Hello агент виртуальной Машины:</span><span class="sxs-lookup"><span data-stu-id="e9a99-124">hello VM Agent is enabled in hello following situations:</span></span>

* <span data-ttu-id="e9a99-125">При создании экземпляра виртуальной машины с помощью hello Azure и выбора изображения из hello **Marketplace**,</span><span class="sxs-lookup"><span data-stu-id="e9a99-125">When you create an instance of a VM by using hello Azure portal and selecting an image from hello **Marketplace**,</span></span>
* <span data-ttu-id="e9a99-126">При создании экземпляра виртуальной машины с помощью hello [New-AzureVM](https://msdn.microsoft.com/library/azure/dn495254.aspx) или hello [New-AzureQuickVM](https://msdn.microsoft.com/library/azure/dn495183.aspx) командлета.</span><span class="sxs-lookup"><span data-stu-id="e9a99-126">When you create an instance of a VM by using hello [New-AzureVM](https://msdn.microsoft.com/library/azure/dn495254.aspx) or hello [New-AzureQuickVM](https://msdn.microsoft.com/library/azure/dn495183.aspx) cmdlet.</span></span> <span data-ttu-id="e9a99-127">Можно создать виртуальную Машину без агента виртуальной Машины, добавив hello **– DisableGuestAgent** toohello параметр [Add-AzureProvisioningConfig](https://msdn.microsoft.com/library/azure/dn495299.aspx) командлета</span><span class="sxs-lookup"><span data-stu-id="e9a99-127">You can create a VM without a VM Agent by adding hello **–DisableGuestAgent** parameter toohello [Add-AzureProvisioningConfig](https://msdn.microsoft.com/library/azure/dn495299.aspx) cmdlet,</span></span>

* <span data-ttu-id="e9a99-128">При можно вручную загрузить и установить агент ВМ hello в существующем экземпляре ВМ и задать hello **ProvisionGuestAgent** значение слишком**true**.</span><span class="sxs-lookup"><span data-stu-id="e9a99-128">When you manually download and install hello VM Agent on an existing VM instance, and set hello **ProvisionGuestAgent** value too**true**.</span></span> <span data-ttu-id="e9a99-129">Этот метод можно использовать для агентов Windows и Linux с помощью команды PowerShell или вызова REST.</span><span class="sxs-lookup"><span data-stu-id="e9a99-129">You can use this technique for Windows and Linux agents, by using a PowerShell command or a REST call.</span></span> <span data-ttu-id="e9a99-130">(Если вы не установите hello **ProvisionGuestAgent** значение после установки агента виртуальной Машины, добавление hello hello, агент виртуальной Машины не обнаружено надлежащим образом hello вручную.) hello следующие примере кода показано, как toodo этого с помощью PowerShell, где hello `$svc` и `$name` уже определены аргументы:</span><span class="sxs-lookup"><span data-stu-id="e9a99-130">(If you do not set hello **ProvisionGuestAgent** value after manually installing hello VM Agent, hello addition of hello VM Agent is not detected properly.) hello following code example shows how toodo this using PowerShell where hello `$svc` and `$name` arguments have already been determined:</span></span>

      $vm = Get-AzureVM –ServiceName $svc –Name $name
      $vm.VM.ProvisionGuestAgent = $TRUE
      Update-AzureVM –Name $name –VM $vm.VM –ServiceName $svc

* <span data-ttu-id="e9a99-131">При создании образа виртуальной машины, который включает в себя установленный агент виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="e9a99-131">When you create a VM image that includes an installed VM Agent.</span></span> <span data-ttu-id="e9a99-132">После hello изображение с hello агент виртуальной Машины существует, можно загрузить tooAzure этого образа.</span><span class="sxs-lookup"><span data-stu-id="e9a99-132">Once hello image with hello VM Agent exists, you can upload that image tooAzure.</span></span> <span data-ttu-id="e9a99-133">Для ВМ Windows загрузите hello [файл MSI агента ВМ Windows](http://go.microsoft.com/fwlink/?LinkID=394789) и установить агент ВМ hello.</span><span class="sxs-lookup"><span data-stu-id="e9a99-133">For a Windows VM, download hello [Windows VM Agent .msi file](http://go.microsoft.com/fwlink/?LinkID=394789) and install hello VM Agent.</span></span> <span data-ttu-id="e9a99-134">Для виртуальной Машины Linux, установить агент виртуальной Машины из репозитория GitHub hello, расположенный hello <https://github.com/Azure/WALinuxAgent>.</span><span class="sxs-lookup"><span data-stu-id="e9a99-134">For a Linux VM, install hello VM Agent from hello GitHub repository located at <https://github.com/Azure/WALinuxAgent>.</span></span> <span data-ttu-id="e9a99-135">Дополнительные сведения о как tooinstall hello агента ВМ в Linux см. в разделе hello [руководство пользователя агента ВМ Linux Azure](../articles/virtual-machines/linux/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="e9a99-135">For more information on how tooinstall hello VM Agent on Linux, see hello [Azure Linux VM Agent User Guide](../articles/virtual-machines/linux/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

> [!NOTE]
> <span data-ttu-id="e9a99-136">В PaaS, hello агент ВМ называется **WindowsAzureGuestAgent**и всегда доступен на веб- и рабочих ролей ВМ.</span><span class="sxs-lookup"><span data-stu-id="e9a99-136">In PaaS, hello VM Agent is called **WindowsAzureGuestAgent**, and is always available on Web and Worker Role VMs.</span></span> <span data-ttu-id="e9a99-137">(Дополнительные сведения см. в разделе [архитектура ролей Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).) hello агент ВМ для ВМ ролей теперь можно добавить расширения toohello облачная служба виртуальных машин в hello так же, как и для постоянных виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="e9a99-137">(For more information, see [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).) hello VM Agent for Role VMs can now add extensions toohello cloud service VMs in hello same way that it does for persistent Virtual Machines.</span></span> <span data-ttu-id="e9a99-138">Hello главное различие между расширениями ВМ в роли ВМ и постоянными ВМ — при добавлении расширения ВМ hello.</span><span class="sxs-lookup"><span data-stu-id="e9a99-138">hello biggest difference between VM Extensions on role VMs and persistent VMs is when hello VM extensions are added.</span></span> <span data-ttu-id="e9a99-139">Роль ВМ расширения добавляются первой toohello облачной службы, затем toohello развертывания в этой службе.</span><span class="sxs-lookup"><span data-stu-id="e9a99-139">With role VMs, extensions are added first toohello cloud service, then toohello deployments within that cloud service.</span></span>
>
> <span data-ttu-id="e9a99-140">Используйте [Get-AzureServiceAvailableExtension](https://msdn.microsoft.com/library/azure/dn722498.aspx) toolist командлет все доступные роли ВМ расширения.</span><span class="sxs-lookup"><span data-stu-id="e9a99-140">Use the [Get-AzureServiceAvailableExtension](https://msdn.microsoft.com/library/azure/dn722498.aspx) cmdlet toolist all available role VM extensions.</span></span>
>
>

## <a name="find-add-update-and-remove-vm-extensions"></a><span data-ttu-id="e9a99-141">Поиск, добавление, обновление и удаление расширений виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="e9a99-141">Find, Add, Update, and Remove VM Extensions</span></span>
<span data-ttu-id="e9a99-142">Дополнительные сведения об этих задачах можно найти в статье [Управление расширениями виртуальной машины](../articles/virtual-machines/windows/classic/manage-extensions.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="e9a99-142">For details on these tasks, see [Add, Find, Update, and Remove Azure VM Extensions](../articles/virtual-machines/windows/classic/manage-extensions.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>
