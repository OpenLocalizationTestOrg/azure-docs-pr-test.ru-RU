

Расширения ВМ можно использовать в следующих целях.

* Изменение функций безопасности и идентификации, в том числе сброс значений учетных записей и использование защиты от вредоносных программ.
* Запуск, остановка и настройка функций мониторинга и диагностики.
* Сброс или установка функций подключения, например RDP и SSH.
* Диагностика и мониторинг виртуальных машин, а также управление ими.

Также существует множество других функций. Новые функции расширений виртуальных машин выпускаются регулярно. В этой статье описываются hello Azure VM агентов для Windows и Linux и их поддержка функциональности расширений ВМ. Список расширений виртуальных машин, в котором указаны категории компонентов, приводится в статье [Обзор расширений и компонентов виртуальной машины](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).

## <a name="azure-vm-agents-for-windows-and-linux"></a>Агенты виртуальной машины Azure для Windows и Linux
Hello агент виртуальной машины Azure (агент ВМ) является защищенным, упрощенная процессом, который устанавливает, настраивает и удаление расширений ВМ на экземплярах виртуальных машин Azure. Агент виртуальной Машины Hello выступает в качестве hello защищенной локальной службы управления для виртуальной Машины Azure. Hello расширения, которые Здравствуйте, агент загружает предоставляют tooincrease особенности производительность с помощью экземпляра hello.

Существует два агента виртуальной машины Azure: для виртуальных машин Windows и для виртуальных машин Linux.

Если требуется одно или несколько расширений ВМ toouse экземпляр виртуальной машины hello экземпляр должен иметь установленного агента виртуальной Машины. Образ виртуальной машины, созданные с помощью hello портал Azure и изображения из hello **Marketplace** автоматически устанавливает агент виртуальной Машины в процессе создания hello. Если экземпляр виртуальной машины отсутствует агент виртуальной Машины, можно установить hello агент виртуальной Машины после создания экземпляра виртуальной машины hello. Или можно установить агент hello в настраиваемом образе ВМ, который затем отправляется.

> [!IMPORTANT]
> Агенты виртуальной машины представляют собой очень простые службы, обеспечивающие защищенное администрирование экземпляров виртуальных машин. Возможны случаи, в которых требуется отключить hello агент виртуальной Машины. В этом случае будет убедиться, что виртуальные машины toocreate, у которых нет hello агент виртуальной Машины с помощью hello Azure CLI или PowerShell. Несмотря на то, что hello агент виртуальной Машины можно удалять физически, hello поведение расширений ВМ на экземпляре hello не определен. Таким образом, удаление установленного агента виртуальной машины не поддерживается.
>

в следующих ситуациях hello включен Hello агент виртуальной Машины:

* При создании экземпляра виртуальной машины с помощью hello Azure и выбора изображения из hello **Marketplace**,
* При создании экземпляра виртуальной машины с помощью hello [New-AzureVM](https://msdn.microsoft.com/library/azure/dn495254.aspx) или hello [New-AzureQuickVM](https://msdn.microsoft.com/library/azure/dn495183.aspx) командлета. Можно создать виртуальную Машину без агента виртуальной Машины, добавив hello **– DisableGuestAgent** toohello параметр [Add-AzureProvisioningConfig](https://msdn.microsoft.com/library/azure/dn495299.aspx) командлета

* При можно вручную загрузить и установить агент ВМ hello в существующем экземпляре ВМ и задать hello **ProvisionGuestAgent** значение слишком**true**. Этот метод можно использовать для агентов Windows и Linux с помощью команды PowerShell или вызова REST. (Если вы не установите hello **ProvisionGuestAgent** значение после установки агента виртуальной Машины, добавление hello hello, агент виртуальной Машины не обнаружено надлежащим образом hello вручную.) hello следующие примере кода показано, как toodo этого с помощью PowerShell, где hello `$svc` и `$name` уже определены аргументы:

      $vm = Get-AzureVM –ServiceName $svc –Name $name
      $vm.VM.ProvisionGuestAgent = $TRUE
      Update-AzureVM –Name $name –VM $vm.VM –ServiceName $svc

* При создании образа виртуальной машины, который включает в себя установленный агент виртуальной машины. После hello изображение с hello агент виртуальной Машины существует, можно загрузить tooAzure этого образа. Для ВМ Windows загрузите hello [файл MSI агента ВМ Windows](http://go.microsoft.com/fwlink/?LinkID=394789) и установить агент ВМ hello. Для виртуальной Машины Linux, установить агент виртуальной Машины из репозитория GitHub hello, расположенный hello <https://github.com/Azure/WALinuxAgent>. Дополнительные сведения о как tooinstall hello агента ВМ в Linux см. в разделе hello [руководство пользователя агента ВМ Linux Azure](../articles/virtual-machines/linux/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

> [!NOTE]
> В PaaS, hello агент ВМ называется **WindowsAzureGuestAgent**и всегда доступен на веб- и рабочих ролей ВМ. (Дополнительные сведения см. в разделе [архитектура ролей Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).) hello агент ВМ для ВМ ролей теперь можно добавить расширения toohello облачная служба виртуальных машин в hello так же, как и для постоянных виртуальных машин. Hello главное различие между расширениями ВМ в роли ВМ и постоянными ВМ — при добавлении расширения ВМ hello. Роль ВМ расширения добавляются первой toohello облачной службы, затем toohello развертывания в этой службе.
>
> Используйте [Get-AzureServiceAvailableExtension](https://msdn.microsoft.com/library/azure/dn722498.aspx) toolist командлет все доступные роли ВМ расширения.
>
>

## <a name="find-add-update-and-remove-vm-extensions"></a>Поиск, добавление, обновление и удаление расширений виртуальной машины
Дополнительные сведения об этих задачах можно найти в статье [Управление расширениями виртуальной машины](../articles/virtual-machines/windows/classic/manage-extensions.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).
