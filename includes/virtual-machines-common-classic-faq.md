


В этой статье содержатся ответы на некоторые распространенные вопросы о виртуальных машинах Azure, созданных с помощью классической модели развертывания.

## <a name="can-i-migrate-my-vm-created-in-the-classic-deployment-model-to-the-new-resource-manager-model"></a>Можно ли перенести виртуальную машину, созданную с помощью классической модели развертывания, в новую модель Resource Manager?
Да. Инструкции по выполнению переноса см. в статьях:

* [Перенос ресурсов IaaS из классической модели в модель Azure Resource Manager с помощью Azure PowerShell](../articles/virtual-machines/windows/migration-classic-resource-manager-ps.md).
* [Перенос ресурсов IaaS из классического развертывания в развертывание с помощью Azure Resource Manager с использованием Azure CLI](../articles/virtual-machines/virtual-machines-linux-cli-migration-classic-resource-manager.md).

## <a name="what-can-i-run-on-an-azure-vm"></a>Что можно запускать на виртуальной машине Azure?
Все подписчики могут запускать на виртуальной машине Azure серверное программное обеспечение. Вы можете запускать последние версии Windows Server, а также различные дистрибутивы Linux. Дополнительную информацию о поддержке см. в следующих ресурсах:

• для виртуальных машин Windows: [Поддержка серверного программного обеспечения Майкрософт для виртуальных машин Azure](http://go.microsoft.com/fwlink/p/?LinkId=393550)

• для виртуальных машин Linux: [Linux в Azure — рекомендованные дистрибутивы](http://go.microsoft.com/fwlink/p/?LinkId=393551)

Для образов клиента Windows подписчикам MSDN Azure, а также подписчикам MSDN для разработки и тестирования с оплатой по мере использования доступны некоторые версии Windows 7 и Windows 8.1 для использования в целях разработки или тестирования. Дополнительные сведения, включая указания и ограничения, см. в статье [Образы клиента Windows для подписчиков MSDN](https://azure.microsoft.com/blog/2014/05/29/windows-client-images-on-azure/).

## <a name="why-are-affinity-groups-being-deprecated"></a>Почему не рекомендуется использовать территориальные группы?
Территориальные группы — это устаревшее средство географического группирования клиентских развертываний облачных служб и учетных записей хранения в Azure. Изначально их использовали для улучшения производительности сети, обеспечивающей связь между виртуальными машинами, в ранних сетевых разработках Azure. Кроме того, они поддерживали первоначальный выпуск виртуальных сетей, которые были ограничены небольшим набором оборудования в регионе.

Современная сеть Azure в пределах региона разработана таким образом, что территориальные группы больше не требуются. Виртуальные сети также располагаются внутри регионов, и для их использования больше не нужны территориальные группы. Вследствие этих улучшений мы больше не рекомендуем использовать территориальные группы, так как в некоторых сценариях их применение может сопровождаться ограничениями. При использовании территориальных групп виртуальные машины без необходимости связываются с определенным оборудованием, что ограничивает выбор доступных размеров виртуальных машин. Кроме того, это может привести к проблемам с емкостью. При попытке добавить новые виртуальные машины определенное оборудование, связанное с территориальной группой, может использовать практически всю емкость.

Функции территориальной группы являются устаревшими в модели развертывания с помощью Azure Resource Manager и на портале Azure. Мы прекращаем поддержку в создании территориальных групп и закрепленных за ними ресурсов хранения на классическом портале Azure. Изменять существующие облачные службы, которые используют территориальные группы, не требуется. В новых облачных службах не следует использовать территориальные группы, если это не рекомендует специалист службы поддержки Azure.

## <a name="how-much-storage-can-i-use-with-a-virtual-machine"></a>Какой объем памяти можно использовать с виртуальной машиной?
Каждый диск данных может иметь объем до 1 ТБ. Количество дисков данных, которое можно использовать, зависит от размера виртуальной машины. Дополнительную информацию см. в статье [Размеры виртуальных машин](../articles/virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

Учетная запись хранения Azure предоставляет хранилище для диска операционной системы и любых дисков данных. Каждый из этих дисков представляет собой VHD-файл, хранящийся как страничный BLOB-объект. Информацию о ценах см. в статье [Информация о ценах на хранилища](http://go.microsoft.com/fwlink/p/?LinkId=396819).

## <a name="which-virtual-hard-disk-types-can-i-use"></a>Какие типы виртуальных жестких дисков можно использовать?
Azure поддерживает только фиксированные виртуальные жесткие диски формата VHD. Если вы хотите использовать в Azure диск формата VHDX, преобразуйте его с помощью диспетчера Hyper-V или командлета [convert-VHD](http://go.microsoft.com/fwlink/p/?LinkId=393656) . Затем с помощью командлета [Add-AzureVHD](https://msdn.microsoft.com/library/azure/dn495173.aspx) (в режиме управления службами Azure) отправьте полученный VHD в учетную запись хранения в Azure, чтобы можно было использовать его с виртуальными машинами.

* Инструкции для Linux см. в статье [Создание и передача виртуального жесткого диска с операционной системой Linux](../articles/virtual-machines/linux/classic/create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).
* Инструкции для Windows см. в статье [Создание и передача виртуального жесткого диска Windows Server в Azure](../articles/virtual-machines/windows/classic/createupload-vhd.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).

## <a name="are-these-virtual-machines-the-same-as-hyper-v-virtual-machines"></a>Эти виртуальные машины аналогичны виртуальным машинам Hyper-V?
Во многих отношениях они аналогичны виртуальным машинам Hyper-V 1-го поколения, но не во всем. Оба типа предоставляют виртуализированное оборудование, и виртуальные жесткие диски в формате VHD взаимосовместимы. Это означает, что их можно перемещать между Hyper-V и Azure. Ниже перечислены три основных отличия, которые иногда удивляют пользователей Hyper-V:

* Azure не предоставляет консольный доступ к виртуальной машине. Невозможно получить доступ к виртуальной машине, пока она не завершит загрузку.
* Виртуальные машины Azure большинства [размеров](../articles/virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) имеют только 1 виртуальный сетевой адаптер. Это означает, что у них может быть только 1 внешний IP-адрес. (Размеры A8 и A9 используют второй сетевой адаптер для обмена данными приложений между экземплярами в ограниченном числе сценариев.)
* Виртуальные машины Azure не поддерживают возможности виртуальных машин Hyper-V 2-го поколения. Дополнительные сведения об этих функциях см. в статьях [Спецификации виртуальных машин для Hyper-V в Windows Server 2012 R2](http://technet.microsoft.com/library/dn592184.aspx) и [Обзор виртуальных машин поколения 2](https://technet.microsoft.com/library/dn282285.aspx).

## <a name="can-these-virtual-machines-use-my-existing-on-premises-networking-infrastructure"></a>Могут ли эти виртуальные машины использовать имеющуюся локальную сетевую инфраструктуру?
Для виртуальных машин, созданных с помощью классической модели развертывания, для расширения имеющейся инфраструктуры можно использовать виртуальную сеть Azure. Этот подход аналогичен настройке филиала. В Azure можно подготавливать виртуальные частные сети (VPN) и управлять ими, а также безопасно подключать их к локальной ИТ-инфраструктуре. Дополнительные сведения см. в статье [Обзор виртуальной сети](../articles/virtual-network/virtual-networks-overview.md).

При создании виртуальной машины необходимо указывать сеть, к которой будет принадлежать эта виртуальная машина. Вы не сможете присоединить существующую виртуальную машину к виртуальной сети. Однако это можно обойти, отключив виртуальный жесткий диск (VHD) от существующей виртуальной машины, а затем использовав его для создания новой виртуальной машины с нужной сетевой конфигурацией.

## <a name="how-can-i-access--my-virtual-machine"></a>Как получить доступ к своей виртуальной машине?
Для входа в виртуальную машину необходимо установить удаленное подключение, используя подключение к удаленному рабочему столу для виртуальной машины Windows или Secure Shell (SSH) для виртуальной машины Linux. Указания см. в таких статьях:

* [Как войти в виртуальную машину под управлением Windows Server](../articles/virtual-machines/windows/classic/connect-logon.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json). Если сервер не настроен как узел сеансов служб удаленных рабочих столов, поддерживается не более 2 параллельных подключений.  
* [Как войти в виртуальную машину под управлением Linux](../articles/virtual-machines/linux/mac-create-ssh-keys.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json). По умолчанию SSH поддерживает не более 10 параллельных подключений. Число доступных параллельных подключений можно увеличить, изменив файл конфигурации.

При возникновении проблем с удаленным рабочим столом или SSH попробуйте установить и использовать расширение [VMAccess](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) для их устранения.

Для виртуальных машин Windows возможны следующие дополнительные варианты:

* На классическом портале Azure найдите виртуальную машину, а затем на панели команд щелкните **Сброс удаленного доступа** .
* Ознакомьтесь со статьей [Устранение неполадок с подключением к удаленному рабочему столу виртуальной машины Windows в службе Azure](../articles/virtual-machines/windows/troubleshoot-rdp-connection.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).
* Используйте удаленное взаимодействие Windows PowerShell для подключения к виртуальной машине или создайте дополнительные конечные точки для подключения других ресурсов к виртуальной машине. Дополнительные сведения см. в статье [Настройка конечных точек виртуальной машины](../articles/virtual-machines/windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).

Если вы знакомы с Hyper-V, то, возможно, ищете инструмент, аналогичный VMConnect. В Azure такой инструмент не предусмотрен, так как не поддерживается консольный доступ к виртуальной машине.

## <a name="can-i-use-the-temporary-disk-the-d-drive-for-windows-or-devsdb1-for-linux-to-store-data"></a>Можно ли использовать временный диск (диск D: для Windows или/dev/sdb1 для Linux) для хранения данных?
Временный диск (диск D: для Windows или/dev/sdb1 для Linux) не следует использовать для хранения данных. Он обеспечивает лишь временное хранение, поэтому вы рискуете потерять данные, которые невозможно восстановить. Это может происходить, когда виртуальная машина перемещается на другой узел. Виртуальная машина может перемещаться, когда возникает необходимость в изменении ее размера, при обновлении узла, при сбое оборудования, а также по другим причинам.

## <a name="how-can-i-change-the-drive-letter-of-the-temporary-disk"></a>Как изменить букву временного диска?
На виртуальной машине Windows можно изменить букву диска, переместив файл подкачки и переназначив буквы дисков, но эти действия нужно выполнять в строго определенном порядке. Указания см. в статье [Изменение буквы диска для временного диска Windows](../articles/virtual-machines/windows/change-drive-letter.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).

## <a name="how-can-i-upgrade-the-guest-operating-system"></a>Как обновить операционную систему на виртуальной машине?
Термин «обновление» обычно означает переход на более новую версию операционной системы с сохранением прежнего оборудования. В случае виртуальных машин Azure процесс перехода на более новую версию для ОС Linux и Windows выполняется по-разному.

* Для виртуальных машин Linux используйте инструменты управления пакетами и процедуры, подходящие для конкретного дистрибутива.
* Для виртуальной машины Windows необходимо осуществить миграцию сервера, например, с помощью средств миграции Windows Server. Не пытайтесь обновить гостевую ОС при размещении виртуальной машины в Azure. Эта операция не поддерживается из-за риска потери доступа к виртуальной машине. При возникновении проблем во время обновления вы можете потерять возможность запуска сеанса удаленного рабочего стола для устранения проблем.

Общие сведения об инструментах и процедурах для миграции Windows Server см. в статье [Перенос ролей и компонентов на Windows Server](http://go.microsoft.com/fwlink/p/?LinkId=396940).

## <a name="whats-the-default-user-name-and-password-on-the-virtual-machine"></a>Каковы имя пользователя и пароль по умолчанию на виртуальной машине?
Образы, предоставляемые Azure, не имеют предустановленных имени пользователя и пароля. При создании виртуальной машины с помощью одного из этих образов, необходимо указать имя пользователя и пароль, которые будут использоваться для входа в виртуальную машину.

Если вы забыли имя пользователя или пароль, то при наличии агента виртуальных машин для устранения проблемы можно установить расширение [VMAccess](../articles/virtual-machines/windows/extensions-features.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) и воспользоваться им.

Дополнительная информация

* Для образов Linux при использовании классического портала Azure имя пользователя по умолчанию — azureuser, но это имя можно изменить, если в качестве способа создания виртуальной машины использовать не "Быстрое создание", а "Из коллекции". Кроме того, при использовании параметра «Из коллекции» вы можете указать, что будет использоваться для входа: пароль, ключ SSH или и то, и другое. Учетная запись пользователя представляет собой непривилегированного пользователя, имеющего доступ sudo на выполнение привилегированных команд. Учетная запись root отключена.
* Для образов Windows необходимо предоставить имя пользователя и пароль при создании виртуальной машины. Учетная запись добавляется в группу администраторов.

## <a name="can-azure-run-anti-virus-on-my-virtual-machines"></a>Может ли Azure запускать антивирусные программы на моей виртуальной машине?
Azure предлагает несколько вариантов решений для защиты от вирусов, но вы должны будете управлять ими. Например, может потребоваться отдельная подписка для антивредоносного ПО и вам придется решать, когда запускать сканирование и устанавливать обновления. Вы можете добавить антивирусную поддержку с расширением виртуальной машины для Microsoft Antimalware, Symantec Endpoint Protection или TrendMicro Deep Security Agent при создании виртуальной машины Windows или позднее. Расширения Symantec и TrendMicro позволяют использовать бесплатную пробную подписку на ограниченное время или существующую корпоративную подписку. Microsoft Antimalware предоставляется бесплатно. Дополнительные сведения см. в статье:

* [Установка и настройка Symantec Endpoint Protection на виртуальной машине Azure](http://go.microsoft.com/fwlink/p/?LinkId=404207)
* [Установка и настройка Trend Micro Deep Security как услуги на ВМ Azure](http://go.microsoft.com/fwlink/p/?LinkId=404206)
* [Развертывание решений по защите от вредоносных программ на виртуальных машинах Azure](https://azure.microsoft.com/blog/2014/05/13/deploying-antimalware-solutions-on-azure-virtual-machines/)

## <a name="what-are-my-options-for-backup-and-recovery"></a>Каковы мои возможности в отношении резервного копирования и восстановления?
В определенных регионах служба архивации Azure доступна в качестве предварительной версии. Дополнительные сведения см. в статье [Архивация виртуальных машин Azure](../articles/backup/backup-azure-vms.md). Доступны другие решения от сертифицированных партнеров. Чтобы узнать, что сейчас доступно, выполните поиск в Azure Marketplace.

Можно также использовать возможности моментальных снимков хранилища больших двоичных объектов. Для этого необходимо завершить работу виртуальной машины перед выполнением какой-либо операции на основе моментального снимка большого двоичного объекта. Это сохраняет ожидающие операции записи данных и поддерживает целостность файловой системы.

## <a name="how-does-azure-charge-for-my-vm"></a>Каким образом Azure взимает плату за виртуальную машину?
Azure взимает почасовую оплату на основе размера и операционной системы виртуальной машины. При частичном использовании Azure взимает плату только за минуты использования. Если виртуальная машина создается из образа виртуальной машины, содержащего определенное предустановленное программное обеспечение, может взиматься дополнительная почасовая плата за ПО. Azure взимает отдельную плату за хранилище для операционной системы и дисков данных виртуальной машины. Временное хранилище дисков предоставляется бесплатно.

Оплата взимается, когда виртуальная машина находится в состоянии «Работает» или «Остановлена», и не взимается, когда она находится в состоянии «Остановлена (освобождена)». Для перевода виртуальной машины в состояние «Остановлена (освобождена)» выполните одно из следующих действий.

* Завершите работу виртуальной машины или удалите ее на классическом портале Azure.
* Используйте командлет Stop-AzureVM в модуле Azure PowerShell.
* Используйте операцию «Завершить работу роли» в REST API управления службами и укажите параметр StoppedDeallocated для элемента PostShutdownAction.

Дополнительные сведения см. на странице [цен на виртуальные машины](https://azure.microsoft.com/pricing/details/virtual-machines/).

## <a name="will-azure-reboot-my-vm-for-maintenance"></a>Будет ли Azure перезагружать мою виртуальную машину для обслуживания?
Периодически Azure будет перезагружать вашу виртуальную машину в рамках регулярных плановых обновлений в центрах обработки данных Azure.

Кроме того, могут происходить случаи внепланового обслуживания, когда Azure обнаруживает серьезные проблемы с оборудованием, оказывающие воздействие на вашу виртуальную машину. В случае незапланированных событий Azure автоматически переносит виртуальную машину на работоспособный узел и перезапускает ее.

Для любой автономной виртуальной машины (которая не входит в группу доступности) Azure уведомляет администратора службы подписки по почте по крайней мере за неделю до планового обслуживания, так как виртуальная машина может быть перезагружена во время обновления. Может возникнуть простой приложений, работающих на виртуальной машине.

Для просмотра журналов перезагрузки при перезагрузке из-за планового обслуживания можно использовать классический портал Azure или Azure PowerShell. Для получения дополнительных сведений [просмотрите журналы перезагрузки виртуальной машины](https://azure.microsoft.com/blog/2015/04/01/viewing-vm-reboot-logs/).

Для обеспечения избыточности поместите две или более одинаково настроенных виртуальных машины в одну группу доступности. Это гарантирует, что по крайней мере одна виртуальная машина будет доступна во время планового или внепланового обслуживания. Azure гарантирует определенные уровни доступности виртуальных машин для этой конфигурации. Дополнительные сведения см. в статье [Управление доступностью виртуальных машин](../articles/virtual-machines/windows/manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).

## <a name="additional-resources"></a>Дополнительные ресурсы
[О виртуальных машинах Azure](../articles/virtual-machines/virtual-machines-linux-about.md)

[Создание виртуальных машин Linux и управление ими с помощью Azure CLI](../articles/virtual-machines/linux/tutorial-manage-vm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

[Создание виртуальных машин Windows и управление ими с помощью Azure PowerShell](../articles/virtual-machines/windows/tutorial-manage-vm.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

