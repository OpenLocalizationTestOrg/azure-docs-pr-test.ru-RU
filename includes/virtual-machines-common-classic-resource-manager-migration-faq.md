# <a name="frequently-asked-questions-about-classic-to-azure-resource-manager-migration"></a><span data-ttu-id="8c239-101">Часто задаваемые вопросы о миграции из классической модели в модель Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="8c239-101">Frequently asked questions about classic to Azure Resource Manager migration</span></span>

## <a name="does-this-migration-plan-affect-any-of-my-existing-services-or-applications-that-run-on-azure-virtual-machines"></a><span data-ttu-id="8c239-102">Влияет ли этот план миграции на существующие службы или приложения, которые выполняются на виртуальных машинах Azure?</span><span class="sxs-lookup"><span data-stu-id="8c239-102">Does this migration plan affect any of my existing services or applications that run on Azure virtual machines?</span></span> 

<span data-ttu-id="8c239-103">Нет.</span><span class="sxs-lookup"><span data-stu-id="8c239-103">No.</span></span> <span data-ttu-id="8c239-104">Виртуальные машины (классические) — это службы, которые полностью поддерживаются в общедоступной версии.</span><span class="sxs-lookup"><span data-stu-id="8c239-104">The VMs (classic) are fully supported services in general availability.</span></span> <span data-ttu-id="8c239-105">Можно продолжать использовать эти ресурсы, чтобы расширить занимаемый объем в Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8c239-105">You can continue to use these resources to expand your footprint on Microsoft Azure.</span></span>

## <a name="what-happens-to-my-vms-if-i-dont-plan-on-migrating-in-the-near-future"></a><span data-ttu-id="8c239-106">Что произойдет с моей виртуальной машиной, если я не планирую перенос в ближайшем будущем?</span><span class="sxs-lookup"><span data-stu-id="8c239-106">What happens to my VMs if I don’t plan on migrating in the near future?</span></span> 

<span data-ttu-id="8c239-107">Мы не прекратим предоставлять поддержку существующих интерфейсов API и ресурсов классической модели.</span><span class="sxs-lookup"><span data-stu-id="8c239-107">We are not deprecating the existing classic APIs and resource model.</span></span> <span data-ttu-id="8c239-108">Мы хотим максимально упростить миграцию с помощью расширенных функций, доступных в модели развертывания с помощью Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8c239-108">We want to make migration easy, considering the advanced features that are available in the Resource Manager deployment model.</span></span> <span data-ttu-id="8c239-109">Настоятельно рекомендуется рассмотреть [некоторые улучшения](../articles/azure-resource-manager/resource-manager-deployment-model.md) , добавленные в Resource Manager как часть IaaS.</span><span class="sxs-lookup"><span data-stu-id="8c239-109">We highly recommend that you review [some of the advancements](../articles/azure-resource-manager/resource-manager-deployment-model.md) that are part of IaaS under Resource Manager.</span></span>

## <a name="what-does-this-migration-plan-mean-for-my-existing-tooling"></a><span data-ttu-id="8c239-110">Как изменятся существующие средства с этим планом миграции?</span><span class="sxs-lookup"><span data-stu-id="8c239-110">What does this migration plan mean for my existing tooling?</span></span> 

<span data-ttu-id="8c239-111">Одним из важнейших изменений, которое следует учесть в плане миграции, является обновление набора инструментов до модели развертывания Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8c239-111">Updating your tooling to the Resource Manager deployment model is one of the most important changes that you have to account for in your migration plans.</span></span>

## <a name="how-long-will-the-management-plane-downtime-be"></a><span data-ttu-id="8c239-112">Сколько времени продлится простой плоскости управления?</span><span class="sxs-lookup"><span data-stu-id="8c239-112">How long will the management-plane downtime be?</span></span> 

<span data-ttu-id="8c239-113">Это зависит от числа переносимых ресурсов.</span><span class="sxs-lookup"><span data-stu-id="8c239-113">It depends on the number of resources that are being migrated.</span></span> <span data-ttu-id="8c239-114">В случае развертываний небольшого размера (с несколькими десятками виртуальных машин) вся миграция должна занимать не больше часа.</span><span class="sxs-lookup"><span data-stu-id="8c239-114">For smaller deployments (a few tens of VMs), the whole migration should take less than an hour.</span></span> <span data-ttu-id="8c239-115">В случае крупномасштабных развертываний (с сотнями виртуальных машин) миграция может длиться несколько часов.</span><span class="sxs-lookup"><span data-stu-id="8c239-115">For large-scale deployments (hundreds of VMs), the migration can take a few hours.</span></span>

## <a name="can-i-roll-back-after-my-migrating-resources-are-committed-in-resource-manager"></a><span data-ttu-id="8c239-116">Можно ли выполнить откат после фиксации переносимых ресурсов в Resource Manager?</span><span class="sxs-lookup"><span data-stu-id="8c239-116">Can I roll back after my migrating resources are committed in Resource Manager?</span></span> 

<span data-ttu-id="8c239-117">Миграцию можно прервать, пока ресурсы находятся в состоянии подготовки.</span><span class="sxs-lookup"><span data-stu-id="8c239-117">You can abort your migration as long as the resources are in the prepared state.</span></span> <span data-ttu-id="8c239-118">Откат после миграции ресурсов с фиксацией не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="8c239-118">Rollback is not supported after the resources have been successfully migrated through the commit operation.</span></span>

## <a name="can-i-roll-back-my-migration-if-the-commit-operation-fails"></a><span data-ttu-id="8c239-119">Можно ли откатить миграцию при сбое фиксации?</span><span class="sxs-lookup"><span data-stu-id="8c239-119">Can I roll back my migration if the commit operation fails?</span></span> 

<span data-ttu-id="8c239-120">Прервать миграцию при сбое фиксации нельзя.</span><span class="sxs-lookup"><span data-stu-id="8c239-120">You cannot abort migration if the commit operation fails.</span></span> <span data-ttu-id="8c239-121">Все операции миграции, включая фиксацию, являются идемпотентными.</span><span class="sxs-lookup"><span data-stu-id="8c239-121">All migration operations, including the commit operation, are idempotent.</span></span> <span data-ttu-id="8c239-122">Поэтому рекомендуется повторить операцию спустя некоторое время.</span><span class="sxs-lookup"><span data-stu-id="8c239-122">So we recommend that you retry the operation after a short time.</span></span> <span data-ttu-id="8c239-123">Если ошибка все равно возникает, отправьте запрос в службу поддержки или создайте запись с тегом ClassicIaaSMigration на нашем [форуме о виртуальных машинах](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows).</span><span class="sxs-lookup"><span data-stu-id="8c239-123">If you still face an error, create a support ticket or create a forum post with the ClassicIaaSMigration tag on our [VM forum](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows).</span></span>

## <a name="do-i-have-to-buy-another-express-route-circuit-if-i-have-to-use-iaas-under-resource-manager"></a><span data-ttu-id="8c239-124">Нужно ли приобретать еще один канал ExpressRoute, если нужно использовать ресурсы IaaS в модели Resource Manager?</span><span class="sxs-lookup"><span data-stu-id="8c239-124">Do I have to buy another express route circuit if I have to use IaaS under Resource Manager?</span></span> 

<span data-ttu-id="8c239-125">Нет.</span><span class="sxs-lookup"><span data-stu-id="8c239-125">No.</span></span> <span data-ttu-id="8c239-126">Мы недавно включили [перемещение каналов ExpressRoute из классической модели развертывания в модель развертывания с помощью Resource Manager](../articles/expressroute/expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="8c239-126">We recently enabled [moving ExpressRoute circuits from the classic to the Resource Manager deployment model](../articles/expressroute/expressroute-move.md).</span></span> <span data-ttu-id="8c239-127">Поэтому при наличии существующего канала ExpressRoute не нужно приобретать еще один.</span><span class="sxs-lookup"><span data-stu-id="8c239-127">You don’t have to buy a new ExpressRoute circuit if you already have one.</span></span>

## <a name="what-if-i-had-configured-role-based-access-control-policies-for-my-classic-iaas-resources"></a><span data-ttu-id="8c239-128">Что произойдет, если для классических ресурсов IaaS настроено управление доступом на основе ролей?</span><span class="sxs-lookup"><span data-stu-id="8c239-128">What if I had configured Role-Based Access Control policies for my classic IaaS resources?</span></span> 

<span data-ttu-id="8c239-129">Во время миграции ресурсы преобразуются из классической модели в модель Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8c239-129">During migration, the resources transform from classic to Resource Manager.</span></span> <span data-ttu-id="8c239-130">Поэтому рекомендуется спланировать обновления политики RBAC, которые следует применить после миграции.</span><span class="sxs-lookup"><span data-stu-id="8c239-130">So we recommend that you plan the RBAC policy updates that need to happen after migration.</span></span>

## <a name="i-backed-up-my-classic-vms-in-a-backup-vault-can-i-migrate-my-vms-from-classic-mode-to-resource-manager-mode-and-protect-them-in-a-recovery-services-vault"></a><span data-ttu-id="8c239-131">Резервные копии классических виртуальных машин находятся в хранилище службы архивации.</span><span class="sxs-lookup"><span data-stu-id="8c239-131">I backed up my classic VMs in a Backup vault.</span></span> <span data-ttu-id="8c239-132">Можно ли переключить виртуальные машины из классического режима в режим Resource Manager и защитить их в хранилище служб восстановления?</span><span class="sxs-lookup"><span data-stu-id="8c239-132">Can I migrate my VMs from classic mode to Resource Manager mode and protect them in a Recovery Services vault?</span></span> 

<span data-ttu-id="8c239-133">Точки восстановления классических виртуальных машин в хранилище службы архивации не будут автоматически перемещаться в хранилище служб восстановления, если вы переключите виртуальные машины из классического режима в режим Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8c239-133">Classic VM recovery points in a backup vault don't automatically migrate to a Recovery Services vault when you move the VM from classic to Resource Manager mode.</span></span> <span data-ttu-id="8c239-134">Чтобы переключить резервные копии виртуальных машин, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="8c239-134">Follow these steps to transfer your VM backups:</span></span>

1. <span data-ttu-id="8c239-135">В хранилище службы архивации на вкладке **Защищенные элементы** выберите нужную виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="8c239-135">In the Backup vault, go to the **Protected Items** tab and select the VM.</span></span> <span data-ttu-id="8c239-136">Щелкните [Остановить защиту](../articles/backup/backup-azure-manage-vms-classic.md#stop-protecting-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="8c239-136">Click [Stop Protection](../articles/backup/backup-azure-manage-vms-classic.md#stop-protecting-virtual-machines).</span></span> <span data-ttu-id="8c239-137">*Снимите* флажок **Удаление связанных архивируемых данных**.</span><span class="sxs-lookup"><span data-stu-id="8c239-137">Leave *Delete associated backup data* option **unchecked**.</span></span>
2. <span data-ttu-id="8c239-138">Удалите расширение резервного копирования или создания моментальных снимков с виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="8c239-138">Delete the backup/snapshot extension from the VM.</span></span>
3. <span data-ttu-id="8c239-139">Теперь эту виртуальную машину можно перевести из классического режима в режим Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8c239-139">Migrate the virtual machine from classic mode to Resource Manager mode.</span></span> <span data-ttu-id="8c239-140">Сведения о сети и хранилище, связанные с виртуальной машиной, также следует перенести в режим Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="8c239-140">Make sure the storage and network information corresponding to the virtual machine is also migrated to Resource Manager mode.</span></span>
4. <span data-ttu-id="8c239-141">Создайте хранилище служб восстановления и настройте резервное копирование для перенесенной виртуальной машины. Это можно сделать с помощью действия **Резервное копирование** в верхней части панели мониторинга хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c239-141">Create a Recovery Services vault and configure backup on the migrated virtual machine using **Backup** action on top of vault dashboard.</span></span> <span data-ttu-id="8c239-142">Дополнительные сведения об архивации виртуальных машин в хранилище службы восстановления см. в статье [Первое знакомство. Защита виртуальных машин в хранилище служб восстановления](../articles/backup/backup-azure-vms-first-look-arm.md).</span><span class="sxs-lookup"><span data-stu-id="8c239-142">For detailed information on backing up a VM to a Recovery Services vault, see the article, [Protect Azure VMs with a Recovery Services vault](../articles/backup/backup-azure-vms-first-look-arm.md).</span></span>

## <a name="can-i-validate-my-subscription-or-resources-to-see-if-theyre-capable-of-migration"></a><span data-ttu-id="8c239-143">Можно ли проверить подписку или ресурсы, чтобы узнать, подходят ли они для миграции?</span><span class="sxs-lookup"><span data-stu-id="8c239-143">Can I validate my subscription or resources to see if they're capable of migration?</span></span> 

<span data-ttu-id="8c239-144">Да.</span><span class="sxs-lookup"><span data-stu-id="8c239-144">Yes.</span></span> <span data-ttu-id="8c239-145">На первом этапе подготовки к поддерживаемой платформой миграции проверяется, можно ли перенести ресурсы.</span><span class="sxs-lookup"><span data-stu-id="8c239-145">In the platform-supported migration option, the first step in preparing for migration is to validate that the resources are capable of migration.</span></span> <span data-ttu-id="8c239-146">В случае сбоя операции проверки вы получите сообщения о всех причинах, из-за которых невозможно выполнить миграцию.</span><span class="sxs-lookup"><span data-stu-id="8c239-146">In case the validate operation fails, you receive messages for all the reasons the migration cannot be completed.</span></span>

## <a name="what-happens-if-i-run-into-a-quota-error-while-preparing-the-iaas-resources-for-migration"></a><span data-ttu-id="8c239-147">Что произойдет, если при подготовке ресурсов IaaS к миграции произойдет ошибка, связанная с квотой?</span><span class="sxs-lookup"><span data-stu-id="8c239-147">What happens if I run into a quota error while preparing the IaaS resources for migration?</span></span> 

<span data-ttu-id="8c239-148">Рекомендуется прервать миграцию и отправить в службу поддержки запрос на увеличение квот в регионе, в который переносятся виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="8c239-148">We recommend that you abort your migration and then log a support request to increase the quotas in the region where you are migrating the VMs.</span></span> <span data-ttu-id="8c239-149">После утверждения запроса на увеличение квоты начните этапы миграции заново.</span><span class="sxs-lookup"><span data-stu-id="8c239-149">After the quota request is approved, you can start executing the migration steps again.</span></span>

## <a name="how-do-i-report-an-issue"></a><span data-ttu-id="8c239-150">Как сообщить о проблеме?</span><span class="sxs-lookup"><span data-stu-id="8c239-150">How do I report an issue?</span></span> 

<span data-ttu-id="8c239-151">Публикуйте проблемы и вопросы, связанные с переносом, на нашем [форуме о виртуальных машинах](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows), указывая ключевое слово ClassicIaaSMigration.</span><span class="sxs-lookup"><span data-stu-id="8c239-151">Post your issues and questions about migration to our [VM forum](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows), with the keyword ClassicIaaSMigration.</span></span> <span data-ttu-id="8c239-152">Рекомендуется публиковать на этом форуме все свои вопросы.</span><span class="sxs-lookup"><span data-stu-id="8c239-152">We recommend posting all your questions on this forum.</span></span> <span data-ttu-id="8c239-153">Если у вас есть контракт на техническую поддержку, то вы всегда можете зарегистрировать запрос в службу поддержки.</span><span class="sxs-lookup"><span data-stu-id="8c239-153">If you have a support contract, you're welcome to log a support ticket as well.</span></span>

## <a name="what-if-i-dont-like-the-names-of-the-resources-that-the-platform-chose-during-migration"></a><span data-ttu-id="8c239-154">Что делать, если мне не нравятся имена, которые платформа выбрала для ресурсов во время миграции?</span><span class="sxs-lookup"><span data-stu-id="8c239-154">What if I don't like the names of the resources that the platform chose during migration?</span></span> 

<span data-ttu-id="8c239-155">Имена всех ресурсов, которые указаны явным образом в классической модели развертывания, при миграции будут сохранены.</span><span class="sxs-lookup"><span data-stu-id="8c239-155">All the resources that you explicitly provide names for in the classic deployment model are retained during migration.</span></span> <span data-ttu-id="8c239-156">В некоторых случаях будут создаваться новые ресурсы.</span><span class="sxs-lookup"><span data-stu-id="8c239-156">In some cases, new resources are created.</span></span> <span data-ttu-id="8c239-157">Например, для каждой виртуальной машины создается сетевой интерфейс.</span><span class="sxs-lookup"><span data-stu-id="8c239-157">For example: a network interface is created for every VM.</span></span> <span data-ttu-id="8c239-158">В данный момент возможность управления именами этих новых ресурсов, создаваемых во время миграции, не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="8c239-158">We currently don't support the ability to control the names of these new resources created during migration.</span></span> <span data-ttu-id="8c239-159">Проголосуйте за эту функцию на [форуме отзывов об Azure](http://feedback.azure.com).</span><span class="sxs-lookup"><span data-stu-id="8c239-159">Log your votes for this feature on the [Azure feedback forum](http://feedback.azure.com).</span></span>

## <a name="can-i-migrate-expressroute-circuits-used-across-subscriptions-with-authorization-links"></a><span data-ttu-id="8c239-160">Можно ли перенести каналы ExpressRoute, используемые в подписках со ссылками авторизации?</span><span class="sxs-lookup"><span data-stu-id="8c239-160">Can I migrate ExpressRoute circuits used across subscriptions with authorization links?</span></span> 

<span data-ttu-id="8c239-161">Каналы ExpressRoute, использующие ссылки авторизации между подписками, невозможно перенести автоматически без простоев.</span><span class="sxs-lookup"><span data-stu-id="8c239-161">ExpressRoute circuits which use cross-subscription authorization links cannot be migrated automatically without downtime.</span></span> <span data-ttu-id="8c239-162">У нас есть рекомендации о том, как их можно перенести вручную.</span><span class="sxs-lookup"><span data-stu-id="8c239-162">We have guidance on how these can be migrated using manual steps.</span></span> <span data-ttu-id="8c239-163">Дополнительные сведения см. в статье [Перенос каналов ExpressRoute и связанных виртуальных сетей из классической модели развертывания на модель Resource Manager](../articles/expressroute/expressroute-migration-classic-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="8c239-163">See [Migrate ExpressRoute circuits and associated virtual networks from the classic to the Resource Manager deployment model](../articles/expressroute/expressroute-migration-classic-resource-manager.md) for steps and more information.</span></span>

## <a name="i-got-a-message-vm-is-reporting-the-overall-agent-status-as-not-ready-hence-the-vm-cannot-be-migrated-ensure-that-the-vm-agent-is-reporting-overall-agent-status-as-ready-or-vm-contains-extension-whose-status-is-not-being-reported-from-the-vm-hence-this-vm-cannot-be-migrated-"></a><span data-ttu-id="8c239-164">Получено сообщение *"VM is reporting the overall agent status as Not Ready. Hence, the VM cannot be migrated. Ensure that the VM Agent is reporting overall agent status as Ready"* (Виртуальная машина сообщает, что агент не готов. Поэтому ее нельзя перенести. Убедитесь, что агент виртуальной машины сообщает, что агент находится в состоянии готовности) или "VM contains Extension whose Status is not being reported from the VM.</span><span class="sxs-lookup"><span data-stu-id="8c239-164">I got a message *"VM is reporting the overall agent status as Not Ready. Hence, the VM cannot be migrated. Ensure that the VM Agent is reporting overall agent status as Ready"* or *"VM contains Extension whose Status is not being reported from the VM.</span></span> <span data-ttu-id="8c239-165">Hence, this VM cannot be migrated" (Виртуальная машина содержит расширение, о состоянии которого она не сообщает. Поэтому виртуальную машину нельзя перенести).</span><span class="sxs-lookup"><span data-stu-id="8c239-165">Hence, this VM cannot be migrated."</span></span> *

<span data-ttu-id="8c239-166">Это сообщение отображается в том случае, когда у виртуальной машины нет исходящего подключения к Интернету.</span><span class="sxs-lookup"><span data-stu-id="8c239-166">This message is received when the VM does not have outbound connectivity to the internet.</span></span> <span data-ttu-id="8c239-167">Агент виртуальной машины использует исходящее подключение для обращения к учетной записи хранения Azure, чтобы обновлять состояние агента каждые пять минут.</span><span class="sxs-lookup"><span data-stu-id="8c239-167">The VM agent uses outbound connectivity to reach the Azure storage account for updating the agent status every five minutes.</span></span>
