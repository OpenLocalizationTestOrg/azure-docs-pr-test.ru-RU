# <a name="frequently-asked-questions-about-classic-to-azure-resource-manager-migration"></a>Часто задаваемые вопросы о миграции из классической модели в модель Azure Resource Manager

## <a name="does-this-migration-plan-affect-any-of-my-existing-services-or-applications-that-run-on-azure-virtual-machines"></a>Влияет ли этот план миграции на существующие службы или приложения, которые выполняются на виртуальных машинах Azure? 

Нет. Виртуальные машины (классические) — это службы, которые полностью поддерживаются в общедоступной версии. Можно продолжать использовать эти ресурсы, чтобы расширить занимаемый объем в Microsoft Azure.

## <a name="what-happens-to-my-vms-if-i-dont-plan-on-migrating-in-the-near-future"></a>Что произойдет с моей виртуальной машиной, если я не планирую перенос в ближайшем будущем? 

Мы не прекратим предоставлять поддержку существующих интерфейсов API и ресурсов классической модели. Мы хотим максимально упростить миграцию с помощью расширенных функций, доступных в модели развертывания с помощью Resource Manager. Настоятельно рекомендуется рассмотреть [некоторые улучшения](../articles/azure-resource-manager/resource-manager-deployment-model.md) , добавленные в Resource Manager как часть IaaS.

## <a name="what-does-this-migration-plan-mean-for-my-existing-tooling"></a>Как изменятся существующие средства с этим планом миграции? 

Одним из важнейших изменений, которое следует учесть в плане миграции, является обновление набора инструментов до модели развертывания Resource Manager.

## <a name="how-long-will-the-management-plane-downtime-be"></a>Сколько времени продлится простой плоскости управления? 

Это зависит от числа переносимых ресурсов. В случае развертываний небольшого размера (с несколькими десятками виртуальных машин) вся миграция должна занимать не больше часа. В случае крупномасштабных развертываний (с сотнями виртуальных машин) миграция может длиться несколько часов.

## <a name="can-i-roll-back-after-my-migrating-resources-are-committed-in-resource-manager"></a>Можно ли выполнить откат после фиксации переносимых ресурсов в Resource Manager? 

Миграцию можно прервать, пока ресурсы находятся в состоянии подготовки. Откат после миграции ресурсов с фиксацией не поддерживается.

## <a name="can-i-roll-back-my-migration-if-the-commit-operation-fails"></a>Можно ли откатить миграцию при сбое фиксации? 

Прервать миграцию при сбое фиксации нельзя. Все операции миграции, включая фиксацию, являются идемпотентными. Поэтому рекомендуется повторить операцию спустя некоторое время. Если ошибка все равно возникает, отправьте запрос в службу поддержки или создайте запись с тегом ClassicIaaSMigration на нашем [форуме о виртуальных машинах](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows).

## <a name="do-i-have-to-buy-another-express-route-circuit-if-i-have-to-use-iaas-under-resource-manager"></a>Нужно ли приобретать еще один канал ExpressRoute, если нужно использовать ресурсы IaaS в модели Resource Manager? 

Нет. Мы недавно включили [перемещение каналов ExpressRoute из классической модели развертывания в модель развертывания с помощью Resource Manager](../articles/expressroute/expressroute-move.md). Поэтому при наличии существующего канала ExpressRoute не нужно приобретать еще один.

## <a name="what-if-i-had-configured-role-based-access-control-policies-for-my-classic-iaas-resources"></a>Что произойдет, если для классических ресурсов IaaS настроено управление доступом на основе ролей? 

Во время миграции ресурсы преобразуются из классической модели в модель Resource Manager. Поэтому рекомендуется спланировать обновления политики RBAC, которые следует применить после миграции.

## <a name="i-backed-up-my-classic-vms-in-a-backup-vault-can-i-migrate-my-vms-from-classic-mode-to-resource-manager-mode-and-protect-them-in-a-recovery-services-vault"></a>Резервные копии классических виртуальных машин находятся в хранилище службы архивации. Можно ли переключить виртуальные машины из классического режима в режим Resource Manager и защитить их в хранилище служб восстановления? 

Точки восстановления классических виртуальных машин в хранилище службы архивации не будут автоматически перемещаться в хранилище служб восстановления, если вы переключите виртуальные машины из классического режима в режим Resource Manager. Чтобы переключить резервные копии виртуальных машин, выполните следующие действия.

1. В хранилище службы архивации на вкладке **Защищенные элементы** выберите нужную виртуальную машину. Щелкните [Остановить защиту](../articles/backup/backup-azure-manage-vms-classic.md#stop-protecting-virtual-machines). *Снимите* флажок **Удаление связанных архивируемых данных**.
2. Удалите расширение резервного копирования или создания моментальных снимков с виртуальной машины.
3. Теперь эту виртуальную машину можно перевести из классического режима в режим Resource Manager. Сведения о сети и хранилище, связанные с виртуальной машиной, также следует перенести в режим Resource Manager.
4. Создайте хранилище служб восстановления и настройте резервное копирование для перенесенной виртуальной машины. Это можно сделать с помощью действия **Резервное копирование** в верхней части панели мониторинга хранилища. Дополнительные сведения об архивации виртуальных машин в хранилище службы восстановления см. в статье [Первое знакомство. Защита виртуальных машин в хранилище служб восстановления](../articles/backup/backup-azure-vms-first-look-arm.md).

## <a name="can-i-validate-my-subscription-or-resources-to-see-if-theyre-capable-of-migration"></a>Можно ли проверить подписку или ресурсы, чтобы узнать, подходят ли они для миграции? 

Да. На первом этапе подготовки к поддерживаемой платформой миграции проверяется, можно ли перенести ресурсы. В случае сбоя операции проверки вы получите сообщения о всех причинах, из-за которых невозможно выполнить миграцию.

## <a name="what-happens-if-i-run-into-a-quota-error-while-preparing-the-iaas-resources-for-migration"></a>Что произойдет, если при подготовке ресурсов IaaS к миграции произойдет ошибка, связанная с квотой? 

Рекомендуется прервать миграцию и отправить в службу поддержки запрос на увеличение квот в регионе, в который переносятся виртуальные машины. После утверждения запроса на увеличение квоты начните этапы миграции заново.

## <a name="how-do-i-report-an-issue"></a>Как сообщить о проблеме? 

Публикуйте проблемы и вопросы, связанные с переносом, на нашем [форуме о виртуальных машинах](https://social.msdn.microsoft.com/Forums/azure/home?forum=WAVirtualMachinesforWindows), указывая ключевое слово ClassicIaaSMigration. Рекомендуется публиковать на этом форуме все свои вопросы. Если у вас есть контракт на техническую поддержку, то вы всегда можете зарегистрировать запрос в службу поддержки.

## <a name="what-if-i-dont-like-the-names-of-the-resources-that-the-platform-chose-during-migration"></a>Что делать, если мне не нравятся имена, которые платформа выбрала для ресурсов во время миграции? 

Имена всех ресурсов, которые указаны явным образом в классической модели развертывания, при миграции будут сохранены. В некоторых случаях будут создаваться новые ресурсы. Например, для каждой виртуальной машины создается сетевой интерфейс. В данный момент возможность управления именами этих новых ресурсов, создаваемых во время миграции, не поддерживается. Проголосуйте за эту функцию на [форуме отзывов об Azure](http://feedback.azure.com).

## <a name="can-i-migrate-expressroute-circuits-used-across-subscriptions-with-authorization-links"></a>Можно ли перенести каналы ExpressRoute, используемые в подписках со ссылками авторизации? 

Каналы ExpressRoute, использующие ссылки авторизации между подписками, невозможно перенести автоматически без простоев. У нас есть рекомендации о том, как их можно перенести вручную. Дополнительные сведения см. в статье [Перенос каналов ExpressRoute и связанных виртуальных сетей из классической модели развертывания на модель Resource Manager](../articles/expressroute/expressroute-migration-classic-resource-manager.md).

## <a name="i-got-a-message-vm-is-reporting-the-overall-agent-status-as-not-ready-hence-the-vm-cannot-be-migrated-ensure-that-the-vm-agent-is-reporting-overall-agent-status-as-ready-or-vm-contains-extension-whose-status-is-not-being-reported-from-the-vm-hence-this-vm-cannot-be-migrated-"></a>Получено сообщение *"VM is reporting the overall agent status as Not Ready. Hence, the VM cannot be migrated. Ensure that the VM Agent is reporting overall agent status as Ready"* (Виртуальная машина сообщает, что агент не готов. Поэтому ее нельзя перенести. Убедитесь, что агент виртуальной машины сообщает, что агент находится в состоянии готовности) или "VM contains Extension whose Status is not being reported from the VM. Hence, this VM cannot be migrated" (Виртуальная машина содержит расширение, о состоянии которого она не сообщает. Поэтому виртуальную машину нельзя перенести). *

Это сообщение отображается в том случае, когда у виртуальной машины нет исходящего подключения к Интернету. Агент виртуальной машины использует исходящее подключение для обращения к учетной записи хранения Azure, чтобы обновлять состояние агента каждые пять минут.
