## <a name="os-config"></a>Добавьте IP адресов tooa ВМ операционной системы

Подключите и tooa входа в систему виртуальной Машины, созданные с помощью нескольких частных IP-адресов. Необходимо вручную добавить все hello частных IP-адресов (включая hello первичный), которые добавлены toohello виртуальной Машины. Выполните следующие шаги для вашей операционной системы виртуальной Машины hello.

### <a name="windows"></a>Windows

1. В командной строке введите *ipconfig /all*.  Вы видите только hello *основной* частный IP-адрес (через службу DHCP).
2. Тип *ncpa.cpl* в hello tooopen командную строку hello **сетевые подключения** окна.
3. Открыть свойства hello соответствующий адаптер hello: **подключение по локальной сети**.
4. Дважды щелкните "Протокол IP версии 4 (IPv4)".
5. Выберите **hello использовать следующий IP-адрес** и введите hello следующие значения:

    * **IP-адрес**: Введите hello *основной* частный IP-адрес
    * **Маска подсети**— в зависимости от своей подсети. Например, если hello подсеть — / 24 подсети, а затем hello подсети 255.255.255.0 — маска.
    * **Шлюз по умолчанию**: hello первый IP-адрес в подсети hello. Если в подсети 10.0.0.0/24, IP-адрес шлюза hello — 10.0.0.1.
    * Нажмите кнопку **hello использовать следующие адреса DNS-серверов** и введите hello следующие значения:
        * **Предпочитаемый DNS-сервер.** Введите 168.63.129.16, если собственный DNS-сервер не используется.  При использовании собственного DNS-сервера введите hello IP-адрес сервера.
    * Нажмите кнопку hello **Дополнительно** и добавьте дополнительные IP-адреса. Добавьте каждый hello получателя частные IP-адреса перечисленных в шаге 8 toohello сетевого Адаптера с одной подсети, указанный для основного IP-адреса hello hello.
        >[!WARNING] 
        >Если не следовать приведенным выше шагам hello правильно, можно потерять tooyour подключения к виртуальной Машине. Убедитесь, что перед продолжением точна hello сведения, введенные на шаге 5.

    * Нажмите кнопку **ОК** tooclose параметры hello TCP/IP и затем **ОК** снова tooclose параметры адаптера hello. После этого подключение к удаленному рабочему столу будет восстановлено.

6. В командной строке введите *ipconfig /all*. Отобразятся все добавленные IP-адреса, а DHCP будет отключен.


### <a name="validation-windows"></a>Проверка (Windows)

tooensure вы можете tooconnect toohello, Интернет с вашей дополнительную IP-конфигурацию через hello связанные общедоступный IP-адрес, после добавления правильно с помощью шагов выше, с помощью hello следующую команду:

```bash
ping -S 10.0.0.5 hotmail.com
```
>[!NOTE]
>Для вторичных IP-конфигурации только командой ping toohello Интернет Если hello конфигурации содержит общедоступный IP-адрес, связанный с ним. Для основной IP-конфигурации общедоступный IP-адрес не требуется tooping toohello Интернета.

### <a name="linux-ubuntu"></a>Linux (Ubuntu)

1. Откройте окно терминала.
2. Убедитесь, что вы являетесь hello привилегированного пользователя. Если вы не введите hello следующую команду:

    ```bash
    sudo -i
    ```

3. Обновите файл конфигурации hello hello сетевого интерфейса (при условии, что «eth0»).

    * Сохраните существующий элемент строку hello для dhcp. Hello основной IP-адрес остается настроенных не изменилось.
    * Добавление конфигурации для дополнительных статический IP-адрес с hello, следующие команды:

        ```bash
        cd /etc/network/interfaces.d/
        ls
        ```

    Должен отобразиться CFG-файл.
4. Привет открыть файл. Вы должны увидеть следующие строки в конце hello файл hello hello.

    ```bash
    auto eth0
    iface eth0 inet dhcp
    ```

5. Добавьте следующие строки после hello строк, которые существуют в этом файле hello:

    ```bash
    iface eth0 inet static
    address <your private IP address here>
    netmask <your subnet mask>
    ```

6. Сохраните файл hello hello следующую команду:

    ```bash
    :wq
    ```

7. Сброс hello сетевой интерфейс с hello следующую команду:

    ```bash
    sudo ifdown eth0 && sudo ifup eth0
    ```

    > [!IMPORTANT]
    > Запустите ifdown и ifup в hello же строки, если с помощью удаленного подключения.
    >

8. Убедитесь, что сетевой интерфейс toohello добавляется hello IP-адрес с hello следующую команду:

    ```bash
    ip addr list eth0
    ```

    Вы увидите hello IP адрес был добавлен как часть списка hello.

### <a name="linux-redhat-centos-and-others"></a>Linux (Redhat, CentOS и другие)

1. Откройте окно терминала.
2. Убедитесь, что вы являетесь hello привилегированного пользователя. Если вы не введите hello следующую команду:

    ```bash
    sudo -i
    ```

3. Введите пароль и следуйте инструкциям. Когда вы будете hello привилегированного пользователя, перейдите toohello сетевую папку скриптов с hello следующую команду:

    ```bash
    cd /etc/sysconfig/network-scripts
    ```

4. Список hello связанные файлы ifcfg, с помощью hello следующую команду:

    ```bash
    ls ifcfg-*
    ```

    Вы увидите *ifcfg eth0* как один из файлов hello.

5. tooadd IP-адрес, создайте файл конфигурации для него, как показано ниже. Обратите внимание, что такой файл должен быть создан для каждой IP-конфигурации.

    ```bash
    touch ifcfg-eth0:0
    ```

6. Откройте hello *ifcfg-eth0:0* файл с hello следующую команду:

    ```bash
    vi ifcfg-eth0:0
    ```

7. Добавьте файл содержимого toohello *eth0:0* в этом случае с hello следующую команду. Сведения о том, tooupdate исходя из IP-адреса.

    ```bash
    DEVICE=eth0:0
    BOOTPROTO=static
    ONBOOT=yes
    IPADDR=192.168.101.101
    NETMASK=255.255.255.0
    ```

8. Сохраните файл hello с hello следующую команду:

    ```bash
    :wq
    ```

9. Перезапустите службы hello сети и убедитесь, что изменения hello выполняются успешно, выполнив следующие команды hello:

    ```bash
    /etc/init.d/network restart
    ifconfig
    ```

    Вы увидите hello IP адрес добавленный *eth0:0*, в возвращенном списке hello.

### <a name="validation-linux"></a>Проверка (Linux)

связанные Интернет с вашей дополнительную IP-конфигурацию через общедоступный IP-адрес hello, может tooconnect toohello tooensure его, используйте hello следующую команду:

```bash
ping -I 10.0.0.5 hotmail.com
```
>[!NOTE]
>Для вторичных IP-конфигурации только командой ping toohello Интернет Если hello конфигурации содержит общедоступный IP-адрес, связанный с ним. Для основной IP-конфигурации общедоступный IP-адрес не требуется tooping toohello Интернета.

Для виртуальных машин Linux, при попытке toovalidate исходящие подключения из дополнительный сетевой Адаптер может потребоваться tooadd соответствующие маршруты. Существует много способов toodo это. Дополнительные сведения по дистрибутиву Linux см. в соответствующей документации. следующие Hello это один метод tooaccomplish:

```bash
echo 150 custom >> /etc/iproute2/rt_tables 

ip rule add from 10.0.0.5 lookup custom
ip route add default via 10.0.0.1 dev eth2 table custom

```
- Быть tooreplace убедиться, что:
    - **10.0.0.5** с hello частными IP-адрес, который имеет открытый IP-адрес адрес связанного tooit
    - **10.0.0.1** tooyour шлюз по умолчанию
    - **eth2** toohello имя вашей дополнительный сетевой Адаптер
