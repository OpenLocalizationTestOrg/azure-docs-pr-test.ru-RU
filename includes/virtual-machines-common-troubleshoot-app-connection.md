<span data-ttu-id="0cbff-101">Если вам не удалось запустить приложение, выполняющееся в виртуальной машине Azure, или подключиться к нему, это может быть обусловлено разными причинами.</span><span class="sxs-lookup"><span data-stu-id="0cbff-101">There are various reasons when you cannot start or connect to an application running on an Azure virtual machine (VM).</span></span> <span data-ttu-id="0cbff-102">Возможно, приложение не работает или не прослушивает ожидаемые порты, прослушивающий порт заблокирован или сетевые правила неправильно передают трафик в приложение.</span><span class="sxs-lookup"><span data-stu-id="0cbff-102">Reasons include the application not running or listening on the expected ports, the listening port blocked, or networking rules not correctly passing traffic to the application.</span></span> <span data-ttu-id="0cbff-103">В этой статье описываются методы поиска и устранения неисправностей.</span><span class="sxs-lookup"><span data-stu-id="0cbff-103">This article describes a methodical approach to find and correct the problem.</span></span>

<span data-ttu-id="0cbff-104">Если у вас возникают проблемы при подключении к виртуальной машине по протоколу RDP или SSH, сначала ознакомьтесь с одной из следующих статей:</span><span class="sxs-lookup"><span data-stu-id="0cbff-104">If you are having issues connecting to your VM using RDP or SSH, see one of the following articles first:</span></span>

* [<span data-ttu-id="0cbff-105">Устранение неполадок с подключением к удаленному рабочему столу виртуальной машины Windows в службе Azure</span><span class="sxs-lookup"><span data-stu-id="0cbff-105">Troubleshoot Remote Desktop connections to a Windows-based Azure Virtual Machine</span></span>](../articles/virtual-machines/windows/troubleshoot-rdp-connection.md)
* <span data-ttu-id="0cbff-106">[Устранение неполадок с подключением Secure Shell (SSH) к виртуальной машине Azure под управлением Linux](../articles/virtual-machines/linux/troubleshoot-ssh-connection.md)</span><span class="sxs-lookup"><span data-stu-id="0cbff-106">[Troubleshoot Secure Shell (SSH) connections to a Linux-based Azure virtual machine](../articles/virtual-machines/linux/troubleshoot-ssh-connection.md).</span></span>

> [!NOTE]
> <span data-ttu-id="0cbff-107">В Azure предлагаются две модели развертывания для создания ресурсов и работы с ними: [модель диспетчера ресурсов и классическая модель](../articles/resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="0cbff-107">Azure has two different deployment models for creating and working with resources: [Resource Manager and classic](../articles/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="0cbff-108">В этой статье описывается использование обеих моделей, но для большинства новых развертываний корпорация Майкрософт рекомендует использовать модель диспетчера ресурсов.</span><span class="sxs-lookup"><span data-stu-id="0cbff-108">This article covers using both models, but Microsoft recommends that most new deployments use the Resource Manager model.</span></span>

<span data-ttu-id="0cbff-109">Если вам потребуется дополнительная помощь по любому из вопросов, рассматриваемых в статье, вы можете обратиться к экспертам по Azure на [форумах MSDN Azure и Stack Overflow](https://azure.microsoft.com/support/forums/).</span><span class="sxs-lookup"><span data-stu-id="0cbff-109">If you need more help at any point in this article, you can contact the Azure experts on [the MSDN Azure and the Stack Overflow forums](https://azure.microsoft.com/support/forums/).</span></span> <span data-ttu-id="0cbff-110">Кроме того, можно зарегистрировать обращение в службу поддержки Azure.</span><span class="sxs-lookup"><span data-stu-id="0cbff-110">Alternatively, you can also file an Azure support incident.</span></span> <span data-ttu-id="0cbff-111">Перейдите на [сайт поддержки Azure](https://azure.microsoft.com/support/options/) и щелкните **Получить поддержку**.</span><span class="sxs-lookup"><span data-stu-id="0cbff-111">Go to the [Azure support site](https://azure.microsoft.com/support/options/) and select **Get Support**.</span></span>

## <a name="quick-start-troubleshooting-steps"></a><span data-ttu-id="0cbff-112">Действия по устранению неполадок</span><span class="sxs-lookup"><span data-stu-id="0cbff-112">Quick-start troubleshooting steps</span></span>
<span data-ttu-id="0cbff-113">Если у вас возникают проблемы с подключением к приложению, попробуйте выполнить приведенные ниже шаги по их устранению.</span><span class="sxs-lookup"><span data-stu-id="0cbff-113">If you have problems connecting to an application, try the following general troubleshooting steps.</span></span> <span data-ttu-id="0cbff-114">После каждого шага попробуйте подключиться к приложению еще раз.</span><span class="sxs-lookup"><span data-stu-id="0cbff-114">After each step, try connecting to your application again:</span></span>

* <span data-ttu-id="0cbff-115">Перезапустите виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="0cbff-115">Restart the virtual machine</span></span>
* <span data-ttu-id="0cbff-116">Повторно создайте конечную точку, правила брандмауэра и правила группы безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="0cbff-116">Recreate the endpoint / firewall rules / network security group (NSG) rules</span></span>
  * [<span data-ttu-id="0cbff-117">Используйте управление группами безопасности сети (модель Resource Manager).</span><span class="sxs-lookup"><span data-stu-id="0cbff-117">Resource Manager model - Manage Network Security Groups</span></span>](../articles/virtual-network/virtual-networks-create-nsg-arm-pportal.md)
  * [<span data-ttu-id="0cbff-118">Используйте управление конечными точками облачных служб (классическая модель).</span><span class="sxs-lookup"><span data-stu-id="0cbff-118">Classic model - Manage Cloud Services endpoints</span></span>](../articles/cloud-services/cloud-services-enable-communication-role-instances.md)
* <span data-ttu-id="0cbff-119">Подключитесь из другого расположения, например из другой виртуальной сети Azure.</span><span class="sxs-lookup"><span data-stu-id="0cbff-119">Connect from different location, such as a different Azure virtual network</span></span>
* <span data-ttu-id="0cbff-120">Повторно разверните виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="0cbff-120">Redeploy the virtual machine</span></span>
  * [<span data-ttu-id="0cbff-121">Повторное развертывание виртуальной машины Windows</span><span class="sxs-lookup"><span data-stu-id="0cbff-121">Redeploy Windows VM</span></span>](../articles/virtual-machines/windows/redeploy-to-new-node.md)
  * [<span data-ttu-id="0cbff-122">Повторное развертывание виртуальной машины Linux</span><span class="sxs-lookup"><span data-stu-id="0cbff-122">Redeploy Linux VM</span></span>](../articles/virtual-machines/linux/redeploy-to-new-node.md)
* <span data-ttu-id="0cbff-123">Повторно создайте виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="0cbff-123">Recreate the virtual machine</span></span>

<span data-ttu-id="0cbff-124">Дополнительные сведения см. в статье [Устранение неполадок подключения к конечной точке (сбои RDP, SSH, HTTP и другие сбои)](https://social.msdn.microsoft.com/Forums/azure/en-US/538a8f18-7c1f-4d6e-b81c-70c00e25c93d/troubleshooting-endpoint-connectivity-rdpsshhttp-etc-failures?forum=WAVirtualMachinesforWindows).</span><span class="sxs-lookup"><span data-stu-id="0cbff-124">For more information, see [Troubleshooting Endpoint Connectivity (RDP/SSH/HTTP, etc. failures)](https://social.msdn.microsoft.com/Forums/azure/en-US/538a8f18-7c1f-4d6e-b81c-70c00e25c93d/troubleshooting-endpoint-connectivity-rdpsshhttp-etc-failures?forum=WAVirtualMachinesforWindows).</span></span>

## <a name="detailed-troubleshooting-overview"></a><span data-ttu-id="0cbff-125">Подробный обзор устранения неисправностей</span><span class="sxs-lookup"><span data-stu-id="0cbff-125">Detailed troubleshooting overview</span></span>
<span data-ttu-id="0cbff-126">Существуют четыре основных области для устранения неполадок доступа к приложению, которое выполняется в виртуальной машине Azure.</span><span class="sxs-lookup"><span data-stu-id="0cbff-126">There are four main areas to troubleshoot the access of an application that is running on an Azure virtual machine.</span></span>

![устранение неполадок, не удается запустить приложение](./media/virtual-machines-common-troubleshoot-app-connection/tshoot_app_access1.png)

1. <span data-ttu-id="0cbff-128">Приложение, которое выполняется в виртуальной машине Azure.</span><span class="sxs-lookup"><span data-stu-id="0cbff-128">The application running on the Azure virtual machine.</span></span>
   * <span data-ttu-id="0cbff-129">Приложение работает правильно?</span><span class="sxs-lookup"><span data-stu-id="0cbff-129">Is the application itself running correctly?</span></span>
2. <span data-ttu-id="0cbff-130">Виртуальная машина Azure</span><span class="sxs-lookup"><span data-stu-id="0cbff-130">The Azure virtual machine.</span></span>
   * <span data-ttu-id="0cbff-131">Виртуальная машина работает правильно и отвечает на запросы?</span><span class="sxs-lookup"><span data-stu-id="0cbff-131">Is the VM itself running correctly and responding to requests?</span></span>
3. <span data-ttu-id="0cbff-132">Конечные точки сети Azure.</span><span class="sxs-lookup"><span data-stu-id="0cbff-132">Azure network endpoints.</span></span>
   * <span data-ttu-id="0cbff-133">Конечные точки облачной службы для виртуальных машин в классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="0cbff-133">Cloud service endpoints for virtual machines in the Classic deployment model.</span></span>
   * <span data-ttu-id="0cbff-134">Группы безопасности сети и правила преобразования сетевых адресов для входящих подключений для виртуальных машин в модели развертывания Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="0cbff-134">Network Security Groups and inbound NAT rules for virtual machines in Resource Manager deployment model.</span></span>
   * <span data-ttu-id="0cbff-135">Может ли трафик передаваться от пользователей к виртуальной машине и приложению на ожидаемых портах?</span><span class="sxs-lookup"><span data-stu-id="0cbff-135">Can traffic flow from users to the VM/application on the expected ports?</span></span>
4. <span data-ttu-id="0cbff-136">Пограничное устройство Интернета.</span><span class="sxs-lookup"><span data-stu-id="0cbff-136">Your Internet edge device.</span></span>
   * <span data-ttu-id="0cbff-137">Нет ли правил брандмауэра, которые препятствуют правильной передаче трафика?</span><span class="sxs-lookup"><span data-stu-id="0cbff-137">Are firewall rules in place preventing traffic from flowing correctly?</span></span>

<span data-ttu-id="0cbff-138">Для клиентских компьютеров, которые получают доступ к приложению через подключение VPN типа «сеть-сеть» или ExpressRoute, проблемы в первую очередь могут возникать из-за приложения и виртуальной машины Azure.</span><span class="sxs-lookup"><span data-stu-id="0cbff-138">For client computers that are accessing the application over a site-to-site VPN or ExpressRoute connection, the main areas that can cause problems are the application and the Azure virtual machine.</span></span>

<span data-ttu-id="0cbff-139">Чтобы определить источник проблемы и исправить ее, выполните приведенные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="0cbff-139">To determine the source of the problem and its correction, follow these steps.</span></span>

## <a name="step-1-access-application-from-target-vm"></a><span data-ttu-id="0cbff-140">Шаг 1. Доступ к приложению с целевой виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="0cbff-140">Step 1: Access application from target VM</span></span>
<span data-ttu-id="0cbff-141">Попробуйте обратиться к приложению с помощью соответствующей клиентской программы из виртуальной машины, на которой оно работает.</span><span class="sxs-lookup"><span data-stu-id="0cbff-141">Try to access the application with the appropriate client program from the VM on which it is running.</span></span> <span data-ttu-id="0cbff-142">Используйте имя локального узла, локальный IP-адрес или петлевой адрес (127.0.0.1).</span><span class="sxs-lookup"><span data-stu-id="0cbff-142">Use the local host name, the local IP address, or the loopback address (127.0.0.1).</span></span>

![запуск приложения непосредственно из виртуальной машины](./media/virtual-machines-common-troubleshoot-app-connection/tshoot_app_access2.png)

<span data-ttu-id="0cbff-144">Например, если приложение является веб-сервером, откройте браузер на виртуальной машине и попытайтесь перейти к веб-странице, размещенной на виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="0cbff-144">For example, if the application is a web server, open a browser on the VM and try to access a web page hosted on the VM.</span></span>

<span data-ttu-id="0cbff-145">Если доступ к приложению есть, перейдите к [шагу 2](#step2).</span><span class="sxs-lookup"><span data-stu-id="0cbff-145">If you can access the application, go to [Step 2](#step2).</span></span>

<span data-ttu-id="0cbff-146">Если доступ к приложению получить не удается, проверьте следующие настройки.</span><span class="sxs-lookup"><span data-stu-id="0cbff-146">If you cannot access the application, verify the following settings:</span></span>

* <span data-ttu-id="0cbff-147">Приложение выполняется в целевой виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="0cbff-147">The application is running on the target virtual machine.</span></span>
* <span data-ttu-id="0cbff-148">Приложение прослушивает ожидаемые порты TCP и UDP.</span><span class="sxs-lookup"><span data-stu-id="0cbff-148">The application is listening on the expected TCP and UDP ports.</span></span>

<span data-ttu-id="0cbff-149">В виртуальных машин на основе Windows и Linux используйте команду **netstat -a** , чтобы отобразить активные порты прослушивания.</span><span class="sxs-lookup"><span data-stu-id="0cbff-149">On both Windows and Linux-based virtual machines, use the **netstat -a** command to show the active listening ports.</span></span> <span data-ttu-id="0cbff-150">Изучите выходные данные для ожидаемых портов, которые должно прослушивать приложение.</span><span class="sxs-lookup"><span data-stu-id="0cbff-150">Examine the output for the expected ports on which your application should be listening.</span></span> <span data-ttu-id="0cbff-151">При необходимости перезапустите приложение или настройте его для использования ожидаемых портов и попытайтесь снова получить доступ к приложению локально.</span><span class="sxs-lookup"><span data-stu-id="0cbff-151">Restart the application or configure it to use the expected ports as needed and try to access the application locally again.</span></span>

## <span data-ttu-id="0cbff-152"><a id="step2"></a>Шаг 2. Доступ к приложению с другой виртуальной машины в той же виртуальной сети</span><span class="sxs-lookup"><span data-stu-id="0cbff-152"><a id="step2"></a>Step 2: Access application from another VM in the same virtual network</span></span>
<span data-ttu-id="0cbff-153">Попробуйте обратиться к приложению из другой виртуальной машины в той же виртуальной сети, используя имя узла виртуальной машины или ее назначенный в Azure общедоступный, частный или предоставленный поставщиком интернет-услуг IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="0cbff-153">Try to access the application from a different VM but in the same virtual network, using the VM's host name or its Azure-assigned public, private, or provider IP address.</span></span> <span data-ttu-id="0cbff-154">Для виртуальных машин, созданных с помощью классической модели развертывания, не используйте общедоступный IP-адрес облачной службы.</span><span class="sxs-lookup"><span data-stu-id="0cbff-154">For virtual machines created using the classic deployment model, do not use the public IP address of the cloud service.</span></span>

![запуск приложения из другой виртуальной машины](./media/virtual-machines-common-troubleshoot-app-connection/tshoot_app_access3.png)

<span data-ttu-id="0cbff-156">Например, если приложение является веб-сервером, попробуйте обратиться к веб-странице из браузера в другой виртуальной машине из той же виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="0cbff-156">For example, if the application is a web server, try to access a web page from a browser on a different VM in the same virtual network.</span></span>

<span data-ttu-id="0cbff-157">Если у вас есть доступ к приложению, перейдите к [шагу 3](#step3).</span><span class="sxs-lookup"><span data-stu-id="0cbff-157">If you can access the application, go to [Step 3](#step3).</span></span>

<span data-ttu-id="0cbff-158">Если доступ к приложению получить не удается, проверьте следующие настройки.</span><span class="sxs-lookup"><span data-stu-id="0cbff-158">If you cannot access the application, verify the following settings:</span></span>

* <span data-ttu-id="0cbff-159">Брандмауэр узла в целевой виртуальной машине пропускает трафик входящих запросов и исходящих ответов.</span><span class="sxs-lookup"><span data-stu-id="0cbff-159">The host firewall on the target VM is allowing the inbound request and outbound response traffic.</span></span>
* <span data-ttu-id="0cbff-160">Программы для обнаружения вторжений или мониторинга сети, работающие в целевой виртуальной машине, разрешают прохождение сетевого трафика.</span><span class="sxs-lookup"><span data-stu-id="0cbff-160">Intrusion detection or network monitoring software running on the target VM is allowing the traffic.</span></span>
* <span data-ttu-id="0cbff-161">Конечные точки облачных служб и группы безопасности сети разрешают прохождение трафика.</span><span class="sxs-lookup"><span data-stu-id="0cbff-161">Cloud Services endpoints or Network Security Groups are allowing the traffic:</span></span>
  * [<span data-ttu-id="0cbff-162">Используйте управление конечными точками облачных служб (классическая модель).</span><span class="sxs-lookup"><span data-stu-id="0cbff-162">Classic model - Manage Cloud Services endpoints</span></span>](../articles/cloud-services/cloud-services-enable-communication-role-instances.md)
  * [<span data-ttu-id="0cbff-163">Используйте управление группами безопасности сети (модель Resource Manager).</span><span class="sxs-lookup"><span data-stu-id="0cbff-163">Resource Manager model - Manage Network Security Groups</span></span>](../articles/virtual-network/virtual-networks-create-nsg-arm-pportal.md)
* <span data-ttu-id="0cbff-164">Отдельный компонент, выполняющийся в виртуальной сети на пути между тестовой виртуальной машиной и вашей виртуальной машиной, такой, как, например, подсистема балансировки нагрузки или брандмауэр, разрешает прохождение трафика.</span><span class="sxs-lookup"><span data-stu-id="0cbff-164">A separate component running in your VM in the path between the test VM and your VM, such as a load balancer or firewall, is allowing the traffic.</span></span>

<span data-ttu-id="0cbff-165">На виртуальной машине под управлением Windows используйте брандмауэр Windows в режиме повышенной безопасности для определения того, исключают ли правила брандмауэра входящий и исходящий трафик вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="0cbff-165">On a Windows-based virtual machine, use Windows Firewall with Advanced Security to determine whether the firewall rules exclude your application's inbound and outbound traffic.</span></span>

## <span data-ttu-id="0cbff-166"><a id="step3"></a>Шаг 3. Доступ к приложению из-за пределов виртуальной сети</span><span class="sxs-lookup"><span data-stu-id="0cbff-166"><a id="step3"></a>Step 3: Access application from outside the virtual network</span></span>
<span data-ttu-id="0cbff-167">Попытайтесь обратиться к приложению с компьютера за пределами виртуальной сети, где находится виртуальная машина, в которой выполняется приложение,</span><span class="sxs-lookup"><span data-stu-id="0cbff-167">Try to access the application from a computer outside the virtual network as the VM on which the application is running.</span></span> <span data-ttu-id="0cbff-168">но не из сети исходного клиентского компьютера.</span><span class="sxs-lookup"><span data-stu-id="0cbff-168">Use a different network as your original client computer.</span></span>

![запуск приложения с компьютера за пределами виртуальной сети](./media/virtual-machines-common-troubleshoot-app-connection/tshoot_app_access4.png)

<span data-ttu-id="0cbff-170">Например, если приложение является веб-сервером, попробуйте получить доступ к веб-странице из браузера на компьютере, который находится не в виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="0cbff-170">For example, if the application is a web server, try to access the web page from a browser running on a computer that is not in the virtual network.</span></span>

<span data-ttu-id="0cbff-171">Если доступ к приложению получить не удается, проверьте следующие настройки.</span><span class="sxs-lookup"><span data-stu-id="0cbff-171">If you cannot access the application, verify the following settings:</span></span>

* <span data-ttu-id="0cbff-172">Для виртуальных машин, созданных с использованием классической модели развертывания:</span><span class="sxs-lookup"><span data-stu-id="0cbff-172">For VMs created using the classic deployment model:</span></span>
  
  * <span data-ttu-id="0cbff-173">Убедитесь, что конфигурация конечной точки для виртуальной машины разрешает входящий трафик, в частности протокол (TCP или UDP), а также номера общедоступных и частных портов.</span><span class="sxs-lookup"><span data-stu-id="0cbff-173">Verify that the endpoint configuration for the VM is allowing the incoming traffic, especially the protocol (TCP or UDP) and the public and private port numbers.</span></span>
  * <span data-ttu-id="0cbff-174">Убедитесь, что списки управления доступом (ACL) для конечной точки не блокируют входящий трафик из Интернета.</span><span class="sxs-lookup"><span data-stu-id="0cbff-174">Verify that access control lists (ACLs) on the endpoint are not preventing incoming traffic from the Internet.</span></span>
  * <span data-ttu-id="0cbff-175">Дополнительные сведения см. в статье [Настройка конечных точек виртуальной машины](../articles/virtual-machines/windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="0cbff-175">For more information, see [How to Set Up Endpoints to a Virtual Machine](../articles/virtual-machines/windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>
* <span data-ttu-id="0cbff-176">Для виртуальных машин, созданных с использованием модели развертывания с помощью Resource Manager:</span><span class="sxs-lookup"><span data-stu-id="0cbff-176">For VMs created using the Resource Manager deployment model:</span></span>
  
  * <span data-ttu-id="0cbff-177">Убедитесь, что конфигурация правила NAT для входящего трафика для виртуальной машины разрешает входящий трафик, в частности протокол (TCP или UDP), а также номера общедоступных и частных портов.</span><span class="sxs-lookup"><span data-stu-id="0cbff-177">Verify that the inbound NAT rule configuration for the VM is allowing the incoming traffic, especially the protocol (TCP or UDP) and the public and private port numbers.</span></span>
  * <span data-ttu-id="0cbff-178">Убедитесь, что группы безопасности сети разрешают трафик входящих запросов и исходящих ответов.</span><span class="sxs-lookup"><span data-stu-id="0cbff-178">Verify that Network Security Groups are allowing the inbound request and outbound response traffic.</span></span>
  * <span data-ttu-id="0cbff-179">Дополнительные сведения см. в статье [Группа безопасности сети](../articles/virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="0cbff-179">For more information, see [What is a Network Security Group (NSG)?](../articles/virtual-network/virtual-networks-nsg.md)</span></span>

<span data-ttu-id="0cbff-180">Если виртуальная машина или конечная точка входит в комплект балансировки нагрузки, сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="0cbff-180">If the virtual machine or endpoint is a member of a load-balanced set:</span></span>

* <span data-ttu-id="0cbff-181">Проверьте правильность протокола зонда (TCP или UDP) и номера порта.</span><span class="sxs-lookup"><span data-stu-id="0cbff-181">Verify that the probe protocol (TCP or UDP) and port number are correct.</span></span>
* <span data-ttu-id="0cbff-182">Если протокол зонда и порт отличаются от протокола и порта для комплекта балансировки нагрузки, сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="0cbff-182">If the probe protocol and port is different than the load-balanced set protocol and port:</span></span>
  * <span data-ttu-id="0cbff-183">Проверьте, прослушивает ли приложение протокол пробы (TCP или UDP) и порт с этим номером (используйте **netstat -a** на целевой виртуальной машине).</span><span class="sxs-lookup"><span data-stu-id="0cbff-183">Verify that the application is listening on the probe protocol (TCP or UDP) and port number (use **netstat –a** on the target VM).</span></span>
  * <span data-ttu-id="0cbff-184">Убедитесь, что брандмауэр узла на целевой виртуальной машине разрешает трафик входящих запросов и исходящих ответов пробы.</span><span class="sxs-lookup"><span data-stu-id="0cbff-184">Verify that the host firewall on the target VM is allowing the inbound probe request and outbound probe response traffic.</span></span>

<span data-ttu-id="0cbff-185">Если у вас есть доступ к приложению, убедитесь, что пограничное устройство Интернета разрешает следующее:</span><span class="sxs-lookup"><span data-stu-id="0cbff-185">If you can access the application, ensure that your Internet edge device is allowing:</span></span>

* <span data-ttu-id="0cbff-186">трафик исходящих запросов приложения с клиентского компьютера в виртуальную машину Azure;</span><span class="sxs-lookup"><span data-stu-id="0cbff-186">The outbound application request traffic from your client computer to the Azure virtual machine.</span></span>
* <span data-ttu-id="0cbff-187">трафик входящих ответов приложения из виртуальной машины Azure.</span><span class="sxs-lookup"><span data-stu-id="0cbff-187">The inbound application response traffic from the Azure virtual machine.</span></span>

## <a name="step-4-if-you-cannot-access-the-application-use-ip-verify-to-check-the-settings"></a><span data-ttu-id="0cbff-188">Шаг 4. Проверка параметров доступа к приложению с помощью командлета проверки IP-потока</span><span class="sxs-lookup"><span data-stu-id="0cbff-188">Step 4 If you cannot access the application, use IP Verify to check the settings.</span></span> 

<span data-ttu-id="0cbff-189">Дополнительные сведения см. в статье [Обзор мониторинга сети Azure](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span><span class="sxs-lookup"><span data-stu-id="0cbff-189">For more information, see [Azure network monitoring overview](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span></span> 

## <a name="additional-resources"></a><span data-ttu-id="0cbff-190">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="0cbff-190">Additional resources</span></span>
[<span data-ttu-id="0cbff-191">Устранение неполадок с подключением к удаленному рабочему столу виртуальной машины Windows в службе Azure</span><span class="sxs-lookup"><span data-stu-id="0cbff-191">Troubleshoot Remote Desktop connections to a Windows-based Azure Virtual Machine</span></span>](../articles/virtual-machines/windows/troubleshoot-rdp-connection.md)

[<span data-ttu-id="0cbff-192">Устранение неполадок с подключением Secure Shell (SSH) к виртуальной машине Azure под управлением Linux</span><span class="sxs-lookup"><span data-stu-id="0cbff-192">Troubleshoot Secure Shell (SSH) connections to a Linux-based Azure virtual machine</span></span>](../articles/virtual-machines/linux/troubleshoot-ssh-connection.md)

