Существует несколько причин, когда не удается запустить или подключиться tooan приложение, работающее на виртуальной машине Azure (ВМ). Причины включают приложения hello не запущена или прослушивание портов hello ожидается hello прослушивающий порт заблокирован или сетевые правила передачи трафика toohello приложения неправильно. Эта статья описывает тщательно toofind и правильный hello проблему.

Если возникают проблемы с подключением tooyour виртуальной Машины с помощью протокола удаленного рабочего СТОЛА или SSH, см. один из следующих hello статьи, посвященные сначала:

* [Устранение неполадок подключения удаленного рабочего стола tooa виртуальной машины на основе Windows Azure](../articles/virtual-machines/windows/troubleshoot-rdp-connection.md)
* [Устранение неполадок Secure Shell (SSH) подключения tooa под управлением Linux Azure виртуальные машины](../articles/virtual-machines/linux/troubleshoot-ssh-connection.md).

> [!NOTE]
> В Azure предлагаются две модели развертывания для создания ресурсов и работы с ними: [модель диспетчера ресурсов и классическая модель](../articles/resource-manager-deployment-model.md). В этой статье описывается использование обеих моделей, но корпорация Майкрософт рекомендует наиболее новые развертывания модели hello диспетчера ресурсов.

Если вам нужна дополнительная помощь в любой момент в этой статье, можно обратиться в hello экспертов Azure на [hello MSDN Azure и hello переполнения стека форумы](https://azure.microsoft.com/support/forums/). Кроме того, можно зарегистрировать обращение в службу поддержки Azure. Go toohello [сайт поддержки Azure](https://azure.microsoft.com/support/options/) и выберите **получения поддержки**.

## <a name="quick-start-troubleshooting-steps"></a>Действия по устранению неполадок
При наличии проблем с подключением tooan приложения, попробуйте следующие общие действия по устранению неполадок hello. После каждого шага повторите попытку подключения tooyour приложения:

* Перезапустить виртуальную машину hello
* Повторно создайте конечную точку hello, правила брандмауэра, правил (NSG) группы безопасности сети
  * [Используйте управление группами безопасности сети (модель Resource Manager).](../articles/virtual-network/virtual-networks-create-nsg-arm-pportal.md)
  * [Используйте управление конечными точками облачных служб (классическая модель).](../articles/cloud-services/cloud-services-enable-communication-role-instances.md)
* Подключитесь из другого расположения, например из другой виртуальной сети Azure.
* Повторное развертывание виртуальной машины hello
  * [Повторное развертывание виртуальной машины Windows](../articles/virtual-machines/windows/redeploy-to-new-node.md)
  * [Повторное развертывание виртуальной машины Linux](../articles/virtual-machines/linux/redeploy-to-new-node.md)
* Повторное создание виртуальной машины hello

Дополнительные сведения см. в статье [Устранение неполадок подключения к конечной точке (сбои RDP, SSH, HTTP и другие сбои)](https://social.msdn.microsoft.com/Forums/azure/en-US/538a8f18-7c1f-4d6e-b81c-70c00e25c93d/troubleshooting-endpoint-connectivity-rdpsshhttp-etc-failures?forum=WAVirtualMachinesforWindows).

## <a name="detailed-troubleshooting-overview"></a>Подробный обзор устранения неисправностей
Существует четыре основных области доступа hello tootroubleshoot приложения, запущенного на виртуальной машине Azure.

![устранение неполадок, не удается запустить приложение](./media/virtual-machines-common-troubleshoot-app-connection/tshoot_app_access1.png)

1. Hello приложение, работающее на виртуальной машине Azure hello.
   * Само приложение hello работает правильно?
2. Здравствуйте, виртуальную машину Azure.
   * Hello самой ВМ работает правильно и отвечать на запросы toorequests?
3. Конечные точки сети Azure.
   * Конечных точек облачной службы для виртуальных машин в hello классической модели развертывания.
   * Группы безопасности сети и правила преобразования сетевых адресов для входящих подключений для виртуальных машин в модели развертывания Resource Manager.
   * Можно трафика поток из toohello пользователей виртуальной Машины или приложения на портах hello ожидалось?
4. Пограничное устройство Интернета.
   * Нет ли правил брандмауэра, которые препятствуют правильной передаче трафика?

Для клиентских компьютеров, которые обращаются к приложения hello через соединение VPN или ExpressRoute сайт сайт hello основных областей, которые могут вызвать проблемы приложения hello и hello виртуальной машины Azure.

Источник hello toodetermine hello проблемы и ее исправления, выполните следующие действия.

## <a name="step-1-access-application-from-target-vm"></a>Шаг 1. Доступ к приложению с целевой виртуальной машины
Попробуйте приложение hello tooaccess с hello клиентскую программу от hello виртуальной Машины, на котором он выполняется. Используйте hello локальное имя узла, hello локальный IP-адрес или адрес hello замыкания на себя (127.0.0.1).

![Запустите приложение непосредственно из hello виртуальной Машины](./media/virtual-machines-common-troubleshoot-app-connection/tshoot_app_access2.png)

Например если приложение hello находится на веб-сервере, откройте браузер на hello виртуальной Машины и повторите tooaccess веб-страницы, размещенной на hello виртуальной Машины.

Если пользователь имеет доступ приложения hello, перейдите в слишком[шаг 2](#step2).

Если не удается получить доступ к приложения hello, проверьте hello следующие параметры:

* Hello приложение hello целевой виртуальной машине.
* приложение Hello прослушивает hello ожидается порты TCP и UDP.

В Windows и виртуальных машин под управлением Linux используйте hello **netstat - a** команда tooshow hello активные порты прослушивания. Изучите выходные данные hello для приложения должен прослушиваемых портов ожидается hello. Перезапустите приложение hello или настройте его порты hello ожидается toouse и повторите приложения hello tooaccess локально.

## <a id="step2"></a>Шаг 2: Доступ к приложению из другой виртуальной Машине в hello одной виртуальной сети
Повторите приложения hello tooaccess из другой виртуальной Машины, но в hello же виртуальной сети, используя имя узла виртуальной Машины hello или его назначенной Azure public, private или поставщика IP-адрес. Для виртуальных машин, созданных с помощью hello классической модели развертывания не используйте общедоступный IP-адрес hello hello облачной службы.

![запуск приложения из другой виртуальной машины](./media/virtual-machines-common-troubleshoot-app-connection/tshoot_app_access3.png)

Например если приложение hello находится на веб-сервере, повторите tooaccess с веб-страницами из браузера на другой виртуальной Машины в hello одной виртуальной сети.

Если пользователь имеет доступ приложения hello, перейдите в слишком[шаг 3](#step3).

Если не удается получить доступ к приложения hello, проверьте hello следующие параметры:

* Hello узла на целевом сервере hello ВМ брандмауэр hello входящего запроса и ответа исходящего трафика.
* Обнаружение вторжений или сетевого мониторинга программного обеспечения, запущенного на целевом сервере hello виртуальной Машины прохождения трафика hello.
* Конечные точки облачных служб или групп сетевой безопасности разрешения hello трафика:
  * [Используйте управление конечными точками облачных служб (классическая модель).](../articles/cloud-services/cloud-services-enable-communication-role-instances.md)
  * [Используйте управление группами безопасности сети (модель Resource Manager).](../articles/virtual-network/virtual-networks-create-nsg-arm-pportal.md)
* Отдельный компонент запущен на виртуальной машине в пути hello между тестовыми hello ВМ и ВМ, такие как подсистемы балансировки нагрузки или брандмауэр, прохождения трафика hello.

На виртуальной машине под управлением Windows используйте брандмауэр Windows с улучшенной безопасностью toodetermine ли правила брандмауэра hello исключить входящего и исходящего трафика вашего приложения.

## <a id="step3"></a>Шаг 3: Доступ к приложению из внешней hello виртуальной сети
Попробуйте приложения hello tooaccess с компьютера за пределами виртуальной сети hello как hello виртуальная машина, на котором запущено приложение hello. но не из сети исходного клиентского компьютера.

![Запустите приложение на компьютере за пределами виртуальной сети hello](./media/virtual-machines-common-troubleshoot-app-connection/tshoot_app_access4.png)

Например если приложение hello находится на веб-сервере, попробуйте tooaccess hello веб-страницу в браузере, запущенного на компьютере, не в виртуальной сети hello.

Если не удается получить доступ к приложения hello, проверьте hello следующие параметры:

* Для виртуальных машин созданы с использованием hello классической модели развертывания.
  
  * Проверьте конфигурацию конечной точки, hello для виртуальной Машины дает возможность hello входящего трафика, особенно hello протокол (TCP или UDP) и номера портов, открытых и закрытых hello приветствия.
  * Убедитесь, что списки управления доступом (ACL) в конечной точке hello не препятствуют входящего трафика из Интернета hello.
  * Дополнительные сведения см. в разделе [как tooa tooSet Настройка конечных точек виртуальной машины](../articles/virtual-machines/windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).
* Для виртуальных машин, созданных с помощью модели развертывания диспетчера ресурсов hello:
  
  * Убедитесь, что, hello настроек правило входящего трафика NAT для виртуальной Машины дает возможность hello входящего трафика, особенно hello протокол (TCP или UDP) и номера портов, открытых и закрытых hello приветствия.
  * Убедитесь, что группы безопасности сети, позволяя им hello входящего запроса и ответа исходящего трафика.
  * Дополнительные сведения см. в статье [Группа безопасности сети](../articles/virtual-network/virtual-networks-nsg.md).

Если виртуальная машина hello или конечной точки входит в набор балансировки нагрузки:

* Проверьте правильность hello пробы протокол (TCP или UDP) и номер порта.
* Если проверки hello протокол и порт отличается от порта и протокола hello набор балансировки нагрузки:
  * Убедитесь, что приложение hello hello пробы протокол (TCP или UDP) и номер порта (используйте **netstat – a** на hello целевой виртуальной Машины).
  * Убедитесь, что брандмауэр узла hello на целевом сервере hello, который дает возможность ВМ hello проверки входящего запроса и ответного трафика исходящей проверки.

Если пользователь имеет доступ приложения hello, для проверки прохождения устройства edge Интернета:

* трафик запросов исходящих приложения Hello из вашего клиентского компьютера toohello виртуальной машины Azure.
* Здравствуйте, входящего приложения ответного трафика от hello виртуальной машины Azure.

## <a name="step-4-if-you-cannot-access-hello-application-use-ip-verify-toocheck-hello-settings"></a>Шаг 4. Если не удается получить доступ к приложения hello, используйте параметры hello toocheck проверьте IP. 

Дополнительные сведения см. в статье [Обзор мониторинга сети Azure](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview). 

## <a name="additional-resources"></a>Дополнительные ресурсы
[Устранение неполадок подключения удаленного рабочего стола tooa виртуальной машины на основе Windows Azure](../articles/virtual-machines/windows/troubleshoot-rdp-connection.md)

[Устранение неполадок Secure Shell (SSH) подключения tooa под управлением Linux Azure виртуальные машины](../articles/virtual-machines/linux/troubleshoot-ssh-connection.md)

