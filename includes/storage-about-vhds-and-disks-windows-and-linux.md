
## <a name="about-vhds"></a>О виртуальных жестких дисках

Виртуальные жесткие диски, используемые в Azure, представляют собой VHD-файлы, хранящиеся как страничные BLOB-объекты в учетной записи хранения Azure (Standard или Premium). Дополнительные сведения о страничных BLOB-объектах см. в статье [Understanding Block Blobs, Append Blobs, and Page Blobs](/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs/) (Основные сведения о блочных, добавочных и страничных BLOB-объектах). Дополнительные сведения о хранилище класса Premium см. в статье [Хранилище класса "Премиум": высокопроизводительная служба хранилища для рабочих нагрузок виртуальных машин Azure](../articles/virtual-machines/windows/premium-storage.md).

Azure поддерживает диски фиксированного размера в формате VHD. Фиксированный формат размещает логический диск в файле линейно, то есть смещение диска X хранится в смещении BLOB-объекта X. Небольшая сноска в конце BLOB-объекта описывает свойства VHD-файла. Часто фиксированный формат занимает лишнее пространство, поскольку в большинстве дисков есть большие неиспользуемые диапазоны. Однако в Azure VHD-файлы хранятся в разреженном формате. Это позволяет одновременно использовать преимущества и фиксированных, и динамически изменяемых дисков. Дополнительные сведения см. в статье [Начало работы с виртуальными жесткими дисками](https://technet.microsoft.com/library/dd979539.aspx).

Все VHD-файлы в Azure, которые следует использовать в качестве источника создания диска или образа, доступны только для чтения. Однако VHD-файлы, загруженные или скопированные в хранилище Azure пользователем могут быть доступны для чтения и записи или только для чтения. При создании диска или образа Azure создает копии исходных VHD-файлов. Эти копии могут быть доступны только для чтения или для чтения и записи, в зависимости от того, как используется виртуальный жесткий диск.

При создании виртуальной машины из образа Azure создает диск для виртуальной машины, которая является копией исходного VHD-файла. Для защиты от случайного удаления Azure назначает аренду на любой VHD-файл, используемый при создании образа, диска ОС или диска данных.

Перед тем как удалить исходный VHD-файл, необходимо снять аренду, удалив диск или образ. Чтобы удалить VHD-файл, который используется виртуальной машиной как диск ОС, можно удалить виртуальную машину, диск ОС и исходный VHD-файл одним действием, удалив виртуальную машину и все связанные с ней диски. Однако для удаления VHD-файла, используемого в качестве источника для диска данных, необходимо выполнить несколько действий в заданном порядке. Сначала нужно отсоединить диск от виртуальной машины и удалить его, а затем удалить VHD-файл.

> [!WARNING]
> Если удалить исходный VHD-файл из хранилища или удалить учетную запись хранения, корпорация Майкрософт не сможет восстановить эти данные.
> 

## <a name="types-of-disks"></a>Типы дисков 

Диски Azure обеспечивают доступность на уровне 99,999 %. Они гарантируют согласованную надежность корпоративного уровня с ведущим в отрасли нулевым показателем процента брака по итогам продаж в течение одного года.

При создании дисков можно выбрать один из двух типов хранилища с разным уровнем производительности: хранилище класса Standard или хранилище класса Premium. Кроме того, существуют два типа дисков — неуправляемые и управляемые. Эти диски могут размещаться на любом уровне производительности.


### <a name="standard-storage"></a>Хранилище уровня "Стандартный" 

Хранилище класса Standard использует жесткие диски и обеспечивает экономичное хранилище с достаточной производительностью. Хранилище этого класса может локально реплицироваться в один центр обработки данных или же быть геоизбыточным с основным и дополнительным центрами обработки данных. Дополнительные сведения о репликации хранилища см. в статье [Репликация службы хранилища Azure](../articles/storage/common/storage-redundancy.md). 

Дополнительные сведения об использовании хранилища класса Standard с дисками виртуальной машины см. в [этой статье](../articles/virtual-machines/windows/standard-storage.md).

### <a name="premium-storage"></a>Хранилище уровня "Премиум" 

Хранилище класса Premium использует диски SSD и обеспечивает поддержку дисков с высокой производительностью и малой задержкой для виртуальных машин с интенсивными рабочими нагрузками ввода-вывода. Хранилище класса Premium можно использовать с виртуальными машинами Azure таких серий, как DS, DSv2, GS, Ls или FS. Дополнительные сведения см. в статье [Хранилище класса "Премиум": высокопроизводительная служба хранилища для рабочих нагрузок виртуальных машин Azure](../articles/virtual-machines/windows/premium-storage.md).

### <a name="unmanaged-disks"></a>Неуправляемые диски

Неуправляемые диски — это традиционный тип дисков, используемых виртуальными машинами. При их использовании можно создать собственную учетную запись хранения и указать ее во время создания диска. Одна учетная запись хранения не должна содержать очень много дисков, так как в случае превышения [значений масштабируемости](../articles/storage/common/storage-scalability-targets.md) учетной записи хранения (например, 20 000 операций ввода-вывода в секунду) производительность виртуальных машин будет отрегулирована. Необходимо понять, как эффективно использовать одну или несколько учетных записей хранения, чтобы получить высокую производительность виртуальных машин.

### <a name="managed-disks"></a>Управляемые диски 

Управляемые диски выполняют создание учетной записи хранения и управление ею в фоновом режиме. При этом вам не нужно беспокоиться об ограничениях масштабируемости учетной записи хранения. Вам просто необходимо указать размер диска и уровень производительности (Standard или Premium), а создание и управление Azure берет на себя. Даже при добавлении дисков или масштабировании виртуальной машины не нужно беспокоиться об используемом хранилище. 

Вы также можете управлять пользовательскими образами в одной учетной записи хранения на каждый регион Azure и использовать их для создания сотен виртуальных машин в одной подписке. Дополнительные сведения об управляемых дисках Azure см. в [этой статье](../articles/virtual-machines/windows/managed-disks-overview.md).

Для новых виртуальных машин рекомендуется использовать управляемые диски Azure. Кроме того, мы советуем преобразовать неуправляемые диски в управляемые, чтобы получить преимущества доступных возможностей управляемых дисков.

### <a name="disk-comparison"></a>Сравнение дисков

В таблице ниже сравниваются диски классов Premium и Standard для неуправляемых и управляемых дисков.

|    | Диски Azure класса Premium | Диски Azure класса Standard |
|--- | ------------------ | ------------------- |
| Тип диска | Твердотельные накопители (SSD) | Жесткие диски (HDD)  |
| Обзор  | Поддержка дисков SSD с высокой производительностью и малой задержкой для виртуальных машин, где выполняются интенсивные рабочие нагрузки ввода-вывода или размещается критически важная рабочая среда | Поддержка экономичных дисков HDD для сценариев разработки и тестирования виртуальной машины |
| Сценарий  | Рабочая среда, чувствительная к уровню производительности | Среда разработки и тестирования, некритичные задачи, <br>нечастый доступ |
| Размер диска | P4: 32 ГБ (только управляемые диски)<br>P6: 64 ГБ (только управляемые диски)<br>P10: 128 ГБ<br>P20: 512 ГБ<br>P30: 1024 ГБ<br>P40: 2048 ГБ<br>P50: 4095 ГБ | Неуправляемые диски: 1 ГБ – 4 ТБ (4095 ГБ) <br><br>Управляемые диски:<br> S4: 32 ГБ <br>S6: 64 ГБ <br>S10: 128 ГБ <br>S20: 512 ГБ <br>S30: 1024 ГБ <br>S40: 2048 ГБ<br>S50: 4095 ГБ| 
| Макс. пропускная способность на диск | 250 МБ/с | 60 МБ/с | 
| Макс. количество операций ввода-вывода на диск | 7500 операций ввода-вывода в секунду | 500 операций ввода-вывода/с | 

