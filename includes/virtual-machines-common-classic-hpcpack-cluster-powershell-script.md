



<span data-ttu-id="01ccf-101">В зависимости от среды и заданных параметров hello скрипт может создать всю инфраструктуру кластера hello, включая hello виртуальной сети Azure, учетных записей хранилища, облачные службы, контроллер домена, удаленным или локальным базам данных SQL, головной узел и дополнительных кластеров узлы.</span><span class="sxs-lookup"><span data-stu-id="01ccf-101">Depending on your environment and choices, hello script can create all hello cluster infrastructure, including hello Azure virtual network, storage accounts, cloud services, domain controller, remote or local SQL databases, head node, and additional cluster nodes.</span></span> <span data-ttu-id="01ccf-102">Кроме того hello скрипт можно использовать существующую инфраструктуру Azure и создавать только hello узлы кластера HPC.</span><span class="sxs-lookup"><span data-stu-id="01ccf-102">Alternatively, hello script can use pre-existing Azure infrastructure and create only hello HPC cluster nodes.</span></span>

<span data-ttu-id="01ccf-103">Дополнительные сведения о планировании кластере HPC Pack см. в разделе hello [оценка и планирование продукта](https://technet.microsoft.com/library/jj899596.aspx) и [Приступая к работе](https://technet.microsoft.com/library/jj899590.aspx) содержимого в hello библиотека HPC Pack 2012 R2 TechNet.</span><span class="sxs-lookup"><span data-stu-id="01ccf-103">For background information about planning an HPC Pack cluster, see hello [Product Evaluation and Planning](https://technet.microsoft.com/library/jj899596.aspx) and [Getting Started](https://technet.microsoft.com/library/jj899590.aspx) content in hello HPC Pack 2012 R2 TechNet Library.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="01ccf-104">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="01ccf-104">Prerequisites</span></span>
* <span data-ttu-id="01ccf-105">**Подписка Azure**: подписки можно использовать в любом hello Azure Global или Azure China.</span><span class="sxs-lookup"><span data-stu-id="01ccf-105">**Azure subscription**: You can use a subscription in either hello Azure Global or Azure China service.</span></span> <span data-ttu-id="01ccf-106">Предельно возможными для подписки влияет на количество hello и тип узлов кластера, которые можно развернуть.</span><span class="sxs-lookup"><span data-stu-id="01ccf-106">Your subscription limits affect hello number and type of cluster nodes you can deploy.</span></span> <span data-ttu-id="01ccf-107">Дополнительные сведения см. в статье [Подписка Azure, границы, квоты и ограничения службы](../articles/azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="01ccf-107">For information, see [Azure subscription and service limits, quotas, and constraints](../articles/azure-subscription-service-limits.md).</span></span>
* <span data-ttu-id="01ccf-108">**Клиентский компьютер Windows с помощью Azure PowerShell 0.8.10 или более поздней версии установлен и настроен**: в разделе [Приступая к работе с Azure PowerShell](/powershell/azureps-cmdlets-docs) для установки инструкции и действия tooconnect tooyour подписки Azure.</span><span class="sxs-lookup"><span data-stu-id="01ccf-108">**Windows client computer with Azure PowerShell 0.8.10 or later installed and configured**: See [Get started with Azure PowerShell](/powershell/azureps-cmdlets-docs) for installation instructions and steps tooconnect tooyour Azure subscription.</span></span>
* <span data-ttu-id="01ccf-109">**Скрипт развертывания IaaS пакета HPC**: Загрузите и распакуйте hello последнюю версию скрипта hello из hello [центра загрузки Майкрософт](https://www.microsoft.com/download/details.aspx?id=44949).</span><span class="sxs-lookup"><span data-stu-id="01ccf-109">**HPC Pack IaaS deployment script**: Download and unpack hello latest version of hello script from hello [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span></span> <span data-ttu-id="01ccf-110">Проверьте версию hello hello сценария, выполнив команду `New-HPCIaaSCluster.ps1 –Version`.</span><span class="sxs-lookup"><span data-stu-id="01ccf-110">Check hello version of hello script by running `New-HPCIaaSCluster.ps1 –Version`.</span></span> <span data-ttu-id="01ccf-111">Эта статья основана на версии 4.5.2 hello скрипта.</span><span class="sxs-lookup"><span data-stu-id="01ccf-111">This article is based on version 4.5.2 of hello script.</span></span>
* <span data-ttu-id="01ccf-112">**Файл конфигурации сценария**: создать XML-файл, что скрипт hello использует кластера HPC tooconfigure hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-112">**Script configuration file**: Create an XML file that hello script uses tooconfigure hello HPC cluster.</span></span> <span data-ttu-id="01ccf-113">Сведения и примеры см. разделы этой статьи и hello файле Manual.rtf, сопровождающее hello скрипт развертывания.</span><span class="sxs-lookup"><span data-stu-id="01ccf-113">For information and examples, see sections later in this article and hello file Manual.rtf that accompanies hello deployment script.</span></span>

## <a name="syntax"></a><span data-ttu-id="01ccf-114">Синтаксис</span><span class="sxs-lookup"><span data-stu-id="01ccf-114">Syntax</span></span>
```PowerShell
New-HPCIaaSCluster.ps1 [-ConfigFile] <String> [-AdminUserName]<String> [[-AdminPassword] <String>] [[-HPCImageName] <String>] [[-LogFile] <String>] [-Force] [-NoCleanOnFailure] [-PSSessionSkipCACheck] [<CommonParameters>]
```
> [!NOTE]
> <span data-ttu-id="01ccf-115">Запустите сценарий hello с правами администратора.</span><span class="sxs-lookup"><span data-stu-id="01ccf-115">Run hello script as an administrator.</span></span>
> 
> 

### <a name="parameters"></a><span data-ttu-id="01ccf-116">Параметры</span><span class="sxs-lookup"><span data-stu-id="01ccf-116">Parameters</span></span>
* <span data-ttu-id="01ccf-117">**ConfigFile**: Указывает путь к файлу hello hello hello конфигурации файла toodescribe кластера HPC.</span><span class="sxs-lookup"><span data-stu-id="01ccf-117">**ConfigFile**: Specifies hello file path of hello configuration file toodescribe hello HPC cluster.</span></span> <span data-ttu-id="01ccf-118">См. Дополнительные сведения о hello файл конфигурации в этом разделе или в файле hello Manual.rtf в папке hello, содержащий скрипт, hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-118">See more about hello configuration file in this topic, or in hello file Manual.rtf in hello folder containing hello script.</span></span>
* <span data-ttu-id="01ccf-119">**AdminUserName**: Указывает имя пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-119">**AdminUserName**: Specifies hello user name.</span></span> <span data-ttu-id="01ccf-120">Если hello доменный лес создается сценарием hello, оно становится hello именем пользователя локального администратора для всех виртуальных машин и имя администратора домена hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-120">If hello domain forest is created by hello script, this becomes hello local administrator user name for all VMs and hello domain administrator name.</span></span> <span data-ttu-id="01ccf-121">Если hello доменный лес уже существует, пользователь домена hello указывает как hello tooinstall имя пользователя локального администратора пакета HPC.</span><span class="sxs-lookup"><span data-stu-id="01ccf-121">If hello domain forest already exists, this specifies hello domain user as hello local administrator user name tooinstall HPC Pack.</span></span>
* <span data-ttu-id="01ccf-122">**AdminPassword**: Указывает пароль администратора hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-122">**AdminPassword**: Specifies hello administrator’s password.</span></span> <span data-ttu-id="01ccf-123">Если не указан в командной строке hello, hello сценарий предложит tooinput hello пароль.</span><span class="sxs-lookup"><span data-stu-id="01ccf-123">If not specified in hello command line, hello script prompts you tooinput hello password.</span></span>
* <span data-ttu-id="01ccf-124">**HPCImageName** (необязательно): Указывает имя образа виртуальной Машины HPC Pack hello использовать кластер HPC toodeploy hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-124">**HPCImageName** (optional): Specifies hello HPC Pack VM image name used toodeploy hello HPC cluster.</span></span> <span data-ttu-id="01ccf-125">Он должен быть предоставленный корпорацией Майкрософт пакета HPC образом из hello Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="01ccf-125">It must be a Microsoft-provided HPC Pack image from hello Azure Marketplace.</span></span> <span data-ttu-id="01ccf-126">Если не указан (рекомендуется обычно), hello скрипт выбирает hello последней публикации [HPC Pack 2012 R2 изображения](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span><span class="sxs-lookup"><span data-stu-id="01ccf-126">If not specified (recommended usually), hello script chooses hello latest published [HPC Pack 2012 R2 image](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span></span> <span data-ttu-id="01ccf-127">последний образ Hello основан на Windows Server 2012 R2 Datacenter с HPC Pack 2012 R2 с обновлением 3 установлены.</span><span class="sxs-lookup"><span data-stu-id="01ccf-127">hello latest image is based on Windows Server 2012 R2 Datacenter with HPC Pack 2012 R2 Update 3 installed.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="01ccf-128">Если не указать действительный образ пакета HPC, развертывание завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="01ccf-128">Deployment fails if you don't specify a valid HPC Pack image.</span></span>
  > 
  > 
* <span data-ttu-id="01ccf-129">**Файл журнала** (необязательно): Указывает путь к файлу журнала развертывания hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-129">**LogFile** (optional): Specifies hello deployment log file path.</span></span> <span data-ttu-id="01ccf-130">Если не указан, сценарий hello создает файл журнала во временном каталоге hello hello компьютере запускается скрипт hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-130">If not specified, hello script creates a log file in hello temp directory of hello computer running hello script.</span></span>
* <span data-ttu-id="01ccf-131">**Force** (необязательно): подавляет все запросы подтверждения hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-131">**Force** (optional): Suppresses all hello confirmation prompts.</span></span>
* <span data-ttu-id="01ccf-132">**NoCleanOnFailure** (необязательно): Указывает, что hello виртуальных машинах Azure, который не развернут, не удаляются.</span><span class="sxs-lookup"><span data-stu-id="01ccf-132">**NoCleanOnFailure** (optional): Specifies that hello Azure VMs that are not successfully deployed are not removed.</span></span> <span data-ttu-id="01ccf-133">Вручную удалить эти виртуальные машины перед повторным выполнением toocontinue hello hello скрипт развертывания или hello развертывание может завершиться ошибкой.</span><span class="sxs-lookup"><span data-stu-id="01ccf-133">Remove these VMs manually before rerunning hello script toocontinue hello deployment, or hello deployment may fail.</span></span>
* <span data-ttu-id="01ccf-134">**PSSessionSkipCACheck** (необязательно): для каждой облачной службы с виртуальными машинами, развернутыми этим скриптом самозаверяющий сертификат автоматически формируется Azure и hello все виртуальные машины в облачной службе hello использования этого сертификата, как Windows по умолчанию hello Сертификат удаленного управления (WinRM).</span><span class="sxs-lookup"><span data-stu-id="01ccf-134">**PSSessionSkipCACheck** (optional): For every cloud service with VMs deployed by this script, a self-signed certificate is automatically generated by Azure, and all hello VMs in hello cloud service use this certificate as hello default Windows Remote Management (WinRM) certificate.</span></span> <span data-ttu-id="01ccf-135">toodeploy компонентов HPC в этих виртуальных машинах Azure, скрипт hello по умолчанию временно устанавливает эти сертификаты в локальном компьютере hello\\хранилище доверенных корневых центров сертификации hello клиентского компьютера toosuppress Здравствуйте «не доверенным ЦС» безопасности Ошибка во время выполнения скрипта.</span><span class="sxs-lookup"><span data-stu-id="01ccf-135">toodeploy HPC features in these Azure VMs, hello script by default temporarily installs these certificates in hello Local Computer\\Trusted Root Certification Authorities store of hello client computer toosuppress hello “not trusted CA” security error during script execution.</span></span> <span data-ttu-id="01ccf-136">Hello сертификаты будут удалены после завершения скрипта hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-136">hello certificates are removed when hello script finishes.</span></span> <span data-ttu-id="01ccf-137">Если этот параметр указан, hello сертификаты не установлены в клиентском компьютере hello и подавляется hello предупреждение системы безопасности.</span><span class="sxs-lookup"><span data-stu-id="01ccf-137">If this parameter is specified, hello certificates are not installed in hello client computer, and hello security warning is suppressed.</span></span>
  
  > [!IMPORTANT]
  > <span data-ttu-id="01ccf-138">Не рекомендуется использовать этот параметр для развертывания в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="01ccf-138">This parameter is not recommended for production deployments.</span></span>
  > 
  > 

### <a name="example"></a><span data-ttu-id="01ccf-139">Пример</span><span class="sxs-lookup"><span data-stu-id="01ccf-139">Example</span></span>
<span data-ttu-id="01ccf-140">Hello следующий пример создает кластере HPC Pack с помощью файла конфигурации *MyConfigFile.xml*и указывает учетные данные администратора для установки кластера hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-140">hello following example creates an HPC Pack cluster using the configuration file *MyConfigFile.xml*, and specifies administrator credentials for installing hello cluster.</span></span>

```PowerShell
.\New-HPCIaaSCluster.ps1 –ConfigFile MyConfigFile.xml -AdminUserName <username> –AdminPassword <password>
```

### <a name="additional-considerations"></a><span data-ttu-id="01ccf-141">Дополнительные замечания</span><span class="sxs-lookup"><span data-stu-id="01ccf-141">Additional considerations</span></span>
* <span data-ttu-id="01ccf-142">Hello сценария можно дополнительно включить отправки заданий через веб-портал HPC Pack hello или HPC Pack REST API hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-142">hello script can optionally enable job submission through hello HPC Pack web portal or hello HPC Pack REST API.</span></span>
* <span data-ttu-id="01ccf-143">Hello скрипта можно при необходимости выполнить пользовательские скрипты, выполняемые до и после конфигурации на головном узле hello, если требуется дополнительное программное обеспечение tooinstall или настроить другие параметры.</span><span class="sxs-lookup"><span data-stu-id="01ccf-143">hello script can optionally run custom pre- and post-configuration scripts on hello head node if you want tooinstall additional software or configure other settings.</span></span>

## <a name="configuration-file"></a><span data-ttu-id="01ccf-144">Файл конфигурации</span><span class="sxs-lookup"><span data-stu-id="01ccf-144">Configuration file</span></span>
<span data-ttu-id="01ccf-145">файл конфигурации Hello для скрипта развертывания hello является XML-файл.</span><span class="sxs-lookup"><span data-stu-id="01ccf-145">hello configuration file for hello deployment script is an XML file.</span></span> <span data-ttu-id="01ccf-146">Hello файл схемы HPCIaaSClusterConfig.xsd находится в папке скрипта развертывания IaaS пакета HPC hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-146">hello schema file HPCIaaSClusterConfig.xsd is in hello HPC Pack IaaS deployment script folder.</span></span> <span data-ttu-id="01ccf-147">**IaaSClusterConfig** является корневым элементом файла конфигурации hello, содержит дочерние элементы hello, подробно описаны в файле hello Manual.rtf в папке скрипта развертывания hello hello.</span><span class="sxs-lookup"><span data-stu-id="01ccf-147">**IaaSClusterConfig** is hello root element of hello configuration file, which contains hello child elements described in detail in hello file Manual.rtf in hello deployment script folder.</span></span>

