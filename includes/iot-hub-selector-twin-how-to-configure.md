> [!div class="op_single_selector"]
> * [Node.js](../articles/iot-hub/iot-hub-node-node-twin-how-to-configure.md)
> * [C#/Node.js](../articles/iot-hub/iot-hub-csharp-node-twin-how-to-configure.md)
> * [C#](../articles/iot-hub/iot-hub-csharp-csharp-twin-how-to-configure.md)
> 
> 

## <a name="introduction"></a>Введение

В [Приступая к работе с близнецы устройства центра IoT][lnk-twin-tutorial], вы узнали, как метаданные tooset устройства из решения обратно завершить с помощью *теги*, зарегистрировать устройство ошибки из приложения для устройств с помощью *сообщил свойства*и эти сведения с помощью SQL-подобного языка запросов.

В этом учебнике вы узнаете, как toouse hello hello устройства двойных *требуемого свойства* вместе с *сообщил свойства*, tooremotely Настройка приложений для устройств. В частности в этом учебнике показано, как устройство двойных сообщил и нужные свойства многоэтапной конфигурацию приложения устройства и предоставить hello видимость toohello решения конец hello состояние этой операции на всех устройствах. Можно найти дополнительные сведения о роли hello конфигураций устройства в [Обзор управления устройствами с центром IoT][lnk-dm-overview].

На высоком уровне hello решения серверной части toospecify hello требуемой конфигурацией для устройств, управляемых hello, вместо того чтобы отправлять команды благодаря использованию близнецы устройства. Этот запрос помещает устройства hello за настройку hello лучшим способом tooupdate его конфигурации (очень важно в сценариях IoT, где hello возможность tooimmediately выполнить определенные команды влияют на условия конкретного устройства), при постоянно reporting toohello решение обратно завершить текущее состояние hello и потенциальных ошибок hello процесса обновления. Этот шаблон является инструментального toohello управление большими наборами устройств, как позволяет hello серверной части решения toohave полную видимость hello состояние процесса настройки hello на всех устройствах.

> [!NOTE]
> В сценариях, где управление устройствами осуществляется в интерактивном режиме (включение вентилятора с помощью пользовательского приложения), используйте [прямые методы][lnk-methods].
> 
> 

В этом учебнике hello решения серверной части конфигурации телеметрии hello целевого устройства и в результате, приложение hello устройства следует tooapply многоступенчатый процесс конфигурации изменения (например, требующих перезагрузки модуль программного обеспечения, какой это Учебник имитирует с простой задержки).

серверной части решения Hello хранит конфигурацию hello в нужные свойства устройства двойных hello hello следующими способами:

        {
            ...
            "properties": {
                ...
                "desired": {
                    "telemetryConfig": {
                        "configId": "{id of hello configuration}",
                        "sendFrequency": "{config}"
                    }
                }
                ...
            }
            ...
        }

> [!NOTE]
> Поскольку конфигурации может быть сложные объекты, они обычно назначаются уникальные идентификаторы (хэши или [GUID][lnk-guid]) toosimplify их сравнения.
> 
> 

Hello приложения для устройств сообщает о текущей конфигурации зеркального отображения свойство hello требуемого **telemetryConfig** включается в hello свойства:

        {
            "properties": {
                ...
                "reported": {
                    "telemetryConfig": {
                        "changeId": "{id of hello current configuration}",
                        "sendFrequency": "{current configuration}",
                        "status": "Success",
                    }
                }
                ...
            }
        }

Обратите внимание, как выводятся hello **telemetryConfig** имеет дополнительное свойство **состояние**, используемые tooreport hello состояние процесса обновления настройки hello.

При получении нового требуемой конфигурацией приложение hello устройство сообщает ожидает настройки необходимо изменить сведения о hello:

        {
            "properties": {
                ...
                "reported": {
                    "telemetryConfig": {
                        "changeId": "{id of hello current configuration}",
                        "sendFrequency": "{current configuration}",
                        "status": "Pending",
                        "pendingConfig": {
                            "changeId": "{id of hello pending configuration}",
                            "sendFrequency": "{pending configuration}"
                        }
                    }
                }
                ...
            }
        }

Затем в дальнейшем, приложение hello устройства сообщит hello успешности этой операции, обновив hello значения свойства.
Обратите внимание на то, как серверной части hello решение способно, в любое время tooquery hello состояние процесса настройки hello на всех устройствах hello.

В этом учебнике описаны следующие процедуры.

* Создать приложение имитированное устройство, которое получает обновления конфигурации из серверной части решения hello и информирует как *сообщил свойства* hello конфигурации процесса обновления.
* Создайте приложение на серверной стороне обновлений hello требуемой конфигурацией устройства, которое затем запросы hello процесс обновления конфигурации.

<!-- links -->

[lnk-methods]: ../articles/iot-hub/iot-hub-devguide-direct-methods.md
[lnk-dm-overview]: ../articles/iot-hub/iot-hub-device-management-overview.md
[lnk-twin-tutorial]: ../articles/iot-hub/iot-hub-node-node-twin-getstarted.md
[lnk-guid]: https://en.wikipedia.org/wiki/Globally_unique_identifier
