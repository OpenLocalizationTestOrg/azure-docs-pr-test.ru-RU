# <a name="regions-and-availability-for-virtual-machines-in-azure"></a>Регионы и доступность виртуальных машин в Azure
Azure работает на основе множества центров обработки данных по всему миру. Эти центры обработки данных объединены в группы по географическому признаку, обеспечивая гибкость при выборе расположения для создания приложений. Чтобы повысить производительность, доступность и избыточность, нужно понимать, как работают и где расположены виртуальные машины в Azure, а также их параметры. В этой статье содержатся сведения о функциях доступности и избыточности Azure.

## <a name="what-are-azure-regions"></a>Что такое регионы Azure?
Ресурсы Azure создаются в определенных географических регионах, например "Западная часть США", "Северная Европа" или "Юго-Восточная Азия". Вы можете просмотреть [список регионов и расположений](https://azure.microsoft.com/regions/). В каждом регионе существует несколько центров обработки данных, чтобы обеспечить избыточность и доступность. Благодаря этому у вас есть широкий выбор при разработке приложений: виртуальные машины можно создавать максимально близко к пользователям, учитывая юридические аспекты, соответствие требованиям и условия налогообложения в том или ином регионе.

## <a name="special-azure-regions"></a>Особые регионы Azure
Существует несколько особых регионов Azure, где действуют отличные от других правила соответствия или правовые условия, которые вы, возможно, захотите использовать при создании приложений. Эти регионы приведены ниже.

* **Виргиния (для обслуживания государственных организаций США)** и **Айова (для обслуживания государственных организаций США)**
  * Физически и логически изолированный от сетей экземпляр Azure для государственных учреждений США и их партнеров, в котором операторами работают граждане США, прошедшие проверку. Включает в себя дополнительные подтверждения соответствия требованиям, такие как [FedRAMP](https://www.microsoft.com/en-us/TrustCenter/Compliance/FedRAMP) и [DISA](https://www.microsoft.com/en-us/TrustCenter/Compliance/DISA). Узнайте больше об [Azure для государственных организаций](https://azure.microsoft.com/features/gov/).
* **Восточная часть Китая** и **северная часть Китая**
  * Эти области доступны благодаря уникальным партнерским отношениям между корпорацией Майкрософт и компанией 21Vianet, по условиям которых Майкрософт не обслуживает центры обработки данных напрямую. Узнайте больше о [Microsoft Azure в Китае](http://www.windowsazure.cn/).
* **Центральная Германия** и **северо-восточная Германия**
  * Azure предоставляется по модели доступа к данным, по которой данные клиента остаются в Германии под управлением немецкой телекоммуникационной компании T-Systems, выступающей в качестве управителя данными в Германии.

## <a name="region-pairs"></a>Пары регионов
Каждый регион Azure образует пару с другим регионом в пределах той же географической территории (например США, Европа или Азия). Это позволяет выполнять репликацию ресурсов, таких как хранилище виртуальной машины, между географическими областями, тем самым уменьшая вероятность последствий стихийных бедствий, массовых беспорядков, отключения электроэнергии или физического выхода сети из строя в обоих регионах одновременно. К дополнительным преимуществам пар регионов можно также отнести следующие:

* В случае более масштабного сбоя в работе Azure в каждой паре определяется приоритетный регион, чтобы ускорить восстановление приложений. 
* Запланированные обновления Azure распространяются среди парных регионов последовательно, чтобы свести к минимуму время простоя и риск сбоев в работе приложений.
* Данные будут по-прежнему находиться в одной географической области со своей парой (за исключением южной Бразилии). Это связано с требованиями к налогообложению и юрисдикции применения законодательства.

Примеры пар регионов:

| Первичная | Вторичная |
|:--- |:--- |
| Запад США |Восток США |
| Северная Европа |Западная Европа |
| Юго-Восточная Азия |Восточная Азия |

Вы можете просмотреть полный список пар регионов [здесь](../articles/best-practices-availability-paired-regions.md#what-are-paired-regions).

## <a name="feature-availability"></a>Доступность функций
Некоторые службы или функции виртуальных машин доступны только в отдельных регионах, например определенные размеры виртуальных машин или типы хранилищ. Также есть глобальные службы Azure, не требующие выбора определенного региона. К ним относятся, например, [Azure Active Directory](../articles/active-directory/active-directory-whatis.md), [диспетчер трафика](../articles/traffic-manager/traffic-manager-overview.md) и [Azure DNS](../articles/dns/dns-overview.md). При разработке среды приложения вам поможет проверка [доступности служб Azure в каждом регионе](https://azure.microsoft.com/regions/#services). Вы также можете [программно запрашивать поддерживаемые размеры и ограничения виртуальной машины в каждом регионе](../articles/azure-resource-manager/resource-manager-sku-not-available-errors.md).

## <a name="storage-availability"></a>Доступность службы хранилища
Понимание регионов и географических областей Azure также важно при рассмотрении доступных возможностей репликации службы хранилища. В зависимости от типа хранилища существуют различные параметры репликации.

**Управляемые диски Azure**
* Локально избыточное хранилище (LRS)
  * Трижды реплицирует ваши данные в регионе, в котором создана учетная запись хранения.

**Диски на основе учетных записей хранения**
* Локально избыточное хранилище (LRS)
  * Трижды реплицирует ваши данные в регионе, в котором создана учетная запись хранения.
* Хранилище, избыточное в пределах зоны (ZRS)
  * Трижды реплицирует ваши данные в двух или трех зданиях в одном регионе или в двух регионах.
* Геоизбыточное хранилище (GRS)
  * Реплицирует данные в дополнительный регион, который находится в сотнях километров от основного региона.
* Геоизбыточное хранилище с доступом для чтения (RA-GRS)
  * Реплицирует данные в дополнительный регион, как и в варианте GRS, но при этом предоставляет доступ для чтения к данным в дополнительном расположении.

В таблице ниже представлено краткое описание различий между типами репликации хранилища.

| Стратегия репликации | LRS | ZRS | GRS | RA-GRS |
|:--- |:--- |:--- |:--- |:--- |
| Данные реплицируются в нескольких помещениях. |Нет |Да |Да |Да |
| Данные можно считать как из основного, так и из дополнительного местоположения. |Нет |Нет |Нет |Да |
| Количество обслуживаемых копий данных на отдельных узлах. |3 |3 |6 |6 |

Дополнительные сведения о параметрах репликации службы хранилища Azure см. [здесь](../articles/storage/common/storage-redundancy.md). Дополнительные сведения об управляемых дисках Azure см. в [этой статье](../articles/virtual-machines/windows/managed-disks-overview.md).

### <a name="storage-costs"></a>Затраты на хранение
Цены зависят от выбранного типа хранилища и от указанных параметров доступности.

**Управляемые диски Azure**
* Управляемые диски класса "Премиум" используют твердотельные накопители, а управляемые диски класса "Стандартный" — обычные вращающиеся жесткие диски. Плата за управляемые диски класса Premium и Standard взимается в зависимости от подготовленной емкости для диска.

**Неуправляемые диски**
* Для ценовой категории "Премиум" используются твердотельные накопители (SSD). Плата взимается, исходя из емкости диска.
* Для ценовой категории "Стандартный" используются обычные вращающиеся жесткие диски. Плата взимается на основании фактически используемой емкости и выбранной доступности хранилища.
  * При использовании варианта RA-GRS дополнительно оплачивается передача данных при георепликации, исходя из пропускной способности репликации этих данных в другой регион Azure.

В разделе [Цены на хранилища Azure](https://azure.microsoft.com/pricing/details/storage/) приведены сведения о различных типах хранилища и параметрах доступности.

## <a name="availability-sets"></a>Группы доступности
Группа доступности — это логическое объединение виртуальных машин в центре обработки данных, которое позволяет Azure определить структуру вашего приложения, чтобы обеспечить избыточность и доступность. Для обеспечения высокой доступности приложения и достижения показателя [99,95 % уровня обслуживания (SLA) Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines/) мы рекомендуем создать в группе доступности не менее двух виртуальных машин. Если отдельная виртуальная машина использует [хранилище Azure класса Premium](../articles/virtual-machines/windows/premium-storage.md), соглашение об уровне обслуживания Azure применяется для внеплановых мероприятий обслуживания. 

Группа доступности включает в себя две дополнительные группы, обеспечивающие защиту от сбоев оборудования и позволяющие безопасно применять обновления, — это домены сбоя и домены обновления. Вы можете ознакомиться с дополнительными сведениями об управлении доступностью [виртуальных машин Linux](../articles/virtual-machines/linux/manage-availability.md) и [виртуальных машин Windows](../articles/virtual-machines/windows/manage-availability.md).

### <a name="fault-domains"></a>Домены сбоя
Домен сбоя — это логическая группа базового оборудования, которое совместно использует общий источник питания и сетевой коммутатор, аналогично стойке в локальном центре обработки данных. При создании виртуальных машин в группе доступности платформа Azure автоматически распределяет их между такими доменами сбоя. Данный подход ограничивает влияние потенциальных сбоев физического оборудования, сети или электропитания.

### <a name="update-domains"></a>Домены обновления
Домен обновления — это логическая группа базового оборудования, которое может одновременно обслуживаться или перезагружаться. При создании виртуальных машин в группе доступности платформа Azure автоматически распределяет их между такими доменами обновления. Такой подход гарантирует, что по крайней мере один экземпляр приложения будет работать во время периодического обслуживания платформы Azure. Порядок перезагрузки доменов обновления при выполнении запланированного обслуживания может не быть последовательным, но за один раз будет перезагружаться только один домен обновления.

### <a name="managed-disk-fault-domains"></a>Домены сбоя управляемых дисков
При использовании управляемой группы доступности виртуальные машины, использующие [управляемые диски Azure](../articles/virtual-machines/windows/faq-for-disks.md), согласовываются с доменами сбоя управляемого диска. Это гарантирует, что все управляемые диски, подключенные к виртуальной машине, относятся к одному домену сбоя управляемого диска. В управляемой группе доступности можно создать только виртуальные машины с управляемыми дисками. Количество доменов сбоя управляемых дисков зависит от региона: два или три на один регион. См. дополнительные сведения о доменах сбоя управляемых дисков для [виртуальных машин Linux](../articles/virtual-machines/linux/manage-availability.md?#use-managed-disks-for-vms-in-an-availability-set) и [виртуальных машин Windows](../articles/virtual-machines/linux/manage-availability.md?#use-managed-disks-for-vms-in-an-availability-set).

## <a name="availability-zones"></a>Зоны доступности

[Зоны доступности](../articles/availability-zones/az-overview.md) (предварительная версия) — это альтернатива группам доступности. Это решение позволяет повысить уровень контроля, обеспечивая доступность приложений и данных на виртуальных машинах. Зона доступности — это физически изолированная зона в регионе Azure. В каждом поддерживаемом регионе Azure есть три зоны доступности. Каждая зона доступности имеет отдельный источник питания, сеть и систему охлаждения. Все зоны доступности в пределах региона Azure логически разделены. Вы можете защитить приложения и данные от потери в центре обработки данных, настроив свои решения для использования реплицированных виртуальных машин в зонах доступности. В случае неполадок с одной зоной реплицированные приложения и данные сразу же станут доступными в другой зоне. 

![Зоны доступности](./media/virtual-machines-common-regions-and-availability/three-zones-per-region.png)

[!INCLUDE [availability-zones-preview-statement.md](availability-zones-preview-statement.md)]

См. дополнительные сведения о развертывании виртуальных машин [Windows](../articles/virtual-machines/windows/create-powershell-availability-zone.md) или [Linux](../articles/virtual-machines/linux/create-cli-availability-zone.md) в зонах доступности.

## <a name="next-steps"></a>Дальнейшие действия
Теперь вы можете использовать функции доступности и избыточности для создания среды Azure. Рекомендации см. в статье [Контрольный список для обеспечения доступности](../articles/best-practices-availability-checklist.md).

