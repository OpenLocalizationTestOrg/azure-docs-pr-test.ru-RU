Иногда виртуальных машин (ВМ) Azure может перезагрузить систему без видимой причины без свидетельство вашей после установления операции перезагрузки hello. В этой статье перечислены hello действия и события, которые могут привести к tooreboot виртуальных машин и позволяет контролировать как tooavoid Непредвиденная перезагрузка проблемы или уменьшите hello последствия таких проблем.

## <a name="configure-hello-vms-for-high-availability"></a>Настройка виртуальных машин hello для обеспечения высокой доступности
Перезагружает Hello лучшим способом tooprotect приложения, выполняющегося на Azure от виртуальных Машин, и время простоя сводится к tooconfigure hello виртуальные машины для обеспечения высокой доступности.

tooprovide этот уровень приложения tooyour избыточности, мы рекомендуем сгруппировать две или несколько виртуальных машин в наборе доступности. Эта конфигурация гарантирует, что во время любого запланированного или незапланированного события обслуживания, по крайней мере одна виртуальная машина доступна и соответствует hello 99,95% [соглашения об уровне ОБСЛУЖИВАНИЯ Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines/v1_5/).

Дополнительные сведения о группах доступности см. в разделе hello в следующих статьях:

- [Управление hello доступности виртуальных машин](../articles/virtual-machines/windows/manage-availability.md)
- [Как настроить группу доступности для виртуальных машин Windows в классической модели развертывания](../articles/virtual-machines/windows/classic/configure-availability.md)

## <a name="resource-health-information"></a>Сведения о работоспособности ресурсов 
Azure исправности ресурсов — это служба, который предоставляет hello работоспособности отдельных ресурсов Azure и руководство по устранению неполадок пригодных к использованию. В облачной среде, где не серверы удаленного доступа возможно toodirectly или элементы инфраструктуры цель hello исправности ресурсов — tooreduce hello время, затрачиваемое на устранение неполадок. В частности hello целью является tooreduce hello время определение hello корень проблемы hello связаны ли в приложении hello или событие внутри hello платформы Azure. Дополнительные сведения см. в статье [Обзор службы работоспособности ресурсов Azure](../articles/resource-health/resource-health-overview.md).

## <a name="actions-and-events-that-can-cause-hello-vm-tooreboot"></a>Действия и события, которые могут вызвать hello tooreboot виртуальной Машины

### <a name="planned-maintenance"></a>Плановое техническое обслуживание
Microsoft Azure периодически выполняет обновления через hello земной шар tooimprove hello надежность, производительность и безопасность инфраструктуры узла hello, лежащей в основе виртуальных машин. Многие обновления, в том числе обновления с сохранением памяти, выполняются без последствий для виртуальных машин и облачных служб.

Однако некоторые обновления требуют перезагрузки. В таких случаях hello виртуальных машин, завершают работу, мы patch hello инфраструктуры, а затем был перезапущен hello виртуальных машин.

toounderstand какие Azure планового обслуживания и как его может повлиять на доступность виртуальных машин Linux hello статьях hello перечисленные здесь. Hello статьи содержат сведения, относящиеся к процессу hello планового обслуживания Azure и как tooschedule планового обслуживания toofurther уменьшить влияние hello.

- [Плановое обслуживание виртуальных машин Windows](../articles/virtual-machines/windows/planned-maintenance.md)
- [Как tooschedule планового обслуживания на виртуальных машинах Azure](../articles/virtual-machines/windows/classic/planned-maintenance-schedule.md)

### <a name="memory-preserving-updates"></a>Обновления с сохранением памяти   
При применении таких обновлений в Microsoft Azure клиенты не заметят никаких изменений в работе виртуальных машин. Многие из этих обновлений, toocomponents или службы, которые могут обновляться без конфликта с выполняющимся экземпляром hello. Некоторые являются обновления инфраструктуры платформы на hello операционной системы, могут применяться без перезагрузки hello виртуальных машин.

Эти обновления с сохранением памяти выполняются с помощью технологии, позволяющей использовать динамическую миграцию на месте. При его в процессе обновления hello виртуальной Машины размещается в *приостановлена* состояния. Это состояние сохраняется памяти hello в оперативной памяти во время базовой операционной системы hello получает hello необходимых обновлений и исправлений. в течение 30 секунд для приостановки возобновляется Hello виртуальной Машины. После приветствия виртуальной Машины будет возобновлена автоматически синхронизируются его часов.

Из-за период короче hello развертывание обновлений через этот механизм значительно уменьшает влияние hello на hello виртуальных машин. Но не все обновления можно развернуть таким образом. 

Обновления для нескольких экземпляров (для виртуальных машин в группе доступности) применяются для одного домена обновления за раз.

> [!NOTE]
> При использовании этого метода обновления могут возникнуть неполадки в компьютерах Linux с устаревшими версиями ядер. tooavoid этой проблемы, обновление tookernel версии 3.10.0-327.10.1 или более поздней версии. Дополнительные сведения о неполадках после обновления узла (для виртуальной машины Linux Azure с ядром 3.10) см. на [этой странице](https://support.microsoft.com/help/3212236).     
    
### <a name="user-initiated-reboot-or-shutdown-actions"></a>Перезапуск, инициированный пользователем, и действия по завершению работы
 
Если выполняется перезагрузка hello портал Azure, Azure PowerShell, интерфейс командной строки или сбросить API hello событий можно найти в hello [журнал действий Azure](../articles/monitoring-and-diagnostics/monitoring-overview-activity-logs.md).

Если действие hello из операционной системы виртуальной Машины hello hello событий можно найти в системные журналы hello.

Другие сценарии, вызывающие tooreboot ВМ hello обычно включают в себя несколько действия изменения конфигурации. Обычно появится предупреждающее сообщение, указывающее, что выполнение конкретного действия приведет к перезагрузка hello виртуальной Машины. Например, все операции изменения размера виртуальной Машины, изменение hello пароль учетной записи администратора hello и настройке статического IP-адреса.

### <a name="azure-security-center-and-windows-update"></a>Центр безопасности Azure и Центр обновления Windows
Центр безопасности Azure ежедневно проверяет наличие обновлений операционной системы для виртуальных машин Windows и Linux. Центр безопасности получает список доступных критических обновлений и обновлений для системы безопасности из Центра обновления Windows или служб Windows Server Update Services в зависимости от того, какая служба настроена для виртуальной машины Windows. Центр обеспечения безопасности также проверяет наличие последних обновлений hello для систем Linux. Если на виртуальной машине отсутствует обновление системы, центр безопасности рекомендует его применить. приложение Hello об этих обновлениях системы контролируется hello центра обеспечения безопасности в hello портал Azure. После применения некоторых обновлений может потребоваться перезапуск виртуальной машины. Дополнительные сведения см. в статье [Применение обновлений системы в центре безопасности Azure](../articles/security-center/security-center-apply-system-updates.md).

Как локальные серверы Azure не push обновлений из центра обновления Windows tooWindows виртуальных машинах Azure, так как эти машины предполагаемого toobe управляемых их пользователями. Однако, рекомендуется tooleave hello автоматического обновления Windows включен параметр. Автоматическая установка обновлений из центра обновления Windows также может привести к перезагрузке toooccur после применения обновлений hello. Дополнительные сведения см. на странице [Центр обновления Windows: вопросы и ответы](https://support.microsoft.com/help/12373/windows-update-faq).

### <a name="other-situations-affecting-hello-availability-of-your-vm"></a>Других ситуациях влияния hello доступность виртуальной Машины
Существуют другие случаи, в которых Azure активно может приостановить hello использование виртуальной Машины. Вы будете получать уведомления по электронной почте до выполнения этого действия, таким образом вы получаете возможность tooresolve hello соответствующих проблем. Вопросы, касающиеся доступности ВМ примеры нарушения безопасности и истечение срока hello способы оплаты.

### <a name="host-server-faults"></a>Ошибки сервера узла 
Hello виртуальная машина размещается на физическом сервере, который выполняется в центре обработки данных Azure. запускает Hello физического сервера на агент вызывается hello агент узла в дополнение tooa несколько других компонентах Azure. Когда эти компоненты Azure программного обеспечения на физическом сервере hello перестать отвечать на запросы, система мониторинга hello инициирует перезагрузка восстановления tooattempt hello узла сервера. Hello виртуальной Машины обычно доступны в течение пяти минут и продолжает работу toolive hello же размещения в соответствии с ранее.

Сбоев сервера обычно по причине сбоя оборудования, например hello сбой жесткого диска или твердотельного накопителя. Azure постоянно отслеживает эти случаи, определяет базовой ошибки hello и развертывает обновления после устранения рисков hello реализованы и протестированы.

Так как некоторые сбоев сервера узла может быть toothat конкретного сервера, повторяющиеся ситуации перезагрузка виртуальной Машины можно повысить, производимое вручную развертывание сервера узла tooanother hello виртуальной Машины. Эта операция может быть вызвано с помощью hello **повторно развернуть** параметр на странице сведений hello hello виртуальной Машины или путем остановки и перезапуска hello виртуальной Машины в hello портал Azure.

### <a name="auto-recovery"></a>Автоматическое восстановление
Если для какой-либо причине не может перезагрузить hello хост-сервере, hello платформы Azure инициирует сервер автоматического восстановления действие tootake hello неисправный узел из ротации для дальнейшего изучения. 

Все виртуальные машины на этом узле будут автоматически перемещенный tooa разных, работоспособности сервера. Этот процесс обычно занимает 15 минут. toolearn Дополнительные сведения о hello процесс автоматического восстановления, в разделе [автоматическое восстановление виртуальных машин](https://azure.microsoft.com/blog/service-healing-auto-recovery-of-virtual-machines).

### <a name="unplanned-maintenance"></a>Внеплановое обслуживание
В редких случаях hello Azure рабочая группа может требуется tooensure действий обслуживания tooperform hello общую работоспособность hello платформы Azure. Это поведение может повлиять на доступность виртуальных Машин, и он обычно приводит hello же действия автоматического восстановления, как описано выше.  

Незапланированная maintenances включить hello следующие:

- срочную дефрагментацию узла;
- срочные обновления сетевого коммутатора.

### <a name="vm-crashes"></a>Сбои виртуальных машин
Виртуальные машины может перезапуститься из-за проблем в самой ВМ hello. Hello рабочей нагрузки или роль, которая выполняется на hello виртуальной Машины может включать и выключать проверку ошибок в hello гостевой операционной системе. Помощь в определении hello причина сбоя hello просмотрите журналы системы и приложения hello для виртуальных машин Windows и hello последовательного журналы для виртуальных машин Linux.

### <a name="storage-related-forced-shutdowns"></a>Принудительное завершение работы, связанное с хранилищем
Виртуальные машины в Azure используют виртуальные диски для операционной системы и хранилища данных, которое размещается в инфраструктуре хранилища Azure hello. Каждый раз, когда доступности hello или подключением hello виртуальной Машины и виртуальные диски hello связанные влияют более 120 секунд, hello платформы Azure выполняет принудительное завершение работы hello повреждение данных tooavoid виртуальных машин. виртуальные машины Hello автоматически включены на после восстановления подключение к хранилищу. 

Длительность Hello hello завершение работы может составлять от 5 минут, но может быть значительно больше. Hello ниже приведен один из определенных случаев hello, связанных с хранилищах принудительного завершения работы: 

**Превышение ограничения количества операций ввода-вывода**

Виртуальные машины могут временно завершить работу, когда запросы ввода-вывода регулируются согласованно, так как hello объем операций ввода-вывода в секунду (IOPS) превышают ограничения hello ввода-вывода для диска hello. (Стандартная дисковое пространство ограничено too500 IOPS.) toomitigate эту проблему, используйте чередование дисков или настроить hello дисковое пространство внутри hello гостевой Виртуальной машине, в зависимости от нагрузки hello. Дополнительные сведения см. на странице [настройки виртуальных машин Azure для обеспечения оптимальной производительности хранилища](http://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx).

Повышенные пределы операций ввода-ВЫВОДА можно загрузить с помощью хранилища Azure Premium с вверх too80 000 операций ввода-ВЫВОДА. Дополнительные сведения см. в статье [Высокопроизводительное хранилище класса Premium и управляемые диски для виртуальных машин Azure](../articles/storage/common/storage-premium-storage.md).

### <a name="other-incidents"></a>Другие инциденты
В редких случаях распространенная проблема может повлиять на несколько серверов в центре обработки данных Azure. При возникновении этой проблемы, hello команды Azure отправляет электронное сообщение уведомления toohello затронутые подписки. Вы можете проверить hello [панель мониторинга работоспособности службы Azure](https://azure.microsoft.com/status/) и hello портала Azure для состояния hello простоев текущих и прошлых инцидентов.
