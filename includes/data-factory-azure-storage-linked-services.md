### <a name="azure-storage-linked-service"></a>Связанная служба хранилища Azure
**Связанная служба хранилища Azure** позволяет связать учетную запись хранения Azure с фабрикой данных Azure с помощью **ключа учетной записи**, который предоставляет фабрике данных глобальный доступ к службе хранилища Azure. В таблице ниже приведено описание элементов JSON, которые относятся к связанной службе хранилища Azure.

| Свойство | ОПИСАНИЕ | Требуется |
|:--- |:--- |:--- |
| Тип |Для свойства type необходимо задать значение **AzureStorage** |Yes |
| connectionString |В свойстве connectionString указываются сведения, необходимые для подключения к службе хранилища Azure. |Yes |

Сведения о просмотре или копировании ключа учетной записи для службы хранилища Azure см. в [этой статье](../articles/storage/common/storage-create-storage-account.md#manage-your-storage-account).

**Пример.**  

```json
{  
    "name": "StorageLinkedService",  
    "properties": {  
        "type": "AzureStorage",  
        "typeProperties": {  
            "connectionString": "DefaultEndpointsProtocol=https;AccountName=<accountname>;AccountKey=<accountkey>"  
        }  
    }  
}  
```

### <a name="azure-storage-sas-linked-service"></a>Связанная служба SAS хранилища Azure
Подписанный URL-адрес (SAS) обеспечивает делегированный доступ к ресурсам в вашей учетной записи хранения. Это позволяет предоставить клиенту ограниченное право на работу с объектами в вашей учетной записи хранения на определенный период времени и с определенным набором разрешений, не сообщая ему ключи доступа к своей учетной записи. SAS — это URI, который в своих параметрах запроса содержит все сведения, необходимые для доступа к ресурсу хранилища с прохождением аутентификации. Для доступа к ресурсам хранилища с помощью SAS клиенту достаточно передать SAS в соответствующий конструктор или метод. Дополнительные сведения о подписанном URL-адресе см. в статье [Использование подписанных URL-адресов (SAS)](../articles/storage/common/storage-dotnet-shared-access-signature-part-1.md).

> [!IMPORTANT]
> Теперь фабрика данных Azure поддерживает только **SAS службы**, а не SAS учетной записи. Сведения об этих двух типах и способах их создания см. в разделе [Типы подписанных URL-адресов](../articles/storage/common/storage-dotnet-shared-access-signature-part-1.md#types-of-shared-access-signatures). Обратите внимание: URL-адрес SAS, который можно создать на портале Azure или в обозревателе хранилищ, является учетной записью SAS, которая не поддерживается в фабрике данных.

> [!TIP]
> Можно выполнить ниже команды PowerShell для создания SAS службы для учетной записи (замены месте владельцев и предоставьте необходимые разрешения):`$context = New-AzureStorageContext -StorageAccountName <accountName> -StorageAccountKey <accountKey>`
> `New-AzureStorageContainerSASToken -Name <containerName> -Context $context -Permission rwdl -StartTime <startTime> -ExpiryTime <endTime> -FullUri`

Связанная служба SAS хранилища Azure позволяет связать учетную запись хранения Azure с фабрикой данных Azure с помощью подписанного URL-адреса (SAS). В этом случае фабрика данных получает ограниченный или привязанный ко времени доступ ко всем или конкретным ресурсам (BLOB-объектам или контейнерам) в хранилище. В таблице ниже приведено описание элементов JSON, которые относятся к связанной службе SAS хранилища Azure. 

| Свойство | ОПИСАНИЕ | Требуется |
|:--- |:--- |:--- |
| Тип |Для свойства type необходимо задать значение **AzureStorageSas** |Yes |
| sasUri |Укажите URI подписанного URL-адреса к ресурсам хранилища Azure, например BLOB-объектам, контейнерам или таблицам.  |Yes |

**Пример.**

```json
{  
    "name": "StorageSasLinkedService",  
    "properties": {  
        "type": "AzureStorageSas",  
        "typeProperties": {  
            "sasUri": "<Specify SAS URI of the Azure Storage resource>"   
        }  
    }  
}  
```

При создании **URI SAS**следует принять во внимание следующие моменты:  

* Задайте для объектов соответствующие **разрешения** на чтение или запись. Они устанавливаются с учетом назначения связанной службы (чтение, запись, чтение и запись) в фабрике данных.
* Задайте **время окончания срока действия** соответствующим образом. Убедитесь, что срок действия доступа к объектам хранилища Azure не истекает в период активности конвейера.
* В зависимости от потребности URI следует создать на нужном уровне контейнера, большого двоичного объекта или таблицы. URI SAS для большого двоичного объекта Azure позволяет службе фабрики данных обращаться к данному конкретному большому двоичному объекту. URI SAS для контейнера больших двоичных объектов Azure позволяет службе фабрики данных выполнять итерацию по большим двоичным объектам в этом контейнере. Чтобы предоставить доступ к большему или меньшему количеству объектов позднее или обновить URI SAS, не забудьте обновить связанную службу с помощью нового URI.   

