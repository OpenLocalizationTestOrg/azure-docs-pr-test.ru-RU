
# <a name="azure-and-internet-of-things"></a><span data-ttu-id="834de-101">Azure и "Интернет вещей"</span><span class="sxs-lookup"><span data-stu-id="834de-101">Azure and Internet of Things</span></span>

<span data-ttu-id="834de-102">Добро пожаловать в Microsoft Azure и "Интернет вещей" (IoT).</span><span class="sxs-lookup"><span data-stu-id="834de-102">Welcome to Microsoft Azure and the Internet of Things (IoT).</span></span> <span data-ttu-id="834de-103">В этой статье рассматривается архитектура решения IoT, описывающая общие характеристики решения IoT, которое можно развернуть с помощью служб Azure.</span><span class="sxs-lookup"><span data-stu-id="834de-103">This article introduces an IoT solution architecture that describes the common characteristics of an IoT solution you might deploy using Azure services.</span></span> <span data-ttu-id="834de-104">Решения Интернета вещей требуют наличия безопасной двусторонней связи между устройствами, количество которых может исчисляться миллионами, а также серверной части решения.</span><span class="sxs-lookup"><span data-stu-id="834de-104">IoT solutions require secure, bidirectional communication between devices, possibly numbering in the millions, and a solution back end.</span></span> <span data-ttu-id="834de-105">Например, серверная часть решения может использовать прогнозную аналитику для анализа данных в потоке событий между устройством и облаком.</span><span class="sxs-lookup"><span data-stu-id="834de-105">For example, a solution back end might use automated, predictive analytics to uncover insights from your device-to-cloud event stream.</span></span>

<span data-ttu-id="834de-106">Центр Интернета вещей Azure — ключевой стандартный блок при реализации этой архитектуры решения Интернета вещей с помощью служб Azure.</span><span class="sxs-lookup"><span data-stu-id="834de-106">Azure IoT Hub is a key building block when you implement this IoT solution architecture using Azure services.</span></span> <span data-ttu-id="834de-107">Набор IoT Suite предоставляет полную завершенную реализацию этой архитектуры для определенных сценариев, связанных с Интернетом вещей.</span><span class="sxs-lookup"><span data-stu-id="834de-107">IoT Suite provides complete, end-to-end, implementations of this architecture for specific IoT scenarios.</span></span> <span data-ttu-id="834de-108">Например:</span><span class="sxs-lookup"><span data-stu-id="834de-108">For example:</span></span>

* <span data-ttu-id="834de-109">Решение для *удаленного мониторинга* позволяет отслеживать состояние таких устройств, как торговые автоматы.</span><span class="sxs-lookup"><span data-stu-id="834de-109">The *remote monitoring* solution enables you to monitor the status of devices such as vending machines.</span></span>
* <span data-ttu-id="834de-110">Решение для *прогнозного обслуживания* позволяет прогнозировать время обслуживания таких устройств, как насосы на удаленных насосных станциях, и избегать незапланированных сбоев.</span><span class="sxs-lookup"><span data-stu-id="834de-110">The *predictive maintenance* solution helps you to anticipate maintenance needs of devices such as pumps in remote pumping stations and to avoid unscheduled downtime.</span></span>
* <span data-ttu-id="834de-111">Решение для *подключенной фабрики* позволяет выполнять подключение и мониторинг промышленных устройств.</span><span class="sxs-lookup"><span data-stu-id="834de-111">The *connected factory* solution helps you to connect and monitor your industrial devices.</span></span>

## <a name="iot-solution-architecture"></a><span data-ttu-id="834de-112">Архитектура решения IoT</span><span class="sxs-lookup"><span data-stu-id="834de-112">IoT solution architecture</span></span>

<span data-ttu-id="834de-113">На приведенной ниже схеме показана архитектура типичного решения IoT.</span><span class="sxs-lookup"><span data-stu-id="834de-113">The following diagram shows a typical IoT solution architecture.</span></span> <span data-ttu-id="834de-114">Она не содержит имен определенных служб Azure, а описывает ключевые элементы в архитектуре обобщенного решения Интернета вещей.</span><span class="sxs-lookup"><span data-stu-id="834de-114">The diagram does not include the names of any specific Azure services, but describes the key elements in a generic IoT solution architecture.</span></span> <span data-ttu-id="834de-115">В этой архитектуре устройства Интернета вещей собирают данные, которые они отправляют в облачный шлюз.</span><span class="sxs-lookup"><span data-stu-id="834de-115">In this architecture, IoT devices collect data that they send to a cloud gateway.</span></span> <span data-ttu-id="834de-116">Облачный шлюз делает данные доступными для обработки другими службами серверной части. Данные из серверной части предоставляются другим бизнес-приложениям или операторам через панель мониторинга или другое устройство для представления данных.</span><span class="sxs-lookup"><span data-stu-id="834de-116">The cloud gateway makes the data available for processing by other back-end services from where data is delivered to other line-of-business applications or to human operators through a dashboard or other presentation device.</span></span>

![Архитектура решения IoT][img-solution-architecture]

> [!NOTE]
> <span data-ttu-id="834de-118">Подробное рассмотрение архитектуры Центра Интернета вещей см. в документе [Microsoft Azure IoT Reference Architecture][lnk-refarch] (Эталонная архитектура Microsoft Azure IoT).</span><span class="sxs-lookup"><span data-stu-id="834de-118">For an in-depth discussion of IoT architecture, see the [Microsoft Azure IoT Reference Architecture][lnk-refarch].</span></span>

### <a name="device-connectivity"></a><span data-ttu-id="834de-119">Взаимодействие устройств</span><span class="sxs-lookup"><span data-stu-id="834de-119">Device connectivity</span></span>

<span data-ttu-id="834de-120">В этой архитектуре решения IoT устройства отправляют данные телеметрии, например показания датчика с насосной станции, на конечную точку облака для хранения и обработки.</span><span class="sxs-lookup"><span data-stu-id="834de-120">In this IoT solution architecture, devices send telemetry, such as sensor readings from a pumping station, to a cloud endpoint for storage and processing.</span></span> <span data-ttu-id="834de-121">В сценарии прогнозирования обслуживания серверная часть решения может использовать поток данных от датчика, чтобы определить время обслуживания конкретного насоса.</span><span class="sxs-lookup"><span data-stu-id="834de-121">In a predictive maintenance scenario, the solution back end might use the stream of sensor data to determine when a specific pump requires maintenance.</span></span> <span data-ttu-id="834de-122">Устройства также могут принимать сообщения, передаваемые из облака на устройство, и отвечать на них путем считывания сообщений из конечной точки облака.</span><span class="sxs-lookup"><span data-stu-id="834de-122">Devices can also receive and respond to cloud-to-device messages by reading messages from a cloud endpoint.</span></span> <span data-ttu-id="834de-123">Например, в сценарии прогнозирования обслуживания серверная часть решения может отправлять сообщения другим насосам на станции, чтобы перенаправлять потоки непосредственно перед началом обслуживания.</span><span class="sxs-lookup"><span data-stu-id="834de-123">For example, in the predictive maintenance scenario the solution back end might send messages to other pumps in the pumping station to begin rerouting flows just before maintenance is due to start.</span></span> <span data-ttu-id="834de-124">Благодаря этому инженер технической поддержки может приступать к работе сразу после прибытия на станцию.</span><span class="sxs-lookup"><span data-stu-id="834de-124">This procedure would make sure the maintenance engineer could get started as soon as she arrives.</span></span>

<span data-ttu-id="834de-125">Одной из крупнейших задач, стоящих перед проектами IoT, является обеспечение надежного и безопасного подключения устройств к серверной части решения.</span><span class="sxs-lookup"><span data-stu-id="834de-125">One of the biggest challenges facing IoT projects is how to reliably and securely connect devices to the solution back end.</span></span> <span data-ttu-id="834de-126">Характеристики устройств IoT отличаются от характеристик других клиентов, таких как браузеры и мобильные приложения.</span><span class="sxs-lookup"><span data-stu-id="834de-126">IoT devices have different characteristics as compared to other clients such as browsers and mobile apps.</span></span> <span data-ttu-id="834de-127">Устройства IoT:</span><span class="sxs-lookup"><span data-stu-id="834de-127">IoT devices:</span></span>

* <span data-ttu-id="834de-128">часто представляют собой встраиваемые системы, у которых отсутствует оператор;</span><span class="sxs-lookup"><span data-stu-id="834de-128">Are often embedded systems with no human operator.</span></span>
* <span data-ttu-id="834de-129">могут развертываться в удаленных расположениях, где физический доступ дорогой;</span><span class="sxs-lookup"><span data-stu-id="834de-129">Can be deployed in remote locations, where physical access is expensive.</span></span>
* <span data-ttu-id="834de-130">могут быть доступны только через серверную часть решения;</span><span class="sxs-lookup"><span data-stu-id="834de-130">May only be reachable through the solution back end.</span></span> <span data-ttu-id="834de-131">другого способа взаимодействия с устройством нет.</span><span class="sxs-lookup"><span data-stu-id="834de-131">There is no other way to interact with the device.</span></span>
* <span data-ttu-id="834de-132">могут иметь ограниченную мощность и (или) объем ресурсов для обработки;</span><span class="sxs-lookup"><span data-stu-id="834de-132">May have limited power and processing resources.</span></span>
* <span data-ttu-id="834de-133">могут иметь временное, медленное или дорогостоящее подключение к сети;</span><span class="sxs-lookup"><span data-stu-id="834de-133">May have intermittent, slow, or expensive network connectivity.</span></span>
* <span data-ttu-id="834de-134">могут требовать использования закрытых, пользовательских или отраслевых протоколов приложения;</span><span class="sxs-lookup"><span data-stu-id="834de-134">May need to use proprietary, custom, or industry-specific application protocols.</span></span>
* <span data-ttu-id="834de-135">могут создаваться с помощью большого числа популярных аппаратных и программных платформ.</span><span class="sxs-lookup"><span data-stu-id="834de-135">Can be created using a large set of popular hardware and software platforms.</span></span>

<span data-ttu-id="834de-136">В дополнение к изложенным выше требованиям любое решение IoT также должно быть масштабируемым, безопасным и надежным.</span><span class="sxs-lookup"><span data-stu-id="834de-136">In addition to the requirements above, any IoT solution must also deliver scale, security, and reliability.</span></span> <span data-ttu-id="834de-137">В итоге формируется набор требований к подключению, выполнить которые с помощью традиционных технологий, таких как веб-контейнеры и брокеры сообщений, очень трудно.</span><span class="sxs-lookup"><span data-stu-id="834de-137">The resulting set of connectivity requirements is hard and time-consuming to implement using traditional technologies such as web containers and messaging brokers.</span></span> <span data-ttu-id="834de-138">Центр Интернета вещей Azure и пакеты SDK для устройств Azure IoT облегчают реализацию решений, соответствующих этим требованиям.</span><span class="sxs-lookup"><span data-stu-id="834de-138">Azure IoT Hub and the Azure IoT device SDKs make it easier to implement solutions that meet these requirements.</span></span>

<span data-ttu-id="834de-139">Устройство может установить связь непосредственно с конечной точкой облачного шлюза или, если устройство не может использовать протоколы связи, поддерживаемые облачным шлюзом, подключаться через промежуточный шлюз.</span><span class="sxs-lookup"><span data-stu-id="834de-139">A device can communicate directly with a cloud gateway endpoint, or if the device cannot use any of the communications protocols that the cloud gateway supports, it can connect through an intermediate gateway.</span></span> <span data-ttu-id="834de-140">Например, [шлюз протокола Центра Интернета вещей][lnk-protocol-gateway] может преобразовывать протоколы, если устройства не могут использовать протоколы, поддерживаемые Центром Интернета вещей.</span><span class="sxs-lookup"><span data-stu-id="834de-140">For example, the [Azure IoT protocol gateway][lnk-protocol-gateway] can perform protocol translation if devices cannot use any of the protocols that IoT Hub supports.</span></span>

### <a name="data-processing-and-analytics"></a><span data-ttu-id="834de-141">Обработка данных и аналитика</span><span class="sxs-lookup"><span data-stu-id="834de-141">Data processing and analytics</span></span>

<span data-ttu-id="834de-142">Большая часть обработки данных в серверной части решения Интернета вещей происходит в облаке. В частности, там выполняются фильтрация и статистическая обработка данных телеметрии и их маршрутизация к другим службам.</span><span class="sxs-lookup"><span data-stu-id="834de-142">In the cloud, an IoT solution back end is where most of the data processing occurs, such as filtering and aggregating telemetry and routing it to other services.</span></span> <span data-ttu-id="834de-143">Серверная часть решения IoT:</span><span class="sxs-lookup"><span data-stu-id="834de-143">The IoT solution back end:</span></span>

* <span data-ttu-id="834de-144">Принимает данные телеметрии в необходимом объеме с устройств и определяет способ обработки и хранения полученных данных.</span><span class="sxs-lookup"><span data-stu-id="834de-144">Receives telemetry at scale from your devices and determines how to process and store that data.</span></span> 
* <span data-ttu-id="834de-145">В некоторых случаях позволяет передавать команды из облака на определенное устройство.</span><span class="sxs-lookup"><span data-stu-id="834de-145">May enable you to send commands from the cloud to specific device.</span></span>
* <span data-ttu-id="834de-146">Предоставляет возможность регистрации устройств в решении IoT, позволяющей подготавливать их к работе и управлять доступом устройств к инфраструктуре.</span><span class="sxs-lookup"><span data-stu-id="834de-146">Provides device registration capabilities that enable you to provision devices and to control which devices are permitted to connect to your infrastructure.</span></span>
* <span data-ttu-id="834de-147">Позволяет отслеживать состояние устройств и отслеживать выполняемые ими операции.</span><span class="sxs-lookup"><span data-stu-id="834de-147">Enables you to track the state of your devices and monitor their activities.</span></span>

<span data-ttu-id="834de-148">В сценарии прогнозирования обслуживания серверная часть решения хранит данные журнала телеметрии,</span><span class="sxs-lookup"><span data-stu-id="834de-148">In the predictive maintenance scenario, the solution back end stores historical telemetry data.</span></span> <span data-ttu-id="834de-149">которые используются для определения шаблонов, указывающих на необходимость обслуживания конкретного насоса.</span><span class="sxs-lookup"><span data-stu-id="834de-149">The solution back end can use this data to use to identify patterns that indicate maintenance is due on a specific pump.</span></span>

<span data-ttu-id="834de-150">Решения IoT могут включать в себя циклы автоматической обратной связи.</span><span class="sxs-lookup"><span data-stu-id="834de-150">IoT solutions can include automatic feedback loops.</span></span> <span data-ttu-id="834de-151">Например, на основе данных телеметрии модуль аналитики в серверной части решения может выявить, что температура определенного устройства выше нормального рабочего уровня,</span><span class="sxs-lookup"><span data-stu-id="834de-151">For example, an analytics module in the solution back end can identify from telemetry that the temperature of a specific device is above normal operating levels.</span></span> <span data-ttu-id="834de-152">после чего решение может отправить на это устройство команду для выполнения корректирующих действий.</span><span class="sxs-lookup"><span data-stu-id="834de-152">The solution can then send a command to the device, instructing it to take corrective action.</span></span>

### <a name="presentation-and-business-connectivity"></a><span data-ttu-id="834de-153">Представление и бизнес-подключение</span><span class="sxs-lookup"><span data-stu-id="834de-153">Presentation and business connectivity</span></span>

<span data-ttu-id="834de-154">Уровень представления и бизнес-подключения позволяет конечным пользователям взаимодействовать с решением IoT и устройствами.</span><span class="sxs-lookup"><span data-stu-id="834de-154">The presentation and business connectivity layer allows end users to interact with the IoT solution and the devices.</span></span> <span data-ttu-id="834de-155">Это дает пользователям возможность просматривать и анализировать данные, собираемые с их устройств.</span><span class="sxs-lookup"><span data-stu-id="834de-155">It enables users to view and analyze the data collected from their devices.</span></span> <span data-ttu-id="834de-156">Эти представления могут принимать форму панелей мониторинга и отчетов бизнес-аналитики, которые могут отображаться как данные журнала или данные в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="834de-156">These views can take the form of dashboards or BI reports that can display both historical data or near real-time data.</span></span> <span data-ttu-id="834de-157">Например, оператор может проверить состояние конкретной насосной станции и увидеть все предупреждения, созданные системой.</span><span class="sxs-lookup"><span data-stu-id="834de-157">For example, an operator can check on the status of particular pumping station and see any alerts raised by the system.</span></span> <span data-ttu-id="834de-158">Этот уровень также обеспечивает интеграцию серверной части решения IoT с существующими бизнес-приложениями для привязки к корпоративным бизнес-процессам или рабочим процессам.</span><span class="sxs-lookup"><span data-stu-id="834de-158">This layer also allows integration of the IoT solution back end with existing line-of-business applications to tie into enterprise business processes or workflows.</span></span> <span data-ttu-id="834de-159">Например, решение прогнозного обслуживания может интегрироваться с системой планирования, резервирующей инженера, который должен посетить насосную станцию, когда решение определит, что насос нуждается в обслуживании.</span><span class="sxs-lookup"><span data-stu-id="834de-159">For example, the predictive maintenance solution can integrate with a scheduling system that books an engineer to visit a pumping station when the solution identifies a pump in need of maintenance.</span></span>

![Панель мониторинга решения IoT][img-dashboard]

[img-solution-architecture]: ./media/iot-azure-and-iot/iot-reference-architecture.png
[img-dashboard]: ./media/iot-azure-and-iot/iot-suite.png

[lnk-machinelearning]: http://azure.microsoft.com/documentation/services/machine-learning/
[Azure IoT Suite]: http://azure.microsoft.com/solutions/iot
[lnk-protocol-gateway]:  ../articles/iot-hub/iot-hub-protocol-gateway.md
[lnk-refarch]: http://download.microsoft.com/download/A/4/D/A4DAD253-BC21-41D3-B9D9-87D2AE6F0719/Microsoft_Azure_IoT_Reference_Architecture.pdf
