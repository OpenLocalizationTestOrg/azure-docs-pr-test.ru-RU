
# <a name="azure-and-the-internet-of-things"></a>Azure и Интернет вещей

Добро пожаловать в Microsoft Azure и "Интернет вещей" (IoT). В этой статье описаны общие характеристики решения Интернета вещей в облаке. Решения Интернета вещей требуют наличия безопасной двусторонней связи между устройствами, количество которых может исчисляться миллионами, а также серверной части решения. Например, решение может использовать прогнозную аналитику для анализа данных в потоке событий между устройством и облаком.

## <a name="iot-solution-architecture"></a>Архитектура решения IoT

На приведенной ниже схеме показаны ключевые элементы архитектуры типичного решения Интернета вещей. Схема не зависит от конкретных сведений реализации, например используемой службы Azure и операционных систем устройств. В этой архитектуре устройства Интернета вещей собирают данные, которые они отправляют в облачный шлюз. Облачный шлюз делает данные доступными для обработки другими службами серверной части. Эти серверные службы могут доставлять данные в:

* другие бизнес-приложения;
* операторам через панель мониторинга или другое устройство для предоставления данных.

![Архитектура решения IoT][img-solution-architecture]

> [!NOTE]
> Подробное рассмотрение архитектуры Центра Интернета вещей см. в документе [Microsoft Azure IoT Reference Architecture][lnk-refarch] (Эталонная архитектура Microsoft Azure IoT).

### <a name="device-connectivity"></a>Взаимодействие устройств

В архитектуре решения Интернета вещей устройства обычно отправляют телеметрию в облако для хранения и обработки. Например, в сценарии прогнозирования обслуживания серверная часть решения может использовать поток данных от датчика, чтобы определить время обслуживания конкретного насоса. Устройства также могут принимать сообщения, передаваемые из облака на устройство, и отвечать на них путем считывания сообщений из конечной точки облака. Например, в том же сценарии серверная часть решения может отправлять сообщения другим насосам на станции, чтобы перенаправлять потоки непосредственно перед началом обслуживания. Благодаря этому инженер технической поддержки может приступать к работе сразу после прибытия на станцию.

Безопасное и надежное подключение устройств в решениях Интернета вещей часто является самой сложной задачей. Это обусловлено тем, что характеристики устройств Интернета вещей отличаются от характеристик других клиентов, таких как браузеры и мобильные приложения. В частности, устройства Интернета вещей:

* часто представляют собой встраиваемые системы, у которых отсутствует оператор (в отличие от телефона);
* могут развертываться в удаленных расположениях, где физический доступ дорогой;
* могут быть доступны только через серверную часть решения; другого способа взаимодействия с устройством нет.
* могут иметь ограниченную мощность и (или) объем ресурсов для обработки;
* могут иметь временное, медленное или дорогостоящее подключение к сети;
* могут требовать использования закрытых, пользовательских или отраслевых протоколов приложения;
* могут создаваться с помощью большого числа популярных аппаратных и программных платформ.

В дополнение к предыдущим ограничениям любое решение Интернета вещей должно быть масштабируемым, безопасным и надежным.

В зависимости от протокола связи и доступности сети устройство может связываться с облаком напрямую или через промежуточный шлюз. Архитектуры Интернета вещей часто являются сочетанием этих двух моделей связи.

### <a name="data-processing-and-analytics"></a>Обработка данных и аналитика

В современных решениях Интернета вещей обработка данных может выполняться в облаке или на стороне устройства. Обработка на стороне устройства называется *пограничными вычислениями*. Выбор места обработки данных зависит от таких факторов, как:

* Ограничения сети. Если пропускная способность между устройствами и облаком ограничена, пограничные вычисления поощряются.
* Время ответа. Если есть требование действовать на устройстве в реальном времени, возможно, лучше обрабатывать ответ на самом устройстве. Например, необходимо остановить робот-манипулятор в чрезвычайной ситуации.
* Нормативные среды. Некоторые данные невозможно отправить в облако.

Как правило, обработка данных на пограничном устройстве и в облаке является сочетанием следующих возможностей:

* прием данных телеметрии в необходимом объеме с устройств и определение способа обработки и хранения полученных данных;
* анализ телеметрии для предоставления ценной информации как в режиме реального времени, так и позже;
* отправка команд из облака или устройства шлюза на определенное устройство.

Кроме того, серверная часть облака Интернета вещей должна предоставить:

* Возможности регистрации устройства, которые позволяют:
    * подготавливать устройство;
    * контролировать, каким устройствам разрешено подключаться к инфраструктуре.
* Управление устройствами для контроля состояния устройств и мониторинга их действий.

Например, в сценарии прогнозного обслуживания серверная часть облака хранит данные журнала телеметрии. Решение использует эти данные для идентификации потенциального аномального поведения в определенных насосах, прежде чем они вызовут реальную проблему. С помощью анализа данных оно может установить, что превентивным решением является отправка команды обратно на устройство для выполнения корректирующих действий. Этот процесс создает автоматический цикл обратной связи между устройством и облаком, который значительно увеличивает эффективность устройства.

### <a name="presentation-and-business-connectivity"></a>Представление и бизнес-подключение

Уровень представления и бизнес-подключения позволяет конечным пользователям взаимодействовать с решением IoT и устройствами. Это дает пользователям возможность просматривать и анализировать данные, собираемые с их устройств. Эти представления могут принимать форму панелей мониторинга и отчетов бизнес-аналитики, которые могут отображаться как данные журнала или данные в режиме реального времени. Например, оператор может проверить состояние конкретной насосной станции и увидеть все предупреждения, созданные системой. Этот уровень также обеспечивает интеграцию серверной части решения Интернета вещей с существующими бизнес-приложениями для привязки к корпоративным бизнес-процессам или рабочим процессам. Например, решение прогнозного обслуживания может интегрироваться с системой планирования, резервирующей инженера, который должен посетить насосную станцию, когда решение определит, что насос нуждается в обслуживании.

[img-solution-architecture]: ./media/iot-azure-and-iot/iot-reference-architecture.png
[img-dashboard]: ./media/iot-azure-and-iot/iot-suite.png

[lnk-iot-hub]: ../articles/iot-hub/iot-hub-what-is-iot-hub.md
[lnk-iot-suite]: ../articles/iot-suite/iot-suite-overview.md
[lnk-machinelearning]: http://azure.microsoft.com/documentation/services/machine-learning/
[Azure IoT Suite]: http://azure.microsoft.com/solutions/iot
[lnk-protocol-gateway]:  ../articles/iot-hub/iot-hub-protocol-gateway.md
[lnk-refarch]: http://download.microsoft.com/download/A/4/D/A4DAD253-BC21-41D3-B9D9-87D2AE6F0719/Microsoft_Azure_IoT_Reference_Architecture.pdf
