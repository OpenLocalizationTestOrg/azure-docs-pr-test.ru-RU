## <a name="prerequisites"></a><span data-ttu-id="a50d7-101">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="a50d7-101">Prerequisites</span></span>
<span data-ttu-id="a50d7-102">Перед можно написать код для управления CDN, вам требуется toodo некоторые tooenable подготовки toointeract наш код с hello диспетчера ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="a50d7-102">Before we can write CDN management code, we need toodo some preparation tooenable our code toointeract with hello Azure Resource Manager.</span></span>  <span data-ttu-id="a50d7-103">toodo это, вам потребуется:</span><span class="sxs-lookup"><span data-stu-id="a50d7-103">toodo this, you'll need to:</span></span>

* <span data-ttu-id="a50d7-104">Создать hello toocontain группы ресурсов профиля CDN, создаваемый нами в этом учебнике</span><span class="sxs-lookup"><span data-stu-id="a50d7-104">Create a resource group toocontain hello CDN profile we create in this tutorial</span></span>
* <span data-ttu-id="a50d7-105">Настройка проверки подлинности tooprovide Azure Active Directory для нашего приложения</span><span class="sxs-lookup"><span data-stu-id="a50d7-105">Configure Azure Active Directory tooprovide authentication for our application</span></span>
* <span data-ttu-id="a50d7-106">Применить разрешения, которые toohello группы ресурсов, чтобы только авторизованные пользователи из наших клиента Azure AD может взаимодействовать с нашей профиль CDN</span><span class="sxs-lookup"><span data-stu-id="a50d7-106">Apply permissions toohello resource group so that only authorized users from our Azure AD tenant can interact with our CDN profile</span></span>

### <a name="creating-hello-resource-group"></a><span data-ttu-id="a50d7-107">Создание группы ресурсов hello</span><span class="sxs-lookup"><span data-stu-id="a50d7-107">Creating hello resource group</span></span>
1. <span data-ttu-id="a50d7-108">Войти в hello [портала Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a50d7-108">Log into hello [Azure Portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="a50d7-109">Щелкните hello **New** кнопка в верхнем левом углу hello, а затем **управления**, и **группы ресурсов**.</span><span class="sxs-lookup"><span data-stu-id="a50d7-109">Click hello **New** button in hello upper left, and then **Management**, and **Resource Group**.</span></span>

    ![Создание новой группы ресурсов](./media/cdn-app-dev-prep/cdn-new-rg-1-include.png)
3. <span data-ttu-id="a50d7-111">Назовите группу ресурсов *CdnConsoleTutorial*.</span><span class="sxs-lookup"><span data-stu-id="a50d7-111">Call your resource group *CdnConsoleTutorial*.</span></span>  <span data-ttu-id="a50d7-112">Выберите свою подписку и ближайшее расположение.</span><span class="sxs-lookup"><span data-stu-id="a50d7-112">Select your subscription and choose a location near you.</span></span>  <span data-ttu-id="a50d7-113">При желании можно щелкнуть hello **toodashboard ПИН-код** флажок toopin hello ресурсов toohello панель мониторинга группы на портале hello.</span><span class="sxs-lookup"><span data-stu-id="a50d7-113">If you wish, you may click hello **Pin toodashboard** checkbox toopin hello resource group toohello dashboard in hello portal.</span></span>  <span data-ttu-id="a50d7-114">Это позволит упростить toofind позже.</span><span class="sxs-lookup"><span data-stu-id="a50d7-114">This will make it easier toofind later.</span></span>  <span data-ttu-id="a50d7-115">Выберите необходимые параметры, а затем нажмите кнопку **Создать**.</span><span class="sxs-lookup"><span data-stu-id="a50d7-115">After you've made your selections, click **Create**.</span></span>

    ![Именование группы ресурсов hello](./media/cdn-app-dev-prep/cdn-new-rg-2-include.png)
4. <span data-ttu-id="a50d7-117">После создания группы ресурсов hello, если вы не Закрепить панель мониторинга tooyour, его можно будет найти, щелкнув **Обзор**, затем **групп ресурсов**.</span><span class="sxs-lookup"><span data-stu-id="a50d7-117">After hello resource group is created, if you didn't pin it tooyour dashboard, you can find it by clicking **Browse**, then **Resource Groups**.</span></span>  <span data-ttu-id="a50d7-118">Нажмите кнопку tooopen группы ресурсов hello его.</span><span class="sxs-lookup"><span data-stu-id="a50d7-118">Click hello resource group tooopen it.</span></span>  <span data-ttu-id="a50d7-119">Запишите **идентификатор подписки**.</span><span class="sxs-lookup"><span data-stu-id="a50d7-119">Make a note of your **Subscription ID**.</span></span>  <span data-ttu-id="a50d7-120">Он понадобится нам позднее.</span><span class="sxs-lookup"><span data-stu-id="a50d7-120">We'll need it later.</span></span>

    ![Именование группы ресурсов hello](./media/cdn-app-dev-prep/cdn-subscription-id-include.png)

### <a name="creating-hello-azure-ad-application-and-applying-permissions"></a><span data-ttu-id="a50d7-122">Создание приложения hello Azure AD и применении разрешений</span><span class="sxs-lookup"><span data-stu-id="a50d7-122">Creating hello Azure AD application and applying permissions</span></span>
<span data-ttu-id="a50d7-123">Существует два подхода tooapp проверки подлинности в Azure Active Directory: отдельным пользователям или субъектом-службой.</span><span class="sxs-lookup"><span data-stu-id="a50d7-123">There are two approaches tooapp authentication with Azure Active Directory: Individual users or a service principal.</span></span> <span data-ttu-id="a50d7-124">Субъект-службы — примерно tooa учетную запись службы Windows.</span><span class="sxs-lookup"><span data-stu-id="a50d7-124">A service principal is similar tooa service account in Windows.</span></span>  <span data-ttu-id="a50d7-125">Вместо того чтобы предоставлять toointeract разрешения конкретного пользователя с помощью профилей CDN hello, мы вместо этого разрешения hello toohello субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="a50d7-125">Instead of granting a particular user permissions toointeract with hello CDN profiles, we instead grant hello permissions toohello service principal.</span></span>  <span data-ttu-id="a50d7-126">Субъекты-службы обычно используются для автоматических, неинтерактивных процессов.</span><span class="sxs-lookup"><span data-stu-id="a50d7-126">Service principals are generally used for automated, non-interactive processes.</span></span>  <span data-ttu-id="a50d7-127">Несмотря на то, что этот учебник записывает интерактивной консоли приложение, мы сосредоточимся на основной подход hello службы.</span><span class="sxs-lookup"><span data-stu-id="a50d7-127">Even though this tutorial is writing an interactive console app, we'll focus on hello service principal approach.</span></span>

<span data-ttu-id="a50d7-128">Создание субъекта-службы состоит из нескольких шагов, включая создание приложения Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a50d7-128">Creating a service principal consists of several steps, including creating an Azure Active Directory application.</span></span>  <span data-ttu-id="a50d7-129">toodo это, мы будем слишком[Пройдите этот курс](../articles/resource-group-create-service-principal-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a50d7-129">toodo this, we're going too[follow this tutorial](../articles/resource-group-create-service-principal-portal.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a50d7-130">Быть toofollow убедиться, что все этапы hello hello [связанного учебника](../articles/resource-group-create-service-principal-portal.md).</span><span class="sxs-lookup"><span data-stu-id="a50d7-130">Be sure toofollow all hello steps in hello [linked tutorial](../articles/resource-group-create-service-principal-portal.md).</span></span>  <span data-ttu-id="a50d7-131">*Крайне важно* выполнить все в точности, как описано.</span><span class="sxs-lookup"><span data-stu-id="a50d7-131">It is *extremely important* that you complete it exactly as described.</span></span>  <span data-ttu-id="a50d7-132">Убедитесь, что toonote вашей **идентификатор клиента**, **доменное имя клиента** (часто *. onmicrosoft.com* домена, если вы указали настраиваемый домен), **идентификатор клиента** , и **ключ проверки подлинности клиента**, как нам понадобится позднее.</span><span class="sxs-lookup"><span data-stu-id="a50d7-132">Make sure toonote your **tenant ID**, **tenant domain name** (commonly a *.onmicrosoft.com* domain unless you've specified a custom domain), **client ID**, and **client authentication key**, as we will need these later.</span></span>  <span data-ttu-id="a50d7-133">Быть крайне внимательно tooguard вашей **идентификатор клиента** и **ключ проверки подлинности клиента**, как эти учетные данные могут быть используемое всеми пользователями, tooexecute операций как hello участника-службы.</span><span class="sxs-lookup"><span data-stu-id="a50d7-133">Be very careful tooguard your **client ID** and **client authentication key**, as these credentials can be used by anyone tooexecute operations as hello service principal.</span></span>
>
> <span data-ttu-id="a50d7-134">При получении toohello шаг настройки мультитенантного приложения с именем выберите **нет**.</span><span class="sxs-lookup"><span data-stu-id="a50d7-134">When you get toohello step named Configure multi-tenant application, select **No**.</span></span>
>
> <span data-ttu-id="a50d7-135">При получении toohello шаг [назначить toorole приложения](../articles/azure-resource-manager/resource-group-create-service-principal-portal.md#assign-application-to-role), группа ресурсов используйте hello, созданную ранее, *CdnConsoleTutorial*, но вместо hello **чтения** роли, назначить Hello **участника профиля CDN** роли.</span><span class="sxs-lookup"><span data-stu-id="a50d7-135">When you get toohello step [Assign application toorole](../articles/azure-resource-manager/resource-group-create-service-principal-portal.md#assign-application-to-role), use hello resource group we created earlier,  *CdnConsoleTutorial*, but instead of hello **Reader** role, assign hello **CDN Profile Contributor** role.</span></span>  <span data-ttu-id="a50d7-136">После назначения приложения hello hello **участника профиля CDN** роли в группе ресурсов, возвращаемого toothis учебника.</span><span class="sxs-lookup"><span data-stu-id="a50d7-136">After you assign hello application hello **CDN Profile Contributor** role on your resource group, return toothis tutorial.</span></span> 
>
>

<span data-ttu-id="a50d7-137">После создания основного и назначенные hello вашей службы **участника профиля CDN** роли, hello **пользователей** колонку для группы ресурсов должна выглядеть примерно toothis.</span><span class="sxs-lookup"><span data-stu-id="a50d7-137">Once you've created your service principal and assigned hello **CDN Profile Contributor** role, hello **Users** blade for your resource group should look similar toothis.</span></span>

![Колонка "Пользователи"](./media/cdn-app-dev-prep/cdn-service-principal-include.png)

### <a name="interactive-user-authentication"></a><span data-ttu-id="a50d7-139">Интерактивная аутентификация пользователей</span><span class="sxs-lookup"><span data-stu-id="a50d7-139">Interactive user authentication</span></span>
<span data-ttu-id="a50d7-140">Если вместо участника службы, а пришлось бы интерактивной проверки подлинности пользователя, процесс hello является очень похожа toothat для участника службы.</span><span class="sxs-lookup"><span data-stu-id="a50d7-140">If, instead of a service principal, you'd rather have interactive individual user authentication, hello process is very similar toothat for a service principal.</span></span>  <span data-ttu-id="a50d7-141">На самом деле нужно будет toofollow hello же процедуру, но внести некоторые небольшие изменения.</span><span class="sxs-lookup"><span data-stu-id="a50d7-141">In fact, you will need toofollow hello same procedure, but make a few minor changes.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a50d7-142">Выполните следующие шаги, только в том случае, если при этом выбирается toouse проверки подлинности пользователя вместо участника-службы.</span><span class="sxs-lookup"><span data-stu-id="a50d7-142">Only follow these next steps if you are choosing toouse individual user authentication instead of a service principal.</span></span>
>
>

1. <span data-ttu-id="a50d7-143">Создавая приложение, вместо значения **Веб-приложение** выберите **Собственное приложение**.</span><span class="sxs-lookup"><span data-stu-id="a50d7-143">When creating your application, instead of **Web Application**, choose **Native application**.</span></span>

    ![Собственное приложение](./media/cdn-app-dev-prep/cdn-native-application-include.png)
2. <span data-ttu-id="a50d7-145">На следующей странице приветствия, можно будет запрашиваться **URI перенаправления**.</span><span class="sxs-lookup"><span data-stu-id="a50d7-145">On hello next page, you will be prompted for a **redirect URI**.</span></span>  <span data-ttu-id="a50d7-146">Hello URI не будут проверены, но помните, что вы ввели.</span><span class="sxs-lookup"><span data-stu-id="a50d7-146">hello URI won't be validated, but remember what you entered.</span></span>  <span data-ttu-id="a50d7-147">Он понадобится вам позднее.</span><span class="sxs-lookup"><span data-stu-id="a50d7-147">You'll need it later.</span></span>
3. <span data-ttu-id="a50d7-148">Нет нет необходимости toocreate **ключ проверки подлинности клиента**.</span><span class="sxs-lookup"><span data-stu-id="a50d7-148">There is no need toocreate a **client authentication key**.</span></span>
4. <span data-ttu-id="a50d7-149">Вместо присвоения toohello основной службы **участника профиля CDN** роли, мы будем tooassign отдельным пользователям или группам.</span><span class="sxs-lookup"><span data-stu-id="a50d7-149">Instead of assigning a service principal toohello **CDN Profile Contributor** role, we're going tooassign individual users or groups.</span></span>  <span data-ttu-id="a50d7-150">В этом примере видно, что назначен *пользователя Демонстрация CDN* toohello **участника профиля CDN** роли.</span><span class="sxs-lookup"><span data-stu-id="a50d7-150">In this example, you can see that I've assigned  *CDN Demo User* toohello **CDN Profile Contributor** role.</span></span>  

    ![Индивидуальный доступ пользователей](./media/cdn-app-dev-prep/cdn-aad-user-include.png)
