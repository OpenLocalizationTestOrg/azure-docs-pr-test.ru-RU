Azure периодически выполняет обновления tooimprove hello надежность, производительность и безопасность инфраструктуры hello узла для виртуальных машин. Эти обновления в диапазоне от исправления программных компонентов в среде (например, операционная система, низкоуровневой оболочки и различных агентах, развернутой на узле hello) размещения hello обновление сетевыми компонентами, toohardware вывода из эксплуатации. Большинство этих обновлений Hello выполняются без влияния toohello размещенных виртуальных машин. Но в некоторых случаях они все же оказывают определенное воздействие:

- Если обслуживание hello не требует перезагрузки, Azure использует hello toopause миграцию виртуальной Машины во время обновления узла hello.

- Если для обслуживания требуется перезагрузка, появляются уведомления об запланировано обслуживание hello. В таких случаях можно будет дана временное окно, где можно начать обслуживания hello самостоятельно, в заданное время для вас.

На этой странице описано, как Microsoft Azure выполняет обслуживание обоих типов. Дополнительные сведения о незапланированных событий (сбои), см. Управление доступностью виртуальных машин hello для [Windows] (.. / articles/virtual-machines/windows/manage-availability.md) или [Linux](../articles/virtual-machines/linux/manage-availability.md).

Приложения, работающие на виртуальной машине можно собирать сведения о предстоящих обновлениях с помощью hello метаданных службы Azure для [Windows](../articles/virtual-machines/windows/instance-metadata-service.md) или [Linux] (.. / articles/virtual-machines/linux/instance-metadata-service.md).

## <a name="in-place-vm-migration"></a>Миграция виртуальной машины на месте

Если обновления не требуют полной перезагрузки, используется динамическая миграция на месте. Во время обновления hello hello виртуальная машина приостановлена в течение 30 секунд, сохраняя памяти hello в оперативной памяти, а среда размещения hello применяется hello необходимых обновлений и исправлений. затем возобновляется Hello виртуальной машины и автоматической синхронизации часов hello hello виртуальной машины.

Домены обновления виртуальных машин в группах доступности обновляются поочередно. Все виртуальные машины в одном домене обновления (UD) приостановлена, обновление и затем возобновляется до планового обслуживания перемещения на toohello UD Далее.

Эти обновления могут влиять на некоторые приложения. Приложения, которые выполняют событий в реальном времени обработки, такой как потоковой передачи мультимедиа или перекодировки или высокой пропускной способностью сети сценариев, может оказаться спроектированный tootolerate 30 секундной паузы. <!-- sooooo, what should they do? --> 


## <a name="maintenance-requiring-a-reboot"></a>Обслуживание, требующее перезагрузки

Если виртуальные машины должны toobe перезагрузки при плановом обслуживании, вы будете оповещены заранее. Плановое обслуживание включает два этапа: hello самообслуживания и периоды запланированного обслуживания.

Hello **самообслуживания окна** позволяет инициировать hello обслуживания на виртуальные машины. В течение этого времени можно запросить каждой виртуальной Машины toosee их состояние и проверьте результат hello своего последнего запроса на обслуживание.

При запуске самостоятельного обслуживания ВМ — перемещенный tooa узел, который еще не была обновлена и затем включаются. Из-за перезагрузки hello ВМ hello временного диска теряется и обновляются динамические IP-адреса, связанные с виртуального сетевого интерфейса.

Если запустить самостоятельного обслуживания и возникает ошибка во время процесса hello, hello Операция остановлена, hello виртуальной Машины не обновляется и она также удаляется из итерации hello планового обслуживания. Необходимо обратиться в более позднее время с новым расписанием и предлагаются новые возможности toodo самостоятельного обслуживания. 

Здравствуйте, по прошествии окна самообслуживания hello **запланированного окна обслуживания** начинается. Во время этого временного окна можно выполнять запросы для окна обслуживания hello, но больше не будет возможности toostart hello обслуживания самостоятельно.

## <a name="availability-considerations-during-planned-maintenance"></a>Вопросы доступности во время планового обслуживания 

Если вы решите toowait до hello запланированного периода обслуживания, существует несколько вещей tooconsider поддержка hello наивысший доступный объем виртуальных машин. 

### <a name="paired-regions"></a>Пары регионов

Каждый регион Azure связаны с другой области внутри hello же geography вместе они делают региональные пары. Во время планового обслуживания Azure только обновит hello виртуальных машин в одной области пары области. Например, при обновлении hello виртуальных машин в северо-центральной части США, Azure не обновит все виртуальные машины в центральных штатах юга США на hello то же время. Однако другие области Северной Европе могут быть в режиме технического обслуживания на hello же время, что Восток США. Чтобы лучше распределить виртуальные машины по регионам, ознакомьтесь с принципами работы пар регионов. Дополнительные сведения см. в статье [Непрерывность бизнес-процессов и аварийное восстановление в службах BizTalk: пары регионов Azure](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).

### <a name="availability-sets-and-scale-sets"></a>Группы доступности и масштабируемые наборы

При развертывании рабочей нагрузки на виртуальных машинах Azure, можно создать виртуальные машины hello в приложении tooyour набор tooprovide доступности высокого уровня доступности. Эта конфигурация обеспечит доступность по крайней мере одной виртуальной машины во время обслуживания или при сбое.

В группе доступности отдельные виртуальные машины распределены по копии too20 обновления доменах. Во время планового обслуживания в конкретный момент времени всегда затрагивается только один домен обновления. Имейте в виду, что порядок hello понижает домены обновления не произойдет обязательно последовательно. 

Наборы масштабирования виртуальных машин являются ресурсом вычислений Azure, позволяющая toodeploy и управление набором идентичные виртуальные машины как одного ресурса. набор масштабирования Hello автоматически развертывается в доменах обновления, такие как виртуальные машины в наборе доступности. Как и группа доступности, масштабируемый набор одновременно развертывается только в одном домене обновления.

Дополнительные сведения о настройке виртуальных машин высокой доступности см. в разделе Управление hello доступности виртуальных машин для Windows (.. / articles/virtual-machines/windows/manage-availability.md) или [Linux](../articles/virtual-machines/linux/manage-availability.md).
