<span data-ttu-id="67cc0-101">Azure периодически выполняет обновления tooimprove hello надежность, производительность и безопасность инфраструктуры hello узла для виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="67cc0-101">Azure periodically performs updates tooimprove hello reliability, performance, and security of hello host infrastructure for virtual machines.</span></span> <span data-ttu-id="67cc0-102">Эти обновления в диапазоне от исправления программных компонентов в среде (например, операционная система, низкоуровневой оболочки и различных агентах, развернутой на узле hello) размещения hello обновление сетевыми компонентами, toohardware вывода из эксплуатации.</span><span class="sxs-lookup"><span data-stu-id="67cc0-102">These updates range from patching software components in hello hosting environment (like operating system, hypervisor, and various agents deployed on hello host), upgrading networking components, toohardware decommissioning.</span></span> <span data-ttu-id="67cc0-103">Большинство этих обновлений Hello выполняются без влияния toohello размещенных виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="67cc0-103">hello majority of these updates are performed without any impact toohello hosted virtual machines.</span></span> <span data-ttu-id="67cc0-104">Но в некоторых случаях они все же оказывают определенное воздействие:</span><span class="sxs-lookup"><span data-stu-id="67cc0-104">However, there are cases where updates do have an impact:</span></span>

- <span data-ttu-id="67cc0-105">Если обслуживание hello не требует перезагрузки, Azure использует hello toopause миграцию виртуальной Машины во время обновления узла hello.</span><span class="sxs-lookup"><span data-stu-id="67cc0-105">If hello maintenance does not require a reboot, Azure uses in-place migration toopause hello VM while hello host is updated.</span></span>

- <span data-ttu-id="67cc0-106">Если для обслуживания требуется перезагрузка, появляются уведомления об запланировано обслуживание hello.</span><span class="sxs-lookup"><span data-stu-id="67cc0-106">If maintenance requires a reboot, you get a notice of when hello maintenance is planned.</span></span> <span data-ttu-id="67cc0-107">В таких случаях можно будет дана временное окно, где можно начать обслуживания hello самостоятельно, в заданное время для вас.</span><span class="sxs-lookup"><span data-stu-id="67cc0-107">In these cases, you'll also be given a time window where you can start hello maintenance yourself, at a time that works for you.</span></span>

<span data-ttu-id="67cc0-108">На этой странице описано, как Microsoft Azure выполняет обслуживание обоих типов.</span><span class="sxs-lookup"><span data-stu-id="67cc0-108">This page describes how Microsoft Azure performs both types of maintenance.</span></span> <span data-ttu-id="67cc0-109">Дополнительные сведения о незапланированных событий (сбои), см. Управление доступностью виртуальных машин hello для [Windows] (.. / articles/virtual-machines/windows/manage-availability.md) или [Linux](../articles/virtual-machines/linux/manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="67cc0-109">For more information about unplanned events (outages), see Manage hello availability of virtual machines for [Windows] (../articles/virtual-machines/windows/manage-availability.md) or [Linux](../articles/virtual-machines/linux/manage-availability.md).</span></span>

<span data-ttu-id="67cc0-110">Приложения, работающие на виртуальной машине можно собирать сведения о предстоящих обновлениях с помощью hello метаданных службы Azure для [Windows](../articles/virtual-machines/windows/instance-metadata-service.md) или [Linux] (.. / articles/virtual-machines/linux/instance-metadata-service.md).</span><span class="sxs-lookup"><span data-stu-id="67cc0-110">Applications running in a virtual machine can gather information about upcoming updates by using hello Azure Metadata Service for [Windows](../articles/virtual-machines/windows/instance-metadata-service.md) or [Linux] (../articles/virtual-machines/linux/instance-metadata-service.md).</span></span>

## <a name="in-place-vm-migration"></a><span data-ttu-id="67cc0-111">Миграция виртуальной машины на месте</span><span class="sxs-lookup"><span data-stu-id="67cc0-111">In-place VM migration</span></span>

<span data-ttu-id="67cc0-112">Если обновления не требуют полной перезагрузки, используется динамическая миграция на месте.</span><span class="sxs-lookup"><span data-stu-id="67cc0-112">When updates don't require a full reboot, an in-place live migration is used.</span></span> <span data-ttu-id="67cc0-113">Во время обновления hello hello виртуальная машина приостановлена в течение 30 секунд, сохраняя памяти hello в оперативной памяти, а среда размещения hello применяется hello необходимых обновлений и исправлений.</span><span class="sxs-lookup"><span data-stu-id="67cc0-113">During hello update hello virtual machine is paused for about 30 seconds, preserving hello memory in RAM, while hello hosting environment applies hello necessary updates and patches.</span></span> <span data-ttu-id="67cc0-114">затем возобновляется Hello виртуальной машины и автоматической синхронизации часов hello hello виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="67cc0-114">hello virtual machine is then resumed and hello clock of hello virtual machine is automatically synchronized.</span></span>

<span data-ttu-id="67cc0-115">Домены обновления виртуальных машин в группах доступности обновляются поочередно.</span><span class="sxs-lookup"><span data-stu-id="67cc0-115">For VMs in availability sets, update domains are updated one at a time.</span></span> <span data-ttu-id="67cc0-116">Все виртуальные машины в одном домене обновления (UD) приостановлена, обновление и затем возобновляется до планового обслуживания перемещения на toohello UD Далее.</span><span class="sxs-lookup"><span data-stu-id="67cc0-116">All VMs in one update domain (UD) are paused, updated and then resumed before planned maintenance moves on toohello next UD.</span></span>

<span data-ttu-id="67cc0-117">Эти обновления могут влиять на некоторые приложения.</span><span class="sxs-lookup"><span data-stu-id="67cc0-117">Some applications may be impacted by these types of updates.</span></span> <span data-ttu-id="67cc0-118">Приложения, которые выполняют событий в реальном времени обработки, такой как потоковой передачи мультимедиа или перекодировки или высокой пропускной способностью сети сценариев, может оказаться спроектированный tootolerate 30 секундной паузы.</span><span class="sxs-lookup"><span data-stu-id="67cc0-118">Applications that perform real-time event processing, like media streaming or transcoding, or high throughput networking scenarios, may not be designed tootolerate a 30 second pause.</span></span> <!-- sooooo, what should they do? --> 


## <a name="maintenance-requiring-a-reboot"></a><span data-ttu-id="67cc0-119">Обслуживание, требующее перезагрузки</span><span class="sxs-lookup"><span data-stu-id="67cc0-119">Maintenance requiring a reboot</span></span>

<span data-ttu-id="67cc0-120">Если виртуальные машины должны toobe перезагрузки при плановом обслуживании, вы будете оповещены заранее.</span><span class="sxs-lookup"><span data-stu-id="67cc0-120">When VMs need toobe rebooted for planned maintenance, you are notified in advance.</span></span> <span data-ttu-id="67cc0-121">Плановое обслуживание включает два этапа: hello самообслуживания и периоды запланированного обслуживания.</span><span class="sxs-lookup"><span data-stu-id="67cc0-121">Planned maintenance has two phases: hello self-service window and a scheduled maintenance window.</span></span>

<span data-ttu-id="67cc0-122">Hello **самообслуживания окна** позволяет инициировать hello обслуживания на виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="67cc0-122">hello **self-service window** lets you initiate hello maintenance on your VMs.</span></span> <span data-ttu-id="67cc0-123">В течение этого времени можно запросить каждой виртуальной Машины toosee их состояние и проверьте результат hello своего последнего запроса на обслуживание.</span><span class="sxs-lookup"><span data-stu-id="67cc0-123">During this time, you can query each VM toosee their status and check hello result of your last maintenance request.</span></span>

<span data-ttu-id="67cc0-124">При запуске самостоятельного обслуживания ВМ — перемещенный tooa узел, который еще не была обновлена и затем включаются.</span><span class="sxs-lookup"><span data-stu-id="67cc0-124">When you start self-service maintenance, your VM is moved tooa node that has already been updated and then powers it back on.</span></span> <span data-ttu-id="67cc0-125">Из-за перезагрузки hello ВМ hello временного диска теряется и обновляются динамические IP-адреса, связанные с виртуального сетевого интерфейса.</span><span class="sxs-lookup"><span data-stu-id="67cc0-125">Because hello VM reboots, hello temporary disk is lost and dynamic IP addresses associated with virtual network interface are updated.</span></span>

<span data-ttu-id="67cc0-126">Если запустить самостоятельного обслуживания и возникает ошибка во время процесса hello, hello Операция остановлена, hello виртуальной Машины не обновляется и она также удаляется из итерации hello планового обслуживания.</span><span class="sxs-lookup"><span data-stu-id="67cc0-126">If you start self-service maintenance and there is an error during hello process, hello operation is stopped, hello VM is not updated and it is also removed from hello planned maintenance iteration.</span></span> <span data-ttu-id="67cc0-127">Необходимо обратиться в более позднее время с новым расписанием и предлагаются новые возможности toodo самостоятельного обслуживания.</span><span class="sxs-lookup"><span data-stu-id="67cc0-127">You will be contacted in a later time with a new schedule and offered a new opportunity toodo self-service maintenance.</span></span> 

<span data-ttu-id="67cc0-128">Здравствуйте, по прошествии окна самообслуживания hello **запланированного окна обслуживания** начинается.</span><span class="sxs-lookup"><span data-stu-id="67cc0-128">When hello self-service window has passed, hello **scheduled maintenance window** begins.</span></span> <span data-ttu-id="67cc0-129">Во время этого временного окна можно выполнять запросы для окна обслуживания hello, но больше не будет возможности toostart hello обслуживания самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="67cc0-129">During this time window, you can still query for hello maintenance window, but no longer be able toostart hello maintenance yourself.</span></span>

## <a name="availability-considerations-during-planned-maintenance"></a><span data-ttu-id="67cc0-130">Вопросы доступности во время планового обслуживания</span><span class="sxs-lookup"><span data-stu-id="67cc0-130">Availability Considerations during Planned Maintenance</span></span> 

<span data-ttu-id="67cc0-131">Если вы решите toowait до hello запланированного периода обслуживания, существует несколько вещей tooconsider поддержка hello наивысший доступный объем виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="67cc0-131">If you decide toowait until hello planned maintenance window, there are a few things tooconsider for maintaining hello highest availabilty of your VMs.</span></span> 

### <a name="paired-regions"></a><span data-ttu-id="67cc0-132">Пары регионов</span><span class="sxs-lookup"><span data-stu-id="67cc0-132">Paired Regions</span></span>

<span data-ttu-id="67cc0-133">Каждый регион Azure связаны с другой области внутри hello же geography вместе они делают региональные пары.</span><span class="sxs-lookup"><span data-stu-id="67cc0-133">Each Azure region is paired with another region within hello same geography, together they make a regional pair.</span></span> <span data-ttu-id="67cc0-134">Во время планового обслуживания Azure только обновит hello виртуальных машин в одной области пары области.</span><span class="sxs-lookup"><span data-stu-id="67cc0-134">During planned maintenance, Azure will only update hello VMs in a single region of a region pair.</span></span> <span data-ttu-id="67cc0-135">Например, при обновлении hello виртуальных машин в северо-центральной части США, Azure не обновит все виртуальные машины в центральных штатах юга США на hello то же время.</span><span class="sxs-lookup"><span data-stu-id="67cc0-135">For example, when updating hello Virtual Machines in North Central US, Azure will not update any Virtual Machines in South Central US at hello same time.</span></span> <span data-ttu-id="67cc0-136">Однако другие области Северной Европе могут быть в режиме технического обслуживания на hello же время, что Восток США.</span><span class="sxs-lookup"><span data-stu-id="67cc0-136">However, other regions such as North Europe can be under maintenance at hello same time as East US.</span></span> <span data-ttu-id="67cc0-137">Чтобы лучше распределить виртуальные машины по регионам, ознакомьтесь с принципами работы пар регионов.</span><span class="sxs-lookup"><span data-stu-id="67cc0-137">Understanding how region pairs work can help you better distribute your VMs across regions.</span></span> <span data-ttu-id="67cc0-138">Дополнительные сведения см. в статье [Непрерывность бизнес-процессов и аварийное восстановление в службах BizTalk: пары регионов Azure](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).</span><span class="sxs-lookup"><span data-stu-id="67cc0-138">For more information, see [Azure region pairs](https://docs.microsoft.com/azure/best-practices-availability-paired-regions).</span></span>

### <a name="availability-sets-and-scale-sets"></a><span data-ttu-id="67cc0-139">Группы доступности и масштабируемые наборы</span><span class="sxs-lookup"><span data-stu-id="67cc0-139">Availability sets and scale sets</span></span>

<span data-ttu-id="67cc0-140">При развертывании рабочей нагрузки на виртуальных машинах Azure, можно создать виртуальные машины hello в приложении tooyour набор tooprovide доступности высокого уровня доступности.</span><span class="sxs-lookup"><span data-stu-id="67cc0-140">When deploying a workload on Azure VMs, you can create hello VMs within an availability set tooprovide high availability tooyour application.</span></span> <span data-ttu-id="67cc0-141">Эта конфигурация обеспечит доступность по крайней мере одной виртуальной машины во время обслуживания или при сбое.</span><span class="sxs-lookup"><span data-stu-id="67cc0-141">This ensures that during either an outage or maintenance events, at least one virtual machine is available.</span></span>

<span data-ttu-id="67cc0-142">В группе доступности отдельные виртуальные машины распределены по копии too20 обновления доменах.</span><span class="sxs-lookup"><span data-stu-id="67cc0-142">Within an availability set, individual VMs are spread across up too20 update domains (UDs).</span></span> <span data-ttu-id="67cc0-143">Во время планового обслуживания в конкретный момент времени всегда затрагивается только один домен обновления.</span><span class="sxs-lookup"><span data-stu-id="67cc0-143">During planned maintenance, only a single update domain is impacted at any given time.</span></span> <span data-ttu-id="67cc0-144">Имейте в виду, что порядок hello понижает домены обновления не произойдет обязательно последовательно.</span><span class="sxs-lookup"><span data-stu-id="67cc0-144">Be aware that hello order of update domains being impacted does not necessarily happen sequentially.</span></span> 

<span data-ttu-id="67cc0-145">Наборы масштабирования виртуальных машин являются ресурсом вычислений Azure, позволяющая toodeploy и управление набором идентичные виртуальные машины как одного ресурса.</span><span class="sxs-lookup"><span data-stu-id="67cc0-145">Virtual machine scale sets are an Azure compute resource that enables you toodeploy and manage a set of identical VMs as a single resource.</span></span> <span data-ttu-id="67cc0-146">набор масштабирования Hello автоматически развертывается в доменах обновления, такие как виртуальные машины в наборе доступности.</span><span class="sxs-lookup"><span data-stu-id="67cc0-146">hello scale set is automatically deployed across update domains, like VMs in an availability set.</span></span> <span data-ttu-id="67cc0-147">Как и группа доступности, масштабируемый набор одновременно развертывается только в одном домене обновления.</span><span class="sxs-lookup"><span data-stu-id="67cc0-147">Just like with availability sets, with scale sets only a single update domain is impacted at any given time.</span></span>

<span data-ttu-id="67cc0-148">Дополнительные сведения о настройке виртуальных машин высокой доступности см. в разделе Управление hello доступности виртуальных машин для Windows (.. / articles/virtual-machines/windows/manage-availability.md) или [Linux](../articles/virtual-machines/linux/manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="67cc0-148">For more information about configuring your virtual machines for high availability, see Manage hello availability of your virtual machines for Windows (../articles/virtual-machines/windows/manage-availability.md) or [Linux](../articles/virtual-machines/linux/manage-availability.md).</span></span>
